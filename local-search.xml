<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>knowledge-distillation</title>
    <link href="/2021/01/13/knowledge-distillation/"/>
    <url>/2021/01/13/knowledge-distillation/</url>
    
    <content type="html"><![CDATA[<h2 id="çŸ¥è¯†è’¸é¦"><a href="#çŸ¥è¯†è’¸é¦" class="headerlink" title="çŸ¥è¯†è’¸é¦"></a>çŸ¥è¯†è’¸é¦</h2><h4 id="1-åŸºæœ¬æ€æƒ³"><a href="#1-åŸºæœ¬æ€æƒ³" class="headerlink" title="1. åŸºæœ¬æ€æƒ³"></a>1. åŸºæœ¬æ€æƒ³</h4><p>â€‹        çŸ¥è¯†è’¸é¦é€šè¿‡é‡‡ç”¨é¢„å…ˆè®­ç»ƒå¥½çš„æ•™å¸ˆæ¨¡å‹( teacher model) çš„è¾“å‡ºä½œä¸ºç›‘ç£ä¿¡å·å»è®­ç»ƒå¦å¤–ä¸€ä¸ªè½»é‡åŒ–çš„ç½‘ç»œ( student model ) ã€‚ä»è€Œå®ç°å°†å¤æ‚ç½‘ç»œ(è€å¸ˆæ¨¡å‹)çš„çŸ¥è¯†è¿ç§»åˆ°å°ç½‘ç»œ(å­¦ç”Ÿæ¨¡å‹) ä¸­ï¼Œ æé«˜å°ç½‘ç»œçš„ç²¾åº¦ã€‚</p><p>â€‹        çŸ¥è¯†è’¸é¦é¦–å…ˆç”± Hinton åœ¨ Distilling the Knowledge in a Neural Network æå‡ºï¼Œä½¿ç”¨ teacher æ¨¡å‹å»æŒ‡å¯¼ä¸€ä¸ªå‚æ•°é‡å’Œè¿ç®—é‡æ›´å°‘çš„ student æ¨¡å‹ã€‚student æ¨¡å‹çš„è®­ç»ƒæœ‰ä¸¤ä¸ªç›®æ ‡ï¼šä¸€ä¸ªæ˜¯ student æ¨¡å‹è¾“å‡ºçš„ç±»åˆ«æ¦‚ç‡å’Œ label çš„äº¤å‰ç†µï¼Œå¦ä¸€ä¸ªæ˜¯ student æ¨¡å‹è¾“å‡ºçš„ç±»åˆ«æ¦‚ç‡å’Œ teacher æ¨¡å‹è¾“å‡ºçš„ç±»åˆ«æ¦‚ç‡çš„äº¤å‰ç†µï¼Œè®°ä¸º soft targetï¼Œè¿™ä¸¤ä¸ª loss åŠ æƒåå¾—åˆ°æœ€ç»ˆçš„è®­ç»ƒ lossï¼Œå…±åŒæŒ‡å¯¼ student æ¨¡å‹çš„è®­ç»ƒã€‚ å®é™…æ“ä½œçš„æ—¶å€™ï¼Œä¼šå°†åŸæ¥çš„ softmax é™¤ä»¥ Tï¼Œ å˜ä¸º:</p><script type="math/tex; mode=display">y_i = \frac{exp(x_i / T)}{\sum_j{exp(x_j/T)}}</script><p><img src="/2021/01/13/knowledge-distillation/5.png" alt="img" style="zoom:30%;"></p><h4 id="2-ä¼˜ç¼ºç‚¹"><a href="#2-ä¼˜ç¼ºç‚¹" class="headerlink" title="2. ä¼˜ç¼ºç‚¹"></a>2. ä¼˜ç¼ºç‚¹</h4><h5 id="2-1-ä¼˜ç‚¹"><a href="#2-1-ä¼˜ç‚¹" class="headerlink" title="2.1 ä¼˜ç‚¹"></a>2.1 ä¼˜ç‚¹</h5><ul><li>çŸ¥è¯†è’¸é¦ä¸å±€é™äºç‰¹å®šçš„ç½‘ç»œï¼Œ å¯ä»¥å®ç°ä»»ä½•ç½‘ç»œçš„è’¸é¦ã€‚ </li></ul><h5 id="2-2-ç¼ºç‚¹"><a href="#2-2-ç¼ºç‚¹" class="headerlink" title="2.2 ç¼ºç‚¹"></a>2.2 ç¼ºç‚¹</h5><ul><li><p>çŸ¥è¯†è’¸é¦çš„è¿‡ç¨‹ä¹Ÿæ˜¯è®­ç»ƒçš„è¿‡ç¨‹ï¼Œ åŒæ ·éœ€è¦è¶³å¤Ÿå¤šçš„æ•°æ®å¹¶è€—è´¹å¤§é‡çš„æ—¶é—´</p></li><li><p>éœ€è¦ç²¾å¿ƒè®¾è®¡å­¦ç”Ÿç½‘ç»œã€‚</p></li></ul><h5 id="2-3-ç›¸å…³æ”¹è¿›"><a href="#2-3-ç›¸å…³æ”¹è¿›" class="headerlink" title="2.3 ç›¸å…³æ”¹è¿›"></a>2.3 ç›¸å…³æ”¹è¿›</h5><ul><li><p>ä½¿ç”¨ GAN æ¥ç”Ÿæˆç›¸åº”çš„æ•°æ®</p><p>Data-free Learning of Student Networks</p><p>Data-Free Adversarial Distillation</p></li><li><p>åˆ©ç”¨åå‘ä¼ æ’­æ¥æ›´æ–°æ•°æ®</p><p>Data-Free knowledge distillation for Deep Neural Networks</p><p>Dreaming to Distill: Data-free Knowledge Transfer via DeepInversion</p></li><li><p>è®©æ•™å¸ˆæ¨¡å‹å’Œå­¦ç”Ÿæ¨¡å‹çš„FSPçŸ©é˜µï¼ˆç‰¹å¾çš„å†…ç§¯ï¼‰å°½é‡ä¸€è‡´ï¼Œé™ä½äº†è’¸é¦çš„éš¾åº¦</p><p>A Gift from Knowledge Distillation: Fast Optimization, Network Minimization and Transfer Learning</p></li><li><p>ä½¿ç”¨æ·±å±‚æ¨¡å‹æ¥æŒ‡å¯¼æµ…å±‚æ¨¡å‹çš„å­¦ä¹ ï¼Œå¯ä»¥å®ç°å­¦ç”Ÿæ¨¡å‹å’Œæ•™å¸ˆæ¨¡å‹çš„è”åˆè®­ç»ƒ</p><p>Be Your Own Teacher: Improve the Performance of Convolutional Neural Networks via Self Distillation</p><p>FastBERT: a Self-distilling BERT with Adaptive Inference Time</p></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>TensorRT</title>
    <link href="/2021/01/12/TensorRT/"/>
    <url>/2021/01/12/TensorRT/</url>
    
    <content type="html"><![CDATA[<h3 id="1-TensorRT-ç®€ä»‹"><a href="#1-TensorRT-ç®€ä»‹" class="headerlink" title="1. TensorRT ç®€ä»‹"></a>1. TensorRT ç®€ä»‹</h3><p>TensorRT æ˜¯ä¸€ä¸ªå‰å‘æ¨ç†æ¡†æ¶ã€‚åœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼ŒåŸºäºTensorRT çš„åº”ç”¨ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦å¯ä»¥æ¯” CPU å¹³å°é€Ÿåº¦å¿« 40 å€ã€‚</p><ul><li>ä¸åŒçš„ç¡¬ä»¶éœ€è¦åŒ¹é…ä¸åŒçš„ cudaåº“ï¼Œç„¶åè¿˜éœ€è¦è¿›è¡Œæµ‹è¯•ï¼Œ æ¯”å¦‚é€‰æ ¸ç­‰æ“ä½œ</li><li>TensorRT ä»¥  NVIDIA çš„å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ CUDA ä¸ºåŸºç¡€æ„å»ºè€Œæˆã€‚</li><li>TensorRT é’ˆå¯¹å¤šç§æ·±åº¦å­¦ä¹ æ¨ç†åº”ç”¨çš„ç”Ÿäº§éƒ¨ç½²æä¾› INT8 å’Œ FP 16 ä¼˜åŒ–</li></ul><p>TensorRT æ¡†æ¶æ”¯æŒå¤§å¤šæ•°çš„ DeepLearning æ¡†æ¶</p><p><img src="/2021/01/12/TensorRT/1.png" style="zoom:35%;"></p><p>TensorRT æ ¸å¿ƒä¼˜åŒ–æ–¹æ³•</p><p><img src="/2021/01/12/TensorRT/2.png" style="zoom:50%;"></p><h3 id="2-TensorRT-OSS"><a href="#2-TensorRT-OSS" class="headerlink" title="2. TensorRT OSS"></a>2. TensorRT OSS</h3><h5 id="1-TensorRT-OSS"><a href="#1-TensorRT-OSS" class="headerlink" title="(1) TensorRT OSS"></a>(1) TensorRT OSS</h5><p>TensorRT åˆ†ä¸ºå¼€æºå’Œé—­æºä¸¤éƒ¨åˆ†</p><p>å¼€æºéƒ¨åˆ†ï¼š<a href="https://github.com/NVIDIA/TensorRT">https://github.com/NVIDIA/TensorRT</a></p><p>â€‹        NVIDIA TensorRT çš„å¼€æºè½¯ä»¶(OSS) ç»„ä»¶ï¼šå…¶ä¸­åŒ…æ‹¬ TensorRT æ’ä»¶å’Œè§£æå™¨(caffe å’Œ ONNX) çš„èµ„æºï¼Œ ä»¥åŠæ¼”ç¤º TensorRT å¹³å°ç”¨æ³•å’ŒåŠŸèƒ½çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚ è¿™äº›å¼€æºè½¯ä»¶ç»„ä»¶æ˜¯ TensorRT General Availibility(GA) å‘è¡Œç‰ˆçš„å­é›†ï¼Œ å…·æœ‰ä¸€äº›æ‰©å±•å’Œé”™è¯¯ä¿®å¤ã€‚</p><p>é—­æºç‰ˆæœ¬ï¼š é‡åŒ–ã€æ¨ç†è®¡ç®—ã€kernel æŸ¥æ‰¾ç­‰</p><h5 id="2-å®‰è£…æµç¨‹"><a href="#2-å®‰è£…æµç¨‹" class="headerlink" title="(2) å®‰è£…æµç¨‹"></a>(2) å®‰è£…æµç¨‹</h5><p>git è·å–å®Œæˆçš„ OSS é¡¹ç›®åŒ…</p><pre><code class="hljs shell">git clone -b https://github/nvidia/TensorRT TensorRTcd TensorRTgit submodule update --init --recursive # å®‰è£…ä¸€äº›å­æ¨¡å—: æ¯”å¦‚ cubã€protobufã€onnxã€pybind11 ç­‰export TRT_SOURCE=&#x27;pwd&#x27;</code></pre><p>å®‰è£… GA åŒ…</p><pre><code class="hljs shell">cd ~/Downloadstar -xvzf TensorRT-7.2.1.6.CentOS-7.6.x86_64-gnu.cuda-11.0.cudnn8.0.tar.gzexport TRT_RELEASE=`pwd`/TensorRT-7.2.1.6</code></pre><p>OSS é¡¹ç›®ç¼–è¯‘</p><pre><code class="hljs shell">cd $TRT_SOURCEmkdir -p build &amp;&amp; cd buildcmake .. -DTRT_LIB_DIR=$TRT_RELEASE/lib -DTRT_OUT_DIR=`pwd`/out # ä¼šå°† OSS ç‰ˆæœ¬è¦†ç›–åŸæœ‰ç‰ˆæœ¬<span class="hljs-meta">#</span><span class="bash"> è¾“å‡ºäºŒè¿›åˆ¶åº“ lib å’Œ å¯æ‰§è¡Œæ–‡ä»¶(ç¤ºä¾‹ä»£ç )</span>make -j$(nproc)</code></pre><h5 id="3-TensorRT-OSS-ç›®å½•"><a href="#3-TensorRT-OSS-ç›®å½•" class="headerlink" title="(3) TensorRT OSS ç›®å½•"></a>(3) TensorRT OSS ç›®å½•</h5><ul><li>parser</li><li>plugin</li><li>examples</li></ul><h3 id="3-TensorRT-å¼€å‘"><a href="#3-TensorRT-å¼€å‘" class="headerlink" title="3. TensorRT å¼€å‘"></a>3. TensorRT å¼€å‘</h3><h5 id="ï¼ˆ1ï¼‰pytorch-gt-onnx"><a href="#ï¼ˆ1ï¼‰pytorch-gt-onnx" class="headerlink" title="ï¼ˆ1ï¼‰pytorch -&gt; onnx"></a>ï¼ˆ1ï¼‰pytorch -&gt; onnx</h5><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<span class="hljs-keyword">from</span> torch.autograd <span class="hljs-keyword">import</span> Variable<span class="hljs-keyword">import</span> torch.onnx <span class="hljs-keyword">as</span> torch_onnx<span class="hljs-keyword">import</span> onnx<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span>    input_shape = (<span class="hljs-number">3</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span>)    model_onnx_path = <span class="hljs-string">&#x27;unet.onnx&#x27;</span>    dummy_input = Variable(torch.randn(<span class="hljs-number">1</span>, *input_shape))    model = torch.hub.load(<span class="hljs-string">&#x27;mateuszbuda/brain-segmentation-pytorch&#x27;</span>, <span class="hljs-string">&#x27;unet&#x27;</span>, in_channels=<span class="hljs-number">3</span>, out_channels=<span class="hljs-number">1</span>, init_features=<span class="hljs-number">32</span>, pretrained=<span class="hljs-literal">True</span>)        model.train(<span class="hljs-literal">False</span>)    inputs = [<span class="hljs-string">&quot;input.1&quot;</span>]    outputs = [<span class="hljs-string">&quot;186&quot;</span>]    dynamic_axes = &#123;<span class="hljs-string">&#x27;input.1&#x27;</span>:&#123;<span class="hljs-number">0</span>: <span class="hljs-string">&#x27;batch&#x27;</span>&#125;, <span class="hljs-string">&#x27;186&#x27;</span>:&#123;<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;batch&#x27;</span>&#125;&#125;    out = torch.onnx.export(model, dummy_input, model_onnx_path,                             input_names=inputs, output_names=outputs, dynamic_axes=dynamic_axes)</code></pre><h5 id="ï¼ˆ2ï¼‰è®¡ç®—å›¾ä¼˜åŒ–ï¼šonnx-ä¼˜åŒ–"><a href="#ï¼ˆ2ï¼‰è®¡ç®—å›¾ä¼˜åŒ–ï¼šonnx-ä¼˜åŒ–" class="headerlink" title="ï¼ˆ2ï¼‰è®¡ç®—å›¾ä¼˜åŒ–ï¼šonnx ä¼˜åŒ–"></a>ï¼ˆ2ï¼‰è®¡ç®—å›¾ä¼˜åŒ–ï¼šonnx ä¼˜åŒ–</h5><p><strong>å¸¸è§çš„å¤„ç†ï¼š</strong></p><ul><li><p>reshape çš„æ—¶å€™çš„å¾ˆå¤šå†—ä½™ç®—å­çš„é—®é¢˜</p></li><li><p>è¾“å…¥çš„å½’ä¸€åŒ–ï¼šå»æ‰ï¼Œæ”¾åœ¨ä»£ç é€»è¾‘é‡Œé¢</p></li><li>conv_bn çš„åˆå¹¶</li><li>ä¸€äº›æ— æ³• boardcast çš„é—®é¢˜</li><li>æ–°å±‚çš„æ³¨å†Œ</li></ul><p><strong>ä¸¤ä¸ªå·¥å…·ï¼š</strong></p><ul><li><p>å¯è§†åŒ–å›¾:  Netron</p></li><li><p>onnx-simplify</p></li></ul><p><strong>onnx æ¨¡å‹å¿«é€ŸéªŒè¯ï¼š</strong></p><ul><li><p>TensorRT OSS å®Œæˆç¼–è¯‘ä¹‹åä¼šç”Ÿæˆ trtexec</p></li><li><p>é€šè¿‡ trtexec ç›´æ¥åŠ è½½ onnxï¼Œ éªŒè¯å¯¼å‡ºæ¨¡å‹æ˜¯å¦è¢« TensorRT æ”¯æŒ</p></li><li><p>æ ¹æ®æ”¯æŒæƒ…å†µï¼ŒæŒ‡å®šç®—å­å®ç°æ–¹æ¡ˆ</p><ul><li>ç›´æ¥åŸºäºç®—å­ op è¿›è¡Œå¼€å‘ï¼Œ æ¶‰åŠå¤šä¸ª kernel å¯åŠ¨ï¼Œæ€§èƒ½å¯èƒ½ç›¸å¯¹è¾ƒå·®</li><li>ä½¿ç”¨ plugin è¿›è¡Œå¼€å‘</li></ul></li></ul><h5 id="ï¼ˆ3ï¼‰-è‡ªå®šä¹‰ç»„ä»¶-TensorRT-Plugin"><a href="#ï¼ˆ3ï¼‰-è‡ªå®šä¹‰ç»„ä»¶-TensorRT-Plugin" class="headerlink" title="ï¼ˆ3ï¼‰ è‡ªå®šä¹‰ç»„ä»¶ TensorRT Plugin"></a>ï¼ˆ3ï¼‰ è‡ªå®šä¹‰ç»„ä»¶ TensorRT Plugin</h5><p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://docs.nvidia.com/deeplearning/tensorrt/developer-guide/index.html#extending">https://docs.nvidia.com/deeplearning/tensorrt/developer-guide/index.html#extending</a></p><p>TensorRT çš„ Plugin å¼€å‘è¯¦è§£<br>â‘  è§‚å¯Ÿç½‘ç»œç»“æ„ï¼Œ ç¡®è®¤ç®—å­çš„ç‰ˆæœ¬ã€åç§°ã€è¾“å…¥ã€è¾“å‡ºã€å‚æ•°åŠç›¸åº”æƒé‡<br>â‘¡ å¼€å‘ç®—å­çš„è§£ææ¨¡å— parser<br>â‘¢ ç»§æ‰¿ PluginV2Ext, å®Œæˆ kernel ä»¥åŠç›¸åº” API çš„å¼€å‘<br>â‘£ å®ç° Creator ç›¸å…³çš„æ“ä½œ</p><ul><li>è‡ªå®šä¹‰æ·»åŠ æ˜¯é€šè¿‡æ‰©å±• IPluginV2Ext å’Œ IPluginCreator å®ç°çš„</li><li>IPluginV2Ext: IPluginV2 çš„å‡çº§ç‰ˆæœ¬ï¼Œ å®ç°è‡ªå®šä¹‰æ’ä»¶çš„åŸºç±»ï¼Œ åŒ…å«ç‰ˆæœ¬åŒ–å’Œå…¶ä»–æ ¼å¼å’Œå•ç²¾åº¦çš„å¤„ç†</li><li>IPluginCreatorï¼š è‡ªå®šä¹‰å±‚çš„åˆ›å»ºç±»ï¼Œ å¯ä»¥é€šè¿‡å®ƒè·å–æ’ä»¶çš„åç§°ã€ç‰ˆæœ¬ä¿¡æ¯ã€å‚æ•°ç­‰ï¼Œ ä¹Ÿæä¾›ç½‘ç»œåˆ›å»ºé˜¶æ®µåˆ›å»ºæ’ä»¶çš„æ–¹æ³•ï¼Œ å¹¶åœ¨æ¨ç†é˜¶æ®µååºåˆ—åŒ–å®ƒã€‚</li></ul><h3 id="4-TensorRT-Plugin-å¼€å‘"><a href="#4-TensorRT-Plugin-å¼€å‘" class="headerlink" title="4. TensorRT Plugin å¼€å‘"></a>4. TensorRT Plugin å¼€å‘</h3><p>è‡ªå®šä¹‰ç»„ä»¶ TensorRT Plugin çš„æ•´ä½“æµç¨‹å¦‚ä¸‹æ‰€ç¤º:</p><ol><li>å®ç° Plugin ç±»å’Œ PluginCreator ç±»</li><li>åœ¨  InferPlugin.cpp ä¸­æ³¨å†Œæ–° creator</li><li>ä¿®æ”¹ CMakeLists.txt å¹¶ç¼–è¯‘ nvinfer_plugin åº“</li><li>åœ¨ onnx-tensorrt ä¸­æ³¨å†Œæ–°çš„ Pluginï¼šåœ¨ onnx ä¸­æ·»åŠ  parser</li><li>ç¼–è¯‘ nvonnxparse åº“</li><li>æ›¿æ¢ nvinfer_plugin å’Œ nvonnxparser åº“ï¼Œä½¿ç”¨ trtexec å°† onnx è½¬æ¢ä¸º tensorrt æ¨¡å‹</li></ol><p>ä¸‹é¢å¯¹æ¯ä¸€ä¸ªæ­¥éª¤è¿›è¡Œè¯¦ç»†çš„è®²è§£ï¼š</p><h5 id="Step1-å®ç°-Plugin-ç±»-å’Œ-PluginCreator-ç±»"><a href="#Step1-å®ç°-Plugin-ç±»-å’Œ-PluginCreator-ç±»" class="headerlink" title="Step1 å®ç° Plugin ç±» å’Œ PluginCreator ç±»"></a>Step1 å®ç° Plugin ç±» å’Œ PluginCreator ç±»</h5><p>è¯¥æ­¥éª¤å¯ä»¥å‚è€ƒä¸€ä¸‹ TensorRT å®˜æ–¹ plugin åº“ï¼š <a href="https://github.com/NVIDIA/TensorRT/tree/master/pluginã€‚å®˜æ–¹æä¾›äº†è¾ƒå¤šçš„">https://github.com/NVIDIA/TensorRT/tree/master/pluginã€‚å®˜æ–¹æä¾›äº†è¾ƒå¤šçš„</a> plugin æ’ä»¶ï¼Œ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶æºç ï¼Œç„¶åé€šè¿‡æ¨¡ä»¿æºç æ¥å­¦ä¹  plugin çš„ç¼–å†™ã€‚ è¿™é‡Œæˆ‘ä»¬ä»¥ nmsPlugin æ¥çœ‹ä¸€ä¸‹è‡ªå®šä¹‰çš„æ’ä»¶å¦‚ä½•ç¼–å†™:</p><pre><code class="hljs shell">.â”œâ”€â”€ CMakeLists.txtâ”œâ”€â”€ README.mdâ”œâ”€â”€ nmsPlugin.cpp  â””â”€â”€ nmsPlugin.h0 directories, 4 files</code></pre><p>è¿™é‡Œçš„ nmsPlugin ä¸»è¦å®ç° <code>DetectionOutput</code> å’Œ <code>NMSPluginCreator</code> ä¸¤ä¸ªç±»ï¼Œ å‰è€…ç”¨äºæ’ä»¶çš„å…·ä½“å®ç°ï¼Œåè€…ç”¨äºæ ¹æ®éœ€æ±‚åˆ›å»ºè¯¥æ’ä»¶ã€‚</p><pre><code class="hljs angelscript"><span class="hljs-keyword">class</span> <span class="hljs-symbol">DetectionOutput</span> : <span class="hljs-symbol">public</span> <span class="hljs-symbol">IPluginV2Ext</span><span class="hljs-symbol">class</span> <span class="hljs-symbol">NMSPluginCreator</span> : <span class="hljs-symbol">public</span> <span class="hljs-symbol">BaseCreator</span></code></pre><p><code>DetectionOutput</code> ç±»ç»§æ‰¿è‡ª <code>IPluginV2Ext</code>ã€‚åœ¨é˜…è¯»å…¶ä»–çš„æ’ä»¶æ³¨å†Œçš„æ—¶å€™ä¼šå‘ç°ç»§æ‰¿è‡ªå…¶ä»–ç±»çš„æƒ…å†µã€‚å…¶å®éšç€ TensorRT çš„ä¸æ–­å‘å±•ï¼Œæ’ä»¶æ¥å£ä¹Ÿåœ¨ä¸æ–­åœ°å˜åŒ–ï¼Œç”± v5 ç‰ˆæœ¬çš„<code>IPluginV2Ext</code>ï¼Œåˆ° v6 ç‰ˆæœ¬çš„ <code>IPluginV2IOExt</code> å’Œ <code>IPluginV2DynamicExt</code>ã€‚ å®˜æ–¹çš„å»ºè®®æ˜¯ç»§æ‰¿è‡ª  <code>IPluginV2IOExt</code> å’Œ  <code>IPluginV2DynamicExt</code>ã€‚ å…¶å®ä¸¤è€…åœ¨ç±»çš„ç¼–å†™ä¸Šç±»ä¼¼ï¼Œ åªæ˜¯å…¶ä¸­åè€…æ”¯æŒåŠ¨æ€å¤§å°ã€‚æˆ‘ä»¬çš„ç±»éœ€è¦ç»§æ‰¿è‡ªç‰¹å®šçš„ç±»ï¼Œå¹¶å®ç°å…¶ä¸­çš„è™šå‡½æ•°ã€‚</p><p>Plugin ç±»çš„ç›¸å…³å®ç°å‡½æ•°ï¼Œ ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œæˆ‘å°†å…¶åˆ†ä¸ºäº”ç±»ï¼Œ åˆ†åˆ«æ˜¯å‡†å¤‡å·¥ä½œæˆ–è€…ç»“æŸå·¥ä½œã€å…·ä½“å®ç°å’ŒåŠŸèƒ½å‡½æ•°ã€åºåˆ—åŒ–é—®é¢˜ã€æ’ä»¶çš„åŸºæœ¬è®¾ç½®å’Œè¿”å›å€¼ä¿¡æ¯ã€‚</p><p>ï¼ˆ1ï¼‰å‡†å¤‡å·¥ä½œæˆ–è€…ç»“æŸå·¥ä½œ</p><p><strong>æ„é€ å‡½æ•°:</strong> éœ€è¦æä¾›ä¸‰ç§åˆå§‹åŒ–æ–¹å¼ï¼Œ åˆ†åˆ«æ˜¯é€šè¿‡å‚æ•°çš„æ–¹å¼æ„é€ å‡½æ•°ï¼Œ é€šè¿‡ clone çš„æ–¹å¼æ„é€ å‡½æ•°ï¼Œ é€šè¿‡åºåˆ—åŒ–çš„æ–¹å¼æ„é€ å‡½æ•°   ğŸŒŸğŸŒŸ</p><pre><code class="hljs cpp"><span class="hljs-comment">// Parameterized constructor</span>DetectionOutput::DetectionOutput(DetectionOutputParameters params) : param(params)&#123;&#125;<span class="hljs-comment">// clone Constrcutor</span>DetectionOutput::DetectionOutput(DetectionOutputParameters params, <span class="hljs-keyword">int</span> C1, <span class="hljs-keyword">int</span> C2, <span class="hljs-keyword">int</span> numPriors)    : param(params), C1(C1), C2(C2), numPriors(numPriors)&#123;&#125;<span class="hljs-comment">// constructor</span>DetectionOutput::DetectionOutput(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* data, <span class="hljs-keyword">size_t</span> length)&#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *d = <span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*&gt;(data), *a = d;    param = read&lt;DetectionOutputParameters&gt;(d);    <span class="hljs-comment">// Channel size of the locData tensor</span>    <span class="hljs-comment">// numPriors * numLocClasses * 4</span>    C1 = read&lt;<span class="hljs-keyword">int</span>&gt;(d);    <span class="hljs-comment">// Channel size of the confData tensor</span>    <span class="hljs-comment">// numPriors * param.numClasses</span>    C2 = read&lt;<span class="hljs-keyword">int</span>&gt;(d);    <span class="hljs-comment">// Number of bounding boxes per sample</span>    numPriors = read&lt;<span class="hljs-keyword">int</span>&gt;(d);    ASSERT(d == a + length);&#125;</code></pre><ul><li>åˆå§‹åŒ–å‡½æ•° <code>initialize</code> å’Œ ç»“æŸå‡½æ•°  <code>terminate</code>   ç»“æŸå‡½æ•°ã€‚ ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆå…·ä½“çš„å®ç°ï¼Œ è¿”å›çŠ¶æ€ï¼Œæˆ–è€…æ‰“å° log è€Œå·²ã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// åœ¨è¿™ä¸ªæ’ä»¶å‡†å¤‡å¼€å§‹ run ä¹‹å‰æ‰§è¡Œï¼Œ åšä¸€äº›åˆå§‹åŒ–å·¥ä½œ</span><span class="hljs-comment">// åˆå§‹åŒ–ä¸€äº›æå‰å¼€è¾Ÿç©ºé—´çš„å‚æ•°ï¼Œä¸€èˆ¬æ˜¯ cuda æ“ä½œéœ€è¦çš„å‚æ•°</span><span class="hljs-comment">// (ä¾‹å¦‚convæ“ä½œéœ€è¦æ‰§è¡Œå·ç§¯æ“ä½œï¼Œæˆ‘ä»¬å°±éœ€è¦æå‰å¼€è¾Ÿ weight å’Œ bias çš„æ˜¾å­˜)ï¼Œ</span><span class="hljs-comment">// å‡å¦‚æˆ‘ä»¬çš„ç®—å­éœ€è¦è¿™äº›å‚æ•°ï¼Œåˆ™åœ¨è¿™é‡Œéœ€è¦æå‰å¼€è¾Ÿæ˜¾å­˜</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">DetectionOutput::initialize</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> STATUS_SUCCESS;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DetectionOutput::terminate</span><span class="hljs-params">()</span> </span>&#123;    gLogVerbose &lt;&lt; <span class="hljs-string">&quot;NMSPluginDynamic terminate\n&quot;</span>;&#125;</code></pre><ul><li><code>clone</code>ï¼šå°†è¿™ä¸ª plugin å¯¹è±¡å…‹éš†ä¸€ä»½ TensorRT çš„ builderã€network æˆ–è€… engine   ğŸŒŸğŸŒŸ</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Cloning the plugin</span><span class="hljs-function">IPluginV2Ext* <span class="hljs-title">DetectionOutput::clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// Create a new instance</span>    IPluginV2Ext* plugin = <span class="hljs-keyword">new</span> DetectionOutput(param, C1, C2, numPriors);    <span class="hljs-comment">// Set the namespace</span>    plugin-&gt;setPluginNamespace(mPluginNamespace.c_str());    <span class="hljs-keyword">return</span> plugin;&#125;</code></pre><ul><li><code>destroy</code>: ä¸€äº›å–„åæ¸…ç†å·¥ä½œ </li></ul><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DetectionOutput::destroy</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>;&#125;</code></pre><p>(2) å…·ä½“å®ç°å’ŒåŠŸèƒ½å‡½æ•°</p><ul><li><code>enqueue</code>ï¼š æ’ä»¶ op çš„æ‰§è¡Œå‡½æ•° ã€‚ å…¶ä¸­ enqueue API å®ç°å°†å…·ä½“åŒ–çš„ kernel è°ƒç”¨è¿‡ç¨‹åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—æ‰€åœ¨æµçš„åŠŸèƒ½ï¼Œå’Œå…·ä½“çš„ cuda kernel å®ç°ç›¸å…³è”ã€‚ ğŸŒŸğŸŒŸ</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Plugin layer implementation</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">DetectionOutput::enqueue</span><span class="hljs-params">(</span></span><span class="hljs-function"><span class="hljs-params">    <span class="hljs-keyword">int</span> batchSize, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* <span class="hljs-keyword">const</span>* inputs, <span class="hljs-keyword">void</span>** outputs, <span class="hljs-keyword">void</span>* workspace, cudaStream_t stream)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// Input order &#123;loc, conf, prior&#125;</span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* <span class="hljs-keyword">const</span> locData = inputs[param.inputOrder[<span class="hljs-number">0</span>]];    <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* <span class="hljs-keyword">const</span> confData = inputs[param.inputOrder[<span class="hljs-number">1</span>]];    <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* <span class="hljs-keyword">const</span> priorData = inputs[param.inputOrder[<span class="hljs-number">2</span>]];    <span class="hljs-comment">// Output from plugin index 0: topDetections index 1: keepCount</span>    <span class="hljs-keyword">void</span>* topDetections = outputs[<span class="hljs-number">0</span>];    <span class="hljs-keyword">void</span>* keepCount = outputs[<span class="hljs-number">1</span>];    pluginStatus_t status = detectionInference(stream, batchSize, C1, C2, param.shareLocation,        param.varianceEncodedInTarget, param.backgroundLabelId, numPriors, param.numClasses, param.topK, param.keepTopK,        param.confidenceThreshold, param.nmsThreshold, param.codeType, DataType::kFLOAT, locData, priorData,        DataType::kFLOAT, confData, keepCount, topDetections, workspace, param.isNormalized, param.confSigmoid);    ASSERT(status == STATUS_SUCCESS);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><ul><li><code>attachToContext/detachFromContext</code>ï¼šå¦‚æœè¿™ä¸ª op ä½¿ç”¨åˆ°äº†ä¸€äº›å…¶ä»–ä¸œè¥¿ï¼Œ ä¾‹å¦‚ cublas handleï¼Œ å¯ä»¥ç›´æ¥å€ŸåŠ© TensorRT å†…éƒ¨æä¾›çš„ cublas handleã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Attach the plugin object to an execution context and grant the plugin the access to some context resource.</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DetectionOutput::attachToContext</span><span class="hljs-params">(cudnnContext* cudnnContext, cublasContext* cublasContext, IGpuAllocator* gpuAllocator)</span></span>&#123;&#125;<span class="hljs-comment">// Detach the plugin object from its execution context.</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DetectionOutput::detachFromContext</span><span class="hljs-params">()</span> </span>&#123;&#125;</code></pre><p>ï¼ˆ3ï¼‰åºåˆ—åŒ–é—®é¢˜</p><ul><li><code>getSerializationSize</code>ï¼šåºåˆ—åŒ–æ—¶éœ€è¦å†™å¤šå°‘å­—èŠ‚åˆ° buffer ä¸­   ğŸŒŸğŸŒŸ</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Returns the size of serialized parameters</span><span class="hljs-function"><span class="hljs-keyword">size_t</span> <span class="hljs-title">DetectionOutput::getSerializationSize</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// DetectionOutputParameters, C1, C2, numPriors</span>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">sizeof</span>(DetectionOutputParameters) + <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>) * <span class="hljs-number">3</span>;&#125;</code></pre><ul><li><code>serialize</code>ï¼šæŠŠéœ€è¦ç”¨çš„æ•°æ®æŒ‰ç…§é¡ºåºåºåˆ—åŒ–åˆ° buffer é‡Œé¢    ğŸŒŸğŸŒŸ</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Serialization of plugin parameters</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DetectionOutput::serialize</span><span class="hljs-params">(<span class="hljs-keyword">void</span>* buffer)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">char</span> *d = <span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">char</span>*&gt;(buffer), *a = d;    write(d, param);    write(d, C1);    write(d, C2);    write(d, numPriors);    ASSERT(d == a + getSerializationSize());&#125;</code></pre><p>ï¼ˆ4ï¼‰æ’ä»¶çš„åŸºæœ¬è®¾ç½®</p><p> <code>getPluginType</code> å’Œ  <code>getPluginVersion</code> æ’ä»¶çš„ç±»å‹æˆ–è€…ç‰ˆæœ¬</p><pre><code class="hljs cpp"> <span class="hljs-comment">// æ³¨æ„ä¸è¦é‡å¤å³å¯</span><span class="hljs-keyword">namespace</span> &#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* NMS_PLUGIN_VERSION&#123;<span class="hljs-string">&quot;1&quot;</span>&#125;;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* NMS_PLUGIN_NAME&#123;<span class="hljs-string">&quot;NMS_TRT&quot;</span>&#125;;&#125;   <span class="hljs-comment">// namespace</span><span class="hljs-comment">// Get the plugin type</span><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-title">DetectionOutput::getPluginType</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> NMS_PLUGIN_NAME;&#125;<span class="hljs-comment">// Get the plugin version</span><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-title">DetectionOutput::getPluginVersion</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> NMS_PLUGIN_VERSION;&#125;</code></pre><ul><li><code>set/getPluginNamespace</code>ï¼šè®¾ç½®/è·å–æ’ä»¶çš„å‘½åç©ºé—´ã€‚å¦‚æœä¸è®¾ç½®åˆ™é»˜è®¤ä¸º â€œâ€ï¼Œ éœ€è¦æ³¨æ„åŒä¸€ä¸ª namespace ä¸‹çš„ plugin å¦‚æœåå­—ç›¸åŒä¼šå†²çªã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DetectionOutput::setPluginNamespace</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* pluginNamespace)</span></span><span class="hljs-function"></span>&#123;    mPluginNamespace = pluginNamespace;&#125;<span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-title">DetectionOutput::getPluginNamespace</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> mPluginNamespace.c_str();&#125;</code></pre><ul><li><code>supportsFormat</code>ï¼šåˆ¤æ–­æ ¼å¼/æ•°æ®ç±»å‹æ˜¯å¦åˆç†</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Check if the DataType and Plugin format is supported</span><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">DetectionOutput::supportsFormat</span><span class="hljs-params">(DataType type, PluginFormat format)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> (type == DataType::kFLOAT &amp;&amp; format == PluginFormat::kNCHW);&#125;</code></pre><ul><li><code>getWorkspaceSize</code>ï¼šè¿”å›è¿™ä¸ªæ’ä»¶ op éœ€è¦ä¸­é—´æ˜¾å­˜å˜é‡çš„å®é™…æ•°æ®å¤§å°(bytesize)ï¼Œè¿™ä¸ªé€šè¿‡ TensorRT çš„æ¥å£å»è·å–ï¼Œæ˜¯æ¯”è¾ƒè§„èŒƒçš„æ–¹å¼ã€‚  ğŸŒŸğŸŒŸ</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Returns the workspace size</span><span class="hljs-function"><span class="hljs-keyword">size_t</span> <span class="hljs-title">DetectionOutput::getWorkspaceSize</span><span class="hljs-params">(<span class="hljs-keyword">int</span> maxBatchSize)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> detectionInferenceWorkspaceSize(param.shareLocation, maxBatchSize, C1, C2, param.numClasses, numPriors, param.topK, DataType::kFLOAT, DataType::kFLOAT);&#125;</code></pre><ul><li><code>configurePlugin</code>ï¼šé…ç½®è¿™ä¸ªæ’ä»¶ opï¼šè¾“å…¥å’Œè¾“å‡ºå’Œç›¸å…³å‚æ•°çš„éªŒè¯å’Œé…ç½®ã€‚ å®˜æ–¹è¿˜æåˆ°è¿™ä¸ªé…ç½®ä¿¡æ¯å¯ä»¥å‘ŠçŸ¥ TensorRT å»é€‰æ‹©åˆé€‚çš„ç®—æ³•å»è°ƒä¼˜è¿™ä¸ªæ¨¡å‹  ğŸŒŸğŸŒŸ</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Configure the layer with input and output data types.</span><span class="hljs-comment">// inutDims: input Dimensions for the plugin layer</span><span class="hljs-comment">// nInputs : Number of inputs to the plugin layer</span><span class="hljs-comment">// outputDims: output Dimensions from the plugin layer</span><span class="hljs-comment">// nOutputs: number of outputs from the plugin layer</span><span class="hljs-comment">// type: DataType configuration for the plugin layer</span><span class="hljs-comment">// format: format NCHW, NHWC etc</span><span class="hljs-comment">// maxbatchSize: maximum batch size for the plugin layer</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DetectionOutput::configurePlugin</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Dims* inputDims, <span class="hljs-keyword">int</span> nbInputs, <span class="hljs-keyword">const</span> Dims* outputDims, <span class="hljs-keyword">int</span> nbOutputs, <span class="hljs-keyword">const</span> DataType* inputTypes, <span class="hljs-keyword">const</span> DataType* outputTypes, <span class="hljs-keyword">const</span> <span class="hljs-keyword">bool</span>* inputIsBroadcast, <span class="hljs-keyword">const</span> <span class="hljs-keyword">bool</span>* outputIsBroadcast, PluginFormat floatFormat, <span class="hljs-keyword">int</span> maxBatchSize)</span></span><span class="hljs-function"></span>&#123;    ASSERT(nbInputs == <span class="hljs-number">3</span>);    ASSERT(nbOutputs == <span class="hljs-number">2</span>);    <span class="hljs-comment">// Verify all the input dimensions</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nbInputs; i++)    &#123;        ASSERT(inputDims[i].nbDims == <span class="hljs-number">3</span>);    &#125;    <span class="hljs-comment">// Verify all the output dimensions</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nbOutputs; i++)    &#123;        ASSERT(outputDims[i].nbDims == <span class="hljs-number">3</span>);    &#125;    <span class="hljs-comment">// Configure C1, C2 and numPriors</span>    <span class="hljs-comment">// Input ordering  C1, C2, numPriors</span>    C1 = inputDims[param.inputOrder[<span class="hljs-number">0</span>]].d[<span class="hljs-number">0</span>];    C2 = inputDims[param.inputOrder[<span class="hljs-number">1</span>]].d[<span class="hljs-number">0</span>];    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> nbBoxCoordinates = <span class="hljs-number">4</span>;    numPriors = inputDims[param.inputOrder[<span class="hljs-number">2</span>]].d[<span class="hljs-number">1</span>] / nbBoxCoordinates;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> numLocClasses = param.shareLocation ? <span class="hljs-number">1</span> : param.numClasses;    <span class="hljs-comment">// Verify C1</span>    ASSERT(numPriors * numLocClasses * nbBoxCoordinates == inputDims[param.inputOrder[<span class="hljs-number">0</span>]].d[<span class="hljs-number">0</span>]);    <span class="hljs-comment">// Verify C2</span>    ASSERT(numPriors * param.numClasses == inputDims[param.inputOrder[<span class="hljs-number">1</span>]].d[<span class="hljs-number">0</span>]);&#125;</code></pre><p>ï¼ˆ5ï¼‰ è¿”å›å€¼ä¿¡æ¯</p><ul><li><code>getNbOutputs</code>ï¼š æ’ä»¶ op è¿”å›å¤šå°‘ä¸ª Tensorã€‚æ ¹æ®è¯¥ç½‘ç»œå±‚çš„å®é™…è¾“å‡ºï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°å³å¯ã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">//  The nmsPlugin generates an output of shape [batchSize, 1, keepTopK, 7] which contains the same information // as the outputs nmsed box locations, nmsed box scores, and nmsed box class IDs from batchedNMSPlugin, and an // another output of shape [batchSize, 1, 1, 1] which contains the same information as the output nmsed box // count from batchedNMSPlugin.</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">DetectionOutput::getNbOutputs</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;&#125;</code></pre><ul><li><code>getOutputDataType</code>: è¿”å›ç»“æœçš„ç±»å‹ï¼Œ ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬æ’ä»¶ op è¿”å›ç±»å‹ä¸è¾“å…¥ç±»å‹ä¸€è‡´ã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Return the DataType of the plugin output at the requested index.</span><span class="hljs-function">DataType <span class="hljs-title">DetectionOutput::getOutputDataType</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, <span class="hljs-keyword">const</span> nvinfer1::DataType* inputTypes, <span class="hljs-keyword">int</span> nbInputs)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// Two outputs</span>    ASSERT(index == <span class="hljs-number">0</span> || index == <span class="hljs-number">1</span>); <span class="hljs-comment">// è¿™é‡Œæœ‰ä¸¤ä¸ª outputï¼Œ éœ€è¦é¦–å…ˆåˆ¤æ–­ index æ˜¯å¦åˆç†ï¼Œç„¶åè¿”å›ç±»å‹</span>    <span class="hljs-keyword">return</span> DataType::kFLOAT;&#125;</code></pre><ul><li><code>getOutputDimensions</code>ï¼š TensorRT æ”¯æŒ Dynamic Shape çš„æ—¶å€™ï¼Œ batch è¿™ä¸€ç»´åº¦å¿…é¡»æ˜¯ explicit çš„ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œ TensorRT å¤„ç†çš„ç»´åº¦ä»ä»¥å¾€çš„ä¸‰ç»´  [3, -1, -1] å˜æˆäº† [1, 3, -1, -1]ã€‚æœ€æ–°çš„ onnx-tensort ä¹Ÿå¿…é¡»è®¾ç½® explicit çš„ bacthsizeï¼Œ è€Œä¸”è¿™ä¸ª bacth ç»´åº¦åœ¨ getOutputDimensions ä¸­æ˜¯å¯ä»¥è·å–çš„ã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Returns output dimensions at given index</span><span class="hljs-function">Dims <span class="hljs-title">DetectionOutput::getOutputDimensions</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, <span class="hljs-keyword">const</span> Dims* inputs, <span class="hljs-keyword">int</span> nbInputDims)</span></span><span class="hljs-function"></span>&#123;    ASSERT(nbInputDims == <span class="hljs-number">3</span>);    ASSERT(index == <span class="hljs-number">0</span> || index == <span class="hljs-number">1</span>); <span class="hljs-comment">// </span>    <span class="hljs-comment">// index 0 : Dimensions 1x param.keepTopK x 7</span>    <span class="hljs-comment">// index 1: Dimensions 1x1x1</span>    <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span>)    &#123;        <span class="hljs-keyword">return</span> DimsCHW(<span class="hljs-number">1</span>, param.keepTopK, <span class="hljs-number">7</span>);    &#125;    <span class="hljs-keyword">return</span> DimsCHW(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);&#125;</code></pre><ul><li><code>isOutputBroadcastAcrossBatch</code>/<code>canBroadcastInputAcrossBatch</code>: output æ˜¯å¦è¿›è¡Œ boardcast ä»¥åŠèƒ½å¦è¿›è¡Œ boardcast</li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// Return true if output tensor is broadcast across a batch.</span><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">DetectionOutput::isOutputBroadcastAcrossBatch</span><span class="hljs-params">(<span class="hljs-keyword">int</span> outputIndex, <span class="hljs-keyword">const</span> <span class="hljs-keyword">bool</span>* inputIsBroadcasted, <span class="hljs-keyword">int</span> nbInputs)</span> <span class="hljs-keyword">const</span></span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;<span class="hljs-comment">// Return true if plugin can use input that is broadcast across batch without replication.</span><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">DetectionOutput::canBroadcastInputAcrossBatch</span><span class="hljs-params">(<span class="hljs-keyword">int</span> inputIndex)</span> <span class="hljs-keyword">const</span></span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;</code></pre><p>PluginCreator ç±»çš„ç›¸å…³å®ç°å‡½æ•°ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ã€‚</p><p>ï¼ˆ1ï¼‰æ„é€ å‡½æ•°</p><pre><code class="hljs cpp"><span class="hljs-comment">// Plugin creator constructor</span>NMSPluginCreator::NMSPluginCreator()&#123;    <span class="hljs-comment">// NMS Plugin field meta data &#123;name,  data, type, length&#125;</span>    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;shareLocation&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;varianceEncodedInTarget&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;backgroundLabelId&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;numClasses&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;topK&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;keepTopK&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;confidenceThreshold&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kFLOAT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;nmsThreshold&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kFLOAT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;inputOrder&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">3</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;confSigmoid&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;isNormalized&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mPluginAttributes.emplace_back(PluginField(<span class="hljs-string">&quot;codeType&quot;</span>, <span class="hljs-literal">nullptr</span>, PluginFieldType::kINT32, <span class="hljs-number">1</span>));    mFC.nbFields = mPluginAttributes.size();    mFC.fields = mPluginAttributes.data();&#125;</code></pre><p>ï¼ˆ2ï¼‰createPluginï¼šè¿™ä¸ªæˆå‘˜å‡½æ•°ä½œç”¨æ˜¯é€šè¿‡ PluginFieldCollection å»åˆ›å»º pluginï¼Œ å°† op éœ€è¦çš„æƒé‡å’Œå‚æ•°é€ä¸€å–å‡ºæ¥ï¼Œ ç„¶åè°ƒç”¨ä¸Šæ–‡æåˆ°çš„æ„é€ å‡½æ•°ã€‚</p><pre><code class="hljs cpp"><span class="hljs-comment">// Creates the NMS plugin</span><span class="hljs-function">IPluginV2Ext* <span class="hljs-title">NMSPluginCreator::createPlugin</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name, <span class="hljs-keyword">const</span> PluginFieldCollection* fc)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">const</span> PluginField* fields = fc-&gt;fields;    <span class="hljs-comment">// Default init values for TF SSD network</span>    params.codeType = CodeTypeSSD::TF_CENTER;    params.inputOrder[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;    params.inputOrder[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;    params.inputOrder[<span class="hljs-number">2</span>] = <span class="hljs-number">1</span>;    <span class="hljs-comment">// Read configurations from  each fields</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; fc-&gt;nbFields; ++i)    &#123;        <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* attrName = fields[i].name;        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">strcmp</span>(attrName, <span class="hljs-string">&quot;shareLocation&quot;</span>))        &#123;            ASSERT(fields[i].type == PluginFieldType::kINT32);            params.shareLocation = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">int</span>&gt;(*(<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span>*&gt;(fields[i].data)));        &#125;        <span class="hljs-comment">// ....</span>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">strcmp</span>(attrName, <span class="hljs-string">&quot;codeType&quot;</span>))        &#123;            ASSERT(fields[i].type == PluginFieldType::kINT32);            params.codeType = <span class="hljs-keyword">static_cast</span>&lt;CodeTypeSSD&gt;(*(<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span>*&gt;(fields[i].data)));        &#125;    &#125;    DetectionOutput* obj = <span class="hljs-keyword">new</span> DetectionOutput(params);    obj-&gt;setPluginNamespace(mNamespace.c_str());    <span class="hljs-keyword">return</span> obj;&#125;</code></pre><p>ï¼ˆ3ï¼‰deserializePluginï¼š è¿™ä¸ªå‡½æ•°ä¼šè¢« onnx-tensorrt çš„ä¸€ä¸ªå«åš TRT_PluginV2 çš„è½¬æ¢ op è°ƒç”¨ï¼Œ è¿™ä¸ª op ä¼šè¯»å– onnx æ¨¡å‹çš„ data æ•°æ®å°†å…¶ååºåˆ—åŒ–åˆ° network ä¸­ã€‚</p><pre><code class="hljs cpp"><span class="hljs-function">IPluginV2Ext* <span class="hljs-title">NMSPluginCreator::deserializePlugin</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* serialData, <span class="hljs-keyword">size_t</span> serialLength)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// This object will be deleted when the network is destroyed, which will</span>    <span class="hljs-comment">// call NMS::destroy()</span>    DetectionOutput* obj = <span class="hljs-keyword">new</span> DetectionOutput(serialData, serialLength);    obj-&gt;setPluginNamespace(mNamespace.c_str());    <span class="hljs-keyword">return</span> obj;&#125;</code></pre><p>ï¼ˆ4ï¼‰ ä¸€äº›æ’ä»¶ç›¸å…³ä¿¡æ¯é…ç½®çš„å‡½æ•°</p><pre><code class="hljs cpp"><span class="hljs-comment">// Returns the plugin name</span><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-title">NMSPluginCreator::getPluginName</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> NMS_PLUGIN_NAME;&#125;<span class="hljs-comment">// Returns the plugin version</span><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-title">NMSPluginCreator::getPluginVersion</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> NMS_PLUGIN_VERSION;&#125;<span class="hljs-comment">// Returns the plugin field names</span><span class="hljs-function"><span class="hljs-keyword">const</span> PluginFieldCollection* <span class="hljs-title">NMSPluginCreator::getFieldNames</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> &amp;mFC;&#125;</code></pre><p>(5)  è·å– PluginFieldCollectionã€‚PluginFieldCollection çš„ä¸»è¦ä½œç”¨æ˜¯ä¼ é€’è¿™ä¸ªæ’ä»¶ op æ‰€éœ€è¦çš„æƒé‡å’Œå‚æ•°ï¼Œ åœ¨å®é™…çš„ engine æ¨ç†è¿‡ç¨‹ä¸­å¹¶ä¸ä½¿ç”¨ï¼Œ è€Œåœ¨ parse ä¸­ä¼šç”¨åˆ°ï¼ˆæ¯”å¦‚ caffe2trtã€onnx2trtï¼‰ã€‚</p><pre><code class="hljs cpp"><span class="hljs-comment">// Returns the plugin field names</span><span class="hljs-function"><span class="hljs-keyword">const</span> PluginFieldCollection* <span class="hljs-title">NMSPluginCreator::getFieldNames</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> &amp;mFC;&#125;</code></pre><h5 id="Step2ï¼š-åœ¨-InferPlugin-cpp-ä¸­æ³¨å†Œæ–°-creator"><a href="#Step2ï¼š-åœ¨-InferPlugin-cpp-ä¸­æ³¨å†Œæ–°-creator" class="headerlink" title="Step2ï¼š åœ¨  InferPlugin.cpp ä¸­æ³¨å†Œæ–° creator"></a>Step2ï¼š åœ¨  InferPlugin.cpp ä¸­æ³¨å†Œæ–° creator</h5><p>æ³¨å†Œè¿‡ç¨‹ï¼Œ ç»´æŠ¤mapç»“æ„ï¼Œå®ç°å­—ç¬¦ä¸²åˆ° creator çš„æ˜ å°„ã€‚</p><p>æ–‡ä»¶è·¯å¾„ï¼š<code>TensorRT/plugin/inferplugin.cpp</code></p><p>å°†è‡ªå®šä¹‰çš„ plugin åˆ›å»ºå™¨è¿›è¡Œåˆå§‹åŒ–ã€‚ ç³»ç»Ÿæœ€ç»ˆé€šè¿‡ creator æ˜ å°„å…³ç³»æ¥å®ç° plugin çš„åˆ›å»ºå’Œè°ƒç”¨</p><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;nmsPlugin.h&quot;</span></span><span class="hljs-keyword">extern</span> <span class="hljs-string">&quot;C&quot;</span>&#123;    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">initLibNvInferPlugins</span><span class="hljs-params">(<span class="hljs-keyword">void</span>* logger, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* libNamespace)</span></span><span class="hljs-function">    </span>&#123;        initializePlugin&lt;nvinfer1::plugin::NMSPluginCreator&gt;(logger, libNamespace);        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    &#125;&#125; <span class="hljs-comment">// extern &quot;C&quot;</span></code></pre><h5 id="Step3-ä¿®æ”¹-CMakeLists-txt-å¹¶ç¼–è¯‘-nvinfer-plugin-åº“"><a href="#Step3-ä¿®æ”¹-CMakeLists-txt-å¹¶ç¼–è¯‘-nvinfer-plugin-åº“" class="headerlink" title="Step3: ä¿®æ”¹ CMakeLists.txt å¹¶ç¼–è¯‘ nvinfer_plugin åº“"></a>Step3: ä¿®æ”¹ CMakeLists.txt å¹¶ç¼–è¯‘ nvinfer_plugin åº“</h5><p>æ–‡ä»¶è·¯å¾„ï¼š<code>TensorRT/plugin/CMakeLists.txt</code></p><pre><code class="hljs cpp"><span class="hljs-comment">// å°† plugin æ·»åŠ  plugin list</span><span class="hljs-built_in">set</span>(PLUGIN_LISTS    nmsPlugin    )</code></pre><h5 id="setp-4-åœ¨-onnx-tensorrt-ä¸­æ³¨å†Œæ–°çš„-Plugin"><a href="#setp-4-åœ¨-onnx-tensorrt-ä¸­æ³¨å†Œæ–°çš„-Plugin" class="headerlink" title="setp 4: åœ¨ onnx-tensorrt ä¸­æ³¨å†Œæ–°çš„ Plugin"></a>setp 4: åœ¨ onnx-tensorrt ä¸­æ³¨å†Œæ–°çš„ Plugin</h5><p>æ–‡ä»¶è·¯å¾„ï¼š <code>TensorRT/parser/onnx/builtin_op_importers.cpp</code>ã€‚ æ·»åŠ æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="hljs cpp">DEFINE_BUILTIN_OP_IMPORTER(BatchNormalization)  <span class="hljs-comment">// OP å¯¼å…¥, å‚æ•°éƒ¨åˆ†ä¸º OP åç§°ï¼Œ éœ€è¦ä¸ onnx ä¸€è‡´</span>&#123;    <span class="hljs-comment">// Scale, bias, mean, and variance must be initializers</span>    <span class="hljs-comment">// è§£æè¾“å…¥ä¿¡æ¯</span>    <span class="hljs-keyword">auto</span> scale_weights = inputs.at(<span class="hljs-number">1</span>).weights();    <span class="hljs-keyword">auto</span> bias_weights = inputs.at(<span class="hljs-number">2</span>).weights();    <span class="hljs-keyword">auto</span> mean_weights = inputs.at(<span class="hljs-number">3</span>).weights();    <span class="hljs-keyword">auto</span> variance_weights = inputs.at(<span class="hljs-number">4</span>).weights();    <span class="hljs-comment">// ...</span>    <span class="hljs-comment">// è§£æå±æ€§ä¿¡æ¯</span>    <span class="hljs-function">OnnxAttrs <span class="hljs-title">attrs</span><span class="hljs-params">(node)</span></span>;    <span class="hljs-keyword">float</span> eps = attrs.get&lt;<span class="hljs-keyword">float</span>&gt;(<span class="hljs-string">&quot;epsilon&quot;</span>, <span class="hljs-number">1e-5</span>f);    nvinfer1::Dims dims = tensor_ptr-&gt;getDimensions();    <span class="hljs-keyword">bool</span> need_to_expand_dims = (dims.nbDims == <span class="hljs-number">3</span>);&#125;</code></pre><h5 id="step-5-Plugin-ç¼–è¯‘æ”¯æŒ"><a href="#step-5-Plugin-ç¼–è¯‘æ”¯æŒ" class="headerlink" title="step 5. Plugin ç¼–è¯‘æ”¯æŒ"></a>step 5. Plugin ç¼–è¯‘æ”¯æŒ</h5><p>ç¡®ä¿ TensorRT/Plugin/CMakeLists  ä¿è¯æ–°å¢åŠ çš„ Plugin èƒ½å¤Ÿè¢«æ­£å¸¸ç¼–è¯‘é€šè¿‡ã€‚</p><h5 id="step-6-ç¼–è¯‘-nvonnxparse-åº“"><a href="#step-6-ç¼–è¯‘-nvonnxparse-åº“" class="headerlink" title="step 6. ç¼–è¯‘ nvonnxparse åº“"></a>step 6. ç¼–è¯‘ nvonnxparse åº“</h5><h5 id="step-7-æ›¿æ¢-nvinfer-plugin-å’Œ-nvonnxparser-åº“ï¼Œä½¿ç”¨-trtexec-å°†-onnx-è½¬æ¢ä¸º-tensorrt-æ¨¡å‹"><a href="#step-7-æ›¿æ¢-nvinfer-plugin-å’Œ-nvonnxparser-åº“ï¼Œä½¿ç”¨-trtexec-å°†-onnx-è½¬æ¢ä¸º-tensorrt-æ¨¡å‹" class="headerlink" title="step 7. æ›¿æ¢ nvinfer_plugin å’Œ nvonnxparser åº“ï¼Œä½¿ç”¨ trtexec å°† onnx è½¬æ¢ä¸º tensorrt æ¨¡å‹"></a>step 7. æ›¿æ¢ nvinfer_plugin å’Œ nvonnxparser åº“ï¼Œä½¿ç”¨ trtexec å°† onnx è½¬æ¢ä¸º tensorrt æ¨¡å‹</h5><p>è¡¥å……ä¸€ä¸ªå­¦ä¹ å·¥å…·ï¼šTensorRT å·¥å…· kaldi-onnx   <a href="https://github/com/XiaoMi/kaldi-onnx">https://github/com/XiaoMi/kaldi-onnx</a></p><p>ç”¨äºå°† kaldi è¯­éŸ³è¯†åˆ«å·¥å…·åŒ…ç¥ç»ç½‘ç»œæ¨¡å‹ç§»æ¤åˆ°onnxæ¨¡å‹è¿›è¡Œæ¨ç†çš„å·¥å…·ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ MACE åŠ å¿«å…·æœ‰é«˜åº¦ä¼˜åŒ–çš„ neon å†…æ ¸çš„ androidã€iosï¼Œ linux æˆ– windows è®¾å¤‡çš„æ¨æ–­ï¼Œè¯¥å·¥å…·æ”¯æŒè½¬æ¢ Nnet2 å’Œ Nnet3 æ¨¡å‹ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>CPP_review</title>
    <link href="/2021/01/10/CPP-review/"/>
    <url>/2021/01/10/CPP-review/</url>
    
    <content type="html"><![CDATA[<p>C++ å¤ä¹ </p><a id="more"></a><h2 id="é›¶-å¯¼è¯»"><a href="#é›¶-å¯¼è¯»" class="headerlink" title="é›¶. å¯¼è¯»"></a>é›¶. å¯¼è¯»</h2><h4 id="1-åŸºæœ¬ç†å¿µ"><a href="#1-åŸºæœ¬ç†å¿µ" class="headerlink" title="1. åŸºæœ¬ç†å¿µ"></a>1. åŸºæœ¬ç†å¿µ</h4><ul><li>å‹¿åœ¨æµ®æ²™ç­‘é«˜å°</li></ul><h4 id="2-å†…å®¹"><a href="#2-å†…å®¹" class="headerlink" title="2. å†…å®¹"></a>2. å†…å®¹</h4><p>(1)  åŸ¹å…»æ­£è§„ï¼Œå¤§æ°”çš„ç¼–ç¨‹ä¹ æƒ¯</p><ul><li>åŸºäºå¯¹è±¡(Object Based)ï¼š é¢å¯¹çš„æ˜¯å•ä¸€çš„ class çš„è®¾è®¡ã€å°†æ•°æ®å’Œå‡½æ•°å°è£…æˆç±»ï¼Œåªæœ‰å†…éƒ¨çš„å‡½æ•°å¯ä»¥å¤„ç†æ•°æ®ï¼›å¹¶é€šè¿‡ç±»åˆ›å»ºå¯¹è±¡ã€‚ <code>Class(Data, Functions) -&gt; Objects</code></li><li>é¢å‘å¯¹è±¡(Object Oriented)ï¼š å­¦ä¹  classes ä¹‹é—´çš„å…³ç³»ï¼šç»§æ‰¿(inheritance)ã€å¤åˆ(composition)ã€å§”æ‰˜(delegation)</li></ul><p>(2)   æ³›å‹ç¼–ç¨‹(generic programming) </p><p>(3)  æ·±å…¥æ¢ç´¢é¢å‘å¯¹è±¡ä¹‹ç»§æ‰¿æ‰€å½¢æˆçš„çš„å¯¹è±¡æ¨¡å‹(object model)ï¼ŒåŒ…å«éšè—äºåº•å±‚çš„ thisã€è™šæŒ‡é’ˆã€è™šè¡¨ã€è™šæœºåˆ¶ä»¥åŠè™šå‡½æ•°æ‰€é€ æˆçš„å¤šæ€æ•ˆæœã€‚</p><h4 id="3-å…³äº-C"><a href="#3-å…³äº-C" class="headerlink" title="3. å…³äº C++"></a>3. å…³äº C++</h4><p>(1)  C++ çš„å†å²: Bè¯­è¨€(1969)  â†’  Cè¯­è¨€(1972)   â†’  C++ è¯­è¨€(1983) [new C â†’ C with Class â†’ C++] â†’ Java è¯­è¨€  â†’  C# è¯­è¨€</p><p>(2)  C++ æ¼”åŒ–ï¼š<strong>C++ 98(1.0) â˜†</strong>  â†’  C++ 03(TR1, Technical Report 1) â†’  <strong>C++ 11 (2.0) â˜†</strong>  â†’ C++ 14</p><p>(3)  C++ åŒ…æ‹¬  C++è¯­è¨€ å’Œ C++æ ‡å‡†åº“ ä¸¤éƒ¨åˆ†</p><h4 id="4-ä¹¦ç±æ¨è"><a href="#4-ä¹¦ç±æ¨è" class="headerlink" title="4. ä¹¦ç±æ¨è:"></a>4. ä¹¦ç±æ¨è:</h4><ul><li><p>è¯­è¨€ï¼šC++ Primer (Fifth Edition)ã€The C++ Programming Language (Fourth Edition)</p></li><li><p>è§„èŒƒï¼šEffective C++ (Third Edition) â†’ Efficitive Modern c++</p></li><li><p>æ ‡å‡†åº“ï¼š The C++ Standard Libraryã€STL æºç å‰–æ</p></li></ul><h2 id="ä¸€-åŸºç¡€"><a href="#ä¸€-åŸºç¡€" class="headerlink" title="ä¸€. åŸºç¡€"></a>ä¸€. åŸºç¡€</h2><h3 id="1-ä»£ç çš„åŸºæœ¬å½¢å¼"><a href="#1-ä»£ç çš„åŸºæœ¬å½¢å¼" class="headerlink" title="1.ä»£ç çš„åŸºæœ¬å½¢å¼"></a>1.ä»£ç çš„åŸºæœ¬å½¢å¼</h3><p><img src="/2021/01/10/CPP-review/1.png" style="zoom:35%;"></p><p>æ‰©å±•å (extension file name) ä¸ä¸€å®šæ˜¯ <code>.h</code> æˆ–è€… <code>.cpp</code>ï¼Œ ä¹Ÿå¯èƒ½æ˜¯ <code>.hpp</code> æˆ–å…¶ä»–æˆ–æ— æ‰©å±•åã€‚</p><p>(1) å¤´æ–‡ä»¶å¼•ç”¨</p><pre><code class="hljs cpp"><span class="hljs-comment">// complex.cpp</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;   # å¼•ç”¨ C++ å¤´æ–‡ä»¶ï¼Œ æ— é¡» .h</span></span><span class="hljs-meta">#inlcude <span class="hljs-meta-string">&lt;cstdio&gt;     # å¼•ç”¨Cå¤´æ–‡ä»¶, å»æ‰å¤´æ–‡ä»¶ï¼Œå‰é¢åŠ  c</span></span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;utils.h&quot;</span>    # å¼•ç”¨è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶ </span></code></pre><p>(2) å¤´æ–‡ä»¶å¸ƒå±€</p><pre><code class="hljs cpp"><span class="hljs-comment">// complex.h</span><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> __COMPLEX__    <span class="hljs-comment">// (1) å¤´æ–‡ä»¶çš„é˜²å«å¼å£°æ˜ï¼šé˜²æ­¢é‡å¤å®šä¹‰</span></span><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> __COMPLEX__</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ostream</span>;</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">complex</span>;</span> <span class="hljs-built_in">complex</span>&amp; __doapl (<span class="hljs-built_in">complex</span>* ths, <span class="hljs-keyword">const</span> <span class="hljs-built_in">complex</span>&amp; r);   <span class="hljs-comment">// 1. å‰ç½®å£°æ˜</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">complex</span> <span class="hljs-title">class</span> <span class="hljs-title">declarations</span> &#123;</span> ... &#125;;            <span class="hljs-comment">// 2. ç±»å£°æ˜</span><span class="hljs-built_in">complex</span>::function ...                                <span class="hljs-comment">// 3. ç±»å®šä¹‰</span><span class="hljs-meta"># <span class="hljs-meta-keyword">endif</span> </span></code></pre><h3 id="2-ç±»çš„å£°æ˜ä¸å®šä¹‰-class-head-class-body"><a href="#2-ç±»çš„å£°æ˜ä¸å®šä¹‰-class-head-class-body" class="headerlink" title="2. ç±»çš„å£°æ˜ä¸å®šä¹‰  class head + class body"></a>2. ç±»çš„å£°æ˜ä¸å®šä¹‰  class head + class body</h3><h5 id="2-1-access-level-è®¿é—®çº§åˆ«"><a href="#2-1-access-level-è®¿é—®çº§åˆ«" class="headerlink" title="2.1 access level(è®¿é—®çº§åˆ«)"></a>2.1 access level(è®¿é—®çº§åˆ«)</h5><p>â€‹        è®¿é—®çº§åˆ«åˆ†ä¸º <code>private</code> , <code>public</code>, <code>protected</code> ä¸‰ç±»ï¼Œå…¶ä½ç½®å¯ä»¥äº¤é”™ã€‚ æ•°æ®æ”¾åœ¨ <code>private</code> åŒºï¼Œå°è£…åœ¨ç±»å†…ï¼Œç„¶åé€šè¿‡å‡½æ•°è®¿é—®æ•°æ®ã€‚</p><h5 id="2-2-ä¿®é¥°å…³é”®å­—"><a href="#2-2-ä¿®é¥°å…³é”®å­—" class="headerlink" title="2.2 ä¿®é¥°å…³é”®å­—"></a>2.2 ä¿®é¥°å…³é”®å­—</h5><p>(1)  inline </p><p>â€‹        æœ‰äº›å‡½æ•°å¯ä»¥ç›´æ¥å®šä¹‰åœ¨ body ä¸­ï¼Œå¦å¤–ä¸€äº›åœ¨ body ä¹‹å¤–å®šä¹‰ã€‚å‡½æ•°è‹¥åœ¨ class body å†…å®šä¹‰ï¼Œä¼šè¢«é»˜è®¤æˆä¸º inline å‡½æ•°ã€‚å…·ä½“æ˜¯å¦å†…è”ï¼Œéœ€è¦æœ‰ç¼–è¯‘å™¨è€Œå®šã€‚ å°†å‡½æ•°å£°æ˜ä¸º inlineï¼Œ<strong>è¡¨ç¤ºè¦æ±‚ç¼–è¯‘å™¨åœ¨æ¯ä¸ªå‡½æ•°è°ƒç”¨ç‚¹ä¸Šï¼Œå°†å‡½æ•°çš„å†…å®¹å±•å¼€ã€‚</strong>é¢å¯¹ä¸€ä¸ª inline å‡½æ•°ï¼Œ ç¼–è¯‘å™¨å¯å°†è¯¥å‡½æ•°çš„æ“ä½œæ”¹ä¸ºä»¥ä¸€ä»½å‡½æ•°ä»£ç å‰¯æœ¬ä»£æ›¿ã€‚è¿™å°†ä½¿æˆ‘ä»¬è·å¾—æ€§èƒ½æ”¹å–„ã€‚</p><p>ï¼ç¼–è¯‘å™¨ä¸€èˆ¬ä¸ä¼šå†…è”åŒ…å«å¾ªç¯ã€é€’å½’ã€switch ç­‰å¤æ‚æ“ä½œçš„å†…è”å‡½æ•°ã€‚åœ¨ç±»å£°æ˜ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œé™¤äº†è™šå‡½æ•°çš„å…¶ä»–å‡½æ•°éƒ½ä¼šè‡ªåŠ¨éšå¼åœ°å½“æˆå†…è”å‡½æ•°ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li><p>å†…è”å‡½æ•°åŒå®å‡½æ•°ä¸€æ ·å°†åœ¨è¢«è°ƒç”¨å¤„è¿›è¡Œä»£ç å±•å¼€ï¼Œçœå»äº†å‚æ•°å‹æ ˆã€æ ˆå¸§å¼€è¾Ÿä¸å›æ”¶ï¼Œç»“æœè¿”å›ç­‰ï¼Œä»è€Œæé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦ã€‚</p></li><li><p>å†…è”å‡½æ•°ç›¸æ¯”å®å‡½æ•°æ¥è¯´ï¼Œåœ¨ä»£ç å±•å¼€æ—¶ï¼Œ<strong>ä¼šåšå®‰å…¨æ£€æŸ¥æˆ–è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆåŒæ™®é€šå‡½æ•°ï¼‰</strong>ï¼Œè€Œå®å®šä¹‰åˆ™ä¸ä¼šã€‚</p></li><li><p>åœ¨ç±»ä¸­å£°æ˜åŒæ—¶å®šä¹‰çš„æˆå‘˜å‡½æ•°ï¼Œè‡ªåŠ¨è½¬åŒ–ä¸ºå†…è”å‡½æ•°ï¼Œå› æ­¤å†…è”å‡½æ•°<strong>å¯ä»¥è®¿é—®ç±»çš„æˆå‘˜å˜é‡</strong>ï¼Œå®å®šä¹‰åˆ™ä¸èƒ½ã€‚</p></li><li><p>å†…è”å‡½æ•°åœ¨<strong>è¿è¡Œæ—¶å¯è°ƒè¯•</strong>ï¼Œè€Œå®å®šä¹‰ä¸å¯ä»¥ã€‚</p></li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li><p>ä»£ç è†¨èƒ€ã€‚å†…è”æ˜¯ä»¥ä»£ç è†¨èƒ€ï¼ˆå¤åˆ¶ï¼‰ä¸ºä»£ä»·ï¼Œæ¶ˆé™¤å‡½æ•°è°ƒç”¨å¸¦æ¥çš„å¼€é”€ã€‚å¦‚æœæ‰§è¡Œå‡½æ•°ä½“å†…ä»£ç çš„æ—¶é—´ï¼Œç›¸æ¯”äºå‡½æ•°è°ƒç”¨çš„å¼€é”€è¾ƒå¤§ï¼Œé‚£ä¹ˆæ•ˆç‡çš„æ”¶è·ä¼šå¾ˆå°‘ã€‚å¦ä¸€æ–¹é¢ï¼Œæ¯ä¸€å¤„å†…è”å‡½æ•°çš„è°ƒç”¨éƒ½è¦å¤åˆ¶ä»£ç ï¼Œå°†ä½¿ç¨‹åºçš„æ€»ä»£ç é‡å¢å¤§ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ç©ºé—´ã€‚</p></li><li><p>inline å‡½æ•°æ— æ³•éšç€å‡½æ•°åº“å‡çº§è€Œå‡çº§ã€‚inlineå‡½æ•°çš„æ”¹å˜éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œä¸åƒ non-inline å¯ä»¥ç›´æ¥é“¾æ¥ã€‚</p></li><li><p>æ˜¯å¦å†…è”ï¼Œç¨‹åºå‘˜ä¸å¯æ§ã€‚å†…è”å‡½æ•°åªæ˜¯å¯¹ç¼–è¯‘å™¨çš„å»ºè®®ï¼Œæ˜¯å¦å¯¹å‡½æ•°å†…è”ï¼Œå†³å®šæƒåœ¨äºç¼–è¯‘</p></li></ul><p>(2) const : å¸¸  ğŸŒŸğŸŒŸ</p><p>â€‹        const è¡¨ç¤ºä¸ä¼šæ”¹å˜æ•°æ®çš„å†…å®¹, const å¯ä»¥ä¿®é¥°å¯¹è±¡ã€æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡ã€‚const ä¿®é¥°å¯¹è±¡è¡¨ç¤ºè¯¥å¯¹è±¡çš„æˆå‘˜å˜é‡ä¸å¯æ”¹å˜ï¼Œ const ä¿®é¥°æˆå‘˜å‡½æ•°è¡¨ç¤ºæˆå‘˜å‡½æ•°ä¸èƒ½æ”¹å˜æˆå‘˜å˜é‡çš„å€¼ã€‚</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">real</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>&#123;<span class="hljs-keyword">return</span> re;&#125;<span class="hljs-built_in">complex</span>&amp; <span class="hljs-keyword">operator</span> += (<span class="hljs-keyword">const</span> <span class="hljs-built_in">complex</span>&amp;);<span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> <span class="hljs-title">str</span><span class="hljs-params">(<span class="hljs-string">&quot;Hello World!&quot;</span>)</span></span>;</code></pre><p>é€šè¿‡å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°ï¼Œ å¯èƒ½ä¼šäº§ç”Ÿå¦‚ä¸‹çš„å››ç§æƒ…å†µ:</p><div class="table-container"><table><thead><tr><th></th><th>const object</th><th>non-const object</th></tr></thead><tbody><tr><td>const member functions</td><td><strong>âˆš</strong></td><td><strong>âˆš</strong></td></tr><tr><td>non-const member functions</td><td><strong>Ã—</strong></td><td><strong>âˆš</strong></td></tr></tbody></table></div><p>ä½¿ç”¨çš„åŸºæœ¬åŸåˆ™ï¼š</p><ul><li><p>ä¸èƒ½é€šè¿‡ const å¯¹è±¡è°ƒç”¨ non-const æˆå‘˜å‡½æ•°</p></li><li><p>å½“æˆå‘˜å‡½æ•°çš„ const å’Œ non-const ç‰ˆæœ¬åŒæ—¶å­˜åœ¨ï¼Œ const object åªä¼š(åªèƒ½) è°ƒç”¨ const ç‰ˆæœ¬ã€‚ non-const object åªä¼š(åªèƒ½) è°ƒç”¨ non-const ç‰ˆæœ¬ã€‚å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç , é€šè¿‡ const è¿›è¡Œå‡½æ•°ç­¾åçš„åŒºåˆ†ï¼Œå®ç° const å‡½æ•°å’Œ non-const å‡½æ•°çš„åˆ†å¼€è°ƒç”¨ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// è¯¥æ®µä»£ç å­˜åœ¨äº class template std::basic_string&lt;...&gt; </span><span class="hljs-comment">// å®ç°äº†æ“ä½œç¬¦ [] çš„ const å’Œ non-const çš„å‡½æ•°é‡è½½, å…¶ä¸­ const å‡½æ•°å¹¶ä¸ä¼šæ›´æ”¹å¯¹è±¡</span><span class="hljs-comment">// ä¹Ÿä¸ç”¨è¿‡å¤šçš„è€ƒè™‘å¼•ç”¨è®¡æ•°å’Œå†™æ—¶å¤åˆ¶ï¼Œ å…¶è®¾è®¡ç›¸å¯¹ç®€å•ã€‚</span>charT <span class="hljs-keyword">operator</span>[](size_type pos) <span class="hljs-keyword">const</span>&#123;    ...... <span class="hljs-comment">/* ä¸éœ€è¦è€ƒè™‘ Copy On Write */</span>  &#125;reference <span class="hljs-keyword">operator</span>[](size_type pos)&#123;    ...... <span class="hljs-comment">/* éœ€è¦è€ƒè™‘ Copy On Write */</span>   &#125;</code></pre></li></ul><p>(3) static: é™æ€  ğŸŒŸğŸŒŸ</p><p>è¿™é‡Œçš„é™æ€æ˜¯æŒ‡å¯¹è±¡çš„ç”Ÿå­˜å‘¨æœŸï¼š</p><ul><li>é™æ€ç”Ÿå­˜æœŸï¼šå…¶ç”Ÿå‘½åœ¨ä½œç”¨åŸŸ (scope)  ç»“æŸä¹‹åä»ç„¶å­˜åœ¨ï¼Œç›´åˆ°æ•´ä¸ªç¨‹åºç»“æŸ</li><li>åŠ¨æ€ç”Ÿå­˜æœŸï¼š èµ·å§‹äºå®šä¹‰çš„ä½ç½®ï¼Œç»ˆæ­¢äºæœ€è¿‘çš„ <code>â€œ&#125;â€</code></li></ul><p>â€‹        å½“æˆå‘˜å˜é‡æˆ–è€…æˆå‘˜å‡½æ•°æ˜¯ non-static çš„æ—¶å€™ï¼Œ æ¯ä¸ªå¯¹è±¡ä¼šæœ‰ä¸€ä¸ªå†…å­˜å­˜å‚¨ã€‚é€šè¿‡å¯¹è±¡è°ƒç”¨è¿™ä¸ª non-static çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œä¼šå°†è¯¥å¯¹è±¡çš„åœ°å€ä¼ é€’ç»™è¿™ä¸ªæˆå‘˜å‡½æ•°</p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">complex</span>&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">real</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> re; &#125;  <span class="hljs-comment">// return re; ä¼šé»˜è®¤ç¿»è¯‘ä¸º return this-&gt;re;</span><span class="hljs-keyword">private</span>:    <span class="hljs-keyword">double</span> re, im;&#125;;<span class="hljs-built_in">complex</span> c1, c2, c3;<span class="hljs-built_in">cout</span> &lt;&lt; c1.real();  <span class="hljs-comment">// ç¿»è¯‘ä¸º cout &lt;&lt; complex::real(&amp;c1);</span><span class="hljs-built_in">cout</span> &lt;&lt; c2.real();  <span class="hljs-comment">// ç¿»è¯‘ä¸º cou &lt;&lt; complex::real(&amp;c2);</span></code></pre><p>â€‹        å½“æˆå‘˜å˜é‡æˆ–è€…æˆå‘˜å‡½æ•°æ˜¯ static çš„æ—¶å€™ï¼Œ æ•´ä¸ªç±»å…±äº«ä¸€ä»½æˆå‘˜å˜é‡ã€‚ è¿™ä¸ªæˆå‘˜å˜é‡ä¸å±äºä»»ä½•å¯¹è±¡ï¼Œè€Œå±äºæ•´ä¸ªç±»ã€‚</p><ul><li>static å‡½æ•°å¯ä»¥é€šè¿‡ç±»æˆ–è€…å¯¹è±¡è¿›è¡Œè°ƒç”¨ã€‚ </li><li>éœ€è¦åœ¨ç±»å®šä¹‰çš„å¤–éƒ¨å¯¹è¿™ä¸ªæˆå‘˜å˜é‡è¿›è¡Œå®šä¹‰ã€‚</li><li>é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½è°ƒç”¨éé™æ€æˆå‘˜å˜é‡ã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span>&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-keyword">static</span> <span class="hljs-keyword">double</span> m_rate;    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">set_rate</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> &amp; x)</span> </span>&#123; m_rate = x; &#125;&#125;;<span class="hljs-keyword">double</span> Account::m_rate = <span class="hljs-number">8.0</span>; <span class="hljs-comment">// éœ€è¦åœ¨ç±»å®šä¹‰çš„å¤–éƒ¨å¯¹è¿™ä¸ªé™æ€æˆå‘˜è¿›è¡Œå®šä¹‰</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;    <span class="hljs-comment">// static å‡½æ•° å¯ä»¥é€šè¿‡ ç±» æˆ–è€… å¯¹è±¡ è¿›è¡Œè°ƒç”¨</span>    Account::set_rate(<span class="hljs-number">5.0</span>);        Account a;    a.set_rate(<span class="hljs-number">7.0</span>);&#125;</code></pre><h5 id="2-3-å‡½æ•°"><a href="#2-3-å‡½æ•°" class="headerlink" title="2.3 å‡½æ•°"></a>2.3 å‡½æ•°</h5><p>(1) å‚æ•°ä¼ é€’å’Œè¿”å›å€¼ä¼ é€’</p><ul><li>å‚æ•°ä¼ é€’ pass by value  vs    pass by reference(to const)</li></ul><p>â€‹      å°½é‡ä¸ç”¨ pass by value(å°äº4ä¸ªå­—èŠ‚çš„å¯ä»¥ä¼ å€¼)ï¼Œè€Œè¦ä½¿ç”¨ pass by referenceã€‚ å¦‚æœä¼ é€’å¼•ç”¨å¹¶ä¸å¸Œæœ›ä¿®æ”¹ï¼Œå‰é¢éœ€è¦åŠ ä¸Š constã€‚</p><ul><li>è¿”å›å€¼ä¼ é€’  return by value vs return by reference(to const)</li></ul><p>â€‹      è¿”å›å€¼çš„ä¼ é€’ä¹Ÿå°½é‡ä½¿ç”¨å¼•ç”¨ä¼ é€’ã€‚å±€éƒ¨å˜é‡ä¸èƒ½ä¼ é€’å¼•ç”¨ï¼Œå› ä¸ºå±€éƒ¨å˜é‡ä¼šåœ¨è¿”å›æ—¶è¢«é”€æ¯ã€‚</p><p>(2) è®¾è®¡æ„é€ å‡½æ•°</p><ul><li>æ„é€ å‡½æ•°å°½é‡ä½¿ç”¨åˆå§‹å€¼åˆ—è¡¨çš„è¯­æ³•å½¢å¼ï¼Œè¿™æ˜¯åœ¨åˆå§‹åŒ–æ—¶è®¾å®šåˆå€¼ï¼Œè€Œä¸æ˜¯åœ¨åˆå§‹åŒ–ä¹‹åå†è¿›è¡Œèµ‹å€¼ã€‚</li><li>æ„é€ å‡½æ•°çš„å‡½æ•°åç§°å’Œç±»åç›¸åŒï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œå¹¶ä¸”å¯ä»¥é‡è½½ã€‚</li><li>ä¸èƒ½æ˜¾ç¤ºè°ƒç”¨ï¼Œè€Œæ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œè‡ªåŠ¨è°ƒç”¨ã€‚</li><li>ä¸æ„é€ å‡½æ•°ç›¸å¯¹åº”çš„æ˜¯ææ„å‡½æ•°ï¼Œä¸å¸¦æŒ‡é’ˆç±»çš„è®¾è®¡ä¸éœ€è¦å†™ææ„å‡½æ•°</li></ul><p>(3) é»˜è®¤å‚æ•°å’Œå‡½æ•°é‡è½½ (overloading)</p><ul><li>é»˜è®¤å‚æ•°å¤šä¸ªæ—¶å€™ï¼Œæœ‰é»˜è®¤å‚æ•°çš„å‚æ•°éœ€è¦æ”¾åœ¨åé¢ã€‚</li><li>å‚æ•°çš„ä¸ªæ•°å’Œç±»å‹ä¸åŒï¼Œè¿”å›å€¼ä¸åŒä¸èƒ½é‡è½½</li><li>é»˜è®¤å‚æ•°å’Œå‡½æ•°é‡è½½å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚ç¼–è¯‘å™¨ä¼šæ— æ³•ç¡®è®¤éœ€è¦è°ƒç”¨çš„å‡½æ•°</li></ul><p>(4) å‹å…ƒ friendï¼šå‹å…ƒå¯ä»¥è·å–ç±»çš„æ•°æ®ï¼Œ ä½†æ˜¯ç ´åäº†å°è£…æ€§ã€‚ç›¸åŒ class çš„å„ä¸ª objects äº’ä¸ºå‹å…ƒã€‚</p><p>(5) æ“ä½œç¬¦é‡è½½ ä¸ this æŒ‡é’ˆ</p><p>â€‹    this æŒ‡é’ˆï¼šæ‰€æœ‰çš„æˆå‘˜å‡½æ•°éƒ½å¸¦æœ‰ä¸€ä¸ªéšè—çš„æŒ‡é’ˆï¼ŒæŒ‡å‘è°ƒç”¨è€…ã€‚</p><ul><li>æˆå‘˜å‡½æ•°(æœ‰this)</li></ul><pre><code class="hljs cpp"><span class="hljs-built_in">complex</span>::<span class="hljs-keyword">operator</span> += (<span class="hljs-keyword">const</span> cimplex&amp; x)&#123;    <span class="hljs-keyword">return</span> __dopal(<span class="hljs-keyword">this</span>, r);&#125;</code></pre><p>   PS: ä¼ é€’è€…æ— éœ€è¦çŸ¥é“æ¥å—è€…æ˜¯ä»¥ä»€ä¹ˆå½¢å¼æ¥å—çš„</p><ul><li>éæˆå‘˜å‡½æ•°(æ— this)</li></ul><pre><code class="hljs cpp"><span class="hljs-keyword">inline</span> <span class="hljs-built_in">complex</span> <span class="hljs-keyword">operator</span> +(<span class="hljs-keyword">const</span> <span class="hljs-built_in">complex</span>&amp; x, <span class="hljs-keyword">const</span> <span class="hljs-built_in">complex</span>&amp; y)&#123;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">complex</span>(real(x) + real(y), imag(x) + imag(y));&#125;<span class="hljs-comment">// PS: typename()  åˆ›å»ºä¸´æ—¶å¯¹è±¡</span></code></pre><p>(6) &lt;&lt; é‡è½½</p><pre><code class="hljs cpp">ostream&amp; <span class="hljs-keyword">operator</span> &lt;&lt; (ostream &amp; os, <span class="hljs-keyword">const</span> <span class="hljs-built_in">complex</span> &amp; x)&#123;       <span class="hljs-keyword">return</span> os &lt;&lt; <span class="hljs-string">&#x27;(&#x27;</span> &lt;&lt; real(x) &lt;&lt; <span class="hljs-string">&#x27;,&#x27;</span> &lt;&lt; imag(x) &lt;&lt; <span class="hljs-string">&#x27;)&#x27;</span>;   &#125;</code></pre><h2 id="äºŒ-æ‹·è´æ„é€ ã€æ‹·è´å¤åˆ¶ã€ææ„å‡½æ•°"><a href="#äºŒ-æ‹·è´æ„é€ ã€æ‹·è´å¤åˆ¶ã€ææ„å‡½æ•°" class="headerlink" title="äºŒ. æ‹·è´æ„é€ ã€æ‹·è´å¤åˆ¶ã€ææ„å‡½æ•°"></a>äºŒ. æ‹·è´æ„é€ ã€æ‹·è´å¤åˆ¶ã€ææ„å‡½æ•°</h2><p>â€‹        ç±»å®šä¹‰çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤ç”Ÿæˆå…­ä¸ªæˆå‘˜å‡½æ•°ï¼šæ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°ã€å–åœ°å€è¿ç®—ç¬¦ã€å–åœ°å€è¿ç®—ç¬¦(constç‰ˆæœ¬)ã€‚å…¶ä¸­æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°è¢«ç§°ä¸ºä¸‰å¤§å‡½æ•°(Big Three)ã€‚</p><p>â€‹        å¦‚æœè‡ªå®šä¹‰çš„ç±»å¸¦æœ‰æŒ‡é’ˆï¼Œåˆ™éœ€è¦è‡ªå·±å»å®šä¹‰æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´å¤åˆ¶å‡½æ•°ã€‚ why?<br>â€‹        é»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ä»…ä»…æ˜¯å°†å€¼æ‹·è´è¿‡å»ï¼Œåæ˜ åœ¨æŒ‡é’ˆä¸Šå°±æ˜¯æ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé»˜è®¤æ‹·è´æ„é€ å’Œé»˜è®¤çš„æ‹·è´èµ‹å€¼ä¼šå°† b çš„æŒ‡é’ˆä¹ŸæŒ‡å‘ aï¼Œè¿™ä¹Ÿå°±æ‰€è°“çš„æµ…æ‹·è´ã€‚è¿™ä¼šå¯¼è‡´ä¸¤ä¸ªé—®é¢˜ï¼š</p><p>(1) åˆ«å alias: a å’Œ b çš„æŒ‡é’ˆæŒ‡å‘åŒä¸€å—å†…å­˜, è¿™ç§æ“ä½œå¾ˆå±é™©</p><p>(2) b åŸæœ‰çš„æŒ‡å‘çš„å†…å®¹æ²¡æœ‰é‡Šæ”¾ï¼Œä»è€Œäº§ç”Ÿå†…å­˜æ³„æ¼</p><p><img src="/2021/01/10/CPP-review/2.png" style="zoom:35%;"></p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">String</span>&#123;</span>    String(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* cstr = <span class="hljs-number">0</span>);    String(<span class="hljs-keyword">const</span> String&amp; str);    String&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> String&amp; str);    ~String();        <span class="hljs-function"><span class="hljs-keyword">char</span>* <span class="hljs-title">get_c_str</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> m_data; &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">char</span> * m_data;&#125;;<span class="hljs-comment">// æ„é€ å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-title">String::String</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* cstr =<span class="hljs-number">0</span>)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">if</span>(cstr)&#123;        m_data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[<span class="hljs-built_in">strlen</span>(cstr) + <span class="hljs-number">1</span>];        <span class="hljs-built_in">strcpy</span>(m_data, cstr);    &#125;<span class="hljs-keyword">else</span> &#123;    <span class="hljs-comment">// ä¸ºæŒ‡å®šåˆå€¼</span>        m_data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[<span class="hljs-number">1</span>];        * m_data = <span class="hljs-string">&#x27;\0&#x27;</span>;    &#125;&#125;<span class="hljs-comment">// ææ„å‡½æ•°</span><span class="hljs-keyword">inline</span> String::~String()&#123;    <span class="hljs-keyword">delete</span>[] m_data;&#125;<span class="hljs-comment">// æ‹·è´æ„é€ å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-title">String::String</span><span class="hljs-params">(<span class="hljs-keyword">const</span> String&amp; str)</span></span><span class="hljs-function"></span>&#123;    m_data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[<span class="hljs-built_in">strlen</span>(str.m_data) + <span class="hljs-number">1</span>];    <span class="hljs-built_in">strcpy</span>(m_data, str.m_data);&#125;<span class="hljs-comment">// æ‹·è´èµ‹å€¼å‡½æ•° copy assignment operator</span><span class="hljs-keyword">inline</span> String&amp; String::<span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> String&amp; str)&#123;    <span class="hljs-comment">// ä¸€å®šè¦åœ¨ operator= ä¸­æ£€æŸ¥æ˜¯å¦ self assignment</span>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span> == &amp; str)        <span class="hljs-keyword">return</span> * <span class="hljs-keyword">this</span>;            <span class="hljs-keyword">delete</span> [] m_data;  <span class="hljs-comment">// (1) æ¸…é™¤è‡ªèº«å†…å®¹</span>    m_data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[<span class="hljs-built_in">strlen</span>(str.m_data) + <span class="hljs-number">1</span>]; <span class="hljs-comment">// (2) é‡æ–°ç”³è¯·ä¸€æ®µå†…å­˜ï¼Œ ç”¨äºå­˜å‚¨</span>    <span class="hljs-built_in">strcpy</span>(m_data, str.m_data);  <span class="hljs-comment">// (3) å°†åŸæœ‰çš„æ•°æ® copy è¿‡æ¥</span>        <span class="hljs-keyword">return</span> * <span class="hljs-keyword">this</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;    <span class="hljs-function">String <span class="hljs-title">s1</span><span class="hljs-params">()</span></span>;    <span class="hljs-function">String <span class="hljs-title">s2</span><span class="hljs-params">(<span class="hljs-string">&quot;Hello&quot;</span>)</span></span>;        <span class="hljs-function">String <span class="hljs-title">s3</span><span class="hljs-params">(s1)</span></span>;    <span class="hljs-built_in">cout</span> &lt;&lt; s3 &lt;&lt; <span class="hljs-built_in">endl</span>;        s3 = s2;    <span class="hljs-built_in">cout</span> &lt;&lt; s3 &lt;&lt; <span class="hljs-built_in">endl</span>;&#125;</code></pre><p>   å¦‚æœæ²¡æœ‰è‡ªæˆ‘èµ‹å€¼æ£€æŸ¥ï¼Œ å·¦å³ä¸¤ä¸ª pointers æŒ‡å‘åŒä¸€ä¸ª memory blockã€‚ å‰è¿° operator= åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯ deleteï¼Œæ­¤æ—¶è‡ªèº«å¯¹è±¡çš„ m_data å°†ä¼šè¢«é‡Šæ”¾ï¼Œ m_data æŒ‡å‘çš„å†…å®¹å°†ä¸å­˜åœ¨ã€‚ç„¶åï¼Œå½“ä¼å›¾è®¿é—® rhsæ—¶ï¼Œ ä¼šäº§ç”Ÿä¸ç¡®å®šè¡Œä¸º(undefined behavior)ã€‚</p><h2 id="ä¸‰-å†…å­˜ç®¡ç†"><a href="#ä¸‰-å†…å­˜ç®¡ç†" class="headerlink" title="ä¸‰. å†…å­˜ç®¡ç†"></a>ä¸‰. å†…å­˜ç®¡ç†</h2><h4 id="1-æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«-ğŸŒŸğŸŒŸ"><a href="#1-æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«-ğŸŒŸğŸŒŸ" class="headerlink" title="1. æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ« ?  ğŸŒŸğŸŒŸ"></a>1. æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ« ?  ğŸŒŸğŸŒŸ</h4><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>;<span class="hljs-keyword">int</span>* p = &amp;x; <span class="hljs-comment">// p is a point to x: p æœ¬èº«æ˜¯ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯å­˜å‚¨çš„æ˜¯ x çš„åœ°å€</span>             <span class="hljs-comment">// ä¸€ä¸ªå°å°çš„æŠ€å·§: è¿™é‡Œçš„ * æ˜¯é è¿‘ int çš„, è¡¨ç¤º p æ˜¯ int* ç±»å‹</span><span class="hljs-keyword">int</span> &amp;r = x;  <span class="hljs-comment">// r is a reference to x: r ä»£è¡¨ xã€‚r, æ­¤æ—¶ x éƒ½æ˜¯ 0</span></code></pre><p>(1) æŒ‡é’ˆæ˜¯åœ¨å†…å­˜ä¸­çš„å››/å…«å­—èŠ‚å­˜å‚¨ç©ºé—´ï¼ŒæŒ‡é’ˆå­˜å‚¨çš„å†…å®¹å°±æ˜¯ä¸€ä¸ªåœ°å€ï¼Œæ ¹æ®è¿™ä¸ªåœ°å€å¯ä»¥æ‰¾åˆ°å¦å¤–ä¸€ç‰‡å†…å­˜ï¼ŒæŒ‡é’ˆå°±æ˜¯è¿™ç‰‡å†…å­˜çš„ç´¢å¼•ã€‚ç®€å•çš„è®²ï¼ŒæŒ‡é’ˆå°±æ˜¯ä¸€ç§ä¿å­˜å˜é‡åœ°å€çš„å˜é‡ã€‚</p><p>â€‹    å¼•ç”¨åˆ™ç›¸å½“äºæ˜¯ä¸ºå¯¹è±¡èµ·äº†ä¸€ä¸ªåˆ«å, å¼•ç”¨å’ŒåŸæ¥çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„å¤§å°å’Œåœ°å€ã€‚</p><p>(2) åœ¨ç¼–è¯‘å™¨æ–¹é¢ï¼Œä¸¤è€…æ˜¯ä¸€æ ·çš„ï¼Œç¼–è¯‘å™¨ä¼šå°†ä¸¤è€…ç¼–è¯‘ä¸ºç›¸åŒçš„æ±‡ç¼–æŒ‡ä»¤ã€‚æœ‰ä¸€å¥å¾ˆå¥½çš„è¯å¯ä»¥æ¥å½¢å®¹ï¼šreference å°±æ˜¯æ¼‚äº®çš„ pointã€‚</p><p>(3) ä¸¤è€…ä¸»è¦çš„åŒºåˆ«æ˜¯åœ¨è¯­æ³•å±‚é¢ï¼š</p><ul><li><p>sizeof(æŒ‡é’ˆ) çš„å¤§å°æ˜¯4/8ï¼Œsizeof(å¼•ç”¨) çš„å¤§å°æ˜¯è¢«å¼•ç”¨å¯¹è±¡çš„å¤§å°ï¼›</p></li><li><p><strong>åˆå§‹åŒ–</strong>(å¼•ç”¨å¿…é¡»åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€æŒ‡é’ˆåˆ™å¯ä»¥åˆå§‹åŒ–ä¸ºç©º)ã€<strong>å¯æ”¹å˜</strong>(å¼•ç”¨ä¸å¯ä»¥æ”¹å˜ã€æŒ‡é’ˆåˆ™å¯ä»¥æ›´æ”¹æŒ‡å‘)ã€<strong>ä¼ å‚</strong>(ä½œä¸º<strong>å‚æ•°ä¼ é€’</strong>æ—¶ï¼ŒæŒ‡é’ˆéœ€è¦è¢«è§£å¼•ç”¨æ‰å¯è¿›è¡Œæ“ä½œï¼Œå¼•ç”¨å¯ç›´æ¥ä¿®æ”¹)</p></li><li><p><strong>é™æ€</strong>(æ²¡æœ‰é™æ€å¼•ç”¨ã€ä½†æ˜¯æœ‰é™æ€æŒ‡é’ˆ)ã€<strong>è‡ªåŠ è¿ç®—ç¬¦</strong>(å«ä¹‰ä¸ä¸€æ ·ï¼Œå¼•ç”¨æ˜¯å¯¹å…¶å€¼è¿›è¡Œè‡ªåŠ ï¼Œ æŒ‡é’ˆåˆ™æ˜¯è¡¨ç¤ºæŒ‡é’ˆè¿›è¡Œç§»åŠ¨)</p></li></ul><p>(4) ä½¿ç”¨ï¼š</p><ul><li><p><strong>å¼•ç”¨ç›¸å¯¹äºæŒ‡é’ˆæ›´åŠ å®‰å…¨ã€‚å¹³æ—¶ç¼–ç¨‹æ—¶ï¼Œåœ¨èƒ½ä½¿ç”¨å¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œå°±ä¸è¦è½»æ˜“ä½¿ç”¨æŒ‡é’ˆ</strong>ï¼Œå½“ç„¶ï¼Œåœ¨æ“ä½œæ•°ç»„æˆ–è€…å¤§é¢ç§¯å†…å­˜æ—¶ï¼Œç”¨æŒ‡é’ˆæ›´å¥½ã€‚ </p></li><li><p>reference é€šå¸¸ä¸ç”¨äºå£°æ˜å˜é‡ï¼Œè€Œç”¨äºå‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹çš„æè¿°ã€‚ reference çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯å¯ä»¥ä¿æŒè°ƒç”¨ç«¯å’Œè¢«è°ƒç”¨ç«¯çš„å†™æ³•ä¸ä¼ å€¼å†™æ³•ç›¸åŒã€‚</p></li><li><p><strong>å¼•ç”¨</strong>å¹¶ä¸èƒ½ä½œä¸ºå‡½æ•°ç­¾åçš„åŒºåˆ«ï¼Œè¿™ä¼šå¼•èµ·äºŒä¹‰æ€§ã€‚ ä½†æ˜¯ const å¯ä»¥ã€‚</p></li></ul><pre><code class="hljs cpp"><span class="hljs-comment">// å¦‚ä¸‹ä¸¤ä¸ªå‡½æ•°å£°æ˜, ä¼šäº§ç”ŸäºŒä¹‰æ€§!</span><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">imag</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span>&amp; im)</span> </span>&#123; ... &#125;<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">imag</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> im)</span> </span>&#123;...&#125;</code></pre><h4 id="2-æ‰€è°“-stack-æ ˆ-ï¼Œ-æ‰€è°“-heap-å †-ğŸŒŸğŸŒŸ"><a href="#2-æ‰€è°“-stack-æ ˆ-ï¼Œ-æ‰€è°“-heap-å †-ğŸŒŸğŸŒŸ" class="headerlink" title="2. æ‰€è°“ stack(æ ˆ)ï¼Œ æ‰€è°“ heap(å †)    ğŸŒŸğŸŒŸ"></a>2. æ‰€è°“ stack(æ ˆ)ï¼Œ æ‰€è°“ heap(å †)    ğŸŒŸğŸŒŸ</h4><p>åœ¨ C++ ä¸­ï¼Œ å†…å­˜åˆ†ä¸º 5 ä¸ªåŒºï¼Œ åˆ†åˆ«æ˜¯å †ã€æ ˆã€è‡ªç”±å­˜å‚¨åŒºã€å…¨å±€/é™æ€å­˜å‚¨åŒºå’Œå¸¸é‡å­˜å‚¨åŒºã€‚</p><ul><li>æ ˆï¼šå­˜åœ¨äºæŸä½œç”¨äº<strong>æŸä½œç”¨åŸŸ(scope) çš„ä¸€å—å†…å­˜ç©ºé—´(memory space)</strong>ã€‚å†…å­˜<strong>ç”±ç¼–è¯‘å™¨åœ¨éœ€è¦æ—¶è‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾</strong>ã€‚é€šå¸¸ç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°(ä¸ºè¿è¡Œå‡½æ•°è€Œåˆ†é…çš„<strong>å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›åœ°å€</strong>ç­‰å­˜æ”¾åœ¨æ ˆåŒº)ã€‚æ ˆè¿ç®—åˆ†é…å†…ç½®äºå¤„ç†å™¨çš„æŒ‡ä»¤é›†ä¸­ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œä½†æ˜¯åˆ†é…çš„å†…å­˜å®¹é‡æœ‰é™ã€‚</li><li>å †ï¼šç”±æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å— global çš„å†…å­˜ç©ºé—´ï¼Œç¨‹åº<strong>å¯åŠ¨æ€åˆ†é… dynamic allocated</strong> ä»ä¸­è·å¾—è‹¥å¹²åŒºå—ã€‚ä¸€èˆ¬æ˜¯<strong>ä½¿ç”¨ç”± new è¿›è¡Œåˆ†é…ï¼Œä½¿ç”¨ delete æˆ– delete[] é‡Šæ”¾</strong>ã€‚å¦‚æœæœªèƒ½å¯¹å†…å­˜è¿›è¡Œæ­£ç¡®çš„é‡Šæ”¾ï¼Œä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚ä½†åœ¨ç¨‹åºç»“æŸæ—¶ï¼Œä¼šç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨å›æ”¶ã€‚</li><li>è‡ªç”±å­˜å‚¨åŒºï¼šå’Œå †ç±»ä¼¼ï¼Œä¸è¿‡å­˜å‚¨é‚£äº›æœ‰ malloc åˆ†é…ï¼Œç”¨ free é‡Šæ”¾çš„å†…å­˜å—ã€‚</li><li>å…¨å±€/é™æ€å­˜å‚¨åŒºï¼šç”¨äºå­˜å‚¨å…¨å±€å˜é‡å’Œé™æ€å˜é‡</li><li>å¸¸é‡å­˜å‚¨åŒºï¼šå­˜æ”¾å¸¸é‡ï¼Œä¸”ä¸å…è®¸æ›´æ”¹</li></ul><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Complex</span> &#123;</span> ... &#125;;...&#123;    <span class="hljs-function">Complex <span class="hljs-title">c1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;  <span class="hljs-comment">// c1 å ç”¨çš„ç©ºé—´æ¥è‡ª stack</span>    Complex* p = <span class="hljs-keyword">new</span> Complex(<span class="hljs-number">3</span>);  <span class="hljs-comment">// complex(3) æ˜¯ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œ</span>                                  <span class="hljs-comment">// æ‰€å ç”¨çš„ç©ºé—´æ˜¯ new åœ¨ heap åŠ¨æ€åˆ†é…è€Œå¾—ï¼Œ å¹¶ç”± p æŒ‡å‘</span>&#125;</code></pre><h4 id="3-åŒºåˆ†å››ç§å¯¹è±¡"><a href="#3-åŒºåˆ†å››ç§å¯¹è±¡" class="headerlink" title="3. åŒºåˆ†å››ç§å¯¹è±¡"></a>3. åŒºåˆ†å››ç§å¯¹è±¡</h4><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Complex</span> &#123;</span> ... &#125;;...&#123;    <span class="hljs-function"><span class="hljs-built_in">complex</span> <span class="hljs-title">c1</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;   <span class="hljs-comment">// stack object: å…¶ç”Ÿå‘½åœ¨ä½œç”¨åŸŸç»“æŸä¹‹é™…ç»“æŸï¼Œ</span>                        <span class="hljs-comment">// è¿™ç§ä½œç”¨åŸŸå†…çš„ objectï¼Œåˆç§°ä¸º auto objectï¼Œ å› ä¸ºå®ƒä¼šè¢«è‡ªåŠ¨æ¸…ç†ã€‚</span>    <span class="hljs-function"><span class="hljs-keyword">static</span> Complex <span class="hljs-title">c2</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;  <span class="hljs-comment">//  static object: å…¶ç”Ÿå‘½åœ¨ä½œç”¨åŸŸ(scope) ç»“æŸä¹‹åä»ç„¶å­˜åœ¨ï¼Œç›´åˆ°æ•´ä¸ªç¨‹åºç»“æŸ</span>        Complex * p = <span class="hljs-keyword">new</span> Complex; <span class="hljs-comment">// heap object: å…¶ç”Ÿå‘½å‘¨æœŸéšç€ deleted ä¹‹é™…ç»“æŸã€‚</span>                               <span class="hljs-comment">// å½“ä½ ç”³è¯·äº†ä¸€æ®µå†…å­˜ï¼Œä½ å°±æœ‰è´£ä»»é‡Šæ”¾å®ƒï¼Œ å¦åˆ™å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚</span>    ...    <span class="hljs-keyword">delete</span> p;  &#125;<span class="hljs-function">Complex <span class="hljs-title">c3</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;  <span class="hljs-comment">// global object: å…¶ç”Ÿå‘½åœ¨æ•´ä¸ªç¨‹åºç»“æŸä¹‹åæ‰ç»“æŸã€‚</span>                   <span class="hljs-comment">// ä½ ä¹Ÿå¯ä»¥è§†ä¸ºä¸€ç§ static objectï¼Œ å…¶ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå‡½æ•°ã€‚</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;  ...&#125;</code></pre><h4 id="4-new-å’Œ-delete"><a href="#4-new-å’Œ-delete" class="headerlink" title="4. new å’Œ delete"></a>4. new å’Œ delete</h4><p>(1) newï¼šå…ˆåˆ†é… memoryï¼Œ å†è°ƒç”¨ ctor</p><pre><code class="hljs cpp">Complex * pc = <span class="hljs-keyword">new</span> Complex(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šå°†å…¶è½¬åŒ–ä¸ºå¦‚ä¸‹è¯­å¥:</span>Complex * pc;<span class="hljs-keyword">void</span> mem = <span class="hljs-keyword">operator</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">sizeof</span>(Complex));  <span class="hljs-comment">// (1) åˆ†é…å†…å­˜ --&gt; å…¶å†…éƒ¨è°ƒç”¨ malloc(n)</span>pc = <span class="hljs-keyword">static_cast</span>&lt;Complex*&gt;(mem);   <span class="hljs-comment">// (2) è½¬å‹</span>pc -&gt; Complex::Complex(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);      <span class="hljs-comment">// (3) æ„é€ å‡½æ•° --&gt; Complex::complex(pc, 1, 2);</span></code></pre><p>(2) delete: å…ˆè°ƒç”¨ dtor, å†é‡Šæ”¾å†…å­˜</p><pre><code class="hljs cpp">String * ps = <span class="hljs-keyword">new</span> String(<span class="hljs-string">&quot;Hello&quot;</span>);...<span class="hljs-keyword">delete</span> ps;<span class="hljs-comment">// ç¼–è¯‘å™¨å°†å…¶è½¬åŒ–ä¸º:</span>String::~String(ps);   <span class="hljs-comment">// ææ„å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">delete</span><span class="hljs-params">(ps)</span></span>;    <span class="hljs-comment">// é‡Šæ”¾å†…å­˜ -&gt; å…¶å†…éƒ¨è°ƒç”¨ free(ps)</span></code></pre><h4 id="5-åŠ¨æ€åˆ†é…æ‰€å¾—çš„å†…å­˜å—"><a href="#5-åŠ¨æ€åˆ†é…æ‰€å¾—çš„å†…å­˜å—" class="headerlink" title="5. åŠ¨æ€åˆ†é…æ‰€å¾—çš„å†…å­˜å—"></a>5. åŠ¨æ€åˆ†é…æ‰€å¾—çš„å†…å­˜å—</h4><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">complex</span>&#123;</span>...<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">double</span> re, im;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">String</span>&#123;</span>...<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">char</span>* m_data;&#125;;</code></pre><pre><code class="hljs cpp">Complex * pc = <span class="hljs-keyword">new</span> Complex(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);String * ps = <span class="hljs-keyword">new</span> String(<span class="hljs-string">&quot;Hello!&quot;</span>);</code></pre><p>(1)  å†…å­˜çš„åˆ†é…æƒ…å†µ</p><ul><li>å®é™…æ‰€å ç”¨çš„å†…å­˜    complex: (4*2)  string: (4)                                ç»¿è‰²éƒ¨åˆ†</li><li>debug header     (32+4)                           -&gt; åœ¨ debug æ¨¡å¼ä¸‹æ‰æœ‰       ç°è‰²éƒ¨åˆ†</li><li>å­—èŠ‚å¯¹é½           complex:(3/0)   string: (0/1)   -&gt; è°ƒæ•´ä¸º8çš„å€æ•°             é’è‰²éƒ¨åˆ†</li><li>ä¸Šä¸‹cookies       (4*2)                                                      ç²‰çº¢è‰²éƒ¨åˆ†</li></ul><p><img src="/2021/01/10/CPP-review/3.png" style="zoom:35%;"></p><p>(2)  åŠ¨æ€åˆ†é…æ•°ç»„æ‰€å¾—çš„ array</p><pre><code class="hljs cpp">Complex * p = <span class="hljs-keyword">new</span> Complex[<span class="hljs-number">3</span>];String * p = <span class="hljs-keyword">new</span> String[<span class="hljs-number">3</span>];</code></pre><ul><li>å®é™…æ‰€å ç”¨çš„å†…å­˜(å«æœ‰ä¸€ä¸ªæ•´æ•°æ¥æ ‡è®°æ•°ç»„çš„é•¿åº¦)    complex: (3*4*2+4)   string: (4*3+4)    ç°è‰²éƒ¨åˆ†+ä¸­é—´ç™½è‰²</li><li>debug header     (32+4)                         â†’ åœ¨ debug æ¨¡å¼ä¸‹æ‰æœ‰             é»„è‰²éƒ¨åˆ†</li><li>å­—èŠ‚å¯¹é½           complex:(2/3)   string: (1/1)  â†’ è°ƒæ•´ä¸º8çš„å€æ•°                    é’è‰²éƒ¨åˆ†</li><li>ä¸Šä¸‹cookies       (4*2)                                                             ä¸Šä¸‹ç™½è‰²éƒ¨åˆ†</li></ul><p><img src="/2021/01/10/CPP-review/4.png" style="zoom:35%;"></p><p>(2) arrary new ä¸€å®šè¦æ­é… array delete </p><p>å¦‚æœ delete çš„æ—¶å€™æ²¡æœ‰ä½¿ç”¨ []ï¼Œ åˆ™ä¹‹åè°ƒç”¨ä¸€æ¬¡ææ„å‡½æ•°ï¼Œ é»˜è®¤åªåˆ é™¤äº† array[0]ã€‚ å¯¹äºæ•°ç»„çš„å…¶ä»–å…ƒç´ åˆ™æ²¡æœ‰åˆ é™¤ã€‚ ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</p><p><img src="/2021/01/10/CPP-review/5.png" style="zoom:35%;"></p><h4 id="6-ç®€è¿°ä¸€ä¸‹-newã€deleteã€mallocã€free-çš„å…³ç³»"><a href="#6-ç®€è¿°ä¸€ä¸‹-newã€deleteã€mallocã€free-çš„å…³ç³»" class="headerlink" title="6. ç®€è¿°ä¸€ä¸‹ newã€deleteã€mallocã€free çš„å…³ç³»?"></a>6. ç®€è¿°ä¸€ä¸‹ newã€deleteã€mallocã€free çš„å…³ç³»?</h4><p>â€‹        malloc ä¸ free æ˜¯C++/C è¯­è¨€æ ‡å‡†åº“å‡½æ•°ï¼Œ new/delete æ˜¯C++ çš„è¿ç®—ç¬¦ï¼Œ ä»–ä»¬åˆ†åˆ«ç”¨äºç”³è¯·åŠ¨æ€å†…å­˜(malloc)å’Œé‡Šæ”¾å†…å­˜(free)ã€‚<br>â€‹        å¯¹äºéå†…éƒ¨æ•°æ®ç±»å‹çš„å¯¹è±¡è€Œè¨€ï¼Œå¯¹è±¡åœ¨åˆ›å»ºçš„åŒæ—¶è¦è‡ªåŠ¨æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œ å¯¹è±¡åœ¨æ¶ˆäº¡ä¹‹å‰è¦è‡ªåŠ¨æ‰§è¡Œææ„å‡½æ•°ã€‚ ç”±äºmalloc/free æ˜¯åº“å‡½æ•°è€Œä¸æ˜¯è¿ç®—ç¬¦ï¼Œä¸åœ¨ç¼–è¯‘å™¨æ§åˆ¶æƒé™ä¹‹å†…ï¼Œä¸èƒ½å¤ŸæŠŠæ‰§è¡Œæ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„ä»»åŠ¡å¼ºåŠ äº malloc/freeï¼Œ æ‰€ä»¥åªç”¨ malloc/free æ— æ³•æ»¡è¶³åŠ¨æ€å¯¹è±¡çš„è¦æ±‚ã€‚ å› æ­¤ï¼Œ C++ è¯­è¨€éœ€è¦ä¸€ä¸ªèƒ½å®ŒæˆåŠ¨æ€å†…å­˜åˆ†é…å’Œåˆå§‹åŒ–å·¥ä½œçš„è¿ç®—ç¬¦ new, ä»¥åŠä¸€ä¸ªèƒ½å®Œæˆæ¸…ç†å’Œé‡Šæ”¾å†…å­˜å·¥ä½œçš„è¿ç®—ç¬¦ deleteã€‚<br>â€‹        å®é™…ä¸Šï¼Œ new é¦–å…ˆè°ƒç”¨ operator new å‡½æ•°ç”³è¯·ç©ºé—´(åº•å±‚é€šè¿‡ malloc å®ç°)ï¼Œç„¶åè°ƒç”¨æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œæœ€åè¿”å›è‡ªå®šä¹‰ç±»å‹çš„æŒ‡é’ˆ; delete é¦–å…ˆè°ƒç”¨ææ„å‡½æ•°ï¼Œç„¶åè°ƒç”¨ operator delete é‡Šæ”¾ç©ºé—´(åº•å±‚é€šè¿‡ free å®ç°)ã€‚</p><h2 id="å››-OOP-Object-Oriented-Programming"><a href="#å››-OOP-Object-Oriented-Programming" class="headerlink" title="å››. OOP(Object Oriented Programming)"></a>å››. OOP(Object Oriented Programming)</h2><p>â€‹        é¢å‘å¯¹è±¡è°ˆçš„æ˜¯å¯¹è±¡å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œå¯¹è±¡æ˜¯ç”±ç±»æ´¾ç”Ÿè€Œæ¥ï¼Œæ‰€ä»¥å…¶å®è´¨æ˜¯ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»ã€‚<strong>å¸¸è§çš„ç±»ä¹‹é—´çš„å…³ç³»æœ‰ä¸‰ç§ï¼šInheritance ç»§æ‰¿ã€Composition ç»„åˆ å’Œ Delegation å§”æ‰˜ã€‚</strong></p><h4 id="1-composition-å¤åˆ-ï¼š-has-a"><a href="#1-composition-å¤åˆ-ï¼š-has-a" class="headerlink" title="1. composition(å¤åˆ) ï¼š has-a"></a>1. composition(å¤åˆ) ï¼š has-a</h4><p>(1) ä»£ç ç¤ºä¾‹</p><pre><code class="hljs cpp"><span class="hljs-comment">// è¿™é‡Œä½“ç°äº† 23 ä¸ªè®¾è®¡æ¨¡å¼ä¸­çš„  -- adapter: åˆ©ç”¨ä¸€ä¸ªç±»æ¥å®ç°å¦ä¸€ä¸ªç±»</span><span class="hljs-comment">// queue é‡Œé¢æœ‰ä¸€ä¸ª deque, è¿™ç§å…³ç³»å«åš composition å¤åˆ</span><span class="hljs-comment">// queue å€Ÿç”¨ deque çš„å·²æœ‰çš„å®ç°æ¥å®ç°è‡ªå·±</span><span class="hljs-keyword">template</span> &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">T</span>&gt;</span><span class="hljs-class"><span class="hljs-title">class</span> <span class="hljs-title">queue</span> &#123;</span>    ...<span class="hljs-keyword">protected</span>:    <span class="hljs-built_in">deque</span>&lt;T&gt; c;  <span class="hljs-comment">// åº•å±‚å®¹å™¨</span><span class="hljs-keyword">public</span>:    <span class="hljs-comment">// ä»¥ä¸‹å®Œå…¨åˆ©ç”¨ c çš„æ“ä½œå®Œæˆ</span>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> c.empty(); &#125;    <span class="hljs-function">size_type <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> c.size(); &#125;    <span class="hljs-function">reference <span class="hljs-title">front</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> c.front(); &#125;   <span class="hljs-function">reference <span class="hljs-title">back</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> c.back(); &#125;   <span class="hljs-comment">//</span>   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">const</span> value_type&amp; x)</span> </span>&#123; c.push_back(x); &#125;   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;c.pop_front(); &#125; &#125;;</code></pre><p>(2) å¤åˆçš„ UML è¡¨ç¤º</p><p><img src="/2021/01/10/CPP-review/6.png" style="zoom:35%;"></p><p>(3) å†…å­˜è¡¨ç¤º</p><p><img src="/2021/01/10/CPP-review/7.png" style="zoom:35%;"></p><p>(4)  Composition(å¤åˆ) å…³ç³»ä¸‹çš„æ„é€ å’Œææ„</p><p>  æ„é€ ç”±å†…è€Œå¤–ï¼š Container çš„æ„é€ å‡½æ•°é¦–å…ˆè°ƒç”¨ Component çš„ default æ„é€ å‡½æ•°ï¼Œç„¶åæ‰æ‰§è¡Œè‡ªå·±ã€‚</p><pre><code class="hljs cpp">Container::Container(...):Component() &#123; ... &#125;;</code></pre><p>ææ„ç”±å¤–è€Œå†…: Container çš„ææ„å‡½æ•°é¦–å…ˆæ‰§è¡Œè‡ªå·±ï¼Œç„¶åæ‰è°ƒç”¨ Component çš„ææ„å‡½æ•°ã€‚</p><pre><code class="hljs cpp">Container::~Container(...)&#123; ... ~Component() &#125;;</code></pre><h4 id="2-Delegation-å§”æ‰˜-ï¼šCompostion-by-reference"><a href="#2-Delegation-å§”æ‰˜-ï¼šCompostion-by-reference" class="headerlink" title="2. Delegation(å§”æ‰˜) ï¼šCompostion by reference"></a>2. Delegation(å§”æ‰˜) ï¼šCompostion by reference</h4><p>(1) ç¤ºä¾‹ä»£ç :</p><pre><code class="hljs cpp"><span class="hljs-comment">// è¿™ä¸ªç¤ºä¾‹ä½“ç°äº†è®¾è®¡æ¨¡å¼ä¸­çš„ handle/Body(pImpl)  point to implementation</span><span class="hljs-comment">// String æœ‰ä¸€ä¸ª StringRepï¼Œ ä½†æ˜¯è¿™ä¸ª &quot;æœ‰&quot; æ˜¯é€šè¿‡æŒ‡é’ˆæ¥å®ç°çš„</span><span class="hljs-comment">// ä¸€ä¸ªç±»çš„çœŸæ­£çš„å®ç°é€šè¿‡å¦ä¸€ä¸ªç±»æ¥å®ç°ï¼Œè¯¥ç±»åªæ˜¯å¯¹å¤–çš„æ¥å£ï¼Œ </span><span class="hljs-comment">// å½“è¯¥ç±»éœ€è¦æŸä¸ªè¡Œä¸ºçš„æ—¶å€™ï¼Œéƒ½è°ƒç”¨å¦ä¸€ä¸ªç±»çš„å‡½æ•°æ¥æœåŠ¡</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StringRep</span>;</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">String</span>&#123;</span>    <span class="hljs-keyword">public</span>:        String();        String(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* s);        String(<span class="hljs-keyword">const</span> String&amp; s);        String &amp;<span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> String&amp; s);        ~String();...<span class="hljs-keyword">private</span>:    StringRep* rep; <span class="hljs-comment">// piml</span>&#125;<span class="hljs-comment">// file String.cpp </span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;String.hpp&quot;</span> </span><span class="hljs-keyword">namespace</span> &#123; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StringRep</span> &#123;</span><span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">String</span>;</span>     StringRep(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* s);     ~StringRep();     <span class="hljs-keyword">int</span> count;     <span class="hljs-keyword">char</span>* rep; &#125;; &#125;String::String()&#123; ... &#125; ...</code></pre><p>(2) UML è¡¨ç¤º</p><p><img src="/2021/01/10/CPP-review/8.png" style="zoom:35%;"></p><h4 id="3-Inheritance-ç»§æ‰¿-è¡¨ç¤º-is-a"><a href="#3-Inheritance-ç»§æ‰¿-è¡¨ç¤º-is-a" class="headerlink" title="3. Inheritance(ç»§æ‰¿) è¡¨ç¤º is-a"></a>3. Inheritance(ç»§æ‰¿) è¡¨ç¤º is-a</h4><p><strong>å‡½æ•°çš„ç»§æ‰¿ç»§æ‰¿çš„æ˜¯è°ƒç”¨æƒï¼</strong></p><p>(1) ç¤ºä¾‹ä»£ç :</p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">List_node_base</span> _<span class="hljs-title">List_node_base</span> &#123;</span>    _List_node_base* _M_next;    _List_node_base* _M_prev; &#125;;<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt; <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">List_node</span> :</span> <span class="hljs-keyword">public</span> _List_node_base&#123;    _Tp _M_data; &#125;;</code></pre><p>(2) UML è¡¨ç¤ºå’Œå†…å­˜è¡¨ç¤º</p><p><img src="/2021/01/10/CPP-review/9.png" style="zoom:35%;"></p><p>ï¼base class çš„ dtor å¿…é¡»æ˜¯ virtual ï¼Œ å¦åˆ™ä¼šå‡ºç°undefined behavior</p><p>(3)  <strong>Inheritance(ç»§æ‰¿)å…³ç³»ä¸‹çš„æ„é€ å’Œææ„</strong></p><p>æ„é€ ç”±å†…è€Œå¤–ï¼šDerived çš„æ„é€ å‡½æ•°å¿…é¡»è°ƒç”¨ Base çš„ default æ„é€ å‡½æ•°ï¼Œ ç„¶åæ‰æ‰§è¡Œè‡ªå·±ã€‚</p><pre><code class="hljs cpp">Derived::Derived(...): Base() &#123;...&#125;;</code></pre><p>ææ„ç”±å¤–è€Œå†…: Derived çš„ææ„å‡½æ•°é¦–å…ˆæ‰§è¡Œè‡ªå·±ï¼Œç„¶åæ‰è°ƒç”¨ Base çš„ææ„å‡½æ•°ã€‚</p><pre><code class="hljs cpp">Derived::~Derived(...)&#123;... ~Base() &#125;</code></pre><p><strong>(4) Inheritance(ç»§æ‰¿) + Composition(å¤åˆ)</strong></p><p>æ„é€ ç”±å†…è€Œå¤–ï¼šDerived çš„æ„é€ å‡½æ•°é¦–å…ˆè°ƒç”¨ <strong>Base</strong> çš„ default æ„é€ å‡½æ•°ï¼Œ ç„¶åè°ƒç”¨ <strong>Component</strong> çš„ default æ„é€ å‡½æ•°ï¼Œç„¶åæ‰æ‰§è¡Œè‡ªå·±ã€‚</p><pre><code class="hljs cpp">Derived::Derived(...): Base()ï¼ŒComponent()  &#123;...&#125;;</code></pre><p>ææ„ç”±å¤–è€Œå†…: Derived çš„ææ„å‡½æ•°é¦–å…ˆæ‰§è¡Œè‡ªå·±ï¼Œ ç„¶åè°ƒç”¨ <strong>Component</strong> çš„ææ„å‡½æ•°ï¼Œ ç„¶åè°ƒç”¨ Base çš„ææ„å‡½æ•°ã€‚</p><pre><code class="hljs cpp">Derived::~Derived(...)&#123;... ~Component(), ~Base() &#125;</code></pre><h4 id="4-åŸºäº-Delegation-å§”æ‰˜-å’Œ-Inheritance-ç»§æ‰¿-çš„è®¾è®¡æ¨¡å¼"><a href="#4-åŸºäº-Delegation-å§”æ‰˜-å’Œ-Inheritance-ç»§æ‰¿-çš„è®¾è®¡æ¨¡å¼" class="headerlink" title="4. åŸºäº Delegation(å§”æ‰˜) å’Œ Inheritance(ç»§æ‰¿) çš„è®¾è®¡æ¨¡å¼"></a>4. åŸºäº Delegation(å§”æ‰˜) å’Œ Inheritance(ç»§æ‰¿) çš„è®¾è®¡æ¨¡å¼</h4><h5 id="4-1-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#4-1-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="4.1  è§‚å¯Ÿè€…æ¨¡å¼"></a>4.1  è§‚å¯Ÿè€…æ¨¡å¼</h5><p>â€‹        è§‚å¯Ÿè€…ç»„åˆåˆ°æŸä¸ªå¯¹è±¡ä¸­ï¼Œå½“æ›´æ–°çš„æ—¶å€™ï¼Œé€šçŸ¥è§‚å¯Ÿè€…ã€‚ å¦‚ä¸‹æ‰€ç¤ºï¼šObserver å’Œ Subject æ˜¯ Delegation å…³ç³»ï¼Œ å¦å¤– Observer å¯ä»¥ä½œä¸ºçˆ¶ç±»ï¼Œæ´¾ç”Ÿå‡ºè®¸å¤šå­ç±», å¹¶ä¸”å­ç±»å¯ä»¥ç»„åˆåˆ° Subject ç±»ä¸­ã€‚</p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Observer</span>&#123;</span>    <span class="hljs-keyword">public</span>:        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(Subject* sub, <span class="hljs-keyword">int</span> value)</span> </span>= <span class="hljs-number">0</span>;&#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Subject</span>&#123;</span>    <span class="hljs-keyword">int</span> m_value;    <span class="hljs-built_in">vector</span>&lt;Observer *&gt; m_views;<span class="hljs-keyword">public</span>:    <span class="hljs-comment">// æ·»åŠ è§‚å¯Ÿè€…</span>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">attach</span><span class="hljs-params">(Observer* obs)</span></span>&#123;        m_views.push_back(obs);    &#125;        <span class="hljs-comment">// æ›´æ–°æ•°æ®ï¼Œ å°†è¯¥æ•°æ® æ›´æ–°åˆ°æ‰€æœ‰çš„è§‚å¯Ÿè€…</span>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_val</span><span class="hljs-params">(<span class="hljs-keyword">int</span> value)</span></span>&#123;        m_value = value;        notify();    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">notify</span><span class="hljs-params">()</span></span>&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m_views.size(); ++i)&#123;            m_views[i]-&gt;update(<span class="hljs-keyword">this</span>, m_value);        &#125;    &#125;    <span class="hljs-comment">// åˆ é™¤æ“ä½œ </span>    <span class="hljs-comment">// ...</span>&#125;</code></pre><h5 id="4-2-composite-å¤åˆ"><a href="#4-2-composite-å¤åˆ" class="headerlink" title="4.2 composite(å¤åˆ)"></a>4.2 composite(å¤åˆ)</h5><p>â€‹    å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ çˆ¶ç±»ä¸º Componentï¼Œ ä¸¤ä¸ªå­ç±»å‡ç»§æ‰¿è‡ª Componentã€‚ ç„¶å Primitive å’Œ Composite ä¸ºå§”æ‰˜å…³ç³»ã€‚</p><p><img src="/2021/01/10/CPP-review/10.png" style="zoom:35%;"></p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Component</span> &#123;</span>    <span class="hljs-keyword">int</span> value; <span class="hljs-keyword">public</span>:    Component(<span class="hljs-keyword">int</span> val) &#123; value = val; &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">( Component* )</span> </span>&#123; &#125; &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Primitive</span>:</span> <span class="hljs-keyword">public</span> Component &#123; <span class="hljs-keyword">public</span>:    Primitive(<span class="hljs-keyword">int</span> val): Component(val) &#123;&#125; &#125;;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Composite</span>:</span> <span class="hljs-keyword">public</span> Component &#123;    <span class="hljs-built_in">vector</span> &lt;Component*&gt; c; <span class="hljs-keyword">public</span>:    Composite(<span class="hljs-keyword">int</span> val): Component(val) &#123; &#125;   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(Component* elem)</span> </span>&#123;       c.push_back(elem);    &#125;    <span class="hljs-comment">// ...</span>&#125;;</code></pre><h5 id="4-3-prototype"><a href="#4-3-prototype" class="headerlink" title="4.3 prototype"></a>4.3 prototype</h5><p>â€‹     è€ƒè™‘å¦‚ä¸‹ä¸€ç§æƒ…å†µï¼Œéœ€è¦ä¸€ä¸ªç»§æ‰¿ä½“ç³»ï¼Œçˆ¶ç±»(æŠ½è±¡ç±»)æƒ³è¦å»åˆ›å»ºæœªæ¥æ‰ä¼šå‡ºç°çš„å­ç±»ã€‚å…¶ä¸­çˆ¶ç±»ç”±æ¡†æ¶ç¼–å†™è€…ç¼–å†™ï¼Œå­ç±»åˆ™ç”±å…¶ä»–å¼€å‘è€…ç¼–å†™ã€‚ è§£å†³æ–¹æ³•ä¸ºï¼šè®©æ´¾ç”Ÿç±»åˆ›å»ºè‡ªèº«ï¼Œè®©çˆ¶ç±»æœ‰åŠæ³•çœ‹åˆ°å­ç±»(æ³¨å†Œ)ï¼Œå¹¶è¿›è¡Œå¤åˆ¶ã€‚</p><p>çˆ¶ç±»å¦‚ä½•åš: (1) å®ç° findAndClone: å®ç°å­ç±»çš„åˆ›å»º (2) addPrototype å‡½æ•°ï¼Œ å®ç°æ³¨å†Œ</p><p>å­ç±»å¦‚ä½•åš?  </p><p>(1) å£°æ˜ä¸€ä¸ªé™æ€å¯¹è±¡ï¼Œç„¶åå°†æ„é€ å‡½æ•°å£°æ˜ä¸ºç§æœ‰ï¼Œå¹¶åœ¨å…¶ä¸­è¿›è¡Œæ³¨å†Œ(è°ƒç”¨ addPrototype)ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºçš„ _LSAT: LandSatImage å’Œ -LandSatImage()ï¼Œåœ¨å…¶ä¸­è°ƒç”¨äº† addPrototype è¿›è¡Œæ³¨å†Œã€‚</p><p>(2) å®ç° clone å‡½æ•°ï¼Œç„¶åå€ŸåŠ©ä¸€ä¸ª protected çš„ æ„é€ å‡½æ•°è¿”å›æ–°å»ºå¯¹è±¡ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºçš„ clone å‡½æ•°ï¼Œå€ŸåŠ©äº #LandSatImage(int) æ–°å»ºå¯¹è±¡å¹¶è¿”å›ã€‚</p><p><img src="/2021/01/10/CPP-review/11.png" style="zoom:35%;"></p><h4 id="5-Inheritance-ç»§æ‰¿-with-virtual-functions-è™šå‡½æ•°"><a href="#5-Inheritance-ç»§æ‰¿-with-virtual-functions-è™šå‡½æ•°" class="headerlink" title="5. Inheritance(ç»§æ‰¿) with virtual functions(è™šå‡½æ•°)"></a>5. Inheritance(ç»§æ‰¿) with virtual functions(è™šå‡½æ•°)</h4><h5 id="5-1-è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°"><a href="#5-1-è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°" class="headerlink" title="5.1 è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°"></a>5.1 è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°</h5><p>(1)  æˆå‘˜å‡½æ•°å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>éè™šå‡½æ•°: ä½ å¹¶ä¸å¸Œæœ› derived class(å­ç±»)  é‡æ–°å®šä¹‰(override, è¦†å†™/é‡å†™) å®ƒã€‚</li><li>è™šå‡½æ•°: (åœ¨å‡½æ•°å‰æ·»åŠ  virtual)ï¼šä½ å¸Œæœ› derived class é‡æ–°å®šä¹‰(override, è¦†å†™/é‡å†™) å®ƒï¼Œ å¹¶ä¸”å®ƒå·²æœ‰é»˜è®¤å®šä¹‰ã€‚</li><li>æ˜¥æ—­å‡½æ•°å‡½æ•°: ä½ å¸Œæœ› derived class ä¸€å®šè¦é‡æ–°å®šä¹‰(override, è¦†å†™/é‡å†™)å®ƒï¼Œ ä½ å¯¹å®ƒæ²¡æœ‰é»˜è®¤å®šä¹‰ã€‚</li></ul><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span>&#123;</span>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;   <span class="hljs-comment">// pure virtual</span>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">error</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; msg)</span></span>;   <span class="hljs-comment">// impure virtual</span>  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">objectID</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;   <span class="hljs-comment">// non-virtual  </span>&#125;;</code></pre><p>é‡è½½(overload)ã€è¦†ç›–( é‡å†™override) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</p><ul><li><p>overload é‡è½½: åœ¨ C++ ç¨‹åºä¸­ï¼Œå¯ä»¥å°†è¯­ä¹‰ã€åŠŸèƒ½ç›¸ä¼¼çš„å‡ ä¸ªå‡½æ•°ç”¨åŒä¸€ä¸ªåå­—è¡¨ç¤ºï¼Œä½†å‚æ•°ä¸åŒ(åŒ…æ‹¬ç±»å‹ã€é¡ºåºã€ä¸ªæ•°ä¸åŒ)ã€‚é‡è½½çš„è°ƒç”¨æ—¶æ ¹æ®å‚æ•°åˆ—è¡¨æ¥å†³å®šè°ƒç”¨å“ªä¸€ä¸ªå‡½æ•°ã€‚å…¶ç‰¹å¾æ˜¯ï¼š</p><p> ç›¸åŒçš„èŒƒå›´(åœ¨åŒä¸€ä¸ªç±»ä¸­), å‡½æ•°åå­—ç›¸åŒ, å‚æ•°ä¸åŒ)</p></li><li><p>override è¦†ç›–: æ˜¯æŒ‡æ´¾ç”Ÿç±»å‡½æ•°è¦†ç›–åŸºç±»å‡½æ•°ã€‚è¦†ç›–çš„è°ƒç”¨æ—¶æ ¹ç»å¯¹è±¡ç±»å‹çš„ä¸åŒå†³å®šè°ƒç”¨å“ªä¸€ä¸ªã€‚ç‰¹å¾æ˜¯ï¼š</p><p> ä¸åŒçš„èŒƒå›´(åˆ†åˆ«ä½äºæ´¾ç”Ÿç±»ä¸åŸºç±»); å‡½æ•°åå­—ç›¸åŒ; å‚æ•°ç›¸åŒ; åŸºç±»å‡½æ•°å¿…é¡»æœ‰ virtual å…³é”®å­—</p></li></ul><h5 id="5-2-æ¨¡æ¿æ–¹æ³•-Template-method"><a href="#5-2-æ¨¡æ¿æ–¹æ³•-Template-method" class="headerlink" title="5.2 æ¨¡æ¿æ–¹æ³• Template method"></a>5.2 æ¨¡æ¿æ–¹æ³• Template method</h5><p>â€‹        å€ŸåŠ©äºè™šå‡½æ•°å’Œå¤šæ€ï¼Œå¯ä»¥å®ç°æ¨¡æ¿æ–¹æ³•ï¼šçˆ¶ç±»æŠŠå…¶ä¸­çš„ä¸€ä¸ªåŠ¨ä½œå†™æˆè™šå‡½æ•°ï¼Œå»¶ç¼“åˆ°å­ç±»æ¥è¿›è¡Œå®ç°ï¼Œåœ¨è°ƒç”¨æ—¶é€šè¿‡å­ç±»è¿›è¡Œè°ƒç”¨ã€‚ è¿™å°±æ˜¯è‘—åçš„ Template methodã€‚</p><pre><code class="hljs cpp"><span class="hljs-comment">// å¼€å‘è€…å®ç°çš„å†…å®¹: å¯¹äºæ²¡æœ‰åŠæ³•å†™å‡ºçš„ Serialize()ï¼Œ æ‰€ä»¥å°†å…¶å®šä¹‰ä¸ºè™šå‡½æ•° </span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CDocument</span></span><span class="hljs-class">&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OnFileOpen</span><span class="hljs-params">()</span></span>&#123;         <span class="hljs-comment">// è¿™æ˜¯ä¸ªç®—æ³•ï¼Œ æ¯ä¸ªcout è¾“å‡ºä»£è¡¨ä¸€ä¸ªå®é™…åŠ¨ä½œ</span>         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;dialog ...&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;check file status ... &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;open file ... &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;         Serialize();         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;close file ... &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;update all views ... &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;    &#125;        <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Serialize</span><span class="hljs-params">()</span> </span>&#123;&#125;;  &#125;;<span class="hljs-comment">// ä½¿ç”¨è€…ç»§æ‰¿çˆ¶ç±»ï¼Œå¹¶è‡ªå·±å»å®ç° Serialize() å‡½æ•°</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CMyDoc</span>:</span> <span class="hljs-keyword">public</span> CDocument&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Serilize</span><span class="hljs-params">()</span></span>&#123;        <span class="hljs-comment">// åªæœ‰åº”ç”¨ç¨‹åºæœ¬èº«æ‰çŸ¥é“å¦‚ä½•è¯»å–æ–‡ä»¶</span>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;CMyDoc::Serialize() &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;    &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    CMyDoc myDoc;    <span class="hljs-comment">// å‡è®¾å¯¹åº”(File/Open)</span>    myDoc.OnFileOpen();&#125;</code></pre><h4 id="6-è™šæŒ‡é’ˆ-å’Œ-è™šè¡¨"><a href="#6-è™šæŒ‡é’ˆ-å’Œ-è™šè¡¨" class="headerlink" title="6. è™šæŒ‡é’ˆ å’Œ è™šè¡¨"></a>6. è™šæŒ‡é’ˆ å’Œ è™šè¡¨</h4><p>(1) åªè¦ç±»æœ‰è™šå‡½æ•°ï¼Œå…¶å«æœ‰æˆå‘˜å°±æœ‰ä¸€ä¸ªè™šæŒ‡é’ˆï¼Œ æŒ‡å‘è™šè¡¨ï¼Œ ç„¶ååœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡è¿™ä¸ªè™šæŒ‡é’ˆï¼Œæ‰¾åˆ°è¿™ä¸ªè™šè¡¨ï¼Œè¿›è€Œè°ƒç”¨è¿™ä¸ªå‡½æ•°</p><p><img src="/2021/01/10/CPP-review/12.png" style="zoom:35%;"></p><p>(2) åŠ¨æ€ç»‘å®šè¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶: å­ç±»æˆå‘˜å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ã€æŒ‡é’ˆå‘ä¸Šè½¬å‹ã€è°ƒç”¨è™šå‡½æ•°</p><p>(3) åŠ¨æ€ç»‘å®š ä¸é™æ€ç»‘å®šçš„åŒºåˆ«ï¼š</p><ul><li><p>é™æ€ç»‘å®šå’ŒåŠ¨æ€ç»‘å®šçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼šåœ¨ä»€ä¹ˆæ—¶å€™å°†å‡½æ•°å®ç°å’Œå‡½æ•°è°ƒç”¨å…³è”èµ·æ¥ï¼Œæ˜¯åœ¨ç¼–è¯‘æœŸé—´è¿˜æ˜¯è¿è¡ŒæœŸé—´ã€‚</p></li><li><p>é™æ€ç»‘å®šæ˜¯æŒ‡åœ¨ç¼–è¯‘æœŸé—´å°±å¯ä»¥ç¡®å®šå‡½æ•°çš„è°ƒç”¨åœ°å€ï¼Œå¹¶äº§ç”Ÿä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´å‡½æ•°è°ƒç”¨åœ°å€æ˜¯æ—©æ—©ç»‘å®šçš„ã€‚ å…¶ä»£ç ç›´æ¥ç¼–è¯‘ä¸ºï¼š<br> <code>call xxxx</code></p></li><li><p>åŠ¨æ€ç»‘å®šçš„å‡½æ•°è°ƒç”¨çš„åœ°å€ä¸èƒ½åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šï¼Œéœ€è¦ç­‰åˆ°è¿è¡Œæ—¶æ‰ç¡®å®šï¼Œè¿™è¢«å«åšå»¶è¿Ÿç»‘å®šã€‚åŠ¨æ€ç»‘å®šå¾€å¾€é€šè¿‡è™šå‡½æ•°æ¥å®ç°ï¼Œè™šå‡½æ•°å…è®¸æ´¾ç”Ÿç±»é‡æ–°å®šä¹‰æˆå‘˜å‡½æ•°ï¼Œè€Œæ´¾ç”Ÿç±»é‡æ–°å®šä¹‰åŸºç±»æˆå‘˜å‡½æ•°å¹¶å®ç°åŠ¨æ€ç»‘å®šã€‚åŠ¨æ€ç»‘å®šçš„ä»£ç ä¸€èˆ¬ç¼–è¯‘ä¸º <code>call dword ptr [edx]</code>ã€‚è¿™é‡Œä¸å†æ˜¯ä¸€ä¸ªå›ºå®šçš„åœ°å€ï¼Œè€Œæ˜¯é€šè¿‡è™šæŒ‡é’ˆæ‰¾åˆ°è™šè¡¨ï¼Œç„¶åæ‰¾åˆ°ç¬¬ n ä¸ªå‡½æ•°ï¼Œ ç„¶åå°†å…¶å½“åšå‡½æ•°æŒ‡é’ˆè¿›è¡Œè°ƒç”¨ã€‚</p></li></ul><h2 id="äº”-æ³›å‹ç¼–ç¨‹"><a href="#äº”-æ³›å‹ç¼–ç¨‹" class="headerlink" title="äº”. æ³›å‹ç¼–ç¨‹"></a>äº”. æ³›å‹ç¼–ç¨‹</h2><p>æ¨¡æ¿ template</p><h4 id="1-å‡½æ•°æ¨¡æ¿"><a href="#1-å‡½æ•°æ¨¡æ¿" class="headerlink" title="1. å‡½æ•°æ¨¡æ¿"></a>1. å‡½æ•°æ¨¡æ¿</h4><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">complex</span>&#123;</span>   ....   T re,im;&#125;<span class="hljs-function"><span class="hljs-built_in">complex</span>&lt;<span class="hljs-keyword">double</span>&gt; <span class="hljs-title">c1</span><span class="hljs-params">(<span class="hljs-number">2.5</span>,<span class="hljs-number">1.5</span>)</span></span>;</code></pre><h4 id="2-ç±»æ¨¡æ¿"><a href="#2-ç±»æ¨¡æ¿" class="headerlink" title="2. ç±»æ¨¡æ¿"></a>2. ç±»æ¨¡æ¿</h4><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">complex</span> &#123;</span> <span class="hljs-keyword">public</span>:    <span class="hljs-built_in">complex</span> (T r = <span class="hljs-number">0</span>, T i = <span class="hljs-number">0</span>) : re (r), im (i) &#123; &#125;     <span class="hljs-built_in">complex</span>&amp; <span class="hljs-keyword">operator</span> += (<span class="hljs-keyword">const</span> <span class="hljs-built_in">complex</span>&amp;);     <span class="hljs-function">T <span class="hljs-title">real</span> <span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> re; &#125;     <span class="hljs-function">T <span class="hljs-title">imag</span> <span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> im; &#125;<span class="hljs-keyword">private</span>:    T re, im;    <span class="hljs-keyword">friend</span> <span class="hljs-built_in">complex</span>&amp; __doapl (<span class="hljs-built_in">complex</span>*, <span class="hljs-keyword">const</span> <span class="hljs-built_in">complex</span>&amp;); &#125;;<span class="hljs-comment">// è°ƒç”¨</span>&#123;    <span class="hljs-function"><span class="hljs-built_in">complex</span>&lt;<span class="hljs-keyword">double</span>&gt; <span class="hljs-title">c1</span><span class="hljs-params">(<span class="hljs-number">2.5</span>,<span class="hljs-number">1.5</span>)</span></span>; c2(<span class="hljs-number">2</span>,<span class="hljs-number">6</span>);    <span class="hljs-built_in">complex</span>&lt;<span class="hljs-keyword">int</span>&gt; ...&#125;</code></pre><h4 id="3-å‡½æ•°æ¨¡æ¿"><a href="#3-å‡½æ•°æ¨¡æ¿" class="headerlink" title="3. å‡½æ•°æ¨¡æ¿"></a>3. å‡½æ•°æ¨¡æ¿</h4><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">stone</span>&#123;</span> <span class="hljs-keyword">public</span>:    stone(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> h, <span class="hljs-keyword">int</span> we)    : _w(w), _h(h), _weight(we) &#123;  &#125;<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt; (<span class="hljs-keyword">const</span> stone&amp; rhs) <span class="hljs-keyword">const</span>&#123;     <span class="hljs-keyword">return</span> _weight &lt; rhs._weight;&#125;<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">int</span> _w, _h, _weight;&#125;;<span class="hljs-keyword">template</span> &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">T</span>&gt;</span><span class="hljs-class"><span class="hljs-title">inline</span> <span class="hljs-title">const</span> <span class="hljs-title">T</span>&amp; <span class="hljs-title">min</span>(<span class="hljs-title">const</span> <span class="hljs-title">T</span>&amp; <span class="hljs-title">a</span>, <span class="hljs-title">const</span> <span class="hljs-title">T</span>&amp; <span class="hljs-title">b</span>)&#123;</span>    <span class="hljs-keyword">return</span> b &lt; a ? b : a;  <span class="hljs-comment">// éœ€è¦ç±» T å¯¹ &lt; è¿›è¡Œå‡½æ•°é‡è½½ </span>&#125;<span class="hljs-comment">// è°ƒç”¨</span>stone r1(2,3), r2(3,3), r3;r3 = min(r1, r2);  <span class="hljs-comment">// å‚æ•°æ¨å¯¼çš„ç»“æœï¼ŒT ä¸º stoneï¼Œäºæ˜¯è°ƒç”¨ stone::operator &lt;</span></code></pre><h2 id="å…­ã€C-11"><a href="#å…­ã€C-11" class="headerlink" title="å…­ã€C++11"></a>å…­ã€C++11</h2><h4 id="1-namespace"><a href="#1-namespace" class="headerlink" title="1. namespace"></a>1. namespace</h4><p>é€šè¿‡ namespace å°†ä»£ç åŒ…èµ·æ¥ï¼Œé˜²æ­¢å†²çª</p><p>å½“ä½¿ç”¨çš„æ—¶å€™å¯ä»¥æœ‰ä¸¤ç§:</p><ul><li>using directive:  using namespace std;    cin;  cout</li><li>usding declarationï¼š  std::cout;  std::cin;</li></ul><h4 id="2-auto"><a href="#2-auto" class="headerlink" title="2. auto"></a>2. auto</h4><pre><code class="hljs cpp"><span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">string</span>&gt; c:<span class="hljs-keyword">auto</span> ite = find(c.begin(), c.end(), target);</code></pre><h4 id="3-ranged-base-for"><a href="#3-ranged-base-for" class="headerlink" title="3. ranged-base for"></a>3. ranged-base for</h4><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(decl : coll)&#123;    statement&#125;<span class="hljs-comment">// ä¾‹å¦‚</span><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i: &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;)&#123;    <span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-built_in">endl</span>;&#125;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">double</span>&gt; vec;...<span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> elem : vec)&#123;    <span class="hljs-built_in">cout</span> &lt;&lt; elem &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// pass by value</span>&#125;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp; elem: vec)&#123;  <span class="hljs-comment">// pass by reference</span>    elem *= <span class="hljs-number">3</span>;&#125;</code></pre><h4 id="4-variadic-templates"><a href="#4-variadic-templates" class="headerlink" title="4. variadic templates"></a>4. variadic templates</h4><h2 id="ä¸ƒ-STL-å®¹å™¨"><a href="#ä¸ƒ-STL-å®¹å™¨" class="headerlink" title="ä¸ƒ. STL å®¹å™¨"></a>ä¸ƒ. STL å®¹å™¨</h2><h2 id="å…«ã€å¸¸è§é—®é¢˜"><a href="#å…«ã€å¸¸è§é—®é¢˜" class="headerlink" title="å…«ã€å¸¸è§é—®é¢˜ ?"></a>å…«ã€å¸¸è§é—®é¢˜ ?</h2><h4 id="1-class-å’Œ-struct-çš„åŒºåˆ«"><a href="#1-class-å’Œ-struct-çš„åŒºåˆ«" class="headerlink" title="1. class å’Œ struct çš„åŒºåˆ«?"></a>1. class å’Œ struct çš„åŒºåˆ«?</h4><p>class å’Œ struct çš„åŒºåˆ«åœ¨äº class é»˜è®¤çš„æˆå‘˜æ˜¯ privateï¼Œè€Œ struct é»˜è®¤çš„æˆå‘˜æ˜¯ public ç±»å‹çš„</p><h4 id="2-quot-xx-quot-å’Œ-lt-xx-gt-çš„å¼•ç”¨æ–¹å¼çš„åŒºåˆ«"><a href="#2-quot-xx-quot-å’Œ-lt-xx-gt-çš„å¼•ç”¨æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="2. &quot;xx&quot; å’Œ &lt;xx&gt; çš„å¼•ç”¨æ–¹å¼çš„åŒºåˆ«!"></a>2. <code>&quot;xx&quot;</code> å’Œ <code>&lt;xx&gt;</code> çš„å¼•ç”¨æ–¹å¼çš„åŒºåˆ«!</h4><p><code>&lt;&gt;</code> å…ˆå»ç³»ç»Ÿç›®å½•ä¸­æ‰¾å¤´æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰åœ¨åˆ°å½“å‰ç›®å½•ä¸‹æ‰¾ã€‚æ‰€ä»¥åƒæ ‡å‡†çš„å¤´æ–‡ä»¶ stdio.hã€stdlib.hç­‰ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>è€Œ <code>&quot; &quot;</code> é¦–å…ˆåœ¨å½“å‰ç›®å½•ä¸‹å¯»æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå†åˆ°ç³»ç»Ÿç›®å½•ä¸­å¯»æ‰¾ã€‚ è¿™ä¸ªç”¨äºincludeè‡ªå®šä¹‰çš„å¤´æ–‡ä»¶ï¼Œè®©ç³»ç»Ÿä¼˜å…ˆä½¿ç”¨å½“å‰ç›®å½•ä¸­å®šä¹‰çš„</p><h4 id="3-privateã€public-å’Œ-protected-çš„ç»§æ‰¿ä½“ç³»"><a href="#3-privateã€public-å’Œ-protected-çš„ç»§æ‰¿ä½“ç³»" class="headerlink" title="3. privateã€public å’Œ protected çš„ç»§æ‰¿ä½“ç³»?"></a>3. privateã€public å’Œ protected çš„ç»§æ‰¿ä½“ç³»?</h4><h4 id="4-å•ä¾‹æ¨¡å¼-Singleton-ä¸­éœ€è¦å°†-constructor-æ”¾åœ¨-private-ä¸­-è¯•å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼"><a href="#4-å•ä¾‹æ¨¡å¼-Singleton-ä¸­éœ€è¦å°†-constructor-æ”¾åœ¨-private-ä¸­-è¯•å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼" class="headerlink" title="4. å•ä¾‹æ¨¡å¼ (Singleton) ä¸­éœ€è¦å°† constructor æ”¾åœ¨ private ä¸­, è¯•å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼?"></a>4. å•ä¾‹æ¨¡å¼ (Singleton) ä¸­éœ€è¦å°† constructor æ”¾åœ¨ private ä¸­, è¯•å®ç°ä¸€ä¸ªå•ä¾‹æ¨¡å¼?</h4><h4 id="5-ä»ç©ºé—´å¤§å°ã€ç¢ç‰‡é—®é¢˜ã€ç”Ÿæˆæ–¹å‘ã€åˆ†é…æ–¹å¼å’Œåˆ†é…æ•ˆç‡å¯¹æ ˆå’Œå †è¿›è¡Œæ¯”è¾ƒï¼š"><a href="#5-ä»ç©ºé—´å¤§å°ã€ç¢ç‰‡é—®é¢˜ã€ç”Ÿæˆæ–¹å‘ã€åˆ†é…æ–¹å¼å’Œåˆ†é…æ•ˆç‡å¯¹æ ˆå’Œå †è¿›è¡Œæ¯”è¾ƒï¼š" class="headerlink" title="5. ä»ç©ºé—´å¤§å°ã€ç¢ç‰‡é—®é¢˜ã€ç”Ÿæˆæ–¹å‘ã€åˆ†é…æ–¹å¼å’Œåˆ†é…æ•ˆç‡å¯¹æ ˆå’Œå †è¿›è¡Œæ¯”è¾ƒï¼š"></a>5. ä»ç©ºé—´å¤§å°ã€ç¢ç‰‡é—®é¢˜ã€ç”Ÿæˆæ–¹å‘ã€åˆ†é…æ–¹å¼å’Œåˆ†é…æ•ˆç‡å¯¹æ ˆå’Œå †è¿›è¡Œæ¯”è¾ƒï¼š</h4><p>(1) ç©ºé—´å¤§å°<strong>ï¼š</strong>ä¸€èˆ¬æ¥è®²åœ¨ 32 ä½ç³»ç»Ÿä¸‹ï¼Œå †å†…å­˜å¯ä»¥è¾¾åˆ° 4G çš„ç©ºé—´<strong>ã€‚ä½†æ˜¯</strong>å¯¹äºæ ˆæ¥è®²ï¼Œä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸€å®šçš„ç©ºé—´å¤§å°çš„ï¼Œä¾‹å¦‚ï¼Œåœ¨ VC6 ä¸‹é¢ï¼Œé»˜è®¤çš„æ ˆç©ºé—´å¤§å°æ˜¯ 1Mï¼ˆå¥½åƒæ˜¯ï¼Œè®°ä¸æ¸…æ¥šäº†ï¼‰ã€‚</p><p>(2) ç¢ç‰‡é—®é¢˜ï¼šå¯¹äºå †æ¥è®²ï¼Œé¢‘ç¹çš„ new/delete åŠ¿å¿…ä¼šé€ æˆå†…å­˜ç©ºé—´çš„ä¸è¿ç»­ï¼Œä»è€Œé€ æˆå¤§é‡çš„ç¢ç‰‡ï¼Œä½¿ç¨‹åºæ•ˆç‡é™ä½<strong>ã€‚</strong>å¯¹äºæ ˆæ¥è®²ï¼Œåˆ™ä¸ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ ˆæ˜¯å…ˆè¿›åå‡ºçš„é˜Ÿåˆ—ï¼Œä»¥è‡³äºæ°¸è¿œéƒ½ä¸å¯èƒ½æœ‰ä¸€ä¸ªå†…å­˜å—ä»æ ˆä¸­é—´å¼¹å‡ºã€‚</p><p>(3) ç”Ÿé•¿æ–¹å‘ï¼šå¯¹äºå †æ¥è®²ï¼Œç”Ÿé•¿æ–¹å‘æ˜¯å‘ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯å‘ç€å†…å­˜åœ°å€å¢åŠ çš„æ–¹å‘ï¼›å¯¹äºæ ˆæ¥è®²ï¼Œå®ƒçš„ç”Ÿé•¿æ–¹å‘æ˜¯å‘ä¸‹çš„ï¼Œæ˜¯å‘ç€å†…å­˜åœ°å€å‡å°çš„æ–¹å‘å¢é•¿ã€‚</p><p>(4) åˆ†é…æ–¹å¼<strong>ï¼š</strong>å †éƒ½æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œæ²¡æœ‰é™æ€åˆ†é…çš„å †<strong>ã€‚</strong>æ ˆæœ‰ 2 ç§åˆ†é…æ–¹å¼ï¼šé™æ€åˆ†é…å’ŒåŠ¨æ€åˆ†é…ã€‚é™æ€åˆ†é…æ˜¯ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œæ¯”å¦‚å±€éƒ¨å˜é‡çš„åˆ†é…ã€‚åŠ¨æ€åˆ†é…ç”± alloca å‡½æ•°è¿›è¡Œåˆ†é…ï¼Œä½†æ˜¯æ ˆçš„åŠ¨æ€åˆ†é…å’Œå †æ˜¯ä¸åŒçš„ï¼Œä»–çš„åŠ¨æ€åˆ†é…æ˜¯ç”±ç¼–è¯‘å™¨è¿›è¡Œé‡Šæ”¾ï¼Œæ— éœ€æˆ‘ä»¬æ‰‹å·¥å®ç°ã€‚</p><p>(5) åˆ†é…æ•ˆç‡ï¼šæ ˆæ˜¯æœºå™¨ç³»ç»Ÿæä¾›çš„æ•°æ®ç»“æ„ï¼Œè®¡ç®—æœºä¼šåœ¨åº•å±‚å¯¹æ ˆæä¾›æ”¯æŒï¼šåˆ†é…ä¸“é—¨çš„å¯„å­˜å™¨å­˜æ”¾æ ˆçš„åœ°å€ï¼Œå‹æ ˆå‡ºæ ˆéƒ½æœ‰ä¸“é—¨çš„æŒ‡ä»¤æ‰§è¡Œï¼Œè¿™å°±å†³å®šäº†æ ˆçš„æ•ˆç‡æ¯”è¾ƒé«˜ã€‚å †åˆ™æ˜¯ C/C++å‡½æ•°åº“æä¾›çš„ï¼Œå®ƒçš„æœºåˆ¶å¾ˆå¤æ‚ï¼Œå †çš„æ•ˆç‡æ¯”æ ˆè¦ä½å¾—å¤š</p><h2 id="TBD"><a href="#TBD" class="headerlink" title="TBD"></a>TBD</h2><p>å››ç§ç±»å‹è½¬æ¢ï¼šstatic_cast, dynamic_cast, const_cast, reinterpret_cast</p><p>æ¨¡æ¿ç‰¹åŒ–ã€åç‰¹åŒ–ï¼Œèƒå– traits æŠ€å·§</p><p>ç»§æ‰¿ã€è™šç»§æ‰¿ã€è±å½¢ç»§æ‰¿ç­‰</p><p>volatileã€extern</p><p>æ™ºèƒ½æŒ‡é’ˆåŸç†ï¼šå¼•ç”¨è®¡æ•°ã€RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰æ€æƒ³</p><p>æ™ºèƒ½æŒ‡é’ˆä½¿ç”¨ï¼šshared_ptrã€weak_ptrã€unique_ptrç­‰</p><p>C++11 éƒ¨åˆ†æ–°ç‰¹æ€§ï¼Œæ¯”å¦‚å³å€¼å¼•ç”¨ã€å®Œç¾è½¬å‘ç­‰</p><p><strong>è½¬æ¢å‡½æ•°</strong></p><p>â€‹    ç±»å‹è½¬æ¢è¿ç®—ç¬¦(conversion operator) æ˜¯ç±»çš„ä¸€ç§ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œ å®ƒè´Ÿè´£å°†ä¸€ä¸ªç±»ç±»å‹çš„å€¼è½¬æ¢æœªå…¶ä»–ç±»å‹ã€‚ å…¶ä¸€èˆ¬å½¢å¼å¦‚ä¸‹æ‰€ç¤º:</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">type</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;</code></pre><p>â€‹    å…¶ä¸­ type è¡¨ç¤ºæŸç§ç±»å‹ã€‚ ç±»å‹è½¬æ¢è¿ç®—ç¬¦å¯ä»¥é¢å‘ä»»æ„ç±»å‹è¿›è¡Œå®šä¹‰ï¼Œ åªè¦è¯¥ç±»å‹èƒ½å¤Ÿä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ã€‚ å› æ­¤æˆ‘ä»¬ä¸å…è®¸è½¬æ¢æˆæ•°ç»„æˆ–è€…å‡½æ•°ç±»å‹ï¼Œ ä½†å…è®¸è½¬æ¢æˆæŒ‡é’ˆæˆ–è€…å¼•ç”¨ç±»å‹ã€‚</p><p>â€‹    ç±»å‹è½¬æ¢è¿ç®—ç¬¦æ—¢æ²¡æœ‰æ˜¾å¼çš„è¿”å›ç±»å‹ï¼Œ ä¹Ÿæ²¡æœ‰å½¢å‚ï¼Œ è€Œä¸”å¿…é¡»å®šä¹‰æˆç±»çš„æˆå‘˜å‡½æ•°ã€‚ ç±»å‹è½¬æ¢è¿ç®—ç¬¦é€šå¸¸ä¸åº”è¯¥æ”¹å˜å¾…è½¬æ¢å¯¹è±¡çš„å†…å®¹ï¼Œ å› æ­¤ï¼Œ ç±»å‹è½¬æ¢è¿ç®—ç¬¦ä¸€èˆ¬è¢«å®šä¹‰æˆ const æˆå‘˜ã€‚</p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fraction</span></span><span class="hljs-class">&#123;</span><span class="hljs-keyword">public</span>:    Fraction(<span class="hljs-keyword">int</span> num, <span class="hljs-keyword">int</span> den = <span class="hljs-number">1</span>)    : m_numerator(num), m_denominator(den) &#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">double</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>&#123;        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">double</span>) (m_numerator / m_denominator);    &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">int</span> m_numerator; <span class="hljs-comment">// åˆ†å­</span>    <span class="hljs-keyword">int</span> m_denominator;  <span class="hljs-comment">// åˆ†æ¯</span>&#125;<span class="hljs-comment">// è°ƒç”¨</span><span class="hljs-function">Fraction <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)</span></span>;<span class="hljs-keyword">double</span> d = <span class="hljs-number">4</span> + f; <span class="hljs-comment">// è°ƒç”¨ operator double() å°† f è½¬æ¢ä¸º 0.6</span></code></pre><p><strong>explicit</strong></p><p>â€‹    å½“æˆ‘ä»¬ä½¿ç”¨ explicit å…³é”®å­—å£°æ˜æ„é€ å‡½æ•°æ—¶ï¼Œ å®ƒåªèƒ½ä»¥ç›´æ¥åˆå§‹åŒ–çš„å½¢å¼ä½¿ç”¨ã€‚ è€Œä¸”ï¼Œ ç¼–è¯‘å™¨å°†ä¸ä¼šå†è‡ªåŠ¨è½¬æ¢è¿‡ç¨‹ä¸­ä½¿ç”¨è¯¥æ„é€ å‡½æ•°ã€‚ è€ƒè™‘å¦‚ä¸‹åº”ç”¨åœºæ™¯ï¼š</p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fraction</span></span><span class="hljs-class">&#123;</span><span class="hljs-keyword">public</span>:    Fraction(<span class="hljs-keyword">int</span> num, <span class="hljs-keyword">int</span> den = <span class="hljs-number">1</span>)    : m_numerator(num), m_denominator(den) &#123;&#125;    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">double</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>&#123;        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">double</span>) (m_numerator / m_denominator);    &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">int</span> m_numerator; <span class="hljs-comment">// åˆ†å­</span>    <span class="hljs-keyword">int</span> m_denominator;  <span class="hljs-comment">// åˆ†æ¯</span>&#125;<span class="hljs-comment">// è°ƒç”¨</span><span class="hljs-function">Fraction <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)</span></span>;<span class="hljs-keyword">double</span> d = f + <span class="hljs-number">4</span>; <span class="hljs-comment">// Error: ambiguous</span><span class="hljs-comment">// äº§ç”ŸäºŒä¹‰æ€§çš„åŸå› :</span><span class="hljs-comment">// å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œå°† 4 è½¬æ¢ä¸º Fractionï¼Œ ç„¶åä¸¤è€…è¿›è¡Œç›¸åŠ </span><span class="hljs-comment">// ä¹Ÿå¯ä»¥å°† f è½¬æ¢ä¸º double, ç„¶åä¸¤ä¸ª double ç›¸åŠ </span><span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ explicit è¿›è¡Œå£°æ˜ï¼Œ åœ¨æ„é€ å‡½æ•°ä¹‹å‰æ·»åŠ  explicit å…³é”®å­—ï¼Œ ç„¶åè¿›è¡Œéšå¼è½¬æ¢ã€‚</span></code></pre><p><strong>5. æ™ºèƒ½æŒ‡é’ˆ</strong></p><p>  æ™ºèƒ½æŒ‡é’ˆçš„æœ¬è´¨æ˜¯ç±»æ¨¡æ¿ï¼Œä¸»è¦æ˜¯ä¸ºäº†æˆ‘ä»¬æ›´åŠ æ–¹ä¾¿(ä¹Ÿæ›´åŠ å®‰å…¨çš„)ä½¿ç”¨åŠ¨æ€å†…å­˜ï¼Œå®ƒçš„è¡Œä¸ºç±»ä¼¼äºå¸¸è§„æŒ‡é’ˆï¼Œé‡è¦çš„åŒºåˆ«æ˜¯å®ƒè´Ÿè´£è‡ªåŠ¨é‡Šæ”¾æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚</p><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">T</span>&gt;</span><span class="hljs-class"><span class="hljs-title">class</span> <span class="hljs-title">shared_ptr</span>&#123;</span><span class="hljs-keyword">public</span>:    T&amp; <span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span> &#123; <span class="hljs-keyword">return</span> * px; &#125;    T* <span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-keyword">const</span> &#123;<span class="hljs-keyword">return</span> px; &#125;        <span class="hljs-built_in">shared_ptr</span>(T*p): px(p) &#123;&#125;<span class="hljs-keyword">private</span>:    T* px;    <span class="hljs-keyword">long</span> * pn;    ...&#125;</code></pre>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>transformer-for-vision-task</title>
    <link href="/2020/12/15/transformer-for-vision-task/"/>
    <url>/2020/12/15/transformer-for-vision-task/</url>
    
    <content type="html"><![CDATA[<p>transformer æ˜¯ä¸€ç§æ–°æå‡ºçš„ç¥ç»ç½‘ç»œç»„ä»¶ï¼Œ ä¸»è¦åˆ©ç”¨æ³¨æ„åŠ›æœºåˆ¶æ¥æå–å†…åœ¨ç‰¹å¾ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»äº†è§†è§‰æ–¹å‘ä¸Š transformer çš„åº”ç”¨ã€‚</p><a id="more"></a><p>æœ¬æ–‡å…ˆä» transformer çš„åŸºæœ¬ç»„ä»¶ self-attention å…¥æ‰‹ï¼Œ ä»‹ç» self-attention æœºåˆ¶å¹¶é€æ¸å±•å¼€è‡³ transformer æ¨¡å‹ã€‚ ç„¶ååœ¨ è®¡ç®—æœºè§†è§‰é¢†åŸŸæŒ‘é€‰äº†å››ä¸ªé‡è¦çš„æ¨¡å‹ï¼šViT(classification)ã€DETR(detection)ã€D-DETR(detection) å’Œ TTSR(super resolution) è¿›è¡Œåˆ†äº«ã€‚æœ€åé˜è¿°ä¸€äº›é«˜æ•ˆçš„ transformer æœºåˆ¶ã€‚</p><h3 id="1-transformer-çš„æå‡º-attention-is-all-your-need"><a href="#1-transformer-çš„æå‡º-attention-is-all-your-need" class="headerlink" title="1. transformer çš„æå‡º : attention is all your need"></a>1. transformer çš„æå‡º : attention is all your need</h3><p>transformer åœ¨ NLP é¢†åŸŸåº”ç”¨æœ‰ä¸‰ä¸ªé‡è¦çš„èŠ‚ç‚¹ï¼š</p><ul><li>2017å¹´06æœˆï¼šé¦–æ¬¡å®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶çš„ transformerï¼Œ å¹¶å°†å…¶ç”¨äºæœºå™¨ç¿»è¯‘å’Œè‹±è¯­åˆ†æä»»åŠ¡ï¼Œå‘è¡¨äºè®ºæ–‡ã€Š Attention is all your need ã€‹ã€‚è¿™æ˜¯ transformer çš„èµ·ç‚¹ï¼Œ ä¹Ÿæ˜¯æœ¬æ–‡ä»‹ç»çš„é‡ç‚¹ã€‚</li><li>2018å¹´10æœˆï¼šå¼•å…¥äº†ä¸€ç§æ–°çš„è¯­è¨€è¡¨ç¤ºæ¨¡å‹ï¼Œç§°ä¸º BERTï¼Œ é€šè¿‡è”åˆè°ƒèŠ‚å·¦å³ä¸Šä¸‹æ–‡ï¼Œä»æœªæ ‡è®°çš„æ–‡æœ¬ä¸­é¢„è®­ç»ƒä¸€ä¸ª transformerã€‚</li><li>2020å¹´05æœˆï¼š GPT-3è¯ç”Ÿï¼šåœ¨ 45TB çš„çº¯æ–‡æœ¬æ•°æ®ä¸Šé¢„è®­ç»ƒäº†ä¸€ä¸ªå…·æœ‰ 1750 äº¿è¶…å‚æ•°çš„å·¨å‹ transformer æ¨¡å‹ GPT-3ã€‚è¿™ä¸ªæ¨¡å‹åœ¨ä¸è¿›è¡Œå¾®è°ƒçš„æƒ…å†µä¸‹ï¼Œåœ¨ä¸åŒçš„è‡ªç„¶è¯­è¨€ä»»åŠ¡ä¸Šå®ç°äº†å¼ºå¤§çš„æ€§èƒ½ã€‚</li></ul><h4 id="1-1-vanilla-transformer"><a href="#1-1-vanilla-transformer" class="headerlink" title="1.1 vanilla transformer"></a>1.1 vanilla transformer</h4><p>â€‹        åŸå§‹çš„ transformer ç”¨äºè¿›è¡Œæœºå™¨ç¿»è¯‘ä»»åŠ¡ï¼Œ å…¶æ¨¡å‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ å®ƒç”±ä¸€ç³»åˆ—çš„ encoder å’Œ decoder ç»„æˆã€‚ æ¯ä¸ª encoder ç”± self-attention å±‚å’Œ feed forward nn ç»„æˆï¼Œ æ¯ä¸ª decoder åˆ™æ˜¯ç”± self-attentionã€encoder-decoder attention å’Œ feed forward nn ç»„æˆã€‚ åœ¨è¾“å…¥ä¹‹å‰å…ˆå°†å¥å­ä¸­çš„æ¯ä¸ªå•è¯ embedding ä¸ºå›ºå®šç»´åº¦çš„å‘é‡ï¼Œ ç„¶åç»è¿‡ encoder-decoder è¿›è¡Œç¼–è§£ç ï¼Œæœ€åå°†è¾“å‡ºçš„å‘é‡é‡æ–°ç¼–ç ä¸ºä¸€ä¸ª ä¸ªå•è¯ç»„æˆå¥å­ï¼Œ ä»è€Œå®Œæˆç¿»è¯‘ä»»åŠ¡ã€‚å›¾ä¸­çš„ encoder ä¸­çš„ Self-Attention å’Œ decoder ä¸­çš„ Encoder-Decode Attention å’Œå‡ ä¹ç›¸åŒï¼Œ åªæ˜¯è¾“å…¥æœ‰æ‰€å·®åˆ«ã€‚</p><p><img src="/2020/12/15/transformer-for-vision-task/1.png" style="zoom:45%;"></p><h4 id="1-2-self-attention-layer"><a href="#1-2-self-attention-layer" class="headerlink" title="1.2 self attention layer"></a>1.2 self attention layer</h4><p>å‚è€ƒå®ç°ï¼š <a href="http://nlp.seas.harvard.edu/2018/04/03/attention.html">http://nlp.seas.harvard.edu/2018/04/03/attention.html</a></p><p>â€‹        self attention æœºåˆ¶å¯ä»¥æè¿°ä¸ºå°†ä¸€ä¸ªæŸ¥è¯¢ query å’Œä¸€ç»„é”®å€¼å¯¹ key-val æ˜ å°„åˆ°ä¸€ä¸ªè¾“å‡º outputï¼Œå…¶ä¸­ queryã€keyã€val å’Œ output éƒ½æ˜¯å‘é‡ã€‚è¾“å‡º output æ˜¯ä»¥å€¼çš„åŠ æƒå’Œæ¥è®¡ç®—çš„ï¼Œå…¶ä¸­åˆ†é…ç»™æ¯ä¸ªå€¼çš„æƒé‡ weight æ˜¯ç”± query ä¸å¯¹åº” key çš„ç›¸ä¼¼åº¦è®¡ç®—å‡ºæ¥çš„ã€‚å…¶å…·ä½“çš„æ“ä½œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2020/12/15/transformer-for-vision-task/self-attention.png" style="zoom:30%;"></p><p>â€‹        åœ¨ self-attention å±‚ï¼Œ é¦–å…ˆå°†è¾“å…¥ vector è½¬åŒ–ä¸ºä¸‰ä¸ªä¸åŒçš„ vectorï¼Œ è¿™ä¸‰ä¸ªå‘é‡è¢«ç§°ä¸º query vector(to match others) , key vector(to be matched) å’Œ value vector(information to be  extracted)ã€‚å°†è¿™ä¸‰ä¸ªå‘é‡æ‰“åŒ…ä¸º Qã€Vã€K ä¸‰ä¸ªçŸ©é˜µã€‚åœ¨æ­¤ä¹‹åï¼Œæ‰§è¡Œå¦‚ä¸‹æ­¥éª¤:</p><p>Setp 1ï¼šè®¡ç®—ä¸åŒè¾“å…¥ä¹‹é—´çš„åˆ†æ•°ï¼Œ è¿™é‡Œè®°ä¸º: $S = Q \cdot K^T$</p><p>Step 2ï¼šæ¢¯åº¦æ ‡å‡†åŒ–ï¼š$S_n = S / \sqrt{d_K}$</p><p>Step 3:  å€ŸåŠ© softmax å°†åˆ†æ•°è½¬åŒ–æ¦‚ç‡  $P = softmax(S_n)$</p><p>Step 4:  å°† P ä½œä¸ºæƒé‡ï¼Œä¹˜ä»¥ V çŸ©é˜µ  $Z = V \cdot P$</p><p>ä¸Šè¿°çš„å¤„ç†è¿‡ç¨‹å¯ä»¥è¢«ç»Ÿä¸€åˆ°å¦‚ä¸‹çš„å…¬å¼ä¸­ï¼š</p><script type="math/tex; mode=display">Attention(Q, K, V) = softmax(\frac{Q \cdot K^T}{\sqrt{d_K}}) \cdot V</script><p>â€‹         è¯¥å…¬å¼çš„è§£é‡Šå¾ˆç®€å•ã€‚ ç¬¬1æ­¥è®¡ç®—ä¸¤ä¸ªä¸åŒå‘é‡ä¹‹é—´çš„åˆ†æ•°ï¼Œè¯¥åˆ†æ•°çš„å«ä¹‰æ˜¯å½“å‰ä½ç½®çš„å•è¯å’Œå…¶ä»–å•è¯çš„å…³è”ç¨‹åº¦ã€‚ç¬¬ 2 æ­¥å¯¹åˆ†æ•°è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œä¸»è¦æ˜¯ä½¿å…¶æœ‰æ›´ç¨³å®šçš„æ¢¯åº¦(ç‚¹ç§¯ç»“æœè¾ƒå¤§ï¼Œè¾“å…¥ softmax çš„å€¼è¾ƒå¤§ï¼Œä»è€Œå¯¼è‡´ æ¢¯åº¦è¾ƒå°)ï¼Œä»¥è¾¾åˆ°æ›´å¥½çš„è®­ç»ƒæ•ˆæœã€‚ç¬¬ 3 æ­¥å°†åˆ†æ•°è½¬å˜æˆæ¦‚ç‡ã€‚ç¬¬å››æ­¥æ˜¯å°†æ¯ä¸ªå€¼å‘é‡ä¹˜ä»¥æ¦‚ç‡ï¼Œæ¦‚ç‡è¾ƒå¤§çš„å‘é‡ä¼šè¢«ä¸‹é¢å‡ å±‚æ›´åŠ æ³¨æ„(attention)ã€‚ ä¸€ä¸ªç®€å•çš„ self-attention å®ç°å¦‚ä¸‹:</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">attention</span>(<span class="hljs-params">query, key, value, mask=None, dropout=<span class="hljs-number">0.0</span></span>):</span>    d_k = query.size(<span class="hljs-number">-1</span>)    scores = torch.matmul(query, key.transpose(<span class="hljs-number">-2</span>, <span class="hljs-number">-1</span>)) / math.sqrt(d_k)    <span class="hljs-keyword">if</span> mask <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:        scores = scores.masked_fill(mask == <span class="hljs-number">0</span>, <span class="hljs-number">-1e9</span>)    p_attn = F.softmax(scores, dim = <span class="hljs-number">-1</span>)    <span class="hljs-comment"># (Dropout described below)</span>    p_attn = F.dropout(p_attn, p=dropout)    <span class="hljs-keyword">return</span> torch.matmul(p_attn, value), p_attn</code></pre><p>â€‹        è§£ç å™¨ä¸­çš„ Encoder-Decode attention å’Œç¼–ç å™¨ä¸­çš„ Self-Attention å‡ ä¹ç›¸åŒã€‚ä¸åŒçš„æ˜¯çŸ©é˜µ K å’Œ çŸ©é˜µ V æ¥è‡ªäº ç¼–ç å™¨ï¼Œ è€Œ Q æ¥è‡ªä¸Šä¸€å±‚è¾“å‡ºã€‚</p><h4 id="1-2-Multi-Head-Attention"><a href="#1-2-Multi-Head-Attention" class="headerlink" title="1.2 Multi-Head Attention"></a>1.2 Multi-Head Attention</h4><p>â€‹        ä¸ºäº†æå‡ self-attention å±‚çš„æ€§èƒ½ï¼ŒåŠ å…¥äº†ä¸€ç§å«åš multi-head attention çš„æœºåˆ¶ï¼Œè¿›ä¸€æ­¥å®Œå–„äº† self-attention å±‚ã€‚è€ƒè™‘æˆ‘ä»¬åœ¨æµè§ˆå¥å­çš„æ—¶å€™ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„å‚è€ƒè¯ï¼Œå¾€å¾€éœ€è¦åŒæ—¶å…³æ³¨å…¶ä»–å‡ ä¸ªè¯ï¼Œ è€Œå•å¤´çš„æ³¨æ„åŠ›æœºåˆ¶é™å®šäº†å¯¹æŸä¸€ä¸ªç‰¹å®šä½ç½®çš„å…³æ³¨èƒ½åŠ›ã€‚å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶é€šè¿‡èµ‹äºˆæ³¨æ„åŠ›å±‚ä¸åŒçš„è¡¨ç¤ºå­ç©ºé—´æ¥å®ç°çš„ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹ä¸åŒçš„å¤´ä½¿ç”¨ä¸åŒçš„æŸ¥è¯¢ã€é”®å’Œå€¼çŸ©é˜µï¼Œç”±äºéšæœºåˆå§‹åŒ–ï¼Œå®ƒä»¬å¯ä»¥åœ¨è®­ç»ƒåå°†è¾“å…¥å‘é‡æŠ•å°„åˆ°ä¸åŒçš„è¡¨ç¤ºå­ç©ºé—´ã€‚</p><p><img src="/2020/12/15/transformer-for-vision-task/2.png" style="zoom:45%;"></p><p>â€‹        åœ¨å…·ä½“å®ç°ä¸Šï¼Œ é€šè¿‡çº¿æ€§å‡½æ•°å°†å•ä¸ªçš„ keyï¼Œ query å’Œ value åˆ†è£‚ä¸ºå¤šä¸ªï¼Œ ç„¶åå¯¹åº”çš„ keyï¼Œ value å’Œ query åˆ†åˆ«è¿›è¡Œå¤„ç†å³å¯ã€‚æœ€åå°†åˆ†è£‚çš„å¤šä¸ªèŠ‚ç‚¹ concatï¼Œ å¹¶é€šè¿‡çº¿æ€§å‡½æ•°è¿›è¡Œç»“åˆèŠ‚è¯¾ã€‚</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MultiHeadedAttention</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, h, d_model, dropout=<span class="hljs-number">0.1</span></span>):</span>        <span class="hljs-string">&quot;Take in model size and number of heads.&quot;</span>        super(MultiHeadedAttention, self).__init__()        <span class="hljs-keyword">assert</span> d_model % h == <span class="hljs-number">0</span>        <span class="hljs-comment"># We assume d_v always equals d_k</span>        self.d_k = d_model // h        self.h = h        self.linears = clones(nn.Linear(d_model, d_model), <span class="hljs-number">4</span>)        self.attn = <span class="hljs-literal">None</span>        self.dropout = nn.Dropout(p=dropout)            <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, query, key, value, mask=None</span>):</span>        <span class="hljs-string">&quot;Implements Figure 2&quot;</span>        <span class="hljs-keyword">if</span> mask <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:            <span class="hljs-comment"># Same mask applied to all h heads.</span>            mask = mask.unsqueeze(<span class="hljs-number">1</span>)        nbatches = query.size(<span class="hljs-number">0</span>)                <span class="hljs-comment"># 1) Do all the linear projections in batch from d_model =&gt; h x d_k </span>        query, key, value = \            [l(x).view(nbatches, <span class="hljs-number">-1</span>, self.h, self.d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)             <span class="hljs-keyword">for</span> l, x <span class="hljs-keyword">in</span> zip(self.linears, (query, key, value))]                <span class="hljs-comment"># 2) Apply attention on all the projected vectors in batch. </span>        x, self.attn = attention(query, key, value, mask=mask,                                  dropout=self.dropout)                <span class="hljs-comment"># 3) &quot;Concat&quot; using a view and apply a final linear. </span>        x = x.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>).contiguous() \             .view(nbatches, <span class="hljs-number">-1</span>, self.h * self.d_k)        <span class="hljs-keyword">return</span> self.linears[<span class="hljs-number">-1</span>](x)</code></pre><h4 id="1-3-position-encoding"><a href="#1-3-position-encoding" class="headerlink" title="1.3 position encoding"></a>1.3 position encoding</h4><p>â€‹        éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°è¿‡ç¨‹ä¸æ¯ä¸ªè¯çš„ä½ç½®æ— å…³ï¼Œå› æ­¤è‡ªæ³¨æ„åŠ›å±‚ç¼ºä¹æ•æ‰å¥å­ä¸­è¯çš„ä½ç½®ä¿¡æ¯çš„èƒ½åŠ›ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨åŸå§‹è¾“å…¥åµŒå…¥çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªç»´åº¦ä¸º $d_{model}$ çš„ä½ç½®ç¼–ç ï¼Œä»¥å¾—åˆ°å•è¯çš„æœ€ç»ˆè¾“å…¥å‘é‡ã€‚å…·ä½“æ¥è¯´ï¼Œä½ç½®ç¼–ç çš„å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\begin{align}PE(pos, 2i) &= sin(\frac{pos}{10000^{\frac{2i}{d_{model}}}}); \\PE(pos, 2i+1) &= cos(\frac{pos}{10000^{\frac{2i}{d_{model}}}})\end{align}</script><p>è¿™é‡Œçš„ $pos$ è¡¨ç¤ºå•è¯åœ¨å¥å­ä¸­çš„ä½ç½®ï¼Œ $i$  åˆ™è¡¨ç¤ºå½“å‰ç¼–ç çš„ç»´åº¦ã€‚</p><h4 id="1-4-Other-Parts-in-Transformer"><a href="#1-4-Other-Parts-in-Transformer" class="headerlink" title="1.4 Other Parts in Transformer"></a>1.4 Other Parts in Transformer</h4><p>è®ºæ–‡ ã€Šattentionis all your needã€‹ çš„ encoder-decoder æ¨¡å‹å¦‚ä¸‹æ‰€ç¤ºï¼Œ æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹å…¶ä»–çš„ç»„æˆéƒ¨åˆ†ï¼š</p><p><img src="/2020/12/15/transformer-for-vision-task/3.png" style="zoom:70%;"></p><ul><li><p>Residual in the encoder and decoderï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ åœ¨ç¼–ç å™¨å’Œè§£ç å™¨çš„æ¯ä¸ªå­å±‚ä¸­éƒ½å¢åŠ äº†ä¸€ä¸ªæ®‹å·®è¿æ¥ï¼Œä»¥åŠ å¼ºä¿¡æ¯çš„æµåŠ¨ï¼Œè·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚ä¹‹åå†è¿›è¡Œ layer normalizationã€‚ä¸Šè¿°è¿ç®—å¯ä»¥æè¿°ä¸ºï¼š</p><script type="math/tex; mode=display">layernorm(X + attention(X))</script><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œç”¨ $X$ ä½œä¸ºè‡ªå…³æ³¨å±‚çš„è¾“å…¥ï¼Œå› ä¸º queryã€key å’Œ value çŸ©é˜µ Qã€K å’Œ V éƒ½æ˜¯ç”±åŒä¸€ä¸ªè¾“å…¥çŸ©é˜µ $X$ å¯¼å‡ºçš„ã€‚</p></li><li><p>Feed-forward neural networkï¼šfeed-forward NN æ˜¯ç”±ä¸¤ä¸ªçº¿æ€§å˜æ¢å±‚å’Œå®ƒä»¬å†…éƒ¨çš„ ReLU æ¿€æ´»å‡½æ•°ç»„æˆçš„ï¼Œè¯¥è¿ç®—å¯ä»¥æè¿°ä¸ºï¼š</p><script type="math/tex; mode=display">FFNN(X) = W_2 \sigma(W_1X)</script><p>å…¶ä¸­ $W1$å’Œ $W2$ æ˜¯ä¸¤ä¸ªçº¿æ€§å˜æ¢å±‚çš„ä¸¤ä¸ªå‚æ•°çŸ©é˜µï¼Œ$\sigma$ ä»£è¡¨ ReLUæ¿€æ´»å‡½æ•°ã€‚</p></li><li><p>Final layer in decoderï¼šdecoder çš„æœ€åä¸€å±‚æ—¨åœ¨å°†è¾“å‡ºçš„å‘é‡é‡æ–°ç¼–ç ä¸ºä¸€ä¸ªå­—ã€‚å®ƒæ˜¯ç”±ä¸€ä¸ªçº¿æ€§å±‚å’Œä¸€ä¸ªsoftmax å±‚å®ç°çš„ã€‚çº¿æ€§å±‚å°†å‘é‡æŠ•å°„æˆä¸€ä¸ª $d<em>{word}$ ç»´åº¦çš„ logits å‘é‡ï¼Œå…¶ä¸­ $d</em>{word}$ æ˜¯è¯æ±‡ä¸­çš„å•è¯æ•°ã€‚ç„¶åï¼Œç”¨ softmax å±‚å°† logits å‘é‡è½¬åŒ–ä¸ºæ¦‚ç‡ã€‚</p></li></ul><h3 id="2-Computer-Vision-ä¸­çš„-transformer"><a href="#2-Computer-Vision-ä¸­çš„-transformer" class="headerlink" title="2. Computer Vision ä¸­çš„ transformer"></a>2. Computer Vision ä¸­çš„ transformer</h3><p>â€‹        è®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­ä½¿ç”¨çš„å¤§å¤šæ•° transformer éƒ½åˆ©ç”¨äº† transformer çš„ encoder æ¨¡å—ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒå¯ä»¥è¢«è§†ä¸ºä¸€ç§æ–°çš„ç‰¹å¾é€‰æ‹©å™¨ï¼Œå®ƒä¸å·ç§¯ç¥ç»ç½‘ç»œ(CNNs)å’Œé€’å½’ç¥ç»ç½‘ç»œ(RNNs)æ˜¯ä¸åŒçš„ã€‚</p><ul><li>ä¸ CNNåªå…³æ³¨å±€éƒ¨ç‰¹å¾ç›¸æ¯”ï¼Œtransformer èƒ½å¤Ÿæ•æ‰é•¿è·ç¦»ç‰¹å¾ï¼Œè¿™æ„å‘³ç€å…¨å±€ä¿¡æ¯å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡ transformer å¾—åˆ°ã€‚</li><li>ä¸ RNN çš„éšè—çŠ¶æ€å¿…é¡»ä¾æ¬¡è®¡ç®—ç›¸æ¯”ï¼Œtransformer çš„æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºè‡ªæ³¨æ„å±‚å’Œå…¨è¿æ¥å±‚çš„è¾“å‡ºå¯ä»¥å¹¶è¡Œè®¡ç®—ï¼Œå®¹æ˜“åŠ é€Ÿã€‚</li></ul><p>â€‹        ç›¸æ¯”äº NLP è¾“å…¥çš„ä¸€ç»´åºåˆ—æ¥è¯´ï¼Œ CV é¢†åŸŸçš„æ•°æ®åˆ™æ˜¯äºŒç»´çš„å›¾åƒçŸ©é˜µã€‚ è¿™æ˜¯ä¸¤è€…çš„åŒºåˆ«æ‰€åœ¨ï¼Œ æ‰€ä»¥åœ¨æœ€åˆçš„ç ”ç©¶ä¸­ï¼Œ ä¸»è¦çš„æ‰‹æ®µå°±æ˜¯è€ƒè™‘æ€ä¹ˆå°†å›¾åƒè½¬æ¢ä¸ºè®­ç»ƒè¾“å…¥ transformerï¼Œ å¾—åˆ°è¾“å‡ºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»åˆ†ç±»ã€æ£€æµ‹ã€è¶…åˆ†ä¸‰ä¸ªé¢†åŸŸåˆ†åˆ«é€‰å–ä¸€åˆ°ä¸¤ä¸ªæ¨¡å‹ï¼Œå¯¹è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ transformer è¿›è¡Œè®²è§£ã€‚</p><h4 id="1-ViT-for-classification"><a href="#1-ViT-for-classification" class="headerlink" title="(1)  ViT for classification"></a>(1)  ViT for classification</h4><p>â€‹    ç€çœ¼äºåˆ†ç±»ä»»åŠ¡ï¼Œ å°†å›¾ç‰‡åˆ‡åˆ†ä¸ºè´´ç‰‡åºåˆ—ï¼Œ å°†çº¯ transformer ç›´æ¥åº”ç”¨äº è´´ç‰‡ åºåˆ—</p><p>â€‹    è¿™ç¯‡è®ºæ–‡æ˜¯æ¯”è¾ƒæ—©çš„å°† transformer æœºåˆ¶åº”ç”¨åˆ° classification é¢†åŸŸçš„æ–‡ç« ã€‚é¦–å…ˆï¼Œå¯¹åŸå§‹å›¾ç‰‡è¿›è¡Œåˆ†å—ï¼Œå±•å¹³æˆä¸ºåºåˆ—ï¼Œç„¶åå°†å…¶è¾“å…¥è¿›åŸå§‹çš„ Transformer æ¨¡å‹çš„ç¼–ç å™¨ Encoder éƒ¨åˆ†ï¼Œæœ€åè¿æ¥ä¸€ä¸ªå…¨è¿æ¥å±‚å¯¹å›¾ç‰‡è¿›è¡Œåˆ†ç±»ã€‚</p><p>github: <a href="https://github.com/lucidrains/vit-pytorch">https://github.com/lucidrains/vit-pytorch</a></p><p>Paper: <a href="https://openreview.net/pdf?id=YicbFdNTTy">An Image is worth 16X16 words: transformers for image recognition at scale</a></p><p><img src="/2020/12/15/transformer-for-vision-task/vit.gif" alt="img" style="zoom:50%;"></p><ol><li><p><strong>æ•°æ®å¤„ç†éƒ¨åˆ†</strong>ï¼šåŸå§‹è¾“å…¥çš„å›¾ç‰‡æ•°æ®æ—¶ H<em>W</em>C, æˆ‘ä»¬å…ˆå¯¹å›¾ç‰‡è¿›è¡Œåˆ†å—ï¼Œå†è¿›è¡Œå±•å¹³ã€‚ å‡è®¾æ¯ä¸ªå—çš„é•¿å®½ä¸º(P, P), é‚£ä¹ˆåˆ†å—çš„æ•°ç›®ä¸º N = H <em> W / (P </em> P)ã€‚ å›¾ä¸­çš„ N = 9ï¼Œ è®ºæ–‡ä¸­çš„ P = 16ã€‚å¯¹æ¯ä¸ªå›¾ç‰‡å—å±•å¹³æˆä¸€ç»´å‘é‡ï¼Œ æ¯ä¸ªå‘é‡å¤§å°ä¸º P <em> P </em> Cï¼Œ æ€»çš„è¾“å…¥å˜æ¢ä¸º N <em> (P^2 </em> C)ã€‚</p><pre><code class="hljs apache"><span class="hljs-attribute">x</span> = rearrange(img, &#x27;b c (h p<span class="hljs-number">1</span>) (w p<span class="hljs-number">2</span>) -&gt; b (h w) (p<span class="hljs-number">1</span> p<span class="hljs-number">2</span> c)&#x27;, p<span class="hljs-number">1</span> = p, p<span class="hljs-number">2</span> = p) # use einopsçš„æ‹“å±•åŒ…</code></pre></li><li><p><strong>Patch Embedding</strong>ï¼šä½¿ç”¨å…¨è¿æ¥å±‚å¯¹æ¯ä¸€ä¸ªå‘é‡éƒ½åšä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œ å°†å‘é‡çš„ç»´åº¦å‹ç¼©ä¸ºDã€‚</p><pre><code class="hljs reasonml">self.patch_to_embedding = nn.<span class="hljs-constructor">Linear(<span class="hljs-params">patch_dim</span>, <span class="hljs-params">dim</span>)</span></code></pre></li><li><p><strong>cls token + Positional Encoding</strong>ï¼š</p><ul><li><p><strong>åŸå§‹çš„ Transformer å¼•å…¥äº†ä¸€ä¸ª Positional encoding æ¥åŠ å…¥åºåˆ—çš„ä½ç½®ä¿¡æ¯</strong>ï¼ŒåŒæ ·åœ¨è¿™é‡Œä¹Ÿå¼•å…¥äº†pos_embeddingï¼Œæ˜¯<strong>ç”¨ä¸€ä¸ªå¯è®­ç»ƒçš„å˜é‡</strong>æ›¿ä»£ã€‚</p><pre><code class="hljs angelscript">self.pos_embedding = nn.Parameter(torch.randn(<span class="hljs-number">1</span>, num_patches + <span class="hljs-number">1</span>, dim))        x += self.pos_embedding[:, :(n + <span class="hljs-number">1</span>)]</code></pre></li><li><p>ViT åœ¨ Transformer è¾“å…¥åºåˆ—å‰å¢åŠ äº†ä¸€ä¸ªé¢å¤–å¯å­¦ä¹ çš„ [class] æ ‡è®°ä½ï¼Œå¹¶ä¸”è¯¥ä½ç½®çš„ Transformer Encoder è¾“å‡ºä½œä¸ºå›¾åƒç‰¹å¾ã€‚</p><pre><code class="hljs ini"><span class="hljs-attr">self.cls_token</span> = nn.Parameter(torch.randn(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, dim))<span class="hljs-attr">cls_tokens</span> = repeat(self.cls_token, <span class="hljs-string">&#x27;() n d -&gt; b n d&#x27;</span>, b = b)<span class="hljs-attr">x</span> = torch.cat((cls_tokens, x), dim=<span class="hljs-number">1</span>) <span class="hljs-comment"># æ·»åŠ ä¸€ä¸ª </span></code></pre></li></ul></li><li><p><strong>transformerï¼š</strong></p><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">Transformer</span>(<span class="hljs-title">nn</span>.<span class="hljs-type">Module</span>):</span><span class="hljs-class">    # å †å å¤šå±‚çš„ <span class="hljs-type">Attention</span> æ¨¡å— å’Œ <span class="hljs-type">Feed</span> <span class="hljs-type">Fordward</span></span><span class="hljs-class">    def __init__(<span class="hljs-title">self</span>, <span class="hljs-title">dim</span>, <span class="hljs-title">depth</span>, <span class="hljs-title">heads</span>, <span class="hljs-title">mlp_dim</span>, <span class="hljs-title">dropout</span>):</span><span class="hljs-class">        super().__init__()</span><span class="hljs-class">        self.layers = nn.<span class="hljs-type">ModuleList</span>([])</span><span class="hljs-class">        for _ in range(<span class="hljs-title">depth</span>):</span><span class="hljs-class">            self.layers.append(<span class="hljs-title">nn</span>.<span class="hljs-type">ModuleList</span>([</span><span class="hljs-class">                <span class="hljs-type">Residual</span>(<span class="hljs-type">PreNorm</span>(<span class="hljs-title">dim</span>, <span class="hljs-type">Attention</span>(<span class="hljs-title">dim</span>, <span class="hljs-title">heads</span> = <span class="hljs-title">heads</span>, <span class="hljs-title">dropout</span> = <span class="hljs-title">dropout</span>))), </span><span class="hljs-class">                <span class="hljs-type">Residual</span>(<span class="hljs-type">PreNorm</span>(<span class="hljs-title">dim</span>, <span class="hljs-type">FeedForward</span>(<span class="hljs-title">dim</span>, <span class="hljs-title">mlp_dim</span>, <span class="hljs-title">dropout</span> = <span class="hljs-title">dropout</span>)))</span><span class="hljs-class">            ]))</span><span class="hljs-class">            </span><span class="hljs-class">    def forward(<span class="hljs-title">self</span>, <span class="hljs-title">x</span>, <span class="hljs-title">mask</span> = <span class="hljs-type">None</span>):</span><span class="hljs-class">        for attn, ff in self.layers:</span><span class="hljs-class">            x = attn(<span class="hljs-title">x</span>, <span class="hljs-title">mask</span> = <span class="hljs-title">mask</span>)</span><span class="hljs-class">            x = ff(<span class="hljs-title">x</span>)</span><span class="hljs-class">        return x</span></code></pre></li><li><p><strong>mlp_head:</strong>  ä½¿ç”¨ layernorm å’Œ å…¨è¿æ¥ å®ç°</p><pre><code class="hljs fortran">self<span class="hljs-number">.</span>mlp_head = nn<span class="hljs-number">.</span><span class="hljs-keyword">Sequential</span>(    nn<span class="hljs-number">.</span>LayerNorm(<span class="hljs-built_in">dim</span>),    nn<span class="hljs-number">.</span>Linear(<span class="hljs-built_in">dim</span>, num_classes))</code></pre></li></ol><h4 id="2-DETR-for-detection"><a href="#2-DETR-for-detection" class="headerlink" title="(2) DETR for detection"></a>(2) DETR for detection</h4><p>â€‹        DETR çš„ç½‘ç»œç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2020/12/15/transformer-for-vision-task/detr.png" style="zoom:38%;"></p><p>â€‹        é¦–å…ˆç”¨ CNN å°†è¾“å…¥å›¾åƒ embedding æˆä¸€ä¸ªäºŒç»´è¡¨å¾ã€‚ å¹¶å°†äºŒç»´è¡¨å¾è½¬æ¢ä¸ºä¸€ç»´è¡¨å¾å¹¶ç»“åˆ positional encoding ä¸€èµ·<strong>é€å…¥ transformer è¿›è¡Œ encoder-decoder</strong>ã€‚ç„¶åå°† decoder å¾—åˆ°çš„æ¯ä¸ª output embedding ä¼ é€’åˆ°ä¸€ä¸ªå…±äº«çš„å‰é¦ˆç½‘ç»œ(FFN)ã€‚æœ€åä½¿ç”¨ <strong>set loss function</strong> ä½œä¸ºç›‘ç£ä¿¡å·æ¥è¿›è¡Œ<strong>ç«¯åˆ°ç«¯è®­ç»ƒ</strong>ï¼Œç„¶ååŒæ—¶é¢„æµ‹æ‰€æœ‰ç›®æ ‡ã€‚ä¸‰ä¸ªåˆ›æ–°ç‚¹ï¼šï¼ˆ1ï¼‰ä½¿ç”¨ transformer ï¼ˆ2ï¼‰ ä½¿ç”¨ set loss å¹¶æŠ›å¼ƒäº† anchor çš„æ¦‚å¿µå’Œ nms  (3) end2endã€‚ è™½è¯´è®ºæ–‡å¯¹æ ‡çš„æ˜¯ faster rcnnã€‚ ä½†æ˜¯é‡‡ç”¨æ–°çš„æ–¹æ³•å»æ¢ç´¢ç›®æ ‡æ£€æµ‹ï¼Œ è¿˜æ˜¯å€¼å¾—è‚¯å®šçš„ã€‚</p><h5 id="1-backbone"><a href="#1-backbone" class="headerlink" title="1. backbone"></a>1. backbone</h5><p>â€‹        CNN backbone åªç”¨äºæå–ç‰¹å¾ã€‚CNN backbone å¤„ç† $X_{img} \in R^{N <em>3</em>H_0<em>W_0}$  ç»´çš„å›¾åƒï¼ŒæŠŠå®ƒè½¬æ¢ä¸º $ F \in R^{N </em> C <em> H </em> W}$ ç»´çš„feature mapï¼ˆä¸€èˆ¬æ¥è¯´ N = 2048 æˆ– N = 256ï¼Œ H =  H_0 / 32ï¼ŒW = W_0 / 32ï¼‰ã€‚ </p><p>â€‹        é€šé“æ•°å‹ç¼©ï¼š ç”¨ 1x1 å·ç§¯ï¼Œ å°† channels æ•°é‡ä» C å‹ç¼©ï¼Œ å¾—åˆ°ä¸€ä¸ª $z_0 \in R^{N <em> d </em> H <em> W}$ã€‚å¹¶å°†å…¶ reshape ä¸º $Nï¼Œ H</em>W, d$  ç»´åº¦çš„ feature mapã€‚</p><p>â€‹        ä½ç½®ç¼–ç ï¼š åœ¨å¾—åˆ° $z_0 \in R^{N <em> d </em> H * W}$  ä¹‹åï¼Œ éœ€è¦è¿›è¡Œä½ç½®ç¼–ç ã€‚ éœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼Œ åŸç‰ˆçš„ transformer åªè€ƒè™‘äº† $x$ æ–¹å‘çš„ä½ç½®ç¼–ç ï¼Œ ä½†æ˜¯ DETR è€ƒè™‘ $xy$ ä¸¤ä¸ªæ–¹å‘çš„ç¼–ç ã€‚å¦ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œ åŸç‰ˆçš„ transformer åªåœ¨ encoder è¾“å…¥å¤„è¿›è¡Œäº† ä½ç½®ç¼–ç ï¼Œ ä½†æ˜¯ DETR åœ¨ encoder çš„æ¯ä¸€ä¸ª Multi-head self-attention ä¹‹å‰éƒ½ä½¿ç”¨äº† positional encodingï¼Œ ä¸”åªå¯¹ query å’Œ key ä½¿ç”¨äº† positional encodingã€‚</p><h5 id="2-encoder-decoder"><a href="#2-encoder-decoder" class="headerlink" title="2. encoder-decoder"></a>2. encoder-decoder</h5><p>è¿™é‡Œç›´æ¥å¥—ç”¨äº† NLP ä¸Šçš„ transformerï¼Œæœ‰äº›è®¸ä¸åŒï¼š</p><ul><li><p>ä½ç½®å‘é‡ç¼–ç è¦åŠ å…¥åˆ° æ¯ä¸ª encoder layer ä¸­ã€‚</p></li><li><p>decoder çš„è¾“å…¥æ·»åŠ äº† object queriesã€‚Object queriesæ˜¯ä¸€ä¸ªç»´åº¦ä¸º (100, b, 256) ç»´çš„å¼ é‡ï¼Œæ•°å€¼ç±»å‹æ˜¯nn.Embeddingï¼Œè¯´æ˜è¿™ä¸ªå¼ é‡æ˜¯å¯ä»¥å­¦ä¹ çš„ï¼Œå³ï¼šæˆ‘ä»¬çš„Object queriesæ˜¯å¯å­¦ä¹ çš„ã€‚ Object queriesçŸ©é˜µå†…éƒ¨é€šè¿‡å­¦ä¹ å»ºæ¨¡äº† 100 ä¸ªç‰©ä½“ä¹‹é—´çš„å…¨å±€å…³ç³»ï¼Œä¾‹å¦‚æˆ¿é—´é‡Œé¢çš„æ¡Œå­æ—è¾¹( A ç±»)ä¸€èˆ¬æ˜¯æ”¾æ¤…å­( B ç±»)ï¼Œè€Œä¸ä¼šæ˜¯æ”¾ä¸€å¤´å¤§è±¡( C ç±»)ï¼Œé‚£ä¹ˆåœ¨æ¨ç†æ—¶å€™å°±å¯ä»¥åˆ©ç”¨è¯¥å…¨å±€æ³¨æ„åŠ›æ›´å¥½çš„è¿›è¡Œè§£ç é¢„æµ‹è¾“å‡ºã€‚</p></li></ul><h5 id="3-prediction-heads"><a href="#3-prediction-heads" class="headerlink" title="3.  prediction heads"></a>3.  prediction heads</h5><p>â€‹        prediction ç”± 3 å±‚ perceptron å’Œä¸€å±‚ linear projection ç»„æˆã€‚FFN é¢„æµ‹å‡º box çš„å½’ä¸€åŒ– xywh å’Œ classesã€‚DETR é¢„æµ‹çš„æ˜¯å›ºå®šæ•°é‡çš„ N ä¸ª box çš„é›†åˆï¼Œå¹¶ä¸” N é€šå¸¸æ¯”å®é™…ç›®æ ‡æ•°è¦å¤§çš„å¤šï¼Œæ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„ç©ºç±»æ¥è¡¨ç¤ºé¢„æµ‹å¾—åˆ°çš„ box ä¸å­˜åœ¨ç›®æ ‡ã€‚ æœ€ç»ˆ DETR è¾“å‡ºçš„å¼ é‡çš„ç»´åº¦ä¸º (b, 100, class + 1) å’Œ (b, 100, 4)ã€‚è¿™ä¸ª 100 æ˜¯ä¸ªé¢„å…ˆè®¾å®šçš„ï¼Œ è¿œå¤§äºå›¾ä¸­ç›®æ ‡æ€»æ•°çš„æ•°å­—ã€‚ é€šè¿‡è¿™ä¸¤ä¸ªå¼ é‡ï¼Œå°±å¯ä»¥è§£ç å‡ºå¯¹åº”çš„æ£€æµ‹æ¡†å’Œåˆ†ç±»ã€‚</p><h5 id="4-bipartite-loss"><a href="#4-bipartite-loss" class="headerlink" title="4. bipartite loss"></a>4. bipartite loss</h5><p>â€‹       ä½¿ç”¨åŒˆç‰™åˆ©ç®—æ³•æ¥å¯»æ‰¾ prediction box å’Œ image object åŒ¹é…çš„æ€» cost æœ€å°çš„äºŒåˆ†å›¾åŒ¹é…æ–¹æ¡ˆã€‚é¦–å…ˆå®šä¹‰æ¯å¯¹ prediction box å’Œ image object çš„ cost æŸå¤±ï¼š</p><p><img src="/2020/12/15/transformer-for-vision-task/6.png" style="zoom:38%;"></p><p>ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œ å¦‚æœå½“ image object ä¸ºç©º æ—¶ï¼Œ è¿™å¯¹ cost ä¸º é›¶ï¼Œ å½“ image object ä¸ä¸ºé›¶æ—¶ï¼Œ å½“(é¢„æµ‹ç›¸åŒçš„)ç±»åˆ«æ¦‚ç‡è¶Šå¤§ï¼Œbbox çš„å·®è·è¶Šå°æ—¶ï¼Œ é…å¯¹çš„ cost è¶Šå°ã€‚ è¿™é‡Œçš„ $L_{box}$ å®šä¹‰ä¸º:</p><p><img src="/2020/12/15/transformer-for-vision-task/8.png" style="zoom:38%;"></p><p>â€‹        æˆ‘ä»¬å°±å®Œå…¨å®šä¹‰å¥½äº†æ¯å¯¹ prediction box å’Œ image object é…å¯¹æ—¶çš„costã€‚å†åˆ©ç”¨åŒˆç‰™åˆ©ç®—æ³•å³å¯å¾—åˆ°äºŒåˆ†å›¾æœ€ä¼˜åŒ¹é…ã€‚ åŸºäºè¿™ä¸ªæœ€ä¼˜åŒ¹é…ï¼Œæ¥è®¡ç®— set prediction lossï¼Œå³è¯„ä»· transformer ç”Ÿæˆè¿™äº› prediction boxes çš„æ•ˆæœå¥½åã€‚Set prediction loss è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p><img src="/2020/12/15/transformer-for-vision-task/7.png" style="zoom:38%;"></p><h4 id="3-IPT"><a href="#3-IPT" class="headerlink" title="(3) IPT"></a>(3) IPT</h4><p>â€‹        ä¸åŒäºé«˜å±‚è§†è§‰è¯­ä¹‰ä»»åŠ¡çš„ç›®æ ‡æ˜¯è¿›è¡Œç‰¹å¾æŠ½å–ï¼Œåº•å±‚è§†è§‰ä»»åŠ¡çš„è¾“å…¥å’Œè¾“å‡ºå‡ä¸ºå›¾åƒã€‚é™¤è¶…åˆ†è¾¨ç‡ä»»åŠ¡ä¹‹å¤–ï¼Œå¤§å¤šæ•°åº•å±‚è§†è§‰ä»»åŠ¡çš„è¾“å…¥å’Œè¾“å‡ºç»´åº¦ç›¸åŒã€‚ç›¸æ¯”äºé«˜å±‚è§†è§‰ä»»åŠ¡ï¼Œè¾“å…¥å’Œè¾“å‡ºç»´åº¦åŒ¹é…è¿™ä¸€ç‰¹æ€§ä½¿åº•å±‚è§†è§‰ä»»åŠ¡æ›´é€‚åˆç”± Transformer å¤„ç†ã€‚ å…·ä½“è€Œè¨€ï¼Œç ”ç©¶è€…åœ¨ç‰¹å¾å›¾å¤„ç†é˜¶æ®µå¼•å…¥ Transformer æ¨¡å—ï¼Œè€Œå›¾åƒç»´åº¦åŒ¹é…åˆ™äº¤ç»™äº†å¤´ç»“æ„ä¸å°¾ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2020/12/15/transformer-for-vision-task/9.png" style="zoom:55%;"></p><p>(1) é¦–å…ˆå°†å›¾ç‰‡ç»è¿‡ä¸€ä¸ªå¤´ç»“æ„å˜æ¢ä¸ºç‰¹å¾å›¾ï¼š</p><script type="math/tex; mode=display">f_H = H^i(x), f_H \in \R^{C Ã— H Ã— W}</script><p>(2) å¯¹ç‰¹å¾å›¾è¿›è¡Œåˆ‡å—ä¸æ‹‰å¹³æ“ä½œã€‚é¦–å…ˆæŒ‰ç…§ PÃ—P çš„å¤§å°å°†ç‰¹å¾å›¾åˆ‡å‰²æˆ N å—ï¼Œæ¯ä¸€ä¸ªç‰¹å¾å—å†è¢«æ‹‰å¹³ä¸ºç»´åº¦ä¸º $P^2Ã—C$ çš„å‘é‡ï¼Œè¿™é‡Œçš„å¤„ç†ç±»ä¼¼äº ViT ä¸­çš„æ“ä½œã€‚</p><script type="math/tex; mode=display">f_{p_i} \in \R ^{P^2 Ã— C}, i = {1, ..., N}</script><p>è¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªç‰¹å¾å‘é‡å¯ä»¥ç­‰åŒäºä¸€ä¸ªã€Œå•è¯ã€ï¼Œå³å¯é€å…¥ Transformer è¿›è¡Œå¤„ç†ï¼Œå¾—åˆ°ç»´åº¦ç›¸åŒçš„è¾“å‡ºç‰¹å¾ï¼š</p><script type="math/tex; mode=display">f_{D_i} \in \R^{P^2 Ã— C}</script><p>(3) è¿™äº›è¾“å‡ºç‰¹å¾å†ç»è¿‡æ•´å½¢å’Œæ‹¼æ¥æ“ä½œï¼Œè¿˜åŸä¸ºä¸è¾“å…¥ç›¸åŒç»´åº¦çš„ç‰¹å¾å›¾ã€‚å¦‚æ­¤å¤„ç†å¾—åˆ°çš„ç‰¹å¾å›¾ä¼šè¢«é€å…¥ä¸€ä¸ªå°¾ç»“æ„ï¼Œè¢«è§£ç ä¸ºç›®æ ‡å›¾åƒã€‚</p><p>â€‹        å¤´ç»“æ„å’Œå°¾ç»“æ„è´Ÿè´£ç»´åº¦å˜æ¢ï¼Œtransformer æ¨¡å—å¯ä»¥ä¸“å¿ƒåœ°åšç‰¹å¾å¤„ç†ã€‚è¿™ä½¿å¾—å¤šä»»åŠ¡çš„æ‰©å±•å˜å¾—ç®€å•ï¼šå¯¹äºä¸åŒçš„ä»»åŠ¡ï¼Œåªéœ€è¦å¢åŠ æ–°çš„å¤´ç»“æ„ä¸å°¾ç»“æ„å³å¯ï¼Œå¤šç§ä»»åŠ¡ä¹‹é—´çš„ transformer æ¨¡å—æ˜¯å…±äº«çš„ã€‚ä¸ºäº†é€‚åº”å¤šä»»åŠ¡ï¼Œç ”ç©¶è€…åœ¨ Transformer çš„è§£ç æ¨¡å—ä¸­åŠ å…¥äº†ä¸€ä¸ªå¯å­¦ä¹ çš„ä»»åŠ¡ç¼–ç ã€‚<br>â€‹        transformer çš„æˆåŠŸç¦»ä¸å¼€å¤§é‡æ•°æ®é¢„è®­ç»ƒå¸¦æ¥çš„æ€§èƒ½æå‡ã€‚åœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œé’ˆå¯¹åº•å±‚è§†è§‰ä»»åŠ¡ï¼Œç ”ç©¶è€…ä½¿ç”¨ ImageNet æ•°æ®é›†ç”Ÿæˆå¤šç§é€€åŒ–å›¾åƒï¼Œæ„æˆå¤šç§åº•å±‚è§†è§‰ä»»åŠ¡è®­ç»ƒé›†ã€‚åˆ©ç”¨è¿™äº›äººå·¥åˆæˆçš„æ•°æ®ï¼Œé…ä»¥å¯¹åº”ä»»åŠ¡çš„å¤šå¤´å¤šå°¾ç»“æ„ï¼Œå¤šä¸ªä»»åŠ¡çš„è®­ç»ƒæ•°æ®åŒæ—¶è¿›è¡Œè®­ç»ƒã€‚è®­ç»ƒæ—¶çš„æŸå¤±å‡½æ•°åˆ™ä½¿ç”¨ L1 æŸå¤±ä½œä¸ºç›‘ç£æŸå¤±å‡½æ•°ï¼Œ ä½¿ç”¨ç‰¹å¾å—ä¹‹é—´çš„ç›¸å…³æ€§è‡ªç›‘ç£æŸå¤±å‡½æ•°</p><h3 id="3-efficient-transformer"><a href="#3-efficient-transformer" class="headerlink" title="3. efficient transformer"></a>3. efficient transformer</h3><p>é«˜æ•ˆçš„ transformer</p><p>ä¸€äº›æ€è€ƒå’Œå¾…è§£å†³çš„é—®é¢˜</p><h3 id="4-å‚è€ƒèµ„æ–™"><a href="#4-å‚è€ƒèµ„æ–™" class="headerlink" title="4. å‚è€ƒèµ„æ–™"></a>4. å‚è€ƒèµ„æ–™</h3><ul><li>ç»¼è¿° A Survey on Visual Transformer <a href="https://arxiv.org/abs/2012.12556">https://arxiv.org/abs/2012.12556</a></li><li>ç»¼è¿°  Transformers in Vision: A Survey  <a href="https://arxiv.org/pdf/2101.01169.pdf">https://arxiv.org/pdf/2101.01169.pdf</a></li><li>The Annotated Transformerï¼š<a href="http://nlp.seas.harvard.edu/2018/04/03/attention.html">http://nlp.seas.harvard.edu/2018/04/03/attention.html</a></li><li><a href="https://mp.weixin.qq.com/s/cY0IkHTpxS6x6cqsueXZIg">https://mp.weixin.qq.com/s/cY0IkHTpxS6x6cqsueXZIg</a></li><li>hongyi Lee transformer lecture <a href="https://www.bilibili.com/video/BV1CK4y1r7AA">https://www.bilibili.com/video/BV1CK4y1r7AA</a></li><li>Efficient Transformers: A Survey <a href="https://arxiv.org/pdf/2009.06732.pdf">https://arxiv.org/pdf/2009.06732.pdf</a></li><li><a href="https://zhuanlan.zhihu.com/p/266069794">https://zhuanlan.zhihu.com/p/266069794</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æµ…è°ˆDeepLearningè½åœ°ä¸å·¥ç¨‹éƒ¨ç½²</title>
    <link href="/2020/12/14/%E6%B5%85%E8%B0%88DeepLearning%E8%90%BD%E5%9C%B0%E4%B8%8E%E5%B7%A5%E7%A8%8B%E9%83%A8%E7%BD%B2/"/>
    <url>/2020/12/14/%E6%B5%85%E8%B0%88DeepLearning%E8%90%BD%E5%9C%B0%E4%B8%8E%E5%B7%A5%E7%A8%8B%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<p>æµ…è°ˆ Deep Learning è½åœ°ä¸å·¥ç¨‹éƒ¨ç½²é—®é¢˜</p><a id="more"></a><h4 id="ä¸€-æ¦‚è¿°"><a href="#ä¸€-æ¦‚è¿°" class="headerlink" title="ä¸€. æ¦‚è¿°"></a>ä¸€. æ¦‚è¿°</h4><ol><li>æ¨¡å‹çš„çš„å‹ç¼©åŠ é€Ÿï¼šè½»é‡çº§æ¶æ„è®¾è®¡ã€å‰ªæã€è’¸é¦ã€é‡åŒ–ã€ä½ç§©åˆ†è§£</li><li>æ¡†æ¶å±‚é¢<ul><li>åŸºç¡€ä¼˜åŒ–ï¼šç®—å­ä¼˜åŒ–(conv å®ç°)ã€ å›¾ä¼˜åŒ–(DAGã€op èåˆ)ã€ä¸åŒç²¾åº¦çš„è®­ç»ƒ/æ¨ç†</li><li>ä»£ç å±‚ï¼šå¾ªç¯å±•å¼€ã€æ±‡ç¼–ã€å¹¶è¡Œä¼˜åŒ–(SIMD)</li><li>ç³»ç»Ÿè°ƒåº¦ï¼šå†…å­˜ä¼˜åŒ–ã€Cache ä¼˜åŒ–ã€æµæ°´çº¿é‡æ’</li><li>è®¡ç®—å¼•æ“ï¼š neonã€cudaã€vulkanã€Metalã€OpenVINOã€HiAIã€OpenCL</li></ul></li><li>ç¼–è¯‘å™¨ï¼šTVM å’Œ MLIR</li><li>ç¡¬ä»¶ï¼š armã€gpuã€cpuã€x86ã€npu</li></ol><p>å‡ ä¸ªå€¼å¾—å…³æ³¨çš„ç‚¹ï¼š</p><ul><li>MLIR(MachineLearning Intermediate Represent) : å¯ä»¥å‚ç…§ï¼šMLIR(<a href="https://github.com/tensorflow/mlir)ã€TVMã€XLA">https://github.com/tensorflow/mlir)ã€TVMã€XLA</a></li><li>è½¯ç¡¬ä»¶ååŒè®¾è®¡</li><li>NLP é¢†åŸŸçš„æ¨¡å‹å‹ç¼©è¿›å±•</li></ul><h4 id="äºŒ-å¸¸ç”¨æ¨¡å‹å‹ç¼©ä¸åŠ é€Ÿæ–¹æ³•"><a href="#äºŒ-å¸¸ç”¨æ¨¡å‹å‹ç¼©ä¸åŠ é€Ÿæ–¹æ³•" class="headerlink" title="äºŒ. å¸¸ç”¨æ¨¡å‹å‹ç¼©ä¸åŠ é€Ÿæ–¹æ³•"></a>äºŒ. å¸¸ç”¨æ¨¡å‹å‹ç¼©ä¸åŠ é€Ÿæ–¹æ³•</h4><ol><li>è½»é‡çº§ç½‘ç»œè®¾è®¡ä¸æœç´¢:<ul><li>è®¾è®¡è½»é‡åŒ–çš„ç½‘ç»œæ¶æ„ï¼Œå¦‚ mobilenet ã€shufflenetã€ghostnet ç­‰</li><li>ä½¿ç”¨ NAS æœç´¢è¾ƒä¸ºé«˜æ•ˆçš„ç½‘ç»œç»“æ„</li><li>æ¨¡å‹è’¸é¦ï¼šä½¿ç”¨å¤æ‚æ¨¡å‹( teacher model) å»è®­ç»ƒå¦ä¸€ä¸ªè½»é‡åŒ–çš„ç½‘ç»œ(student model)</li></ul></li><li>ç½‘ç»œçš„å‹ç¼©æŠ€æœ¯ï¼ˆå‰ªæã€ç¨€ç–åŒ–ã€é‡åŒ–ï¼‰<ul><li>åœ¨è®­ç»ƒæ—¶ä½¿ç”¨ç¨€ç–çº¦æŸï¼ˆåŠ å…¥æƒé‡çš„ç¨€ç–æ­£åˆ™é¡¹ï¼Œå¼•å¯¼æ¨¡å‹çš„å¤§éƒ¨åˆ†æƒé‡è¶‹å‘äº0ï¼Œç„¶ååœ¨å®Œæˆè®­ç»ƒåï¼Œå‰ªå»æ»¤æ³¢å™¨ä¸Šçš„è¿™äº›æƒé‡è¾ƒä½çš„èŠ‚ç‚¹</li><li>é‡åŒ–ï¼šæ¨¡å‹é‡åŒ–æ˜¯æŒ‡æƒé‡æˆ–æ¿€æ´»è¾“å‡ºå¯ä»¥è¢«èšç±»åˆ°ä¸€äº›ç¦»æ•£ã€ä½ç²¾åº¦(reduced precision) çš„æ•°å€¼ç‚¹ä¸Šã€‚å¸¸è§çš„æœ‰äºŒå€¼ç½‘ç»œã€ä¸‰å€¼ç½‘ç»œã€int8 é‡åŒ–</li><li>ä½ç§©åˆ†è§£</li></ul></li></ol><p>ä¸Šè¿°çš„ 1 ä¼šæ”¹å˜ç½‘ç»œçš„è®¡ç®—å›¾ï¼Œ è€Œ 2 åˆ™ä¸ä¼šæ”¹å˜ç½‘ç»œçš„è®¡ç®—å›¾ï¼Œè€Œæ˜¯åœ¨åŸæœ‰è®¡ç®—å›¾çš„åŸºç¡€ä¸Šè¿›è¡Œç½‘ç»œæ¨¡å‹çš„å‹ç¼©å’ŒåŠ é€Ÿ</p><h4 id="ä¸‰-å¸¸è§çš„æ¨ç†æ¡†æ¶"><a href="#ä¸‰-å¸¸è§çš„æ¨ç†æ¡†æ¶" class="headerlink" title="ä¸‰. å¸¸è§çš„æ¨ç†æ¡†æ¶"></a>ä¸‰. å¸¸è§çš„æ¨ç†æ¡†æ¶</h4><p>â€‹        ä¸€èˆ¬ä¼šæä¾›æ¨¡å‹ä¼˜åŒ–å’Œæ¨æ–­å¼•æ“ä¸¤ä¸ªæ¨¡å—ã€‚æ¨¡å‹ä¼˜åŒ–æ¨¡å—ç”¨äºå°†ç»™å®šçš„æ¨¡å‹è½¬åŒ–ä¸ºæ ‡å‡†çš„ Intermediate Representation (IR) ï¼Œå¹¶å¯¹æ¨¡å‹ä¼˜åŒ–ã€‚æ¨æ–­å¼•æ“ (Inference Engine) åˆ™ä¼šæ ¹æ®ç‰¹å®šçš„ç¡¬ä»¶è¿›è¡Œç®—å­çš„ä¼˜åŒ–ï¼Œä»¥å®ç°é«˜æ•ˆçš„å‰å‘æ¨å¯¼ã€‚ </p><ul><li><p>å›½å¤–ï¼š</p><ul><li>googleï¼štf-lite    <a href="https://www.tensorflow.org/lite/performance/post_training_quantization">https://www.tensorflow.org/lite/performance/post_training_quantization</a></li><li>facebookï¼šcaffe2  + qnnpack: <a href="https://github.com/pytorch/QNNPACK">https://github.com/pytorch/QNNPACK</a></li><li>intelï¼š <strong>open-vino(for intel CPU)</strong>  <a href="https://software.intel.com/en-us/openvino-toolkit">https://software.intel.com/en-us/openvino-toolkit</a></li><li>appleï¼š core ml</li><li>nvidiaï¼š <strong>TensorRT(for nvidia GPU)</strong></li></ul></li><li><p>å›½å†…ï¼š</p><ul><li>è…¾è®¯ï¼š<strong>ncnn -&gt; TNN(for arm chip)</strong>  <a href="https://github.com/Tencent/ncnn">https://github.com/Tencent/ncnn</a></li><li>é˜¿é‡Œï¼š mnn  <a href="https://github.com/alibaba/MNN">https://github.com/alibaba/MNN</a></li><li>ç™¾åº¦ï¼š paddlelite  <a href="https://github.com/PaddlePaddle/Paddle-Lite">https://github.com/PaddlePaddle/Paddle-Lite</a></li><li>å°ç±³ï¼šmace  <a href="https://github.com/XiaoMi/mace">https://github.com/XiaoMi/mace</a></li></ul></li><li><p>å…¶ä»–</p><ul><li>TVM: <a href="https://github.com/dmlc/tvm">https://github.com/dmlc/tvm</a></li><li>TC: TensorComprehensions</li><li>onnx: <a href="https://github.com/onnx/onnx">https://github.com/onnx/onnx</a></li></ul></li></ul><h4 id="å››ã€ç¡¬ä»¶å‘å±•"><a href="#å››ã€ç¡¬ä»¶å‘å±•" class="headerlink" title="å››ã€ç¡¬ä»¶å‘å±•"></a>å››ã€ç¡¬ä»¶å‘å±•</h4><p>å„ç±»ç¡¬ä»¶çš„å‘å±•éƒ½ç¦»ä¸å¼€èŠ¯ç‰‡åˆ¶ç¨‹ã€æ ¸å¿ƒæ•°é‡ã€æŒ‡ä»¤æ¶æ„ä¼˜åŒ–ä¸‰ä¸ªä¸»è¦æ–¹å‘</p><ol><li><p>æœåŠ¡å™¨ç«¯ç¡¬ä»¶åˆ†ç±»</p><p>x86_64 CPUã€<strong>NVIDIA GPU</strong>ã€æœåŠ¡å™¨ NPU</p></li><li><p>ç§»åŠ¨ç«¯ç¡¬ä»¶åˆ†ç±»</p></li></ol><p>â€‹        <strong>ARM CPU</strong>ã€ARM GPUï¼ˆAdrenoã€maliç³»åˆ—ï¼‰ã€ç§»åŠ¨ç«¯NPUã€NVIDIA Jestonç³»åˆ—ã€<strong>Apple å®¶çš„èŠ¯ç‰‡ï¼ˆè‡ªå®¶GPUã€NPUï¼‰</strong> </p><ol><li>å…¶ä»–</li></ol><p>â€‹         DSPã€<strong>FPGA</strong>ã€å¤–æ¥å¼åŠ é€Ÿè®¾å¤‡ï¼Œå„ç§äº‘å¹³å°å½¢å¼çš„éƒ¨ç½²</p><h4 id="äº”-ä¸€äº›åŸºæœ¬çš„é—®é¢˜"><a href="#äº”-ä¸€äº›åŸºæœ¬çš„é—®é¢˜" class="headerlink" title="äº”. ä¸€äº›åŸºæœ¬çš„é—®é¢˜"></a>äº”. ä¸€äº›åŸºæœ¬çš„é—®é¢˜</h4><h5 id="1-å·¥ç¨‹ä¸Šå¯¹å·ç§¯æ“ä½œå¦‚ä½•è¿›è¡Œä¼˜åŒ–çš„ï¼Ÿ"><a href="#1-å·¥ç¨‹ä¸Šå¯¹å·ç§¯æ“ä½œå¦‚ä½•è¿›è¡Œä¼˜åŒ–çš„ï¼Ÿ" class="headerlink" title="1. å·¥ç¨‹ä¸Šå¯¹å·ç§¯æ“ä½œå¦‚ä½•è¿›è¡Œä¼˜åŒ–çš„ï¼Ÿ"></a>1. å·¥ç¨‹ä¸Šå¯¹å·ç§¯æ“ä½œå¦‚ä½•è¿›è¡Œä¼˜åŒ–çš„ï¼Ÿ</h5><p>ç›®å‰ï¼Œå·ç§¯çš„è®¡ç®—å¤§å¤šé‡‡ç”¨é—´æ¥è®¡ç®—çš„æ–¹å¼ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å®ç°æ–¹å¼ï¼Œ å…¶ä¸­å‰ä¸‰ç§æ˜¯ä¸»æµæ–¹æ¡ˆ</p><ul><li>æ»‘çª—æœºåˆ¶ã€‚è¿™ç§æ–¹æ³•æ˜¯æœ€ç›´è§‚æœ€ç®€å•çš„æ–¹æ³•ã€‚ ä½†æ˜¯ï¼Œè¯¥æ–¹æ³•ä¸å®¹æ˜“å®ç°å¤§è§„æ¨¡åŠ é€Ÿï¼Œå› æ­¤ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼ˆä½†æ˜¯ä¹Ÿä¸æ˜¯ç»å¯¹ä¸ä¼šç”¨ï¼Œåœ¨ä¸€äº›ç‰¹å®šçš„æ¡ä»¶ä¸‹è¯¥æ–¹æ³•åè€Œæ˜¯æœ€é«˜æ•ˆçš„ï¼‰</li><li>im2col + GEMMã€‚ caffe/MXNetç­‰å¾ˆå¤šæ¡†æ¶ä¸­éƒ½ä½¿ç”¨äº†è¿™ç§è®¡ç®—æ–¹å¼ï¼ŒåŸå› æ˜¯å°†é—®é¢˜è½¬åŒ–ä¸ºçŸ©é˜µä¹˜æ³•åå¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨å¾ˆå¤šçŸ©é˜µè¿ç®—åº“(å¦‚MKLã€openblasã€Eigenç­‰)</li><li>Winogradï¼šå¿«é€Ÿå·ç§¯ç®—æ³•ï¼Œé’ˆå¯¹ä¸åŒå¤§å°çš„å·ç§¯æ ¸è¿›è¡Œä¼˜åŒ–ï¼Œå‡å°‘è®¡ç®—ä¸­çš„ä¹˜æ³•è¿ç®—æ¬¡æ•°ï¼Œæå‡è¿è¡Œé€Ÿåº¦ã€‚-&gt; å¤§éƒ¨åˆ†çš„å‰å‘æ¨å¯¼æ¡†æ¶éƒ½å®ç°äº† winogradç®—æ³•</li><li>FFTå˜æ¢ã€‚ æ—¶åŸŸå·ç§¯ç­‰äºé¢‘åŸŸç›¸ä¹˜ï¼Œå› æ­¤å¯å°†é—®é¢˜è½¬åŒ–ä¸ºç®€å•çš„ä¹˜æ³•é—®é¢˜ã€‚å‚…é‡Œå¶å˜æ¢å’Œå¿«é€Ÿå‚…é‡Œå¶å˜åŒ–æ˜¯åœ¨ç»å…¸å›¾åƒå¤„ç†é‡Œé¢ç»å¸¸ä½¿ç”¨çš„è®¡ç®—æ–¹æ³•ï¼Œä½†æ˜¯ï¼Œåœ¨ ConvNet ä¸­é€šå¸¸ä¸é‡‡ç”¨ï¼Œä¸»è¦æ˜¯å› ä¸ºåœ¨ ConvNet ä¸­çš„å·ç§¯æ¨¡æ¿é€šå¸¸éƒ½æ¯”è¾ƒå°ï¼Œä¾‹å¦‚ 3Ã—3 ç­‰ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒFFT çš„æ—¶é—´å¼€é”€åè€Œæ›´å¤§ï¼Œæ‰€ä»¥å¾ˆå°‘åœ¨CNNä¸­åˆ©ç”¨FFTå®ç°å·ç§¯</li></ul><h5 id="2-ä¸ºä»€ä¹ˆ-mobilenet-ç†è®ºä¸Šé€Ÿåº¦å¾ˆå¿«ï¼Œå·¥ç¨‹ä¸Šå¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„æå‡ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆ-mobilenet-ç†è®ºä¸Šé€Ÿåº¦å¾ˆå¿«ï¼Œå·¥ç¨‹ä¸Šå¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„æå‡ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆ mobilenet ç†è®ºä¸Šé€Ÿåº¦å¾ˆå¿«ï¼Œå·¥ç¨‹ä¸Šå¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„æå‡ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆ mobilenet ç†è®ºä¸Šé€Ÿåº¦å¾ˆå¿«ï¼Œå·¥ç¨‹ä¸Šå¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„æå‡ï¼Ÿ</h5><p>(1) ç¡¬ä»¶ç›¸å…³ï¼šGPU åé‡äºå¹¶è¡Œã€CPU ä¾§é‡äºä¾§é‡äºä¸²è¡Œã€‚å¾ˆå¤šç»†ç²’åº¦çš„æ“ä½œæ²¡æ³•å¾ˆå¥½çš„å¹¶è¡Œã€‚</p><p>(2) å’Œå¯¹åº”çš„ DL æ¡†æ¶å®ç°ç»†èŠ‚æœ‰å…³ï¼šæ²¡æœ‰å¯¹ dw å’Œ pw ç®—å­è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚è®¿å­˜æ¬¡æ•°ã€cache miss è¾ƒå¤šç­‰ã€‚</p><p>(3) å‚æ•°é‡å’Œè®¡ç®—é‡ï¼šè®¾è®¡è¡¡é‡çš„æŒ‡æ ‡æ˜¯ FLOPSã€è€Œä¸æ˜¯æ—¶é—´ã€‚å¾ˆå¤š element-wise æ“ä½œä»¥åŠç»†ç²’åº¦æ“ä½œä¼šå¢åŠ æ¨å¯¼æ—¶é—´</p><h5 id="3-æ¨¡å‹å‹ç¼©æ–¹å‘-NAS-ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰"><a href="#3-æ¨¡å‹å‹ç¼©æ–¹å‘-NAS-ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰" class="headerlink" title="3. æ¨¡å‹å‹ç¼©æ–¹å‘ NAS ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰"></a>3. æ¨¡å‹å‹ç¼©æ–¹å‘ NAS ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰</h5><ul><li>DARTSï¼šDifferentiable Architecture   Search  å¯å¾®åˆ†ç¥ç»ç½‘ç»œæ¶æ„æœç´¢</li><li>Designing Network Design Spaces</li><li><p>NAS-Bench-101: Towards Reproducible Neural Architecture Search</p></li><li><p>AMCï¼šAMC: AutoML for Model Compression and Acceleration on Mobile Devices</p></li><li>AutoSlim: Towards One-shot Architecture Search for Channel Numbers</li></ul><h5 id="4-è½¯ç¡¬ä»¶è”åˆè®¾è®¡ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰"><a href="#4-è½¯ç¡¬ä»¶è”åˆè®¾è®¡ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰" class="headerlink" title="4. è½¯ç¡¬ä»¶è”åˆè®¾è®¡ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰"></a>4. è½¯ç¡¬ä»¶è”åˆè®¾è®¡ç ”ç©¶è¿›å±•è¿½è¸ªï¼ˆè¯¥æ–¹å‘è‡ªå·±æš‚æ—¶æ²¡æœ‰å½¢æˆç³»ç»Ÿç†è®ºï¼Œä¸ç‹¬ç«‹æˆæ–‡ï¼‰</h5><ul><li>Algorithm-Hardware Co-Design of Adaptive Floating-Point</li><li>SmartExchange: Trading Higher-cost Memory Storage/Access for Lower-cost Computation</li><li>Drynamic region-based quantization for deep neural network acceleration</li><li><p>MCUNet: Tiny Deep Learning on IoT Devices</p></li><li><p>Once-for-all: train one network and specialize it for efficient deployment</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>efficient-conv</title>
    <link href="/2020/12/13/efficient-conv/"/>
    <url>/2020/12/13/efficient-conv/</url>
    
    <content type="html"><![CDATA[<p>é˜è¿°ä¸€äº›åº•å±‚çš„å·ç§¯å®ç°æ–¹å¼ï¼šåŒ…å«ï¼šæ»‘åŠ¨çª—å£ã€im2col + gemmã€winograd ç­‰</p><a id="more"></a><p>å·ç§¯çš„å…·ä½“å®ç°æœ‰å¦‚ä¸‹å‡ ç§æ–¹æ³•ï¼š</p><ul><li>ç›´æ¥å·ç§¯ directï¼šæŒ‰ç…§å®šä¹‰ç›´æ¥è®¡ç®—ï¼Œ ä¸€èˆ¬æ¥è¯´ï¼Œè®¿å­˜å¾ˆå·®ã€‚åœ¨ç‰¹å®šæƒ…å†µä¸‹å¯èƒ½æ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚</li><li>im2col+gemmï¼šå…ˆå°†ç‰¹å¾å›¾æ¢æˆçŸ©é˜µï¼Œç„¶åç”¨kernelçŸ©é˜µä¹˜ä»¥ç‰¹å¾å›¾è½¬æ¢çš„çŸ©é˜µï¼Œå¾—åˆ°è¾“å‡ºï¼Œè®¿å­˜æ€§èƒ½èƒ½å¥½ä¸€äº›</li><li>winogradï¼šç”¨åŠ æ³•æ¢ä¹˜æ³•ï¼Œé€šè¿‡å‡å°‘ä¹˜æ³•æ¬¡æ•°æ¥æé«˜å·ç§¯æ‰§è¡Œé€Ÿåº¦ã€‚</li></ul><p>æ­¤å¤–è¿˜æœ‰ Strassen(å‡å°‘å·ç§¯æ“ä½œæ•°) å’Œ FFT(é€šè¿‡ FFT æ¥å‡å°‘ conv çš„è®¡ç®—é‡ã€åœ¨å¤§å·ç§¯æ ¸ä¸‹æ”¶ç›Šæ˜æ˜¾) ã€MEC ç­‰æ–¹æ³•ã€‚ä½†æ˜¯è¿™å‡ ç§æ–¹æ¡ˆå¹¶éä¸»æµã€‚ä¸‹é¢æˆ‘ä»¬ä¸»è¦è¯¦ç»†æ¥é˜è¿°ä¸»æµçš„ä¸‰ç§æ–¹æ¡ˆã€‚</p><p>æœ¬æ–‡ä¸»è¦ä»å·¥ç¨‹çš„è§’åº¦æ¥é˜è¿°è¿™ä¸‰ç§ä¸»æµæ–¹æ¡ˆï¼Œå¯¹äºå…·ä½“çš„ç†è®ºæ¨å¯¼å’Œç»†èŠ‚åŸç†ï¼Œåˆ™ä¸æ¶‰åŠã€‚</p><h3 id="ä¸€-direct"><a href="#ä¸€-direct" class="headerlink" title="ä¸€. direct"></a>ä¸€. direct</h3><p>ç›´æ¥æŒ‰ç…§å®šä¹‰è¿›è¡Œè®¡ç®—ã€‚éœ€è¦è¿›è¡Œå¤šé‡ for å¾ªç¯çš„å±•å¼€ã€‚</p><h3 id="äºŒ-im2col-gemm"><a href="#äºŒ-im2col-gemm" class="headerlink" title="äºŒ. im2col  + gemm"></a>äºŒ. im2col  + gemm</h3><p>Im2col(Image to Column)æŠŠè¾“å…¥ feature map æŒ‰ç…§å·ç§¯æ ¸çš„å½¢å¼ä¸€ä¸€å±•å¼€å¹¶æ‹¼æ¥æˆåˆ—ï¼Œæ¥ç€é€šè¿‡é«˜æ€§èƒ½ MatMulï¼ˆMatrix Multiplicationï¼‰ Kernel è¿›è¡ŒçŸ©é˜µä¹˜ï¼Œå¾—åˆ°è¾“å‡º feature mapã€‚å®ƒçš„æœ¬è´¨æ˜¯æŠŠå·ç§¯è¿ç®—è½¬æ¢æˆçŸ©é˜µè¿ç®—ã€‚</p><p><img src="/2020/12/13/efficient-conv/8.jpeg" alt></p><p>Pack ä¼˜åŒ–: </p><p>â€‹        ç†è®ºä¸Šæ¥è¯´ï¼Œ è·å¾—äº†è¾“å…¥ç‰¹å¾å›¾å’Œå·ç§¯æ ¸çš„ im2col å˜æ¢çŸ©é˜µä¹‹åå…¶å®å°±å¯ä»¥åˆ©ç”¨ Sgemm è®¡ç®—å‡ºå·ç§¯çš„ç»“æœäº†ã€‚</p><p>â€‹        ä½†æ˜¯å¦‚æœç›´æ¥ä½¿ç”¨çŸ©é˜µä¹˜æ³•è®¡ç®—ï¼Œåœ¨å·ç§¯æ ¸å°ºå¯¸æ¯”è¾ƒå¤§å¹¶ä¸”è¾“å‡ºç‰¹å¾å›¾é€šé“æ•°ä¹Ÿæ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿™ä¸ªæ—¶å€™ im2col è·å¾—çŸ©é˜µæ˜¯ä¸€ä¸ªè¡Œéå¸¸å¤šåˆ—éå¸¸å°‘çš„çŸ©é˜µï¼Œåœ¨åšçŸ©é˜µä¹˜æ³•çš„æ—¶å€™è®¿å­˜ä¼šå˜å¾—æ¯”è¾ƒå·®ï¼Œä»è€Œé™ä½è®¡ç®—æ•ˆç‡ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¼˜åŒ–æŠ€å·§ï¼Œå°±æ˜¯æ•°æ®æ‰“åŒ…(Pack)ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºå·ç§¯æ ¸æˆ‘ä»¬è¿›è¡Œçš„Packï¼ˆæ‰€è°“ 4 çš„Packå°±æ˜¯åœ¨ im2Colè·å¾—çš„äºŒç»´çŸ©é˜µçš„é«˜ç»´åº¦è¿›è¡Œå‹ç¼©ï¼Œåœ¨å®½ç»´åº¦è¿›è¡Œè†¨èƒ€ï¼Œæ¯å››è¡Œè¿›è¡Œäº¤å‰æ‹¼æ¥ï¼‰ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ è¿™æ˜¯ä¸€ä¸ªçš„å·ç§¯æ ¸å¹¶ä¸”è¾“å‡ºé€šé“æ•°ä¸ºï¼Œå®ƒç»è¿‡Im2Colä¹‹åé¦–å…ˆå˜æˆä¸Šå›¾çš„ä¸ŠåŠéƒ¨åˆ†ï¼Œç„¶åç»è¿‡Pack ä¹‹åå˜æˆäº†ä¸Šå›¾çš„ä¸‹åŠéƒ¨åˆ†ï¼Œå³å˜æˆäº†æ¯ä¸ªå·ç§¯æ ¸çš„å…ƒç´ æŒ‰åˆ—æ–¹å‘äº¤ç»‡æ’åˆ—ã€‚</p><p><img src="/2020/12/13/efficient-conv/7.jpeg" style="zoom:35%;"></p><p>è¿˜æœ‰ä¸€ä¸ªæŠ€å·§æ˜¯ï¼Œæ¯æ¬¡åœ¨æ‰§è¡Œå·ç§¯è®¡ç®—æ—¶ï¼Œå¯¹äº Image çš„ Im2col å’Œ Pack æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œï¼Œä½†å¯¹äºå·ç§¯æ ¸ï¼ŒIm2col å’Œ Pack åœ¨ä»»æ„æ¬¡åªç”¨åšä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ¨¡å‹åˆå§‹åŒ–çš„æ—¶å€™æå‰æŠŠå·ç§¯æ ¸ç»™ Pack å¥½ï¼Œè¿™æ ·å°±å¯ä»¥èŠ‚çœå·ç§¯æ ¸ im2col å’Œ pack è€—è´¹çš„æ—¶é—´ã€‚</p><p>ä»£ç å®ç°å¯ä»¥å‚è€ƒï¼š <a href="https://github.com/msnh2012/Msnhnet/blob/master/src/layers/arm/MsnhConvolutionSgemm.cpp">https://github.com/msnh2012/Msnhnet/blob/master/src/layers/arm/MsnhConvolutionSgemm.cpp</a></p><h3 id="ä¸‰-Winograd"><a href="#ä¸‰-Winograd" class="headerlink" title="ä¸‰. Winograd"></a>ä¸‰. Winograd</h3><p>è®ºæ–‡å‚è§ï¼š <a href="https://arxiv.org/abs/1509.09308v2">https://arxiv.org/abs/1509.09308v2</a></p><p>â€‹        å¯ä»¥çœ‹åˆ° img2col æé«˜äº†è®¿å­˜é€Ÿåº¦ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰é™ä½è¿ç®—çš„æ—¶é—´å¤æ‚åº¦ã€‚äºæ˜¯åœ¨å·ç§¯çš„å®è·µä¸­è¯ç”Ÿäº† Winograd ç®—æ³•ã€‚Winograd çš„ æœ¬è´¨æ˜¯é€šè¿‡é™ä½ä¹˜æ³•çš„æ¬¡æ•°æ¥æé«˜å·ç§¯è¿ç®—é€Ÿåº¦ã€‚ Winograd ç®—æ³•ä¸»è¦åº”ç”¨äºå·ç§¯æ ¸ä¸º 3x3ï¼Œæ­¥å¹…ä¸º 1 çš„ 2D å·ç§¯ç¥ç»ç½‘ç»œï¼Œå…¶å‚æ•°è¡¨ç¤ºä¸º F(mxm, rxr)ï¼Œå…¶ä¸­ mxm æ˜¯è¿ç®—ä¹‹åè¾“å‡ºå—çš„å¤§å°ï¼Œrxr æ˜¯å·ç§¯æ ¸çš„å¤§å°ï¼Œä»¥ F(2x2, 3x3) å’Œ F(6x6, 3x3) ä½¿ç”¨æœ€å¤šï¼Œå‰è€…åŠ é€Ÿæ¯”å¯è¾¾ 2.25xï¼Œåè€…åŠ é€Ÿæ¯”åˆ™é«˜è¾¾ 5.06xã€‚</p><p><img src="/2020/12/13/efficient-conv/5.jpeg" style="zoom:75%;"></p><p>â€‹        é¦–å…ˆä»¥ä¸€ç»´å·ç§¯ $F(2,3)$ ä¸ºä¾‹ã€‚è®¾è¾“å…¥ä¿¡å·ä¸º  </p><script type="math/tex; mode=display">d=[d0, d1, d2, d3]^T</script><p>å·ç§¯æ ¸ä¸ºï¼š</p><script type="math/tex; mode=display">g=[g0, g1, g2]^T</script><p>æ»‘åŠ¨æ­¥é•¿ä¸º 1ï¼Œä¸åš padding æ“ä½œï¼Œåˆ™è¾“å‡ºç»“æœå¯ä»¥å†™æˆ</p><script type="math/tex; mode=display">F(2,3)=\left[\begin{array}{ccc}d_0 &d_1  &d_2 \\d_1 &d_2  &d_3\end{array}\right]\left[\begin{array}{ccc}g_0  \\g_1\\g_2\end{array}\right]=\left[\begin{array}{c}r_0\\r_1\end{array}\right]</script><p>å…¶ä¸­</p><script type="math/tex; mode=display">r_0=d_0*g_0+d_1*g_1+d_2*g_2 \\r_1=d_1*g_0+d_2*g_1+d_3*g_2</script><p>å¯ä»¥çœ‹åˆ°å¦‚æœç”¨ä¸€èˆ¬çš„çŸ©é˜µä¹˜æ³•ï¼Œåˆ™éœ€è¦ 6 æ¬¡ä¹˜æ³•å’Œ 4 æ¬¡åŠ æ³•ã€‚</p><p>winograd åšæ³•å¦‚ä¸‹</p><script type="math/tex; mode=display">F(2,3)=\left[\begin{array}{ccc}d_0 &d_1  &d_2 \\d_1 &d_2  &d_3\end{array}\right]\left[\begin{array}{ccc}g_0  \\g_1\\g_2\end{array}\right]=\left[\begin{array}{c}m_1+m_2+m_3\\m_2-m_3-m_4\end{array}\right]</script><p>å…¶ä¸­</p><script type="math/tex; mode=display">m_1=(d_0-d_2)g_0, \quad m_2=(d_1+d_2)\frac{g_0+g_1+g_2}{2}\\m_4=(d_1-d_3)g_2, \quad m_3=(d_2-d_1)\frac{g_0-g_1+g_2}{2}\\</script><p>å¯ä»¥çœ‹åˆ°åˆ©ç”¨ winograd ç®—æ³•éœ€è¦ 4 æ¬¡ä¹˜æ³•ï¼Œ8æ¬¡åŠ æ³•ï¼Œç›¸æ¯”ä¸€èˆ¬çŸ©é˜µä¹˜æ³•ï¼Œé€šè¿‡å¢åŠ åŠ æ³•è¿ç®—å‡å°‘ä¹˜æ³•çš„è¿ç®—ï¼Œå¯ä»¥å®ç°åŠ é€Ÿã€‚</p><p>ç”±äº winograd ç®—æ³•è¯æ˜æ¯”è¾ƒå¤æ‚æš‚æ—¶ä¸å†™äº†ï¼Œç›´æ¥ä¸¢è®¡ç®—å…¬å¼ï¼Œä¸€ç»´å·ç§¯è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">Y=A^T\left[[Gg]\bigodot[B^Td]\right]</script><p>å…¶ä¸­ â¨€ è¡¨ç¤º element-wiseï¼ŒA,G,B éƒ½æ˜¯æ ¹æ®è¾“å‡ºå¤§å°å’Œå·ç§¯æ ¸æå‰ç¡®å®šå¥½çš„(æœ‰äººå·²ç»å†™å¥½äº†,å¯å‚è€ƒ <a href="https://github.com/andravin/wincnn">wincnn</a>)ï¼Œ g è¡¨ç¤ºå·ç§¯æ ¸ï¼Œd è¡¨ç¤ºè¾“å…¥æ•°æ®(ä¹Ÿå°±æ˜¯éœ€è¦è¿›è¡Œå·ç§¯è®¡ç®—çš„æ•°æ®)ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒå¯ä»¥å°† $m * r$ æ¬¡ä¹˜æ³• é™ä½ä¸º $m + r - 1$ æ¬¡ä¹˜æ³•ã€‚</p><p>å¯¹åº”äºŒç»´å·ç§¯è®¡ç®—å…¬å¼å¦‚ä¸‹:</p><script type="math/tex; mode=display">Y=A^T\left[[GgG^T]\bigodot[B^TdB]\right]A</script><p>åŸºäºä¸Šé¢ä»‹ç»çš„äºŒç»´çš„ Winogradçš„åŸç†ï¼Œæˆ‘ä»¬ç°åœ¨åªéœ€è¦åˆ† 4 æ­¥å³å¯å®ç° winograd ç®—æ³•ï¼š</p><ol><li>æ ¹æ®å·ç§¯æ ¸çš„å¤§å°ï¼Œç¡®å®šå˜æ¢çŸ©é˜µ Gï¼Œ å¯¹è¾“å…¥å·ç§¯æ ¸çš„å˜æ¢   $U = GgG^T$</li><li>æ ¹æ®è¾“å…¥æ•°æ®çš„å¤§å°ï¼Œ ç¡®å®šå˜æ¢çŸ©é˜µ Bï¼Œå¹¶å¯¹è¾“å…¥æ•°æ®çš„å˜æ¢  $V = B^T d B$ </li><li>è®¡ç®— M çŸ©é˜µï¼š  $M = \sum U \bigodot V$</li><li>è®¡ç®—æœ€ç»ˆç»“æœ: $Y = A^T M A$</li></ol><p>éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>å½“è¾“å…¥è¾ƒå¤§çš„æ—¶å€™ï¼Œ éœ€è¦æŠŠè¾“å…¥æ‹†æˆå¤šä¸ª 4x4 çš„ blockï¼Œstride 2 å³å¯ã€‚</li><li>å½“å¯¹å·ç§¯æ ¸å’Œè¾“å…¥æ•°æ®è¿›è¡Œè½¬æ¢åï¼Œ éœ€è¦å¯¹å…¶è¿›è¡Œå†…å­˜é‡æ‹ï¼Œ æ–¹ä¾¿å»åˆ©ç”¨ gemm ã€‚</li></ol><p>å…·ä½“çš„ä»£ç å®ç°å¯ä»¥å‚ç…§ï¼š <a href="https://github.com/Tencent/ncnn/blob/master/src/layer/arm/convolution_3x3.h">https://github.com/Tencent/ncnn/blob/master/src/layer/arm/convolution_3x3.h</a>  line 1702 - line 1864 </p><h3 id="å››-å…¶ä»–"><a href="#å››-å…¶ä»–" class="headerlink" title="å››. å…¶ä»–"></a>å››. å…¶ä»–</h3><ul><li><p>ä¸åŒçš„å·ç§¯çš„å¿«æ…¢å¹¶éä¸€æˆä¸å˜ï¼Œ ç‰¹å®šçš„æƒ…å†µä¸‹å¯èƒ½é€šå¸¸è¾ƒå¿«çš„æ–¹æ³•åè€Œè¿è¡Œè¾ƒå¿«ã€‚æ—·è§†çš„ megengine æå‡ºäº† Fast-Run æ¥å¯»æ‰¾æœ€ä¼˜ç®—å­ï¼Œå…¶å·¥ç¨‹å®ç°åˆ†ä¸ºé€‰æ‹©å’Œæ‰§è¡Œä¸¤ä¸ªé˜¶æ®µï¼š</p><ul><li>é€‰æ‹©é˜¶æ®µï¼Œæµ‹é€Ÿæ¨¡å‹æ¯ä¸ªç®—å­ï¼Œé€‰å‡ºæœ€ä¼˜å®ç°ï¼Œä¿å­˜ç®—å­åç§°å’Œæœ€ä¼˜å®ç°çš„æ˜ å°„è¡¨ï¼›</li><li>æ‰§è¡Œé˜¶æ®µï¼Œæ ¹æ®æ˜ å°„è¡¨ç›´æ¥è°ƒç”¨ç›¸åº”å®ç°å®Œæˆè®¡ç®—ã€‚</li></ul></li><li><p>æ•°æ®æ’å¸ƒå’Œ cache å‘½ä¸­æ˜¯æå…¶é‡è¦çš„ã€‚</p></li><li>æ•°æ®æ’å¸ƒ(Tensor Layout) ï¼šæ•°æ®æ’å¸ƒæ˜¯æ¨ç†ä¾§å·ç§¯è®¡ç®—ä¼˜åŒ–æ–¹é¢é¦–å…ˆé¢ä¸´çš„é—®é¢˜ã€‚é€‰æ‹©åˆé€‚çš„æ•°æ®æ’å¸ƒä¸ä»…ä¼šä½¿å·ç§¯ä¼˜åŒ–äº‹åŠåŠŸå€ï¼Œè¿˜å¯ä½œä¸ºå…¶ä»–ä¼˜åŒ–æ–¹æ³•çš„åŸºç¡€ï¼Œ ç›®å‰ï¼Œæ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­å¸¸è§çš„æ•°æ®æ’å¸ƒæ ¼å¼æœ‰3ç§ï¼š<ul><li>NHWCï¼š[Batch, Height, Width, Channels]</li><li>NCHWï¼š[Batch, Channels, Height, Width]</li><li>NCHWXï¼š[Batch, Channels/X, Height, Width, X=4/8]</li></ul></li></ul><p>â€‹    æ•°æ®çš„æ’å¸ƒå¯¹å·ç§¯è®¡ç®—æœ‰ç€æ•´ä½“æ€§çš„ç›´æ¥å½±å“ã€‚NHWC å’Œ NCHW çš„ç©ºé—´å¤æ‚åº¦ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºè®¿å­˜è¡Œä¸ºï¼ŒNCHWX ä»‹äºä¸¤è€…ä¹‹é—´ï¼Œä½†æ˜¯æœ‰å…¶ä»–ä¼˜ç‚¹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>quantizing</title>
    <link href="/2020/12/12/quantizing/"/>
    <url>/2020/12/12/quantizing/</url>
    
    <content type="html"><![CDATA[<p>â€‹        é‡åŒ–ï¼Œ ä¹Ÿè¢«ç§°ä¸ºå®šç‚¹åŒ–ã€ç¦»æ•£åŒ–ï¼Œæ˜¯æŒ‡ç”¨ä½ç²¾åº¦æ•´æ•°æ¥è¿‘ä¼¼è¡¨ç¤ºæµ®ç‚¹æ•°(æƒé‡å’Œåç½®)çš„æ–¹æ³•ã€‚ åœ¨é‡åŒ–ä¹‹åï¼Œå¯ä»¥åœ¨ç‰¹å®šçš„ç¡¬ä»¶å¹³å°ä¸Šä½¿ç”¨ç‰¹å®šçš„æŒ‡ä»¤é›†å¯¹å…¶åŠ é€Ÿï¼Œ å¦å¤–ï¼Œç”±äºå­˜å‚¨ä½å®½çš„å‡å°ï¼Œæ¨¡å‹çš„ä½“ç§¯ä¹Ÿä¼šæ˜¾è‘—å‡å°ã€‚å¸¸è§çš„é‡åŒ–æ–¹æ¡ˆå¯ä»¥åˆ†ä¸ºäºŒå€¼é‡åŒ–ã€ä¸‰å€¼é‡åŒ–ã€ä½æ¯”ç‰¹é‡åŒ–(ä»‹äº2-8bitä¹‹é—´) å’Œ int8 é‡åŒ–ã€‚</p><h4 id="1-äºŒå€¼é‡åŒ–"><a href="#1-äºŒå€¼é‡åŒ–" class="headerlink" title="1. äºŒå€¼é‡åŒ–"></a>1. äºŒå€¼é‡åŒ–</h4><p><strong>Binary Weight</strong> (åªå¯¹æƒé‡è¿›è¡ŒäºŒå€¼åŒ–)</p><p>ğŸŒŸ [BinaryConnect] BinaryConnect: Training Deep Neural Networks with binary weights during propagations</p><p>ğŸŒŸ [BWN]  Binary-Weights-Networks</p><p><strong>Binary Weight &amp; activation</strong> (å¯¹æƒé‡å’Œæ¿€æ´»éƒ½è¿›è¡ŒäºŒå€¼åŒ–)</p><p>ğŸŒŸ [BNN] <a href="https://arxiv.org/pdf/1602.02830.pdf">Binarized Neural Networks: Training Neural Networks with Weights and Activations Constrained to +1 or âˆ’1</a></p><p>ğŸŒŸ [XNOR Net] <a href="https://arxiv.org/pdf/1603.05279.pdf">XNOR-Net: ImageNet Classification Using Binary Convolutional Neural Networks</a></p><p> [ABCNet] Towards Accurate Binary Convolutional Neural Network by Xiaofan Lin, Cong Zhao, and Wei Pan.</p><p> [Bi-Real Net] Enhancing the Performance of 1bit CNNs with Improved Representational Capacity and Advanced Training Algorithm</p><p> [HORQ]Performance Guaranteed Network Acceleration via High-Order Residual Quantization</p><h4 id="2-ä¸‰å€¼é‡åŒ–"><a href="#2-ä¸‰å€¼é‡åŒ–" class="headerlink" title="2. ä¸‰å€¼é‡åŒ–"></a>2. ä¸‰å€¼é‡åŒ–</h4><p>ğŸŒŸ [TWN] <a href="https://arxiv.org/pdf/1605.04711.pdf">Ternary weight networks</a></p><p>[TNN] Ternary Neural Networks for Resource-Efficient AI Applications </p><p>[TTQ] Trained Ternary Quantization </p><h4 id="3-2bit-8bit"><a href="#3-2bit-8bit" class="headerlink" title="3. 2bit - 8bit"></a>3. 2bit - 8bit</h4><p>ğŸŒŸ [DOREFA-NET] DoReFa-Net: Training Low Bitwidth Convolutional Neural Networks with Low Bitwidth Gradient</p><p>â€‹       å®ç°äº†æƒé‡ï¼Œ æ¿€æ´» å€¼ã€æ¢¯åº¦çš„é‡åŒ–ï¼Œ å…¶ä¸­æƒé‡ã€æ¿€æ´»å’Œæ¢¯åº¦åˆ†åˆ«ä½¿ç”¨ 1bitã€2bit å’Œ 4bit è¿›è¡Œè¡¨ç¤ºï¼Œ å¯ä»¥å®ç°åœ¨ç‰¹æ®Šç¡¬ä»¶ä¸Šå¹¶è¡Œè®­ç»ƒã€‚</p><p>ğŸŒŸ  [ACIQ]:4bit</p><p>ğŸŒŸ  [AdaRound]: 4bit </p><p>ä¸Šè¿°æ–¹æ¡ˆçš„å¯¹æ¯”</p><p><img src="/2020/12/12/quantizing/2.png" style="zoom:50%;"></p><h4 id="4-int8-é‡åŒ–"><a href="#4-int8-é‡åŒ–" class="headerlink" title="4. int8 é‡åŒ–"></a>4. int8 é‡åŒ–</h4><p>int8 æ–¹æ¡ˆæŒ‰ç…§é‡åŒ–çš„æ—¶æœºå¯ä»¥åˆ†ä¸ºæ„ŸçŸ¥é‡åŒ– (Quantization Aware Training, QAT) å’Œè®­ç»ƒåé‡åŒ– (Post Training Quantizationï¼ŒPTQ)ã€‚ åœ¨æ­¤çš„é‡ç‚¹å…³æ³¨äºè®­ç»ƒåé‡åŒ–ï¼Œ å› ä¸ºå…¶ä¸éœ€è¦é‡æ–° fine-tuneï¼Œ æ–¹ä¾¿åœ¨å·¥ä¸šç•Œè¿›è¡Œè½åœ°ä½¿ç”¨ã€‚</p><ul><li>æ„ŸçŸ¥é‡åŒ–ï¼Œ æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¯¹é‡åŒ–è¿›è¡Œå»ºæ¨¡ä»¥ç¡®å®šé‡åŒ–å‚æ•°ï¼Œ å®ƒèƒ½å¤Ÿä¿æŒè¾ƒé«˜ç²¾åº¦ã€‚ è¯¥è§£å†³æ–¹æ¡ˆç”± google æå‡ºå¹¶å°†å…¶åº”ç”¨äº tensorflowï¼Œ è§äºè®ºæ–‡ Quantizing deep convolutional networks for efficient inference: A whitepaperã€‚</li><li>å¯¹äºè®­ç»ƒåé‡åŒ–ï¼Œ åˆ™æ˜¯ä½¿ç”¨å¯¹è®­ç»ƒç”Ÿæˆçš„æ¨¡å‹ç›´æ¥è¿›è¡Œæ˜ å°„ã€‚è¯¥æ–¹æ³•ç²¾åº¦æŸå¤±ç¨å¤§ä½†æ˜¯ä¸éœ€è¦é‡æ–°è®­ç»ƒå¯ä»¥å¿«é€Ÿå¾—åˆ°é‡åŒ–æ¨¡å‹ã€‚å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰å››ç§ï¼šmax-max(max-min)ã€KLã€admmã€easyquantã€‚ å…¶ä¸­ KL æ–¹æ¡ˆç”± nvidia æå‡ºï¼Œæ˜¯ç°åœ¨ä¸»æµçš„ int8 é‡åŒ–æ–¹æ¡ˆã€‚</li></ul><h5 id="4-1-max-abs"><a href="#4-1-max-abs" class="headerlink" title="4.1 max-abs"></a>4.1 max-abs</h5><p>â€‹        é¦–å…ˆæ±‚å‡ºä¸€ä¸ª layer çš„æ¿€æ´»å€¼èŒƒå›´ï¼Œ å°†ç»å¯¹å€¼çš„æœ€å¤§å€¼ä½œä¸ºé˜ˆå€¼ï¼Œ æŠŠè¿™ä¸ªèŒƒå›´æŒ‰ç…§æ¯”ä¾‹æ˜ å°„åˆ° -127 åˆ° 128 çš„èŒƒå›´å†…, å¦‚ä¸‹å·¦å›¾æ‰€ç¤ºã€‚ å…¶ fp32 å’Œ int8 çš„è½¬æ¢å…¬å¼ä¸º:</p><pre><code class="hljs lisp">FP32 Tensor (<span class="hljs-name">T</span>) = scale_factor(<span class="hljs-name">sf</span>) * <span class="hljs-number">8</span>-bit Tensor(<span class="hljs-name">t</span>) + FP32_bias (<span class="hljs-name">b</span>)</code></pre><p>  é€šè¿‡å®éªŒå¾—çŸ¥ï¼Œbiaså€¼å»æ‰å¯¹ç²¾åº¦çš„å½±å“ä¸æ˜¯å¾ˆå¤§ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥å»æ‰, æ‰€ä»¥è¯¥å…¬å¼å¯ä»¥ç®€åŒ–ä¸º:</p><pre><code class="hljs excel"><span class="hljs-built_in">T</span> = sf * <span class="hljs-built_in">t</span></code></pre><p>è¯¥æ–¹æ¡ˆå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šä¸é¥±å’Œï¼Œ å³é€šå¸¸åœ¨æ­£è´Ÿä¸Šä¼šæœ‰ä¸€äº›é‡åŒ–å€¼æœªè¢«åˆ©ç”¨ï¼Œ ä¸”ä¼šäº§ç”Ÿè¾ƒå¤§çš„ç²¾åº¦æŸå¤±ã€‚</p><p><img src="/2020/12/12/quantizing/tensorrt_qua.png" style="zoom:35%;"></p><p>ï¼ æ³¨æ„åŒºåˆ†ä¸€ä¸‹ min-max å’Œ max-maxã€‚ å‰è€…æ˜¯å°†æœ€å¤§å€¼å’Œæœ€å°å€¼æ˜ å°„åˆ°å¯¹åº”åŒºé—´ï¼Œ è€Œåè€…æ˜¯æ‰¾åˆ°å–æœ€å¤§å€¼å’Œæœ€å°å€¼çš„ç»å¯¹å€¼ã€‚ tensorflow lite çš„è®­ç»ƒåé‡åŒ–è¿‡ç¨‹æ˜¯é‡‡ç”¨çš„ min-max æ–¹å¼ã€‚</p><h5 id="4-2-KL"><a href="#4-2-KL" class="headerlink" title="4.2 KL`"></a>4.2 KL`</h5><p>â€‹        é’ˆå¯¹éé¥±å’Œæ˜ å°„ç²¾åº¦æŸå¤±çš„é—®é¢˜ï¼ŒTensorRT æå‡ºäº†éé¥±å’Œæ˜ å°„ï¼Œ å³é€‰å–ä¸€ä¸ªé˜ˆå€¼ $T$ ï¼Œç„¶åå°† $-|T|$ ~  $|T|$ ä¹‹é—´çš„å€¼æ˜ å°„åˆ° -127 åˆ° 128 è¿™ä¸ªèŒƒå›´å†…ã€‚è¿™æ ·ç¡®å®šäº†é˜ˆå€¼ T ä¹‹åï¼Œå…¶å®ä¹Ÿèƒ½ç¡®å®š scaleï¼Œä¸€ä¸ªç®€å•çš„çº¿æ€§å…¬å¼æ˜¯: <code>scale = T/127</code>ã€‚ é‡åŒ–çš„æ ¸å¿ƒå°±æ˜¯æ‰¾åˆ°è¿™ä¸ªé˜ˆå€¼ Tã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒT åº”è¯¥å–ä½•å€¼?  å…¶åŸºæœ¬æµç¨‹å¦‚ä¸‹:</p><p>â€‹    (a) é€‰å–ä¸åŒçš„ T é˜ˆå€¼è¿›è¡Œé‡åŒ–, å°† P(fp32) æ˜ å°„åˆ° Q(int8)ã€‚</p><p>â€‹    (b) å°† Q(int8) åé‡åŒ–åˆ° P(fp32) ä¸€æ ·é•¿åº¦ï¼Œå¾—åˆ°åˆ†å¸ƒ Q_expandï¼›</p><p>â€‹    (c) è®¡ç®— P å’Œ Q_expand çš„ç›¸å¯¹ç†µ( KL æ•£åº¦)ï¼Œç„¶åé€‰æ‹©ç›¸å¯¹ç†µæœ€å°‘çš„ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯è·ŸåŸåˆ†å¸ƒæœ€åƒçš„ä¸€ä¸ª,  ä»è€Œç¡®å®šScaleã€‚</p><p>â€‹        å…¶ä¸­çš„ KL æ•£åº¦å¯ä»¥ç”¨æ¥æè¿° Pã€Q ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚<strong>ã€‚</strong>æ•£åº¦è¶Šå°ï¼Œä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚è¶Šå°ï¼Œæ¦‚ç‡å¯†åº¦å‡½æ•°å½¢çŠ¶å’Œæ•°å€¼è¶Šæ¥è¿‘ã€‚è¿™é‡Œçš„æ‰€æœ‰åˆ†å¸ƒã€è®¡ç®—ï¼Œéƒ½æ˜¯ç¦»æ•£å½¢å¼çš„ã€‚åˆ†å¸ƒæ˜¯ä»¥ç»Ÿè®¡ç›´æ–¹å›¾çš„æ–¹å¼å­˜åœ¨ï¼ŒKLæ•£åº¦å…¬å¼å¦‚ä¸‹ï¼š</p><p><img src="/2020/12/12/quantizing/kl.png" style="zoom:50%;"></p><p>â€‹        ä»ä¸Šå¼ä¸­æˆ‘ä»¬è¿˜å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šKL æ•£åº¦è®¡ç®—å…¬å¼è¦æ±‚ Pã€Q ä¸¤ä¸ªç»Ÿè®¡ç›´æ–¹å›¾é•¿åº¦ä¸€æ ·ï¼ˆä¹Ÿå°±æ˜¯ bins çš„æ•°é‡ä¸€æ ·ï¼‰ã€‚Q ä¸€ç›´éƒ½æ˜¯ -127ï½127ï¼›å¯æ˜¯ P çš„æ•°é‡ä¼šéšç€ T çš„å˜åŒ–è€Œå˜åŒ–ã€‚é‚£è¿™æ€ä¹ˆåš KL æ•£åº¦å‘¢ï¼Ÿ</p><p>ncnn çš„åšæ³•æ˜¯å°† Q æ‰©å±•åˆ°å’Œ P ä¸€æ ·çš„é•¿åº¦ï¼Œä¸‹é¢ä¸¾ä¸ªä¾‹å­( NVIDIA PPT ä¸­çš„ä¾‹å­)ï¼š</p><pre><code class="hljs python">P = [<span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">7</span>]     // fp32 çš„ç»Ÿè®¡ç›´æ–¹å›¾ï¼ŒT = <span class="hljs-number">8</span> // å‡è®¾åªé‡åŒ–åˆ°ä¸¤ä¸ª binsï¼Œå³é‡åŒ–åçš„å€¼åªæœ‰ <span class="hljs-number">-1</span>/<span class="hljs-number">0</span>/+<span class="hljs-number">1</span> ä¸‰ç§ Q = [<span class="hljs-number">6</span>, <span class="hljs-number">16</span>]  // P å’Œ Q ç°åœ¨æ²¡æ³•åš KL æ•£åº¦ï¼Œæ‰€ä»¥è¦å°† Q æ‰©å±•åˆ°å’Œ P ä¸€æ ·çš„é•¿åº¦ Q_expand=[<span class="hljs-number">6</span>/<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>/<span class="hljs-number">3</span>, <span class="hljs-number">6</span>/<span class="hljs-number">3</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>]=[<span class="hljs-number">2</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span>] // P ä¸­æœ‰ <span class="hljs-number">0</span> æ—¶ä¸ç®—åœ¨å†… D = KL(P||Q_expand)  // è¿™æ ·å°±å¯ä»¥åš KL æ•£åº¦è®¡ç®—äº†</code></pre><p>â€‹    è¿™ä¸ªæ‰©å±•çš„æ“ä½œï¼Œå°±åƒå›¾åƒçš„ä¸Šé‡‡æ ·ä¸€æ ·ï¼Œå°†ä½ç²¾åº¦çš„ç»Ÿè®¡ç›´æ–¹å›¾(Q)ï¼Œä¸Šé‡‡æ ·çš„é«˜ç²¾åº¦çš„ç»Ÿè®¡ç›´æ–¹å›¾ä¸Šå»(Q_expand)ã€‚ç”±äº Q ä¸­ä¸€ä¸ª bin å¯¹åº”Pä¸­çš„ 4 ä¸ªbinï¼Œå› æ­¤åœ¨ Q ä¸Šé‡‡æ ·çš„ Q_expand çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®è¦é™¤ä»¥4ã€‚å¦å¤–ï¼Œåœ¨è®¡ç®— fp32 çš„åˆ†å¸ƒ P æ—¶ï¼Œè¢« T æˆªæ–­çš„æ•°æ®ï¼Œæ˜¯è¦ç®—åœ¨æœ€åä¸€ä¸ª bin é‡Œé¢çš„ã€‚</p><p>TNN int8 é‡åŒ–æ–¹æ¡ˆä»£ç ä½ç½®  <a href="https://github.com/Tencent/TNN/tree/master/tools/quantization">https://github.com/Tencent/TNN/tree/master/tools/quantization</a></p><h5 id="4-3-admm"><a href="#4-3-admm" class="headerlink" title="4.3 admm"></a>4.3 admm</h5><p>admm ç®—æ³•ç”± é˜¿é‡Œå·´å·´æå‡ºï¼Œ åº”ç”¨åœ¨ MNNä¹‹ä¸­ã€‚ ADMM ç®—æ³•æ˜¯ä»ä¼˜åŒ–çš„è§’åº¦å‡ºå‘ï¼Œæ¥ä¿è¯ç¼–ç å‰åæ•°æ®å°½å¯èƒ½ç›¸ä¼¼çš„æ–¹æ³•ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåˆ†æ®µå‡½æ•° $E(x)$ å¦‚ä¸‹æ‰€ç¤º,  åˆ™ int8 çš„æ±‚è§£è¿‡ç¨‹å¯ä»¥è¡¨ç¤ºä¸º $E(\frac{X}{s})$</p><script type="math/tex; mode=display">E(x) = \left \{\begin{aligned}x &= round(x), abs(x) < 2^8 \\x &= 2^8 - 1, abs(x) > 2^8 \end{aligned}\right.</script><p>å¯ä»¥å®šä¹‰ä¸€ä¸ªç›®æ ‡å‡½æ•°æ¥è¡¡é‡åé‡åŒ–ä¹‹åçš„æ•°æ®å’ŒåŸæ•°æ®çš„â€œè·ç¦»â€ã€‚ è¿™é‡Œé€‰æ‹©åº¦é‡ D ä¸º L2 åº¦é‡ï¼Œ åˆ™ç›®æ ‡å‡½æ•°å¯ä»¥è®°ä¸ºï¼š</p><script type="math/tex; mode=display">L = ||s \cdot E(\frac{X}{s}) - X||^2</script><p>å¯¹å…¶è¿›è¡Œæ±‚å¯¼ï¼Œ å¯å¾—:</p><script type="math/tex; mode=display">\frac{\partial{L}}{\partial s} = E(\frac{X}{S})[s \cdot E(\frac{X}{s}) - X]</script><p>å¾—åˆ°ç›®æ ‡å‡½æ•°å…³äº $s$ çš„å¯¼æ•°å…¬å¼ä»¥åï¼Œ è¯¥é—®é¢˜è½¬åŒ–ä¸ºæ±‚è§£ $L$ å…³äº $s$ çš„å¯¼æ•°ä¸º 0 çš„æ•°å­¦é—®é¢˜ã€‚ è®ºæ–‡é‡‡ç”¨äº† admm çš„æ€æƒ³ï¼šé¦–å…ˆå›ºå®š E ä¸­çš„å˜é‡ sï¼Œè¿›è¡Œ s å€¼çš„æ±‚è§£ï¼›å†é€šè¿‡æ±‚è§£åçš„ s å»ä¼°è®¡ E çš„å€¼ï¼Œå¦‚æ­¤åå¤ç›´åˆ° s å€¼æ”¶æ•›åˆ°æœ€ä¼˜ã€‚äºæ˜¯ä¸Šè¿°çš„å¼å­è¦å¼±åŒ–ä¸ºå¦‚ä¸‹å…¬å¼ï¼š </p><script type="math/tex; mode=display">\frac{\partial{L}}{\partial s} = E(\frac{X}{s_k})[s_{k+1} \cdot E(\frac{X}{s_k}) - X] = 0</script><p>æ‰€ä»¥ï¼Œ è¿­ä»£çš„è¿‡ç¨‹ä¹Ÿå°±å˜æˆäº†äº¤æ›¿æ±‚è§£å¦‚ä¸‹ä¸¤ä¸ªå…¬å¼çš„è¿‡ç¨‹:</p><script type="math/tex; mode=display">\left \{\begin{aligned}& s_{k+1} = \frac{E(\frac{X}{s_k}) \cdot X}{ E(\frac{X}{s_k} ) \cdot E(\frac{X}{s_k})}, \\& E(\frac{X}{s_k})\end{aligned}\right.</script><p>MNN ä¸­ admm ç®—æ³•çš„å®ç°ï¼š <a href="https://github.com/alibaba/MNN/blob/master/tools/quantization/quantizeWeight.cpp">https://github.com/alibaba/MNN/blob/master/tools/quantization/quantizeWeight.cpp</a></p><h5 id="4-4-easyquant"><a href="#4-4-easyquant" class="headerlink" title="4.4 easyquant"></a>4.4 easyquant</h5><p>github ä¸»é¡µ: <a href="https://github.com/deepglint/EasyQuant">https://github.com/deepglint/EasyQuant</a></p><p>åŸå§‹çš„å·ç§¯è¾“å‡ºç»“æœå¯ä»¥è¡¨ç¤ºä¸º:</p><script type="math/tex; mode=display">Q_l = A_l * W_l</script><p>å…¶ä¸­ï¼ŒA è¡¨ç¤ºç½‘ç»œå±‚çš„è¾“å…¥ï¼Œ W è¡¨ç¤ºç½‘ç»œå±‚çš„å‚æ•°ã€‚</p><p>å¦‚æœç”¨ $Q$ è¡¨ç¤ºé‡åŒ–æ“ä½œï¼Œé‡åŒ–å±‚è¾“å‡ºå†åé‡åŒ–çš„ç»“æœå¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼Œ å…¶ä¸­ $S$ è¡¨ç¤º scale å€¼ã€‚</p><script type="math/tex; mode=display">\hat{O}_l = \frac{Q(A_l, S^a_l) * Q(W_l. S^w_l)}{S_l^a \cdot S_l^w}</script><p>easyquant å°†å…¶çœ‹åšä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œ ä¼˜åŒ–ç›®æ ‡ä¸ºé‡åŒ–å‰çš„è¾“å‡ºå’Œåé‡åŒ–ä¹‹åçš„è¾“å‡ºçš„ä½™å¼¦è·ç¦»ã€‚æ•°å­¦è¡¨è¾¾å¼ä¸º:</p><script type="math/tex; mode=display">max_{s_l} \frac{1}{N} \sum_{i=1}^{N} cos(Q_l^i, \hat{Q_l^i}) \\s.t. S_l \in R^+</script><h5 id="4-5-GDFQ-å’Œ-ZeroQ"><a href="#4-5-GDFQ-å’Œ-ZeroQ" class="headerlink" title="4.5 GDFQ å’Œ ZeroQ"></a>4.5 GDFQ å’Œ ZeroQ</h5><p>â€‹        ç»“åˆ GAN ç½‘ç»œå®ç°ç”Ÿæˆæ•°æ®ï¼Œå®ç° data-freeã€‚ ç„¶åç»“åˆçŸ¥è¯†è’¸é¦ï¼ˆteacher model ä¸ºé«˜ç²¾åº¦ç½‘ç»œï¼Œ student model ä¸ºé‡åŒ–ç½‘ç»œï¼‰æ¥å®ç°ç½‘ç»œçš„é‡åŒ–ã€‚</p><p>â€‹    Â·</p><h4 id="5-int8-å®é™…åº”ç”¨"><a href="#5-int8-å®é™…åº”ç”¨" class="headerlink" title="5. int8 å®é™…åº”ç”¨"></a>5. int8 å®é™…åº”ç”¨</h4><p>å…³äºé‡åŒ–ä¹‹åï¼Œå¦‚ä½•ä½¿ç”¨çš„é—®é¢˜ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><p>æ··åˆ fp32/int8 æ¨ç†: è¯¥è§£å†³æ–¹æ¡ˆå¼•å…¥ Quantize å’Œ Dequantize ä¸¤ä¸ªæ“ä½œã€‚åœ¨è¿›è¡Œå·ç§¯æ“ä½œå‰ï¼Œå°†æƒé‡å’Œè¾“å…¥è¿›è¡Œ Quantize ä¸º int8ï¼Œç„¶åä½¿ç”¨ int8 è¿›è¡Œå·ç§¯ï¼Œæœ€åå°†ç»“æœ  Dequantize ä¸º float32ã€‚è¿™ç§æ–¹æ¡ˆå¹¶ä¸éœ€è¦æ‰€æœ‰çš„ç®—å­(operator) éƒ½æ”¯æŒé‡åŒ–ï¼Œä½†æ˜¯ç”±äºéœ€è¦æ•°æ®çš„ Quantize å’Œ Dequantizeï¼Œé™ä½äº†ç½‘ç»œçš„æ¨ç†é€Ÿåº¦ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œ å¯¹äºæƒé‡é‡åŒ–é‡‡ç”¨ klé‡åŒ– æˆ–è€… easyquant é‡åŒ–ï¼Œè€Œå¯¹äºæ¿€æ´»(è¾“å…¥å’Œè¾“å‡º) çš„é‡åŒ–å¯ä»¥é‡‡ç”¨ max-max é‡åŒ– ã€‚</p><p><img src="/2020/12/12/quantizing/q1.png" title="æ··åˆfp32/int8æ¨ç†" style="zoom:50%;"></p></li><li><p>çº¯ int8 æ¨ç†ï¼šå°†ç½‘ç»œæ•´ä½“è½¬æ¢ä¸º int8 æ ¼å¼ï¼Œå› æ­¤åœ¨æ¨ç†æœŸé—´æ²¡æœ‰é«˜ä½ç²¾åº¦æ•°æ®çš„è½¬æ¢ï¼Œå› æ­¤æ¨ç†é€Ÿåº¦æ›´å¿«ã€‚ä½†æ˜¯è¯¥è§£å†³æ–¹æ¡ˆè¦æ±‚ç®—å­(Operator) éƒ½æ”¯æŒé‡åŒ–ï¼Œå› ä¸ºè¿ç®—ç¬¦ä¹‹é—´çš„æ•°æ®æµæ˜¯ int8ã€‚å¯¹äºå°šæœªæ”¯æŒçš„é‚£äº›ï¼Œé™çº§åˆ°æ··åˆ fp32/int8 æ¨ç†ã€‚ </p><p><img src="/2020/12/12/quantizing/q2.png" title="çº¯int8æ¨ç†" style="zoom:50%;"></p></li></ul><h4 id="6-ncnn-é‡åŒ–å·¥å…·çš„ä½¿ç”¨"><a href="#6-ncnn-é‡åŒ–å·¥å…·çš„ä½¿ç”¨" class="headerlink" title="6. ncnn é‡åŒ–å·¥å…·çš„ä½¿ç”¨"></a>6. ncnn é‡åŒ–å·¥å…·çš„ä½¿ç”¨</h4><p>(1)  Optimization graphic</p><pre><code class="hljs smali"><span class="hljs-keyword">.</span>/ncnnoptimize mobilenet-fp32.param mobilenet-fp32.bin mobilenet-nobn-fp32.param mobilenet-nobn-fp32.bin</code></pre><p>(2) Create the calibration table file</p><pre><code class="hljs angelscript">./ncnn2table --param mobilenet-nobn-fp32.param --bin mobilenet-nobn-fp32.bin --images images/ --output mobilenet-nobn.table --mean <span class="hljs-number">104</span>,<span class="hljs-number">117</span>,<span class="hljs-number">123</span> --norm <span class="hljs-number">0.017</span>,<span class="hljs-number">0.017</span>,<span class="hljs-number">0.017</span> --size <span class="hljs-number">224</span>,<span class="hljs-number">224</span> --thread <span class="hljs-number">2</span></code></pre><p>(3) Quantization</p><pre><code class="hljs stylus">./ncnn2int8 mobilenet-nobn-fp32<span class="hljs-selector-class">.param</span> mobilenet-nobn-fp32<span class="hljs-selector-class">.bin</span> mobilenet-int8<span class="hljs-selector-class">.param</span> mobilenet-int8<span class="hljs-selector-class">.bin</span> mobilenet-nobn.table</code></pre><h4 id="7-å‚è€ƒèµ„æ–™"><a href="#7-å‚è€ƒèµ„æ–™" class="headerlink" title="7. å‚è€ƒèµ„æ–™"></a>7. å‚è€ƒèµ„æ–™</h4><p>[1] <a href="https://me.csdn.net/sinat_31425585">https://me.csdn.net/sinat_31425585</a></p><p>[2] <a href="https://zhuanlan.zhihu.com/c_1064124187198705664">https://zhuanlan.zhihu.com/c_1064124187198705664</a></p><p>[3] <a href="https://github.com/BUG1989/caffe-int8-convert-tools">https://github.com/BUG1989/caffe-int8-convert-tools</a></p><p>[4] <a href="https://github.com/Tencent/ncnn/wiki/quantized-int8-inference">Tencent/ncnn</a></p><p>[5] Nvidia solutionï¼š Szymon Migacz. 8-bit Inference with TensorRT</p><p>[6] Google solutionï¼šQuantizing deep convolutional networks for efficient inference: A whitepaper</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¨¡å‹å±‚èåˆconvä¸bn</title>
    <link href="/2020/12/11/%E6%A8%A1%E5%9E%8B%E5%B1%82%E8%9E%8D%E5%90%88conv%E4%B8%8Ebn/"/>
    <url>/2020/12/11/%E6%A8%A1%E5%9E%8B%E5%B1%82%E8%9E%8D%E5%90%88conv%E4%B8%8Ebn/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å·ç§¯å±‚ conv å’Œ æ‰¹å½’ä¸€åŒ–å±‚ batch normalization èåˆçš„åŸç†ã€‚</p><a id="more"></a><h3 id="1-æ‰¹å½’ä¸€åŒ–-Batch-Normalization"><a href="#1-æ‰¹å½’ä¸€åŒ–-Batch-Normalization" class="headerlink" title="1.  æ‰¹å½’ä¸€åŒ– Batch Normalization"></a>1.  æ‰¹å½’ä¸€åŒ– Batch Normalization</h3><p>â€‹     æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰å› å…¶å¯ä»¥åŠ é€Ÿç¥ç»ç½‘ç»œè®­ç»ƒã€ä½¿ç½‘ç»œè®­ç»ƒæ›´ç¨³å®šï¼Œè€Œä¸”è¿˜æœ‰ä¸€å®šçš„æ­£åˆ™åŒ–æ•ˆæœï¼Œæ‰€ä»¥å¾—åˆ°äº†éå¸¸å¹¿æ³›çš„åº”ç”¨ã€‚ä½†æ˜¯ï¼Œåœ¨æ¨ç†é˜¶æ®µï¼ŒBNå±‚ä¸€èˆ¬æ˜¯å¯ä»¥å®Œå…¨èåˆåˆ°å‰é¢çš„å·ç§¯å±‚çš„ï¼Œè€Œä¸”ä¸æ¯«ä¸å½±å“æ€§èƒ½ã€‚</p><p>â€‹      Batch Normalization çš„æ€æƒ³éå¸¸ç®€å•ï¼Œä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼Œå¯¹ä¸€ä¸ªç¥ç»å…ƒï¼ˆæˆ–è€…ä¸€ä¸ªå·ç§¯æ ¸ï¼‰çš„<strong>è¾“å‡ºå‡å»ç»Ÿè®¡å¾—åˆ°çš„å‡å€¼é™¤ä»¥æ ‡å‡†å·®ï¼Œç„¶åä¹˜ä»¥ä¸€ä¸ªå¯å­¦ä¹ çš„ç³»æ•°ï¼Œå†åŠ ä¸Šä¸€ä¸ªåç½®</strong>ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å®Œæˆäº†ã€‚</p><p>â€‹     åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œ ä¸»è¦æ‰§è¡Œå¦‚ä¸‹å››ä¸ªæ­¥éª¤:</p><script type="math/tex; mode=display">\begin{aligned}& \mu = \frac{1}{m}\sum_{i=1}^{m} x_i, \\& \sigma = \frac{1}{m} \sum_{i=1}^{m}(x_i - \mu)^2,  \\& \hat{x_i} = \frac{x_i - \mu}{\sqrt{\sigma^2 + \epsilon}}, \\& y_i = \gamma * \hat{x_i} + \beta \\\end{aligned}</script><p>å…¶ä¸­ $\epsilon$ ä¸ºä¸€ä¸ªéå¸¸å°çš„å¸¸æ•°ï¼Œ ä¾‹å¦‚ 0.0001ï¼Œ ä¸»è¦æ˜¯ä¸ºäº†é¿å…é™¤é›¶é”™è¯¯ã€‚ è€Œ $\gamma$  å’Œ $\beta$  åˆ™æ˜¯å¯å­¦ä¹ å‚æ•°ï¼Œ åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå’Œå…¶ä»–å·ç§¯æ ¸çš„å‚æ•°ä¸€æ ·ï¼Œ é€šè¿‡æ¢¯åº¦ä¸‹é™æ¥å­¦ä¹ ã€‚ åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä¸ºä¿æŒç¨³å®šï¼Œä¸€èˆ¬ä½¿ç”¨æ»‘åŠ¨å¹³å‡æ³•æ›´æ–°å‡å€¼å’Œæ–¹å·®ï¼Œæ»‘åŠ¨å¹³å‡å°±æ˜¯åœ¨æ›´æ–°å½“å‰å€¼çš„æ—¶å€™ï¼Œä»¥ä¸€å®šæ¯”ä¾‹ä¿å­˜ä¹‹å‰çš„æ•°å€¼ï¼Œä»¥å‡å€¼ $\mu$ ä¸ºä¾‹ï¼Œä»¥ä¸€å®šæ¯”ä¾‹ $\theta$ (ä¾‹å¦‚è¿™é‡Œ0.99ï¼‰ä¿å­˜ä¹‹å‰çš„å‡å€¼ï¼Œå½“å‰åªæ›´æ–° $(1-\theta)$ å€ï¼ˆä¹Ÿå°±æ˜¯0.001å€ï¼‰çš„æœ¬Batch çš„å‡å€¼ï¼Œè®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\mu_i = \theta \mu_{i-1} + (1 - \theta) \mu_i</script><p>æ ‡å‡†å·®çš„æ»‘åŠ¨å¹³å‡è®¡ç®—æ–¹æ³•ä¹Ÿä¸€æ ·ã€‚</p><p>â€‹        åœ¨æ¨ç†(æµ‹è¯•)é˜¶æ®µï¼Œæˆ‘ä»¬ä¸å¤ªä¼šå¯¹ä¸€ä¸ªbatchå›¾åƒè¿›è¡Œé¢„æµ‹ï¼Œä¸€èˆ¬æ˜¯å¯¹å•å¼ å›¾åƒæµ‹è¯•ã€‚å› æ­¤ï¼Œé€šè¿‡å‰é¢å…¬å¼è®¡ç®— $\mu$ å’Œ $\sigma$ å°±ä¸å¯èƒ½ã€‚å…¶å®å¯¹äºé¢„æµ‹é˜¶æ®µæ—¶æ‰€ä½¿ç”¨çš„å‡å€¼å’Œæ–¹å·®ï¼Œå…¶å®ä¹Ÿæ˜¯æ¥æºäºè®­ç»ƒé›†ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨æ¨¡å‹è®­ç»ƒæ—¶æˆ‘ä»¬å°±è®°å½•ä¸‹æ¯ä¸ª batch ä¸‹çš„å‡å€¼å’Œæ–¹å·®ï¼Œå¾…è®­ç»ƒå®Œæ¯•åï¼Œæˆ‘ä»¬æ±‚æ•´ä¸ªè®­ç»ƒæ ·æœ¬çš„å‡å€¼å’Œæ–¹å·®æœŸæœ›å€¼(æ»‘åŠ¨å‡å€¼å’Œæ–¹å·®)ï¼Œä½œä¸ºæˆ‘ä»¬è¿›è¡Œé¢„æµ‹æ—¶è¿›è¡ŒBNçš„çš„å‡å€¼å’Œæ–¹å·®ã€‚</p><p>å…·ä½“çš„ batchnorm çš„ä¸€ç»´ python å®ç°å¯ä»¥å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">batchnorm_forward</span>(<span class="hljs-params">x, gamma, beta, bn_param</span>):</span>    mode = bn_param[<span class="hljs-string">&#x27;mode&#x27;</span>]    eps = bn_param.get(<span class="hljs-string">&#x27;eps&#x27;</span>, <span class="hljs-number">1e-5</span>)     momentum = bn_param.get(<span class="hljs-string">&#x27;momentum&#x27;</span>, <span class="hljs-number">0.9</span>)        N, D = s.shape  <span class="hljs-comment"># N is batch_size * H * W, D is channels</span>    running_mean = bn_param.get(<span class="hljs-string">&#x27;running_mean&#x27;</span>, np.zeros(D, dtype=x.dtype))    running_var = bn_param.get(<span class="hljs-string">&#x27;running_var&#x27;</span>, np.zeros(D, dtype=x.dtype))        out, cahce = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>    <span class="hljs-keyword">if</span> mode == <span class="hljs-string">&#x27;train&#x27;</span>:            batch_mean = np.mean(x, axis=<span class="hljs-number">0</span>, keepdims=<span class="hljs-literal">True</span>)        batch_var = np.var(x, axis=<span class="hljs-number">0</span>, keepdims=<span class="hljs-literal">True</span>)         x_norm = (inp - batch_mean) / np.sqrt(batch_var + eps)        out = x_norm * gamma + beta        <span class="hljs-comment"># store variables in cache</span>        cache = (x, x_norm, gamma, beta, eps, batch_mean, batch_var)        <span class="hljs-comment"># update running_mean &amp; running var</span>        running_mean = momentum * running_mean + (<span class="hljs-number">1</span> - momentum) * batch_mean        running_var = momentum * running_var + (<span class="hljs-number">1</span> - momentum) * batch_var    <span class="hljs-keyword">elif</span> mode == <span class="hljs-string">&#x27;test&#x27;</span>:        x_norm = (x - running_mean) / np.sqrt(running_var + eps)        out = x_norm * gamma + beta            bn_param[<span class="hljs-string">&#x27;running_mean&#x27;</span>] = running_mean    bn_param[<span class="hljs-string">&#x27;running_var&#x27;</span>] = running_var    <span class="hljs-keyword">return</span> out, cache</code></pre><h3 id="2-conv-ä¸-Batchnorm-çš„èåˆ"><a href="#2-conv-ä¸-Batchnorm-çš„èåˆ" class="headerlink" title="2. conv ä¸ Batchnorm çš„èåˆ"></a>2. conv ä¸ Batchnorm çš„èåˆ</h3><p>â€‹     ç½‘ç»œå®Œæˆè®­ç»ƒåï¼Œåœ¨ inference é˜¶æ®µï¼Œä¸ºäº†åŠ é€Ÿè¿ç®—ï¼Œé€šå¸¸å°†å·ç§¯å±‚å’ŒBNå±‚è¿›è¡Œèåˆ:</p><p>ï¼ˆ1ï¼‰å·ç§¯å±‚å¯ä»¥æŠ½è±¡ä¸ºå¦‚ä¸‹å…¬å¼:</p><script type="math/tex; mode=display">x_{i} = w * x_{i-1} + b</script><p>ï¼ˆ2ï¼‰bn å±‚å¯ä»¥æŠ½è±¡ä¸ºå¦‚ä¸‹å…¬å¼:</p><script type="math/tex; mode=display">y = \frac{x_i - \mu}{\sqrt{\sigma + \epsilon}} \cdot \gamma + \beta</script><p>å…¶ä¸­ $\mu$ å’Œ $\sigma$ æ˜¯æ•´ä¸ªè®­ç»ƒé›†çš„å‡å€¼å’Œæ–¹å·®(æ»‘åŠ¨)ï¼Œ è¿™æ˜¯ä¸¤ä¸ªå¸¸é‡ã€‚$\gamma$ å’Œ $\beta$ æ˜¯å­¦ä¹ å®Œæˆçš„å‚æ•°ï¼Œ ä¹Ÿæ˜¯ä¸¤ä¸ªå¸¸é‡ã€‚</p><p>ï¼ˆ3ï¼‰èåˆä¸¤å±‚ï¼šå°† conv å±‚çš„å…¬å¼å¸¦å…¥åˆ° BN å±‚çš„å…¬å¼</p><script type="math/tex; mode=display">\begin{align}&y = \frac{x_i - \mu}{\sqrt{\sigma + \epsilon}} \cdot \gamma + \beta \\   &= \frac{w * x_i + b - \mu}{\sqrt{\sigma + \epsilon}} \cdot \gamma + \beta \\   &= \frac{w * \gamma}{\sqrt{\sigma + \epsilon}} \cdot x + (\frac{b-\mu}{\sqrt{\sigma + \epsilon}} \cdot \gamma + \beta)\end{align}</script><p>èåˆåç›¸å½“äºï¼š</p><script type="math/tex; mode=display">\begin{align}& w_{new} = \frac{w * \gamma}{\sqrt{\sigma + \epsilon}}, \\& b_{new} = (\frac{b-\mu}{\sqrt{\sigma + \epsilon}} \cdot \gamma + \beta)\end{align}</script><p>â€‹    é€šè¿‡å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œ æˆ‘ä»¬å¯ä»¥å°† Batch Normalization å±‚èåˆåˆ°å·ç§¯å±‚ä¸­ï¼Œç›¸å½“äºå¯¹å·ç§¯æ ¸è¿›è¡Œä¸€å®šçš„ä¿®æ”¹ï¼Œæ²¡æœ‰å¢åŠ å·ç§¯çš„è®¡ç®—é‡ï¼ŒåŒæ—¶æ•´ä¸ª Batch Normalization å±‚çš„è®¡ç®—é‡éƒ½çœå»äº†ã€‚</p><p>Pytorch æä¾›äº†ç›¸å…³çš„ conv å’Œ bn èåˆçš„ä»£ç ï¼š <a href="https://github.com/pytorch/pytorch/blob/master/torch/nn/utils/fusion.py">https://github.com/pytorch/pytorch/blob/master/torch/nn/utils/fusion.py</a></p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fuse_conv_bn_weights</span>(<span class="hljs-params">conv_w, conv_b, bn_rm, bn_rv, bn_eps, bn_w, bn_b</span>):</span>    <span class="hljs-keyword">if</span> conv_b <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:        conv_b = torch.zeros_like(bn_rm)    <span class="hljs-keyword">if</span> bn_w <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:        bn_w = torch.ones_like(bn_rm)    <span class="hljs-keyword">if</span> bn_b <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:        bn_b = torch.zeros_like(bn_rm)    bn_var_rsqrt = torch.rsqrt(bn_rv + bn_eps)  <span class="hljs-comment"># æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œç›´æ¥å–äº†å€’æ•° rsqrt</span>    conv_w = conv_w * (bn_w * bn_var_rsqrt).reshape([<span class="hljs-number">-1</span>] + [<span class="hljs-number">1</span>] * (len(conv_w.shape) - <span class="hljs-number">1</span>))    conv_b = (conv_b - bn_rm) * bn_var_rsqrt * bn_w + bn_b    <span class="hljs-keyword">return</span> torch.nn.Parameter(conv_w), torch.nn.Parameter(conv_b)</code></pre><h3 id="3-å®é™…æµ‹è¯•"><a href="#3-å®é™…æµ‹è¯•" class="headerlink" title="3. å®é™…æµ‹è¯•"></a>3. å®é™…æµ‹è¯•</h3><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">import</span> torchIn [<span class="hljs-number">2</span>]: <span class="hljs-keyword">import</span> torchvisionIn [<span class="hljs-number">3</span>]: <span class="hljs-keyword">from</span> torch.nn.utils.fusion <span class="hljs-keyword">import</span> fuse_conv_bn_weightsIn [<span class="hljs-number">4</span>]: resnet18 = torchvision.models.resnet18(pretrained=<span class="hljs-literal">True</span>)In [<span class="hljs-number">5</span>]: resnet18.eval()In [<span class="hljs-number">6</span>]: conv_bn = torch.nn.Sequential(   ...:     resnet18.conv1,    ...:     resnet18.bn1    ...: )                                                                                                                         In [<span class="hljs-number">7</span>]: bn_var, bn_mean = resnet18.bn1.running_var, resnet18.bn1.running_meanIn [<span class="hljs-number">8</span>]: bn_eps = resnet18.bn1.epsIn [<span class="hljs-number">9</span>]: bn_weight, bn_bias = resnet18.bn1.weight, resnet18.bn1.biasIn [<span class="hljs-number">10</span>]: conv_weight, conv_bias = resnet18.conv1.weight, resnet18.conv1.biasIn [<span class="hljs-number">11</span>]: fused_w, fused_b = fuse_conv_bn_weights(conv_weight, conv_bias, mean, var, eps, weight, bias)In [<span class="hljs-number">12</span>]: fused_conv = torch.nn.Conv2d(    ...:             resnet18.conv1.in_channels,    ...:             resnet18.conv1.out_channels,    ...:             kernel_size=resnet18.conv1.kernel_size,    ...:             stride=resnet18.conv1.stride,    ...:             padding=resnet18.conv1.padding,    ...:             bias=<span class="hljs-literal">True</span>    ...:         )In [<span class="hljs-number">13</span>]: fused.weight.copy_(fused_w)In [<span class="hljs-number">14</span>]: fused.bias.copy_(fused_b)In [<span class="hljs-number">15</span>]: torch.set_grad_enabled(<span class="hljs-literal">False</span>) In [<span class="hljs-number">16</span>]: x = torch.randn(<span class="hljs-number">16</span>, <span class="hljs-number">3</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span>)In [<span class="hljs-number">17</span>]: res1 = conv_bn.forward(x)In [<span class="hljs-number">18</span>]: res1Out[<span class="hljs-number">18</span>]: tensor([[[[ <span class="hljs-number">3.7646e-01</span>,  <span class="hljs-number">7.3849e-01</span>, <span class="hljs-number">-1.1688e-03</span>,  ...,  <span class="hljs-number">4.6396e-01</span>,            <span class="hljs-number">5.1061e-01</span>,  <span class="hljs-number">7.1462e-02</span>],          [ <span class="hljs-number">1.0769e+00</span>,  <span class="hljs-number">1.2775e+00</span>,  <span class="hljs-number">5.5155e-01</span>,  ...,  <span class="hljs-number">1.2121e+00</span>,           <span class="hljs-number">-7.6443e-02</span>,  <span class="hljs-number">4.3850e-01</span>],          [ <span class="hljs-number">5.2745e-02</span>, <span class="hljs-number">-3.7510e-01</span>, <span class="hljs-number">-3.4277e-01</span>,  ..., <span class="hljs-number">-2.5618e-01</span>,           <span class="hljs-number">-7.3687e-01</span>, <span class="hljs-number">-2.6337e-01</span>],          ...,          [ <span class="hljs-number">3.1750e-01</span>,  <span class="hljs-number">2.7688e-01</span>, <span class="hljs-number">-7.8872e-01</span>,  ...,  <span class="hljs-number">4.0573e-01</span>,            <span class="hljs-number">2.3306e-01</span>, <span class="hljs-number">-6.2662e-01</span>],          [ <span class="hljs-number">7.0026e-01</span>, <span class="hljs-number">-1.9506e-01</span>,  <span class="hljs-number">5.6528e-01</span>,  ..., <span class="hljs-number">-1.3667e-01</span>,           <span class="hljs-number">-5.3668e-03</span>,  <span class="hljs-number">5.2011e-01</span>],          [ <span class="hljs-number">4.6626e-02</span>,  <span class="hljs-number">5.6441e-01</span>,  <span class="hljs-number">5.7992e-01</span>,  ..., <span class="hljs-number">-1.9146e-01</span>,            <span class="hljs-number">3.9299e-01</span>,  <span class="hljs-number">2.9972e-01</span>]]]])In [<span class="hljs-number">19</span>]: res2 = fused(x)In [<span class="hljs-number">20</span>]: res2Out[<span class="hljs-number">20</span>]: tensor([[[[ <span class="hljs-number">3.7646e-01</span>,  <span class="hljs-number">7.3850e-01</span>, <span class="hljs-number">-1.1688e-03</span>,  ...,  <span class="hljs-number">4.6396e-01</span>,            <span class="hljs-number">5.1061e-01</span>,  <span class="hljs-number">7.1462e-02</span>],          [ <span class="hljs-number">1.0769e+00</span>,  <span class="hljs-number">1.2775e+00</span>,  <span class="hljs-number">5.5155e-01</span>,  ...,  <span class="hljs-number">1.2121e+00</span>,           <span class="hljs-number">-7.6443e-02</span>,  <span class="hljs-number">4.3850e-01</span>],          [ <span class="hljs-number">5.2745e-02</span>, <span class="hljs-number">-3.7510e-01</span>, <span class="hljs-number">-3.4277e-01</span>,  ..., <span class="hljs-number">-2.5618e-01</span>,           <span class="hljs-number">-7.3687e-01</span>, <span class="hljs-number">-2.6337e-01</span>],          ...,          [ <span class="hljs-number">3.1750e-01</span>,  <span class="hljs-number">2.7688e-01</span>, <span class="hljs-number">-7.8872e-01</span>,  ...,  <span class="hljs-number">4.0573e-01</span>,            <span class="hljs-number">2.3306e-01</span>, <span class="hljs-number">-6.2662e-01</span>],          [ <span class="hljs-number">7.0026e-01</span>, <span class="hljs-number">-1.9506e-01</span>,  <span class="hljs-number">5.6528e-01</span>,  ..., <span class="hljs-number">-1.3667e-01</span>,           <span class="hljs-number">-5.3669e-03</span>,  <span class="hljs-number">5.2011e-01</span>],          [ <span class="hljs-number">4.6626e-02</span>,  <span class="hljs-number">5.6441e-01</span>,  <span class="hljs-number">5.7992e-01</span>,  ..., <span class="hljs-number">-1.9146e-01</span>,            <span class="hljs-number">3.9299e-01</span>,  <span class="hljs-number">2.9972e-01</span>]]]])</code></pre><p>â€‹    è¿è¡Œä»£ç ï¼Œä¼šå‘ç°èåˆ conv å’Œ bn å±‚ä¹‹åæ¨ç†ç»“æœæ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥æ˜¯ç­‰æ•ˆæ›¿æ¢ã€‚å¦å¤–ä¹Ÿå¯ä»¥å¯¹æ¯”å‰åæ¨ç†æ—¶é—´çš„å·®å¼‚ï¼Œä¼šå‘ç°èåˆåæ¨ç†æ—¶é—´ä¼šå‡å°‘ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>network-pruning</title>
    <link href="/2020/11/24/network-pruning/"/>
    <url>/2020/11/24/network-pruning/</url>
    
    <content type="html"><![CDATA[<p>æ¨¡å‹å‰ªæçš„ç›¸å…³å·¥ä½œè®°å½•</p><a id="more"></a><p>â€‹        ç¥ç»ç½‘ç»œå‰ªææ˜¯æŒ‡è£å‡æ‰ç½‘ç»œä¸­å†—ä½™çš„èŠ‚ç‚¹æˆ–å‚æ•°ï¼Œå‡å°‘å‚æ•°é‡ï¼Œä»è€Œé™ä½æ¨¡å‹å¤æ‚åº¦ï¼Œ åŠ å¿«æ¨ç†é€Ÿåº¦ã€‚ LeCun äºä¸Šä¸–çºª 90å¹´ä»£é¦–æ¬¡æå‡ºå°†å‰ªæåº”ç”¨äºç¥ç»ç½‘ç»œçš„å‹ç¼©ï¼Œ å¹¶è®ºè¯å…¶æœ‰æ•ˆæ€§ã€‚ä¸€ä¸ªå…¸å‹çš„ç½‘ç»œå‰ªæè¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œ å…¶ä¸­æœ€é‡è¦çš„æ˜¯å¯¹èŠ‚ç‚¹æˆ–è€…å‚æ•°é‡è¦æ€§çš„è¯„ä¼°ã€‚</p><p><img src="/2020/11/24/network-pruning/2.png" style="zoom:50%;"></p><p>â€‹       å‰ªæå¯ä»¥åˆ†ä¸ºç»“æ„åŒ–å‰ªæå’Œéç»“æ„åŒ–å‰ªæã€‚åœ¨éç»“æ„åŒ–å‰ªæä¸­ï¼Œ ç›´æ¥å°†å‚æ•°ç½®é›¶ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå‰ªæï¼Œ é€šå¸¸éœ€è¦æ­é…ç‰¹å®šçš„ç¡¬ä»¶ã€‚ç»“æ„åŒ–å‰ªæåˆ™æ˜¯æŒ‡åœ¨ filter å±‚é¢ï¼Œé€šé“å±‚é¢ï¼Œæˆ–è€… shape å±‚é¢çš„å‰ªæï¼Œ ç›´æ¥åˆ é™¤ç›¸å…³å‚æ•°ï¼Œå¯ä»¥è¿è¡Œåœ¨é€šç”¨çš„ç¡¬ä»¶è®¾å¤‡ä¸Šã€‚ æœ¬æ–‡ä¸»è¦å…³æ³¨äºç»“æ„åŒ–å‰ªæçš„ç›¸å…³å·¥ä½œï¼Œè¾ƒä¸ºå…¸å‹çš„å·¥ä½œæ¢³ç†å¦‚ä¸‹ï¼š</p><h3 id="ä¸€-è§£å†³æ–¹æ¡ˆ"><a href="#ä¸€-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸€. è§£å†³æ–¹æ¡ˆ"></a>ä¸€. è§£å†³æ–¹æ¡ˆ</h3><h5 id="1-åŸºäºåº¦é‡"><a href="#1-åŸºäºåº¦é‡" class="headerlink" title="1. åŸºäºåº¦é‡"></a>1. åŸºäºåº¦é‡</h5><p>(1) åŸºäºæƒé‡</p><ul><li><p>Pruning Filters for Efficient ConvNets   ğŸŒŸ</p><p>ä»¥ Filter çš„ L1 norm ä½œä¸ºè¡¡é‡æ ‡å‡†</p></li><li><p>Filter pruning via geometric median for deep convolutional neural networks acceleration    ğŸŒŸ</p><p>ä»¥è·ç¦»å·ç§¯æ ¸çš„å‡ ä½•ä¸­å¿ƒçš„è¿œè¿‘ä½œä¸ºè¡¡é‡æ ‡å‡†ã€‚  å¯¹äºç¥ç»ç½‘ç»œä¸­çš„æŸä¸€å±‚ï¼Œè®¡ç®—æ‰€æœ‰ filter çš„å‡ ä½•ä¸­å¿ƒ (geometric median, GM)ï¼Œ è¯¥å‡ ä½•ä¸­å¿ƒé™„è¿‘çš„ filter å¯ä»¥è®¤ä¸ºæ˜¯å†—ä½™çš„ï¼Œ å¯ä»¥å°†å…¶ç§»é™¤ã€‚ </p></li><li><p>SFP Soft filter pruning</p><p>åˆ©ç”¨å·ç§¯æ ¸çš„ l2 norm ä½œä¸ºè¡¡é‡æ ‡å‡†ï¼Œ è¿›è¡Œè½¯å‰ªæ</p></li><li><p>Learning both Weights and Connections for Efficient Neural Networks  â€”â€” no structured prune: weight</p></li></ul><p>(2) feature map</p><ul><li><p>APoZ: Network trimming: A data-driven neuron pruning approach towards efficient deep architectures</p><p>ä½œè€…å®šä¹‰äº† APoZ(Average Percentage of Zeros) æ¥è¡¡é‡æ¯ä¸€ä¸ª filter ä¸­æ¿€æ´»ä¸º 0 çš„å€¼çš„æ•°é‡ï¼Œå¹¶ä»¥æ­¤ä½œä¸º filter æ˜¯å¦é‡è¦çš„æ ‡å‡†</p></li><li><p>HRank ğŸŒŸ</p><p>ä»¥ feature map çš„ç§©ä½œä¸ºè¡¡é‡æ ‡å‡†ã€‚ å¯¹ feature map æ±‚ç§©å¹¶è¿›è¡Œæ’åºï¼Œ ç§©è¶Šå°æ‰€å«ä¿¡æ¯é‡è¶Šå°ï¼Œå…¶é‡è¦æ€§è¶Šä½ã€‚æ ¹æ®ç§©çš„å¤§å°ç§»é™¤ feature map å¯¹åº”çš„å·ç§¯æ ¸ã€‚ æœ€åè¿›è¡Œå¾®è°ƒã€‚</p></li></ul><p>ï¼ˆ3ï¼‰loss func</p><ul><li><p>Pruning Convolutional Neural Networks for Resource Efficient Inference ZAS</p><p>è¯„æµ‹ä¿®å‰ªç½‘ç»œå‚æ•°å¼•èµ·çš„æŸå¤±å‡½æ•°çš„å˜åŒ–</p></li></ul><h5 id="2-åŸºäºé‡å»ºè¯¯å·®"><a href="#2-åŸºäºé‡å»ºè¯¯å·®" class="headerlink" title="2. åŸºäºé‡å»ºè¯¯å·®"></a>2. åŸºäºé‡å»ºè¯¯å·®</h5><ul><li>Channel pruning for accelerating very deep neural networks</li></ul><p>â€‹      è¡¡é‡æ ‡å‡†: é€šè¿‡æœ€å°åŒ–è£å‰ªåç‰¹å¾å›¾å’Œè£å‰ªå‰ç‰¹å¾å›¾ä¹‹é—´çš„è¯¯å·®</p><ul><li><p>ThiNet (Luo et al., 2017) ğŸŒŸ</p><p>è¡¡é‡æ ‡å‡†: ç”¨è¾“å…¥å­é›†ä»£æ›¿åŸæ¥çš„è¾“å…¥å¾—åˆ°è¾“å‡ºçš„ç›¸ä¼¼åº¦</p></li></ul><h5 id="3-ç¨€ç–åŒ–"><a href="#3-ç¨€ç–åŒ–" class="headerlink" title="3. ç¨€ç–åŒ–"></a>3. ç¨€ç–åŒ–</h5><ul><li>(SSL) Learning Structured Sparsity in Deep Neural Networks  <strong>ğŸŒŸ</strong></li></ul><p>â€‹       ä½¿ç”¨ group Lasso ç»™æŸå¤±å‡½æ•°åŠ å…¥ç›¸åº”çš„æƒ©ç½šï¼Œè¿›è¡Œç»“æ„åŒ–ç¨€ç–</p><ul><li><p>(Network Slimming)  l1 norm: bn gamma  <strong>ğŸŒŸ</strong></p><p>åˆ©ç”¨ BN å±‚ä¸­çš„ Î³ ä½œä¸ºç¼©æ”¾å› å­ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹å½“ä¸­æ¥è¡¡é‡ channel çš„é‡è¦æ€§ï¼Œå°†ä¸é‡è¦çš„ channel è¿›è¡Œåˆ å‡ï¼Œè¾¾åˆ°å‹ç¼©æ¨¡å‹å¤§å°ï¼Œæå‡è¿ç®—é€Ÿåº¦çš„æ•ˆæœã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå·¦è¾¹ä¸ºè®­ç»ƒå½“ä¸­çš„æ¨¡å‹ï¼Œä¸­é—´ä¸€åˆ—æ˜¯ scaling factorsï¼Œä¹Ÿå°±æ˜¯ BN å±‚å½“ä¸­çš„ç¼©æ”¾å› å­ Î³ï¼Œå½“ Î³ è¾ƒå°æ—¶(å¦‚å›¾ä¸­0.001, 0.003)ï¼Œæ‰€å¯¹åº”çš„ channel å°±ä¼šè¢«åˆ å‡ï¼Œå¾—åˆ°å³è¾¹æ‰€ç¤ºçš„æ¨¡å‹ã€‚ </p></li></ul><h5 id="4-prune-nas"><a href="#4-prune-nas" class="headerlink" title="4. prune + nas"></a>4. prune + nas</h5><ul><li><p>AMCï¼šAutoML for Model Compression and Acceleration on Mobile Devices  ğŸŒŸ</p><p>å°†å¼ºåŒ–å­¦ä¹ å¼•å…¥å‰ªæï¼Œä½¿ç”¨ nas è¿›è¡Œç½‘ç»œå‹ç¼©å’ŒåŠ é€Ÿ</p></li><li><p>AutoSlimï¼šTowards One-Shot Architecture Search for Channel Numbers </p><p>å…ˆè®­ç»ƒå‡ºä¸€ä¸ªslimmable æ¨¡å‹ï¼Œç„¶åé€šè¿‡è´ªå¿ƒçš„æ–¹å¼é€æ­¥å¯¹ç½‘ç»œè¿›è¡Œè£å‰ªã€‚</p></li><li><p>Network Pruning via Transformable Architecture Search</p><p>èåˆå¯å¾®åˆ†ç½‘ç»œè¿›è¡Œå‰ªæ</p></li><li><p>Approximated Oracle Filter Pruning for Destructive CNN Width Optimization </p><p>å¹³è¡Œæ“ä½œç½‘ç»œçš„æ‰€æœ‰å±‚ï¼Œç”¨äºŒåˆ†æœç´¢çš„æ–¹å¼ç¡®å®šæ¯å±‚çš„å‰ªææ•°ã€‚</p></li><li><p>Fine-Grained Neural Architecture Search</p><p>æŠŠNASçš„ç²’åº¦é™åˆ°äº†é€šé“</p></li></ul><h5 id="5-ç†è®ºæ€è€ƒå’Œæ€»ç»“"><a href="#5-ç†è®ºæ€è€ƒå’Œæ€»ç»“" class="headerlink" title="5. ç†è®ºæ€è€ƒå’Œæ€»ç»“"></a>5. ç†è®ºæ€è€ƒå’Œæ€»ç»“</h5><ul><li><p>Rethinking the value of network pruning   ğŸŒŸ</p><p>å‚æ•°ä¿®å‰ªçš„å®é™…ä½œç”¨åœ¨äºå¾—åˆ°ç½‘ç»œç»“æ„è€Œéæƒå€¼ã€‚å¯¹äºä¿®å‰ªåçš„æ¨¡å‹ï¼Œå¾®è°ƒå¾—åˆ°çš„æ•ˆæœå’Œé‡æ–°ä»å¤´è®­ç»ƒå‡ ä¹ç›¸åŒã€‚</p></li><li><p>The lottery ticket hypothesis: Finding sparse, trainable neural networks  ğŸŒŸ</p><p>(æœªå‰ªæçš„)å¤§å‹ç½‘ç»œåŒ…å«ä¸€ä¸ª(å‰ªæè·å¾—çš„)å°çš„å­ç½‘ç»œã€‚ å¦‚æœä»ä¸€å¼€å§‹å°±è®­ç»ƒè¿™ä¸ªå­ç½‘ç»œï¼Œä¸”åˆå§‹åŒ–æ•°å€¼ä¸€ä¸€å¯¹åº”åœ°å–è‡ªåŸç½‘ç»œçš„åˆå§‹åŒ–æ•°å€¼é›†åˆï¼Œ åˆ™ä¼šå¾—åˆ°å’ŒåŸå§‹ç½‘ç»œç›¸ä¼¼çš„å‡†ç¡®ç‡ã€‚ </p></li><li><p>Pruning from Scratch  ğŸŒŸ</p><p>åœ¨ç›¸åŒçš„è®¡ç®—å¼€æ”¯ä¸‹ï¼Œä»éšæœºåˆå§‹åŒ–çš„æƒé‡(scratch)ç›´æ¥è¿›è¡Œå‰ªæï¼Œä¹Ÿèƒ½è·å¾—è¾ƒé«˜æ€§èƒ½çš„æ¨¡å‹ã€‚è¯¥æ–‡æŠ›å¼ƒäº†ä¹‹å‰é¢„è®­ç»ƒã€å‰ªæã€fine-tune çš„å‰ªææµç¨‹ã€‚é™ä½äº†å¯¹é¢„è®­ç»ƒæ¨¡å‹çš„ä¾èµ–ï¼Œä¹Ÿä¿ƒä½¿äººä»¬é‡æ–°æ€è€ƒç½‘ç»œå‰ªæç°æœ‰æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚</p></li><li><p>What is the state of neural network pruning ?  ğŸŒŸ</p><p>å¯¹ç¥ç»ç½‘ç»œçš„ç›¸å…³è®ºæ–‡è¿›è¡Œå¯¹æ¯”åˆ†æï¼Œ å¹¶æå‡ºäº†å‰ªæå·¥ä½œçš„åŸºå‡† ShrinkBench ã€‚</p></li></ul><h5 id="6-ç®€å•åº”ç”¨"><a href="#6-ç®€å•åº”ç”¨" class="headerlink" title="6.ç®€å•åº”ç”¨"></a>6.ç®€å•åº”ç”¨</h5><p>(1) YOLO å‰ªæ: ä¸»è¦å‚è€ƒå¦‚ä¸‹ä¸¤ç¯‡è®ºæ–‡</p><ul><li><p>Learning Efficient Convolutional Networks through Network Slimming</p></li><li><p>Rethinking the Smaller-Norm-Less-Informative Assumption in Channel Pruning of Convolution Layers</p></li></ul><p>(2) GAN</p><ul><li><p>GAN Slimming: All-in-One GAN Compression by A Unified Optimization Framework</p></li><li><p>GAN Compression: Efficient Architectures for Interactive Conditional GANs</p></li></ul><h3 id="äºŒ-æ³¨æ„äº‹é¡¹ï¼š"><a href="#äºŒ-æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="äºŒ. æ³¨æ„äº‹é¡¹ï¼š"></a>äºŒ. æ³¨æ„äº‹é¡¹ï¼š</h3><ol><li>å‰ªè£ä¸€ä¸ªå·ç§¯å±‚çš„ filterï¼Œéœ€è¦ä¿®æ”¹åç»­å·ç§¯å±‚çš„ filter. å³å‰ªæ‰ $X<em>i$ çš„ä¸€ä¸ª filterï¼Œä¼šå¯¼è‡´ $X</em>{i+1}$ å°‘ä¸€ä¸ª channel,  $X<em>{i+1}$ å¯¹åº”çš„ filter åœ¨ input_channel ç»´åº¦ä¸Šä¹Ÿè¦å‡ 1ã€‚å‰ªè£å®Œ $X_i$ä¹‹åï¼Œåœ¨è®¡ç®— $X</em>{i+1}$ çš„ filters çš„ l1_norm  (ä¸‹å›¾ä¸­ç»¿è‰²ä¸€åˆ—)çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§é€‰æ‹©<ul><li>ç®—ä¸Šè¢«åˆ é™¤çš„ä¸€è¡Œï¼šindependent pruning </li><li>å‡å»è¢«åˆ é™¤çš„ä¸€è¡Œï¼šgreedy pruning</li></ul></li></ol><p><img src="/2020/11/24/network-pruning/5.png" style="zoom:45%;"></p><ol><li><p>åœ¨å¯¹ ResNet ç­‰å¤æ‚ç½‘ç»œå‰ªè£çš„æ—¶å€™ï¼Œè¿˜è¦è€ƒè™‘åˆ°åå½“å‰å·ç§¯å±‚çš„ä¿®æ”¹å¯¹ä¸Šä¸€å±‚å·ç§¯å±‚çš„å½±å“ã€‚åœ¨å¯¹ residual block å‰ªè£æ—¶ï¼Œ$X<em>{i+1}$ å±‚å¦‚ä½•å‰ªè£å–å†³äº project shortcut çš„å‰ªè£ç»“æœï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¿è¯ project shortcut çš„ output å’Œ $X</em>{i+1}$ çš„ output èƒ½è¢«æ­£ç¡®çš„ concat.</p><p><img src="/2020/11/24/network-pruning/6.png" style="zoom:45%;"></p></li></ol><h5 id="2-æ•æ„Ÿåº¦çš„ç†è§£å’Œè¿­ä»£å‰ªæ"><a href="#2-æ•æ„Ÿåº¦çš„ç†è§£å’Œè¿­ä»£å‰ªæ" class="headerlink" title="2. æ•æ„Ÿåº¦çš„ç†è§£å’Œè¿­ä»£å‰ªæ"></a>2. æ•æ„Ÿåº¦çš„ç†è§£å’Œè¿­ä»£å‰ªæ</h5><p><img src="/2020/11/24/network-pruning/4.png" style="zoom:50%;"></p><p>â€‹        å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¨ªåæ ‡æ˜¯å°† filter å‰ªè£æ‰çš„æ¯”ä¾‹ï¼Œç«–åæ ‡æ˜¯ç²¾åº¦ï¼Œæ¯æ¡å½©è‰²è™šçº¿è¡¨ç¤ºçš„æ˜¯ç½‘ç»œä¸­çš„ä¸€ä¸ªå·ç§¯å±‚ã€‚ ä»¥ä¸åŒçš„å‰ªè£æ¯”ä¾‹<strong>å•ç‹¬</strong>å‰ªè£ä¸€ä¸ªå·ç§¯å±‚ï¼Œå¹¶è§‚å¯Ÿå…¶åœ¨éªŒè¯æ•°æ®é›†ä¸Šçš„ç²¾åº¦æŸå¤±ï¼Œå¹¶ç»˜å‡ºå›¾ä¸­çš„è™šçº¿ã€‚è™šçº¿ä¸‹é™è¾ƒæ…¢çš„ï¼Œå¯¹åº”çš„å·ç§¯å±‚ç›¸å¯¹ä¸æ•æ„Ÿï¼Œæˆ‘ä»¬ä¼˜å…ˆä¿®å‰ªä¸æ•æ„Ÿçš„å·ç§¯å±‚çš„ filterã€‚</p><p>â€‹        è€ƒè™‘åˆ°å¤šä¸ªå·ç§¯å±‚é—´çš„ç›¸å…³æ€§ï¼Œä¸€ä¸ªå·ç§¯å±‚çš„ä¿®æ”¹å¯èƒ½ä¼šå½±å“å…¶å®ƒå·ç§¯å±‚çš„æ•æ„Ÿåº¦ï¼Œæˆ‘ä»¬é‡‡å–äº†å¤šæ¬¡å‰ªè£çš„ç­–ç•¥ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>step1ï¼šç»Ÿè®¡å„å·ç§¯å±‚çš„æ•æ„Ÿåº¦ä¿¡æ¯</li><li>step2: æ ¹æ®å½“å‰ç»Ÿè®¡çš„æ•æ„Ÿåº¦ä¿¡æ¯ï¼Œå¯¹æ¯ä¸ªå·ç§¯å±‚å‰ªæ‰å°‘é‡ filter,  å¹¶ç»Ÿè®¡ FLOPSï¼Œå¦‚æœ FLOPS å·²æ»¡è¶³è¦æ±‚ï¼Œè¿›å…¥ step4ï¼Œå¦åˆ™è¿›è¡Œstep3ã€‚</li><li>step3: å¯¹ç½‘ç»œè¿›è¡Œç®€å•çš„ fine-tuneï¼Œè¿›å…¥ step1</li><li>step4: fine-tuneè®­ç»ƒè‡³æ”¶æ•›</li></ul><h4 id="ä¸‰-å‚è€ƒèµ„æ–™"><a href="#ä¸‰-å‚è€ƒèµ„æ–™" class="headerlink" title="ä¸‰. å‚è€ƒèµ„æ–™"></a>ä¸‰. å‚è€ƒèµ„æ–™</h4><ul><li><a href="https://zhuanlan.zhihu.com/p/153496637">https://zhuanlan.zhihu.com/p/153496637</a>    </li><li><a href="https://github.com/coldlarry/YOLOv3-complete-pruning">https://github.com/coldlarry/YOLOv3-complete-pruning</a></li><li><a href="https://zhuanlan.zhihu.com/p/97198052">https://zhuanlan.zhihu.com/p/97198052</a></li><li><a href="https://blog.csdn.net/jinzhuojun/article/details/100621397">https://blog.csdn.net/jinzhuojun/article/details/100621397</a></li><li><a href="https://blog.csdn.net/wujianing_110117/article/details/105526241?utm_medium=distribute.pc_relevant.none-task-blog-title-6&amp;spm=1001.2101.3001.4242">https://blog.csdn.net/wujianing_110117/article/details/105526241?utm_medium=distribute.pc_relevant.none-task-blog-title-6&amp;spm=1001.2101.3001.4242</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>lightweight-cnn-architecture-design</title>
    <link href="/2020/11/15/lightweight-cnn-architecture-design/"/>
    <url>/2020/11/15/lightweight-cnn-architecture-design/</url>
    
    <content type="html"><![CDATA[<p>å¸¸è§çš„ç§»åŠ¨ç«¯æ¨¡å‹ï¼šmobilenet ç³»åˆ—å’Œ shufflenet ç³»åˆ—å’Œ GhostNetã€‚å¯¹äº MnasNetã€PorxylessNasã€FBNet ç­‰è½»é‡çº§æœç´¢æ¶æ„åˆ™ä¸æ¶‰åŠã€‚</p><a id="more"></a><h4 id="1-Mobilenet-v1"><a href="#1-Mobilenet-v1" class="headerlink" title="1. Mobilenet v1"></a>1. Mobilenet v1</h4><p>MobileNetæ¨¡å‹çš„æ ¸å¿ƒå°±æ˜¯<strong>å°†åŸæœ¬æ ‡å‡†çš„å·ç§¯æ“ä½œå› å¼åˆ†è§£æˆä¸€ä¸ªdepthwise convolutionå’Œä¸€ä¸ª1*1çš„å·ç§¯ï¼ˆæ–‡ä¸­å«pointwise convolutionï¼‰æ“ä½œã€‚ç®€å•è®²å°±æ˜¯å°†åŸæ¥ä¸€ä¸ªå·ç§¯å±‚åˆ†æˆä¸¤ä¸ªå·ç§¯å±‚ï¼Œå…¶ä¸­å‰é¢ä¸€ä¸ªå·ç§¯å±‚çš„æ¯ä¸ªfilter éƒ½åªè·Ÿ input çš„æ¯ä¸ª channel è¿›è¡Œå·ç§¯ï¼Œç„¶ååé¢ä¸€ä¸ªå·ç§¯å±‚åˆ™è´Ÿè´£ combiningï¼Œå³å°†ä¸Šä¸€å±‚å·ç§¯çš„ç»“æœè¿›è¡Œåˆå¹¶ã€‚ </strong></p><h5 id="å…·ä½“å®ç°ï¼š"><a href="#å…·ä½“å®ç°ï¼š" class="headerlink" title="å…·ä½“å®ç°ï¼š"></a>å…·ä½“å®ç°ï¼š</h5><p>(1) ä¼ ç»Ÿçš„å·ç§¯è®¡ç®—ï¼šå‡è®¾ M è¡¨ç¤º input çš„ channel ä¸ªæ•°ï¼ŒN è¡¨ç¤º output çš„ channel ä¸ªæ•°ï¼ˆä¹Ÿæ˜¯æœ¬å±‚çš„å·ç§¯æ ¸ä¸ªæ•°ï¼‰ã€‚å› æ­¤å¦‚æœå‡è®¾å·ç§¯æ ¸å¤§å°æ˜¯ <code>DK*DK*M*N</code>ï¼Œè¾“å‡ºæ˜¯ <code>DF*DF*N</code>ï¼Œé‚£ä¹ˆæ ‡å‡†å·ç§¯çš„è®¡ç®—é‡æ˜¯ <code>DK*DK*M*N*DF*DF</code>ã€‚å¦‚ä¸‹å›¾(a)æ‰€ç¤ºã€‚</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/1.png" alt="x" style="zoom:50%;"></p><ul><li><p>é¦–å…ˆä½¿ç”¨ <code>M</code> ä¸ª <code>Dk*Dk</code>çš„å·ç§¯æ ¸å¯¹è¾“å…¥( <code>M*DF*DF</code> )è¿›è¡Œå·ç§¯,è¿™é‡Œè¦æ³¨æ„çš„æ˜¯æ¯ä¸ª filter åªè·Ÿè¾“å…¥çš„ä¸€ä¸ªé€šé“è¿›è¡Œå·ç§¯(ä¹Ÿå°±æ˜¯è¯´ï¼Œå·ç§¯æ ¸çš„é€šé“æ•°ä¸º 1)ï¼Œå°†ä¸åŒå·ç§¯æ ¸çš„ç»“æœè¿›è¡Œç»„åˆï¼Œå¯ä»¥å¾—åˆ°å¤§å°ä¸ºï¼š<code>M*DF*DF</code>çš„è¾“å‡ºã€‚å…¶è®¡ç®—é‡ä¸º  <code>M*DK*DK*DF*DF</code>ã€‚(è¿™é‡Œä½¿ç”¨çš„ 3*3 çš„å·ç§¯æ ¸ï¼Œpadding ä¸º 1 )ã€‚å¦‚ä¸Šå›¾ (b) æ‰€ç¤ºã€‚</p></li><li><p>ç¬¬äºŒæ­¥æ˜¯å¯¹ä¹‹å‰çš„ <code>M*DF*DF</code> çš„è¾“å‡ºè¿›è¡Œå·ç§¯ï¼Œå·ç§¯æ ¸ä¸ºNä¸ª <code>1*1*M</code>  çš„å·ç§¯ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ°å¤§å° <code>N*DF*DF</code>  çš„è¾“å‡ºã€‚å…¶è®¡ç®—é‡ä¸º <code>1*1*N*M*DF*DF</code>ã€‚å¦‚ä¸Šå›¾ (c) æ‰€ç¤ºã€‚</p></li></ul><p>æ‰€ä»¥å…¶æ€»çš„è®¡ç®—é‡ç›¸æ¯”ä¼ ç»Ÿçš„å·ç§¯è®¡ç®—å‡å°‘äº†ï¼š</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/2.png" alt="x" style="zoom:50%;"></p><p>ï¼ˆ2ï¼‰æ ‡å‡†å·ç§¯ï¼ˆå·¦è¾¹ï¼‰å’Œå› å¼åˆ†è§£åçš„å·ç§¯ï¼ˆå³è¾¹ï¼‰çš„å·®åˆ«å¦‚ä¸‹æ‰€ç¤ºã€‚æ³¨æ„åˆ°å·ç§¯æ“ä½œåéƒ½ä¼šè·Ÿä¸€ä¸ªBatchnormå’ŒReLUæ“ä½œã€‚</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/3.png" alt="x" style="zoom:50%;"></p><p>â€‹      æ€»çš„æ¥è¯´ï¼Œç”±äºé‡‡ç”¨ depth-wise convolution ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¯¼è‡´ã€Œä¿¡æ¯æµé€šä¸ç•…ã€ï¼Œå³ <strong>è¾“å‡ºçš„ feature map ä»…åŒ…å«è¾“å…¥çš„ feature map çš„ä¸€éƒ¨åˆ†</strong>ï¼ŒMobileNet ç”¨ point-wise convolution è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨åæ¥ï¼ŒShuffleNet é‡‡ç”¨åŒæ ·çš„æ€æƒ³å¯¹ç½‘ç»œè¿›è¡Œæ”¹è¿›ï¼Œåªä¸è¿‡æŠŠ point-wise convolution æ¢æˆäº† channel shuffleã€‚</p><h4 id="2-Shufflenet-v1"><a href="#2-Shufflenet-v1" class="headerlink" title="2. Shufflenet v1"></a>2. Shufflenet v1</h4><p>â€‹    Shufflenet v1 ä¸»è¦é‡‡ç”¨ <strong>channel shuffleã€pointwise group convolutions å’Œ depthwise convolutionæ¥ä¿®æ”¹åŸæ¥çš„ResNetå•å…ƒ</strong>ã€‚ä»è€Œå¤§å¹…åº¦é™ä½æ·±åº¦ç½‘ç»œè®¡ç®—é‡ã€‚</p><ul><li>channel shuffleï¼šä¸åŒgroupçš„é€šé“è¿›è¡Œç»„åˆã€‚</li><li>pointwise group convolutionsï¼šå¸¦æœ‰ group çš„ 1 * 1 å·ç§¯ã€‚</li><li>depthwise convolutionsï¼šgroup ç­‰äºé€šé“æ•°çš„ç»„å·ç§¯ã€‚</li></ul><h5 id="å…·ä½“å®ç°ï¼š-1"><a href="#å…·ä½“å®ç°ï¼š-1" class="headerlink" title="å…·ä½“å®ç°ï¼š"></a>å…·ä½“å®ç°ï¼š</h5><p>ï¼ˆ1ï¼‰a å›¾æ˜¯ä¸€ä¸ªå¸¦æœ‰ depthwise convolution çš„resnet ç»“æœï¼Œæ‰€è°“çš„ depthwise convolution å¯ä»¥å‚è§</p><p>ï¼ˆ2ï¼‰a å›¾ â€”&gt; b å›¾ï¼Œç”¨å¸¦groupçš„ 1 <em> 1å·ç§¯(2ä¸ª)ä»£æ›¿åŸæ¥çš„1 </em> 1å·ç§¯ï¼ŒåŒæ—¶æ·»åŠ ä¸€ä¸ªchannel shuffle æ“ä½œã€‚</p><p>ï¼ˆ3ï¼‰b å›¾ â€”&gt; c å›¾ï¼Œæ·»åŠ äº†ä¸€ä¸ªæ­¥é•¿ä¸º2çš„ Average poolingï¼Œå°†Resnetæœ€åçš„Addæ“ä½œcæ”¹ä¸ºconcatæ“ä½œï¼Œä¹Ÿå°±æ˜¯æŒ‰channelåˆå¹¶ï¼Œç±»ä¼¼googleNetçš„Inceptionæ“ä½œã€‚</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/5.png" alt="x" style="zoom:38%;"></p><p>â€‹    shuffle å…·ä½“æ¥è¯´æ˜¯ channel shuffleï¼Œå°†å„éƒ¨åˆ†çš„ feature map çš„ channel è¿›è¡Œæœ‰åºçš„æ‰“ä¹±ï¼Œæ„æˆæ–°çš„ feature mapï¼Œä»¥è§£å†³ group convolution å¸¦æ¥çš„ã€Œä¿¡æ¯æµé€šä¸ç•…ã€é—®é¢˜ã€‚ï¼ˆMobileNet ç”¨ pointwise convolution è§£å†³ï¼‰å› æ­¤å¯çŸ¥é“ shuffle ä¸æ˜¯ä»€ä¹ˆç½‘ç»œéƒ½éœ€è¦ç”¨çš„ï¼Œæœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯é‡‡ç”¨äº† group convolutionã€‚é‡‡ç”¨ shuffle æ›¿æ¢æ‰ 1<em>1 å·ç§¯ï¼Œå¯ä»¥å‡å°‘æƒå€¼å‚æ•°ï¼Œè€Œä¸”æ˜¯å¤§é‡å‡å°‘ã€‚<em>*æ–‡ä¸­æåˆ°ä¸¤æ¬¡ï¼Œå¯¹äºå°å‹ç½‘ç»œï¼Œå¤šå¤šä½¿ç”¨é€šé“ä¼šæ¯”è¾ƒå¥½ã€‚æ‰€ä»¥ï¼Œä»¥åè‹¥æ¶‰åŠå°å‹ç½‘ç»œï¼Œå¯è€ƒè™‘å¦‚ä½•æå‡é€šé“ä½¿ç”¨æ•ˆç‡ã€‚</em></em></p><p>ShuffleNet V1 ä¸ Mobilenet V1çš„åŒºåˆ«ï¼š</p><ol><li>ä¸ MobileNet ä¸€æ ·é‡‡ç”¨äº† depth-wise convolutionï¼Œä½†æ˜¯é’ˆå¯¹ depth-wise convolution å¸¦æ¥çš„å‰¯ä½œç”¨â€”â€”ã€Œä¿¡æ¯æµé€šä¸ç•…ã€ï¼ŒShuffleNet ç”¨ channel shuffle æ¥è§£å†³ï¼ŒMobileNet ç”¨ point-wise convolution è§£å†³ã€‚</li><li>åœ¨ç½‘ç»œæ‹“æ‰‘æ–¹é¢ï¼ŒShuffleNet é‡‡ç”¨çš„æ˜¯ resnet çš„æ€æƒ³ï¼Œè€Œ mobielnet é‡‡ç”¨çš„æ˜¯ VGG çš„å †å æ€æƒ³ï¼ˆSqueezeNet ä¹Ÿæ˜¯é‡‡ç”¨ VGG æ€æƒ³ï¼‰ã€‚</li></ol><h4 id="3-Mobilenet-V2"><a href="#3-Mobilenet-V2" class="headerlink" title="3. Mobilenet V2"></a>3. Mobilenet V2</h4><h5 id="MobileNet-v2çš„ä¸»è¦è´¡çŒ®ï¼šInverted-Residual-å’Œ-Linear-Bottleneckã€‚å…·ä½“å®ç°ï¼š"><a href="#MobileNet-v2çš„ä¸»è¦è´¡çŒ®ï¼šInverted-Residual-å’Œ-Linear-Bottleneckã€‚å…·ä½“å®ç°ï¼š" class="headerlink" title="MobileNet v2çš„ä¸»è¦è´¡çŒ®ï¼šInverted Residual å’Œ Linear Bottleneckã€‚å…·ä½“å®ç°ï¼š"></a>MobileNet v2çš„ä¸»è¦è´¡çŒ®ï¼šInverted Residual å’Œ Linear Bottleneckã€‚å…·ä½“å®ç°ï¼š</h5><p>(1) <strong>æ·»åŠ  residual connection</strong>ã€‚</p><p>(2) <strong>é€šè¿‡ 1x1 å·ç§¯å…ˆæå‡é€šé“æ•°ï¼Œå†é€šè¿‡ depthwise çš„ 3x3 ç©ºé—´å·ç§¯ï¼Œå†ç”¨ 1x1 å·ç§¯é™ä½ç»´åº¦ã€‚ä½œè€…ç§°ä¹‹ä¸ºInverted residual blockï¼Œä¸¤è¾¹çª„ä¸­é—´å®½ï¼ŒåƒæŸ³å¶ï¼Œä»…ç”¨è¾ƒå°çš„è®¡ç®—é‡å°±èƒ½å¾—åˆ°è¾ƒå¥½çš„æ€§èƒ½</strong>ã€‚</p><p>(3) <strong>ä½¿ç”¨ReLU6æ›¿æ¢ä¼ ç»Ÿçš„ReLU,  å¹¶å°†æœ€åè¾“å‡ºçš„ ReLU6 å»æ‰ï¼Œç›´æ¥çº¿æ€§è¾“å‡º</strong>ã€‚</p><p>å¦‚ä¸‹å›¾æ˜¯ mobilenet v1ä¸ mobilenet v2 çš„å¯¹æ¯”å›¾ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼š</p><ul><li>v2åœ¨åŸæœ‰çš„ dw ä¹‹å‰åŠ äº†ä¸€ä¸ª pw ä¸“é—¨ç”¨æ¥å‡ç»´ã€‚è¿™ä¹ˆåšæ˜¯å› ä¸ºä¸èƒ½æ”¹å˜é€šé“æ•°é‡ï¼Œå…ˆåŠ  pw å‡ç»´åï¼Œdwå°±èƒ½åœ¨é«˜ç»´æç‰¹å¾äº†ã€‚</li><li>v2 æŠŠåŸæœ¬ dw ä¹‹åç”¨æ¥é™ç»´çš„ pw åçš„æ¿€æ´»å‡½æ•°ç»™å»æ‰äº†ã€‚è¿™ä¹ˆåšæ˜¯å› ä¸ºä»–è®¤ä¸ºéçº¿æ€§åœ¨é«˜ç»´æœ‰ç›Šå¤„ï¼Œä½†åœ¨ä½ç»´ï¼ˆä¾‹å¦‚pwé™ç»´åçš„ç©ºé—´ï¼‰ä¸å¦‚çº¿æ€§å¥½ã€‚<strong>ReLU ä¼šå¯¹ channel æ•°ä½çš„å¼ é‡é€ æˆè¾ƒå¤§çš„ä¿¡æ¯æŸè€—ã€‚ReLU ä¼šä½¿è´Ÿå€¼ç½®é›¶ï¼Œchannel æ•°è¾ƒä½æ—¶ä¼šæœ‰ç›¸å¯¹é«˜çš„æ¦‚ç‡ä½¿æŸä¸€ç»´åº¦çš„å¼ é‡å€¼å…¨ä¸º 0ï¼Œå³å¼ é‡çš„ç»´åº¦å‡å°äº†ï¼Œè€Œä¸”è¿™ä¸€è¿‡ç¨‹æ— æ³•æ¢å¤ã€‚</strong></li></ul><p><img src="/2020/11/15/lightweight-cnn-architecture-design/8.png" alt="x" style="zoom:50%;"></p><p>å¦‚ä¸‹å›¾æ˜¯ Resnet ä¸ mobilenet v2 çš„å¯¹æ¯”å›¾ã€‚å¯ä»¥çœ‹åˆ°ä¸¤è€…çš„ç»“æœå¾ˆç›¸ä¼¼ã€‚ä¸è¿‡ResNetæ˜¯å…ˆé™ç»´ï¼ˆ0.25å€ï¼‰ã€æç‰¹å¾ã€å†å‡ç»´ã€‚è€Œv2åˆ™æ˜¯å…ˆå‡ç»´ï¼ˆ6å€ï¼‰ã€æç‰¹å¾ã€å†é™ç»´ã€‚å¦å¤– v2 ä¹Ÿç”¨ DW ä»£æ›¿äº†æ ‡å‡†å·ç§¯æ¥åšç‰¹å¾æå–ã€‚why ? <strong>åŸå§‹çš„ ResNet block ä¹‹æ‰€ä»¥ 1x1 å·ç§¯é™é€šé“ï¼Œæ˜¯ä¸ºäº†å‡å°‘è®¡ç®—é‡ï¼Œä¸ç„¶ä¸­é—´çš„ 3x3 å·ç§¯è®¡ç®—é‡å¤ªå¤§ã€‚æ‰€ä»¥æ˜¯ä¸¤è¾¹å®½ä¸­é—´çª„çš„æ²™æ¼å½¢ã€‚ä½†ç°åœ¨ä¸­é—´çš„ 3x3 å·ç§¯ä¸º Depthwise çš„ï¼Œè®¡ç®—é‡å¾ˆå°‘äº†ï¼Œæ‰€ä»¥é€šé“å¤šä¸€ç‚¹æ•ˆæœæ›´å¥½ï¼Œæ‰€ä»¥é€šè¿‡ 1x1 å·ç§¯å…ˆæå‡é€šé“æ•°ã€‚</strong>ä¸¤ç«¯çš„é€šé“æ•°éƒ½å¾ˆå°ï¼Œæ‰€ä»¥ 1x1 å·ç§¯å‡é€šé“æˆ–é™é€šé“è®¡ç®—é‡éƒ½ä¸å¤§ï¼Œè€Œä¸­é—´é€šé“æ•°è™½ç„¶å¤šï¼Œä½† Depthwise çš„å·ç§¯è®¡ç®—é‡ä¹Ÿä¸å¤§ã€‚æ˜¯ä¸¤è¾¹çª„ä¸­é—´å®½çš„æŸ³å¶å½¢ã€‚</p><p>æ³¨ï¼šç¤ºæ„è¡¨è¾¾å¼çœç•¥äº†Shortcutã€‚</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/7.png" alt="x" style="zoom:50%;"></p><h4 id="4-shufflenet-V2"><a href="#4-shufflenet-V2" class="headerlink" title="4. shufflenet V2"></a>4. shufflenet V2</h4><h5 id="shufflenetV2-æå‡ºäº†ä¸€ç§channel-splitæ“ä½œ-1-å°†è¾“å…¥channelsåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ-2-ä¸€éƒ¨åˆ†ä¿æŒä¸å˜ï¼Œå¦ä¸€éƒ¨åˆ†ç”±ä¸‰ä¸ªå·ç§¯ç»„æˆ-3-å·ç§¯ä¹‹åï¼Œå°†ä¸¤éƒ¨åˆ†æ‹¼æ¥èµ·æ¥-4-æœ€ååœ¨é€šè¿‡channel-shuffleæ“ä½œæ¥ä¿æŒä¸¤ä¸ªåˆ†æ”¯é—´çš„ä¿¡æ¯äº¤æµã€‚"><a href="#shufflenetV2-æå‡ºäº†ä¸€ç§channel-splitæ“ä½œ-1-å°†è¾“å…¥channelsåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ-2-ä¸€éƒ¨åˆ†ä¿æŒä¸å˜ï¼Œå¦ä¸€éƒ¨åˆ†ç”±ä¸‰ä¸ªå·ç§¯ç»„æˆ-3-å·ç§¯ä¹‹åï¼Œå°†ä¸¤éƒ¨åˆ†æ‹¼æ¥èµ·æ¥-4-æœ€ååœ¨é€šè¿‡channel-shuffleæ“ä½œæ¥ä¿æŒä¸¤ä¸ªåˆ†æ”¯é—´çš„ä¿¡æ¯äº¤æµã€‚" class="headerlink" title="shufflenetV2 æå‡ºäº†ä¸€ç§channel splitæ“ä½œ, (1) å°†è¾“å…¥channelsåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ (2) ä¸€éƒ¨åˆ†ä¿æŒä¸å˜ï¼Œå¦ä¸€éƒ¨åˆ†ç”±ä¸‰ä¸ªå·ç§¯ç»„æˆ  (3) å·ç§¯ä¹‹åï¼Œå°†ä¸¤éƒ¨åˆ†æ‹¼æ¥èµ·æ¥ (4) æœ€ååœ¨é€šè¿‡channel shuffleæ“ä½œæ¥ä¿æŒä¸¤ä¸ªåˆ†æ”¯é—´çš„ä¿¡æ¯äº¤æµã€‚"></a><strong>shufflenetV2 æå‡ºäº†ä¸€ç§channel splitæ“ä½œ, (1) å°†è¾“å…¥channelsåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ (2) ä¸€éƒ¨åˆ†ä¿æŒä¸å˜ï¼Œå¦ä¸€éƒ¨åˆ†ç”±ä¸‰ä¸ªå·ç§¯ç»„æˆ  (3) å·ç§¯ä¹‹åï¼Œå°†ä¸¤éƒ¨åˆ†æ‹¼æ¥èµ·æ¥ (4) æœ€ååœ¨é€šè¿‡channel shuffleæ“ä½œæ¥ä¿æŒä¸¤ä¸ªåˆ†æ”¯é—´çš„ä¿¡æ¯äº¤æµã€‚</strong></h5><h5 id="å…·ä½“å®ç°ï¼š-2"><a href="#å…·ä½“å®ç°ï¼š-2" class="headerlink" title="å…·ä½“å®ç°ï¼š"></a>å…·ä½“å®ç°ï¼š</h5><p><strong>(1) åŸºæœ¬å•å…ƒ</strong></p><p>å¦‚ä¸‹å·¦å›¾æ‰€ç¤º</p><p>(1) åœ¨æ¯ä¸ªå•å…ƒçš„å¼€å§‹ï¼Œ<code>c</code> ç‰¹å¾é€šé“çš„è¾“å…¥è¢«åˆ†ä¸ºä¸¤æ”¯ï¼Œåˆ†åˆ«å¸¦æœ‰ <code>câˆ’c&#39;</code> å’Œ <code>c&#39;</code>ä¸ªé€šé“ã€‚</p><p>(2)  ä¸€ä¸ªåˆ†æ”¯ä»ç„¶ä¿æŒä¸å˜ã€‚å¦ä¸€ä¸ªåˆ†æ”¯ç”±ä¸‰ä¸ªå·ç§¯ç»„æˆï¼Œä»¤è¾“å…¥å’Œè¾“å‡ºé€šé“ç›¸åŒã€‚ä¸ ShuffleNet V1 ä¸åŒçš„æ˜¯ï¼Œä¸¤ä¸ª 1Ã—1 å·ç§¯ä¸å†æ˜¯ç»„å·ç§¯ã€‚æ˜¯å› ä¸ºåˆ†å‰²æ“ä½œå·²ç»äº§ç”Ÿäº†ä¸¤ä¸ªç»„ã€‚</p><p>(3) å·ç§¯ä¹‹åï¼ŒæŠŠä¸¤ä¸ªåˆ†æ”¯æ‹¼æ¥èµ·æ¥ï¼Œä»è€Œé€šé“æ•°é‡ä¿æŒä¸å˜ã€‚</p><p>(4) ç„¶åè¿›è¡Œä¸ ShuffleNet V1 ç›¸åŒçš„ã€ŒChannel Shuï¬„eã€æ“ä½œæ¥ä¿è¯ä¸¤ä¸ªåˆ†æ”¯é—´èƒ½è¿›è¡Œä¿¡æ¯äº¤æµã€‚ã€ŒShuffleã€ä¹‹åï¼Œä¸‹ä¸€ä¸ªå•å…ƒå¼€å§‹è¿ç®—ã€‚</p><p>æ³¨æ„ï¼Œ! Shuï¬„eNet V1 [15] ä¸­çš„ã€ŒåŠ æ³•ã€æ“ä½œä¸å†å­˜åœ¨ã€‚! åƒ ReLU å’Œæ·±åº¦å·ç§¯è¿™æ ·çš„æ“ä½œåªå­˜åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸­ã€‚å¦å¤–ï¼Œ! ä¸‰ä¸ªè¿ç»­çš„æ“ä½œã€Œæ‹¼æ¥ã€ã€ã€ŒChannel Shuï¬„eã€å’Œã€Œé€šé“åˆ†å‰²ã€åˆå¹¶æˆä¸€ä¸ªæ“ä½œã€‚</p><p><strong>ç©ºé—´ä¸‹é‡‡æ ·å•å…ƒï¼š</strong></p><p>å¯¹äºç©ºé—´ä¸‹é‡‡æ ·ï¼Œè¯¥å•å…ƒç»è¿‡ç¨å¾®ä¿®æ”¹ï¼Œè¯¦è§ä¸‹å›¾å³ï¼Œ é€šé“åˆ†å‰²è¿ç®—è¢«ç§»é™¤ã€‚å› æ­¤ï¼Œè¾“å‡ºé€šé“æ•°é‡ç¿»äº†ä¸€å€ã€‚</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/9.png" alt="x" style="zoom:50%;"></p><p>ShuffleNet V2 å¯¹é«˜æ•ˆçš„ç½‘ç»œæ¶æ„è®¾è®¡å¾—å‡ºäº† 4 ä¸ªå®ç”¨çš„æŒ‡å¯¼åŸåˆ™ï¼š</p><ol><li>å·ç§¯çš„è¾“å…¥é€šé“ c1 å’Œè¾“å‡ºé€šé“ c2 ç›¸åŒæ—¶ï¼Œæœ‰æœ€å°çš„å†…å­˜è®¿é—®æˆæœ¬ (MAC)</li><li>è¿‡å¤šçš„åˆ†ç»„å·ç§¯å¢åŠ  MACï¼ŒMAC éšç€ç»„æ•° g çš„å¢é•¿è€Œå¢åŠ </li><li>é™ä½ç½‘ç»œç»“æ„çš„ç ´ç¢ç¨‹åº¦ï¼ˆå‡å°‘åˆ†æ”¯ä»¥åŠæ‰€åŒ…å«çš„åŸºæœ¬å•å…ƒï¼‰ã€‚â€multi-pathâ€œç»“æ„ä½¿ç”¨è®¸å¤šç¢ç‰‡æ“ä½œç¬¦ï¼Œè™½ç„¶æœ‰åˆ©äºæé«˜ç²¾åº¦ï¼Œä½†å®ƒé™ä½äº†å¹¶è¡Œåº¦</li><li>å‡å°‘ element-wise æ“ä½œã€‚åŒ…æ‹¬ ReLUã€AddTensorã€AddBiasç­‰ã€‚å®ƒä»¬çš„ FLOPs è¾ƒå°ï¼Œä½† MAC ç›¸å¯¹è¾ƒå¤§</li></ol><p>ShuffleNet V2 çš„è®¾è®¡åŸåˆ™åŸºäºä»¥ä¸Šå››ç‚¹ï¼špointwise group å·ç§¯å’Œç“¶é¢ˆç»“æ„éƒ½å¢åŠ äº† MAC (1å’Œ2)ã€‚è¿™ä¸€æˆæœ¬æ˜¯ä¸å¯å¿½è§†çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹è½»é‡çš„æ¨¡å‹ã€‚æ­¤å¤–ï¼Œä½¿ç”¨å¤ªå¤šç»„è¿åäº† 3ã€‚ å¿«æ·è¿æ¥ä¸­çš„ element-wise Addâ€æ“ä½œä¹Ÿæ˜¯ä¸å¯å–çš„ (4)ã€‚å› æ­¤ï¼Œä¸ºäº†è¾¾åˆ°é«˜çš„æ¨¡å‹å®¹é‡å’Œæ•ˆç‡ï¼Œå…³é”®é—®é¢˜æ˜¯ä¿æŒåŒæ ·å®½çš„é€šé“ï¼Œæ—¢ä¸å¯†é›†å·ç§¯ï¼Œä¹Ÿä¸è¿‡å¤šç»„ã€‚</p><h4 id="5-MobileNet-V3"><a href="#5-MobileNet-V3" class="headerlink" title="5. MobileNet V3"></a>5. MobileNet V3</h4><p>â€‹    ç”¨ç¥ç»ç»“æ„æœç´¢ï¼ˆNASï¼‰æ¥å®Œæˆ V3ã€‚å‚è€ƒäº†ä¸‰ç§æ¨¡å‹ï¼šMobileNe tV1 çš„æ·±åº¦å¯åˆ†ç¦»å·ç§¯ã€MobileNet V2 çš„å…·æœ‰çº¿æ€§ç“¶é¢ˆçš„åå‘æ®‹å·®ç»“æ„ã€MnasNe+SE çš„è‡ªåŠ¨æœç´¢æ¨¡å‹ã€‚</p><p>ç›¸å…³æŠ€æœ¯ï¼š</p><ol><li>ç½‘ç»œçš„æ¶æ„ä¸ºåŸºäº <strong>NAS</strong> å®ç°çš„ MnasNetï¼ˆæ•ˆæœæ¯” MobileNet V2 å¥½ï¼‰ã€‚å€Ÿé‰´ä¸ Mnasnetï¼Œ ç›¸å¯¹äº mobilenet V2, V3 å¯ç”¨ 5Ã—5 çš„ deepwise å·ç§¯ã€‚</li><li>ç½‘ç»œç»“æ„æœç´¢ä¸­ï¼Œç»“åˆä¸¤ç§æŠ€æœ¯ï¼šèµ„æºå—é™çš„ NASï¼ˆplatform-aware NASï¼‰ä¸ NetAdaptã€‚</li><li>å¼•å…¥ MobileNet V1 çš„æ·±åº¦å¯åˆ†ç¦»å·ç§¯ã€MobileNet V2 çš„å…·æœ‰çº¿æ€§ç“¶é¢ˆçš„å€’æ®‹å·®ç»“æ„ã€SENet çš„ squeeze and excitation ç»“æ„ã€æ–°çš„æ¿€æ´»å‡½æ•° h-swishã€‚</li><li>ä¿®æ”¹ MobileNet V2 ç½‘ç»œç«¯éƒ¨æœ€åé˜¶æ®µä¸º 1x1 å·ç§¯ï¼Œå‡å°è®¡ç®—ã€‚ä½œè€…è®¤ä¸ºï¼Œ V2 æ¨¡å‹ä¸­çš„å€’æ®‹å·®ç»“æ„ä½¿ç”¨ 1Ã—1 å·ç§¯æ¥æ„å»ºæœ€åå±‚ï¼Œä»¥æ‰©å±•åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œå¯ä»¥æå–æ›´å¤šæ›´ä¸°å¯Œçš„ç‰¹å¾ï¼Œä½†åŒæ—¶ä¹Ÿå¼•å…¥äº†é¢å¤–çš„è®¡ç®—æˆæœ¬ä¸å»¶æ—¶ã€‚æ‰€ä»¥ï¼Œéœ€è¦åœ¨ä¿ç•™é«˜ç»´ç‰¹å¾çš„å‰æä¸‹å‡å°å»¶æ—¶ã€‚æ–¹æ³•æ˜¯å°† 1Ã—1 å±‚æ”¾åˆ°æœ€ç»ˆçš„å¹³å‡æ± åŒ–ä¹‹åã€‚è¿™æ ·çš„è¯æœ€åä¸€ç»„ç‰¹å¾ç”± <strong>avgpool 7x7</strong> å˜ä¸º <strong>pool 7x7+conv2d 1x1</strong>ã€‚</li></ol><p>ç»¼åˆä»¥ä¸Šï¼ŒV3 çš„ block ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/11.png" alt="x" style="zoom:60%;"></p><h4 id="6-ShuffleNetV2"><a href="#6-ShuffleNetV2" class="headerlink" title="6. ShuffleNetV2+"></a>6. ShuffleNetV2+</h4><p>æ²¡æœ‰ç›¸å…³è®ºæ–‡ï¼Œåªæ˜¯æ—·è§†æå‡ºçš„ä¸€ä¸ªç®€å•çš„ shufflenetv2 çš„åŠ å¼ºç‰ˆæœ¬ï¼Œ å‘å¸ƒåœ¨ github ä¸Šã€‚ä¸»è¦çš„æ“ä½œæ˜¯æ›¿æ¢å…¶ä¸­çš„æ¿€æ´»å‡½æ•°ä¸º h-swishï¼Œ å¹¶ä¸”æ·»åŠ äº† SE æ¨¡å—ã€‚</p><p>å‚è€ƒç½‘å€ï¼š<a href="https://github.com/megvii-model/ShuffleNet-Series/tree/master/ShuffleNetV2%2B">https://github.com/megvii-model/ShuffleNet-Series/tree/master/ShuffleNetV2%2B</a></p><h4 id="7-MobileNeXt"><a href="#7-MobileNeXt" class="headerlink" title="7. MobileNeXt"></a>7. MobileNeXt</h4><p>â€‹        æœ¬æ–‡ä¸»è¦é’ˆå¯¹MobileNetV2ä¸­å€’ç½®æ®‹å·®å—ï¼ˆinverted residual blockï¼‰çš„è®¾è®¡å’Œä¸è¶³è¿›è¡Œäº†åˆ†æï¼Œå¹¶åŸºäºåˆ†æç»“æœæå‡ºäº†æ–°é¢–çš„sandglassæ¨¡å—ï¼Œè¿™ç§è½»é‡çº§æ¨¡å—æœ‰åŸç”Ÿæ®‹å·®å—å’Œå€’ç½®æ®‹å·®å—çš„å½±å­ï¼Œæ˜¯ä¸€ç§æ­£å‘æ®‹å·®è®¾è®¡ã€‚</p><ul><li><p>åŸç”Ÿæ®‹å·®å—ç»„æˆï¼š1x1å·ç§¯ï¼ˆé™ç»´<strong>é™ä½æ¨¡å‹å¤æ‚åº¦</strong>ï¼‰ã€3x3å·ç§¯ï¼ˆç©ºé—´ä¿¡æ¯å˜æ¢ï¼‰ã€1x1å·ç§¯ï¼ˆå‡ç»´<strong>ç”¨äºå’Œ shortcut åˆ†æ”¯ç›¸åŠ </strong>ï¼‰</p></li><li><p>é€†æ®‹å·®å—ç»„æˆï¼š1x1å·ç§¯ï¼ˆå‡ç»´<strong>æå‡æ¨¡å‹æ•ˆæœ</strong>ï¼‰ã€3x3æ·±åº¦å¯åˆ†å·ç§¯ï¼ˆç©ºé—´ä¿¡æ¯å˜æ¢ï¼‰ã€1x1å·ç§¯ï¼ˆé™ç»´ï¼‰</p></li></ul><p>â€‹        æœ¬æ–‡ä½œè€…è®¤ä¸ºé€†æ®‹å·®æ¨¡å—ä¼šå‰Šå¼±æ¢¯åº¦è·¨å±‚ä¼ æ’­çš„èƒ½åŠ›ï¼Œå°†ç‰¹å¾ä»é«˜ç»´ç©ºé—´å‹ç¼©åˆ°ä½ç»´ç©ºé—´ï¼Œä¼šé€ æˆä¿¡æ¯ä¸¢å¤±ï¼ŒåŒæ—¶è¿™ä¹Ÿå®¹æ˜“å¼•èµ·æ¢¯åº¦æ··æ·†é—®é¢˜(ç‰¹æŒ‡æ¢¯åº¦æ¶ˆå¤±æˆ–æ¢¯åº¦çˆ†ç‚¸)ï¼Œä»è€Œå½±å“è®­ç»ƒçš„æ”¶æ•›å’Œæœ€ç»ˆæ¨¡å‹çš„æ€§èƒ½ã€‚æœ¬æ–‡æå‡ºçš„sandglassæ¨¡å—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/15.png" alt="x" style="zoom:35%;"></p><p>â€‹        sandglass æ¨¡å—æ˜¯åœ¨è½»é‡çº§çš„æ®‹å·®å—ä¸Šä¾æ®é€†æ®‹å·®å—æ‰€å­˜åœ¨çš„é—®é¢˜æ‰€æ”¹è¿›çš„ï¼ŒåŒæ—¶è¿™ä¸ªæ¨¡å—è¿˜ç”¨åˆ°äº†MobileNetV2ä¸­çš„çº¿æ€§ç“¶é¢ˆè®¾è®¡ï¼Œå³åªåœ¨ç¬¬ä¸€ä¸ª 3x3 å·ç§¯åè¾¹å’Œç¬¬äºŒä¸ª 1x1 å·ç§¯åè¾¹ä½¿ç”¨éçº¿æ€§æ¿€æ´»å‡½æ•° relu6ï¼Œå…¶ä»–å±‚åè¾¹ä½¿ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°(y=x), è¿™æœ‰åŠ©äºé¿å…é›¶åŒ–ç°è±¡çš„å‡ºç°ï¼Œè¿›è€Œå‡å°‘ä¿¡æ¯æŸå¤±</p><h4 id="8-xception"><a href="#8-xception" class="headerlink" title="8. xception"></a>8. xception</h4><p>Xception çš„ç»“æ„åŸºäº ResNetï¼Œä½†æ˜¯å°†å…¶ä¸­çš„å·ç§¯å±‚æ¢æˆäº† Separable Convolutionï¼ˆæè‡´çš„ Inceptionæ¨¡å—ï¼‰ã€‚ Xceptionï¼ˆæè‡´çš„ Inceptionï¼‰: å…ˆè¿›è¡Œ1x1 å·ç§¯æ“ä½œï¼Œå†å¯¹ 1Ã—1 å·ç§¯åçš„æ¯ä¸ªchannelåˆ†åˆ«è¿›è¡Œ 3Ã—3 å·ç§¯æ“ä½œï¼Œæœ€åå°†ç»“æœ concatï¼š</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/18.png" alt="x" style="zoom:35%;"></p><h4 id><a href="#" class="headerlink" title=" "></a> </h4><h4 id="9-efficinet-åŸç†"><a href="#9-efficinet-åŸç†" class="headerlink" title="9. efficinet åŸç†"></a>9. efficinet åŸç†</h4><p><strong>åŸè®ºæ–‡: EfficientNet: Rethinking Model Scaling for Convolutional Neural Networks ICML 2019</strong> </p><p><strong>åˆ©ç”¨å¤åˆç³»æ•°ç»Ÿä¸€ç¼©æ”¾æ¨¡å‹çš„æ‰€æœ‰ç»´åº¦ï¼Œè¾¾åˆ°ç²¾åº¦æœ€é«˜æ•ˆç‡æœ€é«˜ï¼Œç¬¦åˆç³»æ•°åŒ…æ‹¬ w, d, rï¼Œå…¶ä¸­ï¼Œwè¡¨ç¤ºå·ç§¯æ ¸å¤§å°ï¼Œå†³å®šäº†æ„Ÿå—é‡å¤§å°ï¼›dè¡¨ç¤ºç¥ç»ç½‘ç»œçš„æ·±åº¦ï¼›rè¡¨ç¤ºåˆ†è¾¨ç‡å¤§å°ã€‚</strong></p><p>æ–‡ä¸­æ€»ç»“äº†æˆ‘ä»¬å¸¸ç”¨çš„ä¸‰ç§ç½‘ç»œè°ƒèŠ‚æ–¹å¼ï¼š<strong>å¢å¤§æ„Ÿå—é‡wï¼Œå¢å¤§ç½‘ç»œæ·±åº¦dï¼Œå¢å¤§åˆ†è¾¨ç‡å¤§å°r</strong>ï¼Œä¸‰ç§æ–¹å¼ç¤ºæ„å›¾å¦‚ä¸‹ï¼šå…¶ä¸­ï¼Œ(a)ä¸ºåŸºçº¿ç½‘ç»œï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºå°ç½‘ç»œï¼›(b)ä¸ºå¢å¤§æ„Ÿå—é‡çš„æ–¹å¼æ‰©å±•ç½‘ç»œï¼›(c)ä¸ºå¢å¤§ç½‘ç»œæ·±åº¦dçš„æ–¹å¼æ‰©å±•ç½‘ç»œï¼›(d)ä¸ºå¢å¤§åˆ†è¾¨ç‡rçš„æ–¹å¼æ‰©å±•ç½‘ç»œï¼›(e)ä¸ºæœ¬æ–‡æ‰€æå‡ºçš„æ··åˆå‚æ•°æ‰©å±•æ–¹å¼ï¼›</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/19.png" alt="x" style="zoom:75%;"></p><p><strong>å¤åˆç³»æ•°çš„æ•°å­¦æ¨¡å‹</strong></p><p>æ–‡ä¸­ç»™å‡ºäº†ä¸€èˆ¬å·ç§¯çš„æ•°å­¦æ¨¡å‹å¦‚ä¸‹ï¼š</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/20.png" alt="x" style="zoom:100%;"></p><p>å…¶ä¸­ H, Wä¸ºå·ç§¯æ ¸å¤§å°ï¼ŒCä¸ºé€šé“æ•°ï¼ŒXä¸ºè¾“å…¥tensorã€‚ åˆ™å¤åˆç³»æ•°çš„ç¡®å®šè½¬ä¸ºå¦‚ä¸‹çš„ä¼˜åŒ–é—®é¢˜ï¼š</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/21.png" alt="x" style="zoom:100%;"></p><p>è°ƒèŠ‚ d, w, r ä½¿å¾—æ»¡è¶³å†…å­˜Memoryå’Œæµ®ç‚¹æ•°é‡éƒ½å°äºé˜ˆå€¼è¦æ±‚ï¼› ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼Œæ–‡ä¸­æå‡ºäº†å¦‚ä¸‹çš„æ–¹æ³•ï¼š</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/22.png" alt="x" style="zoom:100%;"></p><p>å¯¹äºè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸‹ä¸¤æ­¥æ¥ç¡®å®šd, w, rå‚æ•°ï¼š ç¬¬ä¸€æ­¥æ˜¯å›ºå®šÎ¦=1ï¼Œç„¶åé€šè¿‡ç½‘æ ¼æœç´¢æ‰¾åˆ°æ»¡è¶³å…¬å¼3çš„æœ€ä¼˜Î±ã€Î²ã€Î³ï¼Œæ¯”å¦‚å¯¹äºEfficientNet-B0ç½‘ç»œè€Œè¨€ï¼Œæœ€ä½³çš„å‚æ•°åˆ†åˆ«æ˜¯Î±=1.2ã€Î²=1.1ã€Î³=1.15ï¼ˆæ­¤æ—¶å¾—åˆ°çš„ä¹Ÿå°±æ˜¯EfficientNet-B1ï¼‰ã€‚ç¬¬äºŒæ­¥æ˜¯å›ºå®šç¬¬ä¸€æ­¥æ±‚å¾—çš„Î±ã€Î²ã€Î³å‚æ•°ï¼Œç„¶åç”¨ä¸åŒçš„Î¦å‚æ•°å¾—åˆ°EfficientNet-B1åˆ°EfficientNet-B7ç½‘ç»œã€‚</p><h4 id="10-GhostNet"><a href="#10-GhostNet" class="headerlink" title="10. GhostNet"></a>10. GhostNet</h4><h5 id="1-å‡ºå‘ç‚¹ï¼š"><a href="#1-å‡ºå‘ç‚¹ï¼š" class="headerlink" title="(1) å‡ºå‘ç‚¹ï¼š"></a>(1) å‡ºå‘ç‚¹ï¼š</h5><p>â€‹      é€šè¿‡å¯¹æ¯”åˆ†æ ResNet-50 ç½‘ç»œç¬¬ä¸€ä¸ªæ®‹å·®ç»„( Residual group )è¾“å‡ºçš„ç‰¹å¾å›¾å¯è§†åŒ–ç»“æœï¼Œå‘ç°ä¸€äº›ç‰¹å¾å›¾é«˜åº¦ç›¸ä¼¼ã€‚å¦‚æœæŒ‰ç…§ä¼ ç»Ÿçš„æ€è€ƒæ–¹å¼ï¼Œå¯èƒ½è®¤ä¸ºè¿™äº›ç›¸ä¼¼çš„ç‰¹å¾å›¾å­˜åœ¨å†—ä½™ï¼Œæ˜¯å¤šä½™ä¿¡æ¯ï¼Œæƒ³åŠæ³•é¿å…äº§ç”Ÿè¿™äº›é«˜åº¦ç›¸ä¼¼çš„ç‰¹å¾å›¾ã€‚æœ¬æ–‡çš„æ€è·¯æ˜¯<strong>ä¸å»åˆ»æ„çš„é¿å…äº§ç”Ÿè¿™ç§Ghostå¯¹ï¼Œè€Œæ˜¯å°è¯•åˆ©ç”¨ç®€å•çš„çº¿æ€§æ“ä½œæ¥è·å¾—æ›´å¤šçš„Ghostå¯¹ã€‚</strong></p><p>å…¶åŸºæœ¬æ“ä½œå¦‚ä¸‹ï¼š</p><ul><li>ä½¿ç”¨å¸¸è§„å·ç§¯(è¿™é‡Œä½¿ç”¨çš„ conv1x1)æ¥è·å¾—æœ¬å¾ç‰¹å¾å±‚ã€‚</li><li>é€šè¿‡ä¸€ä¸ªçº¿æ€§æ“ä½œ(è¿™é‡Œä½¿ç”¨çš„æ˜¯ depthwise æ“ä½œ)å¯¹æœ¬å¾ç‰¹å¾å±‚è¿›è¡Œçº¿æ€§å˜åŒ–ï¼Œè·å¾— ghost ç‰¹å¾å±‚ã€‚</li><li>å°† ghost ç‰¹å¾å±‚å’Œ ghost ç‰¹å¾å±‚è¿›è¡Œæ‹¼æ¥ã€‚</li></ul><p><img src="/2020/11/15/lightweight-cnn-architecture-design/13.png" alt="x" style="zoom:50%;"></p><p>é€šè¿‡å°† ResNet ä¸­çš„ Residual Block ä¸­çš„å·ç§¯æ“ä½œç”¨ Ghost Module æ›¿æ¢å°±å¯ä»¥å¾—åˆ° Ghost BottleNeckã€‚å›¾ä¸‹å›¾æ‰€ç¤º:</p><p><img src="/2020/11/15/lightweight-cnn-architecture-design/14.png" style="zoom:50%;"></p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><ul><li><p>å…³äºç½‘ç»œç»“æ„çš„å˜è¿ï¼Œ å¦‚ä¸‹å›¾æ‰€ç¤º(æ‰€æœ‰ conv å±‚ä¹‹åï¼Œéƒ½ä½¿ç”¨äº† BN å±‚ï¼Œ ä¸” BN å±‚åœ¨æ¿€æ´»å‡½æ•°ä¹‹å‰)</p><ul><li>mobilenet v1 å°†æ™®é€šå·ç§¯åˆ†è§£ä¸º  DepthWise å’Œ PointWise ä¸¤ä¸ªæ“ä½œ</li><li>shufflenet v1 å¼•å…¥ channel shuffle æ“ä½œï¼Œåˆæ­¥å½¢æˆ GConv + shuffle + DW + GConv çš„å·ç§¯ç»„åˆ</li><li>mobilenet v2 å¼•å…¥äº† é€†æ®‹å·®æ¨¡å—ï¼Œ æ­¤æ—¶çš„å½¢æˆäº† PW+DW+PW çš„ç»„åˆã€‚ æ³¨æ„è¿™é‡Œæœ€åä¸€ä¸ª PW ä½¿ç”¨çº¿æ€§å‡½æ•°</li><li>shufflent v2 å¼•å…¥äº† channels split æ“ä½œï¼Œ å¹¶å°† concat + shuffle + split è¿›è¡Œåˆå¹¶</li></ul></li></ul><p><img src="/2020/11/15/lightweight-cnn-architecture-design/17.png" alt></p><ul><li><p>ä¸€äº›å°ç»éªŒ</p><ul><li>ä½¿ç”¨ DW å’Œ PW è¿›è¡ŒåŠ é€Ÿæ˜¯å¸¸è§„æ“ä½œï¼Œ ä½†æ˜¯å¯¹ DWå’Œ PW çš„é¡ºåºè¿˜éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢ã€‚ï¼ˆæ¯”å¦‚ mobilenext åˆ™ä½¿ç”¨äº† DW + PW + PW+ DW çš„ç»„åˆå½¢å¼ï¼‰</li><li><strong>MobileNetV2çš„å€’ç½®æ®‹å·®æ¨¡å— + SE block + H-swish æ˜¯ä¸€ä¸ªå±¡è¯•ä¸çˆ½çš„ç»„åˆ</strong>ï¼Œè™½ç„¶é€Ÿåº¦ä¼šæœ‰æ‰€æŸå¤±ã€‚</li><li><strong>æ¿€æ´»å‡½æ•°çš„æ”¾ç½®ä½ç½®è¿˜æ²¡æœ‰å®šè®º</strong>ï¼ˆè™½ç„¶ mobilenet v2 è¿›è¡Œäº†æ¢ç´¢ï¼Œæå‡ºäº†çº¿æ€§ç“¶é¢ˆï¼‰</li><li>æœ‰ä¸€äº›ç½‘ç»œ(ghostnet å’Œ bsconv ) æå‡ºäº†<strong>å¯¹å·ç§¯æ ¸/ç‰¹å¾å±‚çš„å†—ä½™è¿›è¡Œæ¢ç´¢åˆ†æ</strong>ï¼Œä»è€Œé™ä½è¿ç®—é‡ï¼Œ è¿™ä¹Ÿç®—ä¸€ä¸ªæ–¹å‘ã€‚</li></ul></li><li><p>ä¸€äº›å¯¹äºè½»é‡çº§æ£€æµ‹å’Œåˆ†å‰²ç½‘ç»œçš„æ¢ç´¢ï¼š è½»é‡çº§æ£€æµ‹çš„æ ¸å¿ƒé—®é¢˜è¿˜æ˜¯ä½å±‚ç‰¹å¾å’Œé«˜å±‚ç‰¹å¾çš„èåˆé—®é¢˜ï¼Œåœ¨ backbone é€šå¸¸é€‰æ‹©ä¸Šé¢çš„ è½»é‡çº§åˆ†ç±»ç½‘ç»œï¼š</p><ul><li>Pelee: A Real-Time Object Detection System on Mobile Devices</li><li>Tiny-dsod: Lightweight object detection for resource-restricted usages.</li><li>Light-head R-cnn: In defense of two-stage object detector</li><li>ThunderNet: Towards Real-time Generic Object Detection</li><li><p>NanoDet</p></li><li><p>BiSeNetï¼ˆåˆ†å‰²ï¼‰</p></li><li>DFANetï¼ˆåˆ†å‰²ï¼‰</li></ul></li><li><p>MIT Han Lab åœ¨æ¨¡å‹å‹ç¼©å’ŒåŠ é€Ÿæ–¹å‘åšäº†å¾ˆå¤šæ¢ç´¢æ€§çš„å·¥ä½œï¼Œ å¯ä»¥é‡ç‚¹å…³æ³¨ã€‚</p></li><li><p>nas åœ¨ç›¸å…³é¢†åŸŸä¸€åº¦å¾ˆç«ï¼Œè¯ç”Ÿäº† MnasNetã€PorxylessNasã€FBNet  ç­‰å·¥ä½œã€‚ä½†æ˜¯ç”±äºéœ€è¦èµ„æºè¾ƒå¤šç­‰åŸå› ï¼Œä¸€ç›´æœªåŠ å°è¯•ã€‚</p></li></ul><h4 id="å‚è€ƒè®ºæ–‡ï¼š"><a href="#å‚è€ƒè®ºæ–‡ï¼š" class="headerlink" title="å‚è€ƒè®ºæ–‡ï¼š"></a>å‚è€ƒè®ºæ–‡ï¼š</h4><ul><li><p>SqueezeNet: AlexNet-level accuracy with 50x fewer parameters and &lt;0.5MB model size.</p></li><li><p>MobileNets: Efficient Convolutional Neural Networks for Mobile Vision Applications</p></li><li><p>MobileNetV2: Inverted Residuals and Linear Bottlenecks</p></li><li><p>Searching for MobileNetV3(nas for efficient conv neural network) </p></li><li><p>ShuffleNet: An Extremely Efficient Convolutional Neural Network for Mobile Devices</p></li><li><p>ShuffleNet V2: Practical Guidelines for Ecient CNN Architecture Design </p></li><li><p>Xception: Deep Learning with Depthwise Separable Convolutions</p></li></ul><p>mobilent é€†æ®‹å·®ç»“æ„çš„å®ç°ï¼š</p><pre><code class="hljs python"><span class="hljs-comment"># Mobilenet V2</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InvertedResidual</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, inp, oup, stride, expand_ratio</span>):</span>        super(InvertedResidual, self).__init__()        self.stride = stride        self.use_res_connect = self.stride == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> inp == oup        self.conv = nn.Sequential(            <span class="hljs-comment"># pw</span>            nn.Conv2d(inp, inp * expand_ratio, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, bias=<span class="hljs-literal">False</span>),            nn.BatchNorm2d(inp * expand_ratio),            nn.ReLU6(inplace=<span class="hljs-literal">True</span>),            <span class="hljs-comment"># dw</span>            nn.Conv2d(inp * expand_ratio, inp * expand_ratio, <span class="hljs-number">3</span>, stride, <span class="hljs-number">1</span>, groups=inp * expand_ratio, bias=<span class="hljs-literal">False</span>),            nn.BatchNorm2d(inp * expand_ratio),            nn.ReLU6(inplace=<span class="hljs-literal">True</span>),            <span class="hljs-comment"># pw-linear</span>            nn.Conv2d(inp * expand_ratio, oup, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, bias=<span class="hljs-literal">False</span>),            nn.BatchNorm2d(oup),        )    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>        <span class="hljs-keyword">if</span> self.use_res_connect:            <span class="hljs-keyword">return</span> x + self.conv(x)        <span class="hljs-keyword">else</span>:            <span class="hljs-keyword">return</span> self.conv(x)</code></pre>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>img2col</title>
    <link href="/2020/11/13/img2col/"/>
    <url>/2020/11/13/img2col/</url>
    
    <content type="html"><![CDATA[<h4 id="1-im2col-åŸºæœ¬åŸç†"><a href="#1-im2col-åŸºæœ¬åŸç†" class="headerlink" title="1. im2col åŸºæœ¬åŸç†"></a>1. im2col åŸºæœ¬åŸç†</h4><p><strong>(1) å¯¹äºå›¾åƒçš„å˜æ¢ï¼š</strong></p><p>é¦–å…ˆå°†æ¯ä¸ªå·ç§¯æ‰€å·ç§¯çš„åŒºåŸŸä½œä¸ºä¸€è¡Œï¼Œæ‰€æœ‰çš„å·ç§¯åŒºåŸŸçºµå‘æ’åˆ—ï¼Œä½œä¸ºå³ä¹˜çŸ©é˜µã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¤šä¸ªé€šé“åº”è¯¥å †å åœ¨ä¸‹é¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>å•é€šé“ï¼š</p><p><img src="/2020/11/13/img2col/1.jpeg" alt="img"></p><p>å¤šé€šé“ï¼š</p><p><img src="/2020/11/13/img2col/2.jpeg" alt="img"></p><p><strong>è¾“å…¥ç‰¹å¾å›¾è½¬åŒ–å¾—åˆ°çš„çŸ©é˜µå°ºåº¦ = (å·ç§¯ç»„è¾“å…¥é€šé“æ•°*å·ç§¯æ ¸é«˜*å·ç§¯æ ¸å®½) * (å·ç§¯å±‚è¾“å‡ºå•é€šé“ç‰¹å¾å›¾é«˜ * å·ç§¯å±‚è¾“å‡ºå•é€šé“ç‰¹å¾å›¾å®½)</strong></p><p><strong>(2) å¯¹äºå·ç§¯æ ¸çš„å˜æ¢</strong></p><p>å°†ä¸€ä¸ªå·ç§¯æ ¸æ‹‰ä¼¸ä¸ºä¸€ä¸ªæ¨ªè¡Œï¼Œä½œä¸ºå·¦ä¹˜çŸ©é˜µï¼š(ä¸ºä»€ä¹ˆè¦æ‹‰ä¼¸ä¸ºæ¨ªè¡Œï¼Œåœ¨äºå¯¹åº”çš„å·ç§¯åŒºåŸŸæ‹‰ä¼¸ä¸ºç«–è¡Œï¼Œè¿™æ ·æ‰èƒ½ä¸ä¹‹ç›¸å¯¹åº”ï¼Œè¿›è¡ŒçŸ©é˜µä¹˜æ³•)</p><p><img src="/2020/11/13/img2col/3.jpeg" alt="img"></p><p><strong>æƒå€¼çŸ©é˜µå°ºåº¦ = (è¾“å‡ºå±‚é€šé“æ•°) * (å·ç§¯è¾“å…¥é€šé“æ•°*å·ç§¯æ ¸é«˜*å·ç§¯æ ¸å®½)</strong></p><p><strong>(3) å°†å·ç§¯æ ¸çŸ©é˜µæ ¸å›¾åƒçŸ©é˜µç›¸ä¹˜å³å¯</strong></p><p><img src="/2020/11/13/img2col/4.jpeg" alt="img"></p><p><strong>å·ç§¯å±‚è¾“å‡ºå°ºåº¦ = (å·ç§¯å±‚è¾“å‡ºé€šé“æ•°) * (å·ç§¯å±‚è¾“å‡ºå•é€šé“ç‰¹å¾å›¾é«˜ * å·ç§¯å±‚è¾“å‡ºå•é€šé“ç‰¹å¾å›¾å®½)</strong></p><p>æœ€åéœ€è¦å°†ç»“æœè°ƒæ•´æˆä¸ºéœ€è¦çš„å¤§å°ï¼š </p><p><img src="/2020/11/13/img2col/5.jpeg" alt="img"></p><p><strong>(4) å¯¹äºå¤šä¸ªè¾“å‡ºé€šé“å›¾åƒçš„å·ç§¯</strong></p><p>åº”è¯¥çºµå‘å †å æ¯ä¸ªå·ç§¯å±‚</p><p><img src="/2020/11/13/img2col/6.jpeg" alt="img"></p><p>æœ€åå†è°ƒæ•´è¾“å‡ºçŸ©é˜µï¼š</p><p><img src="/2020/11/13/img2col/7.jpeg" alt="img"></p><h4 id="2-æ€»ä½“ç®€å›¾ï¼š"><a href="#2-æ€»ä½“ç®€å›¾ï¼š" class="headerlink" title="2. æ€»ä½“ç®€å›¾ï¼š"></a>2. æ€»ä½“ç®€å›¾ï¼š</h4><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ•´ä½“çŸ©é˜µä¹˜æ³•çš„ç®€å›¾ï¼š</p><p><img src="/2020/11/13/img2col/8.jpeg" alt="img"></p><h4 id="3-im2col-cpu-æºç å‰–æ"><a href="#3-im2col-cpu-æºç å‰–æ" class="headerlink" title="3. im2col_cpu æºç å‰–æ"></a>3. im2col_cpu æºç å‰–æ</h4><p>im2col_cpuå‡½æ•°å°†å·ç§¯å±‚è¾“å…¥è½¬åŒ–ä¸ºçŸ©é˜µç›¸ä¹˜çš„å³å…ƒï¼Œæ ¸å¿ƒæ˜¯5ä¸ªforå¾ªç¯ï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªforå¾ªç¯è¡¨ç¤ºæŒ‰ç…§è¾“å…¥çš„é€šé“æ•°é€ä¸ªå¤„ç†å·ç§¯å±‚è¾“å…¥çš„ç‰¹å¾å›¾ï¼Œä¸‹é¢ç¬”è€…å°†ç”¨å›¾ç¤ºè¡¨ç¤ºå‰©ä½™çš„å››ä¸ªforå¾ªç¯æ“ä½œï¼Œå‘è¯»è€…æœ‹å‹ä»¬å±•ç¤ºå·ç§¯å±‚è¾“å…¥çš„å•é€šé“ç‰¹å¾å›¾æ˜¯é€šè¿‡æ€æ ·çš„æ–¹å¼è½¬åŒ–ä¸ºä¸€ä¸ªçŸ©é˜µã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å‡è®¾ï¼Œå·ç§¯å±‚è¾“å…¥å•é€šé“ç‰¹å¾å›¾åŸå¤§å°ä¸º5*5ï¼Œé«˜å’Œå®½æ–¹å‘çš„padä¸º1ï¼Œé«˜å’Œå®½æ–¹å‘æ­¥é•¿ä¸º2ï¼Œå·ç§¯æ ¸ä¸è¿›è¡Œæ‰©å±•ã€‚</p><p>  æˆ‘ä»¬å…ˆè®¡ç®—ä¸€ä¸‹ï¼Œå·ç§¯å±‚è¾“å…¥å•é€šé“ç‰¹å¾å›¾è½¬åŒ–å¾—åˆ°çš„çŸ©é˜µçš„å°ºåº¦ï¼ŒçŸ©é˜µçš„è¡Œæ•°åº”è¯¥ä¸ºå·ç§¯æ ¸é«˜<em>å·ç§¯æ ¸å®½ï¼Œå³ä¸º9ï¼Œåˆ—æ•°åº”è¯¥ä¸ºå·ç§¯å±‚è¾“å‡ºç‰¹å¾å›¾é«˜(output_h)</em>å·ç§¯å±‚è¾“å‡ºç‰¹å¾å›¾å®½(output_w)ï¼Œä¹Ÿä¸º9ï¼Œé‚£ä¹ˆï¼Œim2colç®—æ³•èµ·å§‹ç”±ä¸‹å›¾å¼€å§‹ï¼š</p><p><img src="/2020/11/13/img2col/11.png" alt></p><p>é¦–å…ˆkernel_rowä¸º0ï¼Œkernel_colä¹Ÿä¸º0ã€‚æŒ‰ç…§input_row = -pad_h + kernel_row * dilation_hè®¡ç®—input_rowçš„å€¼ï¼Œåœ¨è¿™é‡Œï¼Œpad_hä¸º1ï¼Œkernel_rowä¸º0ï¼Œdilation_hä¸º1ï¼Œè®¡ç®—å‡ºinput_rowä¸º-1ï¼Œæ­¤æ—¶output_rowä¸º3ï¼Œæ»¡è¶³å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªifæ¡ä»¶ï¼Œé‚£ä¹ˆåœ¨è¾“å‡ºå›¾åƒä¸Šå…ˆç½®output_wä¸ªé›¶ï¼Œå› ä¸ºoutput_wä¸º3ï¼Œå› æ­¤å¾—åˆ°ä¸‹å›¾ï¼š</p><p><img src="/2020/11/13/img2col/12.png" alt></p><p> ç„¶åinput_rowåŠ ä¸Šæ­¥é•¿2ï¼Œç”±-1å˜æˆ1ï¼Œæ­¤æ—¶output_rowsä¸º2ï¼Œè®¡ç®—input_colç­‰äº-1ï¼Œæ­¤æ—¶æ‰§è¡Œinput_colå®šä¹‰ä¸‹é¢çš„forå¾ªç¯ï¼Œå¾—åˆ°3ä¸ªå€¼ï¼šä¾æ¬¡å¾€ç›®æ ‡çŸ©é˜µä¸­å¡«å…¥0ï¼Œdata_im[1*5+1]å’Œdata_im[1*5+3]ï¼Œå³å¡«å…¥0,7å’Œ9ã€‚å¾—åˆ°ä¸‹å›¾ï¼š</p><p><img src="/2020/11/13/img2col/13.png" alt></p><p>å†æ¥ç€æ‰§è¡Œï¼Œæ­¤æ—¶input_rowå†åŠ ä¸Š2å˜ä¸º3ï¼Œæ­¤æ—¶output_rowså˜ä¸º1ï¼Œè®¡ç®—input_colç­‰äº-1ï¼Œæ‰§è¡Œinput_colå®šä¹‰ä¸‹é¢çš„forå¾ªç¯ï¼Œå¾—åˆ°3ä¸ªå€¼ï¼Œåˆ†åˆ«ä¸º0ï¼Œdata_im[3*5+1]å’Œdata_im[3*5+3]ï¼Œå³å¡«å…¥0,17å’Œ19ã€‚å¾—åˆ°ä¸‹å›¾ï¼š(ä»¥ä¸Šæ“ä½œæ˜¯å°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬ä¸€ä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½)</p><p><img src="/2020/11/13/img2col/14.png" alt></p><p> æ¥ç€ï¼Œkernel_colå˜æˆ1ï¼Œæ­¤æ—¶kernel_rowä¸º0ï¼Œkernel_colä¸º1ã€‚è®¡ç®—input_rowåˆå˜æˆ-1ï¼Œç¬¬ä¸€ä¸ªifæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆï¼Œå†åœ¨è¾“å‡ºçŸ©é˜µä¸Šè¾“å‡º3ä¸ª0ã€‚ç„¶åï¼Œinput_rowå˜æˆ1ï¼Œinput_colåˆ†åˆ«ä¸º0(-1+1)ï¼Œ2(-1+1+2)å’Œ4(-1+1+2+2)æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata_im[1*5+0]ï¼Œdata[1*5+2]ï¼Œdata[1*5+4]ï¼Œå³åˆ†åˆ«å¡«å…¥6,8,10ã€‚ç„¶åï¼Œinput_rowå˜æˆ3ï¼Œinput_colåˆ†åˆ«ä¸º0ï¼Œ2ï¼Œ4æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata_im[3*5+0]ï¼Œdata[3*5+2]ï¼Œdata[3*5+4]ï¼Œå³åˆ†åˆ«è¾“å‡º16,18,20ã€‚ï¼ˆå°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬äºŒä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/15.png" alt></p><p>ç„¶åï¼Œkernel_colå˜æˆ2ï¼Œæ­¤æ—¶kernel_rowä¸º0ï¼Œkernel_colä¸º2ã€‚è®¡ç®—input_rowåˆå˜æˆ-1ï¼Œç¬¬ä¸€ä¸ªifæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆï¼Œå†åœ¨è¾“å‡ºçŸ©é˜µä¸Šè¾“å‡º3ä¸ª0ã€‚ç„¶åï¼Œinput_rowå˜æˆ1ï¼Œinput_colåˆ†åˆ«ä¸º1(-1+2)ï¼Œ3(-1+2+2)å’Œ5(-1+2+2+2)æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata_im[1*5+1]ï¼Œdata[1*5+3]ï¼Œ0ï¼Œå³åˆ†åˆ«å¡«å…¥7,9,0ã€‚ç„¶åï¼Œinput_rowå˜æˆ3ï¼Œinput_colåˆ†åˆ«ä¸º1ï¼Œ3ï¼Œ5æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata_im[3*5+0]ï¼Œdata[3*5+2]ï¼Œ0ï¼Œå³åˆ†åˆ«è¾“å‡º17,19,0ã€‚è§ä¸‹å›¾ï¼šï¼ˆå°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬ä¸‰ä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/16.png" alt></p><p>æ¥ç€ï¼Œkernel_rowå˜æˆ1ï¼Œkernel_colå˜æˆ0ã€‚è®¡ç®—input_rowåˆå˜æˆ0ï¼Œinput_colåˆ†åˆ«ä¸º-1(-1+0)ï¼Œ1(-1+0+2)å’Œ3(-1+0+2+2)ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡º0ï¼Œdata[0*5+1]ï¼Œdata[0*5+3]ï¼Œå³åˆ†åˆ«å¡«å…¥0,2,4ã€‚ç„¶åï¼Œinput_rowå˜æˆ2ï¼Œinput_colåˆ†åˆ«ä¸º-1ï¼Œ1å’Œ3æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡º0ï¼Œdata[2*5+1]ï¼Œdata[2*5+3]ï¼Œå³åˆ†åˆ«å¡«å…¥0,12,14ã€‚ç„¶åï¼Œinput_rowå˜æˆ4ï¼Œinput_colåˆ†åˆ«ä¸º-1ï¼Œ1ï¼Œ3æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡º0ï¼Œdata[4*5+1]ï¼Œdata[4*5+3]ï¼Œå³åˆ†åˆ«è¾“å‡º0,22,24ã€‚è§ä¸‹å›¾ï¼šï¼ˆå°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬å››ä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/17.png" alt></p><p>ç„¶åï¼Œkernel_rowä¸º1ï¼Œkernel_colå˜æˆ1ã€‚è®¡ç®—input_rowä¸º0ï¼Œinput_colåˆ†åˆ«ä¸º0(-1+1)ï¼Œ2(-1+1+2)å’Œ4(-1+1+2+2)ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[0*5+0]ï¼Œdata[0*5+2]ï¼Œdata[0*5+4]ï¼Œå³åˆ†åˆ«å¡«å…¥1,3,5ã€‚ç„¶åï¼Œinput_rowå˜æˆ2ï¼Œinput_colåˆ†åˆ«ä¸º0ï¼Œ2å’Œ4æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[2*5+0]ï¼Œdata[2*5+2]ï¼Œdata[2*5+4]ï¼Œå³åˆ†åˆ«å¡«å…¥11,13,15ã€‚ç„¶åï¼Œinput_rowå˜æˆ4ï¼Œinput_colåˆ†åˆ«ä¸º0ï¼Œ2ï¼Œ4æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[4*5+0]ï¼Œdata[4*5+2]ï¼Œdata[4*5+4]ï¼Œå³åˆ†åˆ«è¾“å‡º21,23,25ã€‚è§ä¸‹å›¾ï¼šï¼ˆå°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬äº”ä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/18.png" alt></p><p>ç„¶åï¼Œkernel_rowä¸º1ï¼Œkernel_colå˜æˆ2ã€‚è®¡ç®—input_rowä¸º0ï¼Œinput_colåˆ†åˆ«ä¸º1(-1+2)ï¼Œ3(-1+2+2)å’Œ5(-1+2+2+2)ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[0*5+1]ï¼Œdata[0*5+3]ï¼Œ0ï¼Œå³åˆ†åˆ«å¡«å…¥2,4,0ã€‚ç„¶åï¼Œinput_rowå˜æˆ2ï¼Œinput_colåˆ†åˆ«ä¸º1ï¼Œ3å’Œ5æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[2*5+1]ï¼Œdata[2*5+3]ï¼Œ0ï¼Œå³åˆ†åˆ«å¡«å…¥12,14,0ã€‚ç„¶åï¼Œinput_rowå˜æˆ4ï¼Œinput_colåˆ†åˆ«ä¸º1ï¼Œ3ï¼Œ5æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[4*5+1]ï¼Œdata[4*5+3]ï¼Œ0ï¼Œå³åˆ†åˆ«è¾“å‡º22,24,0ã€‚è§ä¸‹å›¾ï¼šï¼ˆå°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬å…­ä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/19.png" alt></p><p>   æ¥ç€ï¼Œkernel_rowå˜æˆ2ï¼Œkernel_colå˜æˆ0ã€‚è®¡ç®—input_rowä¸º1ï¼Œinput_colåˆ†åˆ«ä¸º-1(-1+0)ï¼Œ1(-1+0+2)å’Œ3(-1+0+2+2)ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡º0ï¼Œdata[1*5+1]ï¼Œdata[1*5+3]ï¼Œå³åˆ†åˆ«å¡«å…¥0,7,9ã€‚ç„¶åï¼Œinput_rowå˜æˆ3ï¼Œinput_colåˆ†åˆ«ä¸º-1ï¼Œ1å’Œ3æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡º0ï¼Œdata[3*5+1]ï¼Œdata[3*5+3]ï¼Œå³åˆ†åˆ«å¡«å…¥0,17,19ã€‚ç„¶åï¼Œinput_rowå˜æˆ5ï¼Œæ»¡è¶³ç¬¬ä¸€ä¸ªifæ¡ä»¶ï¼Œç›´æ¥è¾“å‡ºä¸‰ä¸ª0ã€‚è§ä¸‹å›¾ï¼šï¼ˆ**å°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬ä¸ƒä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/20.png" alt="Center"></p><p>   ç„¶åï¼Œkernel_rowä¸º2ï¼Œkernel_colå˜æˆ1ã€‚è®¡ç®—input_rowä¸º1ï¼Œinput_colåˆ†åˆ«ä¸º0(-1+1)ï¼Œ2(-1+1+2)å’Œ4(-1+1+2+2)ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[1*5+0]ï¼Œdata[1*5+2]ï¼Œdata[1*5+4]ï¼Œå³åˆ†åˆ«å¡«å…¥6,8,10ã€‚ç„¶åï¼Œinput_rowå˜æˆ3ï¼Œinput_colåˆ†åˆ«ä¸º0ï¼Œ2å’Œ4æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[3*5+0]ï¼Œdata[3*5+2]ï¼Œdata[3*5+4]ï¼Œå³åˆ†åˆ«å¡«å…¥16,18,20ã€‚ç„¶åï¼Œinput_rowå˜æˆ5ï¼Œæ»¡è¶³ç¬¬ä¸€ä¸ªifæ¡ä»¶ï¼Œç›´æ¥è¾“å‡ºä¸‰ä¸ª0ã€‚è§ä¸‹å›¾ï¼šï¼ˆå°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬å…«ä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/21.png" alt></p><p>   æœ€åï¼Œkernel_rowä¸º2ï¼Œkernel_colå˜æˆ2ã€‚è®¡ç®—input_rowä¸º1ï¼Œinput_colåˆ†åˆ«ä¸º1(-1+2)ï¼Œ3(-1+2+2)å’Œ5(-1+2+2+2)ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[1*5+1]ï¼Œdata[1*5+3]ï¼Œ0ï¼Œå³åˆ†åˆ«å¡«å…¥7,9,0ã€‚ç„¶åï¼Œinput_rowå˜æˆ3ï¼Œinput_colåˆ†åˆ«ä¸º1ï¼Œ3å’Œ5æ—¶ï¼Œè¾“å‡ºçŸ©é˜µä¸Šåˆ†åˆ«è¾“å‡ºdata[3*5+1]ï¼Œdata[3*5+3]ï¼Œ0ï¼Œå³åˆ†åˆ«å¡«å…¥17,19,0ã€‚ç„¶åï¼Œinput_rowå˜æˆ5ï¼Œæ»¡è¶³ç¬¬ä¸€ä¸ªifæ¡ä»¶ï¼Œç›´æ¥è¾“å‡ºä¸‰ä¸ª0ã€‚è§ä¸‹å›¾ï¼šï¼ˆå°†ç¬¬ä¸€ä¸ªé€šé“çš„å·ç§¯å¯¹åº”ç¬¬äº”ä¸ªå¯¹åº”ä½ç½®è¿›æ”¾å¥½ï¼‰</p><p><img src="/2020/11/13/img2col/22.png" alt></p><p>   åˆ°æ­¤å·ç§¯å±‚å•é€šé“è¾“å…¥ç‰¹å¾å›¾å°±è½¬åŒ–æˆäº†ä¸€ä¸ªçŸ©é˜µï¼Œè¯·è¯»è€…æœ‹å‹ä»¬ä»”ç»†çœ‹çœ‹ï¼ŒçŸ©é˜µçš„å„åˆ—å°±æ˜¯å·ç§¯æ ¸æ“ä½œçš„å„å°çª—å£ã€‚</p><p><img src="/2020/11/13/img2col/23.png" alt></p><p><strong>!!! æ³¨æ„ç‚¹ï¼š</strong></p><p><strong>ï¼ˆ1ï¼‰å¦‚æœæ˜¯å¤šä¸ªé€šé“çš„è¯ï¼Œå°±è¦å°†å…¶ä»–é€šé“æ”¾ç½®åœ¨è¿™ä¸ªé€šé“çš„ä¸‹é¢ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ç”ŸæˆçŸ©é˜µçš„æ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªå·ç§¯æ ¸(å¤šä¸ªé€šé“)ã€‚</strong></p><p><strong>ï¼ˆ2ï¼‰å·ç§¯ä¸­çš„zero-paddingæ“ä½œçš„å®ç°ï¼Œå¹¶ä¸æ˜¯çœŸæ­£åœ¨åŸå§‹è¾“å…¥ç‰¹å¾å›¾å‘¨å›´æ·»åŠ 0ï¼Œè€Œæ˜¯åœ¨ç‰¹å¾å›¾è½¬åŒ–å¾—åˆ°çš„çŸ©é˜µä¸Šçš„å¯¹åº”ä½ç½®æ·»åŠ 0ã€‚</strong></p><p><strong>ï¼ˆ3ï¼‰è¿™ç§ç®—æ³•çš„æ ¸å¿ƒç‚¹åœ¨äºï¼Œå…ˆå»æ‰¾å·ç§¯æ ¸(å•é€šé“)å¯¹åº”æ‰€æœ‰å·ç§¯ç»“æœå¯¹åº”çš„æŸä¸ªä½ç½®çš„åƒç´ å€¼ï¼Œå°†å…¶æ”¾ç½®åœ¨ä¸€è¡Œï¼Œä»è€Œå®Œæ•´å•é€šé“çš„å¤åˆ¶ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ‰¾åˆ°æŸä¸ªå·ç§¯æ ¸(å•é€šé“)å¯¹åº”çš„ä½ç½®ï¼Œå°†å…¶æ‹‰ä¼¸ä¸ºåˆ—ã€‚</strong></p><p><strong>è€Œim2col_cpuå‡½æ•°åŠŸèƒ½çš„ç›¸åæ–¹å‘çš„å®ç°åˆ™æœ‰ç”±col2im_cpuå‡½æ•°å®Œæˆï¼Œç¬”è€…ä¾æ—§æŠŠè¯¥å‡½æ•°çš„ä»£ç æ³¨é‡Šæ”¾åœ¨ä¸‹é¢ï¼š</strong></p><pre><code class="hljs cpp"><span class="hljs-comment">/*col2im_cpuä¸ºim2col_cpuçš„é€†æ“ä½œæ¥æ”¶13ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºè¾“å…¥çŸ©é˜µæ•°æ®æŒ‡é’ˆ(data_col)ï¼Œå·ç§¯æ“ä½œå¤„ç†çš„ä¸€ä¸ªå·ç§¯ç»„çš„é€šé“ æ•°(channels)ï¼Œè¾“å…¥å›¾åƒçš„é«˜(height)ä¸å®½(width)ï¼ŒåŸå§‹å·ç§¯æ ¸çš„é«˜(kernel_h)ä¸å®½(kernel_w)ï¼Œ è¾“å…¥å›¾åƒé«˜(pad_h)ä¸å®½(pad_w)æ–¹å‘çš„padï¼Œå·ç§¯æ“ä½œé«˜(stride_h)ä¸å®½(stride_w)æ–¹å‘çš„æ­¥é•¿ï¼Œ å·ç§¯æ ¸é«˜(stride_h)ä¸å®½(stride_h)æ–¹å‘çš„æ‰©å±•ï¼Œè¾“å‡ºå›¾åƒæ•°æ®æŒ‡é’ˆ(data_im)*/</span>  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Dtype&gt;  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">col2im_cpu</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Dtype* data_col, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> channels,  </span></span><span class="hljs-function"><span class="hljs-params">    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> height, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> width, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> kernel_h, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> kernel_w,  </span></span><span class="hljs-function"><span class="hljs-params">    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> pad_h, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> pad_w,  </span></span><span class="hljs-function"><span class="hljs-params">    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> stride_h, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> stride_w,  </span></span><span class="hljs-function"><span class="hljs-params">    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> dilation_h, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> dilation_w,  </span></span><span class="hljs-function"><span class="hljs-params">    Dtype* data_im)</span> </span>&#123;      caffe_set(height * width * channels, Dtype(<span class="hljs-number">0</span>), data_im);   <span class="hljs-comment">//é¦–å…ˆå¯¹è¾“å‡ºçš„åŒºåŸŸè¿›è¡Œåˆå§‹åŒ–ï¼Œå…¨éƒ¨å¡«å……0  </span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> output_h = (height + <span class="hljs-number">2</span> * pad_h - (dilation_h * (kernel_h - <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>)) / stride_h + <span class="hljs-number">1</span>;  <span class="hljs-comment">//è®¡ç®—å·ç§¯å±‚è¾“å‡ºå›¾åƒçš„å®½  </span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> output_w = (width + <span class="hljs-number">2</span> * pad_w - (dilation_w * (kernel_w - <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>)) / stride_w + <span class="hljs-number">1</span>;  <span class="hljs-comment">//è®¡ç®—å·ç§¯å±‚è¾“å‡ºå›¾åƒçš„é«˜  </span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> channel_size = height * width;   <span class="hljs-comment">//col2imè¾“å‡ºçš„å•é€šé“å›¾åƒå®¹é‡</span>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> channel = channels; channel--; data_im += channel_size) &#123;<span class="hljs-comment">//æŒ‰ç…§è¾“å‡ºé€šé“æ•°ä¸€ä¸ªä¸€ä¸ªå¤„ç†  </span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> kernel_row = <span class="hljs-number">0</span>; kernel_row &lt; kernel_h; kernel_row++) &#123;              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> kernel_col = <span class="hljs-number">0</span>; kernel_col &lt; kernel_w; kernel_col++) &#123;              <span class="hljs-keyword">int</span> input_row = -pad_h + kernel_row * dilation_h;<span class="hljs-comment">//åœ¨è¿™é‡Œæ‰¾åˆ°å·ç§¯æ ¸ä¸­çš„æŸä¸€è¡Œåœ¨è¾“å…¥å›¾åƒä¸­çš„ç¬¬ä¸€ä¸ªæ“ä½œåŒºåŸŸçš„è¡Œç´¢å¼•  </span>         <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> output_rows = output_h; output_rows; output_rows--) &#123;               <span class="hljs-keyword">if</span> (!is_a_ge_zero_and_a_lt_b(input_row, height)) &#123;<span class="hljs-comment">//å¦‚æœè®¡ç®—å¾—åˆ°çš„è¾“å…¥å›¾åƒçš„è¡Œå€¼ç´¢å¼•å°äºé›¶æˆ–è€…å¤§äºè¾“å…¥å›¾åƒçš„é«˜(è¯¥è¡Œä¸ºpad)  </span>                data_col += output_w;  <span class="hljs-comment">//é‚£ä¹ˆï¼Œç›´æ¥è·³è¿‡è¿™output_wä¸ªæ•°ï¼Œè¿™äº›æ•°æ˜¯è¾“å…¥å›¾åƒç¬¬ä¸€è¡Œä¸Šé¢æˆ–è€…æœ€åä¸€è¡Œä¸‹é¢padçš„0  </span>             &#125; <span class="hljs-keyword">else</span> &#123;                   <span class="hljs-keyword">int</span> input_col = -pad_w + kernel_col * dilation_w;<span class="hljs-comment">//åœ¨è¿™é‡Œæ‰¾åˆ°å·ç§¯æ ¸ä¸­çš„æŸä¸€åˆ—åœ¨è¾“å…¥å›¾åƒä¸­çš„ç¬¬ä¸€ä¸ªæ“ä½œåŒºåŸŸçš„åˆ—ç´¢å¼•  </span>                 <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> output_col = output_w; output_col; output_col--) &#123;                        <span class="hljs-keyword">if</span> (is_a_ge_zero_and_a_lt_b(input_col, width)) &#123;<span class="hljs-comment">//å¦‚æœè®¡ç®—å¾—åˆ°çš„è¾“å…¥å›¾åƒçš„åˆ—å€¼ç´¢å¼•å¤§äºç­‰äºäºé›¶æˆ–è€…å°äºè¾“å…¥å›¾åƒçš„å®½(è¯¥åˆ—ä¸æ˜¯pad)  </span>                      data_im[input_row * width + input_col] += *data_col;<span class="hljs-comment">//å°†çŸ©é˜µä¸Šå¯¹åº”çš„å…ƒæ”¾åˆ°å°†è¦è¾“å‡ºçš„å›¾åƒä¸Š  </span>                 &#125; <span class="hljs-comment">//è¿™é‡Œæ²¡æœ‰elseï¼Œå› ä¸ºå¦‚æœç´§æŒ¨çš„ifæ¡ä»¶ä¸æˆç«‹çš„è¯ï¼Œinput_row*width + input_colè¿™ä¸ªä¸‹æ ‡åœ¨data_imä¸­ä¸å­˜åœ¨ï¼ŒåŒæ—¶éå†åˆ°data_colçš„å¯¹åº”å…ƒä¸º0  </span>                 data_col++;<span class="hljs-comment">//éå†ä¸‹ä¸€ä¸ªdata_colä¸­çš„æ•°  </span>                 input_col += stride_w;<span class="hljs-comment">//æŒ‰ç…§å®½æ–¹å‘æ­¥é•¿éå†å·ç§¯æ ¸ä¸Šå›ºå®šåˆ—åœ¨è¾“å…¥å›¾åƒä¸Šæ»‘åŠ¨æ“ä½œçš„åŒºåŸŸ  </span>             &#125;            &#125;            input_row += stride_h;<span class="hljs-comment">//æŒ‰ç…§é«˜æ–¹å‘æ­¥é•¿éå†å·ç§¯æ ¸ä¸Šå›ºå®šè¡Œåœ¨è¾“å…¥å›¾åƒä¸Šæ»‘åŠ¨æ“ä½œçš„åŒºåŸŸ  </span>             &#125;              &#125;          &#125;      &#125;  &#125;</code></pre>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>principles-of-detection-network-design</title>
    <link href="/2020/10/21/principles-of-detection-network-design/"/>
    <url>/2020/10/21/principles-of-detection-network-design/</url>
    
    <content type="html"><![CDATA[<p>â€‹    å¯¹äºä¸€ä¸ªæ·±åº¦å­¦ä¹ é—®é¢˜ï¼Œ æˆ‘ä»¬åº”è¯¥å°½é‡ä»æ¨¡å‹ã€æ•°æ®ã€ç®—æ³•ä¸‰ä¸ªæ–¹å‘è¿›è¡Œå¤„ç†ã€‚å¯¹äºç›®æ ‡æ£€æµ‹ä¹Ÿä¸ä¾‹å¤–ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä»æ¨¡å‹ã€æ•°æ®å’Œç®—æ³•ä¸‰ä¸ªè§’åº¦å¯¹ç›®æ ‡æ£€æµ‹è¿™ä¸ªé—®é¢˜è¿›è¡Œå±•å¼€æ¢è®¨ã€‚ ç”±äºå¾ˆå¤šé—®é¢˜éƒ½æ˜¯è¡Œä¸šå†…æœ‰å¾…è®¨è®ºï¼Œå€¼å¾—å•†æ¦·çš„ï¼Œ æ‰€ä»¥ä¸€äº›è§‚ç‚¹ä¹Ÿä¼šé™„ä¸Šé“¾æ¥ï¼Œ å¹¶æŒ‘é€‰å‡ºç¬”è€…è®¤ä¸ºåˆé€‚çš„æ–¹æ¡ˆã€‚</p><a id="more"></a><h3 id="ä¸€-æ¨¡å‹éƒ¨åˆ†ï¼š"><a href="#ä¸€-æ¨¡å‹éƒ¨åˆ†ï¼š" class="headerlink" title="ä¸€. æ¨¡å‹éƒ¨åˆ†ï¼š"></a>ä¸€. æ¨¡å‹éƒ¨åˆ†ï¼š</h3><p>ä¸€ä¸ªå…¸å‹çš„ç›®æ ‡æ£€æµ‹çš„å‰å‘æ¨ç†æµç¨‹ä¸ºï¼š</p><p>è¾“å…¥å›¾åƒ  â†’  æå–ç‰¹å¾ â†’ ç‰¹å¾èåˆ â†’  è§£æä¸º bbox â†’  nms â†’ result</p><p>ç›®æ ‡æ£€æµ‹è®­ç»ƒçš„å…¸å‹æµç¨‹ä¸ºï¼š</p><p>è¾“å…¥å›¾åƒ â†’ æå–ç‰¹å¾â†’  ç‰¹å¾èåˆ â†’  è§£æä¸º bbox â†’ bbox åŒ¹é… â†’ è®¡ç®— loss å¹¶åå‘ä¼ æ’­</p><p>åœ¨æ­¤ä»¥ YOLOv3 ä¸ºä¾‹ï¼Œ æ¥æ¢è®¨ä¸€ä¸‹æ£€æµ‹æ¨¡å‹çš„å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p><ul><li>ç½‘ç»œä¸»ä½“æ¡†æ¶ï¼šåŒ…æ‹¬ç‰¹å¾æå– backboneã€ç‰¹å¾èåˆ neckã€ç‰¹å¾è¾“å‡º head</li><li>nms</li><li>loss æŸå¤±</li></ul><h4 id="1-ç½‘ç»œä¸»ä½“æ¡†æ¶"><a href="#1-ç½‘ç»œä¸»ä½“æ¡†æ¶" class="headerlink" title="1. ç½‘ç»œä¸»ä½“æ¡†æ¶"></a>1. ç½‘ç»œä¸»ä½“æ¡†æ¶</h4><p>ä¸€èˆ¬åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š backboneã€neckã€head</p><h6 id="ï¼ˆ1ï¼‰backboneï¼šå¸¸è§çš„-backbone-è®¾è®¡æ–¹æ¡ˆæœ‰"><a href="#ï¼ˆ1ï¼‰backboneï¼šå¸¸è§çš„-backbone-è®¾è®¡æ–¹æ¡ˆæœ‰" class="headerlink" title="ï¼ˆ1ï¼‰backboneï¼šå¸¸è§çš„ backbone è®¾è®¡æ–¹æ¡ˆæœ‰"></a>ï¼ˆ1ï¼‰backboneï¼šå¸¸è§çš„ backbone è®¾è®¡æ–¹æ¡ˆæœ‰</h6><ul><li><p>åŸºç¡€ç½‘ç»œï¼šVGG16ã€Resnet50ã€CSPReNeXt50</p></li><li><p>Efficientnetã€HRNetã€SpineNet</p></li><li>è½»é‡çº§ç½‘ç»œï¼šshufflenetã€mobilenetã€ghostnet </li></ul><h6 id="2-neck"><a href="#2-neck" class="headerlink" title="(2) neck"></a>(2) neck</h6><p>addition-aggregationï¼šSPP æ¨¡å—ã€ASPP æ¨¡å—ã€RFB æ¨¡å—å’Œ SAM æ¨¡å—</p><p>Path-aggregationï¼šFPNã€PANetã€NAS-FPNã€ FC-FPNã€BiFPNã€ASFFã€ SFAM</p><h6 id="3-head"><a href="#3-head" class="headerlink" title="(3) head"></a>(3) head</h6><p>ä¸»è¦æ˜¯ç”¨äºè¾“å‡ºç»“æœï¼Œä¸€èˆ¬ä¸ºå¸¸è§çš„å·ç§¯å±‚</p><ul><li>Dense Prediction(one-stage):<ul><li>RPNã€SSD/YOLOã€RetinaNet(anchor based)</li><li>CornerNetã€CenterNetã€MatrixNetã€FCOS(anchor free)</li></ul></li><li>Sparse Prediction(two stage)<ul><li>Faster RCNNã€F-FCNã€Mask R-CNN(anchor based)</li><li>RepPoints(anchor free)</li></ul></li></ul><h4 id="2-nms-è®¾è®¡"><a href="#2-nms-è®¾è®¡" class="headerlink" title="2. nms è®¾è®¡"></a>2. nms è®¾è®¡</h4><p>nms è®¾è®¡è¦ç‚¹åœ¨äºåˆ¤å®šä¸¤ä¸ª bbox çš„ IoUã€‚å¸¸è§çš„ IoU å¦‚ä¸‹æ‰€ç¤ºï¼š</p><h5 id="IoU"><a href="#IoU" class="headerlink" title="IoU"></a>IoU</h5><p>IoUå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„äº¤å¹¶æ¯”ï¼Œæ˜¯ç›®æ ‡æ£€æµ‹ä¸­æœ€å¸¸ç”¨çš„æŒ‡æ ‡ã€‚ ä»–çš„ä½œç”¨ä¸ä»…ç”¨æ¥ç¡®å®šæ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬ï¼Œè¿˜å¯ä»¥ç”¨æ¥è¯„ä»·è¾“å‡ºæ¡† (predict box) å’Œ ground-truth çš„è·ç¦»ã€‚</p><script type="math/tex; mode=display">IoU = \frac{A \cup B}{ A \cap B}</script><p>å…¶æ‹¥æœ‰å‡ ä¸ªç‰¹æ€§ï¼š</p><ul><li>å°ºåº¦ä¸å˜å½¢ï¼Œ ä¹Ÿå°±æ˜¯è¯´å¯¹å°ºåº¦ä¸æ•æ„Ÿ(scale invariant)ã€‚</li><li>åº¦é‡çš„ä¸‰è¦ç´ ï¼šéè´Ÿæ€§ã€å¯¹ç§°æ€§ã€ä¸‰è§’ä¸ç­‰å¼ã€‚</li></ul><p>IoU å­˜åœ¨çš„é—®é¢˜ï¼š</p><ul><li>å¦‚æœä¸¤ä¸ªæ¡†æ²¡æœ‰ç›¸äº¤ï¼Œæ ¹æ®å®šä¹‰ï¼ŒIoU=0ï¼Œä¸èƒ½åæ˜ ä¸¤è€…çš„è·ç¦»å¤§å°( é‡åˆåº¦ )ã€‚åŒæ—¶å› ä¸º loss=0ï¼Œæ²¡æœ‰æ¢¯åº¦å›ä¼ ï¼Œæ— æ³•è¿›è¡Œå­¦ä¹ è®­ç»ƒã€‚</li><li>IoU æ— æ³•ç²¾ç¡®çš„åæ˜ ä¸¤è€…çš„é‡åˆåº¦å¤§å°ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸‰ç§æƒ…å†µIoUéƒ½ç›¸ç­‰ï¼Œä½†çœ‹å¾—å‡ºæ¥ä»–ä»¬çš„é‡åˆåº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œå·¦è¾¹çš„å›¾å›å½’çš„æ•ˆæœæœ€å¥½ï¼Œå³è¾¹çš„æœ€å·®ã€‚</li></ul><p><img src="/2020/10/21/principles-of-detection-network-design/3.png" style="zoom:40%;"></p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">IoU</span>(<span class="hljs-params">box1, box2</span>):</span>    <span class="hljs-string">&quot;&quot;&quot; box1, box2: top, left, bottom, right &quot;&quot;&quot;</span>    area1 = (box1[<span class="hljs-number">2</span>] - box1[<span class="hljs-number">0</span>]) * (box1[<span class="hljs-number">3</span>] - box1[<span class="hljs-number">1</span>])    area2 = (box2[<span class="hljs-number">2</span>] - box2[<span class="hljs-number">0</span>]) * (box2[<span class="hljs-number">3</span>] - box2[<span class="hljs-number">1</span>])        in_h = min(box1[<span class="hljs-number">2</span>], box2[<span class="hljs-number">2</span>]) - max(box1[<span class="hljs-number">0</span>], box2[<span class="hljs-number">0</span>])    in_w = min(box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">3</span>]) - max(box1[<span class="hljs-number">1</span>], box2[<span class="hljs-number">1</span>])        inter = <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> (in_h &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> in_w &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">else</span> in_h * in_w    <span class="hljs-keyword">return</span> inter / (area1 + area2 - inter)</code></pre><h5 id="GIoU"><a href="#GIoU" class="headerlink" title="GIoU"></a>GIoU</h5><p>è®ºæ–‡åœ°å€: <a href="https://arxiv.org/pdf/1902.09630.pdf">https://arxiv.org/pdf/1902.09630.pdf</a></p><p>â€‹        GIoUï¼ˆGeneralized Intersection over Unionï¼‰ç›¸è¾ƒäº IoU å¤šäº†ä¸€ä¸ª â€˜Generalizedâ€™ï¼Œè¿™ä¹Ÿæ„å‘³ç€å®ƒèƒ½åœ¨æ›´å¹¿ä¹‰çš„å±‚é¢ä¸Šè®¡ç®—IoUï¼Œå¹¶è§£å†³åˆšæ‰æˆ‘ä»¬è¯´çš„ â€˜ä¸¤ä¸ªå›¾åƒæ²¡æœ‰ç›¸äº¤æ—¶ï¼Œæ— æ³•æ¯”è¾ƒä¸¤ä¸ªå›¾åƒçš„è·ç¦»è¿œè¿‘â€™ çš„é—®é¢˜ã€‚</p><p>GIoU çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">GIoU = IoU - \frac{A^c - (A \cup B)}{ A^c}</script><p>å…¶ä¸­ $A^c$ ä»£è¡¨ä¸¤ä¸ªå›¾åƒçš„æœ€å°åŒ…ç»œé¢ç§¯ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¿™ä¸¤ä¸ªå›¾åƒçš„æœ€å°å¤–æ¥çŸ©å½¢çš„é¢ç§¯ã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š</p><ul><li>åŸæœ‰ IoU å–å€¼åŒºé—´ä¸º [0,1]ï¼Œè€Œ GIoU çš„å–å€¼åŒºé—´ä¸º [-1,1]ï¼›åœ¨ä¸¤ä¸ªå›¾åƒå®Œå…¨é‡å æ—¶ï¼ŒIoU = GIoU = 1ï¼Œåœ¨ä¸¤ä¸ªå›¾åƒè·ç¦»æ— é™è¿œæ—¶ï¼ŒIoU = 0 è€Œ GIoU = -1ã€‚</li><li>ä¸IoUåªå…³æ³¨é‡å åŒºåŸŸä¸åŒï¼Œ<strong>GIoUä¸ä»…å…³æ³¨é‡å åŒºåŸŸï¼Œè¿˜å…³æ³¨éé‡å åŒºåŸŸï¼Œè¿™æ ·èƒ½æ›´å¥½çš„çš„åæ˜ ä¸¤ä¸ªå›¾åƒçš„é‡åˆåº¦</strong>ã€‚å…¶å®Œå–„äº†å›¾åƒçš„é‡å åº¦çš„è®¡ç®—åŠŸèƒ½ã€‚</li></ul><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">GIoU</span>(<span class="hljs-params">box1, box2</span>):</span>    <span class="hljs-string">&quot;&quot;&quot; box1, box2: top, left, bottom, right &quot;&quot;&quot;</span>    area1 = (box1[<span class="hljs-number">2</span>] - box1[<span class="hljs-number">0</span>]) * (box1[<span class="hljs-number">3</span>] - box1[<span class="hljs-number">1</span>])    area2 = (box2[<span class="hljs-number">2</span>] - box2[<span class="hljs-number">0</span>]) * (box2[<span class="hljs-number">3</span>] - box2[<span class="hljs-number">1</span>])        in_h = min(box1[<span class="hljs-number">2</span>], box2[<span class="hljs-number">2</span>]) - max(box1[<span class="hljs-number">0</span>], box2[<span class="hljs-number">0</span>])    in_w = min(box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">3</span>]) - max(box1[<span class="hljs-number">1</span>], box2[<span class="hljs-number">1</span>])    inter = <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> (in_h &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> in_w &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">else</span> in_h * in_w    union = area1 + area2 - inter         iou = inter / union         area_C = ((max(box1[<span class="hljs-number">1</span>], box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">1</span>], box2[<span class="hljs-number">3</span>]) - min(box1[<span class="hljs-number">1</span>], box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">1</span>], box2[<span class="hljs-number">3</span>])) *               (max(box1[<span class="hljs-number">0</span>], box1[<span class="hljs-number">2</span>], box2[<span class="hljs-number">0</span>], box2[<span class="hljs-number">2</span>]) - min(box1[<span class="hljs-number">1</span>], box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">1</span>], box2[<span class="hljs-number">3</span>])))          <span class="hljs-keyword">return</span> iou - (area_C - union) / area_C</code></pre><h5 id="DIoU"><a href="#DIoU" class="headerlink" title="DIoU"></a>DIoU</h5><p>å‚è€ƒè®ºæ–‡ï¼šDistance-IoU Loss: Faster and Better Learning for Bounding Box Regression</p><p>â€‹        GIoU è™½ç„¶è§£å†³äº† IoU çš„ä¸€äº›é—®é¢˜(è¿™é‡Œä¸»è¦æ˜¯é‡å åº¦çš„é—®é¢˜)ï¼Œä½†æ˜¯å®ƒå¹¶ä¸èƒ½ç›´æ¥åæ˜ é¢„æµ‹æ¡†ä¸ç›®æ ‡æ¡†ä¹‹é—´çš„è·ç¦»ï¼Œæ¯”å¦‚å½“ç›®æ ‡æ¡†å®Œå…¨åŒ…è£¹é¢„æµ‹æ¡†çš„æ—¶å€™ï¼ŒIoU å’Œ GIoU çš„å€¼éƒ½ä¸€æ ·ï¼Œæ­¤æ—¶ GIoU é€€åŒ–ä¸ºIoU,  æ— æ³•åŒºåˆ†å…¶ç›¸å¯¹ä½ç½®å…³ç³»ã€‚</p><p>DIoU(Distance-IoU)å³å¯è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå°†ä¸¤ä¸ªæ¡†ä¹‹é—´çš„é‡å åº¦ã€è·ç¦»ã€å°ºåº¦éƒ½è€ƒè™‘äº†è¿›æ¥ï¼ŒDIoUçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">DIoU = IoU - \frac{\rho^2(b, b^{gt})}{c^2}</script><p>å…¶ä¸­ $b$ï¼Œ$b^{gt}$ åˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªæ¡†çš„ä¸­å¿ƒç‚¹ï¼Œ $rho$ ä»£è¡¨ä¸¤ä¸ªä¸­å¿ƒç‚¹ä¹‹é—´çš„æ¬§æ°è·ç¦»ï¼Œ$c$ ä»£è¡¨æœ€å°åŒ…ç»œçŸ©å½¢çš„å¯¹è§’çº¿ï¼Œå³å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2020/10/21/principles-of-detection-network-design/4.png" style="zoom6%;"></p><p>DIoU ç›¸è¾ƒäºå…¶ä»–ä¸¤ç§è®¡ç®—æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼š</p><ul><li>DIoU å¯ç›´æ¥æœ€å°åŒ–ä¸¤ä¸ªæ¡†ä¹‹é—´çš„è·ç¦»ï¼Œæ‰€ä»¥ä½œä¸ºæŸå¤±å‡½æ•°çš„æ—¶å€™ loss æ”¶æ•›çš„æ›´å¿«ï¼›</li><li>åœ¨ä¸¤ä¸ªæ¡†å®Œå…¨ä¸Šä¸‹æ’åˆ—æˆ–å·¦å³æ’åˆ—æ—¶ï¼Œæ²¡æœ‰ç©ºç™½åŒºåŸŸï¼Œæ­¤æ—¶ GIoU å‡ ä¹é€€åŒ–ä¸ºäº† IoUï¼Œä½†æ˜¯ DIoU ä»ç„¶æœ‰æ•ˆã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œ<strong>DIoU åœ¨å®Œå–„å›¾åƒé‡å åº¦çš„è®¡ç®—åŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œå®ç°äº†å¯¹å›¾å½¢è·ç¦»çš„è€ƒé‡ï¼Œä½†ä»æ— æ³•å¯¹å›¾å½¢é•¿å®½æ¯”çš„ç›¸ä¼¼æ€§è¿›è¡Œå¾ˆå¥½çš„è¡¨ç¤º</strong>ã€‚</p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">DIoU</span>(<span class="hljs-params">box1, box2</span>):</span>    <span class="hljs-string">&quot;&quot;&quot; box1, box2: top, left, bottom, right &quot;&quot;&quot;</span>    C_2 = ((max(box1[<span class="hljs-number">1</span>], box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">1</span>], box2[<span class="hljs-number">3</span>]) - min(box1[<span class="hljs-number">1</span>], box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">1</span>], box2[<span class="hljs-number">3</span>])) ** <span class="hljs-number">2</span> +            (max(box1[<span class="hljs-number">0</span>], box1[<span class="hljs-number">2</span>], box2[<span class="hljs-number">0</span>], box2[<span class="hljs-number">2</span>]) - min(box1[<span class="hljs-number">1</span>], box1[<span class="hljs-number">3</span>], box2[<span class="hljs-number">1</span>], box2[<span class="hljs-number">3</span>])) ** <span class="hljs-number">2</span>)        D_2 = (((box2[<span class="hljs-number">1</span>]+box2[<span class="hljs-number">3</span>])/<span class="hljs-number">2</span> - (box1[<span class="hljs-number">1</span>]+box1[<span class="hljs-number">3</span>])/<span class="hljs-number">2</span>)**<span class="hljs-number">2</span> +          ((box2[<span class="hljs-number">0</span>]+box2[<span class="hljs-number">2</span>])/<span class="hljs-number">2</span> - (box1[<span class="hljs-number">0</span>]+box1[<span class="hljs-number">2</span>])/<span class="hljs-number">2</span>)**<span class="hljs-number">2</span>)     iou = IoU(box1, box2)    <span class="hljs-keyword">return</span> iou - D_2 / C_2</code></pre><h5 id="CIoU"><a href="#CIoU" class="headerlink" title="CIoU"></a>CIoU</h5><p>CIoU çš„å…¨ç§°ä¸º Complete IoUï¼Œå®ƒåœ¨ DIoU çš„åŸºç¡€ä¸Šï¼Œè¿˜èƒ½åŒæ—¶è€ƒè™‘ä¸¤ä¸ªçŸ©å½¢çš„é•¿å®½æ¯”ï¼Œä¹Ÿå°±æ˜¯å½¢çŠ¶çš„ç›¸ä¼¼æ€§ï¼ŒCIoU çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">CIoU = IoU - \frac{\rho^2(b, b^{gt})}{c^2} - \alpha v</script><p>å…¶ä¸­ $\alpha$ æ˜¯æƒé‡å‚æ•°ï¼Œè€Œ $v$ ç”¨æ¥åº¦é‡é•¿å®½æ¯”çš„ç›¸ä¼¼æ€§ï¼š</p><script type="math/tex; mode=display">v = \frac{4}{\pi^2} (arctan \frac{w^{gt}}{h^{gt}} - arctan \frac{w}{h})^2, \\\alpha = \frac{v}{(1-IoU) + v }</script><p>å¯ä»¥çœ‹å‡ºï¼Œ<strong>CIoU å°±æ˜¯åœ¨ DIoU çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å›¾åƒç›¸ä¼¼æ€§(é•¿å®½æ¯”)çš„å½±å“å› å­ï¼Œå› æ­¤å¯ä»¥æ›´å¥½çš„åæ˜ ä¸¤ä¸ªæ¡†ä¹‹é—´çš„å·®å¼‚æ€§</strong>ã€‚</p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">CIoU</span>(<span class="hljs-params">box1, box2</span>):</span>    <span class="hljs-string">&quot;&quot;&quot; box1, box2: top, left, bottom, right &quot;&quot;&quot;</span>    iou = IoU(box1, box2)    diou = DIoU(box1, box2)    v = <span class="hljs-number">4</span> / math.pi**<span class="hljs-number">2</span> * (math.atan((box2[<span class="hljs-number">3</span>] - box2[<span class="hljs-number">1</span>])/(box2[<span class="hljs-number">2</span>] - box2[<span class="hljs-number">0</span>]))                          - math.atan((box1[<span class="hljs-number">3</span>] - box1[<span class="hljs-number">1</span>])/(box1[<span class="hljs-number">2</span>] - box1[<span class="hljs-number">0</span>])))**<span class="hljs-number">2</span> + <span class="hljs-number">1e-5</span>    alpha = v / ((<span class="hljs-number">1</span>-iou) + v)    <span class="hljs-keyword">return</span> diou - alpha * v</code></pre><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ æ˜¯ä»¥ä¸åŒçš„ IoU ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œ åœ¨ Pascal VOC éªŒè¯é›†ä¸Šçš„å¢ç›Šï¼š</p><p><img src="/2020/10/21/principles-of-detection-network-design/5.png" style="zoom:40%;"></p><h4 id="3-loss-è®¾è®¡"><a href="#3-loss-è®¾è®¡" class="headerlink" title="3. loss è®¾è®¡"></a>3. loss è®¾è®¡</h4><p>ç›®æ ‡æ£€æµ‹ä¸­çš„æŸå¤±å‡½æ•° loss å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š ç¬¬ä¸€ç±»æ˜¯åˆ†ç±»æŸå¤±ï¼Œ ç¬¬äºŒç±»æ˜¯æ£€æµ‹å›å½’æŸå¤±ã€‚</p><p>å¸¸è§çš„åˆ†ç±»æŸå¤±æœ‰ï¼š cross entropyã€ focal lossã€GHM lossã€AP loss å’Œ DR loss ç­‰ç­‰</p><p>å¸¸è§çš„å›å½’æŸå¤±æœ‰ï¼š</p><ul><li>l1ã€l2ã€smooth l1 </li><li>IOU loss</li><li>å…¶ä»–æœ¬æ–‡æœªå±•å¼€ lossï¼š softer nms çš„ KL lossã€ GHM-R lossã€IoU-bounded lossã€ huber loss çš„æ¦‚ç‡è§£é‡Šæ–° lossï¼Œ libra RCNN çš„ balanced l1 loss</li></ul><h5 id="3-1-åˆ†ç±»æŸå¤±"><a href="#3-1-åˆ†ç±»æŸå¤±" class="headerlink" title="3.1  åˆ†ç±»æŸå¤±"></a>3.1  åˆ†ç±»æŸå¤±</h5><h5 id="3-1-1-cross-entropy-äº¤å‰ç†µæŸå¤±"><a href="#3-1-1-cross-entropy-äº¤å‰ç†µæŸå¤±" class="headerlink" title="3. 1.1 cross entropy äº¤å‰ç†µæŸå¤±"></a>3. 1.1 cross entropy äº¤å‰ç†µæŸå¤±</h5><p>äº¤å‰ç†µæŸå¤±æ˜¯æˆ‘ä»¬å†è®¡ç®—åˆ†ç±»æŸå¤±çš„æ—¶å€™æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ï¼Œ å…¶å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">CE = \left\{\begin{aligned}-log(p) , && if \ \ y = 1 \\-log(1-p),&& if \ \ y = 0\end{aligned}\right.</script><p>å•é˜¶æ®µçš„ç›®æ ‡æ£€æµ‹å™¨é€šå¸¸ä¼šäº§ç”Ÿé«˜è¾¾ 100k çš„å€™é€‰ç›®æ ‡ï¼Œ åªæœ‰æå°‘æ•°æ˜¯æ­£æ ·æœ¬ï¼Œ æ­£è´Ÿæ ·æœ¬æ•°é‡éå¸¸ä¸å¹³è¡¡ã€‚  ä¸ºäº†è§£å†³æ­£è´Ÿæ ·æœ¬ä¸å¹³è¡¡çš„é—®é¢˜ï¼Œ æˆ‘ä»¬é€šå¸¸ä¼šåœ¨äº¤å‰ç†µæŸå¤±çš„å‰é¢åŠ ä¸Šä¸€ä¸ªå‚æ•° $\alpha$, å³:</p><script type="math/tex; mode=display">CE = \left\{\begin{aligned}-\alpha log(p) , && if \ \ y = 1 \\-(1-\alpha)log(1-p),&& if \ \ y = 0\end{aligned}\right.</script><h5 id="3-1-2-focal-Loss"><a href="#3-1-2-focal-Loss" class="headerlink" title="3.1. 2 focal Loss"></a>3.1. 2 focal Loss</h5><p>â€‹        focal loss çš„å¼•å…¥ä¸»è¦æ˜¯ä¸ºäº†è§£å†³éš¾ä»¥æ ·æœ¬æ•°é‡ä¸å¹³è¡¡ï¼ˆæ³¨æ„ï¼Œ æœ‰åŒºåˆ«äºæ­£è´Ÿæ ·æœ¬æ•°é‡ä¸å¹³è¡¡ï¼‰çš„é—®é¢˜ã€‚åœ¨ç›®æ ‡æ£€æµ‹ç®—æ³•ä¸­ï¼Œæ·»åŠ æƒé‡ $\alpha$ å¹³è¡¡äº†æ­£è´Ÿæ ·æœ¬çš„æ•°é‡ï¼Œ ä½†æ˜¯å¯¹äºéš¾æ˜“æ ·æœ¬çš„ä¸å¹³è¡¡å¹¶æ— åŠ©ç›Šã€‚ å®é™…ä¸Šï¼Œæ˜“åˆ†æ ·æœ¬å¯¹æ¨¡å‹çš„æå‡æ•ˆæœéå¸¸å°ï¼Œ æ¨¡å‹åº”è¯¥ä¸»è¦å…³æ³¨é‚£äº›éš¾åˆ†å¯¹è±¡ã€‚ (è¿™ä¸ªè§‚ç‚¹æœ‰é—®é¢˜ï¼Œ æ˜¯ GHM çš„ä¸»è¦æ”¹è¿›å¯¹è±¡)ã€‚ focal loss çš„æå‡ºä¸»è¦æ˜¯ä¸ºäº†è§£å†³éš¾æ˜“æ ·æœ¬æ•°é‡çš„ä¸å¹³è¡¡é—®é¢˜ã€‚å…¶æ€è·¯å¾ˆç®€å•ï¼š æŠŠé«˜ç½®ä¿¡åº¦ $p$ æ ·æœ¬çš„æŸå¤±é™ä½ä¸€äº›å³å¯:</p><script type="math/tex; mode=display">CE = \left\{\begin{aligned}-(1-p)^\gamma log(p) , && if \ \ y = 1 \\-p^\gamma log(1-p),&& if \ \ y = 0\end{aligned}\right.</script><p>ä¸¾ä¸ªä¾‹å­ï¼Œ $\gamma $ å– 2ï¼Œ p å– 0.968 çš„æ—¶å€™ï¼Œ $(1-0.968)^2$ çº¦å®šäº 0.001ï¼Œ æŸå¤±è¡°å‡äº† 1000 å€ã€‚ focal loss çš„æœ€ç»ˆå½¢å¼ç»“åˆäº†æ­£è´Ÿæ ·æœ¬çš„æƒé‡ $\alpha$ å’Œ éš¾æ˜“æ ·æœ¬çš„æƒé‡ $(1-p)^\gamma$ã€‚ åŒæ—¶è§£å†³äº†æ­£è´Ÿæ ·æœ¬çš„ä¸å‡è¡¡å’Œéš¾æ˜“æ ·æœ¬çš„ä¸å‡è¡¡é—®é¢˜ã€‚ æœ€ç»ˆçš„ focal loss å½¢å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">CE = \left\{\begin{aligned}-\alpha (1-p)^\gamma log(p) , && if \ \ y = 1 \\-(1-\alpha) p^\gamma log(1-p),&& if \ \ y = 0\end{aligned}\right.</script><p>å®éªŒè¯æ˜ï¼Œ å½“ $\gamma$ å– 2ï¼Œ $\alpha$ å– 0.25 çš„æ—¶å€™æ•ˆæœæœ€ä½³ã€‚</p><h5 id="3-1-3-GHM"><a href="#3-1-3-GHM" class="headerlink" title="3.1.3 GHM"></a>3.1.3 GHM</h5><p>focal loss å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š (1) è®©æ¨¡å‹è¿‡å¤šçš„å…³æ³¨é‚£äº›éš¾åˆ†æ ·æœ¬æ˜¯å­˜åœ¨é—®é¢˜çš„ã€‚ æ¯”å¦‚æ ·æœ¬ä¸­æœ‰ç¦»ç¾¤ç‚¹ï¼Œ é‚£ä¹ˆæ¨¡å‹å·²ç»æ”¶æ•›çš„æ¨¡å‹è¿˜è¦å»å…³æ³¨è¿™äº›æ ·æœ¬ã€‚ (2) å…¬å¼ä¸­çš„ $\alpha$ å’Œ $\gamma$ çš„å–å€¼éœ€è¦å‡­å€Ÿè¯•éªŒå¾—å‡ºï¼Œ ä¸” $\alpha$ å’Œ $\beta$ è¦è”åˆèµ·æ¥ä¸€èµ·è¯•éªŒæ‰è¡Œã€‚ GHM(gradient harmonizing mechaism) è§£å†³äº†ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>æ–‡ç« é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªæ¢¯åº¦æ¨¡é•¿ g:</p><script type="math/tex; mode=display">g = |p - p^*| = \left\{\begin{aligned}(1-p) , && if \ \ p^* = 1 \\p,&& if \ \ p^* = 0\end{aligned}\right.</script><p>å…¶ä¸­ $p$ æ˜¯æ¨¡å‹é¢„æµ‹çš„æ¦‚ç‡ï¼Œ $p^<em>$ æ˜¯ ground-truth çš„æ ‡ç­¾ï¼Œ $p^</em>$ çš„å–å€¼ä¸º 0 æˆ– 1ã€‚</p><p><strong>g æ­£æ¯”äºæ£€æµ‹çš„éš¾æ˜“ç¨‹åº¦ï¼Œ g è¶Šå¤§åˆ™æ£€æµ‹éš¾åº¦è¶Šå¤§ã€‚</strong> æ³¨æ„åˆ°æ¢¯åº¦æ¨¡é•¿å’Œæ ·æœ¬æ•°é‡çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2020/10/21/principles-of-detection-network-design/6.png" style="zoom:40%;"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ æ¢¯åº¦æ¨¡é•¿æ¥è¿‘äº 0 çš„æ ·æœ¬æ•°é‡æœ€å¤šï¼Œ éšç€æ¢¯åº¦æ¨¡é•¿çš„å¢é•¿ï¼Œ æ ·æœ¬æ•°é‡è¿…é€Ÿå‡å°‘ï¼Œ ä½†æ˜¯åœ¨æ¢¯åº¦æ¨¡é•¿æ¥è¿‘äº1 æ—¶ï¼Œ æ ·æœ¬æ•°é‡ä¹ŸæŒºå¤šã€‚  GHM çš„æƒ³æ³•æ˜¯ï¼Œ æˆ‘ä»¬ç¡®å®åº”è¯¥å¦‚ focal loss æ‰€è¯´çš„ä¸åº”è¯¥è¿‡åˆ†å…³ç³»æ˜“åˆ†æ ·æœ¬ï¼Œä½†æ˜¯ç‰¹åˆ«éš¾åˆ†çš„æ ·æœ¬(outliers, ç¦»ç¾¤ç‚¹) ä¹Ÿä¸è¯¥å…³æ³¨ã€‚æ‰€ä»¥ä½œè€…è®¤ä¸ºåº”è¯¥åŒæ—¶è¡°å‡æ˜“åˆ†æ ·æœ¬å’Œéš¾åˆ†æ ·æœ¬ï¼Œ åŒºåˆ†çš„æ–¹æ³•æ˜¯å®šä¹‰äº†æ¢¯åº¦å¯†åº¦ $GD(g)$ è¿™ä¸ªå˜é‡ï¼Œ æ¥è¡¡é‡å‡ºä¸€å®šæ¢¯åº¦èŒƒå›´å†…çš„æ ·æœ¬æ•°é‡ã€‚</p><script type="math/tex; mode=display">GD(g) = \frac{1}{l_\varepsilon (g)} \sum_{k=1}^{N} \delta_\epsilon(g_k, g)</script><p>å…¶ä¸­ $\delta<em>\epsilon(g_k, g)$ è¡¨æ˜äº†æ ·æœ¬ 1- N ä¸­ï¼Œ æ¢¯åº¦æ¨¡é•¿åˆ†å¸ƒåœ¨ $(g-\frac{\epsilon}{2}, g+\frac{\epsilon}{2})$ èŒƒå›´å†…çš„æ ·æœ¬ä¸ªæ•°ï¼Œ $l</em>\epsilon(g)$ ä»£è¡¨äº† $(g-\frac{\epsilon}{2}, g+\frac{\epsilon}{2})$ åŒºé—´çš„é•¿åº¦ã€‚æ¢¯åº¦å¯†åº¦çš„å«ä¹‰æ˜¯ï¼šå•ä½æ¢¯åº¦æ¨¡é•¿ g éƒ¨åˆ†çš„æ ·æœ¬ä¸ªæ•°ã€‚æ‰€è°“çš„ GHM æŸå¤±  $l_{GHM-C}$ å°±æ˜¯ äº¤å‰ç†µCE é™¤ä»¥è¯¥æ ·æœ¬çš„æ¢¯åº¦å¯†åº¦å³å¯ã€‚</p><script type="math/tex; mode=display">L_{GHM-C} = \sum_{i=1}^{N} \frac{L_{CE}(p_i, p_i^*)}{GD(g_i)}</script><p>å…¶å®ä¸åŒçš„æŸå¤±å‡½æ•°éƒ½æ˜¯å¯¹ä¸åŒçš„æ ·æœ¬èµ‹äºˆä¸åŒçš„æƒé‡ï¼Œ CE ä¸­æ·»åŠ  $\alpha$ æ˜¯ä¸ºäº†æŠ‘åˆ¶è´Ÿæ ·æœ¬ï¼› focal loss æ·»åŠ  $(1-p)^\gamma$ åˆ™æ˜¯ç”¨æ¥æŠ‘åˆ¶ç®€å•æ ·æœ¬ï¼Œè€Œ GHM åˆ™ç”¨æ¥åŒæ—¶æŠ‘åˆ¶ç®€å•æ ·æœ¬å’Œè¾ƒå›°éš¾æ ·æœ¬ã€‚</p><h4 id="3-2-å›å½’æŸå¤±"><a href="#3-2-å›å½’æŸå¤±" class="headerlink" title="3. 2. å›å½’æŸå¤±"></a>3. 2. å›å½’æŸå¤±</h4><h5 id="3-2-1-L2-L1-smooth-L1"><a href="#3-2-1-L2-L1-smooth-L1" class="headerlink" title="3. 2. 1  L2, L1, smooth L1"></a>3. 2. 1  L2, L1, smooth L1</h5><script type="math/tex; mode=display">\begin{align}L_2(x) &= x^2 \\L_1(x) &= |x| \\smooth_{L1}(x) &= \left\{\begin{aligned}0.5x^2 &&if |x| < 1\\|x| - 0.5& &  otherwise\\\end{aligned}\right.\end{align}</script><p>â€‹        smooth L1 loss ç›¸å¯¹äº l2 loss çš„ä¼˜ç‚¹ï¼š å½“é¢„æµ‹æ¡†ä¸ ground truth å·®åˆ«è¿‡å¤§æ—¶ï¼Œæ¢¯åº¦å€¼ä¸è‡³äºè¿‡å¤§ï¼›å½“é¢„æµ‹æ¡†ä¸ ground truth å·®åˆ«å¾ˆå°æ—¶ï¼Œæ¢¯åº¦å€¼è¶³å¤Ÿå°ã€‚</p><h5 id="3-2-2-IoU-loss"><a href="#3-2-2-IoU-loss" class="headerlink" title="3.2.2  IoU loss"></a>3.2.2  IoU loss</h5><p>â€‹        é¦–æ¬¡å°† IoU çš„æ¦‚å¿µå¼•å…¥ loss æŸå¤±å‡½æ•°ç”±æ—·è§†æå‡ºï¼Œ å‘è¡¨äº UnitBox: An Advanced Object Detection Networkã€‚ è®ºæ–‡æŒ‡å‡ºï¼Œé€šè¿‡ 4 ä¸ªç‚¹å›å½’åæ ‡æ¡†çš„æ–¹å¼æ˜¯å‡è®¾4ä¸ªåæ ‡ç‚¹æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰è€ƒè™‘å…¶ç›¸å…³æ€§ï¼Œå®é™… 4 ä¸ªåæ ‡ç‚¹å…·æœ‰ä¸€å®šçš„ç›¸å…³æ€§ã€‚å…¶ä¸­ $IoU_{loss} = 1 - IoU + ä¿®æ­£é¡¹$ã€‚å…¶ä¸­ï¼Œ IoU å¯ä»¥æ˜¯ IoUï¼Œ GIoUï¼Œ DIoU å’Œ CIoUã€‚</p><h3 id="äºŒ-æ•°æ®å¢å¼ºæŠ€æœ¯-å«æ ‡ç­¾å¢å¼º"><a href="#äºŒ-æ•°æ®å¢å¼ºæŠ€æœ¯-å«æ ‡ç­¾å¢å¼º" class="headerlink" title="äºŒ. æ•°æ®å¢å¼ºæŠ€æœ¯(å«æ ‡ç­¾å¢å¼º)"></a>äºŒ. æ•°æ®å¢å¼ºæŠ€æœ¯(å«æ ‡ç­¾å¢å¼º)</h3><p>å¸¸è§çš„æ•°æ®å¢å¼ºæ–¹å¼å¯ä»¥åˆ†ä¸ºå››ç§ï¼š å‡ ä½•å˜æ¢ã€å…‰å­¦å˜æ¢ã€å¢å¼ºå™ªå£°ã€æ•°æ®æºæ‰©å……ã€‚</p><ul><li><p>å‡ ä½•å˜æ¢ï¼šå¯ä»¥ä¸°å¯Œç‰©ä½“åœ¨å›¾åƒä¸­å‡ºç°çš„ä½ç½®å’Œå°ºåº¦ç­‰ï¼Œ ä»è€Œæ»¡è¶³æ¨¡å‹çš„å¹³ç§»ä¸å˜æ€§ä¸å°ºåº¦ä¸å˜æ€§ã€‚ä¾‹å¦‚å¹³ç§»ï¼Œ ç¿»è½¬ã€ç¿»è½¬ã€ç¼©æ”¾å’Œè£å‰ªç­‰æ“ä½œã€‚å°¤å…¶æ˜¯æ°´å¹³ç¿»è½¬ 180åº¦ï¼Œ åœ¨å¤šä¸ªç‰©ä½“æ£€æµ‹ç®—æ³•ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œ æ•ˆæœå¾ˆå¥½ã€‚</p></li><li><p>å…‰å­¦å˜åŒ–ï¼šå¯ä»¥å¢åŠ ä¸åŒå…‰ç…§å’Œåœºæ™¯ä¸‹çš„å›¾åƒï¼Œ å…¸å‹çš„æ“ä½œæœ‰äº®åº¦ã€å¯¹æ¯”åº¦ã€è‰²ç›¸ä¸é¥±å’Œåº¦çš„éšæœºæ‰°åŠ¨ã€é€šé“è‰²åŸŸä¹‹é—´çš„äº¤æ¢ç­‰ã€‚</p></li><li><p>å¢åŠ å™ªå£°ï¼š é€šè¿‡åœ¨åŸå§‹å›¾åƒä¸Šå¢åŠ ä¸€å®šçš„æ‰°åŠ¨ï¼Œ å¦‚é«˜æ–¯å™ªå£°ã€‚ç¨å¾®å¤æ‚ä¸€ç‚¹çš„å°±æ˜¯åœ¨é¢ç§¯å¤§å°å¯é€‰å®šã€ä½ç½®éšæœºçš„çŸ©å½¢åŒºåŸŸä¸Šä¸¢å¼ƒåƒç´ äº§ç”Ÿé»‘è‰²çŸ©å½¢å—ã€‚ å¢åŠ å™ªå£°å¯ä»¥ä½¿æ¨¡å‹å¯¹å¯èƒ½é‡åˆ°çš„å™ªå£°ç­‰è‡ªç„¶æ‰°åŠ¨äº§ç”Ÿé²æ£’æ€§ï¼Œ ä»è€Œæå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚ éœ€è¦æ³¨æ„å™ªå£°ä¸èƒ½è¿‡å¤§ï¼Œ ä»¥å…å½±å“æ¨¡å‹çš„è¾“å‡ºã€‚ä¸Šé¢çš„å‡ ä½•å˜æ¢ç±»æ“ä½œï¼Œæ²¡æœ‰æ”¹å˜å›¾åƒæœ¬èº«çš„å†…å®¹ï¼Œå®ƒå¯èƒ½æ˜¯é€‰æ‹©äº†å›¾åƒçš„ä¸€éƒ¨åˆ†æˆ–è€…å¯¹åƒç´ è¿›è¡Œäº†é‡åˆ†å¸ƒã€‚å¦‚æœè¦æ”¹å˜å›¾åƒæœ¬èº«çš„å†…å®¹ï¼Œå°±å±äºé¢œè‰²å˜æ¢ç±»çš„æ•°æ®å¢å¼ºäº†ï¼Œå¸¸è§çš„åŒ…æ‹¬<strong>å™ªå£°ã€æ¨¡ç³Šã€é¢œè‰²å˜æ¢ã€æ“¦é™¤ã€å¡«å……</strong>ç­‰ç­‰ã€‚</p></li><li>æ•°æ®æºå¤´ï¼š æœ‰æ—¶ä¸ºäº†æ‰©å……æ•°æ®é›†ï¼Œ å¯ä»¥å°†æ£€æµ‹ç‰©ä½“ä¸å…¶ä»–èƒŒæ™¯å›¾åƒèåˆï¼Œé€šè¿‡æ›¿æ¢ç‰©ä½“èƒŒæ™¯çš„æ–¹å¼æ¥å¢åŠ æ•°æ®é›†çš„ä¸°å¯Œæ€§ã€‚  æ¯”å¦‚æ¯”è¾ƒæ—¶é«¦çš„ CutOutã€Mixupã€CutMixã€Mosaicã€label-smoothing ç­‰æ–¹æ¡ˆã€‚</li></ul><p>ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„æ•°æ®å¢å¼ºæ–¹æ¡ˆçš„ä»£ç è§£æ</p><h3 id="ä¸‰-ç®—æ³•ä¼˜åŒ–"><a href="#ä¸‰-ç®—æ³•ä¼˜åŒ–" class="headerlink" title="ä¸‰. ç®—æ³•ä¼˜åŒ–"></a>ä¸‰. ç®—æ³•ä¼˜åŒ–</h3><h4 id="1-å­¦ä¹ ç‡"><a href="#1-å­¦ä¹ ç‡" class="headerlink" title="1. å­¦ä¹ ç‡"></a>1. å­¦ä¹ ç‡</h4><p>å¸¸è§çš„å‡ ç§å­¦ä¹ ç‡çš„è°ƒæ•´æ–¹æ³•ï¼š  ReduceLROnPlateauã€ä½™å¼¦é€€ç«ã€StepLR</p><ul><li>ReduceLROnPlateauï¼šå½“æŒ‡å®šæŒ‡æ ‡ä¸ä¸‹é™ï¼ˆä¸Šå‡ï¼‰çš„æ—¶å€™ï¼Œ å°†å­¦ä¹ ç‡é™ä½ä¸ºåŸæ¥çš„ååˆ†ä¹‹ä¸€ã€‚æ˜¯è¿™ä¸‰ç§æ–¹æ¡ˆé‡Œé¢æœ€ä¼˜çš„ï¼Œ ä»–å¯ä»¥æ ¹æ®è®­ç»ƒçš„æƒ…å†µè¿›è¡ŒåŠ¨æ€è°ƒæ•´ï¼Œ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ ç”¨çš„æ—¶å€™æœ€å¥½è®¾ç½®ä¸€ä¸‹æœ€å°å­¦ä¹ ç‡ï¼Œä¸ç„¶åæœŸä¼šå› ä¸ºå­¦ä¹ ç‡è¡°å‡å¾—è¿‡å°å¯¼è‡´æ¨¡å‹ä¸å†è®­ç»ƒã€‚</li><li>ä½™å¼¦é€€ç«ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ€å¤§å­¦ä¹ ç‡å’Œæœ€å°å­¦ä¹ ç‡ç›¸å·®çš„æ•°é‡çº§ä¸è¦å¤ªå¤§(æ¯”å¦‚1e-1å’Œ1e-4)ï¼Œä¸ç„¶ä¼šå¯¼è‡´åœ¨è¯¥å¿«çš„æ—¶å€™å¤ªæ…¢ï¼Œåœ¨è¯¥æ…¢çš„æ—¶å€™å¤ªå¿«ï¼Œç‰¹åˆ«çš„æ¥è¿‘æœ€ä¼˜è§£çš„æ—¶å€™ï¼Œå¤ªå¤§å°±ç›´æ¥è·‘åã€‚</li><li>StepLRå°±å¾ˆä¼ ç»Ÿï¼Œä¹ŸæŒºå¥½ç”¨çš„ï¼Œä½†æ˜¯çµæ´»åº¦ä¸å¦‚ ReduceLROnPlateauã€‚</li></ul><p>warmupï¼šwarmup æ˜¯åœ¨ resnet è®ºæ–‡ä¸­æåˆ°çš„ä¸€ç§å­¦ä¹ ç‡é¢„çƒ­çš„æ–¹æ³•ï¼Œå®ƒåœ¨è®­ç»ƒå¼€å§‹çš„æ—¶å€™å…ˆé€‰æ‹©ä½¿ç”¨ä¸€ä¸ªè¾ƒå°çš„å­¦ä¹ ç‡ï¼Œè®­ç»ƒäº†ä¸€äº› epoches æˆ–è€… steps (æ¯”å¦‚ 4 ä¸ªepoches, 10000steps)ï¼Œ å†ä¿®æ”¹ä¸ºé¢„å…ˆè®¾ç½®çš„å­¦ä¹ æ¥è¿›è¡Œè®­ç»ƒã€‚ç”±äºåˆšå¼€å§‹è®­ç»ƒæ—¶ï¼Œæ¨¡å‹çš„æƒé‡(weights)æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œæ­¤æ—¶è‹¥é€‰æ‹©ä¸€ä¸ªè¾ƒå¤§çš„å­¦ä¹ ç‡,å¯èƒ½å¸¦æ¥æ¨¡å‹çš„ä¸ç¨³å®š(æŒ¯è¡)ï¼Œé€‰æ‹© Warmup é¢„çƒ­å­¦ä¹ ç‡çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿å¾—å¼€å§‹è®­ç»ƒçš„å‡ ä¸ª epoches æˆ–è€…ä¸€äº› steps å†…å­¦ä¹ ç‡è¾ƒå°ï¼Œåœ¨é¢„çƒ­çš„å°å­¦ä¹ ç‡ä¸‹ï¼Œæ¨¡å‹å¯ä»¥æ…¢æ…¢è¶‹äºç¨³å®š,ç­‰æ¨¡å‹ç›¸å¯¹ç¨³å®šåå†é€‰æ‹©é¢„å…ˆè®¾ç½®çš„å­¦ä¹ ç‡è¿›è¡Œè®­ç»ƒ,ä½¿å¾—æ¨¡å‹æ”¶æ•›é€Ÿåº¦å˜å¾—æ›´å¿«ï¼Œæ¨¡å‹æ•ˆæœæ›´ä½³ã€‚</p><h4 id="2-ä¼˜åŒ–å™¨"><a href="#2-ä¼˜åŒ–å™¨" class="headerlink" title="2. ä¼˜åŒ–å™¨"></a>2. ä¼˜åŒ–å™¨</h4><h4 id="3-å½’ä¸€åŒ–"><a href="#3-å½’ä¸€åŒ–" class="headerlink" title="3. å½’ä¸€åŒ–"></a>3. å½’ä¸€åŒ–</h4><p>å¸¸è§çš„å½’ä¸€åŒ–æ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­ N æ˜¯ batch sizeï¼Œ C è¡¨ç¤ºçš„æ˜¯ channelï¼Œ H å’Œ W è¡¨ç¤ºå•å¼ å›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦, è“è‰²åŒºåŸŸçš„éƒ¨åˆ†å°±æ˜¯éœ€è¦å½’ä¸€åŒ–çš„éƒ¨åˆ†ã€‚</p><p><img src="/2020/10/21/principles-of-detection-network-design/7.png" style="zoom:60%;"></p><p>å½’ä¸€åŒ–æ­¥éª¤</p><ul><li><p>è®¡ç®—å½’ä¸€åŒ–éƒ¨åˆ†çš„å‡å€¼ $\mu$ï¼Œæ–¹å·® $\sigma^2$ , è¿›è¡Œå½’ä¸€åŒ–  $xâ€™ = \frac{x-\mu}{\sqrt{\sigma^2 + t}}$ </p></li><li><p>åŠ å…¥ç¼©æ”¾å’Œå¹³ç§»å˜é‡ $\gamma$ å’Œ $\beta$ï¼Œ å½’ä¸€åŒ–åçš„å€¼ $y = \gamma xâ€™ + \beta$</p></li></ul><p>Batch Normalizationï¼š<strong>BNé€‚ç”¨äºåˆ¤åˆ«æ¨¡å‹ï¼Œæ¯”å¦‚å›¾ç‰‡åˆ†ç±»æ¨¡å‹</strong>ã€‚BN æ³¨é‡å¯¹æ¯ä¸ª batch è¿›è¡Œå½’ä¸€åŒ–ï¼Œä»è€Œä¿è¯æ•°æ®åˆ†å¸ƒçš„ä¸€è‡´æ€§ï¼Œè€Œåˆ¤åˆ«æ¨¡å‹çš„ç»“æœæ­£æ˜¯å–å†³äºæ•°æ®æ•´ä½“åˆ†å¸ƒã€‚ä½†æ˜¯ BN å¯¹ batchsize çš„å¤§å°æ¯”è¾ƒæ•æ„Ÿï¼Œç”±äºæ¯æ¬¡è®¡ç®—çš„å‡å€¼å’Œæ–¹å·®æ˜¯åœ¨ä¸€ä¸ª batch ä¸Šï¼Œæ‰€ä»¥å¦‚æœ batchsize å¤ªå°ï¼Œåˆ™è®¡ç®—çš„å‡å€¼æ–¹å·®ä¸è¶³ä»¥ä»£è¡¨æ•´ä¸ªæ•°æ®åˆ†å¸ƒã€‚</p><p>Instance Normalization<strong>: </strong>IN é€‚ç”¨äºç”Ÿæˆæ¨¡å‹ï¼Œæ¯”å¦‚å›¾ç‰‡åˆ†å‰²ã€è¿ç§»ã€‚å› ä¸ºå›¾ç‰‡ç”Ÿæˆçš„ç»“æœä¸»è¦ä¾èµ–äºæŸä¸ªå›¾åƒå®ä¾‹ï¼Œæ‰€ä»¥å¯¹æ•´ä¸ª batch å½’ä¸€åŒ–ä¸é€‚åˆå›¾åƒé£æ ¼åŒ–ä¸­ï¼Œåœ¨é£æ ¼è¿ç§»ä¸­ä½¿ç”¨Instance Norm ä¸ä»…å¯ä»¥åŠ é€Ÿæ¨¡å‹æ”¶æ•›ï¼Œå¹¶ä¸”å¯ä»¥ä¿æŒå›¾åƒå®ä¾‹ä¹‹é—´çš„ç‹¬ç«‹ã€‚</p><p>Group Normalization:ä¸ºäº†è§£å†³ Batch Normalization å¯¹è¾ƒå°çš„ mini-batch æ•ˆæœå·®çš„é—®é¢˜(æ²¡åŠæ³•é€šè¿‡å‡ ä¸ªæ ·æœ¬çš„æ•°æ®é‡ï¼Œæ¥è¿‘ä¼¼æ€»ä½“çš„å‡å€¼å’Œæ ‡å‡†å·®)ã€‚å…¶ä¸»è¦æ€æƒ³æ˜¯åœ¨ channel æ–¹å‘ groupï¼Œç„¶åæ¯ä¸ª group å†…åšå½’ä¸€åŒ–<em>*ï¼Œè®¡ç®— (C/G)</em>H*W çš„å‡å€¼å’Œæ–¹å·®ï¼Œè¿™æ ·å°±ä¸ batch size æ— å…³ï¼Œä¸å—å…¶çº¦æŸã€‚Group Normalization æŠŠæ¯ä¸€ä¸ªæ ·æœ¬ç‰¹å¾å›¾çš„é€šé“åˆ†æˆ G ç»„ï¼Œå¯¹æ¯ç»„æ±‚å‡å€¼å’Œæ ‡å‡†å·®ï¼Œå¹¶ç‹¬ç«‹åœ°è¿›è¡Œå½’ä¸€åŒ–ã€‚</p><p>Layer Normlizationï¼šLayer Normalization çš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯ä¸éœ€è¦æ‰¹è®­ç»ƒï¼Œåœ¨å•æ¡æ•°æ®å†…éƒ¨å°±èƒ½å½’ä¸€åŒ–ï¼Œå› æ­¤å¯ä»¥ç”¨äº batch size ä¸º 1 å’Œ RNN ä¸­ã€‚<strong>Layer Normalization ç”¨äº RNN æ•ˆæœæ¯”è¾ƒæ˜æ˜¾ï¼Œä½†æ˜¯åœ¨CNNä¸Šï¼Œæ•ˆæœä¸å¦‚BN</strong> </p><h4 id="4-åˆå§‹åŒ–"><a href="#4-åˆå§‹åŒ–" class="headerlink" title="4. åˆå§‹åŒ–"></a>4. åˆå§‹åŒ–</h4><p>ç½‘ç»œå‚æ•°åˆå§‹åŒ–çš„ä¼˜åŠ£åœ¨æå¤§ç¨‹åº¦ä¸Šå†³å®šäº†ç½‘ç»œçš„æœ€ç»ˆæ€§èƒ½ã€‚ç½‘ç»œå‚æ•°åˆå§‹åŒ–æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>å…¨é›¶åˆå§‹åŒ–ï¼šå…¨é›¶åˆå§‹åŒ–ä¼šå¯¼è‡´ç¥ç»å…ƒçš„è¾“å‡ºç›¸åŒï¼Œç›¸åŒçš„è¾“å‡ºå¯¼è‡´æ¢¯åº¦æ›´æ–°å®Œå…¨ä¸€æ ·ï¼Œè¿™æ ·ä¾¿ä¼šä»¤æ›´æ–°åçš„å‚æ•°ä»ç„¶ä¿æŒä¸€æ ·çš„çŠ¶æ€ï¼Œä»è€Œæ— æ³•å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚</li><li>éšæœºåˆå§‹åŒ–ï¼šå°†å‚æ•°å€¼éšæœºè®¾å®šä¸ºæ¥è¿‘0çš„ä¸€ä¸ªå¾ˆå°çš„éšæœºæ•°ï¼ˆæœ‰æ­£æœ‰è´Ÿï¼‰ã€‚æ¯”å¦‚ä½¿ç”¨é«˜æ–¯åˆ†å¸ƒæˆ–è€…å‡åŒ€åˆ†å¸ƒã€‚æ¯”è¾ƒæ¨èçš„æ¨¡å‹åŒ…æ‹¬ï¼š Xavier åˆå§‹åŒ–æ–¹å¼å’Œ Kaiming åˆå§‹åŒ–æ–¹å¼ã€‚</li><li><p>é¢„è®­ç»ƒæ¨¡å‹åˆå§‹åŒ–</p></li><li><p>æ•°æ®æ•æ„Ÿçš„å‚æ•°åˆå§‹åŒ–æ–¹å¼  <a href="https://github.com/philkr/magic_init">https://github.com/philkr/magic_init</a></p></li></ul><h3 id="å››-å…¶ä»–"><a href="#å››-å…¶ä»–" class="headerlink" title="å››. å…¶ä»–"></a>å››. å…¶ä»–</h3><h4 id="1-ç¼–å†™ä»£ç çš„åŸºæœ¬æµç¨‹"><a href="#1-ç¼–å†™ä»£ç çš„åŸºæœ¬æµç¨‹" class="headerlink" title="1. ç¼–å†™ä»£ç çš„åŸºæœ¬æµç¨‹"></a>1. ç¼–å†™ä»£ç çš„åŸºæœ¬æµç¨‹</h4><ul><li>æ„å»ºç½‘ç»œï¼Œ è¾“å…¥éšæœº Tensorï¼Œ æ£€æŸ¥è¾“å…¥å’Œè¾“å‡ºæ˜¯å¦æ­£ç¡®ã€‚</li><li>æ„å»ºæ•°æ®é›†è¯»å–æ¥å£ï¼Œ æŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿå‡†ç¡®çš„è¯»å–æ•°æ®ã€å¯è§†åŒ–ï¼Œå¹¶æ£€æµ‹æ•°æ®</li><li>ç¼–å†™æŸå¤±å‡½æ•°ã€è¯„ä»·æŒ‡æ ‡ï¼Œä¼˜åŒ–æ–¹æ³•</li><li>ç»„åˆä¼˜åŒ–ã€æ•°æ®å’Œç½‘ç»œ</li></ul><h4 id="2-ç½‘ç»œè®¾è®¡çš„è€ƒè™‘ç‚¹"><a href="#2-ç½‘ç»œè®¾è®¡çš„è€ƒè™‘ç‚¹" class="headerlink" title="2. ç½‘ç»œè®¾è®¡çš„è€ƒè™‘ç‚¹"></a>2. ç½‘ç»œè®¾è®¡çš„è€ƒè™‘ç‚¹</h4><ul><li>ç°æœ‰ç²¾åº¦èƒ½å¦å¾—åˆ°éœ€æ±‚çš„æŒ‡æ ‡</li><li>è¿ç®—èµ„æºæ˜¯å¦è¶³å¤Ÿ</li></ul><h3 id="äº”-å¸¸è§é—®é¢˜"><a href="#äº”-å¸¸è§é—®é¢˜" class="headerlink" title="äº”. å¸¸è§é—®é¢˜"></a>äº”. å¸¸è§é—®é¢˜</h3><h5 id="1-å¤šå°ºåº¦é—®é¢˜"><a href="#1-å¤šå°ºåº¦é—®é¢˜" class="headerlink" title="1. å¤šå°ºåº¦é—®é¢˜"></a>1. å¤šå°ºåº¦é—®é¢˜</h5><p>æˆ‘ä»¬æ€»ç»“äº† 6 ç§ æœ‰æ•ˆè§£å†³å¤šå°ºåº¦é—®é¢˜çš„æ–¹æ¡ˆï¼Œ å…¶ä¸­å‰å››ç§æ˜¯æ¯”è¾ƒé€šç”¨çš„æå‡å¤šå°ºåº¦æ£€æµ‹çš„ç»å…¸æ–¹æ³•</p><p>ï¼ˆ1ï¼‰ é™ä½ä¸‹é‡‡æ ·ç‡å’Œä½¿ç”¨ç©ºæ´å·ç§¯å¯ä»¥æ˜¾è‘—æé«˜å°ç‰©ä½“çš„æ£€æµ‹æ€§èƒ½ï¼š å¯¹äºå°ç‰©ä½“æ£€æµ‹è€Œè¨€ï¼Œ é™ä½ç½‘ç»œçš„ä¸‹é‡‡æ ·ç‡æ˜¯æœ€ä¸ºç®€å•çš„æå‡æ–¹å¼ï¼Œ é€šå¸¸çš„åšæ³•æ˜¯ç›´æ¥å»æ‰ pooling å±‚ã€‚ å¦‚æœä»…ä»…å»æ‰ pooling å±‚ï¼Œ åˆ™ååºå±‚çš„æ„Ÿå—é‡ä¼šè¾ƒå°ï¼Œ ç”±äºååºå±‚çš„æ„Ÿå—é‡å’Œé¢„è®­ç»ƒæ¨¡å‹å¯¹åº”å±‚çš„æ„Ÿå—é‡ä¸åŒï¼Œ ä»è€Œä¼šå¯¼è‡´ä¸èƒ½å¾ˆå¥½çš„æ”¶æ•›ï¼Œ ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åšæ³•æ˜¯<strong>å»æ‰ pooling å±‚åï¼Œå°†ååºçš„ä¸€ä¸ª 3x3 å·ç§¯å˜ä¸º ç©ºæ´æ•°ä¸º 2 çš„å·ç§¯ï¼Œ å¯ä»¥è¾¾åˆ°æœ‰æ•ˆçš„é™ä½ä¸‹é‡‡æ ·çš„ç›®çš„</strong>ã€‚</p><p>ï¼ˆ2ï¼‰ è®¾è®¡æ›´å¥½çš„ anchor å¯ä»¥æœ‰æ•ˆæå‡ proposal çš„è´¨é‡ï¼šç”±äºä¸åŒçš„æ•°æ®é›†åˆä»»åŠ¡ä¸­ï¼Œ ç”±äºç‰©ä½“çš„å°ºåº¦ã€å¤§å°ä¼šæœ‰æ‰€å·®å¼‚ï¼Œ ä¸é€šç”¨çš„æ ‡ç­¾ä¼šæœ‰æ‰€åŒºåˆ«ï¼Œ è¿™æ—¶éœ€è¦è°ƒæ•´ anchor çš„å¤§å°å’Œå®½é«˜ã€‚ <strong>ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„åšæ³•æ˜¯ yolo é‡‡ç”¨çš„ anchor èšç±»ç®—æ³•</strong>ã€‚</p><p>ï¼ˆ3ï¼‰å¤šå°ºåº¦è®­ç»ƒ(MST, Multi Scale Trainingï¼Œ MST)å¯ä»¥è¿‘ä¼¼æ„å»ºå‡ºå›¾åƒé‡‘å­—å¡”ï¼Œ å¢åŠ æ ·æœ¬çš„å¤šæ ·æ€§ï¼šé€šå¸¸æ˜¯æŒ‡<strong>è®¾ç½®å‡ ç§ä¸åŒçš„å›¾ç‰‡è¾“å…¥å°ºåº¦ï¼Œ è®­ç»ƒæ—¶ä»å¤šä¸ªå°ºåº¦ä¸­éšæœºé€‰å–ä¸€ç§å°ºåº¦ï¼Œ å°†è¾“å…¥å›¾ç‰‡ç¼©æ”¾åˆ°è¯¥å°ºåº¦å¹¶é€å…¥ç½‘ç»œä¸­</strong>ã€‚ åœ¨æµ‹è¯•ä¸­ï¼Œ <strong>ä¸ºäº†å¾—åˆ°ç²¾å‡†çš„æ£€æµ‹æ•ˆæœï¼Œå¯ä»¥å°†æµ‹è¯•å›¾ç‰‡çš„å°ºåº¦æ”¾å¤§ï¼Œ ä¾‹å¦‚æ”¾å¤§ 4 å€ã€‚ è¿™æ ·å¯ä»¥é¿å…å°ç‰©ä½“çš„æ¼æ£€</strong>ã€‚</p><p>ï¼ˆ4ï¼‰ ç‰¹å¾èåˆå¯ä»¥æ„å»ºå‡ºç‰¹å¾é‡‘å­—å¡”ï¼Œ å°†æµ…å±‚ä¸æ·±å±‚ç‰¹å¾ä¼˜åŠ¿äº’è¡¥ï¼šéšç€ç½‘ç»œå±‚æ•°çš„å¢åŠ ï¼Œ æ„Ÿå—é‡ä¼šå¢å¤§ï¼Œè¯­ä¹‰ä¿¡æ¯ä¹Ÿæ›´ä¸ºä¸°å¯Œï¼Œ ä½†æ˜¯å¯¹äºå°ç‰©ä½“ï¼Œ å…¶ç‰¹å¾ä¼šéšç€å±‚æ•°çš„åŠ æ·±è€Œé€æ¸ä¸¢å¤±ï¼Œ ä»è€Œå¯¼è‡´æ£€æµ‹æ€§èƒ½çš„é™ä½ã€‚ <strong>å°†æ·±æµ…å±‚ç‰¹å¾è¿›è¡Œèåˆï¼Œå¯ä»¥å®ç°åº•å±‚ç‰¹å¾å’Œé«˜å±‚è¯­ä¹‰ä¿¡æ¯çš„èåˆ</strong>ã€‚ å¸¸è§çš„åšæ³•æœ‰ï¼š FPNçš„ç‰¹å¾é‡‘å­—å¡”ã€ DetNet çš„ç©ºæ´å·ç§¯ä¸æ®‹å·®ã€HyperNet çš„åå·ç§¯ä¸é€šé“æ‹¼æ¥ã€DSSD çš„åå·ç§¯ä¸ç‰¹å¾ç›¸ä¹˜ã€RefineDet çš„åå·ç§¯ä¸é€å…ƒç´ ç›¸åŠ ï¼Œ YOLOv3 çš„ä¸Šé‡‡æ ·ä¸é€šé“æ‹¼æ¥ã€‚</p><p>ï¼ˆ5ï¼‰ SNIP: SNIP ä½¿ç”¨äº†ç´¯æ­» MST çš„å¤šå°ºåº¦è®­ç»ƒæ–¹æ³•ï¼Œ æ„å»ºäº† 3 ä¸ª å°ºåº¦çš„å›¾åƒé‡‘å­—å¡”ï¼Œ 3 ä¸ªå°ºåº¦åˆ†åˆ«æ‹¥æœ‰å„è‡ªçš„ RPN æ¨¡å—ï¼Œ å„è‡ªé¢„æµ‹æŒ‡å®šèŒƒå›´å†…çš„ç‰©ä½“ã€‚ä½†æ˜¯åœ¨è®­ç»ƒæ—¶ï¼Œ åªå¯¹æŒ‡å®šèŒƒå›´çš„ proposal è¿›è¡Œåå‘ä¼ æ’­ã€‚</p><p><img src="/2020/10/21/principles-of-detection-network-design/9.png" style="zoom:40%;"></p><p>ï¼ˆ6ï¼‰ TridentNetï¼šæå‡ºäº†ä¸€ä¸ªæ‹¥æœ‰ä¸‰ä¸ªåˆ†æ”¯çš„ç½‘ç»œç»“æ„ï¼Œ 3ä¸ªä¸åŒçš„åˆ†æ”¯ä½¿ç”¨äº†ç©ºæ´æ•°ä¸åŒçš„ç©ºæ´å·ç§¯ï¼Œ æ„Ÿå—é‡ç”±å¤§åˆ°å°ï¼Œ æ›´å¥½çš„è¦†ç›–äº†å¤šå°ºåº¦çš„ç‰©ä½“åˆ†å¸ƒã€‚ ä¸‰ä¸ªåˆ†æ”¯æ£€æµ‹çš„å†…å®¹æ˜¯ç›¸åŒçš„ï¼Œ è¦å­¦ä¹ çš„ç‰¹å¾ä¹Ÿç›¸åŒï¼Œ ä¸è¿‡æ˜¯å½¢æˆä¸åŒçš„æ„Ÿå—é‡æ¥æ£€æµ‹ä¸åŒå°ºåº¦çš„ç‰©ä½“ï¼Œ å€Ÿé‰´äº† SNIP çš„æ€æƒ³ï¼Œ æ¯ä¸€ä¸ªåˆ†æ”¯åªè®­ç»ƒä¸€å®šèŒƒå›´å†…çš„æ ·æœ¬ã€‚</p><p><img src="/2020/10/21/principles-of-detection-network-design/8.png" style="zoom:49%;"></p><h5 id="2-æ‹¥æŒ¤å’Œé®æŒ¡ç‰©ä½“æ£€æµ‹"><a href="#2-æ‹¥æŒ¤å’Œé®æŒ¡ç‰©ä½“æ£€æµ‹" class="headerlink" title="2. æ‹¥æŒ¤å’Œé®æŒ¡ç‰©ä½“æ£€æµ‹"></a>2. æ‹¥æŒ¤å’Œé®æŒ¡ç‰©ä½“æ£€æµ‹</h5><p>(1) æ”¹è¿› nmsï¼š ç”±äº nms å¯¹é®æŒ¡æ£€æµ‹å½±å“è¾ƒå¤§ï¼Œ å› æ­¤æ”¹è¿› nms æ˜¯ä¸€ä¸ªæ€è·¯ã€‚ æ¯”å¦‚ä½¿ç”¨ soft nms å’Œ IoU-Net ç­‰æ–¹æ³•éƒ½èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡æ£€æµ‹çš„æ€§èƒ½ã€‚</p><p>(2) å¢åŠ è¯­ä¹‰ä¿¡æ¯ï¼š é®æŒ¡ä¼šé€ æˆéƒ¨åˆ†ä¿¡æ¯çš„ç¼ºå¤±ï¼Œ å› æ­¤å¯ä»¥å°è¯•å¼•å…¥é¢å¤–çš„ç‰¹å¾ï¼Œ å¦‚åˆ†å‰²ä¿¡æ¯ã€æ¢¯åº¦å’Œè¾¹ç¼˜ä¿¡æ¯ç­‰ã€‚å¦‚ CVPR 2017 çš„è®ºæ–‡ HyperLearnerã€‚</p><p>(3) åˆ’åˆ†å¤šä¸ª part å¤„ç†ï¼šæ¯”å¦‚è¡Œäººä¹‹é—´çš„å½¢çŠ¶è¾ƒä¸ºç±»ä¼¼ï¼Œ å› æ­¤å¯ä»¥åˆ©ç”¨è¿™ä¸ªå…ˆéªŒä¿¡æ¯ï¼Œ å°†è¡ŒäººæŒ‰ç…§ä¸åŒéƒ¨ä½ï¼Œ å¦‚å¤´éƒ¨ã€ä¸Šèº«ã€æ‰‹è‡‚ç­‰åˆ’åˆ†ä¸ºå¤šä¸ª part è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œ ç„¶åå†ç»¼åˆè€ƒè™‘ã€‚</p><p>(4) repulsion los: CVPR 2018 çš„ Repulsion Loss æ–¹æ³•ä»æŸå¤±å‡½æ•°çš„è§’åº¦å‡ºå‘ï¼Œ å¼•å…¥äº†æ–°é¢–çš„æ’æ–¥æŸå¤±ã€‚</p><p>(5) OR-CNN: ECCV 2018 çš„ ORCNN è®¾è®¡å¼•å…¥äº†ä¸€ç§æ–°çš„æŸå¤± Aggregation Lossï¼Œ ä½¿å¾—å¤šä¸ªåŒ¹é…åˆ°åŒä¸€ç‰©ä½“æ ‡ç­¾çš„ anchor å°½é‡åœ°é è¿‘ï¼› åœ¨ RoI pooling å¤„æ ¹æ®è¡Œäººéƒ¨ä½åˆ†ä¸ºäº† 5 ä¸ªä¸åŒçš„æ¨¡å—ï¼Œ æå‡ºäº† PORoI Pooling æ–¹æ³•ã€‚</p><h5 id="3-é«˜æ•ˆ-detection"><a href="#3-é«˜æ•ˆ-detection" class="headerlink" title="3. é«˜æ•ˆ detection"></a>3. é«˜æ•ˆ detection</h5><ul><li><p>å¯ä»¥ä»æ¨¡å‹å‹ç¼©å’ŒåŠ é€Ÿçš„è§’åº¦è¿›è¡Œè€ƒè™‘ï¼šä½¿ç”¨è½»é‡çº§ç½‘ç»œã€å‰ªæã€é‡åŒ–ã€è’¸é¦ç­‰æ–¹æ³•å¯¹ä¸»å¹²ç½‘ç»œè¿›è¡Œç®€åŒ–ã€‚</p></li><li><p>å¯ä»¥ä»æ£€æµ‹æ¡†æ¶çš„è§’åº¦è¿›è¡Œè€ƒè™‘ï¼šé€šè¿‡åˆç†çš„è®¾è®¡ backboneã€FPNã€head ç”šè‡³æ˜¯é‡æ–°è®¾è®¡ç½‘ç»œç»“æ„ã€‚</p></li></ul><h5 id="4-æ ·æœ¬ä¸å‡è¡¡çš„é—®é¢˜"><a href="#4-æ ·æœ¬ä¸å‡è¡¡çš„é—®é¢˜" class="headerlink" title="4. æ ·æœ¬ä¸å‡è¡¡çš„é—®é¢˜"></a>4. æ ·æœ¬ä¸å‡è¡¡çš„é—®é¢˜</h5><p>å¾ˆå¤šé—®é¢˜ï¼Œ åº”è¯¥ä»ä¸‰ä¸ªæ–¹å‘è¿›è¡Œè€ƒè™‘ï¼š æ¨¡å‹(model + loss + nms)ã€æ•°æ®ã€ç®—æ³•</p><ul><li>ä¸€ä¸ªå¾ˆç›´è§‚çš„æ–¹å‘ï¼šä¿®æ”¹æŸå¤±å‡½æ•°ï¼Œ æ¯”å¦‚ focal loss å’Œ OHGM</li><li>ä»æ•°æ®é›†çš„è§’åº¦è¿›è¡Œåˆ†æï¼šè¿›è¡Œæ•°æ®çš„é‡é‡‡æ ·ã€æ•°æ®çš„å¢å¼ºã€cutmix æ“ä½œç­‰</li><li></li></ul><h5 id="5-å…¶ä»–çš„å‡ ä¸ªé—®é¢˜"><a href="#5-å…¶ä»–çš„å‡ ä¸ªé—®é¢˜" class="headerlink" title="5. å…¶ä»–çš„å‡ ä¸ªé—®é¢˜"></a>5. å…¶ä»–çš„å‡ ä¸ªé—®é¢˜</h5><ul><li>ç‰©ä½“ä¸å‡è¡¡çš„é—®é¢˜ &amp; é•¿å°¾é—®é¢˜</li><li>é‡æ–°æ€è€ƒ nms å’Œ anchor</li><li>ç‰©ä½“çš„å…³ç³»ï¼š relation network</li><li>nas</li><li>å®é™…åœºæ™¯ç»“åˆï¼š<ul><li>ä¼ æ„Ÿå™¨èåˆ</li><li>å®é™…åœºæ™¯çš„æ£€æµ‹ï¼šé›¾éœ¾ã€é›¨å¤©ã€å¤œæ™š</li></ul></li><li>å…¶ä»–</li></ul>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>super_resolution</title>
    <link href="/2020/10/10/super-resolution/"/>
    <url>/2020/10/10/super-resolution/</url>
    
    <content type="html"><![CDATA[<p>è¶…åˆ†è¾¨ç‡å¢å¼ºæ–¹å‘çš„ä¸€äº›è®°å½•</p><a id="more"></a><h4 id="1-è§£å†³æ–¹æ¡ˆ"><a href="#1-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1. è§£å†³æ–¹æ¡ˆ"></a>1. è§£å†³æ–¹æ¡ˆ</h4><h5 id="1-åŸºæœ¬è§£å†³æ–¹æ¡ˆ"><a href="#1-åŸºæœ¬è§£å†³æ–¹æ¡ˆ" class="headerlink" title="(1) åŸºæœ¬è§£å†³æ–¹æ¡ˆ"></a>(1) åŸºæœ¬è§£å†³æ–¹æ¡ˆ</h5><ul><li><p>SRCNN: é¦–æ¬¡æå‡ºäº† ç‰¹å¾æå–ã€éçº¿æ€§æ˜ å°„å’Œé‡å»ºä¸‰ä¸ªæ¨¡å—çš„ç†è®ºã€‚</p></li><li><p>VDSR: é¦–æ¬¡å°†æ•´ä½“æ®‹å·®å¼•å…¥åˆ° SR ä¸­ï¼Œ å¼•å¯¼äº†ä¹‹åçš„å¤§éƒ¨åˆ†çš„ SR æ®‹å·®è®¾è®¡ã€‚</p></li><li><p>SRResNetï¼š</p><ul><li>é¦–æ¬¡è®¾è®¡äº† ç‰¹å¾æå–ã€éçº¿æ€§æ˜ å°„ã€ä¸Šé‡‡æ ·ã€é‡å»ºå››ä¸ªæ¨¡å—</li><li>é¦–æ¬¡ä½¿ç”¨ GAN è¿›è¡Œç½‘ç»œè®­ç»ƒ</li><li>é¦–æ¬¡æå‡ºäº† æ„ŸçŸ¥æŸå¤±çš„æ¦‚å¿µ</li></ul></li><li><p>EDSRï¼šå»æ‰äº†å…¶ä¸­çš„ BN å±‚      <strong>NTIRE 2017 å† å†›æ¨¡å‹</strong></p></li><li><p>RCANï¼šåŠ å…¥äº† channnel æœºåˆ¶</p></li></ul><h5 id="2-ç§»åŠ¨ç«¯ç½‘ç»œ"><a href="#2-ç§»åŠ¨ç«¯ç½‘ç»œ" class="headerlink" title="(2) ç§»åŠ¨ç«¯ç½‘ç»œ:"></a>(2) ç§»åŠ¨ç«¯ç½‘ç»œ:</h5><p>CRANï¼šæ¶‰åŠäº†ä¸€ç§ç‹¬ç‰¹çš„è¿æ¥æœºåˆ¶ï¼Œæœ‰åˆ©äºä¿¡æ¯çš„æµåŠ¨ã€‚è½»é‡çº§åˆ«è¶…åˆ†</p><p>WDSRï¼šä¸»è¦æœ‰ä¸‰ç‚¹æ”¹è¿›:         <strong>NTIRE 2018 å† å†›æ¨¡å‹</strong></p><ul><li>æ•´ä½“ç»“æ„æ¶‰åŠæ”¹è¿›: ä¸¤æ¬¡ä¸Šé‡‡æ ·</li><li>weight Normalization</li><li>åœ¨æ®‹å·®æ¨¡å—ä¸­ ReLU æ¿€æ´»å‡½æ•°å‰å¢å¤§ç‰¹å¾å›¾</li></ul><h5 id="3-ä¸€äº›å…¶ä»–è®ºæ–‡"><a href="#3-ä¸€äº›å…¶ä»–è®ºæ–‡" class="headerlink" title="(3) ä¸€äº›å…¶ä»–è®ºæ–‡:"></a>(3) ä¸€äº›å…¶ä»–è®ºæ–‡:</h5><ul><li>TTSR:  èå…¥ transformer æ¨¡å‹</li><li>FANet: ç‰¹å¾èåˆ</li><li>IGNN(NUS): åŸºäºå›¾ç½‘ç»œçš„è¶…åˆ†è¾¨ç‡æ¨¡å‹</li><li>FLASR(xiaomi): åŸºäºnas çš„è¶…åˆ†è¾¨ç‡æ¨¡å‹</li><li>Microsoft: Invertible Image Rescaling</li><li>RawSR: ä» Raw æ•°æ®ç›´æ¥è¿›è¡Œè¶…åˆ†é‡å»º</li><li>Real SRï¼š è§£å†³çœŸå®åœºæ™¯å’Œåˆæˆæ•°æ®ä¹‹é—´çš„åŸŸè‡ªé€‚åº”é—®é¢˜     UDSR    <strong>NTIRE 2019 å† å†›æ¨¡å‹</strong></li><li>videoSR</li><li>ä¸€äº›æ–°å¼å·ç§¯çš„åº”ç”¨</li></ul><h5 id="4-ä¸€äº›æ–°çš„è§£å†³æ–¹æ¡ˆ"><a href="#4-ä¸€äº›æ–°çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="(4) ä¸€äº›æ–°çš„è§£å†³æ–¹æ¡ˆ"></a>(4) ä¸€äº›æ–°çš„è§£å†³æ–¹æ¡ˆ</h5><ul><li><p>IMDN:              <strong>NTIRE 2019 å† å†›æ¨¡å‹</strong>  <strong>2019å¹´å£°ç½‘ 4xSR å† å†›æ¨¡å‹</strong></p></li><li><p>AWSRN</p></li><li><p>DRLN</p></li></ul><h4 id="2-è¯„ä»·æŒ‡æ ‡"><a href="#2-è¯„ä»·æŒ‡æ ‡" class="headerlink" title="2. è¯„ä»·æŒ‡æ ‡"></a>2. è¯„ä»·æŒ‡æ ‡</h4><h5 id="1-å®¢è§‚è¯„ä»·æŒ‡æ ‡"><a href="#1-å®¢è§‚è¯„ä»·æŒ‡æ ‡" class="headerlink" title="(1) å®¢è§‚è¯„ä»·æŒ‡æ ‡"></a>(1) å®¢è§‚è¯„ä»·æŒ‡æ ‡</h5><p>â€‹    å¯¹äºè¶…åˆ†è¾¨ç‡é‡å»ºï¼Œå¸¸ç”¨çš„ä¸¤ä¸ªå®¢è§‚è¯„ä»·æŒ‡æ ‡æ˜¯<strong>å³°å€¼ä¿¡å™ªæ¯” (peak single to noise ratioï¼Œ PSNR)</strong>å’Œ<strong>ç»“æ„ç›¸ä¼¼æ€§æŒ‡æ ‡ (structure Similarity Index, SSIM)</strong>ï¼Œ è¿™ä¸¤ä¸ªæŒ‡æ ‡çš„å€¼è¶Šé«˜ï¼Œ é‡å»ºç»“æœä¸åŸå›¾è¶Šæ¥è¿‘ã€‚ ä¸»è¦æ³¨æ„çš„æ˜¯ï¼Œ åŸºäºæ„ŸçŸ¥æŸå¤±çš„ç½‘ç»œåœ¨ psnr æŒ‡æ ‡ å’Œ ssim ä¸Šå¹¶ä¸ä¸€å®šå¥½ï¼Œ ä½†æ˜¯çœ‹èµ·æ¥æ•ˆæœç›¸å¯¹ä¼šæ¯”è¾ƒå¥½ã€‚</p><p><strong>PSNR</strong> çš„å®šä¹‰ä¸º:</p><script type="math/tex; mode=display">PSNR = 10 log_{10}(\frac{Peak^2}{MSE})</script><p>é’ˆå¯¹äº uint8 æ•°æ®ï¼Œ æœ€å¤§çš„åƒç´ å€¼ä¸º 255, é’ˆå¯¹äºæµ®ç‚¹å‹æ•°æ®ï¼Œ æœ€å¤§åƒç´ å€¼ä¸º 1ã€‚</p><p><strong>SSIM</strong> å…¬å¼åŸºäºæ ·æœ¬  x å’Œ y  ä¹‹é—´çš„ä¸‰ä¸ªæ¯”è¾ƒè¡¡é‡: äº®åº¦(luminance)ã€å¯¹æ¯”åº¦(contrast) å’Œç»“æ„(structure)ã€‚ </p><script type="math/tex; mode=display">l(x, y) = \frac{2\mu_x \mu_y + c_1}{\mu_x^2 + \mu_y^2 + c_1} \\c(x, y) = \frac{2\sigma_x \sigma_y + c_2}{\sigma_x^2 + \sigma_y^2 + c_2} \\s(x, y) = \frac{\sigma_{xy} + c_3}{\sigma_x\sigma_y + c_3}</script><p>$\mu<em>x$ ä¸º $x$ çš„å‡å€¼ï¼Œ$\mu_y$ä¸º $y$ çš„å‡å€¼ã€‚$\sigma_x$ ä¸º $x$ çš„æ–¹å·®, $\sigma_y$ ä¸º $y$ çš„æ–¹å·®,  $Ïƒ</em>{xy}$ ä¸º $x$ å’Œ $y$ çš„åæ–¹å·®ã€‚</p><p>ä¸€èˆ¬å– $c1=(k_1L)^2$ï¼Œ $c2=(k_2L)^2 $ï¼Œ  $c3=c2/2$ï¼Œé¿å…é™¤é›¶ã€‚å…¶ä¸­ $L$ä½åƒç´ å€¼çš„èŒƒå›´ $2^B-1$ï¼Œ $k_1 = 0.01, k_2 = 0.03 ä¸ºé»˜è®¤å€¼$ã€‚</p><h5 id="2-ä¸»è§‚è¯„ä»·æŒ‡æ ‡"><a href="#2-ä¸»è§‚è¯„ä»·æŒ‡æ ‡" class="headerlink" title="(2) ä¸»è§‚è¯„ä»·æŒ‡æ ‡"></a>(2) ä¸»è§‚è¯„ä»·æŒ‡æ ‡</h5><p>â€‹    ç›®å‰è¿˜æ²¡æœ‰è¾ƒå¥½çš„(ä¼ª)ä¸»è§‚è¯„ä»·æŒ‡æ ‡ï¼Œ ä¸€èˆ¬è¿˜æ˜¯ä»¥å±•ç¤ºæˆ–è€…<strong>å¹³å‡ä¸»è§‚å¾—åˆ†(MOS) </strong>çš„æ–¹å¼æ¥å¯¹æ¯”ä¸åŒç®—æ³•çš„ä¸»è§‚æ•ˆæœã€‚MOS è¦æ±‚äººç±»æµ‹è¯„å‘˜å¯¹æµ‹è¯•å›¾åƒè¿›è¡Œè¯„ä»·ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåˆ†æ•°ä»1ï¼ˆåï¼‰åˆ°5ï¼ˆå¥½ï¼‰ï¼Œè€Œæœ€åçš„ MOS æ˜¯ä»¥æ‰€æœ‰è¯„åˆ†çš„ç®—æœ¯å¹³å‡å€¼è®¡ç®—çš„ã€‚</p><h5 id="3-å…¶ä»–"><a href="#3-å…¶ä»–" class="headerlink" title="(3) å…¶ä»–"></a>(3) å…¶ä»–</h5><p>â€‹    é™¤ä¸Šè¿° IQA æ–¹æ³•å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ä¸å¤ªå¸¸ç”¨çš„æ–¹æ³•ï¼Œ æ¯”å¦‚: å¤šå°ºåº¦ç»“æ„ç›¸ä¼¼æ€§(MS-SSIM)ã€ç‰¹å¾ç›¸ä¼¼æ€§(FSIM)ã€è‡ªç„¶å›¾åƒè´¨é‡è¯„ä¼°å™¨(NIQE)ç­‰ã€‚</p><ul><li>MS-SSIM ä½¿ç”¨å¤šå°ºåº¦çš„ SSIM</li><li>ç‰¹å¾ç›¸ä¼¼æ€§(FSIM)  æå–ç‰¹å¾ç‚¹ï¼Œ åŸºäºç›¸ä½ä¸€è‡´æ€§å’Œå›¾åƒçš„äººç±»å…´è¶£çš„æ¢¯åº¦å¹…åº¦æ¥è¯„ä¼°å›¾åƒè´¨é‡ã€‚</li><li>NIQE</li></ul><p>â€‹     æœ€è¿‘ï¼ŒBlauç­‰äºº[77]ç”¨æ•°å­¦æ–¹æ³•è¯æ˜äº†å¤±çœŸï¼ˆå¦‚PSNRï¼ŒSSIMï¼‰å’Œæ„ŸçŸ¥è´¨é‡ï¼ˆå¦‚MOSï¼‰æ˜¯ç›¸äº’çŸ›ç›¾çš„ï¼Œå¹¶è¡¨æ˜éšç€å¤±çœŸåº¦é™ä½ï¼Œæ„ŸçŸ¥è´¨é‡ä¸€å®šæ›´å·®ã€‚ å› æ­¤ï¼Œå¦‚ä½•å‡†ç¡®åœ°æµ‹é‡SRè´¨é‡ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªäºŸå¾…è§£å†³çš„é—®é¢˜ã€‚</p><h5 id="4-å¤æ‚åº¦ï¼Œè¿è¡Œæ—¶é—´ã€å‚æ•°é‡"><a href="#4-å¤æ‚åº¦ï¼Œè¿è¡Œæ—¶é—´ã€å‚æ•°é‡" class="headerlink" title="(4) å¤æ‚åº¦ï¼Œè¿è¡Œæ—¶é—´ã€å‚æ•°é‡"></a>(4) å¤æ‚åº¦ï¼Œè¿è¡Œæ—¶é—´ã€å‚æ•°é‡</h5><p>å¦å¤–ï¼Œç½‘ç»œçš„å¥½åä¸åº”è¯¥ä»…ä»…ä¾æ¬¡æ¥è¿›è¡Œè¯„åˆ¤ï¼Œ è¿˜éœ€è¦è€ƒè™‘ç½‘ç»œçš„<strong>ç½‘ç»œçš„å¤æ‚åº¦</strong>ï¼Œ<strong>è¿è¡Œæ—¶é—´ runtime</strong>,  <strong>å‚æ•°é‡</strong> ç­‰å› ç´ ã€‚</p><ul><li><p>è¿è¡Œæ—¶é—´: è¿™é‡Œé€‰æ‹© <code>torch.cuda.Event</code> è¿›è¡Œè®¡æ—¶:</p><pre><code class="hljs python">start = torch.cuda.Event(enable_timing=<span class="hljs-literal">True</span>)end = torch.cuda.Event(enable_timing=<span class="hljs-literal">True</span>)start.record() ... some CPU bound operations, i.e. loading data ...end.record()<span class="hljs-comment"># Waits for everything to finish running</span>torch.cuda.synchronize()print(start.elapsed_time(end))</code></pre></li><li><p>æ¨¡å‹å¤æ‚åº¦<br>ä½¿ç”¨  <a href="https://github.com/mit-han-lab/torchprofile">https://github.com/mit-han-lab/torchprofile</a>  æ¥ç»Ÿè®¡æ¨¡å‹çš„å¤æ‚åº¦ï¼Œ å…¶å¯¹æ¯ä¸€å±‚è¿›è¡Œåˆ†æã€‚</p></li></ul><h4 id="3-æ•°æ®å¢å¼º"><a href="#3-æ•°æ®å¢å¼º" class="headerlink" title="3. æ•°æ®å¢å¼º"></a>3. æ•°æ®å¢å¼º</h4><ul><li>ç¿»è½¬</li><li>æ—‹è½¬</li><li>Rethinking Data Augmentation for Image Super-resolution: A Comprehensive Analysis and a New Strategy</li></ul><h4 id="4-æŸå¤±å‡½æ•°"><a href="#4-æŸå¤±å‡½æ•°" class="headerlink" title="4. æŸå¤±å‡½æ•°:"></a>4. æŸå¤±å‡½æ•°:</h4><h5 id="L1-or-L2"><a href="#L1-or-L2" class="headerlink" title="L1 or L2"></a>L1 or L2</h5><ul><li><p>l2 æŸå¤±æ˜¯åˆ·é«˜ pnsr çš„ç†æƒ³æŸå¤±å‡½æ•°ï¼Œä½†æ˜¯ï¼Œl2 æŸå¤±å¯¹å¤§çš„ error æœ‰è¾ƒå¼ºçš„æƒ©ç½šï¼Œå¯¹å°çš„ error åˆ™æƒ©ç½šè¾ƒä½ï¼Œ è¿™æ ·å®¹æ˜“å¯¼è‡´å›¾åƒå¹³æ»‘ï¼Œå¯¹ä¸äººç±»çš„è§†è§‰æ„ŸçŸ¥ç³»ç»Ÿå¹¶ä¸å‹å¥½ã€‚(äººç±»çš„è§†è§‰ç³»ç»Ÿå¯¹å›¾åƒä¸­çš„æ— çº¹ç†åŒºåŸŸçš„äº®åº¦å’Œé¢œè‰²å˜åŒ–æ›´åŠ æ•æ„Ÿ)ã€‚</p></li><li><p>l1 çš„æŸå¤±å‡½æ•°çš„æ”¶æ•›æ€§èƒ½æ˜¯ä¼˜äº l2 æŸå¤±å‡½æ•°çš„</p></li></ul><h5 id="å†…å®¹-ç‰¹å¾-æŸå¤±-content-loss"><a href="#å†…å®¹-ç‰¹å¾-æŸå¤±-content-loss" class="headerlink" title="å†…å®¹(ç‰¹å¾)æŸå¤± content loss"></a>å†…å®¹(ç‰¹å¾)æŸå¤± content loss</h5><p>â€‹    ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹æ¥è®¡ç®—å›¾åƒçš„é«˜å±‚ç‰¹å¾çš„æ¬§å¼è·ç¦»ã€‚å¹¶éç€çœ¼äºå•ä¸ªåƒç´ çš„åŒ¹é…ï¼Œè€Œæ˜¯è®©ä¸¤å¼ å›¾åƒçš„æ„ŸçŸ¥æ›´åŠ æ¥è¿‘ã€‚ä¸ªäººè®¤ä¸ºåœ¨å¾—åˆ°æ„ŸçŸ¥åŸŸå†…å®¹çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹å›¾åƒçš„å†…å®¹è¿›è¡Œäº†ä¸€æ¬¡æç‚¼ï¼Œå› æ­¤åœ¨æ„ŸçŸ¥åŸŸç©ºé—´ä¸­è®¡ç®—æŸå¤±ç›¸å½“äºç»“åˆå›¾åƒå†…å®¹çš„æŸå¤±ï¼Œä¼šä½¿å¾—å¤åŸåçš„å›¾åƒè§†è§‰æ•ˆæœä¸Šæ›´å¥½ã€‚</p><h5 id="texture-loss"><a href="#texture-loss" class="headerlink" title="texture loss"></a>texture loss</h5><h5 id="adversarial-loss"><a href="#adversarial-loss" class="headerlink" title="adversarial loss"></a>adversarial loss</h5><h5 id="å…¨å˜åˆ†æŸå¤±-total-variation-loss"><a href="#å…¨å˜åˆ†æŸå¤±-total-variation-loss" class="headerlink" title="å…¨å˜åˆ†æŸå¤± total variation loss"></a>å…¨å˜åˆ†æŸå¤± total variation loss</h5><p>â€‹     TV loss æ˜¯å¸¸ç”¨çš„ä¸€ç§æ­£åˆ™é¡¹ï¼ˆæ³¨æ„æ˜¯æ­£åˆ™é¡¹ï¼Œé…åˆå…¶ä»– loss ä¸€èµ·ä½¿ç”¨ï¼Œç”¨æ¥çº¦æŸå™ªå£°ï¼‰ã€‚TV æŸå¤±ç”¨åœ¨å›¾åƒè¶…åˆ†è¾¨ç‡ä¸­çš„ä½œç”¨å°±æ˜¯<strong>ä¿æŒå›¾åƒçš„å…‰æ»‘æ€§ï¼Œæ¶ˆé™¤å›¾åƒè¶…åˆ†å¯èƒ½å¸¦æ¥çš„ä¼ªå½±å’Œå™ªå£°</strong>ã€‚ç¼ºé™·åœ¨äºä¼šä½¿å¾—å¤åŸçš„å›¾åƒè¿‡äºå…‰æ»‘ï¼Œåœ¨ä¸€äº›ç»†èŠ‚æ¯”è¾ƒå¤šçš„å›¾åƒä¸­ä¼šä½¿å¾—è¶…åˆ†åçš„å›¾åƒä¸¢å¤±ç»†èŠ‚ã€‚å®ƒå®šä¹‰ä¸º<strong>ç›¸é‚»åƒç´ çš„å·®å€¼çš„ç»å¯¹å€¼ä¹‹å’Œï¼Œå¯ä»¥ç”¨æ¥è¡¡é‡å›¾ç‰‡çš„å™ªå£°</strong>ã€‚</p><h4 id="6-ç»¼è¿°"><a href="#6-ç»¼è¿°" class="headerlink" title="6. ç»¼è¿°"></a>6. ç»¼è¿°</h4><p>Deep Learning for Image Super-resolution: A Survey</p><h4 id="7-å‡ ä¸ªç»å…¸é—®é¢˜"><a href="#7-å‡ ä¸ªç»å…¸é—®é¢˜" class="headerlink" title="7. å‡ ä¸ªç»å…¸é—®é¢˜"></a>7. å‡ ä¸ªç»å…¸é—®é¢˜</h4><ul><li><p>æ¡†æ¶è®¾è®¡</p><p>åŸºæœ¬å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µ: ç‰¹å¾æå–ã€éçº¿æ€§æ˜ å°„ã€ä¸Šé‡‡æ ·ã€é‡å»ºã€‚ ä¸»è¦çš„è®¾è®¡å‡ ç§åœ¨éçº¿æ€§æ˜ å°„ä¸Šã€‚</p></li><li><p>å‡ ç§ä¸Šé‡‡æ ·æ–¹å¼çš„åŒºåˆ«? ä¼˜åŠ£?</p></li></ul><p>å¸¸è§çš„ä¸Šé‡‡æ ·æ–¹å¼æœ‰ï¼šæ’å€¼ã€åå·ç§¯ã€subpixelç­‰</p><p>æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯ï¼šæœ€è¿‘é‚»é‡‡æ · + å·ç§¯ã€‚åœ¨æ—¶é—´ä¸Šæœ€å¿«ï¼Œ ç„¶åä¹Ÿèƒ½å¤Ÿé¿å…åå·ç§¯å¸¦æ¥çš„æ£‹ç›˜æ ¼æ•ˆåº”ã€‚</p><ul><li>ä¸ºå•¥ä¸éœ€è¦ bn å±‚? ä¸ºå•¥ wn å¯ä»¥ç”¨?</li><li>ä¸‰é€šé“é‡å»º or YCrcb ç©ºé—´ Y é€šé“é‡å»º</li></ul><p>ç°åœ¨åŸºæœ¬æ˜¯åœ¨ RGB ç©ºé—´è¿›è¡Œè¶…åˆ†è¾¨ç‡é‡å»ºï¼ŒYCrcb åœ¨ä¹‹å‰çš„å·¥ä½œä¸­ä½¿ç”¨è¿‡ã€‚</p><ul><li>å™ªå£°é—®é¢˜ ?</li></ul><p>ç°åœ¨æƒ³åˆ°çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯æ·»åŠ  TV Lossï¼Œ ä½†æ˜¯ä¼šå¸¦æ¥ä¸€å®šçš„å¹³æ»‘ã€‚</p><ul><li>å‰é‡‡æ · å’Œ åé‡‡æ ·çš„åŒºåˆ«ï¼Ÿ</li></ul><p>åé‡‡æ ·ä½¿å¾—æ•´ä¸ªç‰¹å¾æå–åœ¨é«˜ç»´ç©ºé—´ä¸­è¿›è¡Œï¼Œè™½ç„¶èƒ½å¤Ÿ hold ä½èƒ½å¤šå¾—ç»†èŠ‚ä¿¡æ¯ã€‚ä½†æ˜¯è®¡ç®—é‡è¾ƒå¤§ã€‚ç°åœ¨ä¸€èˆ¬éƒ½æ˜¯å‰é‡‡æ ·æ¥é™ä½åˆ†è¾¨ç‡ï¼Œä»è€Œèƒ½å¤Ÿæ˜¾è‘—é™ä½è®¡ç®—é‡ã€‚</p><h4 id="8-ç›¸å…³æ¯”èµ›"><a href="#8-ç›¸å…³æ¯”èµ›" class="headerlink" title="8. ç›¸å…³æ¯”èµ›"></a>8. ç›¸å…³æ¯”èµ›</h4><ul><li>AIM 2019 &amp; AIM 2020</li><li>NTIRE</li></ul><p>å‚è€ƒæ–‡çŒ®</p><p>[1] Loss Functions for Image Restoration with Neural Networks IEEE TCI 2017 [[<a href="https://link.zhihu.com/?target=http%3A//ieeexplore.ieee.org/document/7797130/">paper</a>]] [[<a href="https://link.zhihu.com/?target=https%3A//github.com/NVlabs/PL4NN">code</a>]]</p><p>[2] 2018 PIRM Challenge on Perceptual Image Super-resolution [[<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1809.07517">paper</a>]]</p>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnå‰å‘è®¡ç®—æµç¨‹æµ…æ</title>
    <link href="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/"/>
    <url>/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p><strong>1. å‰å‘è®¡ç®—</strong></p><p>â€‹    ä½¿ç”¨ncnnè¿›è¡Œå‰å‘è®¡ç®—çš„æ­¥éª¤å¾ˆç®€å•ï¼Œå°±å¦‚ä¸‹åå‡ è¡Œä»£ç å³å¯å®Œæˆã€‚</p><pre><code class="hljs groovy"><span class="hljs-comment">/* Step 1.1 : åŠ è½½.parma æ–‡ä»¶ */</span>NSString *paramPath = [[NSBundle mainBundle] <span class="hljs-attr">pathForResource:</span>@<span class="hljs-string">&quot;squeezenet_v1.1&quot;</span> <span class="hljs-attr">ofType:</span>@<span class="hljs-string">&quot;param&quot;</span>];ncnn_net.load_param(paramPath.UTF8String);<span class="hljs-comment">/* Step 1.2 : åŠ è½½.bin æ–‡ä»¶ */</span>NSString *binPath = [[NSBundle mainBundle] <span class="hljs-attr">pathForResource:</span>@<span class="hljs-string">&quot;squeezenet_v1.1&quot;</span> <span class="hljs-attr">ofType:</span>@<span class="hljs-string">&quot;bin&quot;</span>];ncnn_net.load_model(binPath.UTF8String);<span class="hljs-comment">/* Step 2.1 : æ„å»ºå¹¶é…ç½® æå–å™¨ */</span><span class="hljs-attr">ncnn:</span>:Extractor extractor = ncnn_net.create_extractor();extractor.set_light_mode(<span class="hljs-literal">true</span>);<span class="hljs-comment">/* Step 2.2 : è®¾ç½®è¾“å…¥ï¼ˆå°†å›¾ç‰‡è½¬æ¢æˆncnn::Matç»“æ„ä½œä¸ºè¾“å…¥ï¼‰ */</span>UIImage *srcImage = [UIImage <span class="hljs-attr">imageNamed:</span>@<span class="hljs-string">&quot;mouth&quot;</span>];<span class="hljs-attr">ncnn:</span>:Mat mat_src;ts_image2mat(mat_src, srcImage);extractor.input(<span class="hljs-string">&quot;data&quot;</span>, mat_src);<span class="hljs-comment">/* Step 2.3 : æå–è¾“å‡º */</span><span class="hljs-attr">ncnn:</span>:Mat mat_dst;extractor.extract(<span class="hljs-string">&quot;prob&quot;</span>, mat_dst);</code></pre><p>â€‹    å¦‚æœä½ ä»…ä»…æƒ³ä½¿ç”¨ncnnï¼Œä¸Šé¢çš„å‚è€ƒè¶³å¤Ÿäº†ï¼›ä½†è‹¥ä½ æƒ³è¦äº†è§£ï¼Œç”šè‡³å»æ›´æ”¹ä¸€äº›å…¶ä¸­çš„æºä»£ç ï¼Œå¯ä»¥è·Ÿæˆ‘ä¸€èµ·çœ‹çœ‹ä¸Šé¢è¿™åå¤šè¡Œä»£ç çš„åº•å±‚è¿ä½œåŸç†ã€‚</p><p><strong>2 ä»£ç åˆ†æ</strong></p><p>æˆ‘å§‘ä¸”å°†å…¶åˆ†ä¸ºï¼š<strong>åŠ è½½æ¨¡å‹</strong>ã€å‰å‘æ£€æµ‹ã€è¾“å‡ºå¤„ç†(åŠåˆ’æ°´)ã€æ¨¡å‹å°è£…(å…¨åˆ’æ°´) å››ä¸ªéƒ¨åˆ†æ¥åŠ ä»¥åˆ†æã€‚</p><p><strong>2.1 åŠ è½½æ¨¡å‹</strong></p><p>ncnn åœ¨ iOS ç«¯ä½¿ç”¨ <strong>.param</strong> å’Œ <strong>.bin</strong> ä¸¤ä¸ªæ–‡ä»¶æ¥æè¿°ä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œ</p><p>å…¶ä¸­ï¼š</p><p><strong>.param</strong>ï¼šæè¿°ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼ŒåŒ…æ‹¬å±‚åç§°ï¼Œå±‚è¾“å…¥è¾“å‡ºä¿¡æ¯ï¼Œå±‚å‚æ•°ä¿¡æ¯ï¼ˆå¦‚å·ç§¯å±‚çš„kernalå¤§å°ç­‰ï¼‰ç­‰ã€‚</p><p><strong>.bin</strong> æ–‡ä»¶åˆ™è®°å½•ç¥ç»ç½‘ç»œè¿ç®—æ‰€éœ€è¦çš„æ•°æ®ä¿¡æ¯ï¼ˆæ¯”å¦‚å·ç§¯å±‚çš„æƒé‡ã€åç½®ä¿¡æ¯ç­‰ï¼‰</p><p><img src="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/1.png" alt="x" style="zoom:50%;"></p><p><strong>2.1.1 load_param åŠ è½½ç¥ç»ç½‘ç»œé…ç½®ä¿¡æ¯</strong></p><pre><code class="hljs objective-c">&#x2F;* Step1.1 : åŠ è½½.parma æ–‡ä»¶ *&#x2F;NSString *paramPath &#x3D; [[NSBundle mainBundle] pathForResource:@&quot;squeezenet_v1.1&quot; ofType:@&quot;param&quot;];ncnn_net.load_param(paramPath.UTF8String);</code></pre><p>load_param çš„æ ¹æœ¬ç›®çš„æ˜¯å°†.paramæ–‡ä»¶çš„ä¿¡æ¯åŠ è½½åˆ°ç›®æ ‡ç¥ç»ç½‘ç»œï¼ˆä¸€ä¸ªncnn::Netç»“æ„ï¼‰ä¸­</p><p><strong>2.1.1.1 .paramæ–‡ä»¶çš„ç»“æ„</strong></p><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹ .param æ–‡ä»¶çš„å†…å®¹æ ¼å¼</p><p><img src="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/2.png" style="zoom:50%;"></p><p><strong>ä¸€ä¸ª.paramæ–‡ä»¶ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š</strong></p><p><strong>1ï¼‰MagicNum</strong></p><p>å›ºå®šä½7767517ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªæ•°å­—ï¼Œä¸çŸ¥é“é—®å€ªç¥å»å§</p><p>2ï¼‰layerã€blobä¸ªæ•°</p><p>ä¸Šå›¾ç¤ºä¾‹çš„æ–‡ä»¶ä¸¤ä¸ªæ•°å­—åˆ†åˆ«ä¸ºï¼š75ã€83</p><p><strong>layerï¼šæˆ‘ä»¬çŸ¥é“ç¥ç»ç½‘ç»œæ˜¯ä¸€å±‚ä¸€å±‚å‘å‰æ¨è¿›è®¡ç®—çš„ï¼Œæ¯ä¸€å±‚æˆ‘ä»¬ç”¨ä¸€ä¸ªlayerè¡¨ç¤ºï¼›</strong></p><p><strong>blobï¼šæ¯ä¸€ä¸ªlayeréƒ½å¯èƒ½ä¼šæœ‰è¾“å…¥ã€è¾“å‡ºï¼Œåœ¨ncnnä¸­ï¼Œå®ƒä»¬ç»Ÿä¸€ç”¨ä¸€ä¸ªå¤šç»´ï¼ˆ3ç»´ï¼‰å‘é‡è¡¨ç¤ºï¼Œæˆ‘ä»¬ç§°æ¯ä¸€ä¸ªè¾“å…¥ã€è¾“å‡ºçš„åŸå­ä¸ºä¸€ä¸ªblobï¼Œå¹¶ä¸ºå®ƒèµ·å</strong></p><p>2.1.1.2 layerçš„æè¿°</p><p>layer åœ¨ .param ä¸­æ˜¯ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„å…ƒç´ ï¼ˆä»ç¬¬3è¡Œèµ·çš„æ¯ä¸€è¡Œæè¿°ä¸€ä¸ªlayerï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒå•ç‹¬æŠ½å‡ºæ¥ä¸€å°èŠ‚è¿›è¡Œè¯´æ˜ã€‚</p><p><img src="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/3.png" alt></p><p>å¦‚å›¾ï¼Œ<strong>æ¯ä¸€è¡Œå±‚æè¿°çš„å†…å®¹åŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†</strong>ï¼š</p><p><strong>1ï¼‰å±‚ç±»å‹</strong>     æ¯”å¦‚<strong>Inputã€Convolutionã€ReLU</strong></p><p><strong>2ï¼‰å±‚å</strong>       æ¨¡å‹è®­ç»ƒè€…ä¸ºè¯¥å±‚èµ·å¾—åå­—ï¼ˆæ¯•ç«Ÿç›¸åŒç±»å‹çš„å±‚å¯èƒ½å¤šæ¬¡ä½¿ç”¨ï¼Œæˆ‘ä»¬è¦åŒºåˆ†å®ƒä»¬ï¼‰</p><p><strong>3ï¼‰å±‚è¾“å…¥è¾“å‡º  åŒ…å«ï¼šå±‚è¾“å…¥blobæ•°é‡ï¼Œå±‚è¾“å‡ºblobæ•°é‡ï¼Œå±‚è¾“å…¥ã€è¾“å‡ºblobçš„åç§°</strong></p><p><strong>4ï¼‰å±‚é…ç½®å‚æ•°</strong></p><p>æ¯”å¦‚ <strong>å·ç§¯å±‚ï¼ˆConvolution Layerï¼‰çš„ å·ç§¯æ ¸å¤§å°ã€æ­¥é•¿ä¿¡æ¯</strong> ç­‰</p><p>åœ¨ å…·ä½“å±‚é‡Œé¢éƒ½æœ‰ä¸€ä¸ªå‡½æ•°: load_param, ä»é‡Œé¢å¯ä»¥æŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯ã€‚</p><p><strong>dataå±‚ï¼š 0=é•¿ 1=å®½ 3=é€šé“</strong></p><p><strong>Convolutionå±‚ 0=è¾“å‡ºå•å…ƒ 1=å·ç§¯æ ¸å¤§å°  2=æ ¸è†¨èƒ€[è§è†¨èƒ€å·ç§¯]    3=stride</strong>    </p><p>â€‹                                 <strong>4=padding    5=æ˜¯å¦å­˜åœ¨åç½®    6=æƒé‡æ•°é‡</strong></p><p><strong>pooling å±‚    0=æ± åŒ–ç±»å‹   1=å·ç§¯æ ¸å¤§å°   2=æ­¥é•¿stride   3=padding   4=å…¨å±€æ± åŒ–  5=paddingç±»å‹</strong></p><p><strong>ReLU å±‚ 0=0.000000 æ— å‚æ•°</strong></p><p><strong>softmax å±‚ 0=0 æ— å‚æ•°</strong></p><p><strong>Concat Split Dropout æ— å‚æ•°</strong></p><p><strong>ConvolutionDepthWise    7=group æ•°ç›®</strong></p><p><strong>2.1.1.3 ncnnçš„åŠ è½½çš„æ•ˆæœ</strong></p><p>â€‹    å…¶å®äº†è§£äº†paramæ–‡ä»¶çš„æ•°æ®ç»“æ„åï¼Œæˆ‘ä»¬å°±å¤§è‡´çŸ¥é“ncnnåšäº†å“ªäº›äº‹æƒ…äº†ã€‚æ— éæ˜¯ <strong>è¯»å–æ–‡ä»¶</strong>â€”&gt;<strong>è§£æç¥ç»ç½‘ç»œä¿¡æ¯</strong> â€”&gt; <strong>ç¼“å­˜ç¥ç»ç½‘ç»œä¿¡æ¯</strong>ï¼Œé‚£ä¹ˆï¼Œä¿¡æ¯ç¼“å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><pre><code class="hljs cpp"><span class="hljs-comment">/* in net.h */</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Net</span></span><span class="hljs-class">&#123;</span>...<span class="hljs-keyword">protected</span>:    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Blob&gt; blobs;    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Layer*&gt; layers;...&#125;;</code></pre><p>â€‹    åŸæ¥ï¼Œncnn::Net ç»“æ„ä¸­æœ‰ <strong>blobs</strong> å’Œ <strong>layers</strong> ä¸¤ä¸ª vectorï¼Œå®ƒä»¬ä¿å­˜äº† .paramæ–‡ä»¶ ä¸­åŠ è½½çš„ä¿¡æ¯ã€‚å…³äº Blobã€Layer çš„æ•°æ®ç»“æ„ï¼Œåœ¨æ­¤æš‚ä¸èµ˜è¿°ã€‚</p><p><strong>2.1.2 load_model åŠ è½½æ¨¡å‹è®­ç»ƒæ•°æ®</strong></p><pre><code class="hljs objective-c">&#x2F;* Step1.2 : åŠ è½½.bin æ–‡ä»¶ *&#x2F;NSString *binPath &#x3D; [[NSBundle mainBundle] pathForResource:@&quot;squeezenet_v1.1&quot; ofType:@&quot;bin&quot;];ncnn_net.load_model(binPath.UTF8String);</code></pre><p>â€‹    load_modelçš„æ ¹æœ¬ç›®çš„æ˜¯å°† .binæ–‡ä»¶ çš„ä¿¡æ¯åŠ è½½åˆ° ç›®æ ‡ç¥ç»ç½‘ç»œï¼ˆä¸€ä¸ªncnn::Netç»“æ„ï¼‰ä¸­ã€‚</p><p><strong>2.1.2.1 .binæ–‡ä»¶çš„å†…å®¹</strong></p><p><strong>.bin æ–‡ä»¶å­˜å‚¨äº†å¯¹åº”æ¨¡å‹ä¸­éƒ¨åˆ†å±‚çš„è®¡ç®—éœ€æ±‚å‚æ•°ã€‚</strong>æ¯”å¦‚2.1.1.1èŠ‚ä¸­çš„ç¬¬å››è¡Œçš„Convolutionå±‚</p><p><img src="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/4.png" alt></p><p>â€‹    <strong>.bin æ–‡ä»¶ä¸­å°±å­˜å‚¨äº†å…¶ 1728(3 * 3 * 3 * 64) ä¸ªfloatç±»å‹çš„ æƒé‡æ•°æ®(weight_data) å’Œ 64ä¸ªfloatç±»å‹çš„ åç½®æ•°æ®(bias_data)ã€‚</strong></p><p>2.1.2.2 .binæ–‡ä»¶çš„ç»“æ„</p><p>â€‹    <strong>.bin æ–‡ä»¶ä¸­å°±å­˜å‚¨äº†å…¶ 1728(3 * 3 * 3 * 64) ä¸ªfloatç±»å‹çš„ æƒé‡æ•°æ®(weight_data) å’Œ 64ä¸ªfloatç±»å‹çš„ åç½®æ•°æ®(bias_data)ã€‚</strong></p><p>2.1.2.2 .binæ–‡ä»¶çš„ç»“æ„</p><p><img src="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/5.png" alt></p><p>bin = binaryï¼Œ.bin æ–‡ä»¶çš„åŸºæœ¬ç»“æ„å°±æ˜¯ [äºŒè¿›åˆ¶]ã€‚ä½†è¿™ å¹¶ä¸ä»£è¡¨æˆ‘ä»¬å¤±å»äº† [æ‰‹åŠ¨ä¿®æ”¹å®ƒ] çš„æƒåˆ©ï¼</p><p>æƒŠä¸æƒŠå–œï¼Œæ„ä¸æ„å¤–ï¼Ÿä¸‹èŠ‚å³æ­æ™“ï¼</p><p><strong>2.1.2.3 æ‰‹æ’•äºŒè¿›åˆ¶</strong></p><p>1ï¼‰binæ–‡ä»¶ä¿¡æ¯å­˜å‚¨è¯´æ˜</p><p>å‡è®¾ bin æ–‡ä»¶å­˜å‚¨ 0.3342, 0.4853, 0.2843, 0.1231 å››ä¸ªæ•°å­—ï¼Œè¿™å››ä¸ªæ•°å­—ä½¿ç”¨float32çš„æ•°æ®ç»“æ„æ¥æè¿°ï¼Œåˆ†åˆ«ä¸ºï¼š3eab1c43ã€3ef8793eã€3e918fc5ã€3dfc1bdaï¼Œé‚£ä¹ˆbinæ–‡ä»¶ä¸­çš„å†…å®¹å°±æ˜¯ 3eab1c433ef8793e3e918fc53dfc1bdaï¼Œæˆ‘ä»¬è¿›è¡Œè¯»å–çš„æ—¶å€™ä½¿ç”¨ä¸€ä¸ªfloatçš„æ•°ç»„å»æ‰¿è½½è¿™äº›äºŒè¿›åˆ¶æ•°æ®å³å¯ã€‚</p><p>2ï¼‰æ‰‹æ’•</p><p>ä½ å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€æ®µbinæ–‡ä»¶æ•°æ®çš„è¯»å–æ–¹æ³•ï¼Œæ¯”å¦‚è¿™ä¹ˆä¸€æ®µ</p><pre><code class="hljs lsl">const void * __log_binInfo_conv1(const void *dataOffset) &#123;    printf(<span class="hljs-string">&quot;<span class="hljs-subst">\n</span> conv1 å±‚ç±»å‹ä¸º Convolution(å·ç§¯å±‚)<span class="hljs-subst">\n</span>&quot;</span>)     printf(<span class="hljs-string">&quot;<span class="hljs-subst">\n</span> åŠ è½½weight_dataæ•°æ®ç±»å‹æ ‡å¿—ï¼ˆå›ºå®šä¸ºè‡ªåŠ¨ç±»å‹ï¼‰<span class="hljs-subst">\n</span>&quot;</span>);    unsigned char *p_load1_1 = (unsigned char *)dataOffset;    for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;        printf(<span class="hljs-string">&quot;Flag %d : %d<span class="hljs-subst">\n</span>&quot;</span>, i, p_load1_1[i]);    &#125;    p_load1_1 += <span class="hljs-number">4</span>;        printf(<span class="hljs-string">&quot;<span class="hljs-subst">\n</span> Load1_2: åŠ è½½weight_dataæ•°æ®ï¼ˆ1728é¡¹ï¼Œè‡ªåŠ¨ä¸ºfloat32ç±»å‹ï¼‰<span class="hljs-subst">\n</span>&quot;</span>);    <span class="hljs-type">float</span> *p_load1_2 = (<span class="hljs-type">float</span> *)p_load1_1;    for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1728</span>; i++) &#123;        if (i &lt; <span class="hljs-number">10</span> || i &gt; <span class="hljs-number">1720</span>) &#123;            printf(<span class="hljs-string">&quot;Weight %d : %.9f<span class="hljs-subst">\n</span>&quot;</span>, i, p_load1_2[i]);        &#125;    &#125;    p_load1_2 += <span class="hljs-number">1728</span>;        printf(<span class="hljs-string">&quot;<span class="hljs-subst">\n</span> Load3: åŠ è½½biasåç½®æ•°æ®ï¼ˆ64é¡¹ï¼Œå›ºå®šä¸ºfloat32ç±»å‹ï¼‰<span class="hljs-subst">\n</span>&quot;</span>);    <span class="hljs-type">float</span> *p_load2 = (<span class="hljs-type">float</span> *)p_load1_2;    for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">64</span>; i++) &#123;        if (i &lt; <span class="hljs-number">5</span> || i &gt; <span class="hljs-number">60</span>) &#123;            printf(<span class="hljs-string">&quot;Bias %d : %.9f<span class="hljs-subst">\n</span>&quot;</span>, i, p_load2[i]);        &#125;    &#125;    p_load2 += <span class="hljs-number">64</span>;        return p_load2;&#125;</code></pre><p><strong>Demoï¼š</strong></p><p><a href="https://github.com/chrisYooh/ncnnSrcDemo">https://github.com/chrisYooh/ncnnSrcDemo</a></p><p>1ï¼‰æ‰“å¼€å…¶ä¸‹çš„ NcnnSrcDemo å·¥ç¨‹</p><p>2ï¼‰è¿›å…¥ ViewControllerï¼Œè§£é™¤ è‡ªå®šä¹‰binæ–‡ä»¶åŠ è½½æµ‹è¯•çš„ æ³¨é‡Š</p><p>/<em> è‡ªå®šä¹‰ bin æ–‡ä»¶åŠ è½½æµ‹è¯• </em>/</p><p>[self loadModel_myAnalysis];</p><p>3ï¼‰è¿è¡Œçœ‹çœ‹ç»“æœå§ï¼Œä¹Ÿå¯ä»¥ç”¨ ncnnçš„loadModel å»è·‘ï¼Œç„¶åæ‰“æ–­ç‚¹çœ‹çœ‹è§£è¯»çš„ .bin æ–‡ä»¶æ•°æ®ä¸€è‡´ä¸ã€‚</p><p><img src="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/6.png" alt></p><p>â€‹    äº†è§£äº†binæ–‡ä»¶çš„ä¿¡æ¯å­˜å‚¨å½¢å¼ï¼Œæˆ‘ä»¬å½“ç„¶å°±å¯ä»¥è¿›è¡Œä¿¡æ¯ä¿®æ”¹å’¯ï¼ä¸åŒçš„æ¡†æ¶æ¨¡å‹è¿›è¡Œè½¬åŒ–æ—¶ï¼Œå°±è¦åšè¿™æ ·çš„äº‹æƒ…ã€‚å“‡ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ è‡ªå·±å†™è½¬æ¨¡å‹çš„å·¥å…·å•¦ï¼ä»æŠ€æœ¯ä¸Šè¯´ï¼Œå®Œå…¨æ²¡é”™ï¼</p><p><strong>2.2 Detect æ£€æµ‹</strong></p><p>   å®Œæˆäº† ç½‘ç»œåˆå§‹åŒ– <strong>load_param()</strong>ã€ <strong>load_bin()</strong>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¡«å†™ä¸€ä¸ªè¾“å…¥å¹¶ä½¿ç”¨ ç½‘ç»œæå–å™¨Extractor è®¡ç®—è¾“å‡ºäº†ã€‚</p><p><strong>2.2.1 åˆ›å»ºæå–å™¨ Extractor</strong></p><pre><code class="hljs reasonml"><span class="hljs-comment">/* Step2.1 : æ„å»ºå¹¶é…ç½® æå–å™¨ */</span>ncnn::Extractor extractor = ncnn_net.create<span class="hljs-constructor">_extractor()</span>;extractor.set<span class="hljs-constructor">_light_mode(<span class="hljs-params">true</span>)</span>;</code></pre><p>   æå–å™¨ extractor ä½¿ç”¨ ç›®æ ‡ç½‘ç»œ é€šè¿‡ å‹å…ƒå‡½æ•° åˆ›å»ºå®ä¾‹ï¼Œå› ä¸ºå®ƒéœ€è¦è·å–å¯¹åº”ç¥ç»ç½‘ç»œçš„ä¿¡æ¯ï¼›åŒæ—¶ï¼Œextractor è¿˜å¯ä»¥è‡ªå®šä¹‰éƒ¨åˆ†é…ç½®ä¿¡æ¯ã€‚</p><p>Extractorå«3ä¸ªå…³é”®ç±»å˜é‡</p><p>1ï¼‰<strong>netï¼š æŒ‡å‘å¯¹åº”ç½‘ç»œçš„æŒ‡é’ˆ</strong></p><p>2ï¼‰<strong>blob_matsï¼š è®¡ç®—çš„è¿‡ç¨‹ä¸­å­˜å‚¨è¾“å…¥ã€è¾“å‡ºçš„ä¸´æ—¶æ•°æ®</strong></p><p>3ï¼‰<strong>optï¼š é…ç½®å‚æ•°</strong></p><p><strong>2.2.2 extractor.input é…ç½®è¾“å…¥</strong></p><pre><code class="hljs cpp"><span class="hljs-comment">/* Step2.2 : è®¾ç½®è¾“å…¥ï¼ˆå°†å›¾ç‰‡è½¬æ¢æˆncnn::Matç»“æ„ä½œä¸ºè¾“å…¥ï¼‰ */</span>UIImage *srcImage = [UIImage imageNamed:@<span class="hljs-string">&quot;mouth&quot;</span>];ncnn::Mat mat_src;ts_image2mat(mat_src, srcImage);extractor.input(<span class="hljs-string">&quot;data&quot;</span>, mat_src);</code></pre><p>1ï¼‰æˆ‘ä»¬è¦ æ„é€ ä¸€ä¸ªncnn::Matçš„ç»“æ„ï¼Œå°†æˆ‘ä»¬çš„è¾“å…¥å¡«å…¥å…¶ä¸­</p><p>2ï¼‰åˆ©ç”¨ Extractorçš„input()å‡½æ•° å°†è¾“å…¥matå¡«å…¥å¯¹åº”çš„ä½ç½®ã€‚</p><p>æ³¨æ„ï¼šinput() å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°è¾“å…¥çš„æ˜¯blobçš„åç§° è€Œä¸æ˜¯layerçš„åç§° å“¦ï¼</p><p><strong>2.2.3 extractor.extract æå–è¾“å‡º</strong></p><pre><code class="hljs less"><span class="hljs-comment">/* Step2.3 : æå–è¾“å‡º */</span><span class="hljs-attribute">ncnn</span>::Mat mat_dst;<span class="hljs-selector-tag">extractor</span><span class="hljs-selector-class">.extract</span>(<span class="hljs-string">&quot;prob&quot;</span>, mat_dst);</code></pre><p>1ï¼‰æˆ‘ä»¬è¦ æ„é€ ä¸€ä¸ªncnn::Matçš„ç»“æ„ï¼Œç”¨ä»¥æ‰¿è½½è¾“å‡ºï¼›</p><p>2ï¼‰åˆ©ç”¨ Extractorçš„extract()å‡½æ•° å°†è®¡ç®—ç»“æœå¡«å†™åˆ°æˆ‘ä»¬æ„é€ çš„è¾“å‡ºmatä¸­ã€‚</p><p>æ³¨æ„ï¼šextract()å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°è¾“å…¥çš„æ˜¯ blobçš„åç§° è€Œä¸æ˜¯ layerçš„åç§° å“¦ï¼</p><p><strong>2.2.3.1 extract() çš„é€’å½’æµç¨‹å›¾</strong></p><p>ncnn åœ¨è¿›è¡Œ extract() çš„æ—¶å€™ï¼Œä½¿ç”¨äº†é€’å½’çš„æ–¹å¼ï¼Œè¿™è¾¹å°†å…¶ å®è§‚é€»è¾‘è¿›è¡ŒæŠ½è±¡ã€‚ï¼ˆæç»˜æ‰€æœ‰çš„ä»£ç ç»†èŠ‚ä¼šä½¿å›¾è¿‡äºå¤æ‚ï¼Œä¸æ˜“é˜…è¯»ï¼‰</p><p>é€’å½’å®ç°.png</p><p><strong>2.2.3.2 extract() æœ€ç®€é€’å½’å±•å¼€æµç¨‹</strong></p><p>ä¹‹æ‰€ä»¥è¯´æœ€ç®€ï¼Œå› ä¸ºæˆ‘ä»¬å‡è®¾ï¼š</p><p>1 ç›®æ ‡ç½‘ç»œçš„æ¯å±‚éƒ½åªæœ‰ ä¸€ä¸ªè¾“å…¥(blob) å’Œ ä¸€ä¸ªè¾“å‡º(blob)ï¼Œ</p><p>2 ä½¿ç”¨çš„extractæ˜¯æ–°åˆ›å»ºçš„ï¼ˆå³ æ— ç¼“å­˜æ•°æ®ï¼‰</p><p><img src="/2020/09/21/ncnn%E5%89%8D%E5%90%91%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B%E6%B5%85%E6%9E%90/7.png" alt></p><p>å¦‚å›¾ï¼š</p><p>1ï¼‰æ¯ä¸€å±‚è¿›è¡Œforward()çš„æ—¶å€™ï¼Œéœ€è¦ä¸€äº›è¾“å…¥å‚æ•°ï¼Œè¿™äº›è¾“å…¥å‚æ•°æ˜¯ ç”±ä¸Šé¢çš„å±‚çš„forward()è¿ç®—è¾“å‡ºçš„ã€‚</p><p>2ï¼‰åªæœ‰ è¾“å…¥å±‚çš„è¾“å…¥å‚æ•°æ˜¯æˆ‘ä»¬å¡«å†™çš„ï¼ˆ2.2.2 èŠ‚ï¼‰ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºå®ƒçš„å­˜åœ¨ï¼Œé€’å½’å¾—ä»¥æœ‰äº†ç»ˆç»“ã€‚</p><p>2.3 è¾“å‡ºå¤„ç†</p>  <pre><code class="hljs reasonml"><span class="hljs-comment">/* Step3.1 : ç»“æœå¤„ç†(è·å–æ£€æµ‹æ¦‚ç‡æœ€é«˜çš„5ç§ç‰©å“ï¼Œè®¤ä¸ºå­˜åœ¨) */</span>   NSArray *rstArray = ts<span class="hljs-constructor">_mat2array(<span class="hljs-params">mat_dst</span>)</span>;   NSArray *top5Array = ts<span class="hljs-constructor">_topN(<span class="hljs-params">rstArray</span>, 5)</span>;      <span class="hljs-comment">/* Step3.2 : æ‰“å°è¾“å‡º */</span>   <span class="hljs-constructor">NSLog(@<span class="hljs-string">&quot;%@&quot;</span>, <span class="hljs-params">top5Array</span>)</span>;      <span class="hljs-comment">/* è¯´æ˜ï¼šè¯¥Demoä¸­å‘ç°è¾“å‡ºçš„ç¬¬ä¸€é¡¹æ˜¯ index ä¸º 673 çš„é¡¹ç›®ï¼Œ</span><span class="hljs-comment">    * åœ¨result_info.jsonä¸­æŸ¥æ‰¾ä¸‹ &quot;index&quot; : &quot;673&quot; å‘ç°å¯¹åº”çš„æè¿°æ˜¯ é¼ æ ‡</span><span class="hljs-comment">    * ä¹Ÿå¯ä»¥æ¢å…¶ä»–å›¾ç‰‡è¿›è¡Œæ£€æµ‹ï¼Œä½†è¦å°†å›¾ç‰‡è§„æ ¼åŒ–æˆ 227 * 227 çš„å¤§å°æ‰å¯ä»¥ä¿è¯ç»“æœçš„å‡†ç¡®æ€§</span><span class="hljs-comment">    */</span></code></pre><p>â€‹    è¾“å‡ºå¤„ç†æ˜¯æ ¹æ®éœ€æ±‚å…·ä½“æ¨¡å‹éœ€æ±‚ï¼Œå¾ˆçµæ´»çš„ã€‚æ¯”å¦‚æˆ‘ç»™äºˆè¾“å‡ºç»“æœçš„æ¯ä¸ªæ•°å­—ä»¥ æ¦‚å¿µï¼ˆè¯†åˆ«åˆ°æŸç§ç‰©å“çš„æ¦‚ç‡ï¼‰ ï¼Œå¹¶å¯¹è¾“å‡ºç»“æœè¿›è¡Œæ’åºåå–å…¶ æ¦‚ç‡æœ€é«˜çš„ äº”ä¸ªå€¼ã€‚</p><p><strong>2.4 å°è£…</strong></p><p>â€‹    ç©ä¸€ç©çš„è¯ï¼Œ12è¡Œä»£ç è¶³å¤Ÿäº†ï¼›ä½†è‹¥çœŸçš„è¦å·¥ç¨‹åŒ–çš„è¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å°† é¢å‘è¿‡ç¨‹ çš„æ€è·¯ å‘ é¢å‘å¯¹è±¡é æ‹¢çš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnæºç åˆ†æ_6</title>
    <link href="/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-6/"/>
    <url>/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-6/</url>
    
    <content type="html"><![CDATA[<p>åˆ†æäº†å‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„ç®—å­ forward è¿‡ç¨‹ï¼Œ æ¯”å¦‚ absï¼Œ biasï¼Œargmaxï¼Œ convï¼Œpoolï¼Œ bn </p><a id="more"></a><h4 id="1-abs"><a href="#1-abs" class="headerlink" title="1. abs"></a>1. abs</h4><pre><code class="hljs c"><span class="hljs-comment">// ç»å¯¹å€¼å±‚ç‰¹æ€§: å•è¾“å…¥ï¼Œå•è¾“å‡ºï¼Œå¯ç›´æ¥å¯¹è¾“å…¥è¿›è¡Œä¿®æ”¹</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">AbsVal::forward_inplace</span><span class="hljs-params">(Mat&amp; bottom_top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">int</span> w = bottom_top_blob.w;    <span class="hljs-keyword">int</span> h = bottom_top_blob.h;    <span class="hljs-keyword">int</span> channels = bottom_top_blob.c;    <span class="hljs-keyword">int</span> size = w * h;    <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> omp parallel for num_threads(opt.num_threads)  <span class="hljs-comment">// openmp </span></span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q=<span class="hljs-number">0</span>; q&lt;channels; q++)    &#123;        <span class="hljs-keyword">float</span>* ptr = bottom_top_blob.channel(q);<span class="hljs-comment">// å½“å‰é€šé“æ•°æ®çš„èµ·å§‹æŒ‡é’ˆ</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)        &#123;            <span class="hljs-keyword">if</span> (ptr[i] &lt; <span class="hljs-number">0</span>)                ptr[i] = - ptr[i]; <span class="hljs-comment">// å°äºé›¶å–ç›¸åæ•°ï¼Œå¤§äºé›¶ä¿æŒåŸæ ·</span>        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h4 id="2-bias"><a href="#2-bias" class="headerlink" title="2. bias"></a>2. bias</h4><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Bias::forward_inplace</span><span class="hljs-params">(Mat&amp; bottom_top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">int</span> w = bottom_top_blob.w;    <span class="hljs-keyword">int</span> h = bottom_top_blob.h;    <span class="hljs-keyword">int</span> channels = bottom_top_blob.c;    <span class="hljs-keyword">int</span> size = w * h;    <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> omp parallel for num_threads(opt.num_threads)</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q=<span class="hljs-number">0</span>; q&lt;channels; q++)    &#123;        <span class="hljs-keyword">float</span>* ptr = bottom_top_blob.channel(q);  <span class="hljs-comment">// æ¯ä¸ªé€šé“æ•°æ®èµ·å§‹æŒ‡é’ˆ</span>        <span class="hljs-keyword">float</span> bias = bias_data[q];   <span class="hljs-comment">// éœ€è¦æ·»åŠ çš„åç½®æ•°æ® å‰é¢ä»æ¨¡å‹ä¸­è½½å…¥çš„å‚æ•° æ¯é€šé“åç½®å‚æ•°ä¸€æ ·</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)        &#123;            ptr[i] += bias;<span class="hljs-comment">// åŠ ä¸Šåç½®</span>        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h4 id="2-argmax"><a href="#2-argmax" class="headerlink" title="2.  argmax"></a>2.  argmax</h4><pre><code class="hljs c"><span class="hljs-comment">// å±‚å‚æ•°åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ˜¯å¦éœ€è¦åŒ…å«å€¼å¯¹åº”åœ¨æºblobä¸­çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªæ˜¯éœ€è¦å‰å¤šå°‘ä¸ªæœ€å¤§çš„æ•°</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ArgMax::load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDict&amp; pd)</span></span><span class="hljs-function"></span>&#123;    out_max_val = pd.get(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<span class="hljs-comment">// æ˜¯å¦ éœ€è¦å­˜å‚¨ä½ç½®</span>    topk = pd.get(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);       <span class="hljs-comment">// åœ¨å‰topkä¸ªæœ€å¤§çš„æ•°</span>       <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ArgMax::forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Mat&amp; bottom_blob, Mat&amp; top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">int</span> size = bottom_blob.total(); <span class="hljs-comment">// è¾“å…¥blobå‚æ•°æ€»æ•°é‡</span>        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„è¾“å‡º blob </span>    <span class="hljs-keyword">if</span> (out_max_val)        top_blob.create(topk, <span class="hljs-number">2</span>, <span class="hljs-number">4u</span>, opt.blob_allocator); <span class="hljs-comment">// topkä¸ªå€¼ + topkä¸ªå€¼å¯¹åº”çš„ä½ç½®</span>    <span class="hljs-keyword">else</span>        top_blob.create(topk, <span class="hljs-number">1</span>, <span class="hljs-number">4u</span>, opt.blob_allocator); <span class="hljs-comment">// åªå­˜  topkä¸ªå€¼ï¼Œä¸å­˜ä½ç½®</span>    <span class="hljs-keyword">if</span> (top_blob.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>* ptr = bottom_blob;        <span class="hljs-comment">// partial sort topk with index, optional value</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">float</span>, <span class="hljs-keyword">int</span>&gt; &gt; vec;    vec.resize(size);    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)    &#123;        vec[i] = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">make_pair</span>(ptr[i], i);<span class="hljs-comment">// æº è¾“å…¥blob çš„å‚æ•°çš„ å€¼ï¼šä½ç½®id é”®å€¼å¯¹</span>    &#125;    <span class="hljs-built_in">std</span>::partial_sort(vec.begin(), vec.begin() + topk, vec.end(),                      <span class="hljs-built_in">std</span>::greater&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">float</span>, <span class="hljs-keyword">int</span>&gt; &gt;());<span class="hljs-comment">// æŒ‰ç¬¬ä¸€åˆ—æ’åºï¼Œè·å–å‰ topkä¸ª</span>    <span class="hljs-comment">// ä¿å­˜å‰é¢æœ€å¤§çš„ topk ä¸ªå‚æ•°</span>    <span class="hljs-keyword">float</span>* outptr = top_blob;    <span class="hljs-keyword">if</span> (out_max_val)    &#123;        <span class="hljs-keyword">float</span>* valptr = outptr + topk; <span class="hljs-comment">// å‰é¢topkçš„ä½ç½®å­˜å€¼ï¼Œåé¢å­˜å¯¹åº”å€¼åœ¨æºè¾“å…¥ blob ä¸­çš„ä½ç½®ID</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;topk; i++)        &#123;            outptr[i] = vec[i].first; <span class="hljs-comment">// å­˜å€¼</span>            valptr[i] = vec[i].second;<span class="hljs-comment">// å­˜ä½ç½®</span>        &#125;    &#125;    <span class="hljs-keyword">else</span>    &#123;        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;topk; i++)        &#123;            outptr[i] = vec[i].second;<span class="hljs-comment">// åªå­˜å€¼</span>        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h4 id="3-concat"><a href="#3-concat" class="headerlink" title="3.concat"></a>3.concat</h4><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Concat::forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Mat&gt;&amp; bottom_blobs, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Mat&gt;&amp; top_blobs, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">int</span> dims = bottom_blobs[<span class="hljs-number">0</span>].dims;    <span class="hljs-keyword">size_t</span> elemsize = bottom_blobs[<span class="hljs-number">0</span>].elemsize;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">1</span>) <span class="hljs-comment">// axis == 0</span>    &#123;        <span class="hljs-keyword">int</span> top_w = <span class="hljs-number">0</span>; <span class="hljs-comment">// è¾“å‡ºé•¿åº¦</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> b = <span class="hljs-number">0</span>; b &lt; bottom_blobs.size(); b++)        &#123;            <span class="hljs-keyword">const</span> Mat&amp; bottom_blob = bottom_blobs[b];            top_w += bottom_blob.w;        &#125;        <span class="hljs-comment">// åˆ›å»ºè¾“å‡º blob</span>        Mat&amp; top_blob = top_blobs[<span class="hljs-number">0</span>];        top_blob.create(top_w, elemsize, opt.blob_allocator);        <span class="hljs-keyword">if</span> (top_blob.empty())            <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;        <span class="hljs-comment">// å°†ä¸åŒçš„è¾“å…¥å¤åˆ¶åˆ°è¾“å‡º</span>        <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span>* outptr = top_blob;        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> b = <span class="hljs-number">0</span>; b &lt; bottom_blobs.size(); b++)        &#123;            <span class="hljs-keyword">const</span> Mat&amp; bottom_blob = bottom_blobs[b];            <span class="hljs-keyword">int</span> w = bottom_blob.w;            <span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span>* ptr = bottom_blob;            <span class="hljs-built_in">memcpy</span>(outptr, ptr, w * elemsize);            outptr += w * elemsize;        &#125;        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">2</span> &amp;&amp; axis == <span class="hljs-number">0</span>)&#123;        <span class="hljs-comment">// ...</span>    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">2</span> &amp;&amp; axis == <span class="hljs-number">1</span>)&#123;        <span class="hljs-comment">// ...</span>    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">3</span> &amp;&amp; axis == <span class="hljs-number">0</span>)&#123;        <span class="hljs-comment">//  ...</span>    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">3</span> &amp;&amp; axis == <span class="hljs-number">1</span>)&#123;      <span class="hljs-comment">// ...</span>    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">3</span> &amp;&amp; axis == <span class="hljs-number">2</span>)&#123;       <span class="hljs-comment">// ...</span>    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h4 id="4-å·ç§¯å±‚"><a href="#4-å·ç§¯å±‚" class="headerlink" title="4. å·ç§¯å±‚"></a>4. å·ç§¯å±‚</h4><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Convolution::forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Mat&amp; bottom_blob, Mat&amp; top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// convolv with NxN kernel</span>    <span class="hljs-comment">// value = value + bias</span>    <span class="hljs-keyword">if</span> (opt.use_int8_inference &amp;&amp; weight_data.elemsize == (<span class="hljs-keyword">size_t</span>)<span class="hljs-number">1u</span>)    &#123;        <span class="hljs-keyword">return</span> forward_int8(bottom_blob, top_blob, opt);    &#125;    <span class="hljs-comment">// flattened blob, implement as InnerProduct</span>    <span class="hljs-comment">//...</span>    <span class="hljs-keyword">int</span> w = bottom_blob.w;    <span class="hljs-keyword">int</span> h = bottom_blob.h;    <span class="hljs-keyword">int</span> channels = bottom_blob.c;    <span class="hljs-keyword">size_t</span> elemsize = bottom_blob.elemsize;    <span class="hljs-comment">// NCNN_LOGE(&quot;Convolution input %d x %d  pad = %d %d  ksize=%d %d  stride=%d %d&quot;, w, h, pad_w, pad_h, kernel_w, kernel_h, stride_w, stride_h);</span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> kernel_extent_w = dilation_w * (kernel_w - <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> kernel_extent_h = dilation_h * (kernel_h - <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>;    Mat bottom_blob_bordered;    make_padding(bottom_blob, bottom_blob_bordered, opt);    <span class="hljs-keyword">if</span> (bottom_blob_bordered.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;    w = bottom_blob_bordered.w;    h = bottom_blob_bordered.h;    <span class="hljs-keyword">int</span> outw = (w - kernel_extent_w) / stride_w + <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> outh = (h - kernel_extent_h) / stride_h + <span class="hljs-number">1</span>;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxk = kernel_w * kernel_h;    <span class="hljs-comment">// kernel offsets</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; _space_ofs(maxk);    <span class="hljs-keyword">int</span>* space_ofs = &amp;_space_ofs[<span class="hljs-number">0</span>];    &#123;        <span class="hljs-keyword">int</span> p1 = <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> p2 = <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> gap = w * dilation_h - kernel_w * dilation_w;        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; kernel_h; i++)        &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; kernel_w; j++)            &#123;                space_ofs[p1] = p2;                p1++;                p2 += dilation_w;            &#125;            p2 += gap;        &#125;    &#125;    <span class="hljs-comment">// ç”³è¯·è¾“å‡º</span>    top_blob.create(outw, outh, num_output, elemsize, opt.blob_allocator);    <span class="hljs-keyword">if</span> (top_blob.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;    <span class="hljs-comment">// num_output</span>    <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> omp parallel for num_threads(opt.num_threads)</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> p = <span class="hljs-number">0</span>; p &lt; num_output; p++) <span class="hljs-comment">// é€è¾“å‡ºé€šé“</span>    &#123;        <span class="hljs-keyword">float</span>* outptr = top_blob.channel(p);        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; outh; i++) <span class="hljs-comment">// è¾“å‡ºé«˜åº¦</span>        &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; outw; j++) <span class="hljs-comment">// è¾“å‡ºå®½åº¦</span>            &#123;                <span class="hljs-keyword">float</span> sum = <span class="hljs-number">0.f</span>;                <span class="hljs-keyword">if</span> (bias_term)                    sum = bias_data[p];                <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>* kptr = (<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>*)weight_data + maxk * channels * p; <span class="hljs-comment">// å·ç§¯å•å…ƒå¯¹åº”çš„èµ·å§‹ä½ç½®</span>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q = <span class="hljs-number">0</span>; q &lt; channels; q++) <span class="hljs-comment">// è¾“å…¥</span>                &#123;                    <span class="hljs-keyword">const</span> Mat m = bottom_blob_bordered.channel(q);                    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>* sptr = m.row(i * stride_h) + j * stride_w;                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; maxk; k++) <span class="hljs-comment">// 29.23</span>                    &#123;                        <span class="hljs-keyword">float</span> val = sptr[space_ofs[k]]; <span class="hljs-comment">// 20.72</span>                        <span class="hljs-keyword">float</span> w = kptr[k];                        sum += val * w; <span class="hljs-comment">// 41.45</span>                    &#125;                    kptr += maxk;                &#125;                                <span class="hljs-comment">// æ¿€æ´»å‡½æ•°</span>                <span class="hljs-comment">// ......</span>                outptr[j] = sum;            &#125;            outptr += outw;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h4 id="5-pooling"><a href="#5-pooling" class="headerlink" title="5. pooling"></a>5. pooling</h4><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Pooling::forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Mat&amp; bottom_blob, Mat&amp; top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// max value in NxN window</span>    <span class="hljs-keyword">int</span> w = bottom_blob.w;    <span class="hljs-keyword">int</span> h = bottom_blob.h;    <span class="hljs-keyword">int</span> channels = bottom_blob.c;    <span class="hljs-keyword">size_t</span> elemsize = bottom_blob.elemsize;    <span class="hljs-keyword">if</span> (global_pooling)    &#123;        <span class="hljs-comment">// ...</span>    &#125;    Mat bottom_blob_bordered;    make_padding(bottom_blob, bottom_blob_bordered, opt);    <span class="hljs-keyword">if</span> (bottom_blob_bordered.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;    w = bottom_blob_bordered.w;    h = bottom_blob_bordered.h;    <span class="hljs-keyword">int</span> outw = (w - kernel_w) / stride_w + <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> outh = (h - kernel_h) / stride_h + <span class="hljs-number">1</span>;ã€        <span class="hljs-comment">// ç”³è¯·è¾“å‡º blob</span>    top_blob.create(outw, outh, channels, elemsize, opt.blob_allocator);    <span class="hljs-keyword">if</span> (top_blob.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxk = kernel_w * kernel_h;    <span class="hljs-comment">// kernel offsets</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; _space_ofs(maxk); <span class="hljs-comment">// </span>    <span class="hljs-keyword">int</span>* space_ofs = &amp;_space_ofs[<span class="hljs-number">0</span>];    &#123;        <span class="hljs-keyword">int</span> p1 = <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> p2 = <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> gap = w - kernel_w;        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; kernel_h; i++)        &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; kernel_w; j++)            &#123;                space_ofs[p1] = p2;                p1++;                p2++;            &#125;            p2 += gap;        &#125;    &#125;    <span class="hljs-keyword">if</span> (pooling_type == PoolMethod_MAX)    &#123;        <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> omp parallel for num_threads(opt.num_threads)</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q = <span class="hljs-number">0</span>; q &lt; channels; q++) <span class="hljs-comment">// é€šé“</span>        &#123;            <span class="hljs-keyword">const</span> Mat m = bottom_blob_bordered.channel(q);            <span class="hljs-keyword">float</span>* outptr = top_blob.channel(q);            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; outh; i++) <span class="hljs-comment">// è¾“å‡ºå±‚é«˜åº¦</span>            &#123;                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; outw; j++) <span class="hljs-comment">// è¾“å‡ºå±‚å®½åº¦</span>                &#123;                    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>* sptr = m.row(i * stride_h) + j * stride_w; <span class="hljs-comment">// æ± åŒ–å•å…ƒå¯¹åº”çš„èµ·å§‹ä½ç½®</span>                    <span class="hljs-keyword">float</span> max = sptr[<span class="hljs-number">0</span>];                    <span class="hljs-comment">// æ±‚æ¯ä¸ªæ± åŒ–å•å…ƒå¯¹åº”çš„æœ€å¤§å€¼</span>                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; maxk; k++)                    &#123;                        <span class="hljs-keyword">float</span> val = sptr[space_ofs[k]];                        max = <span class="hljs-built_in">std</span>::max(max, val);                    &#125;                    outptr[j] = max;                &#125;                outptr += outw;            &#125;        &#125;    &#125;    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pooling_type == PoolMethod_AVE)    &#123;        <span class="hljs-comment">// ...</span>    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h4 id="6-Batchnorm"><a href="#6-Batchnorm" class="headerlink" title="6. Batchnorm"></a>6. Batchnorm</h4><pre><code class="hljs c"><span class="hljs-comment">// å¯ä»¥çœ‹å‡ºæ¥ï¼Œ è¿™é‡Œçš„å…¶å®å°±æ˜¯ value = b * value + a, å®Œå…¨å¯ä»¥å’Œ conv è¿›è¡Œåˆå¹¶</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">BatchNorm::forward_inplace</span><span class="hljs-params">(Mat&amp; bottom_top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// a = bias - slope * mean / sqrt(var)</span>    <span class="hljs-comment">// b = slope / sqrt(var)</span>    <span class="hljs-comment">// value = b * value + a</span>    <span class="hljs-keyword">int</span> dims = bottom_top_blob.dims;        <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">1</span>) <span class="hljs-comment">// 1ç»´åº¦====================</span>    &#123;        <span class="hljs-comment">// ...</span>    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">2</span>) <span class="hljs-comment">// 2ç»´åº¦======================</span>    &#123;        <span class="hljs-comment">// ...</span>    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">3</span>) <span class="hljs-comment">// 3ç»´åº¦================================</span>    &#123;        <span class="hljs-keyword">int</span> w = bottom_top_blob.w;        <span class="hljs-keyword">int</span> h = bottom_top_blob.h;        <span class="hljs-keyword">int</span> size = w * h;        <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> omp parallel for num_threads(opt.num_threads)</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q=<span class="hljs-number">0</span>; q&lt;channels; q++)        &#123;            <span class="hljs-keyword">float</span>* ptr = bottom_top_blob.channel(q);            <span class="hljs-keyword">float</span> a = a_data[q];            <span class="hljs-keyword">float</span> b = b_data[q];            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)            &#123;                ptr[i] = b * ptr[i] + a;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnæºç åˆ†æ_5</title>
    <link href="/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-5/"/>
    <url>/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-5/</url>
    
    <content type="html"><![CDATA[<a id="more"></a><p>ncnn æä¾›äº†ä¸¤ç§è§£æç½‘ç»œ layer çš„æ–¹æ³•ï¼š</p><h4 id="æ–¹æ³•ä¸€-åœ¨æ¨ç†ä¸­è¿›è¡Œè§£æ"><a href="#æ–¹æ³•ä¸€-åœ¨æ¨ç†ä¸­è¿›è¡Œè§£æ" class="headerlink" title="æ–¹æ³•ä¸€: åœ¨æ¨ç†ä¸­è¿›è¡Œè§£æ"></a>æ–¹æ³•ä¸€: åœ¨æ¨ç†ä¸­è¿›è¡Œè§£æ</h4><p>æ¨¡å‹è½¬æ¢ä¹‹åï¼ŒæŸäº› layer æ²¡æœ‰è½¬æ¢æˆåŠŸï¼š(åœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­)ã€‚ å¦‚ shufflenetv2 ä¸­ï¼Œparam æ–‡ä»¶åªè½¬æ¢åˆ°äº† fc è¿™ä¸€ä¸ª layerã€‚è¿™æ—¶éœ€è¦æ·»åŠ ä¸€å±‚softmaxï¼Œå¯ä»¥å…ˆå¯¹paramæ–‡ä»¶ä¸­è½¬æ¢æˆåŠŸçš„layeråšæ¨ç†ï¼Œç„¶åæ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªsoftmaxå±‚ï¼š</p><pre><code class="hljs cpp">ncnn::Extractor ex = shufflenetv2.create_extractor();ex.input(<span class="hljs-string">&quot;data&quot;</span>, in);ncnn::Mat out;ex.extract(<span class="hljs-string">&quot;fc&quot;</span>, out);<span class="hljs-comment">// manually call softmax on the fc output</span><span class="hljs-comment">// convert result into probability</span><span class="hljs-comment">// skip if your model already has softmax operation</span>&#123;    ncnn::Layer* softmax = ncnn::create_layer(<span class="hljs-string">&quot;Softmax&quot;</span>);    ncnn::ParamDict pd;    softmax-&gt;load_param(pd);    softmax-&gt;forward_inplace(out, shufflenetv2.opt);    <span class="hljs-keyword">delete</span> softmax;&#125;out = out.reshape(out.w * out.h * out.c);</code></pre><h4 id="æ–¹æ³•äºŒ-è‡ªå®šä¹‰å±‚"><a href="#æ–¹æ³•äºŒ-è‡ªå®šä¹‰å±‚" class="headerlink" title="æ–¹æ³•äºŒ: è‡ªå®šä¹‰å±‚"></a>æ–¹æ³•äºŒ: è‡ªå®šä¹‰å±‚</h4><h5 id="1-æ–°å»ºç©ºçš„ç±»"><a href="#1-æ–°å»ºç©ºçš„ç±»" class="headerlink" title="1. æ–°å»ºç©ºçš„ç±»"></a>1. æ–°å»ºç©ºçš„ç±»</h5><pre><code class="hljs c"><span class="hljs-comment">// åœ¨ ncnn/src/layer/ ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ mylayer.h mylayer.cpp</span><span class="hljs-comment">// 1.mylayer.h</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;layer.h&quot;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> ncnn;      <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyLayer</span> :</span> <span class="hljs-keyword">public</span> Layer&#123;&#125;;<span class="hljs-comment">// 2. mylayer.cpp</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mylayer.h&quot;</span></span>DEFINE_LAYER_CREATOR(MyLayer)   <span class="hljs-comment">// æ³¨å†Œæ–°å®šä¹‰çš„å±‚</span></code></pre><h5 id="2-å®šä¹‰å±‚å‚æ•°-parameters-å’Œ-æƒé‡-weights-å¹¶å®ç°è½½å…¥å‡½æ•°"><a href="#2-å®šä¹‰å±‚å‚æ•°-parameters-å’Œ-æƒé‡-weights-å¹¶å®ç°è½½å…¥å‡½æ•°" class="headerlink" title="2. å®šä¹‰å±‚å‚æ•° parameters å’Œ æƒé‡ weights, å¹¶å®ç°è½½å…¥å‡½æ•°"></a>2. å®šä¹‰å±‚å‚æ•° parameters å’Œ æƒé‡ weights, å¹¶å®ç°è½½å…¥å‡½æ•°</h5><pre><code class="hljs c"><span class="hljs-comment">// mylayer.h</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;layer.h&quot;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> ncnn;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyLayer</span> :</span> <span class="hljs-keyword">public</span> Layer&#123;<span class="hljs-keyword">public</span>:  <span class="hljs-comment">// å…¬æœ‰æ–¹æ³•</span>      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDic&amp; pd)</span></span>;<span class="hljs-comment">// è™šå‡½æ•°ï¼Œå¯ä»¥è¢«å­ç±»è¦†ç›–</span>      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ModelBin&amp; mb)</span></span>;   <span class="hljs-comment">// </span><span class="hljs-keyword">private</span>: <span class="hljs-comment">// ç§æœ‰å‚æ•°</span>      <span class="hljs-keyword">int</span> channels;   <span class="hljs-comment">// å‚æ•°1 é€šé“æ•°é‡</span>      <span class="hljs-keyword">float</span> eps;      <span class="hljs-comment">// å‚æ•°2 ç²¾åº¦</span>      Mat gamma_data; <span class="hljs-comment">// æƒé‡</span>&#125;ï¼›<span class="hljs-comment">// 2. mylayer.cpp</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mylayer.h&quot;</span></span>DEFINE_LAYER_CREATOR(MyLayer) <span class="hljs-comment">// å®ç° load_param() è½½å…¥ç½‘ç»œå±‚å‚æ•°</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MyLayer::load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDict&amp; pd)</span></span><span class="hljs-function"></span>&#123;      <span class="hljs-comment">// ä½¿ç”¨pd.get(key,default_val); ä»paramæ–‡ä»¶ä¸­ï¼ˆkey=valï¼‰è·å–å‚æ•°</span>      channels = pd.get(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);      <span class="hljs-comment">// è§£æ 0=&lt;int value&gt;, é»˜è®¤ä¸º0</span>      eps      = pd.get(<span class="hljs-number">1</span>, <span class="hljs-number">0.001f</span>); <span class="hljs-comment">// è§£æ 1=&lt;float value&gt;, é»˜è®¤ä¸º0.001f</span>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// è½½å…¥æˆåŠŸè¿”å›0</span>&#125;<span class="hljs-comment">// å®ç° load_model() è½½å…¥æ¨¡å‹æƒé‡</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MyLayer::load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ModelBin&amp; mb)</span></span><span class="hljs-function"></span>&#123;      <span class="hljs-comment">// è¯»å–äºŒè¿›åˆ¶æ•°æ®çš„é•¿åº¦ä¸º channels * sizeof(float)</span>      <span class="hljs-comment">// 0 è‡ªåŠ¨åˆ¤æ–­æ•°æ®ç±»å‹ï¼Œ float32 float16 int8</span>      <span class="hljs-comment">// 1 æŒ‰ float32è¯»å–  2 æŒ‰float16è¯»å– 3 æŒ‰int8è¯»å–</span>      gamma_data = mb.load(channels, <span class="hljs-number">1</span>);<span class="hljs-comment">// æŒ‰ float32è¯»å– </span>      <span class="hljs-keyword">if</span>(gamma_data.empty())            <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>; <span class="hljs-comment">// é”™è¯¯è¿”å›é0æ•°ï¼Œ-100è¡¨ç¤º out-of-memory </span>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//  è½½å…¥æˆåŠŸè¿”å›0</span>&#125;</code></pre><h5 id="3-å®šä¹‰ç±»æ„é€ å‡½æ•°ï¼Œç¡®å®šå‰å‘ä¼ æ’­è¡Œä¸º"><a href="#3-å®šä¹‰ç±»æ„é€ å‡½æ•°ï¼Œç¡®å®šå‰å‘ä¼ æ’­è¡Œä¸º" class="headerlink" title="3.  å®šä¹‰ç±»æ„é€ å‡½æ•°ï¼Œç¡®å®šå‰å‘ä¼ æ’­è¡Œä¸º"></a>3.  å®šä¹‰ç±»æ„é€ å‡½æ•°ï¼Œç¡®å®šå‰å‘ä¼ æ’­è¡Œä¸º</h5><pre><code class="hljs c"><span class="hljs-comment">// mylayer.h</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;layer.h&quot;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> ncnn;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyLayer</span> :</span> <span class="hljs-keyword">public</span> Layer&#123;<span class="hljs-keyword">public</span>:        MyLayer();  <span class="hljs-comment">// æ„é€ å‡½æ•°</span>      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDic&amp; pd)</span></span>;      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ModelBin&amp; mb)</span></span>;  <span class="hljs-keyword">private</span>:      <span class="hljs-keyword">int</span> channels;         <span class="hljs-keyword">float</span> eps;       Mat gamma_data; &#125;ï¼›<span class="hljs-comment">// mylayer.cpp</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mylayer.h&quot;</span></span>DEFINE_LAYER_CREATOR(MyLayer) <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MyLayer::load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDict&amp; pd)</span></span><span class="hljs-function"></span>&#123;      channels = pd.get(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);           eps      = pd.get(<span class="hljs-number">1</span>, <span class="hljs-number">0.001f</span>);            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MyLayer::load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ModelBin&amp; mb)</span></span><span class="hljs-function"></span>&#123;      gamma_data = mb.load(channels, <span class="hljs-number">1</span>);      <span class="hljs-keyword">if</span>(gamma_data.empty())            <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;<span class="hljs-comment">// æ„é€ å‡½æ•°</span>MyLayer::MyLayer()&#123;      <span class="hljs-comment">// æ˜¯å¦ä¸º 1è¾“å…¥1è¾“å‡ºå±‚</span>      <span class="hljs-comment">// 1è¾“å…¥1è¾“å‡ºå±‚ï¼š Convolution, Pooling, ReLU, Softmax ...</span>      <span class="hljs-comment">// åä¾‹       ï¼š Eltwise, Split, Concat, Slice ...</span>      one_blob_only = <span class="hljs-literal">true</span>;      <span class="hljs-comment">// æ˜¯å¦å¯ä»¥åœ¨ è¾“å…¥blob ä¸Šç›´æ¥ä¿®æ”¹ åè¾“å‡º</span>      <span class="hljs-comment">// æ”¯æŒåœ¨åŸä½ç½®ä¸Šä¿®æ”¹ï¼š Reluã€BNã€scaleã€Sigmod...</span>      <span class="hljs-comment">// ä¸æ”¯æŒï¼š Convolutionã€Pooling ...</span>      support_inplace = <span class="hljs-literal">true</span>;&#125;</code></pre><h5 id="4-é€‰æ‹©åˆé€‚çš„-forward-å‡½æ•°æ¥å£ï¼Œ-å¹¶å®ç°å¯¹åº”çš„-forward-å‡½æ•°"><a href="#4-é€‰æ‹©åˆé€‚çš„-forward-å‡½æ•°æ¥å£ï¼Œ-å¹¶å®ç°å¯¹åº”çš„-forward-å‡½æ•°" class="headerlink" title="4.  é€‰æ‹©åˆé€‚çš„ forward()å‡½æ•°æ¥å£ï¼Œ å¹¶å®ç°å¯¹åº”çš„ forward å‡½æ•°"></a>4.  é€‰æ‹©åˆé€‚çš„ forward()å‡½æ•°æ¥å£ï¼Œ å¹¶å®ç°å¯¹åº”çš„ forward å‡½æ•°</h5><p>Layerç±»å®šä¹‰äº†å››ç§ forward()å‡½æ•°ï¼š</p><ul><li><p>å¤šè¾“å…¥å¤šè¾“å‡ºï¼Œconst ä¸å¯ç›´æ¥å¯¹è¾“å…¥è¿›è¡Œä¿®æ”¹</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Mat&gt;&amp; bottom_blobs, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Mat&gt;&amp; top_blobs, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>;</code></pre></li><li><p>å•è¾“å…¥å•è¾“å‡ºï¼Œconst ä¸å¯ç›´æ¥å¯¹è¾“å…¥è¿›è¡Œä¿®æ”¹</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Mat&amp; bottom_blob, Mat&amp; top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>;</code></pre></li><li><p>å¤šè¾“å…¥å¤šè¾“å‡ºï¼Œå¯ç›´æ¥å¯¹è¾“å…¥è¿›è¡Œä¿®æ”¹</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">forward_inplace</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Mat&gt;&amp; bottom_top_blobs, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>;</code></pre></li><li><p>å•è¾“å…¥å•è¾“å‡ºï¼Œå¯ç›´æ¥å¯¹è¾“å…¥è¿›è¡Œä¿®æ”¹</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">forward_inplace</span><span class="hljs-params">(Mat&amp; bottom_top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>;</code></pre></li></ul><p>å…·ä½“å®ç°:</p><pre><code class="hljs c"><span class="hljs-comment">// mylayer.h</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;layer.h&quot;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> ncnn;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyLayer</span> :</span> <span class="hljs-keyword">public</span> Layer&#123;<span class="hljs-keyword">public</span>:      MyLayer();      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDic&amp; pd)</span></span>;      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ModelBin&amp; mb)</span></span>;            <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Mat&amp; bottom_blob, Mat&amp; top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>; <span class="hljs-comment">// å•è¾“å…¥å•è¾“å‡º</span>      <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">forward_inplace</span><span class="hljs-params">(Mat&amp; bottom_top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>;          <span class="hljs-comment">// å•å…¥å•å‡ºæœ¬åœ°ä¿®æ”¹ </span><span class="hljs-keyword">private</span>:       <span class="hljs-keyword">int</span> channels;        <span class="hljs-keyword">float</span> eps;       Mat gamma_data;&#125;ï¼›<span class="hljs-comment">// mylayer.cpp </span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mylayer.h&quot;</span></span>DEFINE_LAYER_CREATOR(MyLayer)MyLayer::MyLayer()&#123;      one_blob_only = <span class="hljs-literal">true</span>;      support_inplace = <span class="hljs-literal">true</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MyLayer::load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDict&amp; pd)</span></span><span class="hljs-function"></span>&#123;      channels = pd.get(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);      eps      = pd.get(<span class="hljs-number">1</span>, <span class="hljs-number">0.001f</span>);             <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MyLayer::load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ModelBin&amp; mb)</span></span><span class="hljs-function"></span>&#123;      gamma_data = mb.load(channels, <span class="hljs-number">1</span>);      <span class="hljs-keyword">if</span>(gamma_data.empty())            <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;<span class="hljs-comment">// å•å…¥å•å‡º å‰å‘ä¼ æ’­ç½‘ç»œ ä¸å¯ä¿®æ”¹ éconst</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MyLayer::forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Mat&amp; bottom_blob, Mat&amp; top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;      <span class="hljs-keyword">if</span>(bottom_blob.c != channels)            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;            <span class="hljs-comment">// å®ç°è¿ç®— x = (x + eps) * gamma_per_channel</span>      <span class="hljs-keyword">int</span> w = bottom_blob.w;      <span class="hljs-keyword">int</span> h = bottom_blob.h;      <span class="hljs-keyword">size_t</span> elemsize = bottom_blob.elemsize;      <span class="hljs-keyword">int</span> size = w * h;            <span class="hljs-comment">// è¾“å‡ºéœ€è¦æ–°å»ºï¼Œä¸å¯ç›´æ¥åœ¨è¾“å…¥blobä¸Šä¿®æ”¹</span>      top_blob.create(w, h, channels, elemsize, opt.blob_allocator);      <span class="hljs-keyword">if</span>(top_blob.empty())            <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;            <span class="hljs-meta">#pragam omp parallel for num_threads(opt.num_threads);</span>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q=<span class="hljs-number">0</span>; q&lt;channels; q++)      &#123;            <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>* in_ptr = bottom_blob.channel(q);            <span class="hljs-keyword">float</span>* out_ptr = top_blob.channel(q);            <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> gamma = gamma_data[q];                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)            &#123;                  out_ptr[i] = (in_ptr[i] + eps)*gamma;            &#125;            &#125;            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>ï¼›&#125;<span class="hljs-comment">// å•å…¥å•å‡º å‰å‘ä¼ æ’­ç½‘ç»œ  å¯åœ¨è¾“å…¥blobä¸Šä¿®æ”¹</span><span class="hljs-keyword">int</span> MyLayer::forward_inplace(Mat&amp; bottom_top_blob, <span class="hljs-keyword">const</span> Option&amp; opt) <span class="hljs-keyword">const</span>&#123;      <span class="hljs-keyword">if</span>(bottom_blob.c != channels)            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;             <span class="hljs-comment">// å®ç°è¿ç®— x = (x + eps) * gamma_per_channel</span>      <span class="hljs-keyword">int</span> w = bottom_blob.w;      <span class="hljs-keyword">int</span> h = bottom_blob.h;      <span class="hljs-keyword">int</span> size = w * h;            <span class="hljs-comment">// è¾“å‡ºä¸éœ€è¦æ–°å»ºï¼Œå¯ç›´æ¥åœ¨è¾“å…¥blobä¸Šä¿®æ”¹</span>      <span class="hljs-meta">#pragam omp parallel for num_threads(opt.num_threads);</span>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q=<span class="hljs-number">0</span>; q&lt;channels; q++)      &#123;            <span class="hljs-keyword">float</span>* in_out_ptr = bottom_top_blob.channel(q);            <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> gamma = gamma_data[q];            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)            &#123;                  in_out_ptr[i] = (in_out_ptr[i] + eps)*gamma;            &#125;            &#125;            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>ï¼›&#125;</code></pre><h5 id="5-é›†æˆè¿›-ncnn-åº“"><a href="#5-é›†æˆè¿›-ncnn-åº“" class="headerlink" title="5. é›†æˆè¿› ncnn åº“"></a>5. é›†æˆè¿› ncnn åº“</h5><pre><code class="hljs c"><span class="hljs-comment">// å±‚ç±»å‹       å±‚åç§°   è¾“å…¥æ•°é‡  è¾“å‡ºæ•°é‡   è¾“å…¥å±‚   è¾“å‡ºå±‚</span><span class="hljs-comment">// MyLayer     mylayer    1       1     conv2d   mylayer0  0=32 1=0.2 // å¯¹åº” param</span><span class="hljs-comment">// å±‚ç±»å‹: å’Œå¯¹åº”çš„æ³¨å†Œçš„ååç§°ä¸€è‡´</span><span class="hljs-comment">// æ³¨å†Œæ–°å±‚</span>ncnn::Net net;net.register_custom_layer(<span class="hljs-string">&quot;MyLayer&quot;</span>, MyLayer_layer_creator); <span class="hljs-comment">// æ³¨å†Œæ–°å±‚</span>net.load_param(<span class="hljs-string">&quot;model.param&quot;</span>);net.load_model(<span class="hljs-string">&quot;model.bin&quot;</span>);</code></pre><p>â€‹      </p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnæºç åˆ†æ_4</title>
    <link href="/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-4/"/>
    <url>/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-4/</url>
    
    <content type="html"><![CDATA[<p>ncnnæºç åˆ†æ-4 æ¨¡å‹é‡åŒ–æºç </p><a id="more"></a><p>ncnné‡åŒ–åˆ†æä»£ç å¯¹åº”çš„æ–‡ä»¶ä¸»è¦æœ‰ä¸¤ä¸ª:ncnn/tools/quantize/<strong>ncnn2table.cpp</strong> å’Œ ncnn/tools/quantize/<strong>ncnn2int8.cpp</strong>ã€‚</p><ul><li><strong>ncnn2table.cpp</strong> <strong>ä¸»è¦æ˜¯åˆ†æç”Ÿæˆç›¸åº”çš„é‡åŒ–è¡¨ï¼Œ å…¶ä¸­å­˜å‚¨äº†æ¯ä¸ªå±‚çš„ scale å€¼ã€‚</strong></li><li><strong>ncnn2int8.cpp</strong> <strong>åˆ™æ˜¯å¯¹ç½‘ç»œè¿›è¡Œ int8é‡åŒ–</strong></li></ul><h4 id="1-ncnn2int8"><a href="#1-ncnn2int8" class="headerlink" title="1. ncnn2int8"></a>1. ncnn2int8</h4><p>â€‹    æˆ‘ä»¬é¦–å…ˆå¯¹ ncnn2int8.cpp è¿™ä¸ªæ–‡ä»¶è¿›è¡Œåˆ†æã€‚ è¯¥æ–‡ä»¶å®Œæˆçš„ä¸»è¦åŠŸèƒ½æ˜¯å°† float32 ç±»å‹è½¬åŒ–ä¸º int8 ç±»å‹ã€‚ä¸»è¦åˆ†ä¸ºå››ä¸ªæ­¥éª¤:</p><p>(1) è¯»å–ç”Ÿæˆçš„ table æ–‡ä»¶ï¼Œé‡Œé¢å­˜å‚¨äº†å¯¹åº”çš„ scaleã€‚è¿™æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„è¯»å–å’Œè§£æã€‚</p><p>â€‹    read<em>int8_scale_table è´Ÿè´£è¯»å– table æ–‡ä»¶, å°† scale åˆ†åˆ«å­˜å‚¨åœ¨ weight_int8scale_table (å¸¦ _param\</em>) å’Œ blob<em>int8scale_table(ä¸å¸¦_param\</em>)ã€‚ è¿™é‡Œåªæ˜¯ä¸€ä¸ªè¯»å–æ–‡ä»¶å¹¶è§£æçš„è¿‡ç¨‹ã€‚</p><p><strong>weight</strong>( å¸¦_param_)æ ¼å¼ç¤ºä¾‹ï¼š scale ä¸ªæ•°å’Œé€šé“æ•°ç›¸åŒï¼Œæ˜¯ä¸»é€šé“è¿›è¡Œé‡åŒ–</p><p><img src="/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-4/1.jpg" alt></p><p><strong>blob</strong> (ä¸å¸¦_param_) æ ¼å¼ç¤ºä¾‹ï¼š</p><p><img src="/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-4/2.jpg" alt></p><p>(2) <strong>è½½å…¥åŸå§‹çš„å‚æ•°å’Œæ¨¡å‹æ–‡ä»¶ã€‚</strong>net ä¸­çš„ .param å’Œ .bin è½½å…¥æ–¹å¼<strong>ã€‚</strong></p><p>(3) <strong>å¯¹å·ç§¯å±‚ã€æ·±åº¦å¯åˆ†ç¦»å·ç§¯å±‚å’Œå…¨è¿æ¥å±‚è¿›è¡Œé‡åŒ–ã€‚quantize_convolutionã€quantize_convolutiondepthwiseã€quantize_innerproduct</strong> åˆ†åˆ«å¯¹å·ç§¯å±‚ã€å¯åˆ†ç¦»å·ç§¯å±‚å’Œå…¨è¿æ¥å±‚è¿›è¡Œé‡åŒ–<strong>ã€‚ è¿™é‡Œå…¶å®æ˜¯æ„å»ºäº†ä¸€ä¸ªé‡åŒ–å±‚ï¼Œç„¶åå°†åŸå§‹çš„fp32ç±»å‹çš„æƒé‡å’Œscaleä½œä¸ºè¾“å…¥, è¿›è¡Œä¸€æ¬¡forwardè¿ç®—ï¼Œå°†ç»“æœæ›¿æ¢åŸæ¥çš„fp32æƒé‡</strong></p><p>(4) <strong>ä¿å­˜é‡åŒ–åçš„æƒé‡æ–‡ä»¶</strong></p><p><img src="/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-4/3.jpg" alt></p><p><strong>ä»ä¸»å‡½æ•°å…¥æ‰‹</strong>: åˆ†åˆ«è¯»å–äº†5ä¸ªå‚æ•°, <strong>åˆ†åˆ«æ˜¯è¾“å…¥æ¨¡å‹æ–‡ä»¶ã€å‚æ•°æ–‡ä»¶ã€è¾“å‡ºæ¨¡å‹æ–‡ä»¶ã€è¾“å‡ºå‚æ•°æ–‡ä»¶å’Œé‡åŒ–è¡¨çš„è·¯å¾„</strong>ã€‚ ç„¶åæ‰§è¡Œå¦‚ä¸Šæ‰€ç¤ºçš„å››ä¸ªæ­¥éª¤ã€‚</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>** argv)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// è¯»å–ç›¸åº”çš„å‚æ•° </span>    <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">6</span>)    &#123;        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;usage: %s [inparam] [inbin] [outparam] [outbin] [calibration table]\n&quot;</span>, argv[<span class="hljs-number">0</span>]);        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* inparam = argv[<span class="hljs-number">1</span>];  <span class="hljs-comment">// è¾“å…¥æ¨¡å‹æ–‡ä»¶</span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* inbin = argv[<span class="hljs-number">2</span>];  <span class="hljs-comment">// è¾“å…¥å‚æ•°æ–‡ä»¶</span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* outparam = argv[<span class="hljs-number">3</span>];  <span class="hljs-comment">// è¾“å‡ºæ¨¡å‹æ–‡ä»¶</span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* outbin = argv[<span class="hljs-number">4</span>];  <span class="hljs-comment">// è¾“å‡ºå‚æ•°æ–‡ä»¶</span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* int8scale_table_path = argv[<span class="hljs-number">5</span>]; <span class="hljs-comment">// é‡åŒ–è¡¨çš„è·¯å¾„</span>    NetQuantize quantizer; <span class="hljs-comment">// ä¸»è¦çš„é‡åŒ–ç±»</span>    <span class="hljs-comment">// (1)  è¯»å–å¹¶è§£æ scale table æ–‡ä»¶</span>    <span class="hljs-keyword">if</span> (int8scale_table_path)    &#123;        <span class="hljs-keyword">bool</span> s2 = read_int8scale_table(int8scale_table_path, quantizer.blob_int8scale_table, quantizer.weight_int8scale_table);        <span class="hljs-keyword">if</span> (!s2)         &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;read_int8scale_table failed\n&quot;</span>);            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        &#125;    &#125;    <span class="hljs-comment">// (2) è½½å…¥æ¨¡å‹æ–‡ä»¶å’Œå‚æ•°</span>    quantizer.load_param(inparam);     quantizer.load_model(inbin);    <span class="hljs-comment">// (3) é‡åŒ–: ä¸»è¦é‡åŒ–ä¸‰å±‚: convã€convdw å’Œ fc</span>    quantizer.quantize_convolution();    quantizer.quantize_convolutiondepthwise();    quantizer.quantize_innerproduct();    <span class="hljs-comment">// (4) å­˜å‚¨æ¨¡å‹å’Œå‚æ•°æ–‡ä»¶</span>    quantizer.save(outparam, outbin);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>â€‹    <strong>ä»£ç çš„æœ€æ ¸å¿ƒçš„ä¸‰ä¸ªå‡½æ•°:</strong> <strong>quantize_convolutionã€quantize_convolutiondepthwiseã€quantize_innerproduct</strong> åˆ†åˆ«å¯¹å·ç§¯å±‚ã€å¯åˆ†ç¦»å·ç§¯å±‚å’Œå…¨è¿æ¥å±‚è¿›è¡Œé‡åŒ–, </p><p>æˆ‘ä»¬åœ¨æ­¤ä»¥ <strong>quantize_convolution</strong> ä¸ºä¾‹:</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">NetQuantize::quantize_convolution</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> layer_count = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">int</span>&gt;(layers.size());    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; layer_count; i++)    &#123;        <span class="hljs-comment">// æŸ¥æ‰¾æ‰€æœ‰çš„å·ç§¯å±‚</span>        <span class="hljs-keyword">if</span> (layers[i]-&gt;type != <span class="hljs-string">&quot;Convolution&quot;</span>)            <span class="hljs-keyword">continue</span>;                         <span class="hljs-comment">// è·å–å·ç§¯å±‚çš„åç§°           </span>        <span class="hljs-keyword">char</span> key[<span class="hljs-number">256</span>];        <span class="hljs-built_in">sprintf</span>(key, <span class="hljs-string">&quot;%s_param_0&quot;</span>, layers[i]-&gt;name.c_str());                            <span class="hljs-comment">// åœ¨ blob_int8scale_table æ‰¾åˆ°è¯¥å±‚  /* å…¶å®è¿™é‡Œçš„ blob_int8scale_table ä¸‹æ–‡å¹¶æ²¡æœ‰ç”¨åˆ° */</span>        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">map</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; &gt;::iterator iter_data = blob_int8scale_table.find(layers[i]-&gt;name);        <span class="hljs-keyword">if</span> (iter_data == blob_int8scale_table.end())            <span class="hljs-keyword">continue</span>;        <span class="hljs-comment">// åœ¨ weight_int8scale_table æ‰¾åˆ°è¯¥å±‚</span>        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">map</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; &gt;::iterator iter = weight_int8scale_table.find(key);        <span class="hljs-keyword">if</span> (iter == weight_int8scale_table.end())        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;this layer need to be quantized, but no scale param!\n&quot;</span>);            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        &#125;                <span class="hljs-comment">// å·ç§¯å±‚é‡åŒ– -&gt;  fp32 åˆ° int8</span>        ncnn::Convolution* convolution = (ncnn::Convolution*)layers[i]; <span class="hljs-comment">// (1) è·å–è¯¥å·ç§¯å±‚</span>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;quantize_convolution %s\n&quot;</span>, convolution-&gt;name.c_str());        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; weight_data_int8_scales = iter-&gt;second; <span class="hljs-comment">//  (2) è·å–weight_data_int8_scales</span>        &#123;            <span class="hljs-function">ncnn::Mat <span class="hljs-title">int8_weight_data</span><span class="hljs-params">(convolution-&gt;weight_data_size, (<span class="hljs-keyword">size_t</span>)<span class="hljs-number">1u</span>)</span></span>; <span class="hljs-comment">// (3) ç»“æœï¼Œå’Œweightçš„å¤§å°ä¸€è‡´</span>            <span class="hljs-keyword">if</span> (int8_weight_data.empty())                <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;            <span class="hljs-comment">// è¿™é‡Œæ‰€è°“çš„é‡åŒ–ï¼Œå³è¿›è¡Œäº†ä¸€æ¬¡ç®€å•çš„å‰å‘ä¼ æ’­ï¼Œå°†åŸæ¥çš„float32ç±»å‹çš„æƒé‡æ›¿æ¢ä¸ºintç±»å‹ç»“æœ</span>            <span class="hljs-comment">// åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å‡†å¤‡çš„ä¸œè¥¿æœ‰</span>            <span class="hljs-comment">// (1) å·ç§¯å±‚çš„ fp32 çš„æ•°æ® (2) scale æ•°æ® (3) å£°æ˜äº†ä¸€ä¸ª int8_weight_dataçš„æ•°æ®</span>            <span class="hljs-comment">// æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯ (1) + (2) -&gt; (3)</span>            <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> weight_data_size_output = convolution-&gt;weight_data_size / convolution-&gt;num_output;            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> n = <span class="hljs-number">0</span>; n &lt; convolution-&gt;num_output; n++)   <span class="hljs-comment">// é€å·ç§¯æ ¸è¿›è¡Œé‡åŒ–</span>            &#123;                <span class="hljs-comment">// (4) åˆ›å»ºä¸€ä¸ªquantize op</span>                ncnn::Layer* op = ncnn::create_layer(ncnn::LayerType::Quantize);                 <span class="hljs-comment">// (5) æŠŠé‡åŒ–è¡¨ä¸­çš„scaleè®¾ç½®è¿›opé‡Œå»</span>                ncnn::ParamDict pd;                pd.<span class="hljs-built_in">set</span>(<span class="hljs-number">0</span>, weight_data_int8_scales[n]);                op-&gt;load_param(pd);                <span class="hljs-comment">// (6) blob_allocator</span>                ncnn::Option opt;                opt.blob_allocator = int8_weight_data.allocator;                <span class="hljs-comment">// (7) weight_data &lt;-&gt; weight_data_n , int8_weight_data &lt;-&gt;  int8_weight_data_n </span>                <span class="hljs-keyword">const</span> ncnn::Mat weight_data_n = convolution-&gt;weight_data.range(weight_data_size_output * n, weight_data_size_output);                ncnn::Mat int8_weight_data_n = int8_weight_data.range(weight_data_size_output * n, weight_data_size_output);                <span class="hljs-comment">// (8) quantitze opå‰ä¼ ï¼Œè®¡ç®—é‡åŒ–æƒå€¼ weight_data_n -&gt;  int8_weight_data_n</span>                op-&gt;forward(weight_data_n, int8_weight_data_n, opt);                                 <span class="hljs-keyword">delete</span> op;            &#125;            convolution-&gt;weight_data = int8_weight_data; <span class="hljs-comment">// (9) ç”¨é‡åŒ–åçš„æƒå€¼æ›¿æ¢åŸæ¥çš„æƒå€¼</span>        &#125;        convolution-&gt;int8_scale_term = <span class="hljs-number">2</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>å¯ä»¥æ¥ç®€å•çš„çœ‹ä¸€ä¸‹ <strong>quantize</strong> å±‚:</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-keyword">signed</span> <span class="hljs-keyword">char</span> <span class="hljs-title">float2int8</span><span class="hljs-params">(<span class="hljs-keyword">float</span> v)</span></span>&#123;    <span class="hljs-keyword">int</span> int32 = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">int</span>&gt;(round(v)); <span class="hljs-comment">// å–æ•´æ•°, ç„¶åè½¬åŒ–ä¸º int32ç±»å‹</span>    <span class="hljs-keyword">if</span> (int32 &gt; <span class="hljs-number">127</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">127</span>;  <span class="hljs-comment">// å¦‚æœå¤§äº127, è¿”å›127</span>    <span class="hljs-keyword">if</span> (int32 &lt; <span class="hljs-number">-127</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-127</span>; <span class="hljs-comment">// å¦‚æœå°äº -127, è¿”å› -127</span>    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">signed</span> <span class="hljs-keyword">char</span>)int32; <span class="hljs-comment">// è¿”å› int32 -&gt; int8</span>&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Quantize::forward</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Mat&amp; bottom_blob, Mat&amp; top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>&#123;    <span class="hljs-keyword">int</span> dims = bottom_blob.dims;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">1</span>)&#123;        <span class="hljs-keyword">int</span> w = bottom_blob.w;        top_blob.create(w, (<span class="hljs-keyword">size_t</span>)<span class="hljs-number">1u</span>, opt.blob_allocator);        <span class="hljs-keyword">if</span> (top_blob.empty())            <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;        <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span>* ptr = bottom_blob;        <span class="hljs-keyword">signed</span> <span class="hljs-keyword">char</span>* outptr = top_blob;        <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> omp parallel for num_threads(opt.num_threads)</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;w; i++)        &#123;            <span class="hljs-comment">// ! è¿™ä¸€å¥æ˜¯æœ€æ ¸å¿ƒçš„ï¼Œä¹Ÿæ˜¯æ•´ä¸ªé‡åŒ–éƒ¨åˆ†ä»£ç çš„æ ¸å¿ƒ</span>            <span class="hljs-comment">// å°† float32 ä¹˜ä»¥ scaleï¼Œ ç„¶åå°†å…¶è½¬åŒ–ä¸º int8 ç±»å‹</span>            outptr[i] = float2int8(ptr[i] * scale);         &#125;    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">2</span>)&#123;        ...    &#125;    <span class="hljs-keyword">if</span> (dims == <span class="hljs-number">3</span>)&#123;        ...    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p><strong>2. ncnn2table.cpp</strong> </p><p>ncnn2table.cpp ä¸»è¦ç”¨äº<strong>é‡åŒ–è¡¨çš„è®¡ç®—</strong>ï¼Œè¯´ç™½äº†å°±æ˜¯ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è¯´çš„ç®—æ³•æ¥è®¡ç®—å„ä¸ªå‚æ•°çš„ scaleï¼Œåœ¨ncnn2table.cppä¸‹ï¼Œé¡¶å±‚ä»£ç æ ¸å¿ƒå°±ä¸€å¥è¯ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">/* ncnn2table.cpp */</span><span class="hljs-comment">// filenames: ç”¨æ¥calibrationçš„å›¾ç‰‡list </span><span class="hljs-comment">// parampath: å‚æ•°æ–‡ä»¶è·¯å¾„</span><span class="hljs-comment">// binpath: bin äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„</span><span class="hljs-comment">// tablepath: ç”Ÿæˆçš„é‡åŒ–è¡¨çš„è·¯å¾„</span><span class="hljs-comment">// pre_param: å‚æ•°</span>post_training_quantize(filenames, parampath, binpath, tablepath, pre_param);</code></pre><p>æˆ‘ä»¬æ¥ä¸‹æ¥é‡ç‚¹çœ‹post_training_quantizeè¿™ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°åšäº†å¦‚ä¸‹å‡ ä»¶äº‹ï¼š</p><p><strong>&gt;&gt;&gt;&gt;  (1) åˆå§‹åŒ–quantitize_datas    (2) è®¡ç®—æœ€å¤§å€¼    (3) åˆå§‹åŒ–ç›´æ–¹å›¾çš„é—´éš”      (4) è®¡ç®—ç›´æ–¹å›¾           (5) è®¡ç®—Scale</strong></p><p><strong>(1) åˆå§‹åŒ–quantitize_datas</strong></p><p>â€‹    æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ¯ä¸€ä¸ªå±‚æœ‰ä¸€ä¸ª<strong>QuantizeData</strong>å¯¹è±¡ï¼Œåˆå§‹åŒ– num_bins=2048ï¼Œä¹Ÿå°±æ˜¯åŸå§‹çš„fp32åˆ†å¸ƒPoï¼Œå…¶ç»Ÿè®¡ç›´æ–¹å›¾ä¸€å…±æœ‰<strong>2048ä¸ªbins</strong></p><pre><code class="hljs cpp"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;QuantizeData&gt; quantize_datas;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; net.conv_names.size(); i++)&#123;    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> layer_name = net.conv_names[i];    <span class="hljs-function">QuantizeData <span class="hljs-title">quantize_data</span><span class="hljs-params">(layer_name, <span class="hljs-number">2048</span>)</span></span>;    quantize_datas.push_back(quantize_data);&#125;</code></pre><p><strong>(2) è®¡ç®—æœ€å¤§å€¼</strong></p><p>â€‹    éå†æ‰€æœ‰å›¾ç‰‡ï¼Œè®¡ç®—æ¯ä¸ªblobçš„æœ€å¤§æ¿€æ´»å€¼ï¼Œè¿™é‡Œæ‰¾çš„æ˜¯ç»å¯¹å€¼æœ€å¤§çš„é‚£ä¸ª</p><pre><code class="hljs cpp">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; image_list.size(); i++) <span class="hljs-comment">// éå†calibrationæ•°æ®</span>    &#123;        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> img_name = image_list[i];        <span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>)        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;    %d/%d\n&quot;</span>, <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">int</span>&gt;(i + <span class="hljs-number">1</span>), <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">int</span>&gt;(size));        &#125;        cv::Mat bgr = cv::imread(img_name, cv::IMREAD_COLOR);        <span class="hljs-keyword">if</span> (bgr.empty())        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;cv::imread %s failed\n&quot;</span>, img_name.c_str());            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        &#125;        ncnn::Mat in = ncnn::Mat::from_pixels_resize(bgr.data, swapRB ? ncnn::Mat::PIXEL_BGR2RGB : ncnn::Mat::PIXEL_BGR, bgr.cols, bgr.rows, width, height);        in.substract_mean_normalize(mean_vals, norm_vals);        ncnn::Extractor ex = net.create_extractor();        ex.input(net.input_names[<span class="hljs-number">0</span>].c_str(), in);        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> j = <span class="hljs-number">0</span>; j &lt; net.conv_names.size(); j++)        &#123;            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> layer_name = net.conv_names[j];            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> blob_name = net.conv_bottom_blob_names[layer_name];            ncnn::Mat out;            ex.extract(blob_name.c_str(), out); <span class="hljs-comment">// å‰ä¼ ç½‘ç»œï¼Œç›¸å½“äºcaffeçš„forwardToï¼Œæ‹¿åˆ°blobæ•°æ®</span>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> k = <span class="hljs-number">0</span>; k &lt; quantize_datas.size(); k++)            &#123;                <span class="hljs-keyword">if</span> (quantize_datas[k].name == layer_name)                &#123;                    quantize_datas[k].initial_blob_max(out); <span class="hljs-comment">// ç»Ÿè®¡æœ€å¤§å€¼</span>                    <span class="hljs-keyword">break</span>;                &#125;            &#125;        &#125;    &#125;    <span class="hljs-comment">// è¢«è°ƒå‡½æ•°:</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QuantizeData::initial_blob_max</span><span class="hljs-params">(ncnn::Mat data)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> channel_num = data.c;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> size = data.w * data.h;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q = <span class="hljs-number">0</span>; q &lt; channel_num; q++)    &#123;        <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> *data_n = data.channel(q);        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)        &#123;            max_value = <span class="hljs-built_in">std</span>::max(max_value, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">fabs</span>(data_n[i]));        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p><strong>(3) åˆå§‹åŒ–ç›´æ–¹å›¾é—´éš”</strong></p><p>ä¹Ÿå¾ˆç®€å•ï¼Œéå†æ¯ä¸ªå±‚ï¼Œåˆå§‹åŒ–ç›´æ–¹å›¾é—´éš”=æœ€å¤§æ¿€æ´»å€¼/2048</p><pre><code class="hljs cpp">    <span class="hljs-comment">// step 2 histogram_interval</span>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;    ====&gt; step 2 : generate the histogram_interval.\n&quot;</span>);    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; net.conv_names.size(); i++)    &#123;        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> layer_name = net.conv_names[i];        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> k = <span class="hljs-number">0</span>; k &lt; quantize_datas.size(); k++)        &#123;            <span class="hljs-keyword">if</span> (quantize_datas[k].name == layer_name)            &#123;                quantize_datas[k].initial_histogram_interval();                <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;%-20s : max = %-15f interval = %-10f\n&quot;</span>, quantize_datas[k].name.c_str(), quantize_datas[k].max_value, quantize_datas[k].histogram_interval);                <span class="hljs-keyword">break</span>;            &#125;        &#125;    &#125;    <span class="hljs-comment">// è¢«è°ƒå‡½æ•°    </span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QuantizeData::initial_histogram_interval</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    histogram_interval = max_value / <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">float</span>&gt;(num_bins);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p><strong>(4) è®¡ç®—ç›´æ–¹å›¾</strong></p><p>â€‹    å†å‰ä¼ ä¸€æ¬¡ï¼Œéå†æ¯ä¸ªblobï¼Œå‘æ¯ä¸ªbinä¸­æŠ•ç¥¨ï¼Œè®¡ç®—å‡ºç›´æ–¹å›¾ï¼Œå¾—åˆ°åŸå§‹fp32åˆ†å¸ƒ</p><pre><code class="hljs cpp">    <span class="hljs-comment">// step 3 histogram</span>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;    ====&gt; step 3 : generate the histogram.\n&quot;</span>);    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; image_list.size(); i++)    &#123;        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> img_name = image_list[i];        <span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>)            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;          %d/%d\n&quot;</span>, (<span class="hljs-keyword">int</span>)(i + <span class="hljs-number">1</span>), (<span class="hljs-keyword">int</span>)size);                    cv::Mat bgr = cv::imread(img_name, cv::IMREAD_COLOR);        <span class="hljs-keyword">if</span> (bgr.empty())        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;cv::imread %s failed\n&quot;</span>, img_name.c_str());            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        &#125;        ncnn::Mat in = ncnn::Mat::from_pixels_resize(bgr.data, swapRB ? ncnn::Mat::PIXEL_BGR2RGB : ncnn::Mat::PIXEL_BGR, bgr.cols, bgr.rows, width, height);        in.substract_mean_normalize(mean_vals, norm_vals);        ncnn::Extractor ex = net.create_extractor();        ex.input(net.input_names[<span class="hljs-number">0</span>].c_str(), in);        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> j = <span class="hljs-number">0</span>; j &lt; net.conv_names.size(); j++)        &#123;            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> layer_name = net.conv_names[j];            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> blob_name = net.conv_bottom_blob_names[layer_name];            ncnn::Mat out;            ex.extract(blob_name.c_str(), out);            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> k = <span class="hljs-number">0</span>; k &lt; quantize_datas.size(); k++)            &#123;                <span class="hljs-keyword">if</span> (quantize_datas[k].name == layer_name)                &#123;                    quantize_datas[k].update_histogram(out);                    <span class="hljs-keyword">break</span>;                &#125;            &#125;        &#125;    &#125;    <span class="hljs-comment">// è¢«è°ƒå‡½æ•°      </span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QuantizeData::update_histogram</span><span class="hljs-params">(ncnn::Mat data)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> channel_num = data.c;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> size = data.w * data.h;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q = <span class="hljs-number">0</span>; q &lt; channel_num; q++)    &#123;        <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> *data_n = data.channel(q);        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)        &#123;            <span class="hljs-keyword">if</span> (data_n[i] == <span class="hljs-number">0</span>)                <span class="hljs-keyword">continue</span>;            <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> index = <span class="hljs-built_in">std</span>::min(<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">int</span>&gt;(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">abs</span>(data_n[i]) / histogram_interval), <span class="hljs-number">2047</span>);            histogram[index]++;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p><strong>(5) è®¡ç®—Scale</strong></p><pre><code class="hljs cpp">    <span class="hljs-comment">// step4 kld</span>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;    ====&gt; step 4 : using kld to find the best threshold value.\n&quot;</span>);    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; net.conv_names.size(); i++)    &#123;        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> layer_name = net.conv_names[i];        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> blob_name = net.conv_bottom_blob_names[layer_name];        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;%-20s &quot;</span>, layer_name.c_str());        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> k = <span class="hljs-number">0</span>; k &lt; quantize_datas.size(); k++)        &#123;            <span class="hljs-keyword">if</span> (quantize_datas[k].name == layer_name)            &#123;                quantize_datas[k].get_data_blob_scale();                <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;bin : %-8d threshold : %-15f interval : %-10f scale : %-10f\n&quot;</span>,                        quantize_datas[k].threshold_bin,                        quantize_datas[k].threshold,                        quantize_datas[k].histogram_interval,                        quantize_datas[k].scale);                <span class="hljs-built_in">fprintf</span>(fp, <span class="hljs-string">&quot;%s %f\n&quot;</span>, layer_name.c_str(), quantize_datas[k].scale);                <span class="hljs-keyword">break</span>;            &#125;        &#125;    &#125;<span class="hljs-comment">// è¢«è°ƒå‡½æ•° </span><span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">QuantizeData::get_data_blob_scale</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;       normalize_histogram();   <span class="hljs-comment">// ç›´æ–¹å›¾å½’ä¸€åŒ–</span>    threshold_bin = threshold_distribution(histogram);   <span class="hljs-comment">// è®¡ç®—æœ€åæœ‰å¤šå°‘ä¸ªbins</span>    threshold = (threshold_bin + <span class="hljs-number">0.5</span>) * histogram_interval;   <span class="hljs-comment">// ä¹‹åå¾ˆå®¹æ˜“å°±èƒ½æ‰¾åˆ°Threshold</span>    scale = <span class="hljs-number">127</span> / threshold;   <span class="hljs-comment">// Scaleä¹Ÿå¾ˆç®€å•å°±èƒ½zå¥½åˆ°</span>    <span class="hljs-keyword">return</span> scale;&#125;</code></pre><p>å…¶å®è¯´äº†åŠå¤©ï¼Œ<strong>æœ€æ ¸å¿ƒçš„å°±åœ¨get_data_blob_scaleè¿™ä¸ªå‡½æ•°é‡Œï¼Œå‡½æ•°åˆ†ä¸º3æ­¥</strong>ï¼š</p><p><strong>a. ç›´æ–¹å›¾å½’ä¸€åŒ–</strong></p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QuantizeData::normalize_histogram</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">size_t</span> length = histogram.size();    <span class="hljs-keyword">float</span> sum = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; length; i++)        sum += histogram[i];    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; length; i++)        histogram[i] /= sum;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p><strong>b. ä½¿ç”¨KLæ•£åº¦è®¡ç®—æœ€åç”¨å¤šå°‘ä¸ªbinsæ¯”è¾ƒåˆé€‚</strong></p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">QuantizeData::threshold_distribution</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; &amp;distribution, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> target_bin = <span class="hljs-number">128</span>)</span></span><span class="hljs-function"></span>&#123;    ...    <span class="hljs-comment">// è¿™é‡Œlengthå°±æ˜¯åŸå§‹åˆ†å¸ƒPoçš„é•¿åº¦ï¼ŒNCNNé»˜è®¤2048ã€‚è¿™é‡Œçš„thresholdå®é™…ä¸Šæ˜¯num_binsï¼Œå¯ä»¥æ¢ç®—æˆT</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> threshold = target_bin; threshold &lt; length; threshold++)   <span class="hljs-comment">// target_bin=128ï¼Œlength = 2048</span>    &#123;         <span class="hljs-comment">// â‘ . è®¡ç®—æˆªæ–­çš„fp32åˆ†å¸ƒP</span>         <span class="hljs-comment">// â‘¡. è®¡ç®—int8åˆ†å¸ƒQ</span>         <span class="hljs-comment">// â‘¢. è®¡ç®—æ‰©å±•åˆ†å¸ƒQ_expand</span>        <span class="hljs-comment">// â‘£. è®¡ç®—KLæ•£åº¦</span>        <span class="hljs-comment">// â‘¤. æ¯”å¤§å°</span>    &#125;&#125;</code></pre><p>â‘ . è®¡ç®—æˆªæ–­çš„fp32åˆ†å¸ƒPä¹Ÿå¾ˆç®€å•ï¼š</p><pre><code class="hljs cpp"><span class="hljs-keyword">float</span> threshold_sum = <span class="hljs-number">0</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> threshold=target_bin; threshold&lt;length; threshold++) &#123;    threshold_sum += distribution[threshold];   <span class="hljs-comment">// 128ä»¥ä¸Šçš„æ‰€æœ‰æ•°æ®å’Œ</span>&#125;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> threshold=target_bin; threshold&lt;length; threshold++) &#123;    <span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; <span class="hljs-title">t_distribution</span><span class="hljs-params">(distribution.begin(), distribution.begin()+threshold)</span></span>;        t_distribution[threshold<span class="hljs-number">-1</span>] += threshold_sum;   <span class="hljs-comment">// Pçš„æœ€åä¸€ä¸ªbinåŠ ä¸Šè¢«æˆªæ–­çš„æ‰€æœ‰æ¦‚ç‡ï¼Œå¾—åˆ°æˆªæ–­çš„fp32åˆ†å¸ƒP</span>    threshold_sum -= distribution[threshold];       <span class="hljs-comment">// æ˜¯é€šè¿‡å‡æ³•æ¥ä¿è¯æ•°å€¼æ­£ç¡®æ€§çš„ï¼Œå¾ˆå·§ç§’</span>    ...</code></pre><p>â‘¡. è®¡ç®—int8åˆ†å¸ƒQï¼Œæ³¨æ„Qæ˜¯ä»Poå¾—æ¥çš„ï¼Œè€Œä¸æ˜¯ä»På¾—æ¥çš„ï¼Œå¤§äºTçš„éƒ¨åˆ†å¹¶ä¸ä¼šåŠ è¿›æœ€åä¸€ä¸ªbinå†…ï¼ˆå­˜ç–‘ï¼Œä¸ç†è§£ï¼‰ï¼›å¦å¤–ï¼Œå½“å‘ç”Ÿäº†4èˆ5å…¥æ—¶ï¼Œä¼šæœ‰ç‰¹æ®Šå¤„ç†</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; <span class="hljs-title">quantize_distribution</span><span class="hljs-params">(target_bin)</span></span>;  <span class="hljs-comment">// é‡åŒ–ååˆ†å¸ƒQï¼Œé•¿åº¦æ˜¯128</span> fill(quantize_distribution.begin(), quantize_distribution.end(), <span class="hljs-number">0</span>);<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> num_per_bin = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">float</span>&gt;(threshold) / target_bin;  <span class="hljs-comment">// å…¶å®å°±æ˜¯å½“å‰Tä¸‹çš„Scale </span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;target_bin; i++) &#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> start = i * num_per_bin;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> end = start + num_per_bin;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> left_upper = <span class="hljs-built_in">ceil</span>(start);    <span class="hljs-keyword">if</span> (left_upper &gt; start)     &#123;   <span class="hljs-comment">// è¿™é‡Œçš„æ„æ€æ˜¯ï¼Œå¦‚æœå‘ç”Ÿäº†5å…¥ï¼Œåˆ™éœ€è¦å°†èˆæ‰çš„é‚£ä¸ªbinæŒ‰æ¯”ä¾‹åŠ è¿›æ¥</span>        <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> left_scale = left_upper - start;        quantize_distribution[i] += left_scale * distribution[left_upper - <span class="hljs-number">1</span>];    &#125;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> right_lower = <span class="hljs-built_in">floor</span>(end);    <span class="hljs-keyword">if</span> (right_lower &lt; end)     &#123;        <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> right_scale = end - right_lower;        quantize_distribution[i] += right_scale * distribution[right_lower];    &#125;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=left_upper; j&lt;right_lower; j++)     &#123;        quantize_distribution[i] += distribution[j];    &#125;&#125;</code></pre><p>â‘¢. è®¡ç®—Q_expandï¼Œç»Ÿè®¡countæ—¶0ä¸ç®—åœ¨å†…ï¼Œæ³¨æ„ä¸ç®¡æ˜¯ç»Ÿè®¡æ•°é‡è¿˜æ˜¯ä¸Šé‡‡æ ·çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½æœ‰4èˆ5å…¥ç›¸å…³çš„é—®é¢˜</p><pre><code class="hljs cpp"><span class="hljs-comment">// get Q</span><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; <span class="hljs-title">expand_distribution</span><span class="hljs-params">(threshold, <span class="hljs-number">0</span>)</span></span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;target_bin; i++) &#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> start = i * num_per_bin;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> end = start + num_per_bin;    <span class="hljs-keyword">float</span> count = <span class="hljs-number">0</span>;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> left_upper = <span class="hljs-built_in">ceil</span>(start);    <span class="hljs-keyword">float</span> left_scale = <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span> (left_upper &gt; start)     &#123;        left_scale = left_upper - start;        <span class="hljs-keyword">if</span> (distribution[left_upper - <span class="hljs-number">1</span>] != <span class="hljs-number">0</span>)         &#123;            count += left_scale;        &#125;    &#125;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> right_lower = <span class="hljs-built_in">floor</span>(end);    <span class="hljs-keyword">float</span> right_scale = <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span> (right_lower &lt; end)     &#123;        right_scale = end - right_lower;        <span class="hljs-keyword">if</span> (distribution[right_lower] != <span class="hljs-number">0</span>)         &#123;            count += right_scale;        &#125;    &#125;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=left_upper; j&lt;right_lower; j++)     &#123;        <span class="hljs-keyword">if</span> (distribution[j] != <span class="hljs-number">0</span>)         &#123;            count++;        &#125;    &#125;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> expand_value = quantize_distribution[i] / count;    <span class="hljs-keyword">if</span> (left_upper &gt; start)     &#123;        <span class="hljs-keyword">if</span> (distribution[left_upper - <span class="hljs-number">1</span>] != <span class="hljs-number">0</span>)         &#123;            expand_distribution[left_upper - <span class="hljs-number">1</span>] += expand_value * left_scale;  <span class="hljs-comment">// ä¸Šé‡‡æ ·è¿‡ç¨‹ä¸­ä¸€æ ·æœ‰å››èˆäº”å…¥çš„é—®é¢˜</span>        &#125;    &#125;    <span class="hljs-keyword">if</span> (right_lower &lt; end)     &#123;        <span class="hljs-keyword">if</span> (distribution[right_lower] != <span class="hljs-number">0</span>)         &#123;            expand_distribution[right_lower] += expand_value * right_scale;        &#125;    &#125;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=left_upper; j&lt;right_lower; j++)     &#123;        <span class="hljs-keyword">if</span> (distribution[j] != <span class="hljs-number">0</span>)         &#123;            expand_distribution[j] += expand_value;        &#125;    &#125;&#125;</code></pre><p>â‘£. è®¡ç®—KLæ•£åº¦ï¼Œæ³¨æ„å½“Qä¸º0æ—¶ï¼ŒKLæ•£åº¦åªåŠ ä¸€ï¼ˆå­˜ç–‘ï¼Œä¸ç†è§£ï¼‰</p><pre><code class="hljs cpp"><span class="hljs-keyword">float</span> kl_divergence = compute_kl_divergence(t_distribution, expand_distribution);<span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">QuantizeData::compute_kl_divergence</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; &amp;dist_a, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; &amp;dist_b)</span> </span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> length = dist_a.size();    assert(dist_b.size() == length);    <span class="hljs-keyword">float</span> result = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;length; i++)     &#123;        <span class="hljs-keyword">if</span> (dist_a[i] != <span class="hljs-number">0</span>)         &#123;            <span class="hljs-keyword">if</span> (dist_b[i] == <span class="hljs-number">0</span>)             &#123;                result += <span class="hljs-number">1</span>;   <span class="hljs-comment">// Qä¸º0æ—¶ï¼ŒKLæ•£åº¦åªåŠ ä¸€</span>            &#125;             <span class="hljs-keyword">else</span>             &#123;                result += dist_a[i] * <span class="hljs-built_in">log</span>(dist_a[i] / dist_b[i]);            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> result;&#125;</code></pre><p>â‘¤. è½»æ¾æ„‰æ‚¦çš„æ‰¾æœ€å¤§å€¼</p><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> (kl_divergence &lt; min_kl_divergence) &#123;    min_kl_divergence = kl_divergence;       target_threshold = threshold;   <span class="hljs-comment">// å®é™…ä¸Šæ˜¯num_bins</span>&#125;</code></pre><p><strong>c. è®¡ç®— Threshold å’Œ bins</strong></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°äº†KLæ•£åº¦æœ€å°çš„æ¡¶æ•°num_binsï¼Œå¯ä»¥é€šè¿‡ä¸‹è¿°å…¬å¼å¾—åˆ°Tå’ŒScaleï¼Œå°±ä¸‰è¡Œï¼š</p><pre><code class="hljs cpp">threshold = (<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">float</span>&gt;(threshold_bin) + <span class="hljs-number">0.5f</span>) * histogram_interval;scale = <span class="hljs-number">127</span> / threshold;<span class="hljs-keyword">return</span> scale;</code></pre><p>æœ€åå°±æ˜¯å°†Scaleæ•°æ®å­˜ä¸‹æ¥ï¼Œå¾—åˆ°é‡åŒ–è¡¨äº†ã€‚</p><p><strong>æ€»ç»“ä¸€ä¸‹ä»¥ä¸Šçš„ä»£ç é€»è¾‘:</strong></p><p><img src="/2020/09/21/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-4/4.png" alt></p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnæºç åˆ†æ_3</title>
    <link href="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-3/"/>
    <url>/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-3/</url>
    
    <content type="html"><![CDATA[<p>ncnn æºç åˆ†æ æ¨¡å‹é‡åŒ–åŸç†</p><a id="more"></a><h4 id="1-FP32-vs-int8"><a href="#1-FP32-vs-int8" class="headerlink" title="1. FP32 vs int8"></a>1. FP32 vs int8</h4><p>â€‹     æ¥çœ‹ä¸€ä¸‹ <strong>FP32ã€FP16å’Œint8</strong>ä¹‹é—´çš„åŠ¨æ€èŒƒå›´å’Œç²¾åº¦çš„å¯¹æ¯”ï¼Œ å¯ä»¥çœ‹åˆ°float32 çš„å–å€¼èŒƒå›´å‡ ä¹æ˜¯æ— ç©·çš„ï¼Œ è€Œint8åªæœ‰<strong>-128~127</strong>. å› æ­¤éœ€è¦å»ºç«‹æ˜ å°„å…³ç³»å°†float32ç±»å‹çš„æµ®ç‚¹æ•°æ˜ å°„åˆ°æŒ‡å®šèŒƒå›´çš„int8ç±»å‹ã€‚ </p><p><img src="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-3/ncnn1.png" alt></p><h4 id="2-TensorRT-int8-é‡åŒ–æ–¹æ¡ˆ"><a href="#2-TensorRT-int8-é‡åŒ–æ–¹æ¡ˆ" class="headerlink" title="2. TensorRT int8 é‡åŒ–æ–¹æ¡ˆ"></a>2. TensorRT int8 é‡åŒ–æ–¹æ¡ˆ</h4><p>Nvidia çš„ TensorRTæä¾›äº†ä¸€ç§é‡åŒ–æ–¹æ¡ˆï¼Œä½†æ˜¯å®ƒä»…ä»…æä¾›ç›¸åº”çš„SDKå’Œè§£å†³æ–¹æ¡ˆï¼Œ æ²¡æœ‰å…¬å¸ƒå¯¹åº”çš„æºä»£ç ï¼Œ è¯¸å¤šç¬¬ä¸‰æ–¹å‚å®¶åˆ™æ ¹æ®è¯¥è§£å†³æ–¹æ¡ˆè‡ªå·±é€ è½®å­ï¼Œäº§ç”Ÿäº†å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚è¯¥é‡åŒ–æ–¹æ¡ˆçš„æœ€é‡è¦çš„ä¸¤ä»½å‚è€ƒèµ„æ–™å¦‚ä¸‹æ‰€ç¤º:</p><p>- TensorRT Develop guide: <a href="https://docs.nvidia.com/deeplearning/sdk/tensorrt-developer-guide/index.html#work-with-qat-networks">https://docs.nvidia.com/deeplearning/sdk/tensorrt-developer-guide/index.html#work-with-qat-networks</a></p><p>- PDF é“¾æ¥ï¼š <a href="http://on-demand.gputechconf.com/gtc/2017/presentation/s7310-8-bit-inference-with-tensorrt.pdf">http://on-demand.gputechconf.com/gtc/2017/presentation/s7310-8-bit-inference-with-tensorrt.pdf</a></p><p><strong>(1)</strong> <strong>max-max æ˜ å°„</strong>ï¼š æœ€ç®€å•ç²—æš´çš„æ–¹å¼å¦‚ä¸‹å·¦å›¾æ‰€ç¤º</p><p>â€‹    é¦–å…ˆæ±‚å‡ºä¸€ä¸ªlaye çš„æ¿€æ´»å€¼èŒƒå›´ï¼Œ ç„¶åæŒ‰ç…§ç»å¯¹å€¼çš„æœ€å¤§å€¼ä½œä¸ºé˜ˆå€¼ï¼Œ ç„¶åæŠŠè¿™ä¸ªèŒƒå›´æŒ‰ç…§æ¯”ä¾‹æ˜ å°„åˆ°-127åˆ°128çš„èŒƒå›´å†…, å…¶fp32å’Œint8çš„è½¬æ¢å…¬å¼ä¸º:</p><p><strong>FP32 Tensor (T) = scale_factor(sf) * 8-bit Tensor(t) + FP32_bias (b)</strong> </p><p>é€šè¿‡å®éªŒå¾—çŸ¥ï¼Œbiaså€¼å»æ‰å¯¹ç²¾åº¦çš„å½±å“ä¸æ˜¯å¾ˆå¤§ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥å»æ‰, æ‰€ä»¥è¯¥å…¬å¼å¯ä»¥ç®€åŒ–ä¸º:</p><p><strong>T = sf * t</strong></p><p><img src="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-3/ncnn2.png" alt></p><p><strong>(2) é¥±å’Œæ˜ å°„</strong></p><p>â€‹    å¦‚ä¸Šæ–¹æ³•ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸é¥±å’Œï¼Œå³é€šå¸¸åœ¨æ­£è´Ÿä¸Šä¼šæœ‰ä¸€äº›é‡åŒ–å€¼æœªè¢«åˆ©ç”¨ï¼Œä¸”ä¼šäº§ç”Ÿçš„ç²¾åº¦æŸå¤±è¾ƒå¤§ã€‚</strong>é’ˆå¯¹ max-max æ˜ å°„å­˜åœ¨çš„é—®é¢˜ï¼Œ TensorRTæå‡ºäº†å¦‚ä¸Šå³å›¾çš„é¥±å’Œæ˜ å°„ã€‚ <strong>é€‰å–ä¸€ä¸ªé˜ˆå€¼Tï¼Œç„¶åå°† -|T|~|T| ä¹‹é—´çš„å€¼æ˜ å°„åˆ° -127 åˆ° 128 è¿™ä¸ªèŒƒå›´å†…ã€‚è¿™æ ·ç¡®å®šäº†é˜ˆå€¼Tä¹‹åï¼Œå…¶å®ä¹Ÿèƒ½ç¡®å®šScaleï¼Œä¸€ä¸ªç®€å•çš„çº¿æ€§å…¬å¼æ˜¯: Scale = T/127ã€‚ æ‰€ä»¥è¦è®¡ç®—Scaleï¼Œåªè¦æ‰¾åˆ°åˆé€‚çš„é˜ˆå€¼Tå°±å¯ä»¥äº†ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒTåº”è¯¥å–ä½•å€¼? å…¶åŸºæœ¬æµç¨‹å¦‚ä¸‹:</strong></p><p>â€‹    <strong>(a) é€‰å–ä¸åŒçš„ T é˜ˆå€¼è¿›è¡Œé‡åŒ–, å°† P(fp32) æ˜ å°„åˆ° Q(int8)ã€‚</strong></p><p>â€‹    <strong>(b) å°† Q(int8) åé‡åŒ–åˆ° P(fp32) ä¸€æ ·é•¿åº¦ï¼Œå¾—åˆ°åˆ†å¸ƒ Q_expandï¼›</strong></p><p>â€‹    <strong>(c) è®¡ç®—På’ŒQ_expand çš„ç›¸å¯¹ç†µ(KLæ•£åº¦)ï¼Œç„¶åé€‰æ‹©ç›¸å¯¹ç†µæœ€å°‘çš„ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯è·ŸåŸåˆ†å¸ƒæœ€åƒçš„ä¸€ä¸ª,</strong> <strong>ä»è€Œç¡®å®šScale**</strong>ã€‚**</p><p><strong>(3) KL æ•£åº¦</strong></p><p>â€‹    KLæ•£åº¦å¯ä»¥ç”¨æ¥<strong>æè¿°Pã€Qä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚</strong>ã€‚<strong>æ•£åº¦è¶Šå°ï¼Œä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚è¶Šå°ï¼Œæ¦‚ç‡å¯†åº¦å‡½æ•°å½¢çŠ¶å’Œæ•°å€¼è¶Šæ¥è¿‘</strong>ã€‚è¿™é‡Œçš„æ‰€æœ‰åˆ†å¸ƒã€è®¡ç®—ï¼Œéƒ½æ˜¯ç¦»æ•£å½¢å¼çš„ã€‚åˆ†å¸ƒæ˜¯ä»¥ç»Ÿè®¡ç›´æ–¹å›¾çš„æ–¹å¼å­˜åœ¨ï¼ŒKLæ•£åº¦å…¬å¼ä¹Ÿæ˜¯ç¦»æ•£å…¬å¼ï¼š</p><p><img src="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-3/ncnn5.png" alt></p><p>ä»ä¸Šå¼ä¸­æˆ‘ä»¬è¿˜å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šKLæ•£åº¦è®¡ç®—å…¬å¼è¦æ±‚Pã€Qä¸¤ä¸ªç»Ÿè®¡ç›´æ–¹å›¾é•¿åº¦ä¸€æ ·ï¼ˆä¹Ÿå°±æ˜¯binsçš„æ•°é‡ä¸€æ ·ï¼‰ã€‚Qä¸€ç›´éƒ½æ˜¯-127ï½127ï¼›å¯æ˜¯Pçš„æ•°é‡ä¼šéšç€Tçš„å˜åŒ–è€Œå˜åŒ–ã€‚é‚£è¿™æ€ä¹ˆåšKLæ•£åº¦å‘¢ï¼Ÿ</p><p>ncnn çš„åšæ³•æ˜¯å°† Qæ‰©å±•åˆ°å’ŒPä¸€æ ·çš„é•¿åº¦ï¼Œä¸‹é¢ä¸¾ä¸ªä¾‹å­(NVIDIA PPTä¸­çš„ä¾‹å­)ï¼š</p><pre><code class="hljs cpp">P = [<span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">7</span>]     <span class="hljs-comment">// fp32çš„ç»Ÿè®¡ç›´æ–¹å›¾ï¼ŒT=8</span><span class="hljs-comment">// å‡è®¾åªé‡åŒ–åˆ°ä¸¤ä¸ªbinsï¼Œå³é‡åŒ–åçš„å€¼åªæœ‰-1/0/+1ä¸‰ç§</span>Q=[<span class="hljs-number">1</span>+<span class="hljs-number">0</span>+<span class="hljs-number">2</span>+<span class="hljs-number">3</span>, <span class="hljs-number">5</span>+<span class="hljs-number">3</span>+<span class="hljs-number">1</span>+<span class="hljs-number">7</span>] = [<span class="hljs-number">6</span>, <span class="hljs-number">16</span>]<span class="hljs-comment">// På’ŒQç°åœ¨æ²¡æ³•åšKLæ•£åº¦ï¼Œæ‰€ä»¥è¦å°†Qæ‰©å±•åˆ°å’ŒPä¸€æ ·çš„é•¿åº¦</span>Q_expand = [<span class="hljs-number">6</span>/<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>/<span class="hljs-number">3</span>, <span class="hljs-number">6</span>/<span class="hljs-number">3</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>, <span class="hljs-number">16</span>/<span class="hljs-number">4</span>] = [<span class="hljs-number">2</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span>]  <span class="hljs-comment">// Pä¸­æœ‰0æ—¶ï¼Œä¸ç®—åœ¨å†…</span>D = KL(P||Q_expand)  <span class="hljs-comment">// è¿™æ ·å°±å¯ä»¥åšKLæ•£åº¦è®¡ç®—äº†</span></code></pre><p>â€‹    è¿™ä¸ªæ‰©å±•çš„æ“ä½œï¼Œå°±åƒå›¾åƒçš„ä¸Šé‡‡æ ·ä¸€æ ·ï¼Œå°†ä½ç²¾åº¦çš„ç»Ÿè®¡ç›´æ–¹å›¾(Q)ï¼Œä¸Šé‡‡æ ·çš„é«˜ç²¾åº¦çš„ç»Ÿè®¡ç›´æ–¹å›¾ä¸Šå»(Q_expand)ã€‚ç”±äºQä¸­ä¸€ä¸ªbinå¯¹åº”Pä¸­çš„4ä¸ªbinï¼Œå› æ­¤åœ¨Qä¸Šé‡‡æ ·çš„Q_expandçš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®è¦é™¤ä»¥4ã€‚å¦å¤–ï¼Œåœ¨è®¡ç®—fp32çš„åˆ†å¸ƒPæ—¶ï¼Œè¢«Tæˆªæ–­çš„æ•°æ®ï¼Œæ˜¯è¦ç®—åœ¨æœ€åä¸€ä¸ªbiné‡Œé¢çš„ã€‚</p><h4 id="3-ncnnçš„convé‡åŒ–è®¡ç®—æµç¨‹"><a href="#3-ncnnçš„convé‡åŒ–è®¡ç®—æµç¨‹" class="headerlink" title="3. ncnnçš„convé‡åŒ–è®¡ç®—æµç¨‹"></a>3. ncnnçš„convé‡åŒ–è®¡ç®—æµç¨‹</h4><p>æ­£å¸¸çš„ fp32 è®¡ç®—ä¸­ï¼Œ ä¸€ä¸ªconv çš„è®¡ç®—æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œ æ‰€æœ‰çš„æ•°æ®å‡æ˜¯ fp32ï¼Œ æ²¡ä»€ä¹ˆç‰¹æ®Šçš„</p><p><img src="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-3/ncnn3.png" alt="fp32 convè®¡ç®—æµç¨‹"></p><p>åœ¨ ncnn conv è¿›è¡ŒInt8è®¡ç®—æ—¶ï¼Œ è®¡ç®—æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œncnné¦–å…ˆ<strong>å°†è¾“å…¥(bottom_blob)å’Œæƒé‡é‡åŒ–æˆInt8ï¼Œåœ¨Int8ä¸‹è®¡ç®—å·ç§¯ï¼Œç„¶ååé‡åŒ–åˆ° fp32ï¼Œå†å’Œæœªé‡åŒ–çš„biasç›¸åŠ ï¼Œå¾—åˆ°è¾“å‡º top_blob</strong>(ncnnå¹¶æ²¡æœ‰å¯¹biasåšé‡åŒ–)</p><p><img src="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-3/ncnn4.png" alt="int8 conv è®¡ç®—æµç¨‹ï¼Œ åœ¨convå‰ï¼Œ å¯¹inputå’Œweightåšé‡åŒ–ï¼Œ è®¡ç®—å®Œååé‡åŒ–åˆ° fp32, å†åŠ  bias"></p><p>è¾“å…¥å’Œæƒé‡çš„<strong>é‡åŒ–å…¬å¼</strong>ä¸º:</p><pre><code class="hljs cpp">bottom_blob(int8) = bottom_blob_in8t_scale * bottom(fp32)weight_blob(int8) = weight_data_int8_scale * weight(fp32)</code></pre><p><strong>åé‡åŒ–</strong>çš„ç›®çš„æ˜¯å°†int8æ˜ å°„å›åˆ°åŸæ¥çš„fp32,èŒƒå›´ä¿æŒè¦ä¸€è‡´, ç”±äº weight_blob(int8) å’Œ bottom_blob(int8) ç›¸ä¹˜ï¼Œ æ‰€ä»¥æ­¤å¤„çš„é‡åŒ–åé‡åŒ–çš„ scale åº”è¯¥ä¸º:</p><pre><code class="hljs cpp">dequantize_scale = <span class="hljs-number">1</span>/(bottom_blob_int8_scale * weight_data_int8_scale)innner_blob(fp32) = dequantize_scale * inner_blob</code></pre><p><strong>! å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ æƒé‡æ˜¯åœ¨ç½‘ç»œåˆå§‹åŒ–æ—¶å€™å°±è¿›è¡Œé‡åŒ–äº†ï¼Œ è€Œè¾“å…¥åˆ™æ˜¯åœ¨å‰å‘æ¨å¯¼æ—¶è¿›è¡Œé‡åŒ–ã€‚</strong></p><h4 id="4-ncnn-é‡åŒ–å·¥å…·çš„ä½¿ç”¨"><a href="#4-ncnn-é‡åŒ–å·¥å…·çš„ä½¿ç”¨" class="headerlink" title="4. ncnn é‡åŒ–å·¥å…·çš„ä½¿ç”¨"></a>4. <strong>ncnn é‡åŒ–å·¥å…·çš„ä½¿ç”¨</strong></h4><p>(1) <strong>Optimization graphic å›¾ä¼˜åŒ–: æœ€æ˜æ˜¾çš„å˜åŒ–æ˜¯å°†convå±‚å’Œbnå±‚è¿›è¡Œåˆå¹¶</strong></p><pre><code class="hljs shell">./ncnnoptimize mobilenet-fp32.param mobilenet-fp32.bin mobilenet-nobn-fp32.param mobilenet-nobn-fp32.bin</code></pre><p><strong>(2) Create the calibration table file(å»ºè®®ä½¿ç”¨è¶…è¿‡5000å¼ å›¾ç‰‡çš„éªŒè¯é›†è¿›è¡Œå¯¹é½): è®¡ç®—äº§ç”Ÿå¯¹åº”çš„ scale</strong></p><pre><code class="hljs shell">./ncnn2table --param mobilenet-nobn-fp32.param --bin mobilenet-nobn-fp32.bin --images images/ --output mobilenet-nobn.table --mean 104,117,123 --norm 0.017,0.017,0.017 --size 224,224 --thread 2</code></pre><p><strong>(3) Quantizationï¼šé‡åŒ–</strong></p><pre><code class="hljs shell">./ncnn2int8 mobilenet-nobn-fp32.param mobilenet-nobn-fp32.bin mobilenet-int8.param mobilenet-int8.bin mobilenet-nobn.table</code></pre><h4 id="5-å‚è€ƒèµ„æ–™"><a href="#5-å‚è€ƒèµ„æ–™" class="headerlink" title="5. å‚è€ƒèµ„æ–™"></a>5. å‚è€ƒèµ„æ–™</h4><p>[1] <a href="https://me.csdn.net/sinat_31425585">https://me.csdn.net/sinat_31425585</a></p><p>[2] <a href="https://zhuanlan.zhihu.com/c_1064124187198705664">https://zhuanlan.zhihu.com/c_1064124187198705664</a></p><p>[3] <a href="https://github.com/BUG1989/caffe-int8-convert-tools">https://github.com/BUG1989/caffe-int8-convert-tools</a></p><p>[4] <a href="https://github.com/Tencent/ncnn/wiki/quantized-int8-inference">Tencent/ncnn</a></p><p>[5] QNNPACK</p><p>[6] Nvidia solutionï¼š Szymon Migacz. 8-bit Inference with TensorRT</p><p>[7] Google solutionï¼šQuantizing deep convolutional networks for efficient inference: A whitepaper</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnæºç åˆ†æ_2</title>
    <link href="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-2/"/>
    <url>/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-2/</url>
    
    <content type="html"><![CDATA[<p>ncnn æºç åˆ†æï¼ˆäºŒï¼‰ Extractor</p><a id="more"></a><p>å‰é¢å¤§è‡´æ€»ç»“äº†ä¸€ä¸‹ncnnæ¨¡å‹è½½å…¥çš„æµç¨‹ï¼Œæ¨¡å‹è½½å…¥ä¹‹åï¼Œå°±æ˜¯æ–°å»ºä¸€ä¸ª<strong>Extractor</strong>ï¼Œç„¶åè®¾ç½®è¾“å…¥ï¼Œè·å–è¾“å‡ºï¼š</p><pre><code class="hljs cpp">ncnn::Extractor ex = net.create_extractor();ex.set_num_threads(<span class="hljs-number">4</span>); ex.input(<span class="hljs-string">&quot;data&quot;</span>, in); ncnn::Mat out;ex.extract(<span class="hljs-string">&quot;detection_out&quot;</span>, out);</code></pre><p>ç°åœ¨å¯ä»¥çœ‹ä¸€ä¸‹Extractorçš„å®šä¹‰äº†ï¼š</p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Extractor</span></span><span class="hljs-class">&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-comment">// enable light mode, intermediate blob will be recycled when enabled</span>    <span class="hljs-comment">// enabled by default</span>    <span class="hljs-comment">// è®¾ç½®lightæ¨¡å¼ï¼Œå¯ç”¨æ—¶ä¸­é—´ blob å°†ä¼šå¾ªç¯åˆ©ç”¨</span>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_light_mode</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> enable)</span></span>;     <span class="hljs-comment">// set thread count for this extractor, è®¾ç½®çº¿ç¨‹æ•°</span>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_num_threads</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num_threads)</span></span>;     <span class="hljs-comment">// set blob memory allocator, è®¾ç½®blobçš„å†…å­˜åˆ†é…å™¨</span>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_blob_allocator</span><span class="hljs-params">(Allocator* allocator)</span></span>;     <span class="hljs-comment">// set workspace memory allocator, è®¾ç½®å·¥ä½œç©ºé—´çš„å†…å­˜åˆ†é…å™¨</span>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_workspace_allocator</span><span class="hljs-params">(Allocator* allocator)</span></span>;  <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>    <span class="hljs-comment">// set input by blob name</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// è®¾ç½®ç½‘ç»œè¾“å…¥ï¼šå­—ç¬¦ä¸²layerå</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* blob_name, <span class="hljs-keyword">const</span> Mat&amp; in)</span></span>;     <span class="hljs-comment">// get result by blob name</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// è®¾ç½®æå–å™¨çš„è¾“å…¥ï¼šå¾—åˆ°å¯¹åº”è¾“å‡º</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">extract</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* blob_name, Mat&amp; feat)</span></span>;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STRING</span></span>     <span class="hljs-comment">// set input by blob index</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// è®¾ç½®intç±»å‹blobç´¢å¼•åŠè¾“å…¥</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> blob_index, <span class="hljs-keyword">const</span> Mat&amp; in)</span></span>;     <span class="hljs-comment">// get result by blob index</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// è®¾ç½®intç±»å‹blobç´¢å¼•åŠè¾“å‡º</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">extract</span><span class="hljs-params">(<span class="hljs-keyword">int</span> blob_index, Mat&amp; feat)</span></span>; <span class="hljs-keyword">protected</span>:    <span class="hljs-comment">// å¯¹å¤–æä¾›create_extractoræ¥å£</span>    <span class="hljs-function"><span class="hljs-keyword">friend</span> Extractor <span class="hljs-title">Net::create_extractor</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;    Extractor(<span class="hljs-keyword">const</span> Net* net, <span class="hljs-keyword">int</span> blob_count); <span class="hljs-keyword">private</span>:    <span class="hljs-comment">// ç½‘ç»œ </span>    <span class="hljs-keyword">const</span> Net* net;    <span class="hljs-comment">// blobçš„ mat</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Mat&gt; blob_mats;    <span class="hljs-comment">// é€‰é¡¹</span>    Option opt; &#125;;</code></pre><p>é™¤äº†è®¾ç½®optionçš„æ¥å£ä¹‹å¤–ï¼Œå°±åªå‰©ä¸‹æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„å‡ ä¸ªæ¥å£å‡½æ•°äº†ï¼š</p><p><strong>(1) Extractor</strong></p><pre><code class="hljs cpp"><span class="hljs-comment">// åˆ›å»ºExtractor</span><span class="hljs-function">Extractor <span class="hljs-title">Net::create_extractor</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> Extractor(<span class="hljs-keyword">this</span>, blobs.size());&#125;</code></pre><p>å†…éƒ¨è°ƒç”¨äº†æ¥å£ä¸ºï¼Œå°±æ˜¯å°†blob_matæ•°ç»„resizeåˆ°ç½‘ç»œçš„blobæ•°ç›®å¤§å°ï¼Œç„¶åè®¾ç½®äº†ä¸€ä¸‹é€‰é¡¹ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// æ‰§è¡Œå™¨</span>Extractor::Extractor(<span class="hljs-keyword">const</span> Net* _net, <span class="hljs-keyword">int</span> blob_count) : net(_net)&#123;    blob_mats.resize(blob_count);    opt = net-&gt;opt;&#125;</code></pre><p><strong>(2) inputæ¥å£ï¼š</strong></p><pre><code class="hljs cpp"><span class="hljs-comment">// è®¾ç½®è¾“å…¥</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Extractor::input</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* blob_name, <span class="hljs-keyword">const</span> Mat&amp; in)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// è·å–è¾“å…¥æ¨¡å—å¯¹åº”index</span>    <span class="hljs-keyword">int</span> blob_index = net-&gt;find_blob_index_by_name(blob_name);    <span class="hljs-keyword">if</span> (blob_index == <span class="hljs-number">-1</span>)        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;     <span class="hljs-comment">// è°ƒç”¨ç›´æ¥ç”¨indexçš„è®¾ç½®inputæ–¹æ³•</span>    <span class="hljs-keyword">return</span> input(blob_index, in);&#125;</code></pre><p>å†…éƒ¨è°ƒç”¨çš„æ¥å£ä¸ºï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// è¾“å…¥ä¸ºindexçš„è¾“å…¥æ¥å£</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Extractor::input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> blob_index, <span class="hljs-keyword">const</span> Mat&amp; in)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">if</span> (blob_index &lt; <span class="hljs-number">0</span> || blob_index &gt;= (<span class="hljs-keyword">int</span>)blob_mats.size())        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;     <span class="hljs-comment">// è®¾ç½®blob_indexå¯¹åº” Mat</span>    blob_mats[blob_index] = in;     <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p><strong>(3) extractæ¥å£ï¼š</strong></p><pre><code class="hljs cpp"><span class="hljs-comment">// å°†è¾“å…¥stringç±»å‹nameè½¬æ¢æˆå¯¹åº”çš„ç´¢å¼•</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Extractor::extract</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* blob_name, VkMat&amp; feat, VkCompute&amp; cmd)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">int</span> blob_index = net-&gt;find_blob_index_by_name(blob_name);    <span class="hljs-keyword">if</span> (blob_index == <span class="hljs-number">-1</span>)        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;     <span class="hljs-keyword">return</span> extract(blob_index, feat, cmd);&#125;</code></pre><p>è¿™é‡Œè°ƒç”¨çš„æ¥å£ä¸ºï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// æå–ç‰¹å¾</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Extractor::extract</span><span class="hljs-params">(<span class="hljs-keyword">int</span> blob_index, Mat&amp; feat)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">if</span> (blob_index &lt; <span class="hljs-number">0</span> || blob_index &gt;= (<span class="hljs-keyword">int</span>)blob_mats.size())        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;     <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;        <span class="hljs-keyword">if</span> (blob_mats[blob_index].dims == <span class="hljs-number">0</span>)     <span class="hljs-comment">// å¦‚æœè¾“å‡ºblobä¸ºç©º</span>    &#123;        <span class="hljs-keyword">int</span> layer_index = net-&gt;blobs[blob_index].producer;  <span class="hljs-comment">// æŸ¥æ‰¾è¾“å‡ºblobå¯¹åº”çš„ç”Ÿäº§è€…</span>        ret = net-&gt;forward_layer(layer_index, blob_mats, opt);   <span class="hljs-comment">// å‰å‘æ¨ç†</span>    &#125;    feat = blob_mats[blob_index];   <span class="hljs-comment">// è¾“å‡ºç‰¹å¾</span>     <span class="hljs-keyword">if</span> (opt.use_packing_layout)   <span class="hljs-comment">// å¯¹ç‰¹å¾è¿›è¡Œunpack</span>    &#123;        Mat bottom_blob_unpacked;        convert_packing(feat, bottom_blob_unpacked, <span class="hljs-number">1</span>, opt);        feat = bottom_blob_unpacked;    &#125;     <span class="hljs-keyword">return</span> ret;&#125;</code></pre><p>â€‹    è¿™é‡Œå°±æ˜¯è°ƒç”¨å„å±‚å‰å‘æ¨ç†forward_layeræ–¹æ³•æ¥è¿›è¡Œæ¨ç†çš„ï¼Œè¿™ä¸ªå¯¹åº”äºç‰¹å®šå±‚çš„æ¨ç†è¿‡ç¨‹ï¼Œåé¢æ€»ç»“å„ä¸ªå±‚çš„æ—¶å€™å†è¯´ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnæºç åˆ†æ_1</title>
    <link href="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-1/"/>
    <url>/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-1/</url>
    
    <content type="html"><![CDATA[<p>ncnn æºç åˆ†æ â€” å‚æ•°ä¸æ¨¡å‹è½½å…¥</p><a id="more"></a><h4 id="1-å®ä¾‹ä»£ç "><a href="#1-å®ä¾‹ä»£ç " class="headerlink" title="1. å®ä¾‹ä»£ç "></a>1. å®ä¾‹ä»£ç </h4><p>ä½¿ç”¨ncnnè¿›è¡Œå‰å‘è®¡ç®—çš„æ­¥éª¤å¾ˆç®€å•ï¼Œå°±å¦‚ä¸‹å‡ è¡Œä»£ç å³å¯å®Œæˆã€‚</p><pre><code class="hljs cpp"> <span class="hljs-comment">// ä»£ç æ¥è‡ª ncnn/examples/shufflenetv2.cpp</span> <span class="hljs-comment">/* Step 1.1 : åŠ è½½.parma æ–‡ä»¶ å’Œ .bin æ–‡ä»¶ */</span> ncnn::Net shufflenetv2; shufflenetv2.load_param(<span class="hljs-string">&quot;shufflenet_v2_x0.5.param&quot;</span>); shufflenetv2.load_model(<span class="hljs-string">&quot;shufflenet_v2_x0.5.bin&quot;</span>); <span class="hljs-comment">/* Step 1.2 : æ„å»ºå¹¶é…ç½® æå–å™¨ */</span> ncnn::Extractor ex = shufflenetv2.create_extractor(); <span class="hljs-comment">/* Step 1.3 : è®¾ç½®è¾“å…¥ï¼ˆå°†å›¾ç‰‡è½¬æ¢æˆncnn::Matç»“æ„ä½œä¸ºè¾“å…¥ï¼‰ */</span>    ncnn::Mat in = ncnn::Mat::from_pixels_resize(bgr.data, ncnn::Mat::PIXEL_BGR, bgr.cols, bgr.rows, <span class="hljs-number">224</span>, <span class="hljs-number">224</span>);<span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> norm_vals[<span class="hljs-number">3</span>] = &#123;<span class="hljs-number">1</span>/<span class="hljs-number">255.f</span>, <span class="hljs-number">1</span>/<span class="hljs-number">255.f</span>, <span class="hljs-number">1</span>/<span class="hljs-number">255.f</span>&#125;;in.substract_mean_normalize(<span class="hljs-number">0</span>, norm_vals);ex.input(<span class="hljs-string">&quot;data&quot;</span>, in);        <span class="hljs-comment">/* Step 1.4 : æå–è¾“å‡º */</span> ncnn::Mat out;ex.extract(<span class="hljs-string">&quot;fc&quot;</span>, out);</code></pre><h4 id="2-ä»£ç åˆ†æ"><a href="#2-ä»£ç åˆ†æ" class="headerlink" title="2. ä»£ç åˆ†æ"></a>2. ä»£ç åˆ†æ</h4><p><strong>æˆ‘å§‘ä¸”å°†å…¶åˆ†ä¸ºï¼šåŠ è½½æ¨¡å‹</strong>ã€<strong>æ„å»ºå¹¶é…ç½®æå–å™¨</strong>ã€<strong>è®¾ç½®è¾“å…¥</strong>ã€<strong>è¾“å‡ºå¤„ç†</strong>ã€<strong>æ¨¡å‹å°è£…</strong>äº”ä¸ªéƒ¨åˆ†æ¥åŠ ä»¥åˆ†æ</p><p><strong>æ¨¡å‹è½½å…¥</strong>:</p><p><strong>ç›¸å…³ä»£ç :</strong></p><p><strong>net.h/cpp</strong>   <strong>blob.h/cpp</strong>   <strong>layer.h/.cpp</strong>  </p><p>â€‹    <strong>paramdict.cpp/h</strong>  </p><p>â€‹    <strong>modelbin.h/.cpp</strong></p><p><strong>ç›¸å…³æ–‡ä»¶:</strong></p><p>xx.bin  xx.param</p><h4 id="3-åŠ è½½æ¨¡å‹"><a href="#3-åŠ è½½æ¨¡å‹" class="headerlink" title="3. åŠ è½½æ¨¡å‹"></a>3. åŠ è½½æ¨¡å‹</h4><p>ncnn åœ¨ä½¿ç”¨ <strong>.param</strong> å’Œ <strong>.bin</strong> ä¸¤ä¸ªæ–‡ä»¶æ¥æè¿°ä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹ã€‚ æ¨¡å‹åŠ è½½çš„æ ¹æœ¬ç›®çš„æ˜¯å°† .param å’Œ .bin æ–‡ä»¶çš„ä¿¡æ¯åŠ è½½åˆ°ç›®æ ‡ç¥ç»ç½‘ç»œï¼ˆä¸€ä¸ªncnn::Netç»“æ„ï¼‰ä¸­</p><p>å…¶ä¸­ï¼š</p><p><strong>.param</strong>ï¼šæè¿°ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼ŒåŒ…æ‹¬å±‚åç§°ï¼Œå±‚è¾“å…¥è¾“å‡ºä¿¡æ¯ï¼Œå±‚å‚æ•°ä¿¡æ¯ï¼ˆå¦‚å·ç§¯å±‚çš„kernalå¤§å°ç­‰ï¼‰ç­‰ã€‚</p><p><strong>.bin</strong> æ–‡ä»¶åˆ™è®°å½•ç¥ç»ç½‘ç»œè¿ç®—æ‰€éœ€è¦çš„æ•°æ®ä¿¡æ¯ï¼ˆæ¯”å¦‚å·ç§¯å±‚çš„æƒé‡ã€åç½®ä¿¡æ¯ç­‰ï¼‰</p><p><img src="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-1/ncnn1.png" alt="ncnnå®˜æ–¹demoä¸­çš„æ¨¡å‹æ–‡ä»¶"></p><h6 id="3-1-param-æ–‡ä»¶"><a href="#3-1-param-æ–‡ä»¶" class="headerlink" title="3.1 param æ–‡ä»¶"></a>3.1 param æ–‡ä»¶</h6><p><strong>ä¸€ä¸ª.paramæ–‡ä»¶ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š</strong></p><p><img src="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-1/ncnn2.png" alt></p><p><strong>1ï¼‰MagicNum</strong></p><p>å›ºå®šä½7767517ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ•°æ¥åˆ¤å®šç‰ˆæœ¬ -&gt; ä¸ºä»€ä¹ˆè¿™ä¸ªæ•°å­—ï¼Œä¸çŸ¥é“é—®å€ªç¥å»å§ </p><p>2ï¼‰<strong>layerã€blobä¸ªæ•°</strong></p><p>ä¸Šå›¾ç¤ºä¾‹çš„æ–‡ä»¶ä¸¤ä¸ªæ•°å­—åˆ†åˆ«ä¸ºï¼š75ã€83</p><p>â€‹    <strong>layerï¼šæˆ‘ä»¬çŸ¥é“ç¥ç»ç½‘ç»œæ˜¯ä¸€å±‚ä¸€å±‚å‘å‰æ¨è¿›è®¡ç®—çš„ï¼Œæ¯ä¸€å±‚æˆ‘ä»¬ç”¨ä¸€ä¸ªlayerè¡¨ç¤ºï¼›</strong></p><p>â€‹    <strong>blobï¼šæ¯ä¸€ä¸ªlayeréƒ½å¯èƒ½ä¼šæœ‰è¾“å…¥ã€è¾“å‡ºï¼Œåœ¨ncnnä¸­ï¼Œå®ƒä»¬ç»Ÿä¸€ç”¨ä¸€ä¸ªå¤šç»´ï¼ˆ3ç»´ï¼‰å‘é‡è¡¨ç¤ºï¼Œæˆ‘ä»¬ç§°æ¯ä¸€ä¸ªè¾“å…¥ã€è¾“å‡ºçš„åŸå­ä¸ºä¸€ä¸ªblobï¼Œå¹¶ä¸ºå®ƒèµ·å</strong></p><p>2.1.1.2 layerçš„æè¿°</p><p>layer åœ¨ .param ä¸­æ˜¯ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„å…ƒç´ ï¼ˆä»ç¬¬3è¡Œèµ·çš„æ¯ä¸€è¡Œæè¿°ä¸€ä¸ªlayerï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒå•ç‹¬æŠ½å‡ºæ¥è¿›è¡Œè¯´æ˜ã€‚</p><p><strong>1ï¼‰å±‚ç±»å‹</strong>     æ¯”å¦‚<strong>Inputã€Convolutionã€ReLU</strong></p><p><strong>2ï¼‰å±‚å</strong>       æ¨¡å‹è®­ç»ƒè€…ä¸ºè¯¥å±‚èµ·å¾—åå­—ï¼ˆæ¯•ç«Ÿç›¸åŒç±»å‹çš„å±‚å¯èƒ½å¤šæ¬¡ä½¿ç”¨ï¼Œæˆ‘ä»¬è¦åŒºåˆ†å®ƒä»¬ï¼‰</p><p><strong>3ï¼‰å±‚è¾“å…¥è¾“å‡º  åŒ…å«ï¼šå±‚è¾“å…¥blobæ•°é‡ï¼Œå±‚è¾“å‡ºblobæ•°é‡ï¼Œå±‚è¾“å…¥ã€è¾“å‡ºblobçš„åç§°</strong></p><p><strong>4ï¼‰å±‚é…ç½®å‚æ•°</strong></p><p>æ¯”å¦‚ <strong>å·ç§¯å±‚ï¼ˆConvolution Layerï¼‰çš„ å·ç§¯æ ¸å¤§å°ã€æ­¥é•¿ä¿¡æ¯</strong> ç­‰</p><p>åœ¨ å…·ä½“å±‚é‡Œé¢éƒ½æœ‰ä¸€ä¸ªå‡½æ•°: load_param, ä»é‡Œé¢å¯ä»¥æŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯ã€‚</p><p><strong>dataå±‚ï¼š 0=é•¿ 1=å®½ 3=é€šé“</strong></p><p><strong>Convolutionå±‚ 0=è¾“å‡ºå•å…ƒ 1=å·ç§¯æ ¸å¤§å°  2=æ ¸è†¨èƒ€[è§è†¨èƒ€å·ç§¯]    3=stride</strong>    </p><p>â€‹                                 <strong>4=padding    5=æ˜¯å¦å­˜åœ¨åç½®    6=æƒé‡æ•°é‡</strong></p><p><strong>pooling å±‚    0=æ± åŒ–ç±»å‹   1=å·ç§¯æ ¸å¤§å°   2=æ­¥é•¿stride   3=padding   4=å…¨å±€æ± åŒ–  5=paddingç±»å‹</strong></p><p><strong>ReLU å±‚ 0=0.000000 æ— å‚æ•°</strong></p><p><strong>softmax å±‚ 0=0 æ— å‚æ•°</strong></p><p><strong>Concat Split Dropout æ— å‚æ•°</strong></p><p><strong>ConvolutionDepthWise    7=group æ•°ç›®</strong></p><h6 id="3-2-è¯»å–"><a href="#3-2-è¯»å–" class="headerlink" title="3.2 è¯»å–"></a>3.2 è¯»å–</h6><p><strong>ä¸‹é¢æˆ‘ä»¬å…·ä½“ä»ä»£ç çš„è§’åº¦æ¥çœ‹çœ‹å¦‚ä½•è¯»å–è¿™ä¸ªæ–‡ä»¶çš„:(æ–‡ä»¶ä¸º net.cpp/h å’Œ paramdict.cpp/h) ä¸ºäº†æ–¹ä¾¿ï¼Œ æˆ‘ä»¬å°† Vulkan ç›¸å…³ä»£ç å‰”é™¤æ‰ã€‚</strong></p><p><strong>net.h ä¸»è¦æ˜¯ Net ç±»çš„æ¥å£ï¼Œ å…¶ä¸­æœ€é‡è¦çš„åŠŸèƒ½æ˜¯å®ç° load_param(è½½å…¥æ¨¡å‹å‚æ•°) å’Œ load_model(è½½å…¥æ¨¡å‹çš„æ•°æ®) åŠŸèƒ½</strong></p><pre><code class="hljs cpp"><span class="hljs-comment">// net.h</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Net</span></span><span class="hljs-class">&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-comment">// empty init</span>    Net();    <span class="hljs-comment">// clear and destroy</span>    ~Net();<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>    <span class="hljs-comment">// register custom layer by layer type name</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰ç±»å‹å±‚ï¼Œ é€šè¿‡stringç±»å‹å</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">register_custom_layer</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* type, layer_creator_func creator)</span></span>;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STRING</span></span>    <span class="hljs-comment">// register custom layer by layer type</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰å±‚ï¼Œ é€šè¿‡intç±»å‹çš„ layer ç´¢å¼•</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">register_custom_layer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, layer_creator_func creator)</span></span>;<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STDIO</span><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>    <span class="hljs-comment">// load network structure from plain param file</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// ä»æ–‡ä»¶æŒ‡é’ˆä¸­è½½å…¥å‚æ•°</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_param</span><span class="hljs-params">(FILE* fp)</span></span>;    <span class="hljs-comment">// ä» param æ–‡ä»¶ä¸­è½½å…¥å‚æ•°</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* protopath)</span></span>;    <span class="hljs-comment">// ä» mem ä¸­è½½å…¥å‚æ•°</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_param_mem</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* mem)</span></span>;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STRING</span></span>    <span class="hljs-comment">// load network structure from binary param file</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// ä»äºŒè¿›åˆ¶æ–‡ä»¶æŒ‡é’ˆä¸­è½½å…¥ param å‚æ•°</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_param_bin</span><span class="hljs-params">(FILE* fp)</span></span>;    <span class="hljs-comment">// ä»äºŒè¿›åˆ¶æ–‡ä»¶ä¸­è½½å…¥å‚æ•°</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_param_bin</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* protopath)</span></span>;    <span class="hljs-comment">// load network weight data from model file</span>    <span class="hljs-comment">// return 0 if success</span>    <span class="hljs-comment">// ä» file æŒ‡é’ˆä¸­ä¼ å…¥æ¨¡å‹</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_model</span><span class="hljs-params">(FILE* fp)</span></span>;    <span class="hljs-comment">// ä»äºŒè¿›åˆ¶æ–‡ä»¶ä¸­è½½å…¥æ¨¡å‹</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* modelpath)</span></span>;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STDIO</span></span>    <span class="hljs-comment">// load network structure from external memory</span>    <span class="hljs-comment">// memory pointer must be 32-bit aligned</span>    <span class="hljs-comment">// return bytes consumed</span>    <span class="hljs-comment">// ä»å¤–éƒ¨å†…å­˜ä¸­è½½å…¥å‚æ•°</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span>* mem)</span></span>;    <span class="hljs-comment">// reference network weight data from external memory</span>    <span class="hljs-comment">// weight data is not copied but referenced</span>    <span class="hljs-comment">// so external memory should be retained when used</span>    <span class="hljs-comment">// memory pointer must be 32-bit aligned</span>    <span class="hljs-comment">// return bytes consumed</span>    <span class="hljs-comment">// ä»å¤–éƒ¨å†…å­˜ä¸­è½½å…¥ç½‘ç»œæƒé‡</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span>* mem)</span></span>;    <span class="hljs-comment">// unload network structure and weight data</span>    <span class="hljs-comment">// æ¸…ç©ºç½‘ç»œç»“æ„</span>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>;    <span class="hljs-comment">// construct an Extractor from network</span>    <span class="hljs-comment">// ä»ç½‘ç»œæ„å»ºä¸€ä¸ªæ‰§è¡Œå™¨</span>    <span class="hljs-function">Extractor <span class="hljs-title">create_extractor</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;<span class="hljs-keyword">protected</span>:    <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Extractor</span>;</span> <span class="hljs-comment">// å¤–éƒ¨ Extractor æ¥å£</span><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRIN</span>    <span class="hljs-comment">// é€šè¿‡nameæŸ¥æ‰¾blobå¯¹åº”çš„ç´¢å¼•</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">find_blob_index_by_name</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name)</span> <span class="hljs-keyword">const</span></span>;     <span class="hljs-comment">// é€šè¿‡nameæŸ¥æ‰¾å¯¹åº”çš„ layer ç´¢å¼•</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">find_layer_index_by_name</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name)</span> <span class="hljs-keyword">const</span></span>;    <span class="hljs-comment">// é€šè¿‡ç±»å‹æŸ¥æ‰¾å¯¹åº”çš„ layerç´¢å¼•</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">custom_layer_to_index</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* type)</span></span>;    <span class="hljs-comment">// é€šè¿‡ç±»å‹åˆ›å»ºlayer</span>    <span class="hljs-function">Layer* <span class="hljs-title">create_custom_layer</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* type)</span></span>;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STRING</span></span>    <span class="hljs-comment">// é€šè¿‡ index ç©¿ä»¶ layer</span>    <span class="hljs-function">Layer* <span class="hljs-title">create_custom_layer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span></span>;    <span class="hljs-comment">// å‰å‘æ¨ç†å±‚</span>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">forward_layer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> layer_index, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Mat&gt;&amp; blob_mats, Option&amp; opt)</span> <span class="hljs-keyword">const</span></span>;<span class="hljs-keyword">protected</span>:    <span class="hljs-comment">// blobs &amp; layers</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Blob&gt; blobs;    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Layer*&gt; layers;    <span class="hljs-comment">// layers</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;layer_registry_entry&gt; custom_layer_registry;&#125;;</code></pre><p>åœ¨æ­¤æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹ blobç±» ! ç€é‡çœ‹ä¸€ä¸‹ï¼Œå¯¹åº”çš„ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…æ¨¡å‹</p><pre><code class="hljs cpp"><span class="hljs-comment">// Blob ç”¨äºè®°å½•æ•°æ®ä¼ è¾“è¿‡ç¨‹ï¼Œ producer è®°å½•å½“å‰blobä»é‚£ä¸€å±‚äº§ç”Ÿçš„ï¼Œ</span><span class="hljs-comment">// consumer è®°å½•å½“å‰blobè¢«å“ªäº›å±‚è°ƒç”¨:</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Blob</span></span><span class="hljs-class">&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-comment">// empty</span>    Blob();<span class="hljs-keyword">public</span>:<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>    <span class="hljs-comment">// blob name</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> name;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STRING</span></span>    <span class="hljs-comment">// layer index which produce this blob as output</span>    <span class="hljs-comment">// ç”Ÿäº§è€…</span>    <span class="hljs-keyword">int</span> producer;    <span class="hljs-comment">// layer index which need this blob as input</span>    <span class="hljs-comment">// æ¶ˆè´¹è€…</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; consumers;&#125;;</code></pre><p>ç„¶åæˆ‘ä»¬æ‰“å¼€ net.cpp æ–‡ä»¶ï¼Œæ¥çœ‹ä¸€ä¸‹ load_param çš„å…·ä½“å®ç°:</p><pre><code class="hljs cpp"><span class="hljs-comment">// ä»æ–‡ä»¶ä¸­è½½å…¥ net å‚æ•°</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Net::load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* protopath)</span></span><span class="hljs-function"></span>&#123;    FILE* fp = fopen(protopath, <span class="hljs-string">&quot;rb&quot;</span>);    <span class="hljs-keyword">if</span> (!fp)    &#123;        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;fopen %s failed\n&quot;</span>, protopath);        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    <span class="hljs-comment">// ä»æ–‡ä»¶æŒ‡é’ˆä¸­è½½å…¥ param</span>    <span class="hljs-keyword">int</span> ret = load_param(fp);    fclose(fp);    <span class="hljs-keyword">return</span> ret;&#125;</code></pre><p>å‚æ•°è½½å…¥æ¥å£ä¸­ï¼Œ è°ƒç”¨äº†å¦å¤–ä¸€ä¸ªå‚æ•°è½½å…¥æ¥å£: load_param(FILE * fp)</p><p>(1) è¯»å– magic number, é€šè¿‡åˆ¤æ–­ magic number æ˜¯å¦ç­‰äº 7767517, å°±å¯ä»¥åˆ¤æ–­å½“å‰paramæ–‡ä»¶æ˜¯å¦æ˜¯æœ€æ–°çš„ param æ–‡ä»¶ </p><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> magic = <span class="hljs-number">0</span>;<span class="hljs-comment">// è¯»å– magic number</span><span class="hljs-keyword">int</span> nbr = <span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;%d&quot;</span>, &amp;magic);<span class="hljs-comment">// è¯»å–å¤±è´¥</span><span class="hljs-keyword">if</span> (nbr != <span class="hljs-number">1</span>)&#123;    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;issue with param file\n&quot;</span>);    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;<span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æœ€æ–°çš„ magic number</span><span class="hljs-keyword">if</span> (magic != <span class="hljs-number">7767517</span>)&#123;    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;param is too old, please regenerate\n&quot;</span>);    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;</code></pre><p>(2) è§£æå‡ºç½‘ç»œçš„ layer å±‚æ•°å’Œ blob æ•°ç›® </p><pre><code class="hljs cpp"><span class="hljs-comment">// å¯¹ layer å’Œ blob è¿›è¡Œè§£æ</span><span class="hljs-keyword">int</span> layer_count = <span class="hljs-number">0</span>;<span class="hljs-keyword">int</span> blob_count = <span class="hljs-number">0</span>;<span class="hljs-comment">// å±‚æ•° &amp;&amp; blob æ•°ç›®</span>nbr = <span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;%d %d&quot;</span>, &amp;layer_count, &amp;blob_count);<span class="hljs-comment">// å±‚æ•°å’Œ blobæ•°è¯»å–å¤±è´¥</span><span class="hljs-keyword">if</span> (nbr != <span class="hljs-number">2</span> || layer_count &lt;= <span class="hljs-number">0</span> || blob_count &lt;= <span class="hljs-number">0</span>)&#123;    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;issue with param file\n&quot;</span>);    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;<span class="hljs-comment">// resize ç½‘ç»œçš„å±‚æ•°å’Œblobæ•°ç›®</span>layers.resize((<span class="hljs-keyword">size_t</span>)layer_count);blobs.resize((<span class="hljs-keyword">size_t</span>)blob_count);</code></pre><p>(3) éå†æ‰€æœ‰çš„ layer, è§£ææ¯å±‚ layer å±‚çš„ç±»å‹(layer type)ã€åç§°(layer name)ã€è¾“å…¥æ•°ç›®(bottom_count) å’Œ è¾“å‡ºæ•°ç›®(top_count)</p><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;layer_count; i++)&#123;    <span class="hljs-keyword">int</span> nscan = <span class="hljs-number">0</span>;    <span class="hljs-comment">// layer çš„ç±»å‹å’Œåç§°</span>    <span class="hljs-keyword">char</span> layer_type[<span class="hljs-number">257</span>];    <span class="hljs-keyword">char</span> layer_name[<span class="hljs-number">257</span>];    <span class="hljs-keyword">int</span> bottom_count = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> top_count = <span class="hljs-number">0</span>;    <span class="hljs-comment">// è¯»å–å±‚ç±»å‹ã€åç§°ã€‚è¾“å…¥bottomæ•°ç›®å’Œè¾“å‡ºtopæ•°ç›®</span>    nscan = <span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;%256s %256s %d %d&quot;</span>, layer_type, layer_name, &amp;bottom_count, &amp;top_count);    <span class="hljs-keyword">if</span> (nscan != <span class="hljs-number">4</span>) <span class="hljs-comment">// è§£æå¤±è´¥</span>    &#123;        <span class="hljs-keyword">continue</span>;    &#125;</code></pre><p>(4) æ ¹æ®layerçš„ç±»å‹ï¼Œ åˆ›å»º layer</p><pre><code class="hljs cpp"><span class="hljs-comment">// åˆ›å»º layer</span>Layer* layer = create_layer(layer_type);<span class="hljs-comment">// layer_type ä¸æ˜¯é»˜è®¤ç±»å‹</span><span class="hljs-keyword">if</span> (!layer)&#123;    <span class="hljs-comment">// ä»è‡ªå®šä¹‰ layer è¯»å–</span>    layer = create_custom_layer(layer_type);&#125;<span class="hljs-keyword">if</span> (!layer) <span class="hljs-comment">// å¦‚æœè‡ªå®šä¹‰ layer ä¸­ä¸å­˜åœ¨å½“å‰ç±»å‹çš„ layer </span>&#123;    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;layer %s not exists or registered\n&quot;</span>, layer_type);    clear();    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;<span class="hljs-comment">// è®¾ç½® layer å‚æ•°: layerçš„ç±»å‹ã€åç§°ã€è¾“å…¥å’Œè¾“å‡º      </span>layer-&gt;type = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>(layer_type);layer-&gt;name = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>(layer_name);</code></pre><p>(5) åœ¨è®¾ç½®è¾“å…¥æ—¶ï¼Œå¦‚æœå½“å‰blobåä¸å­˜åœ¨ï¼Œå°±å°†å½“å‰blobåæ·»åŠ åˆ°netçš„blobsæ•°ç»„é‡Œé¢</p><pre><code class="hljs cpp">layer-&gt;bottoms.resize(bottom_count); <span class="hljs-comment">// layerçš„è¾“å…¥</span><span class="hljs-comment">// è§£æ layer çš„è¾“å…¥</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;bottom_count; j++)&#123;    <span class="hljs-keyword">char</span> bottom_name[<span class="hljs-number">257</span>];    <span class="hljs-comment">// è§£æ bottomçš„name</span>    nscan = <span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;%256s&quot;</span>, bottom_name);    <span class="hljs-keyword">if</span> (nscan != <span class="hljs-number">1</span>)    &#123;        <span class="hljs-keyword">continue</span>;    &#125;    <span class="hljs-comment">// æŒ‰ç…§ bottom çš„name æŸ¥æ‰¾å¯¹åº” blob çš„index</span>    <span class="hljs-keyword">int</span> bottom_blob_index = find_blob_index_by_name(bottom_name);    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ° bottom_name å¯¹åº”çš„ blob</span>    <span class="hljs-comment">// å°†å‘ blobs æ•°ç»„ä¸­æ’å…¥ä¸€ä¸ªåä¸º bottom_name çš„ blob</span>    <span class="hljs-keyword">if</span> (bottom_blob_index == <span class="hljs-number">-1</span>)    &#123;        <span class="hljs-comment">// è®¾ç½®ç¬¬blob_indexä¸ªblob çš„å‚æ•°</span>        Blob&amp; blob = blobs[blob_index];        <span class="hljs-comment">// blobçš„ç´¢å¼•</span>        bottom_blob_index = blob_index;        <span class="hljs-comment">// è®¾ç½®blobçš„name</span>        blob.name = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>(bottom_name);        <span class="hljs-comment">// æ›´æ–°å…¨å±€çš„ blob ç´¢å¼•</span>        blob_index++;    &#125;    <span class="hljs-comment">// è®¾ç½®å½“å‰çš„blobçš„å‚æ•°</span>    Blob&amp; blob = blobs[bottom_blob_index];    <span class="hljs-comment">// ä½¿ç”¨å½“å‰çš„blobè®°å½•ä¼ è¾“å…³ç³»ï¼Œ ç¬¬iå±‚ä»¥å½“å‰blobä¸ºè¾“å…¥</span>    blob.consumers.push_back(i);    <span class="hljs-comment">// ç¬¬iå±‚layerçš„ç¬¬jä¸ªè¾“å…¥</span>    layer-&gt;bottoms[j] = bottom_blob_index;&#125;</code></pre><p> (6) è®¾ç½®è¾“å‡ºçš„è¿‡ç¨‹å’Œè¿™ä¸ªç±»ä¼¼ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ï¼Œæœ€åå°±æ˜¯<strong>å‚æ•°è½½å…¥äº†</strong>:</p><p>ä¾‹å¦‚: <strong>conv1çš„å‚æ•°: 0=64 1=3 11=3 5=1 6=1728</strong></p><pre><code class="hljs cpp"><span class="hljs-comment">//è§£æ blobåé¢è·Ÿéšçš„ç‰¹å®šå‚æ•°å­—å…¸ pd</span><span class="hljs-keyword">int</span> pdlr = pd.load_param(fp);<span class="hljs-keyword">if</span> (pdlr != <span class="hljs-number">0</span>)&#123;    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;ParamDict load_param failed\n&quot;</span>);    <span class="hljs-keyword">continue</span>;&#125;<span class="hljs-comment">// layer è½½å…¥ param</span><span class="hljs-keyword">int</span> lr = layer-&gt;load_param(pd);<span class="hljs-keyword">if</span> (lr != <span class="hljs-number">0</span>)&#123;    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;layer load_param failed\n&quot;</span>);    <span class="hljs-keyword">continue</span>;&#125;layers[i] = layer;</code></pre><p>è¿™å…¶ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„å‡½æ•°:</p><p>pd.load_param(fp) å’Œ  layer_param(pd)ã€‚å‰è€…è´Ÿè´£è§£æ .param æ–‡ä»¶ä¸­ç‰¹å®šçš„å‚æ•°ï¼Œ åè€…åˆ™æ˜¯ç”¨è§£æçš„å‚æ•°æ¥æ„å»ºå¯¹åº”çš„layer</p><p>(7) ç”¨å‚æ•°å­—å…¸æ¥è§£ælayerç›¸å…³å‚æ•°ï¼ çœ‹ä¸€ä¸‹è¿™ä¸ªè‡ªå·±æ„é€ layerï¼Œ ä»¥åŠè§£æçš„è¿‡ç¨‹ </p><p>   åœ¨ä½¿ç”¨load_paramæ¥å£è½½å…¥å‚æ•°æ—¶ï¼Œéœ€è¦ç”¨å‚æ•°å­—å…¸ParamDictæ¥è§£æ.paramæ–‡ä»¶ä¸­çš„ç‰¹å®šå‚æ•°ï¼Œé‚£ä¹ˆå‚æ•°å­—å…¸å…·ä½“å¦‚ä½•è¿›è¡Œè§£æçš„ï¼Ÿæˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹paramdict.hæ–‡ä»¶ä¸­å®šä¹‰çš„æ•°æ®æˆå‘˜å˜é‡ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// parameters</span><span class="hljs-class"><span class="hljs-keyword">struct</span></span><span class="hljs-class">&#123;</span>    <span class="hljs-comment">// æ˜¯å¦å·²ç»è¢«è½½å…¥ï¼š1è¡¨ç¤ºå·²è½½å…¥</span>    <span class="hljs-keyword">int</span> loaded;    <span class="hljs-comment">// å•ä¸ªå€¼å¯èƒ½ä¸ºæ•´å½¢ä¹Ÿæœ‰å¯èƒ½ä¸ºæµ®ç‚¹å‹</span>    <span class="hljs-keyword">union</span> &#123; <span class="hljs-keyword">int</span> i; <span class="hljs-keyword">float</span> f; &#125;;    <span class="hljs-comment">// è¿˜æœ‰å¯èƒ½æ˜¯æ•°ç»„</span>    Mat v;&#125; params[NCNN_MAX_PARAM_COUNT];</code></pre><p>â€‹    è¿™é‡Œï¼ŒNCNN_MAX_PARAM_COUNTå¤§å°ä¸º20ï¼Œparamsæ˜¯ä¸€ä¸ªå¤§å°ä¸º32çš„ç»“æ„ä½“æ•°ç»„ï¼Œå³ä¸€è¡Œä¸­ç‰¹å®šå‚æ•°æ•°é‡ä¸èƒ½è¶…è¿‡20ï¼Œå½“ç„¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿä¸ä¼šè¶…è¿‡20ã€‚</p><pre><code class="hljs cpp"><span class="hljs-comment">// at most 20 parameters</span><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NCNN_MAX_PARAM_COUNT 20</span></code></pre><p>â€‹    ç„¶åï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹paramdict.cppæºç ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä¼šè§£æå‡ºå½“å‰è¡Œçš„indexï¼ˆidï¼‰ï¼Œä¹Ÿå³æ˜¯ç­‰å·å·¦è¾¹éƒ¨åˆ†ï¼š </p><pre><code class="hljs cpp"><span class="hljs-comment">// è§£æä¹‹åçš„ key=value å¯¹</span><span class="hljs-keyword">int</span> id = <span class="hljs-number">0</span>;<span class="hljs-keyword">while</span> (<span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;%d=&quot;</span>, &amp;id) == <span class="hljs-number">1</span>)&#123;    ...&#125;</code></pre><p> åœ¨è¿™é‡Œå¯ä»¥ç»“åˆ <a href="https://github.com/Tencent/ncnn/wiki/param-and-model-file-structure">https://github.com/Tencent/ncnn/wiki/param-and-model-file-structure</a> é˜…è¯»æºç ï¼š</p><p><strong>index-value çš„è§„åˆ™ä¸º:</strong></p><ul><li>indexä¸º0~19: å¯¹åº”æ•´å½¢æˆ–æµ®ç‚¹å‹æ•°æ®</li><li><p>indexå°äº -23000ï¼š å¯¹åº”æ•´å½¢æˆ–æµ®ç‚¹å‹æ•°ç»„, ç­‰å·å³è¾¹ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ•°ç»„é•¿åº¦ï¼Œåé¢é¡ºåºå°±æ˜¯æ•°ç»„å†…å®¹ï¼Œ[array size],int,int,â€¦,intæˆ–[array size],float,float,â€¦,floatï¼Œä¾‹å¦‚ï¼š</p><p><strong>0=1 1=2.5 -23303=2,2.0,3.0</strong></p><p>indexä¸º -23303ï¼Œè¡¨æ˜å½“å‰å‚æ•°ä¸ºæ•°ç»„ï¼Œç­‰å·å³è¾¹ç¬¬ä¸€ä¸ªå‚æ•°ä¸º2ï¼Œè¡¨æ˜æ•°ç»„é•¿åº¦ä¸º2ï¼Œåé¢2.0,3.0å°±æ˜¯æ•°ç»„çš„å†…å®¹</p></li></ul><pre><code class="hljs cpp"><span class="hljs-keyword">bool</span> is_array = id &lt;= <span class="hljs-number">-23300</span>; <span class="hljs-comment">// index &lt;= -23300ï¼šæ•°ç»„</span><span class="hljs-keyword">if</span> (is_array) <span class="hljs-comment">// å¦‚æœæ˜¯æ•°ç»„</span>&#123;  <span class="hljs-comment">// è®¡ç®—id</span>    id = -id - <span class="hljs-number">23300</span>;&#125;<span class="hljs-keyword">if</span> (is_array)  <span class="hljs-comment">// å¦‚æœå½“å‰å‚æ•°æ˜¯æ•°ç»„ç±»å‹</span>&#123;    <span class="hljs-keyword">int</span> len = <span class="hljs-number">0</span>;  <span class="hljs-comment">// æ•°ç»„é•¿åº¦</span>    <span class="hljs-keyword">int</span> nscan = <span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;%d&quot;</span>, &amp;len);    <span class="hljs-keyword">if</span> (nscan != <span class="hljs-number">1</span>)             <span class="hljs-comment">// ç­‰äº1æ‰è¡¨ç¤ºè¯»å–æˆåŠŸ</span>    &#123;        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;ParamDict read array length failed\n&quot;</span>);        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;        params[id].v.create(len);  <span class="hljs-comment">// åˆ›å»ºæ•°ç»„ï¼šå°±æ˜¯ä¸€ä¸ªMat</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; len; j++)    &#123;        <span class="hljs-keyword">char</span> vstr[<span class="hljs-number">16</span>]; <span class="hljs-comment">// ä»äºŒå€¼æ–‡ä»¶ä¸­è¯»å–string</span>        nscan = <span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;,%15[^,\n ]&quot;</span>, vstr);        <span class="hljs-keyword">if</span> (nscan != <span class="hljs-number">1</span>) <span class="hljs-comment">// å¦‚æœè¯»å–å¤±è´¥</span>        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;ParamDict read array element failed\n&quot;</span>);            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        &#125;         <span class="hljs-comment">// æ˜¯å¦ä¸ºæµ®ç‚¹å‹ï¼šçœ‹è§£æçš„å­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨&#x27;.&#x27;æˆ–&#x27;e&#x27;</span>        <span class="hljs-comment">// å°æ•°ç‚¹è®¡æ•°æ³•å’Œç§‘å­¦è®¡æ•°æ³•</span>        <span class="hljs-keyword">bool</span> is_float = vstr_is_float(vstr);        <span class="hljs-comment">// å¦‚æœæ˜¯æµ®ç‚¹æ•°</span>        <span class="hljs-keyword">if</span> (is_float)  <span class="hljs-comment">// vstrèµ‹å€¼ç»™params[id].v[j]</span>        &#123;            <span class="hljs-keyword">float</span>* ptr = params[id].v;            nscan = <span class="hljs-built_in">sscanf</span>(vstr, <span class="hljs-string">&quot;%f&quot;</span>, &amp;ptr[j]);        &#125;        <span class="hljs-keyword">else</span>  <span class="hljs-comment">// vstrèµ‹å€¼ç»™params[id].v[j]</span>        &#123;            <span class="hljs-keyword">int</span>* ptr = params[id].v;            nscan = <span class="hljs-built_in">sscanf</span>(vstr, <span class="hljs-string">&quot;%d&quot;</span>, &amp;ptr[j]);        &#125;        <span class="hljs-keyword">if</span> (nscan != <span class="hljs-number">1</span>)  <span class="hljs-comment">// èµ‹å€¼å¤±è´¥</span>        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;ParamDict parse array element failed\n&quot;</span>);            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        &#125;    &#125;&#125;</code></pre><p>â€‹    è¿™é‡Œæœ‰ä¸ªvstr_is_floatå‡½æ•°ï¼ŒåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ¤æ–­æ•°å­—å¯¹åº”å­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨å°æ•°ç‚¹â€™.â€™æˆ–å­—æ¯â€™eâ€™ï¼Œå¯¹åº”å°æ•°çš„ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ­£å¸¸çš„å°æ•°ç‚¹è¡¨ç¤ºæ³•ï¼Œä¸€ç§æ˜¯ç§‘å­¦è®¡æ•°æ³•ã€‚</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">vstr_is_float</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> vstr[<span class="hljs-number">16</span>])</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// look ahead for determine isfloat</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;<span class="hljs-number">16</span>; j++)    &#123;        <span class="hljs-keyword">if</span> (vstr[j] == <span class="hljs-string">&#x27;\0&#x27;</span>)            <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">if</span> (vstr[j] == <span class="hljs-string">&#x27;.&#x27;</span> || <span class="hljs-built_in">tolower</span>(vstr[j]) == <span class="hljs-string">&#x27;e&#x27;</span>)            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;</code></pre><p>â€‹    å¦‚æœä¸æ˜¯æ•°ç»„ï¼Œç›´æ¥è¯»å–å³å¯ï¼š</p><pre><code class="hljs cpp"><span class="hljs-keyword">else</span>   <span class="hljs-comment">// ä¸æ˜¯æ•°ç»„</span>&#123;    <span class="hljs-keyword">char</span> vstr[<span class="hljs-number">16</span>];    <span class="hljs-keyword">int</span> nscan = <span class="hljs-built_in">fscanf</span>(fp, <span class="hljs-string">&quot;%15s&quot;</span>, vstr); <span class="hljs-comment">// ç›´æ¥å°†å­—ç¬¦ä¸²èµ‹å€¼ç»™vstr</span>    <span class="hljs-keyword">if</span> (nscan != <span class="hljs-number">1</span>)  <span class="hljs-comment">// èµ‹å€¼å¤±è´¥</span>    &#123;        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;ParamDict read value failed\n&quot;</span>);        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    <span class="hljs-keyword">bool</span> is_float = vstr_is_float(vstr);  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºæµ®ç‚¹æ•°</span>    <span class="hljs-keyword">if</span> (is_float)  <span class="hljs-comment">// å°†å­—ç¬¦ä¸²ä¸­çš„å€¼èµ‹ç»™å‚æ•°å­—å…¸</span>        nscan = <span class="hljs-built_in">sscanf</span>(vstr, <span class="hljs-string">&quot;%f&quot;</span>, &amp;params[id].f);    <span class="hljs-keyword">else</span>        nscan = <span class="hljs-built_in">sscanf</span>(vstr, <span class="hljs-string">&quot;%d&quot;</span>, &amp;params[id].i);    <span class="hljs-keyword">if</span> (nscan != <span class="hljs-number">1</span>)  <span class="hljs-comment">// èµ‹å€¼å¤±è´¥</span>    &#123;        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;ParamDict parse value failed\n&quot;</span>);        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;&#125;params[id].loaded = <span class="hljs-number">1</span>;         <span class="hljs-comment">// è½½å…¥æˆåŠŸ</span></code></pre><p>(8) ç”¨å‚æ•°å­—å…¸æ¥è§£ælayerç›¸å…³å‚æ•°</p><p>å¦‚å‰æ‰€ç¤º, layerä¼šæ ¹æ®å‚æ•°å­—å…¸æ¥æ„é€  layer</p><pre><code class="hljs cpp"> <span class="hljs-comment">// layerè½½å…¥param</span><span class="hljs-keyword">int</span> lr = layer-&gt;load_param(pd);</code></pre><p>è½¬åˆ° layerå±‚çš„ load_param æ¥å£å¯ä»¥çœ‹åˆ°ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// è½½å…¥å‚æ•°ï¼šå‚æ•°åˆ—è¡¨</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Layer::load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDict&amp; <span class="hljs-comment">/*pd*/</span>)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>è¿™é‡Œå¹¶æ²¡æœ‰å®ç°ï¼Œåœ¨layer.hå¤´æ–‡ä»¶ä¸­æœ‰ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// load layer specific parameter from parsed dict</span><span class="hljs-comment">// return 0 if success</span><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">load_param</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ParamDict&amp; pd)</span></span>;</code></pre><p> ! load_paramå®é™…ä¸Šæ˜¯ä¸€ä¸ªè™šå‡½æ•°ï¼Œç†Ÿæ‚‰C++çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œè°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œå®é™…è°ƒç”¨çš„æ˜¯ç»§æ‰¿ç±»çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆåˆ°åº•å¦‚ä½•è°ƒç”¨çš„ï¼Ÿï¼Œæˆ‘ä»¬å¯ä»¥å¾€å›çœ‹ï¼Œæœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><pre><code class="hljs cpp">Layer* layer = create_layer(layer_type)  <span class="hljs-comment">// åˆ›å»ºlayer</span><span class="hljs-keyword">if</span> (!layer) <span class="hljs-comment">// layer_typeä¸æ˜¯é»˜è®¤ç±»å‹</span>&#123;       layer = create_custom_layer(layer_type);   <span class="hljs-comment">// ä»è‡ªå®šä¹‰layerè¯»å–</span>&#125;<span class="hljs-keyword">if</span> (!layer)   <span class="hljs-comment">// å¦‚æœè‡ªå®šä¹‰layerä¸­ä¹Ÿä¸å­˜åœ¨å½“å‰ç±»å‹layer</span>&#123;    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;layer %s not exists or registered\n&quot;</span>, layer_type);    clear();    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;</code></pre><p>å›åˆ°layer.cppæ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä»£ç ä¸­å…ˆæ‰¾åˆ°å½“å‰å±‚layerç±»å‹å¯¹åº”å±‚æ³¨å†Œå™¨ä¸­ç±»å‹çš„ç´¢å¼•indexã€‚</p><p><strong>layer_type -&gt; index -&gt; create_layer</strong></p><pre><code class="hljs cpp"> <span class="hljs-comment">// å°†stringå¯¹åº”layerç±»å‹è½¬æ¢æˆå¯¹åº”index</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">layer_to_index</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* type)</span></span><span class="hljs-function"> </span>&#123;     <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;layer_registry_entry_count; i++)     &#123;         <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(type, layer_registry[i].name) == <span class="hljs-number">0</span>)             <span class="hljs-keyword">return</span> i;     &#125;     <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; &#125;   <span class="hljs-comment">// æ ¹æ®indexåˆ›å»ºlayerï¼š</span><span class="hljs-function">Layer* <span class="hljs-title">create_layer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span> || index &gt;= layer_registry_entry_count)     <span class="hljs-comment">// indexä¸èƒ½è¶…è¿‡ç´¢å¼•èŒƒå›´</span>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;     layer_creator_func layer_creator = layer_registry[index].creator;     <span class="hljs-comment">// åˆ›å»ºlayeræ„é€ å™¨</span>    <span class="hljs-keyword">if</span> (!layer_creator)     <span class="hljs-comment">// layeræ„é€ å™¨åˆ›å»ºå¤±è´¥</span>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;     Layer* layer = layer_creator();     <span class="hljs-comment">// æ„é€ layer</span>    layer-&gt;typeindex = index;    <span class="hljs-comment">// è®¾ç½®layerçš„ç±»å‹index</span>    <span class="hljs-keyword">return</span> layer;&#125;<span class="hljs-comment">// æ ¹æ®å­—ç¬¦ä¸²layerç±»å‹åˆ›å»ºlayer -&gt; è°ƒç”¨ä¸Šé¢ä¸¤ä¸ªå‡½æ•°ï¼Œ åˆ›å»ºlayer</span><span class="hljs-function">Layer* <span class="hljs-title">create_layer</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* type)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">int</span> index = layer_to_index(type);    <span class="hljs-keyword">if</span> (index == <span class="hljs-number">-1</span>)        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;     <span class="hljs-keyword">return</span> create_layer(index);&#125;</code></pre><p>line 18 æœ‰ä¸ªlayer_registryï¼Œå…¶å®šä¹‰ä¸ºï¼š</p><pre><code class="hljs cpp"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> layer_registry_entry layer_registry[] =&#123;    #include <span class="hljs-string">&quot;layer_registry.h&quot;</span>&#125;;</code></pre><p>è€Œè¿™ä¸ªâ€layer_registry.hâ€æ–‡ä»¶æ˜¯åœ¨buildé¡¹ç›®çš„æ—¶å€™è‡ªåŠ¨äº§ç”Ÿçš„ï¼Œéƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="hljs cpp"> <span class="hljs-comment">// Layer Registry header</span> <span class="hljs-comment">//</span> <span class="hljs-comment">// This file is auto-generated by cmake, don&#x27;t edit it.</span>  <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span> &#123;<span class="hljs-string">&quot;AbsVal&quot;</span>,AbsVal_final_layer_creator&#125;, <span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span> &#123;AbsVal_final_layer_creator&#125;, <span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span> <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>&#123;<span class="hljs-string">&quot;ArgMax&quot;</span>,<span class="hljs-number">0</span>&#125;,<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>&#123;<span class="hljs-number">0</span>&#125;,<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>&#123;<span class="hljs-string">&quot;BatchNorm&quot;</span>,BatchNorm_final_layer_creator&#125;,<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>&#123;BatchNorm_final_layer_creator&#125;,<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>&#123;<span class="hljs-string">&quot;Bias&quot;</span>,Bias_final_layer_creator&#125;,<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>&#123;Bias_final_layer_creator&#125;,<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span></code></pre><p>è€Œ layer_registry_entry çš„ç»“æ„ä¸ºï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// layer factory function</span><span class="hljs-keyword">typedef</span> Layer* (*layer_creator_func)(); <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">layer_registry_entry</span></span><span class="hljs-class">&#123;</span><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STRING</span>    <span class="hljs-comment">// layer type name</span>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STRING</span></span>    <span class="hljs-comment">// layer factory entry</span>    layer_creator_func creator;&#125;;</code></pre><p>æˆ‘ä»¬ä»£å…¥ä¸€ç»„å‚æ•°è¿›å»å°±æ˜¯ï¼š</p><pre><code class="hljs cpp">name = <span class="hljs-string">&quot;AbsVal&quot;</span>;layer_creator_func = AbsVal_final_layer_creator;</code></pre><p>è¿™é‡Œlayer_creator_funcå®šä¹‰ä¸ºï¼š</p><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> Layer* (*layer_creator_func)();</code></pre><p>é‚£ä¹ˆï¼Œlayer_creator_func AbsVal_final_layer_creatorè½¬æ¢è¿‡å»å°±æ˜¯ï¼š </p><pre><code class="hljs isbl"><span class="hljs-variable">Layer</span>* <span class="hljs-function"><span class="hljs-title">AbsVal_final_layer_creator</span>()</span></code></pre><p>åœ¨layer.hæ–‡ä»¶æœ€ä¸‹é¢è¿˜æœ‰ä¸€ä¸ªå®šä¹‰ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// ## å­—ç¬¦ä¸²è¿æ¥</span><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFINE_LAYER_CREATOR(name) \</span>    ::ncnn::Layer* name##_layer_creator() &#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> name; &#125;</code></pre><p>æˆ‘ä»¬åœ¨absval.cppæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ° DEFINE_LAYER_CREATOR(AbsVal)ï¼Œç›¸å½“äºå°±æ˜¯å£°æ˜äº†ä¸€ä¸ªå‡½æ•°ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// #define DEFINE_LAYER_CREATOR(name) \</span><span class="hljs-comment">//    ::ncnn::Layer* name##_layer_creator() &#123; return new name; &#125;</span><span class="hljs-comment">// ç”±ä¸Šé¢è¿™æ®µä»£ç å¯çŸ¥ï¼ŒDEFINE_LAYER_CREATOR(AbsVal)ç­‰ä»·äºï¼š</span>::<span class="hljs-function">ncnn::Layer* <span class="hljs-title">AbsVal_layer_creator</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AbsVal; &#125;</code></pre><p>â€‹    ä¸Šé¢é‚£å¥è¯ç›¸å½“äºå°±æ˜¯newäº†ä¸€ä¸ªAbsValå±‚ï¼Œä½†æ˜¯è¿™é‡Œè¿˜æ˜¯å¯¹åº”ä¸èµ·æ¥ï¼Œä¸Šé¢çš„æ˜¯ AbsVal_final_layer_creator()ï¼Œè¿™é‡Œå£°æ˜çš„æ˜¯AbsVal_layer_creator()ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°ncnnè¿˜æœ‰ä¸€å±‚ç»§æ‰¿ï¼Œä½¿ç”¨cmakeç¼–è¯‘ncnné¡¹ç›®åï¼Œé™¤äº†ç”Ÿæˆäº†layer_registry.hæ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜ç”Ÿæˆäº†ä¸€ä¸ªlayer_declaration.hæ–‡ä»¶ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä¸€åˆ‡å°±æ¸…æ¥šäº†ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// Layer Declaration header</span><span class="hljs-comment">//</span><span class="hljs-comment">// This file is auto-generated by cmake, don&#x27;t edit it.</span> <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;layer/absval.h&quot;</span></span><span class="hljs-keyword">namespace</span> ncnn &#123;    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbsVal_final</span> :</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> AbsVal&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">create_pipeline</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Option&amp; opt)</span> </span>&#123;        &#123; <span class="hljs-keyword">int</span> ret = AbsVal::create_pipeline(opt); <span class="hljs-keyword">if</span> (ret) <span class="hljs-keyword">return</span> ret; &#125;        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">destroy_pipeline</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Option&amp; opt)</span> </span>&#123;        &#123; <span class="hljs-keyword">int</span> ret = AbsVal::destroy_pipeline(opt); <span class="hljs-keyword">if</span> (ret) <span class="hljs-keyword">return</span> ret; &#125;        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    &#125;&#125;;DEFINE_LAYER_CREATOR(AbsVal_final)&#125; <span class="hljs-comment">// namespace ncnn</span> <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;layer/batchnorm.h&quot;</span></span><span class="hljs-keyword">namespace</span> ncnn &#123;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BatchNorm_final</span> :</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> BatchNorm&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">create_pipeline</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Option&amp; opt)</span> </span>&#123;        &#123; <span class="hljs-keyword">int</span> ret = BatchNorm::create_pipeline(opt); <span class="hljs-keyword">if</span> (ret) <span class="hljs-keyword">return</span> ret; &#125;        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    &#125;    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">destroy_pipeline</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Option&amp; opt)</span> </span>&#123;        &#123; <span class="hljs-keyword">int</span> ret = BatchNorm::destroy_pipeline(opt); <span class="hljs-keyword">if</span> (ret) <span class="hljs-keyword">return</span> ret; &#125;        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    &#125;&#125;;DEFINE_LAYER_CREATOR(BatchNorm_final)&#125; <span class="hljs-comment">// namespace ncnn</span></code></pre><p>â€‹    AbsVal_finalå±‚ç»§æ‰¿äº†AbsValå±‚ï¼Œå¦‚æœå½“å‰æ“ä½œç³»ç»Ÿä¸æ˜¯linuxç³»ç»Ÿï¼Œå°±ä¼šå°†create_pipeline()å’Œdestroy_pipeline()æŠ½è±¡å‡ºæ¥ï¼Œå…·ä½“è°ƒç”¨æ—¶ï¼Œå°±è°ƒç”¨å¯¹åº”ä¼˜åŒ–äº†çš„ä»£ç ã€‚é‚£ä¹ˆlayerè½½å…¥ParamDictå…·ä½“å®ç°å°±å¯¹åº”äºå„ä¸ªlayerçš„è½½å…¥æµç¨‹äº†ã€‚</p><h6 id="3-3-binæ–‡ä»¶"><a href="#3-3-binæ–‡ä»¶" class="headerlink" title="3.3 binæ–‡ä»¶"></a>3.3 binæ–‡ä»¶</h6><p>â€‹    å‰é¢å·²ç»å¤§è‡´æ€»ç»“äº†ncnnçš„paramæ–‡ä»¶è½½å…¥ï¼Œæ ¹æ®paramæ–‡ä»¶åˆ›å»ºç½‘ç»œç»“æ„ï¼Œç„¶åé€šè¿‡binæ–‡ä»¶è½½å…¥æ¯ä¸€å±‚å¯¹åº”çš„ç½‘ç»œå‚æ•°ã€‚è¿™é‡Œå°±æ€»ç»“ä¸€ä¸‹ï¼Œå¦‚ä½•è½½å…¥æ¯ä¸€å±‚çš„å‚æ•°ï¼š</p><p>â€‹        æˆ‘ä»¬å¸¸ç”¨çš„ç½‘ç»œå‚æ•°è½½å…¥çš„æ¥å£ä¸ºï¼š</p><pre><code class="hljs reasonml"><span class="hljs-comment">// ä»äºŒè¿›åˆ¶æ–‡ä»¶ä¸­è½½å…¥æ¨¡å‹</span><span class="hljs-built_in">int</span> load<span class="hljs-constructor">_model(<span class="hljs-params">const</span> <span class="hljs-params">char</span><span class="hljs-operator">*</span> <span class="hljs-params">modelpath</span>)</span>;</code></pre><p>â€‹    æ‰¾åˆ°å¯¹åº”net.cppæ–‡ä»¶å®ç°éƒ¨åˆ†æœ‰ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// ä»äºŒè¿›åˆ¶æ–‡ä»¶ä¸­è½½å…¥æ¨¡å‹</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Net::load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* modelpath)</span></span><span class="hljs-function"></span>&#123;    FILE* fp = fopen(modelpath, <span class="hljs-string">&quot;rb&quot;</span>);    <span class="hljs-keyword">if</span> (!fp)    &#123;        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;fopen %s failed\n&quot;</span>, modelpath);        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;     <span class="hljs-keyword">int</span> ret = load_model(fp);     fclose(fp);     <span class="hljs-keyword">return</span> ret;&#125;</code></pre><p>å’Œè½½å…¥æ¨¡å‹å‚æ•°ä¸€æ ·ï¼Œncnnæ¨¡å‹è½½å…¥è¿™é‡Œè°ƒç”¨äº†å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä»æ–‡ä»¶æŒ‡é’ˆè½½å…¥æƒé‡å‚æ•°ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// ä»æ–‡ä»¶æŒ‡é’ˆè½½å…¥æ¨¡å‹</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Net::load_model</span><span class="hljs-params">(FILE* fp)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">if</span> (layers.empty()) <span class="hljs-comment">// åˆ¤æ–­å½“å‰layeræ˜¯å¦ä¸ºç©º</span>    &#123;        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;network graph not ready\n&quot;</span>);        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;        <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;     <span class="hljs-comment">// load file</span>    <span class="hljs-function">ModelBinFromStdio <span class="hljs-title">mb</span><span class="hljs-params">(fp)</span></span>;     <span class="hljs-comment">// ä»äºŒè¿›åˆ¶æ–‡ä»¶è¯»å–</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i=<span class="hljs-number">0</span>; i&lt;layers.size(); i++)     <span class="hljs-comment">// éå†æ‰€æœ‰çš„å±‚</span>    &#123;        Layer* layer = layers[i]; <span class="hljs-comment">// è¯»å–ç¬¬iå±‚</span>        <span class="hljs-comment">//Here we found inconsistent content in the parameter file.</span>        <span class="hljs-keyword">if</span> (!layer)&#123;    <span class="hljs-comment">// å¦‚æœç¬¬iå±‚ä¸å­˜åœ¨</span>            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;load_model error at layer %d, parameter file has inconsistent content.\n&quot;</span>, (<span class="hljs-keyword">int</span>)i);            ret = <span class="hljs-number">-1</span>;            <span class="hljs-keyword">break</span>;        &#125;         <span class="hljs-comment">// è½½å…¥æ¨¡å‹å‚æ•°</span>        <span class="hljs-keyword">int</span> lret = layer-&gt;load_model(mb);        <span class="hljs-keyword">if</span> (lret != <span class="hljs-number">0</span>)        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;layer load_model %d failed\n&quot;</span>, (<span class="hljs-keyword">int</span>)i);            ret = <span class="hljs-number">-1</span>;            <span class="hljs-keyword">break</span>;        &#125;         <span class="hljs-keyword">int</span> cret = layer-&gt;create_pipeline(opt);  <span class="hljs-comment">// ä»optå¤„åˆ›å»ºç½‘ç»œçš„pipline</span>        <span class="hljs-keyword">if</span> (cret != <span class="hljs-number">0</span>) <span class="hljs-comment">// å¦‚æœåˆ›å»ºç¬¬iå±‚çš„piplineå¤±è´¥</span>        &#123;            <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;layer create_pipeline %d failed\n&quot;</span>, (<span class="hljs-keyword">int</span>)i);            ret = <span class="hljs-number">-1</span>;            <span class="hljs-keyword">break</span>;        &#125;    &#125;     <span class="hljs-comment">// ç½‘ç»œå¤ç”¨</span>    fuse_network();    <span class="hljs-keyword">return</span> ret;&#125;</code></pre><p>â€‹    æŒ‰ç…§ä»£ç æ³¨é‡Šï¼Œåº”è¯¥è¿˜æ˜¯æ¯”è¾ƒå¥½æ‡‚å¾—ï¼Œè¿™é‡Œéœ€è¦è§£æä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†ä¸º<strong>ModelBinFromStdio</strong>ï¼Œå¯¹åº”äºäºŒè¿›åˆ¶æ¨¡å‹æ–‡ä»¶è§£æï¼Œå¦å¤–ä¸€éƒ¨åˆ†ä¸º <strong>layer-&gt;load_model(mb)</strong>ï¼Œå¯¹åº”äºå…·ä½“æŸä¸ªå±‚çš„å‚æ•°è½½å…¥ï¼š</p><p>â€‹    ï¼ˆ1ï¼‰äºŒè¿›åˆ¶æ¨¡å‹æ–‡ä»¶è§£æ</p><p>â€‹    è¿™é‡Œå¯¹åº”äºmodelbin.hå’Œmodelbin.cppæ–‡ä»¶ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹modelbin.hæ–‡ä»¶ï¼š</p><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ModelBin</span></span><span class="hljs-class">&#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-keyword">virtual</span> ~ModelBin();    <span class="hljs-comment">// element type</span>    <span class="hljs-comment">// 0 = auto</span>    <span class="hljs-comment">// 1 = float32</span>    <span class="hljs-comment">// 2 = float16</span>    <span class="hljs-comment">// 3 = int8</span>    <span class="hljs-comment">// load vec</span>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Mat <span class="hljs-title">load</span><span class="hljs-params">(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> type)</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;    <span class="hljs-comment">// load image</span>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Mat <span class="hljs-title">load</span><span class="hljs-params">(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> h, <span class="hljs-keyword">int</span> type)</span> <span class="hljs-keyword">const</span></span>;    <span class="hljs-comment">// load dim</span>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Mat <span class="hljs-title">load</span><span class="hljs-params">(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> h, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> type)</span> <span class="hljs-keyword">const</span></span>;&#125;; <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> NCNN_STDIO</span><span class="hljs-comment">// è½½å…¥æ¨¡å‹å‚æ•°åˆ°ä¸€ä¸ªMatä¸­</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ModelBinFromStdio</span> :</span> <span class="hljs-keyword">public</span> ModelBin&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-comment">// construct from file</span>    ModelBinFromStdio(FILE* binfp);     <span class="hljs-function"><span class="hljs-keyword">virtual</span> Mat <span class="hljs-title">load</span><span class="hljs-params">(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> type)</span> <span class="hljs-keyword">const</span></span>; <span class="hljs-keyword">protected</span>:    FILE* binfp;&#125;;<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">// NCNN_STDIO</span></span> <span class="hljs-comment">// è½½å…¥æ¨¡å‹å‚æ•°åˆ°ä¸€ä¸ªMatä¸­</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ModelBinFromMemory</span> :</span> <span class="hljs-keyword">public</span> ModelBin&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-comment">// construct from external memory</span>    ModelBinFromMemory(<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span>*&amp; mem);     <span class="hljs-function"><span class="hljs-keyword">virtual</span> Mat <span class="hljs-title">load</span><span class="hljs-params">(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> type)</span> <span class="hljs-keyword">const</span></span>; <span class="hljs-keyword">protected</span>:    <span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span>*&amp; mem;&#125;; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ModelBinFromMatArray</span> :</span> <span class="hljs-keyword">public</span> ModelBin&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-comment">// construct from weight blob array</span>    ModelBinFromMatArray(<span class="hljs-keyword">const</span> Mat* weights);     <span class="hljs-function"><span class="hljs-keyword">virtual</span> Mat <span class="hljs-title">load</span><span class="hljs-params">(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> type)</span> <span class="hljs-keyword">const</span></span>; <span class="hljs-keyword">protected</span>:    <span class="hljs-keyword">mutable</span> <span class="hljs-keyword">const</span> Mat* weights;&#125;;</code></pre><p>   æ‰¾åˆ°å¯¹åº”å®ç°éƒ¨åˆ†ï¼Œå°±æ˜¯modelbin.cppï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒModelBinFromStdio mb(fp);å°±æ˜¯å°†æ–‡ä»¶æŒ‡é’ˆä¼ ç»™binfpå¯¹è±¡</p><pre><code class="hljs cpp">ModelBinFromStdio::ModelBinFromStdio(FILE* _binfp) : binfp(_binfp)&#123;&#125;</code></pre><p>â€‹    ä¸‹é¢å†çœ‹ä¸€ä¸‹layerè½½å…¥å‚æ•°ï¼Œlayerå…·ä½“æ“ä½œå¯¹åº”äºå…·ä½“ç±»å‹çš„å±‚æ“ä½œï¼Œä¾‹å¦‚batchnormï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><pre><code class="hljs cpp"><span class="hljs-comment">// è½½å…¥æ¨¡å‹</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">BatchNorm::load_model</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ModelBin&amp; mb)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">// slopeæ•°æ®</span>    slope_data = mb.load(channels, <span class="hljs-number">1</span>);    <span class="hljs-comment">// è½½å…¥å¤±è´¥ï¼šè¿”è¿˜-100</span>    <span class="hljs-keyword">if</span> (slope_data.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;     <span class="hljs-comment">// meanæ•°æ®</span>    mean_data = mb.load(channels, <span class="hljs-number">1</span>);    <span class="hljs-comment">// è½½å…¥æ•°æ®å¤±è´¥ï¼Œè¿”è¿˜-100</span>    <span class="hljs-keyword">if</span> (mean_data.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;     <span class="hljs-comment">// varianceæ•°æ®</span>    var_data = mb.load(channels, <span class="hljs-number">1</span>);    <span class="hljs-comment">// è½½å…¥æ•°æ®å¤±è´¥ï¼Œè¿”è¿˜-100</span>    <span class="hljs-keyword">if</span> (var_data.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;     <span class="hljs-comment">// biasæ•°æ®</span>    bias_data = mb.load(channels, <span class="hljs-number">1</span>);    <span class="hljs-comment">// è½½å…¥æ•°æ®å¤±è´¥ï¼Œè¿”è¿˜-100</span>    <span class="hljs-keyword">if</span> (bias_data.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;     <span class="hljs-comment">// åˆ›å»ºçŸ©é˜µ</span>    a_data.create(channels);    <span class="hljs-keyword">if</span> (a_data.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;    <span class="hljs-comment">// åˆ›å»ºçŸ©é˜µ</span>    b_data.create(channels);    <span class="hljs-keyword">if</span> (b_data.empty())        <span class="hljs-keyword">return</span> <span class="hljs-number">-100</span>;     <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;channels; i++)    &#123;        <span class="hljs-comment">// sqrt variance</span>        <span class="hljs-keyword">float</span> sqrt_var = <span class="hljs-built_in">sqrt</span>(var_data[i] + eps);        a_data[i] = bias_data[i] - slope_data[i] * mean_data[i] / sqrt_var;        b_data[i] = slope_data[i] / sqrt_var;    &#125;     <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ModelBinFromStdio çš„loadæ¥å£ï¼š</p><pre><code class="hljs cpp"><span class="hljs-function">Mat <span class="hljs-title">ModelBinFromStdio::load</span><span class="hljs-params">(<span class="hljs-keyword">int</span> w, <span class="hljs-keyword">int</span> type)</span> <span class="hljs-keyword">const</span></span></code></pre><p>åé¢typeå¯¹åº”æœ‰å››ç§ç±»å‹ï¼šautoï¼Œfloat32ï¼Œfloat16å’Œint8</p><pre><code class="hljs cpp"><span class="hljs-comment">// 0 = auto</span><span class="hljs-comment">// 1 = float32</span><span class="hljs-comment">// 2 = float16</span><span class="hljs-comment">// 3 = int8</span></code></pre><p> ç„¶åï¼Œæ ¹æ®è¿™å››ç§ç±»å‹è¿›è¡Œæ¨¡å‹å‚æ•°è½½å…¥ï¼Œæ„Ÿè§‰æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¸»è¦æ˜¯é‡Œé¢æœ‰ä¸ªalignSizeå‡½æ•°éœ€è¦åšä¸ªç¬”è®°ï¼š</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">inline</span> <span class="hljs-keyword">size_t</span> <span class="hljs-title">alignSize</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span> sz, <span class="hljs-keyword">int</span> n)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">return</span> (sz + n<span class="hljs-number">-1</span>) &amp; -n;&#125;</code></pre><p>alignSizeå°±æ˜¯ç”³è¯·szå¤§å°çš„å†…å­˜ï¼Œå®é™…ç”³è¯·å†…å­˜æ˜¯ y =(sz+n-1)&amp;-n å¤§å°çš„å†…å­˜ï¼Œy &gt;= szï¼Œä¸”yæ˜¯nçš„æ•´æ•°å€ï¼Œç„¶åå¯¹(sz+n-1)&amp; -nçš„è§£é‡Šæ˜¯ï¼š</p><p>â€‹    å‡è®¾nä¸º16ï¼Œ-nå°±æ˜¯0xfffffff0ï¼Œ(sz+n-1)ï¼ŒåŠ è¿™ä¸ªn-1ä¸€æ˜¯ä¸ºäº†ä¿è¯szåˆšå¥½æ˜¯16çš„å€æ•°ä¸ä¼šå¤šç®—ï¼ŒäºŒåä¸ºäº†é˜²æ­¢ä¸æ˜¯16çš„å€æ•°ä¼šå°‘ç®—ï¼Œå¦‚ï¼Œsz=3, å°±æ˜¯ä»äºŒè¿›åˆ¶è§’åº¦èˆå¼ƒ19å°äº16éƒ¨åˆ†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ncnnæºç åˆ†æ_0</title>
    <link href="/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-0/"/>
    <url>/2020/09/17/ncnn%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-0/</url>
    
    <content type="html"><![CDATA[<p>ncnn æºç åˆ†æç¬¬ä¸€ç¯‡</p><a id="more"></a><p>ncnn æ˜¯ä¸€ä¸ªæ¶æ„æ¯”è¾ƒç®€å•çš„æ·±åº¦å­¦ä¹ æ¨å¯¼æ¡†æ¶ã€‚ å…¶é¡¹ç›®ç›®å½•å¦‚ä¸‹æ‰€ç¤º:</p><pre><code class="hljs ncnn">.â”œâ”€â”€ CMakeLists.txtâ”œâ”€â”€ CONTRIBUTING.mdâ”œâ”€â”€ Info.plistâ”œâ”€â”€ LICENSE.txtâ”œâ”€â”€ README.mdâ”œâ”€â”€ benchmarkâ”œâ”€â”€ build.shâ”œâ”€â”€ cmakeâ”œâ”€â”€ docs    &#x2F;&#x2F; æ–‡æ¡£â”œâ”€â”€ examples    &#x2F;&#x2F; å®ä¾‹â”œâ”€â”€ images   &#x2F;&#x2F; å›¾ç‰‡â”œâ”€â”€ package.shâ”œâ”€â”€ src      &#x2F;&#x2F; ä¸»è¦çš„æºä»£ç â”‚   â”œâ”€â”€ arm &#x2F;&#x2F; é’ˆå¯¹äº arm å¹³å°çš„ä¼˜åŒ–â”‚   â”œâ”€â”€ mips &#x2F;&#x2F; é’ˆå¯¹äº mips å¹³å°çš„ä¼˜åŒ–â”‚   â”œâ”€â”€ vulkan &#x2F;&#x2F; GPU ä¼˜åŒ–ä»£ç â”‚   â”œâ”€â”€ x86 &#x2F;&#x2F; é’ˆå¯¹äº x86 å¹³å°çš„ä¼˜åŒ–â”œâ”€â”€ ... &#x2F;&#x2F; é€šç”¨å¹³å°ä»£ç â””â”€â”€ xxx.hâ”œâ”€â”€ tests  &#x2F;&#x2F; æµ‹è¯•â”œâ”€â”€ toolchainsâ””â”€â”€ tools   &#x2F;&#x2F; å·¥å…·: (1) å…¶ä»–æ¨¡å‹ -&gt; ncnn  (2) æ¨¡å‹ä¼˜åŒ–å’Œé‡åŒ–</code></pre><p>æœ¬ç³»åˆ—æ—¨åœ¨äºå»æ·±å…¥äº†è§£ ncnn çš„å†…éƒ¨æœºç†ï¼Œ ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><p>ncnn æºç åˆ†æ_1  å‚æ•°ä¸æ¨¡å‹è½½å…¥</p><p>ncnn æºç åˆ†æ_2 Extractor</p><p>ncnn æºç åˆ†æ_3 æ¨¡å‹é‡åŒ–åŸç†</p><p>ncnn æºç åˆ†æ_4 æ¨¡å‹é‡åŒ–æºç </p><p>ncnn æºç åˆ†æ_5 æ·»åŠ  layer</p><p>ncnn æºç åˆ†æ_6 å±‚åˆ†æ</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>mxnet2ncnn</title>
    <link href="/2020/09/17/mxnet2ncnn/"/>
    <url>/2020/09/17/mxnet2ncnn/</url>
    
    <content type="html"><![CDATA[<p>mxnet2ncnn éƒ¨ç½²æ–¹æ¡ˆ</p><a id="more"></a><h4 id="1-ä¸‹è½½å¹¶ç¼–è¯‘-ncnn-æ¡†æ¶"><a href="#1-ä¸‹è½½å¹¶ç¼–è¯‘-ncnn-æ¡†æ¶" class="headerlink" title="1. ä¸‹è½½å¹¶ç¼–è¯‘ ncnn æ¡†æ¶"></a>1. ä¸‹è½½å¹¶ç¼–è¯‘ ncnn æ¡†æ¶</h4><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> install xcode and protobuf</span><span class="hljs-meta">#</span><span class="bash"> install protobuf</span><span class="hljs-meta">$</span><span class="bash"> brew install protobuf</span><span class="hljs-meta">#</span><span class="bash"> build &amp; install ncnn</span><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> &lt;ncnn-root-dir&gt;</span><span class="hljs-meta">$</span><span class="bash"> mkdir -p build</span><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> build</span><span class="hljs-meta">$</span><span class="bash"> cmake -DNCNN_VULKAN=OFF ..</span><span class="hljs-meta">$</span><span class="bash"> make -j4</span><span class="hljs-meta">$</span><span class="bash"> make install</span></code></pre><h4 id="2-model-slim"><a href="#2-model-slim" class="headerlink" title="2. model slim"></a>2. model slim</h4><p>ä»å¦‚ä¸‹åœ°å€ä¸‹è½½ mobileface çš„æ–‡ä»¶ï¼š</p><p><a href="https://pan.baidu.com/s/1If28BkHde4fiuweJrbicVA"><strong>https://pan.baidu.com/s/1If28BkHde4fiuweJrbicVA</strong></a></p><p>è§£å‹å¯ä»¥å¾—åˆ°ä¸‰ä¸ªæ–‡ä»¶ï¼š  logã€model-0000.params å’Œ model-symbol.json</p><p>æ‰§è¡Œï¼š</p><pre><code class="hljs shell">python model_slim.py  --model  ../models/model-y1-test2/model,0</code></pre><p>æ­¤æ—¶ ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š../models/model-y1-test2/models-</p><h4 id="3-ä½¿ç”¨-mxnet2ncnn-å·¥å…·æ¥è½¬åŒ–æ¨¡å‹"><a href="#3-ä½¿ç”¨-mxnet2ncnn-å·¥å…·æ¥è½¬åŒ–æ¨¡å‹" class="headerlink" title="3. ä½¿ç”¨ mxnet2ncnn å·¥å…·æ¥è½¬åŒ–æ¨¡å‹"></a>3. ä½¿ç”¨ mxnet2ncnn å·¥å…·æ¥è½¬åŒ–æ¨¡å‹</h4><pre><code class="hljs shell">cd ncnn/build/tools/mxnet./mxnet2ncnn models-symbol.json models-0000.params mobilefacenet.param mobilefacenet.bin</code></pre><p>ç”Ÿæˆä¸¤ä¸ªæ–°çš„æ–‡ä»¶ mobilefacenet.param ï¼Œmobilefacenet.binï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éƒ¨ç½² ncnn éœ€è¦ç”¨åˆ°çš„æ–‡ä»¶ã€‚</p><h4 id="4-é¡¹ç›®æ„å»º"><a href="#4-é¡¹ç›®æ„å»º" class="headerlink" title="4.  é¡¹ç›®æ„å»º"></a>4.  é¡¹ç›®æ„å»º</h4><pre><code class="hljs crystal">arcface æˆ‘ä»¬çš„ä¸»é¡¹ç›®æ–‡ä»¶image  å­˜å‚¨æµ‹è¯•å›¾åƒæ–‡ä»¶models  å­˜å‚¨æˆ‘ä»¬çš„è½¬æ¢å®Œæˆçš„ äººè„¸æ£€æµ‹ã€äººè„¸è¯†åˆ«æ¨¡å‹ncnn  å­˜æ”¾ ncnn çš„ <span class="hljs-class"><span class="hljs-keyword">lib</span> å’Œ <span class="hljs-title">include</span> æ–‡ä»¶</span>Makefile æ–‡ä»¶</code></pre><p>å…¶ä¸­ arcface å­˜æ”¾ç›¸å…³æ–‡ä»¶å’Œ Makefile æ–‡ä»¶ã€‚è¿›å…¥ä¸»é¡¹ç›®æ–‡ä»¶ make ç„¶åæ‰§è¡Œ ./main å³å¯ã€‚</p><p>éœ€è¦é‡ç‚¹ç ”ç©¶çš„æ–‡ä»¶ï¼šï¼ˆ1ï¼‰ model_slim.py   ï¼ˆ2ï¼‰arcface ä¸‹çš„ å››ä¸ª æ–‡ä»¶ arcface/mtcnn/base/Makefile æ–‡ä»¶ã€‚</p><p>â€‹    ncnnåªæ˜¯ä¸€ä¸ªå‰å‘æ¨æ–­çš„åº“ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å¿«é€Ÿå®Œæˆå‰å‘ä¼ æ’­ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†å›¾ç‰‡ä¼ ç»™MTCNNï¼Œ åˆ†åˆ«ç»è¿‡ä¸‰ä¸ªç½‘ç»œPnetã€RNetã€ONetï¼Œç„¶åäº§ç”Ÿå¾…æ£€æµ‹çš„äººè„¸ï¼Œ ç„¶åå†å°†å¾…æ£€æµ‹çš„äººè„¸é€ç»™facentï¼Œ æœ€åæ¯”å¯¹äº§ç”Ÿçš„128Då‘é‡çš„è·ç¦»ã€‚è¿™æ ·å°±å¯ä»¥å®Œæˆäººè„¸çš„è¯†åˆ«ã€‚å…·ä½“ç»“åˆä»£ç æ¥è¯´ï¼š</p><p>ä¸‹é¢è¿™ä¸ªå‡½æ•°æ˜¯MTCNNçš„ä¸»è¦çš„æ¥å£æ–‡ä»¶ï¼š</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;FaceInfo&gt; <span class="hljs-title">MtcnnDetector::Detect</span><span class="hljs-params">(ncnn::Mat img)</span></span>&#123;    <span class="hljs-keyword">int</span> img_w = img.w;  <span class="hljs-comment">// è·å– å®½åº¦</span>    <span class="hljs-keyword">int</span> img_h = img.h; <span class="hljs-comment">// è·å–é«˜åº¦</span>    <span class="hljs-built_in">vector</span>&lt;FaceInfo&gt; pnet_results = Pnet_Detect(img);  <span class="hljs-comment">// è®©å›¾ç‰‡ç»è¿‡PNet</span>    doNms(pnet_results, <span class="hljs-number">0.7</span>, <span class="hljs-string">&quot;union&quot;</span>);  <span class="hljs-comment">// å¯¹è¾“å‡ºçš„ç»“æœè¿›è¡Œnms</span>    refine(pnet_results, img_h, img_w, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// refineï¼ŒæŠŠç»“æœæ”¾åœ¨ pnet_results ä¸­</span>    <span class="hljs-built_in">vector</span>&lt;FaceInfo&gt; rnet_results = Rnet_Detect(img, pnet_results);  <span class="hljs-comment">// è®©å›¾ç‰‡ç»è¿‡ RNet</span>    doNms(rnet_results, <span class="hljs-number">0.7</span>, <span class="hljs-string">&quot;union&quot;</span>); <span class="hljs-comment">// å¯¹è¾“å‡ºç»“æœè¿›è¡Œ nms</span>    refine(rnet_results, img_h, img_w, <span class="hljs-literal">true</span>); <span class="hljs-comment">// refineï¼Œ æŠŠç»“æœæ”¾åœ¨ Rnet_resultsä¸­</span>    <span class="hljs-built_in">vector</span>&lt;FaceInfo&gt; onet_results = Onet_Detect(img, rnet_results);  <span class="hljs-comment">// æŠŠå›¾ç‰‡ ç»è¿‡ Onet</span>    refine(onet_results, img_h, img_w, <span class="hljs-literal">false</span>);  <span class="hljs-comment">// refine</span>    doNms(onet_results, <span class="hljs-number">0.7</span>, <span class="hljs-string">&quot;min&quot;</span>);  <span class="hljs-comment">//  å¯¹æœ€åçš„ç»“æœè¿›è¡Œrefine</span>    Lnet_Detect(img, onet_results);  <span class="hljs-comment">// åå¤„ç†</span>    <span class="hljs-keyword">return</span> onet_results;  <span class="hljs-comment">// è¿”å›æ£€æµ‹ç»“æœ</span>&#125;</code></pre><p>è¿™ä¸ªæ–‡ä»¶æ˜¯ facenet çš„å‰å‘æ¨æ–­æ¡†æ¶ï¼š</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; <span class="hljs-title">Arcface::getFeature</span><span class="hljs-params">(ncnn::Mat img)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; feature;    ncnn::Mat in = resize(img, <span class="hljs-number">112</span>, <span class="hljs-number">112</span>); <span class="hljs-comment">// å°†äººè„¸è°ƒæ•´åˆ° 112x112</span>    in = bgr2rgb(in); <span class="hljs-comment">// é€šé“å˜å¹»</span>    ncnn::Extractor ex = net.create_extractor();  <span class="hljs-comment">// è®¾ç½®æå–å™¨</span>    ex.set_light_mode(<span class="hljs-literal">true</span>);      ex.input(<span class="hljs-string">&quot;data&quot;</span>, in);  <span class="hljs-comment">// è®©å›¾ç‰‡è¿›å…¥ç½‘ç»œ</span>    ncnn::Mat out;    ex.extract(<span class="hljs-string">&quot;fc1&quot;</span>, out);  <span class="hljs-comment">// æå–å‡º fc1 å±‚çš„ç»“æœ</span>    feature.resize(<span class="hljs-keyword">this</span>-&gt;feature_dim);  <span class="hljs-comment">// ç»“æœresize</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>-&gt;feature_dim; i++)         feature[i] = out[i];      normalize(feature); <span class="hljs-comment">// æ­£åˆ™åŒ–ç‰¹å¾</span>    <span class="hljs-keyword">return</span> feature; <span class="hljs-comment">// è¿”å›ç‰¹å¾</span>&#125;</code></pre><p>ä¸‹é¢è¿™ä¸ªæ–‡ä»¶æ˜¯ main.cppï¼Œ ç°åœ¨çœ‹æ¥éå¸¸ç®€å•äº†</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span></span><span class="hljs-function"></span>&#123;    Mat img1;    Mat img2;    img1 = imread(<span class="hljs-string">&quot;../image/gyy1.jpeg&quot;</span>);  <span class="hljs-comment">// è¯»å–å›¾ç‰‡</span>    img2 = imread(<span class="hljs-string">&quot;../image/gyy2.jpeg&quot;</span>);    ncnn::Mat ncnn_img1 = ncnn::Mat::from_pixels(img1.data, ncnn::Mat::PIXEL_BGR, img1.cols, img1.rows);  <span class="hljs-comment">// è½¬æ¢ä¸º ncnn æ ¼å¼</span>    ncnn::Mat ncnn_img2 = ncnn::Mat::from_pixels(img2.data, ncnn::Mat::PIXEL_BGR, img2.cols, img2.rows);    <span class="hljs-comment">// æ£€æµ‹</span>    <span class="hljs-function">MtcnnDetector <span class="hljs-title">detector</span><span class="hljs-params">(<span class="hljs-string">&quot;../../models&quot;</span>)</span></span>;     <span class="hljs-built_in">vector</span>&lt;FaceInfo&gt; results1 = detector.Detect(ncnn_img1);    <span class="hljs-built_in">vector</span>&lt;FaceInfo&gt; results2 = detector.Detect(ncnn_img2);    <span class="hljs-comment">// å¤„ç†æ£€æµ‹ç»“æœï¼Œå…¶å®å°±æ˜¯æå–å›¾ç‰‡</span>    ncnn::Mat det1 = preprocess(ncnn_img1, results1[<span class="hljs-number">0</span>]);    ncnn::Mat det2 = preprocess(ncnn_img2, results2[<span class="hljs-number">0</span>]);     <span class="hljs-function">Arcface <span class="hljs-title">arc</span><span class="hljs-params">(<span class="hljs-string">&quot;../../models&quot;</span>)</span></span>;    <span class="hljs-comment">// æå–ç‰¹å¾</span>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; feature1 = arc.getFeature(det1);    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">float</span>&gt; feature2 = arc.getFeature(det2);    <span class="hljs-comment">// ç‰¹å¾æ¯”è¾ƒ</span>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Similarity: &quot;</span> &lt;&lt; calcSimilar(feature1, feature2) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;;    imshow(<span class="hljs-string">&quot;det1&quot;</span>, ncnn2cv(det1));    imshow(<span class="hljs-string">&quot;det2&quot;</span>, ncnn2cv(det2));    waitKey(<span class="hljs-number">0</span>);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>ç§»åŠ¨ç«¯éƒ¨ç½²è¦ç‚¹</p><p>ä¸»è¦çš„è§£å†³æ–¹æ¡ˆï¼šå°†MTCNN å’Œ facenet çš„æ¥å£ç»„ç»‡æˆä¸ºä¸€ä¸ªäººè„¸ face_reg çš„æ¥å£ï¼Œç„¶åä½¿ç”¨ objective-c è°ƒç”¨è¯¥C++ ä»£ç ï¼Œç„¶ååœ¨ä½¿ç”¨swift è°ƒç”¨ objective-c çš„ä»£ç ã€‚ä¹‹æ‰€ä»¥è¿™æ ·åšæ˜¯å› ä¸ºï¼Œswift ä¸èƒ½è°ƒç”¨ C++ å‘€ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>3Dç‚¹äº‘ç»¼è¿°</title>
    <link href="/2020/09/17/3D%E7%82%B9%E4%BA%91%E7%BB%BC%E8%BF%B0/"/>
    <url>/2020/09/17/3D%E7%82%B9%E4%BA%91%E7%BB%BC%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>æ¢ç´¢</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å›¾åƒå¤„ç†åŸºç¡€çŸ¥è¯†</title>
    <link href="/2020/09/17/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <url>/2020/09/17/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<h3 id="1-åŸºæœ¬"><a href="#1-åŸºæœ¬" class="headerlink" title="1. åŸºæœ¬"></a>1. åŸºæœ¬</h3><p>ğŸŒŸ <strong>ç®€è¿° opencv ä¸­æœ‰å“ªäº›æ¨¡å—?</strong></p><ul><li><p>core: <strong>æ ¸å¿ƒåŠŸèƒ½æ¨¡å—(1)</strong>ï¼ŒåŒ…æ‹¬ opnecv åŸºç¡€æ•°æ®ç»“æ„ï¼ŒåŠ¨æ€æ•°æ®ç»“æ„ï¼Œç»˜å›¾å‡½æ•°ï¼Œæ•°ç»„æ“ä½œå‡½æ•°ç­‰</p></li><li><p>imgprocï¼š<strong>å›¾åƒå¤„ç†æ¨¡å—(2)</strong>ï¼ŒåŒ…æ‹¬çº¿æ€§éçº¿æ€§å›¾åƒæ»¤æ³¢ï¼Œ å›¾åƒå‡ ä½•å˜æ¢ï¼Œç›´æ–¹å›¾ç›¸å…³ï¼Œç‰¹å¾æ£€æµ‹ï¼Œç›®æ ‡æ£€æµ‹ã€‚</p></li><li><p>highguiï¼š é«˜å±‚ GUI ç”¨æˆ·ç•Œé¢ï¼Œ åŒ…å«åª’ä½“è¾“å…¥å’Œè¾“å‡ºï¼Œå›¾åƒå’Œè§†é¢‘ç¼–ç ï¼Œ å›¾å½¢äº¤äº’ç•Œé¢çš„æ¥å£ç­‰</p></li><li><p>calib3dï¼š<strong>ä¸»è¦æ˜¯ç›¸æœºæ ¡å‡†å’Œä¸‰ç»´é‡å»º(3)</strong>ç›¸å…³çš„å†…å®¹ï¼Œ åŒ…æ‹¬**åŸºæœ¬å¤šè§†è§’å‡ ä½•ç®—æ³•ï¼Œ å•ä¸ªç«‹ä½“æ‘„åƒå¤´æ ‡å®šï¼Œç‰©ä½“å§¿æ€ä¼°è®¡ï¼Œ ç«‹ä½“ç›¸ä¼¼æ€§ç®—æ³•ï¼Œ 3Dä¿¡æ¯é‡å»ºç­‰ã€‚</p></li><li><p>features2d:  <strong>2DåŠŸèƒ½æ¡†æ¶ï¼ŒåŒ…å«ç‰¹å¾æ£€æµ‹å’Œæè¿°(4)</strong>ï¼Œç‰¹å¾æ£€æµ‹é€šç”¨æ¥å£ï¼Œæè¿°ç¬¦æå–å™¨é€šç”¨æ¥å£ï¼Œå…³é”®ç‚¹ç»˜åˆ¶å‡½æ•°å’ŒåŒ¹é…åŠŸèƒ½ç»˜åˆ¶å‡½æ•°ç­‰</p></li><li><p>flann: é«˜ç»´è¿‘ä¼¼è¿‘é‚»å¿«é€Ÿæœç´¢ç®—æ³•åº“ ml æœºå™¨å­¦ä¹ æ¨¡å—       objectectï¼š ç›®æ ‡æ£€æµ‹æ¨¡å—ï¼ŒåŒ…å«çº§è”åˆ†ç±»å’Œlatent SVMä¸¤ä¸ªéƒ¨åˆ†</p></li><li><p>photo: åŒ…å«<strong>å›¾åƒä¿®å¤å’Œå›¾åƒå»å™ªä¸¤éƒ¨åˆ†(5)</strong>    <strong>stiching</strong>ï¼š å›¾åƒæ‹¼æ¥æ¨¡å—</p></li><li><p>contrib: ä¸»è¦åŒ…å«æœ€è¿‘æ·»åŠ çš„ä¸ç¨³å®šåŠŸèƒ½ã€‚   <strong>lagacy</strong>: ä¸€äº›åºŸå¼ƒçš„ä»£ç åº“      nonfreeï¼šä¸€äº›å…·æœ‰ä¸“åˆ©çš„ç®—æ³•</p></li><li><p>gpu<strong>ï¼š è¿ç”¨ GPU åŠ é€Ÿæ¨¡å—     </strong>ocl: è¿ç”¨ OpenCL åŠ é€Ÿçš„æ¨¡å—</p></li><li><p>ml: <strong>æœºå™¨å­¦ä¹ ç®—æ³•åŒ…(6)</strong></p></li></ul><h3 id="2-å›¾åƒçš„è¯»å–å’Œæ˜¾ç¤ºä¸-Mat-çš„ç†è§£"><a href="#2-å›¾åƒçš„è¯»å–å’Œæ˜¾ç¤ºä¸-Mat-çš„ç†è§£" class="headerlink" title="2. å›¾åƒçš„è¯»å–å’Œæ˜¾ç¤ºä¸ Mat çš„ç†è§£"></a>2. å›¾åƒçš„è¯»å–å’Œæ˜¾ç¤ºä¸ Mat çš„ç†è§£</h3><p>ğŸŒŸ opencvé‡Œé¢ä¸ºå•¥æ˜¯ bgr å­˜å‚¨å›¾ç‰‡è€Œä¸æ˜¯äººä»¬å¸¸å¬çš„ rgb ?</p><p>â€‹    OpenCV<strong>åœ¨ 1999 å¹´ç”± Intel å»ºç«‹ï¼Œå½“æ—¶ä¸»æµçš„æ‘„åƒå¤´åˆ¶é€ å•†å’Œè½¯ä»¶ä¾›åº”å•†æä¾›çš„æ‘„åƒå¤´é‡‡é›†çš„å›¾åƒçš„é€šé“æ’åˆ—é¡ºåºä¸ºBGR</strong>ï¼Œå¦å¤–<strong>å¯¹äºå›¾ç‰‡ï¼Œä½å›¾BMPæ˜¯æœ€ç®€å•çš„ï¼Œä¹Ÿæ˜¯Windowsæ˜¾ç¤ºå›¾ç‰‡çš„åŸºæœ¬æ ¼å¼ï¼Œå…¶æ–‡ä»¶æ‰©å±•åä¸º*.BMP</strong>ã€‚åœ¨Windowsä¸‹ï¼Œä»»ä½•æ ¼å¼çš„å›¾ç‰‡æ–‡ä»¶ï¼ˆåŒ…æ‹¬è§†é¢‘æ’­æ”¾ï¼‰éƒ½è¦è½¬åŒ–ä¸ºä½å›¾æ‰èƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œå„ç§æ ¼å¼çš„å›¾ç‰‡æ–‡ä»¶ä¹Ÿéƒ½æ˜¯åœ¨ä½å›¾æ ¼å¼çš„åŸºç¡€ä¸Šé‡‡ç”¨ä¸åŒçš„å‹ç¼©ç®—æ³•ç”Ÿæˆçš„ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯<strong>ä½å›¾ BMP çš„æ ¼å¼å°±æ˜¯BGR</strong>ã€‚</p><p>ğŸŒŸ <strong>opencv å¦‚ä½•è¯»å–å†…å­˜å›¾ç‰‡ ? å¦‚ä½•å°† buffer ç±»å‹è½¬åŒ–ä¸º mat ç±»å‹ ï¼Ÿ</strong></p><p>å¯ä»¥ä½¿ç”¨ imdecode å‡½æ•°, å¯ä»¥å°†å­—èŠ‚æµæ•°æ® buf è§£ç æˆæ•°ç»„å½¢å¼çš„å›¾åƒ</p><pre><code class="hljs cpp"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt; img_data;<span class="hljs-function"><span class="hljs-built_in">std</span>::ifstream <span class="hljs-title">file_contents</span><span class="hljs-params">(<span class="hljs-string">&quot;example.png&quot;</span>)</span></span>;file_contents &gt;&gt; <span class="hljs-built_in">std</span>::noskipws;<span class="hljs-built_in">std</span>::copy(<span class="hljs-built_in">std</span>::istream_iterator&lt;<span class="hljs-keyword">char</span>&gt;(file_contents), <span class="hljs-built_in">std</span>::istream_iterator&lt;<span class="hljs-keyword">char</span>&gt;(), <span class="hljs-built_in">std</span>::back_inserter(img_data));Mat matrixJprg = imdecode(Mat(img_data), IMREAD_COLOR);imwrite(<span class="hljs-string">&quot;result.jpg&quot;</span>, matrixJprg);</code></pre><p>ğŸŒŸ <strong>opencv å¦‚ä½•è¯»å– png æ ¼å¼çš„å›¾ç‰‡ï¼Ÿ</strong>  </p><p>ä½¿ç”¨ imread() ç›´æ¥è¯»å–å³å¯ (pngä¸ºæ— æŸå‹ç¼©ï¼Œ jpgä¸ºæœ‰æŸå‹ç¼©)</p><p>â€‹      <strong><code>cv::Mat srcImg = cv:imread(const string&amp;filename, int flags)</code></strong></p><p>å…¶ä¸­ flags å¯ä»¥å–ä»¥ä¸‹å€¼:</p><p>â€‹    <code>cv::IMREAD_COLOR</code> ä¸‰é€šé“å›¾åƒ   <code>cv::IMREAD_GRAYSCALE</code>  å•é€šé“å›¾åƒ</p><p>â€‹    <code>cv::IMREAD_ANYCOLOR</code> é€šé“æ•°ä¸ºæ–‡ä»¶å®é™…é€šé“æ•°(ä¸è¶…è¿‡3)</p><p>â€‹    <strong><code>cv::IMREAD_ANYDEPTH</code> å…è®¸åŠ è½½è¶…è¿‡ 8bit æ·±åº¦</strong>  </p><p>â€‹    <code>cv::IMREAD_UNCHANGED</code>  é€šé“æ•°ä¸ºæ–‡ä»¶å®é™…é€šé“æ•°ï¼Œä¸”å…è®¸è¶…è¿‡ 8 bit æ·±åº¦</p><p>ğŸŒŸ <strong>è§£é‡Šä¸‹ raw å›¾åƒå’Œ rgb å›¾åƒçš„åŒºåˆ« ï¼Ÿ</strong></p><p>â€‹    <strong>Raw å›¾åƒå°±æ˜¯ CMOS æˆ–è€… CCD å›¾åƒæ„Ÿåº”å™¨å°†æ•æ‰åˆ°çš„å…‰æºä¿¡å·è½¬åŒ–ä¸ºæ•°å­—ä¿¡å·çš„åŸå§‹æ•°æ®ã€‚RAW æ–‡ä»¶æ˜¯ä¸€ç§è®°å½•äº†æ•°ç ç›¸æœºä¼ æ„Ÿå™¨çš„åŸå§‹ä¿¡æ¯ï¼ŒåŒæ—¶è®°å½•äº†ç”±ç›¸æœºæ‹æ‘„æ‰€äº§ç”Ÿçš„ä¸€äº›åŸæ•°æ®(Metadataï¼Œå¦‚ISOçš„è®¾ç½®ã€å¿«é—¨é€Ÿåº¦ã€å…‰åœˆå€¼ã€ç™½å¹³è¡¡ç­‰)çš„æ–‡ä»¶ã€‚RAWæ˜¯æœªç»å¤„ç†ã€ä¹Ÿæœªç»å‹ç¼©çš„æ ¼å¼ï¼Œå¯ä»¥æŠŠ RAW æ¦‚å¿µåŒ–ä¸ºâ€œåŸå§‹å›¾åƒç¼–ç æ•°æ®â€æˆ–æ›´å½¢è±¡çš„ç§°ä¸ºâ€œæ•°å­—åº•ç‰‡â€</strong>ã€‚</p><p>â€‹    ä¼˜åŠ¿: RAWæ–‡ä»¶å‡ ä¹æ˜¯æœªç»è¿‡å¤„ç†è€Œç›´æ¥ä» CCD æˆ– CMOS ä¸Šå¾—åˆ°çš„ä¿¡æ¯ï¼Œé€šè¿‡åæœŸå¤„ç†ï¼Œæ‘„å½±å¸ˆèƒ½å¤Ÿæœ€å¤§é™åº¦åœ°å‘æŒ¥è‡ªå·±çš„è‰ºæœ¯æ‰åã€‚  RAW æ–‡ä»¶å¹¶æ²¡æœ‰ç™½å¹³è¡¡è®¾ç½®ï¼Œä½†æ˜¯çœŸå®çš„æ•°æ®ä¹Ÿæ²¡æœ‰è¢«æ”¹å˜ï¼Œå°±æ˜¯è¯´ä½œè€…å¯ä»¥ä»»æ„çš„è°ƒæ•´è‰²æ¸©å’Œç™½å¹³è¡¡ï¼Œå¹¶ä¸”æ˜¯ä¸ä¼šæœ‰å›¾åƒè´¨é‡æŸå¤±çš„ã€‚</p><p>â€‹    RGB ç»“æ„çš„æ„æ€å°±æ˜¯ï¼Œå›¾ç‰‡æ˜¯ç”± 1 ä¸ªä¸ªåƒç´ ç‚¹çš„æ•°æ®åºåˆ—ç»„æˆï¼Œæ¯ä¸ªåƒç´ çš„æ•°æ®ç”±RGBå„ä¸ªè‰²å€¼ç»„æˆã€‚JPG è™½ç„¶æœ‰å‹ç¼©ç®—æ³•ï¼Œä½†æ˜¯å‹ç¼©å‰çš„æ•°æ®ä¾ç„¶æ˜¯åŸºäº RGB ç»“æ„è¿›è¡Œçš„ã€‚ã€€ã€€</p><p>ğŸŒŸ <strong>opencvé‡Œé¢ Mat æœ‰å“ªäº›æ„é€ å‡½æ•°ï¼Ÿ</strong></p><p><strong>ä¸»è¦åˆ†ä¸ºä¸‰ç§:</strong></p><p>(1) <strong>é»˜è®¤æ„é€ å‡½æ•°</strong>   <code>cv::Mat</code></p><p>(2) <strong>æŒ‡å®šç±»å‹ã€å¤§å°ã€ç»´åº¦ä»¥åŠåˆå€¼çš„ æ„é€ å‡½æ•°</strong>  <code>cv::Mat(int rows, int cols, int type)   cv::Mat(int ndims, const int* sizes, int type)</code></p><p>(3) <strong>å¤åˆ¶æ„é€ å‡½æ•°</strong>  <code>cv::Mat(const Mat&amp;mat)</code></p><p>ğŸŒŸ <strong>opencv éå†åƒç´ çš„æ–¹å¼ ï¼Ÿ</strong></p><p><strong>1.</strong> <strong>æ•°ç»„éå†   <code>img.at&lt;typename&gt;(i,j)    img.data[index]</code></strong></p><pre><code class="hljs cpp">(<span class="hljs-number">1</span>) uchar b1 = image.at&lt;Vec3b&gt;(i,j)[<span class="hljs-number">0</span>](<span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; height; i++)&#123;        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; width; j++)&#123;            <span class="hljs-keyword">int</span> index = i * width + j;    <span class="hljs-keyword">int</span> b1 = (<span class="hljs-keyword">int</span>)backImg.data[<span class="hljs-number">3</span> * index + <span class="hljs-number">0</span>];</code></pre><p><strong>2.</strong> <strong>è¿­ä»£å™¨éå†</strong></p><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it = img.begin&lt;Vec3b&gt;(); it != img.end&lt;Vec3b&gt;(); it++)    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k=<span class="hljs-number">0</span>; k&lt;<span class="hljs-number">3</span>; k++)&#123;        (*it)[k] = ...    &#125;</code></pre><p><strong>3.</strong> <strong>æŒ‡é’ˆéå†</strong></p><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i &lt; rows; i++)&#123;    uchar *p = img.ptr&lt;uchar&gt;(i);</code></pre><p><strong>4.</strong>æ ¸å¿ƒå‡½æ•°LUT</p><p>LUTæ˜¯æœ€è¢«æ¨èçš„ç”¨äºå®ç°æ‰¹é‡å›¾åƒå…ƒç´ æŸ¥æ‰¾å’Œæ›´æ”¹æ“ä½œå›¾åƒæ–¹æ³•ã€‚åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„å€¼ï¼Œå°†å…¶æ›¿æ¢æˆå…¶ä»–çš„å€¼æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„æ“ä½œï¼ŒOpenCV æä¾›é‡Œä¸€ä¸ªå‡½æ•°ç›´æ¥å®ç°è¯¥æ“ä½œï¼Œå¹¶ä¸éœ€è¦è‡ªå·±æ‰«æå›¾åƒï¼Œå°±æ˜¯: operationsOnArrays:LUT() <lut>ï¼Œä¸€ä¸ªåŒ…å«äºcore moduleçš„å‡½æ•°ã€‚é¦–å…ˆæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªmatå‹ç”¨äºæŸ¥è¡¨</lut></p><pre><code class="hljs cpp">operationsOnArrays:LUT() &lt;lut&gt;ï¼Œä¸€ä¸ªåŒ…å«äºcore <span class="hljs-keyword">module</span>çš„å‡½æ•°ã€‚é¦–å…ˆæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªmatå‹ç”¨äºæŸ¥è¡¨    <span class="hljs-function">Mat <span class="hljs-title">lookUpTable</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">256</span>, CV_8U)</span></span>;    uchar* p = lookUpTable.data;     <span class="hljs-keyword">for</span>( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">256</span>; ++i)        p[i] = table[i];</code></pre><p>ç„¶åæˆ‘ä»¬è°ƒç”¨å‡½æ•° (I æ˜¯è¾“å…¥ J æ˜¯è¾“å‡º):</p><pre><code class="hljs cpp">LUT(I, lookUpTable, J);</code></pre><p>åœ¨ä»¥ä¸Šå››ç§å›¾åƒéå†æ–¹æ³•ä¸­ï¼Œä»æ•ˆç‡æ¥çœ‹ä½¿ç”¨ OpenCV <strong>å†…ç½®å‡½æ•° LUT</strong> å¯ä»¥è·å¾—æœ€å¿«çš„é€Ÿåº¦ï¼Œè¿™æ˜¯å› ä¸ºOpenCVåº“å¯ä»¥é€šè¿‡è‹±ç‰¹å°”çº¿ç¨‹æ¶æ„å¯ç”¨å¤šçº¿ç¨‹ã€‚<strong>å…¶æ¬¡ï¼ŒæŒ‡é’ˆéå†æœ€å¿«ï¼Œè¿­ä»£å™¨éå†æ¬¡ä¹‹ï¼Œatæ–¹æ³•éå†æœ€æ…¢</strong>ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæœ‰åœ¨å¯¹ä»»æ„ä½ç½®çš„åƒç´ è¿›è¡Œè¯»å†™æ—¶æ‰è€ƒè™‘atæ–¹æ³•ã€‚</p><p>ğŸŒŸ  <strong>è¯´è¯´ opencv ä¸­ Mat çš„æ·±æ‹·è´å’Œæµ…æ‹·è´?</strong></p><p>ç­”: ä½¿ç”¨ Mat çš„æ‹·è´æ„é€ å‡½æ•°æˆ–è€…èµ‹å€¼è¿ç®—ç¬¦ï¼Œ æ¯”å¦‚:</p><p>   Mat A, C;</p><p>   A = imread(â€œ1.jpgâ€)</p><p>   Mat B(A);</p><p>   C = A;</p><p>A, B, C å…¨éƒ¨æŒ‡å‘åŒä¸€ä¸ªå›¾åƒçŸ©é˜µï¼Œ æ”¹å˜å…¶ä¸­ä¸€ä¸ªï¼Œ å¦å¤–ä¸¤ä¸ªä¹Ÿéƒ½ä¼šè·Ÿç€æ”¹å˜</p><p><strong>ä½¿ç”¨ clone() æˆ–è€… copyTo() åˆ™ä¼šå¦å¤–å¼€è¾Ÿå›¾åƒå­˜å‚¨ç©ºé—´ï¼Œç›¸äº’ä¹‹é—´æ²¡æœ‰å½±å“</strong>ï¼Œ ä¾‹å¦‚:</p><p>   Mat F = A.clone();</p><p>   Mat G;</p><p>   A.copyTo(G);</p><p> ç°åœ¨æ”¹å˜ F åˆ™ä¸ä¼šå¯¹G æœ‰å½±å“</p><p>ğŸŒŸ <strong>opencv ä¸­ CV_8UC3 ä»£è¡¨ä»€ä¹ˆæ„æ€? opencv ä¸­çš„ Scalar ç±»?</strong></p><p>- 8 ä»£è¡¨ä½¿ç”¨8ä½çš„ unsigned char å‹ï¼Œ æ¯ä¸ªåƒç´ ç”±ä¸‰ä¸ªå…ƒç´ ç»„æˆä¸‰é€šé“ï¼Œ æ ¼å¼ä¸º: CV_[ä½æ•°][å¸¦ç¬¦å·ä¸å¦][ç±»å‹å‰ç¼€]C[é€šé“æ•°]</p><p>- <strong>Scalar() è¡¨ç¤ºå…·æœ‰4ä¸ªå…ƒç´ çš„æ•°ç»„</strong>ï¼Œ åœ¨ opencv ä¸­è¢«å¤§é‡è¢«ç”¨äºä¼ é€’åƒç´ å€¼ï¼Œ æ¯”å¦‚ GRB é¢œè‰²å€¼ã€‚ å¦‚æœç”¨ä¸åˆ°ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œ åˆ™ä¸éœ€è¦å†™å‡ºæ¥ï¼Œ è‹¥åªå†™ä¸‰ä¸ªå‚æ•°ï¼Œ åˆ™opencv ä¼šè®¤ä¸ºåªéœ€è¦ä¼ é€’ä¸‰ä¸ªå‚æ•°ã€‚</p><p><strong>3. é¢œè‰²ç©ºé—´</strong></p><p>ğŸŒŸ <strong>ç®€è¿°å¸¸è§çš„é¢œè‰²ç³»ç»Ÿ?</strong></p><ul><li>RGB æ˜¯æœ€å¸¸è§çš„é¢œè‰²ç³»ç»Ÿï¼ŒåŸºäºé¢œè‰²çš„<strong>åŠ æ³•æ··è‰²åŸç†ï¼Œä»é»‘è‰²ä¸æ–­å åŠ Redï¼ŒGreenï¼ŒBlueçš„é¢œè‰²ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°ç™½è‰²å…‰</strong>ã€‚</li><li>HSV å’Œ HLS æŠŠé¢œè‰²åˆ†è§£æˆ<strong>è‰²è°ƒã€é¥±å’Œåº¦å’Œäº®åº¦/æ˜åº¦</strong>ï¼Œæè¿°é¢œè‰²æ›´åŠ è‡ªç„¶ï¼Œå¯ä»¥é€šè¿‡æŠ›å¼ƒæœ€åä¸€ä¸ªå…ƒç´ ä½¿ç®—æ³•å¯¹è¾“å…¥å›¾åƒçš„å…‰ç…§æ¡ä»¶ä¸æ•æ„Ÿ</li><li>YCrCb é¢œè‰²ç³»ç»Ÿåœ¨ JPEG å›¾åƒæ ¼å¼ä¸­å¹¿æ³›ä½¿ç”¨ã€‚</li><li>LAB: <strong>Lä¸ºäº®åº¦ï¼ŒAB ä¸ºä¸¤ç§ä¸åŒçš„è‰²åº¦, å‰è€…æ˜¯æ˜åº¦é€šé“ï¼Œåè€…æ˜¯è‰²å½©é€šé“ï¼Œå¯ä»¥åˆ†ç¦»è‰²åº¦å’Œäº®åº¦</strong>ã€‚</li></ul><p>ğŸŒŸ <strong>å›¾åƒè¶…åˆ†è¾¨ç‡é‡å»ºä¸­ï¼Œä¸ºä»€ä¹ˆåªä½¿ç”¨ YCrCb ä¸­çš„ Y é€šé“?</strong>  <strong>å‚è€ƒè®ºæ–‡: SRCNN</strong></p><p>â€‹    <strong>å›¾åƒè¢«è½¬åŒ–ä¸º YCbCr è‰²å½©ç©ºé—´ï¼Œå°½ç®¡è¯¥ç½‘ç»œåªä½¿ç”¨äº®åº¦é€šé“(Y)ã€‚ç„¶åï¼Œç½‘ç»œçš„è¾“å‡ºåˆå¹¶å·²æ’å€¼çš„ CbCr é€šé“ï¼Œè¾“å‡ºæœ€ç»ˆå½©è‰²å›¾åƒã€‚æˆ‘ä»¬é€‰æ‹©è¿™ä¸€æ­¥éª¤æ˜¯å› ä¸ºæˆ‘ä»¬æ„Ÿå…´è¶£çš„ä¸æ˜¯é¢œè‰²å˜åŒ–(å­˜å‚¨åœ¨ CbCr é€šé“ä¸­çš„ä¿¡æ¯)è€Œåªæ˜¯å…¶äº®åº¦(Y é€šé“);æ ¹æœ¬åŸå› åœ¨äºç›¸è¾ƒäºè‰²å·®ï¼Œäººç±»è§†è§‰å¯¹äº®åº¦å˜åŒ–æ›´ä¸ºæ•æ„Ÿã€‚</strong></p><p>ğŸŒŸ ç”¨ OpenCV å¯ä»¥æ–¹ä¾¿çš„å°†å½©è‰²å›¾ç‰‡è½¬ä¸ºç°åº¦å›¾ï¼Œå¦‚ cvtColor(imgColor, imgGray, CV_BGR2GRAY)ã€‚è¯·é—®è¿™é‡Œå½©è‰²åˆ°ç°åº¦çš„è½¬æ¢å…¬å¼æ˜¯ï¼š <strong>gray=0.299R+0.587G+0.114*B.</strong></p><p><strong>4. æ»¤æ³¢å™¨å’Œå·ç§¯</strong></p><p>ğŸŒŸ <strong>å¸¸ç”¨è¾¹ç¼˜æ£€æµ‹æœ‰å“ªäº›ç®—å­ï¼Œå„æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ</strong></p><p><strong>å¸¸è§çš„è¾¹ç¼˜æ£€æµ‹ç®—å­æœ‰: Sobel ç®—å­ã€æ‹‰æ™®æ‹‰æ–¯ç®—å­ã€canny ç®—å­ã€‚</strong></p><p><strong>sobel ç®—å­ï¼š</strong></p><p><img src="data:image/jpeg;base64,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" alt="å‚ç›´æ–¹å‘                   æ°´å¹³æ–¹å‘"></p><p>â€‹    Sobel ç®—å­æ˜¯ä¸€ä¸ªä¸»è¦<strong>ç”¨äºè¾¹ç¼˜æ£€æµ‹</strong>çš„ç¦»æ•£å¾®åˆ†ç®—å­ï¼Œç»“åˆäº†é«˜æ–¯å¹³æ»‘å’Œå¾®åˆ†æ±‚å¯¼ï¼Œç”¨æ¥è®¡ç®—å›¾åƒç°åº¦å‡½æ•°çš„è¿‘ä¼¼æ¢¯åº¦ã€‚åœ¨å›¾åƒçš„ä»»ä½•ä¸€ç‚¹ä½¿ç”¨æ­¤ç®—å­ï¼Œéƒ½ä¼šäº§ç”Ÿå¯¹é¥®çš„æ¢¯åº¦é€‚é‡æˆ–è€…å…¶æ³•çŸ¢é‡ã€‚æ³¨æ„ä¸€ä¸‹ï¼Œå½“å†…æ ¸å¤§å°ä¸º3æ—¶ï¼Œsobel ä¼šäº§ç”Ÿæ¯”è¾ƒæ˜æ˜¾çš„è¯¯å·®ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œopencv æä¾›äº† scharr å‡½æ•°ï¼Œ ä½†æ˜¯è¯¥å‡½æ•°åªèƒ½ä½œç”¨äºå¤§å°ä¸º3 çš„å†…æ ¸ã€‚è¯¥å‡½æ•°è¿ç®—å’Œsobel å‡½æ•°ä¸€æ ·å¿«ï¼Œä½†æ˜¯ç»“æœæ›´åŠ å‡†ç¡®ã€‚</p><p><strong>æ‹‰æ™®æ‹‰æ–¯ç®—å­:</strong></p><p><img src="data:image/jpeg;base64,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" alt="img"></p><p><strong>Canny ç®—å­:</strong></p><p>â€‹    Canny <strong>è¾¹ç¼˜æ£€æµ‹ç®—å­</strong>æ˜¯ John F.Canny äº 1986 å¹´å¼€å‘å‡ºæ¥çš„ä¸€ä¸ªå¤šçº§è¾¹ç¼˜æ£€æµ‹ç®—æ³•ã€‚æ›´ä¸ºé‡è¦çš„æ˜¯ Canny åˆ›ç«‹äº†è¾¹ç¼˜æ£€æµ‹è®¡ç®—ç†è®ºï¼ˆComputational theory ofedge detectionï¼‰ï¼Œè§£é‡Šäº†è¿™é¡¹æŠ€æœ¯æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚Canny è¾¹ç¼˜æ£€æµ‹ç®—æ³•ä»¥ Canny çš„åå­—å‘½åï¼Œè¢«å¾ˆå¤šäººæ¨å´‡ä¸ºå½“ä»Šæœ€ä¼˜çš„è¾¹ç¼˜æ£€æµ‹çš„ç®—æ³•ã€‚</p><p>Canny è¾¹ç¼˜æ£€æµ‹çš„æ­¥éª¤ï¼š</p><p><strong>1.æ¶ˆé™¤å™ªå£°</strong>ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨<strong>é«˜æ–¯å¹³æ»‘æ»¤æ³¢å™¨å·ç§¯é™å™ª</strong>ã€‚ å¦‚ä¸‹æ˜¾ç¤ºäº†ä¸€ä¸ª size = 5 çš„é«˜æ–¯å†…æ ¸ç¤ºä¾‹:</p><p><img src="data:image/jpeg;base64,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" alt="img"></p><p><strong>2.è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ã€‚</strong> æ­¤å¤„ï¼ŒæŒ‰ç…§Sobelæ»¤æ³¢å™¨çš„æ­¥éª¤ã€‚</p><p>ã€€ã€€â… .è¿ç”¨ä¸€å¯¹å·ç§¯é˜µåˆ— (åˆ†åˆ«ä½œç”¨äº x å’Œ y æ–¹å‘):</p><p>â€‹      </p><p><img src="data:image/jpeg;base64,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AKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/gD/wCD5z/nF5/3et/76VQB+/n/AAa5f8oKf2Gv+7l//Wxf2gqAP6AKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP8ij/g6l/5Thftcf8AYufs3/8ArNHwgoA/1wtI/wCQZpX/AGDrD/0koA1aACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP8gb/g1z/5Tq/sN/T9pj/1jr9oOgD/AF+aACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAPiH/gpl/yjf8A+Cgv/Zkf7Vv/AKobx5QB/nY/8Gcf/KTb44/9mH/E7/1oP9mOgD//0v7+KACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD+AP/AIPnP+cXn/d63/vpVAH7+f8ABrl/ygp/Ya/7uX/9bF/aCoA/oAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/yKP+DqX/lOF+1x/wBi5+zf/wCs0fCCgD/XC0j/AJBmlf8AYOsP/SSgDVoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/yBv+DXP/lOr+w39P2mP/WOv2g6AP8AX5oAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA+If+CmX/KN/wD4KC/9mR/tW/8AqhvHlAH+dj/wZx/8pNvjj/2Yf8Tv/Wg/2Y6AP//T/v4oAKACgAoAKACgAoAKACgA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" alt="img"></p><p>ã€€ã€€â…¡. ä½¿ç”¨ä¸‹åˆ—å…¬å¼è®¡ç®—æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘:</p><p><img src="data:image/jpeg;base64,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" alt="img"></p><p>â€‹      æ¢¯åº¦æ–¹å‘è¿‘ä¼¼åˆ°å››ä¸ªå¯èƒ½è§’åº¦ä¹‹ä¸€(ä¸€èˆ¬ä¸º0, 45, 90, 135)</p><p> <strong>3.éæå¤§å€¼æŠ‘åˆ¶</strong>ã€‚ è¿™ä¸€æ­¥æ’é™¤éè¾¹ç¼˜åƒç´ ï¼Œ ä»…ä»…ä¿ç•™äº†ä¸€äº›ç»†çº¿æ¡(å€™é€‰è¾¹ç¼˜)ã€‚</p><p> <strong>4.æ»åé˜ˆå€¼</strong>ã€‚æœ€åä¸€æ­¥ï¼ŒCanny ä½¿ç”¨äº†æ»åé˜ˆå€¼ï¼Œæ»åé˜ˆå€¼éœ€è¦ä¸¤ä¸ªé˜ˆå€¼(é«˜é˜ˆå€¼å’Œä½é˜ˆå€¼):</p><p>ã€€ã€€â… . å¦‚æœæŸä¸€åƒç´ ä½ç½®çš„å¹…å€¼è¶…è¿‡ é«˜ é˜ˆå€¼, è¯¥åƒç´ è¢«ä¿ç•™ä¸ºè¾¹ç¼˜åƒç´ ã€‚</p><p>ã€€ã€€â…¡. å¦‚æœæŸä¸€åƒç´ ä½ç½®çš„å¹…å€¼å°äº ä½ é˜ˆå€¼, è¯¥åƒç´ è¢«æ’é™¤ã€‚</p><p>ã€€ã€€â…¢. å¦‚æœæŸä¸€åƒç´ ä½ç½®çš„å¹…å€¼åœ¨ä¸¤ä¸ªé˜ˆå€¼ä¹‹é—´,è¯¥åƒç´ ä»…ä»…åœ¨è¿æ¥åˆ°ä¸€ä¸ªé«˜äº é«˜ é˜ˆå€¼çš„åƒç´ æ—¶è¢«ä¿ç•™ã€‚</p><p> tipsï¼šå¯¹äºCannyå‡½æ•°çš„ä½¿ç”¨ï¼Œæ¨èçš„é«˜ä½é˜ˆå€¼æ¯”åœ¨ 2:1åˆ°3:1ä¹‹é—´ã€‚</p><p>ğŸŒŸ <strong>å¸¸ç”¨å»å™ªæ»¤æ³¢å™¨ ï¼Ÿ</strong></p><p><strong>å‡å€¼æ»¤æ³¢</strong>: æŠŠæ¯ä¸ªåƒç´ éƒ½ç”¨å‘¨å›´çš„8ä¸ªåƒç´ æ¥åšå‡å€¼æ“ä½œã€‚å¯ä»¥å¹³æ»‘å›¾åƒé€Ÿåº¦å¿«ï¼Œç®—æ³•ç®€å•ã€‚<strong>ä¸èƒ½å¾ˆå¥½åœ°ä¿æŠ¤å›¾åƒç»†èŠ‚ï¼Œåœ¨**</strong>å›¾åƒå»å™ªçš„åŒæ—¶ä¹Ÿç ´åäº†å›¾åƒçš„ç»†èŠ‚éƒ¨åˆ†ï¼Œä»è€Œä½¿å¾—å›¾åƒå˜æ¨¡ç³Šï¼Œä¸èƒ½å¾ˆå¥½çš„å»é™¤å™ªå£°<strong>**ã€‚</strong></p><p><strong>ä¸­å€¼æ»¤æ³¢</strong>: ä¸­å€¼æ»¤æ³¢æ˜¯ä¸€ç§å…¸å‹çš„éçº¿æ€§æ»¤æ³¢æŠ€æœ¯ï¼Œ <strong>åŸºæœ¬æ€æƒ³æ˜¯ç”¨åƒç´ ç‚¹çš„é‚»åŸŸç°åº¦å€¼çš„ä¸­å€¼æ¥æåˆ°åƒç´ ç‚¹çš„ç°åº¦å€¼ï¼Œè¯¥æ–¹æ³•åœ¨**</strong>å»é™¤è„‰å†²å™ªå£°ã€æ¤’ç›å™ªå£°çš„åŒæ—¶åˆèƒ½ä¿ç•™å›¾åƒçš„è¾¹ç¼˜ç»†èŠ‚**ã€‚ä½†å¯¹æ–¹å‘æ€§å¾ˆå¼ºçš„æŒ‡çº¹å›¾åƒè¿›è¡Œæ»¤æ³¢å¤„ç†æ—¶ï¼Œæœ‰å¿…è¦å¼•å…¥æ–¹å‘ä¿¡æ¯ï¼Œå³åˆ©ç”¨æŒ‡çº¹æ–¹å‘å›¾æ¥æŒ‡å¯¼ä¸­å€¼æ»¤æ³¢çš„è¿›è¡Œã€‚</p><p><strong>é«˜æ–¯æ»¤æ³¢ï¼š</strong>é«˜æ–¯æ»¤æ³¢æ˜¯å¯¹æ•´å¹…å›¾åƒè¿›è¡ŒåŠ æƒå¹³å‡çš„è¿‡ç¨‹ï¼Œ æ¯ä¸€ä¸ªåƒç´ ç‚¹çš„å€¼éƒ½ç”±å…¶æœ¬èº«å’Œé‚»åŸŸå†…çš„å…¶ä»–åƒç´ å€¼ç»è¿‡åŠ æƒå¹³å‡åå¾—åˆ°ã€‚ é«˜æ–¯æ»¤æ³¢çš„å…·ä½“æ“ä½œæ˜¯ç”¨ä¸€ä¸ªæ¨¡æ¿(æˆ–ç§°ä¸ºå·ç§¯) æ‰«æå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ ï¼Œ ç”¨æ¨¡æ¿ç¡®å®šçš„é¢†åŸŸå†…åƒç´ çš„åŠ æƒç°åº¦å€¼å»ä»£æ›¿æ¨¡æ¿çš„ä¸­å¿ƒåƒç´ ç‚¹çš„å€¼ã€‚</p><p><strong>åŒè¾¹æ»¤æ³¢å’Œä½¿ç”¨åŒè¾¹æ»¤æ³¢çš„åœºæ™¯**</strong>?<strong> åŒè¾¹æ»¤æ³¢æ˜¯ä¸€ç§éçº¿æ€§æ»¤æ³¢æ–¹æ³•ï¼Œ åŒæ—¶è€ƒè™‘äº†ç©ºåŸŸä¿¡æ¯å’Œç°åº¦ç›¸ä¼¼æ€§ï¼Œ</strong>è¾¾åˆ°ä¿è¾¹å»å™ªçš„ç›®çš„ï¼Œ å…·æœ‰ç®€å•ï¼Œéè¿­ä»£ï¼Œå±€éƒ¨çš„ç‰¹ç‚¹<strong>ã€‚ </strong>ç”¨åœ¨äºéœ€è¦ä¿ç•™è¾¹ç¼˜ä¿¡æ¯çš„å›¾åƒå»å™ª**ã€‚ç¼ºç‚¹æ˜¯ç”±äºåŒè¾¹æ»¤æ³¢ä¿è¯äº†è¾¹ç¼˜ä¿¡æ¯ï¼Œæ‰€ä»¥å…¶ä¿å­˜äº†è¿‡å¤šçš„é«˜é¢‘ä¿¡æ¯ï¼Œå¯¹äºå½©è‰²å›¾åƒçš„é«˜é¢‘å™ªå£°ï¼ŒåŒè¾¹æ»¤æ³¢ä¸èƒ½å¤Ÿå¹²å‡€çš„æ»¤å»ï¼Œåªèƒ½å¯¹äºä½é¢‘ä¿¡æ¯è¿›è¡Œè¾ƒå¥½çš„æ»¤æ³¢ã€‚</p><p>ğŸŒŸ <strong>ç®€è¿°ä¸€ä¸‹å›¾åƒå¤„ç†ä¸­çš„è†¨èƒ€å’Œè…èš€æ“ä½œ?</strong></p><p>â€‹    è…èš€å’Œè†¨èƒ€éƒ½æ˜¯å¯¹å›¾åƒçš„ç™½è‰²(é«˜äº®)éƒ¨åˆ†è€Œè¨€ã€‚è†¨èƒ€æ˜¯å›¾åƒä¸­çš„é«˜äº®éƒ¨åˆ†è¿›è¡Œè†¨èƒ€ï¼Œç±»ä¼¼äºé¢†åŸŸæ‰©å¼ ï¼Œæ•ˆæœå›¾æ‹¥æœ‰æ¯”åŸå›¾æ›´å¤§çš„é«˜äº®åŒºåŸŸï¼›è…èš€æ˜¯åŸå›¾çš„é«˜äº®éƒ¨åˆ†è¢«è…èš€ï¼Œç±»ä¼¼äºé¢†åŸŸè¢«èš•é£Ÿï¼Œæ•ˆæœå›¾æ‹¥æœ‰æ¯”åŸå›¾æ›´å°çš„é«˜äº®åŒºåŸŸã€‚</p><p>â€‹    ä»æ•°å­¦çš„è§’åº¦æ¥è¯´ï¼Œè†¨èƒ€å°±æ˜¯æ±‚å±€éƒ¨æœ€å¤§å€¼ï¼Œ å¹¶æŠŠè¿™ä¸ªå€¼èµ‹å€¼ç»™å‚è€ƒç‚¹æŒ‡å®šåƒç´ ï¼Œ è¿™æ ·ä¼šä½¿å›¾ä¸­Devé«˜äº®åŒºåŸŸé€æ¸å¢é•¿ï¼Œè…èš€ä¸ä¹‹ç›¸åã€‚</p><p>ğŸŒŸ  <strong>ç®€è¿°å¼€è¿ç®—/é—­è¿ç®—çš„æ“ä½œæµç¨‹å’Œä½¿ç”¨åœºæ™¯?</strong></p><p>â€‹    å¼€è¿ç®—å°±æ˜¯å…ˆè…èš€åè†¨èƒ€çš„è¿‡ç¨‹ã€‚å¯ä»¥ç”¨æ¥æ¶ˆé™¤å°ç‰©ä½“ï¼Œ åœ¨çº¤ç»†ç‚¹å¤„åˆ†ç¦»ç‰©ä½“ï¼Œå¹¶ä¸”åœ¨å¹³æ»‘è¾ƒå¤§ç‰©ä½“çš„è¾¹ç•Œçš„åŒæ—¶ä¸æ˜æ˜¾æ”¹å˜å…¶é¢ç§¯ã€‚</p><p>â€‹    é—­è¿ç®—å°±æ˜¯å…ˆè†¨èƒ€åè…èš€çš„è¿‡ç¨‹ï¼Œ å¯ä»¥ç”¨æ¥æ’é™¤å°å‹é»‘è‰²åŒºåŸŸã€‚</p><p>ğŸŒŸ  <strong>ç®€è¿°é¡¶å¸½(ç¤¼å¸½)å’Œé»‘å¸½è¿ç®—çš„å®šä¹‰å’Œä½¿ç”¨åœºæ™¯?</strong></p><p>â€‹    <strong>é¡¶å¸½(ç¤¼å¸½)</strong>æ˜¯åŸå›¾åƒä¸å¼€è¿ç®—çš„ç»“æœå›¾ä¹‹å·®ã€‚å› ä¸ºå¼€è¿ç®—å¸¦æ¥çš„ç»“æœæ˜¯æ”¾å¤§äº†è£‚ç¼æˆ–è€…å±€éƒ¨ä½äº®åº¦çš„åŒºåŸŸï¼Œå› æ­¤ï¼Œä»åŸå›¾ä¸­å‡å»å¼€è¿ç®—åçš„å›¾ï¼Œå¾—åˆ°çš„æ•ˆæœå›¾çªå‡ºäº†æ¯”åŸå›¾è½®å»“å‘¨å›´çš„åŒºåŸŸæ›´æ˜äº®çš„åŒºåŸŸï¼Œä¸”è¿™ä¸€æ“ä½œå’Œé€‰æ‹©çš„æ ¸çš„å¤§å°ç›¸å…³ã€‚é¡¶å¸½è¿ç®—å¾€å¾€ç”¨æ¥åˆ†ç¦»æ¯”é‚»è¿‘ç‚¹äº®ä¸€äº›çš„æ–‘å—ã€‚å½“ä¸€å¹…å›¾åƒå…·æœ‰å¤§å¹…çš„èƒŒæ™¯çš„æ—¶å€™ï¼Œè€Œå¾®å°ç‰©å“æ¯”è¾ƒæœ‰è§„å¾‹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨é¡¶å¸½è¿ç®—è¿›è¡ŒèƒŒæ™¯æå–ã€‚</p><p>â€‹    <strong>é»‘å¸½ï¼ˆBlack Hatï¼‰</strong>è¿ç®—ä¸ºâ€é—­è¿ç®—â€œçš„ç»“æœå›¾ä¸åŸå›¾åƒä¹‹å·®ã€‚é»‘å¸½è¿ç®—åçš„æ•ˆæœå›¾çªå‡ºäº†æ¯”åŸå›¾è½®å»“å‘¨å›´çš„åŒºåŸŸæ›´æš—çš„åŒºåŸŸï¼Œä¸”è¿™ä¸€æ“ä½œå’Œé€‰æ‹©çš„æ ¸çš„å¤§å°ç›¸å…³ã€‚ é»‘å¸½è¿ç®—ç”¨æ¥åˆ†ç¦»æ¯”é‚»è¿‘ç‚¹æš—ä¸€äº›çš„æ–‘å—ï¼Œ æ•ˆæœå›¾æœ‰æ¯”è¾ƒå¥½çš„è½®å»“ã€‚</p><p>ğŸŒŸ  <strong>ç®€è¿°å½¢æ€å­¦æ¢¯åº¦çš„å®šä¹‰å’Œä½¿ç”¨åœºæ™¯?</strong></p><p>â€‹    å½¢æ€å­¦æ¢¯åº¦æ˜¯è†¨èƒ€å›¾å’Œè…èš€å›¾ä¹‹å·®ï¼Œ å¯¹äºŒå€¼å›¾è¿›è¡Œè¿™ä¸€æ“ä½œå¯ä»¥å°†å›¢å—(Blob)çš„è¾¹ç¼˜çªå‡ºå‡ºæ¥ï¼Œ å¯ä»¥ç”¨å½¢æ€å­¦æ¢¯åº¦æ¥ä¿ç•™ç‰©ä½“çš„è¾¹ç¼˜è½®å»“ã€‚</p><p><strong>5. è§’ç‚¹ &amp; å…³é”®ç‚¹ &amp; è¾¹ç¼˜æ£€æµ‹</strong></p><p>ğŸŒŸ <strong>ç®€è¿° harris è§’ç‚¹æ£€æµ‹ç®—æ³•åŸç†å’Œä½¿ç”¨åœºæ™¯</strong></p><p>â€‹    harris è§’ç‚¹æ£€æµ‹æ˜¯ä¸€ç§åŸºäºç°åº¦å›¾åƒçš„è§’ç‚¹æå–ç®—æ³•ï¼Œç¨³å®šæ€§é«˜ï¼Œå°¤å…¶å¯¹ L å‹è§’ç‚¹æ£€æµ‹ç²¾åº¦é«˜ï¼Œ ä½†æ˜¯ç”±äºé‡‡ç”¨é«˜æ–¯æ»¤æ³¢ï¼Œæ‰€ä»¥è¿ç®—é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œè¾ƒä½ä¿¡æ¯æœ‰ä¸¢å¤±å’Œä½ç½®åç§»çš„ç°è±¡ï¼Œä¸”è§’ç‚¹æå–æœ‰èšç°‡ç°è±¡ã€‚</p><p>ğŸŒŸ <strong>è¯´è¯´å‡ ç§ä¼ ç»Ÿç®—æ³•ä¸­å¸¸ç”¨çš„ç‰¹å¾æ£€æµ‹ç®—æ³•?</strong></p><ul><li>FAST: FAST Feature Detector</li><li>STAR: Star Feature Detector</li><li><strong>SIFT</strong>: Scale Invariant Feature Transform</li><li><strong>SURF</strong>: Speeded Up Robust Feature åŠ é€Ÿç‰ˆçš„å…·æœ‰é²æ£’æ€§çš„ç‰¹å¾æ£€æµ‹ç®—æ³•</li><li><strong>ORB</strong>ï¼š æ˜¯ Oriented Brief çš„ç®€ç§°ï¼Œ æ˜¯ BRIEF ç®—æ³•çš„æ”¹è¿›ç‰ˆï¼Œ ç»¼åˆæ€§èƒ½ç›¸å¯¹æ¯”è¾ƒå¥½çš„ç®—æ³•ã€‚</li></ul><p>ğŸŒŸ ç®€è¦é˜è¿°ä¸€ä¸‹ SIFT å’Œ SURF ç®—æ³•çš„å¼‚åŒç‚¹?</p><div class="table-container"><table><thead><tr><th>æ¯”è¾ƒå†…å®¹</th><th>SIFT</th><th>SURF</th></tr></thead><tbody><tr><td>å°ºåº¦ç©ºé—´</td><td>DOG ä¸ä¸åŒå°ºåº¦çš„å›¾ç‰‡å·ç§¯</td><td>ä¸åŒå°ºåº¦çš„box filters ä¸åŸå›¾ç‰‡å·ç§¯</td></tr><tr><td>ç‰¹å¾ç‚¹æ£€æµ‹</td><td>å…ˆè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œ å†å»å»é™¤ä½å¯¹æ¯”åº¦ç‚¹ã€‚ å†é€šè¿‡ Hessian çŸ©é˜µå»é™¤è¾¹ç¼˜çš„ç‚¹</td><td>å…ˆåˆ©ç”¨Hessian çŸ©é˜µç¡®å®šå€™é€‰ç‚¹ï¼Œ ç„¶åè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶</td></tr><tr><td>æ–¹å‘</td><td>åœ¨æ­£æ–¹å½¢åŒºåŸŸå†…ç»Ÿè®¡æ¢¯åº¦çš„å¹…å€¼çš„ç›´æ–¹å›¾ï¼Œ æ‰¾max å¯¹åº”çš„æ–¹å‘ã€‚ å¯ä»¥æœ‰å¤šä¸ªæ–¹å‘</td><td>åœ¨åœ†å½¢åŒºåŸŸå†…ï¼Œ è®¡ç®—å„ä¸ªæ‰‡å½¢èŒƒå›´å†…çš„ x, y æ–¹å‘ä¸Šçš„ harr å°æ³¢å“åº”ï¼Œ æ‰¾æ¨¡æœ€å¤§çš„æ‰‡å½¢æ–¹å‘</td></tr><tr><td>ç‰¹å¾æè¿°å­</td><td>16 <em> 16 çš„é‡‡æ ·ç‚¹åˆ’åˆ†ä¸º 4</em>4 çš„åŒºåŸŸï¼Œ è®¡ç®—æ¯ä¸ªåŒºåŸŸçš„é‡‡æ ·ç‚¹çš„æ¢¯åº¦æ–¹å‘å’Œå¹…å€¼ï¼Œ ç»Ÿè®¡æˆ8bin ç›´æ–¹å›¾ï¼Œ ä¸€å…± 4<em>4</em>8=128ç»´</td><td>20<em>20 çš„åŒºåŸŸåˆ’åˆ†ä¸º 4</em>4 çš„å­åŒºåŸŸï¼Œ æ¯ä¸ªåŒºåŸŸæ‰¾ 5*5 ä¸ªé‡‡æ ·ç‚¹ï¼Œ è®¡ç®—é‡‡æ ·ç‚¹çš„harr å°æ³¢å“åº”ï¼Œ è®°å½• âˆ‘dx âˆ‘dy âˆ‘\</td><td>dx\</td><td>âˆ‘\</td><td>dy\</td><td>, ä¸€å…± 4<em>4</em>4 = 64 ç»´ã€‚</td></tr></tbody></table></div><p>ğŸŒŸ æ¯”è¾ƒä¸€ä¸‹ SIFTï¼Œ HOG å’Œ LBP è¿™ä¸‰ä¸ªç‰¹å¾æå–ç®—æ³•?</p><div class="table-container"><table><thead><tr><th>ç‰¹å¾</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨èŒƒå›´</th></tr></thead><tbody><tr><td>SIFT</td><td>(1) å¯¹äº<strong>æ—‹è½¬</strong>ã€<strong>å°ºåº¦ç¼©æ”¾</strong>ã€<strong>äº®åº¦å˜åŒ–</strong>ä¿æŒä¸å˜(2) æŠ—é®æŒ¡</td><td>è®¡ç®—é‡å¤§</td><td>å›¾åƒåŒ¹é…ã€ä¸‰ç»´å»ºæ¨¡</td></tr><tr><td>HOG</td><td>å¿½ç•¥äº†å…‰ç…§é¢œè‰²å¯¹å›¾åƒé€ æˆçš„å½±å“ï¼Œ ä½¿å¾—å›¾åƒæ‰€éœ€è¦çš„ç‰¹å¾æ•°æ®çš„ç»´åº¦é™ä½äº†</td><td>ï¼ˆ1ï¼‰ æè¿°å­ç”Ÿæˆè¿‡ç¨‹å†—é•¿ï¼Œå¯¼è‡´é€Ÿåº¦æ…¢ï¼Œå®æ—¶æ€§å·®ï¼ˆ2ï¼‰ å¾ˆéš¾å¤„ç†é®æŒ¡é—®é¢˜ï¼ˆ3ï¼‰ ç”±äºæ¢¯åº¦çš„æ€§è´¨ï¼Œ è¯¥æè¿°å­å¯¹å™ªç‚¹ç›¸å½“æ•æ„Ÿ</td><td>è¡Œäººæ£€æµ‹</td></tr><tr><td>LBP</td><td>ï¼ˆ1ï¼‰ å¯¹å…‰ç…§ä¸æ•æ„Ÿï¼ˆ2ï¼‰ è¿ç®—é€Ÿåº¦å¿«</td><td>å¯¹æ–¹å‘ä¿¡æ¯æ•æ„Ÿ</td><td>äººè„¸è¯†åˆ«ã€å›¾åƒåˆ†ç±»</td></tr></tbody></table></div><p>ğŸŒŸ LBP åŸç†ï¼Ÿ</p><p>ğŸŒŸ HOG ç‰¹å¾è®¡ç®—è¿‡ç¨‹ï¼Œä»‹ç»ä¸€ä¸ªåº”ç”¨HOGç‰¹å¾çš„åº”ç”¨ï¼Ÿ è®²è®²HOGç‰¹å¾ï¼Ÿä»–åœ¨dpmé‡Œé¢æ€ä¹ˆè®¾è®¡çš„ï¼Œä½ æ”¹è¿‡å—ï¼ŸHOGèƒ½æ£€æµ‹è¾¹ç¼˜å—ï¼Ÿé‡Œé¢çš„æ ¸å‡½æ•°æ˜¯å•¥ï¼Ÿé‚£hogæ£€æµ‹è¾¹ç¼˜å’Œcannyæœ‰å•¥åŒºåˆ«ï¼Ÿ</p><p>ğŸŒŸ  SIFTç‰¹å¾æå–ç®—æ³•ï¼ŒåŸç†ï¼Ÿ</p><p>ğŸŒŸ ä½ è¯´opencvé‡Œé¢çš„HOG+SVMæ•ˆæœå¾ˆå·®ï¼Ÿä»–å°±ç›´æ¥æ¥äº†å¥ä¸ºå•¥å¾ˆå·®ï¼Ÿå·®äº†å°±ä¸æ”¹äº†ï¼Ÿå·®äº†å°±è¦æ¢å…¶ä»–æ–¹æ³•ï¼Ÿã€</p><p>ğŸŒŸ <strong>ç®€è¿°ä¼ ç»Ÿç®—æ³•ä¸­è¾¹ç¼˜æ£€æµ‹çš„ä¸€èˆ¬æ­¥éª¤</strong></p><p>(1) æ»¤æ³¢: æ»¤æ³¢å»é™¤å™ªå£°</p><p>(2) å¢å¼º: å¢å¼ºè¾¹ç¼˜ç‰¹å¾</p><p>(3) æ£€æµ‹: å°†è¾¹ç¼˜é€šè¿‡æŸç§æ–¹å¼æå–å‡ºæ¥ï¼Œ å®Œæˆè¾¹ç¼˜æ£€æµ‹</p><p><strong>6. åŸºæœ¬ç®—æ³•</strong></p><p>ğŸŒŸ <strong>ç®€è¿°ä¸€ä¸‹ä»€ä¹ˆæ˜¯å…‰æµ?</strong></p><p>â€‹    å…‰æµæ³•æ˜¯ç›®å‰å›¾åƒè¿åŠ¨åˆ†æçš„é‡è¦æ–¹æ³•ã€‚ å…‰æµç”¨æ¥æŒ‡å®šæ—¶å˜å›¾åƒä¸­æ¨¡å¼çš„è¿åŠ¨é€Ÿåº¦ï¼Œå› ä¸ºç‰©ä½“åœ¨è¿åŠ¨æ—¶ï¼Œåœ¨å›¾åƒä¸Šå¯¹åº”ç‚¹çš„äº®åº¦æ¨¡å¼ä¹Ÿåœ¨è¿åŠ¨ï¼Œè¿™ç§å›¾åƒäº®åº¦æ¨¡å¼çš„è¡¨ç°è¿åŠ¨å°±æ˜¯å…‰æµã€‚ å…‰æµè¡¨è¾¾äº†å›¾åƒçš„å˜åŒ–ï¼ŒåŒ…å«äº†ç›®æ ‡è¿åŠ¨çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å¯ä»¥è¢«è§‚å¯Ÿè€…ç”¨æ¥ç¡®å®šç›®æ ‡çš„è¿åŠ¨æƒ…å†µã€‚</p><p>ğŸŒŸ <strong>ç®€å•å™è¿°ä¸€ä¸‹æ¼«æ°´å¡«å……æ³•ï¼Ÿ</strong></p><p>â€‹    æ¼«æ°´å¡«å……æ˜¯ç”¨ä¸€ç§ç‰¹å®šé¢œè‰²å¡«å……è¿é€šåŒºåŸŸï¼Œ é€šè¿‡è®¾ç½®å¯ä»¥è¿é€šåƒç´ çš„ä¸Šä¸‹é™ä»¥åŠè¿é€šæ–¹å¼æ¥è¾¾åˆ°ä¸åŒçš„å¡«å……æ•ˆæœçš„æ–¹æ³•ã€‚æ¼«æ°´å¡«å……ç»å¸¸è¢«ç”¨æ¥æ ‡è®°æˆ–è€…åˆ†ç¦»å›¾åƒçš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†æˆ–åˆ†æã€‚ç®€å•æ¥è¯´ï¼Œ å°±æ˜¯è‡ªåŠ¨é€‰ä¸­å’Œç§å­ç‚¹ç›¸è¿çš„åŒºåŸŸï¼Œæ¥ç€è®²è¯¥åŒºåŸŸæ›¿æ¢æˆæŒ‡å®šçš„é¢œè‰²ã€‚</p><p>ğŸŒŸ  <strong>ç®€è¿°éœå¤«å˜æ¢çš„åŸç†ï¼Ÿ</strong></p><p>ğŸŒŸ <strong>éœå¤«åœ†å˜æ¢</strong></p><p>â€‹    éœå¤«åœ†å˜æ¢çš„åŸºæœ¬åŸç†å’Œéœå¤«çº¿å˜åŒ–å¤§ä½“ä¸Šå¾ˆç›¸ä¼¼ï¼Œ<strong>åªæ˜¯å¯¹åº”çš„äºŒç»´æå¾„æè§’ç©ºé—´è¢«ä¸‰ç»´çš„åœ†å¿ƒç‚¹x,y,åŠå¾„rç©ºé—´å–ä»£</strong>ï¼Œè¿™å°±æ„å‘³ç€è¿™æ˜¯ä¸€ä¸ªä¸‰ç»´ç©ºé—´ï¼Œæ‰€ä»¥éœ€è¦å¤§é‡çš„å†…å­˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½é€Ÿåº¦æ…¢ã€‚</p><p>ğŸŒŸ <strong>ç®€è¿°ä¸€ä¸‹åˆ†æ°´å²­ç®—æ³•ï¼Ÿ</strong></p><p>â€‹    åˆ†æ°´å²­ç®—æ³•æ˜¯ä¸€ç§å›¾åƒåŒºåŸŸåˆ†å‰²æ³•ï¼Œ åœ¨åˆ†å‰²è¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šæŠŠä¸´è¿‘åƒç´ é—´çš„ç›¸ä¼¼æ€§ä½œä¸ºé‡è¦çš„å‚è€ƒä¾æ®ï¼Œä»è€Œåœ¨ç©ºé—´ä½ç½®ä¸Šç›¸è¿‘å¹¶ä¸”ç°åº¦å€¼ç›¸è¿‘(æ±‚æ¢¯åº¦)çš„åƒç´ ç‚¹äº’ç›¸è¿æ¥èµ·æ¥æ„æˆä¸€ä¸ªå°é—­çš„è½®å»“ã€‚åˆ†æ°´å²­ç®—æ³•å¸¸ç”¨çš„æ“ä½œæ­¥éª¤: å½©è‰²å›¾åƒç°åº¦åŒ–ï¼Œ ç„¶åå†æ±‚æ¢¯åº¦ï¼Œæœ€ååœ¨æ¢¯åº¦å›¾çš„åŸºç¡€ä¸Šè¿›è¡Œåˆ†æ°´å²­ç®—æ³•ï¼Œæ±‚å¾—å›¾åƒçš„è¾¹ç¼˜çº¿ã€‚</p><p>ğŸŒŸ <strong>ç®€è¿°ä¸€äº›å›¾åƒé‡‘å­—å¡”çš„ç§ç±»å’ŒåŒºåˆ«ï¼Ÿ</strong></p><p>ä¸€èˆ¬æƒ…å†µä¸‹æœ‰ä¸¤ç§å›¾åƒé‡‘å­—å¡”ï¼Œ åˆ†åˆ«æ˜¯:</p><p><strong>é«˜æ–¯é‡‘å­—å¡”:</strong> ç”¨æ¥å‘ä¸‹é‡‡æ ·</p><p><strong>æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”:</strong> ç”¨æ¥ä»é‡‘å­—å¡”åº•å±‚å›¾åƒé‡å»ºä¸Šå±‚æœªé‡‡æ ·å›¾ç‰‡ï¼Œ å¯ä»¥å¯¹å›¾åƒè¿›è¡Œæœ€å¤§ç¨‹åº¦çš„è¿˜åŸï¼Œé…åˆé«˜æ–¯é‡‘å­—å¡”ä¸€èµ·ä½¿ç”¨</p><p>ä¸¤è€…çš„åŒºåˆ«åœ¨äº: é«˜æ–¯é‡‘å­—å¡”ç”¨æ¥å‘ä¸‹é‡‡æ ·å›¾åƒï¼Œ æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ç”¨æ¥ä»é‡‘å­—å¡”åº•å±‚å›¾åƒä¸­å‘ä¸Šé‡‡æ ·ï¼Œé‡å»ºä¸€ä¸ªå›¾åƒå¯ä»¥å°†æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ç†è§£ä¸ºé«˜æ–¯é‡‘å­—å¡”çš„é€†å½¢å¼ã€‚</p><p>ğŸŒŸ <strong>ç®€è¿°å‡¸åŒ…çš„å®šä¹‰?</strong></p><p>â€‹    ç»™å®šäºŒç»´å¹³é¢ä¸Šçš„ç‚¹é›†åˆï¼Œ å‡¸åŒ…å°±æ˜¯å°†æœ€å¤–å±‚çš„ç‚¹è¿æ¥èµ·æ¥æ„æˆå‡¸å¤šè¾¹å½¢ï¼Œ æ˜¯èƒ½åŒ…å«ç‚¹é›†ä¸­æ‰€æœ‰çš„ç‚¹ã€‚ç†è§£ç‰©ä½“å½¢çŠ¶æˆ–è½®å»“çš„ä¸€ç§æ¯”è¾ƒæœ‰ç”¨çš„æ–¹æ³•ä¾¿æ˜¯è®¡ç®—ä¸€ä¸ªç‰©ä½“çš„å‡¸åŒ…ã€‚</p><p>ğŸŒŸ <strong>ç®€è¿°ä¸€ä¸‹ä»¿å°„å˜æ¢çš„å®šä¹‰ï¼Ÿ</strong></p><p>â€‹    ä»¿å°„å˜æ¢æ˜¯æŒ‡åœ¨å‡ ä½•ä¸­ï¼Œ<strong>ä¸€ä¸ªå‘é‡ç©ºé—´è¿›è¡Œä¸€æ¬¡çº¿æ€§å˜æ¢å¹¶æ¥ä¸Šä¸€ä¸ªå¹³ç§»ï¼Œ å˜æ¢ä¸ºä¸€ä¸ªå‘é‡ç©ºé—´çš„å˜æ¢ã€‚</strong>å®ƒä¿æŒäº†äºŒç»´å›¾åƒçš„å¹³ç›´æ€§(ç›´çº¿å˜æ¢åä»ç„¶æ˜¯ç›´çº¿)å’Œå¹³è¡Œæ€§ã€‚ä¸€ä¸ªä»»æ„çš„ä»¿å°„å˜æ¢éƒ½èƒ½ä¾¿æ˜¯ä¸ºä¹˜ä»¥ä¸€ä¸ªçŸ©é˜µ(çº¿æ€§å˜æ¢)æ¥ç€å†åŠ ä¸Šä¸€ä¸ªå‘é‡(å¹³ç§»)çš„å½¢å¼ã€‚</p><p>ğŸŒŸ <strong>ç®€è¿°åå‘æŠ•å½±çš„å®šä¹‰å’Œä½¿ç”¨åœºæ™¯?</strong></p><p>â€‹    åå‘æŠ•å½±å°±æ˜¯ä¸€ç§è®°å½•ç»™å®šå›¾åƒä¸­çš„åƒç´ ç‚¹å¦‚ä½•é€‚åº”ç›´æ–¹å›¾æ¨¡å‹åƒç´ åˆ†å¸ƒæ–¹å¼çš„ä¸€ç§æ–¹æ³•ã€‚<strong>æ‰€è°“åå‘æŠ•å½±å°±æ˜¯é¦–å…ˆè®¡ç®—æŸä¸€ç‰¹å¾çš„ç›´æ–¹å›¾æ¨¡å‹ï¼Œç„¶åä½¿ç”¨æ¨¡å‹å»å¯»æ‰¾å›¾åƒä¸­å­˜åœ¨çš„è¯¥ç‰¹å¾çš„æ–¹æ³•ã€‚</strong>åå‘æŠ•å½±ç”¨äºåœ¨è¾“å…¥å›¾åƒ(é€šå¸¸è¾ƒå¤§)ä¸­æŸ¥æ‰¾ç‰¹å®šå›¾åƒ(é€šå¸¸è¾ƒå°) æœ€åŒ¹é…çš„ç‚¹æˆ–è€…åŒºåŸŸï¼Œ ä¹Ÿå°±æ˜¯å®šä½æ¨¡æ¿å›¾åƒå‡ºç°åœ¨è¾“å…¥å›¾åƒçš„ä½ç½®ã€‚</p><p><strong>7. åŸºæœ¬å®ç°</strong></p><p><strong>æ³¨æ„ï¼Œä¸€ä¸‹æ‰€æœ‰éœ€è¦å†™ä»£ç çš„é¢˜ç›®ï¼Œä¸å…è®¸ä½¿ç”¨OpenCVçš„Matç±»ã€‚å¦‚æœå›¾ç‰‡å†…å®¹éœ€è¦ç”¨æŒ‡é’ˆè¯»å–ã€‚</strong></p><p>ç»™å®š0-1çŸ©é˜µï¼Œæ±‚è¿é€šåŸŸã€‚ï¼ˆé‡åˆ°è¿‡Næ¬¡ï¼Œç¬”è¯•é¢è¯•éƒ½æœ‰ï¼Œæœ€å¥½åšåˆ°èƒ½å¾’æ‰‹hackä»£ç æˆ–è€…ä¼ªä»£ç ã€‚ï¼‰</p><p>å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ±‚ç°åº¦å›¾çš„ç›´æ–¹å›¾ã€‚</p><p>å†™ä¸€ä¸ªå‡å€¼æ»¤æ³¢ï¼ˆä¸­å€¼æ»¤æ³¢ï¼‰ã€‚</p><p>å¸¸ç”¨çš„ç‰¹å¾æå–æ–¹æ³•ã€‚</p><p>å¸¸ç”¨çš„ç›®æ ‡æ£€æµ‹æ–¹æ³•ã€‚</p><p>å¸¸ç”¨çš„è¾¹ç¼˜æå–æ–¹æ³•ã€‚</p><p>å¸¸ç”¨çš„æ’å€¼æ–¹æ³•ã€‚</p><p>å¸¸ç”¨çš„å›¾åƒåˆ†å‰²ç®—æ³•ã€‚</p><p>å†™ä¸€ä¸ªå›¾åƒresizeå‡½æ•°ï¼ˆæ”¾å¤§å’Œç¼©å°ï¼‰ã€‚</p><p>å½©è‰²å›¾åƒã€ç°åº¦å›¾åƒã€äºŒå€¼å›¾åƒå’Œç´¢å¼•å›¾åƒåŒºåˆ«ï¼Ÿï¼ˆç´¢å¼•å›¾åƒåˆ°åº•æ˜¯å•¥ï¼Ÿï¼‰</p><p>ç»™å®šæ‘„åƒå¤´èŒƒå›´å’Œå›¾åƒå¤§å°æ±‚åˆ†è¾¨ç‡ã€‚</p><p>å¦‚ä½•æ£€æµ‹å›¾ç‰‡ä¸­çš„æ±½è½¦ï¼Œå¹¶è¯†åˆ«è½¦å‹ï¼Œå¦‚æœæœ‰é®æŒ¡æ€ä¹ˆåŠï¼Ÿ</p><p>(2) å¸¸ç”¨æ»¤æ³¢å™¨åŸç†ï¼Œæœ€å¥½è‡ªå·±ä¼šæ‰‹å†™ä¸€äº›å°±ç®€å•çš„</p><p>(3) å›¾åƒçš„ä»¿å°„å˜æ¢</p><p>9ã€ç”¨è¿‡opencvé‡Œé¢å“ªäº›å‡½æ•°? ï¼ˆæˆ‘é¡ºå¸¦å›ç­”äº†ä¸€ä¸‹cannyï¼ŒHRåˆé—®opencvé‡Œé¢æœ‰c-a-n-n-yæœ‰è¿™å‡ ä¸ªå­—æ¯çš„å‡½æ•°å—ï¼Œå°´å°¬ã€‚ã€‚ã€‚åˆé—®æˆ‘å¦‚ä½•è‡ªå·±å†™cannyè¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼‰</p><p>13ã€å¦‚ä½•æ±‚ä¸€å¼ å›¾ç‰‡çš„å‡å€¼ï¼Ÿï¼ˆè€ƒè™‘äº†æº¢å‡ºå’Œåˆ†å—æ±‚è§£ï¼Œè²Œä¼¼ä¸æ»¡æ„ã€‚ã€‚ã€‚å›å¤´çœ‹çœ‹ç§¯åˆ†å›¾é‡Œé¢å¦‚ä½•è§£å†³æº¢å‡ºçš„ã€‚ï¼‰</p><p>14ã€å¦‚ä½•å†™ç¨‹åºå°†å›¾åƒæ”¾å¤§ç¼©å°ï¼Ÿï¼ˆæˆ‘å›ç­”çš„æ’å€¼ï¼Œä¸å¤ªå¯¹ã€‚ã€‚ã€‚æ¯”å¦‚æ”¾å¤§ä¸¤å€å¯ä»¥æ’å€¼ï¼Œé‚£æ”¾å¤§1.1å€å‘¢ï¼Œï¼‰â€”&gt;æ”¾å¤§1.1å€ä¹Ÿå¯ä»¥æ’å€¼</p><p>15ã€å¦‚ä½•éå†ä¸€éæ±‚ä¸€å¼ å›¾ç‰‡çš„æ–¹å·®ï¼Ÿï¼ˆå›ç­”çš„æ˜¯é‡‡ç”¨ç§¯åˆ†å›¾ï¼Œå¹¶è®©æˆ‘æ¨å¯¼è¿™æ ·ä¸ºå•¥å¯è¡Œã€‚è¿™ä¸ªé—®é¢˜ä»¥å‰å¸®åŒå­¦è§£å†³è¿‡ã€‚ã€‚ã€‚ï¼‰</p><p><strong>8. å·¥ç¨‹ç»éªŒ</strong></p><p>ğŸŒŸ  <strong>ç®€è¿° .hpp å’Œ .h çš„åŒºåˆ«?</strong></p><p><strong>.hpp çš„æœ¬è´¨å°±æ˜¯å°† .cppçš„å®ç°ä»£ç æ··å…¥ .h å¤´æ–‡ä»¶å½“ä¸­ï¼Œ å®šä¹‰ä¸å®ç°éƒ½åŒ…å«åœ¨åŒä¸€æ–‡ä»¶ï¼Œåˆ™è¯¥ç±»çš„è°ƒç”¨è€…åªéœ€è¦ includeè¯¥ .hpp æ–‡ä»¶å³å¯</strong>ï¼Œæ— éœ€å†å°†cppåŠ å…¥projectä¸­è¿›è¡Œç¼–è¯‘ã€‚è€Œå®ç°ä»£ç ç›´æ¥ç¼–è¯‘åˆ°è°ƒç”¨è€…çš„objæ–‡ä»¶ä¸­ï¼Œ ä¸å†ç”Ÿæˆå•ç‹¬çš„obj, é‡‡ç”¨ hpp å°†å¤§å¹…åº¦å‡å°è°ƒç”¨ project ä¸­çš„ cpp æ–‡ä»¶æ•°å’Œç¼–è¯‘æ¬¡æ•°ï¼Œä¹Ÿä¸ç”¨å†å‘å¸ƒ lib ä¸ dll æ–‡ä»¶ï¼Œå› æ­¤éå¸¸é€‚åˆç”¨æ¥ç¼–å†™å…¬ç”¨çš„å¼€æºåº“ã€‚</p><p>ğŸŒŸ   Cpp è¯­è¨€å¦‚æœæƒ³ç”¨ OpenCV çš„æ¨¡å—æ€ä¹ˆç”¨ ?</p>]]></content>
    
    
    <categories>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš—å…‰å¢å¼º</title>
    <link href="/2020/09/17/%E6%9A%97%E5%85%89%E5%A2%9E%E5%BC%BA/"/>
    <url>/2020/09/17/%E6%9A%97%E5%85%89%E5%A2%9E%E5%BC%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="low-light-enhancement-æš—å…‰å¢å¼º"><a href="#low-light-enhancement-æš—å…‰å¢å¼º" class="headerlink" title="low-light enhancement(æš—å…‰å¢å¼º)"></a>low-light enhancement(æš—å…‰å¢å¼º)</h1><h3 id="1-End2End"><a href="#1-End2End" class="headerlink" title="1. End2End"></a>1. End2End</h3><p>æ—¨åœ¨äºé€šè¿‡æ·±åº¦å­¦ä¹ ï¼Œå¯¹åŸå›¾è¿›è¡Œç›´æ¥å¢å¼ºã€‚ è¾“å…¥ä½å…‰ç…§å›¾åƒï¼Œè¾“å‡ºæ­£å¸¸å›¾åƒã€‚ ä»£è¡¨çš„æ–¹æ¡ˆæœ‰ LLCNNã€SIDã€LLNetã€‚</p><h5 id="1-LLCNN"><a href="#1-LLCNN" class="headerlink" title="(1) LLCNN"></a>(1) LLCNN</h5><p><strong>Paper</strong>ï¼šã€ŠLLCNN: A Convolutional Neural Network for Low-light Image Enhancementã€‹</p><p><strong>code</strong>ï¼š<a href="https://github.com/BestJuly/LLCNN">https://github.com/BestJuly/LLCNN</a></p><p><strong>ä¸»è¦è´¡çŒ®</strong></p><p>â€‹        ä½œè€…æå‡ºé‡‡ç”¨ CNN è¿›è¡Œä½å…‰å›¾åƒå¢å¼ºã€‚ä½œè€…è®¾è®¡äº†ä¸€ç§ç‰¹æ®Šçš„æ¨¡å—å¤„ç†å¤šå°ºåº¦ç‰¹å¾åŒæ—¶é¿å…äº†æ¢¯åº¦å°æ—¶é—®é¢˜ã€‚ä¸ºå°½å¯èƒ½ä¿ç•™å›¾åƒçš„çº¹ç†ä¿¡æ¯ï¼Œä½œè€…é‡‡ç”¨ SSIM æŸå¤±è¿›è¡Œæ¨¡å‹è®­ç»ƒã€‚åŸºäºè¯¥æ–¹æ³•ï¼Œä½å…‰å›¾åƒçš„å¯¹æ¯”åº¦å¯ä»¥è‡ªé€‚åº”å¢å¼ºã€‚ä½œè€…é€šè¿‡å®éªŒéªŒè¯äº†æ‰€ææ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚</p><p><img src="/2020/09/17/%E6%9A%97%E5%85%89%E5%A2%9E%E5%BC%BA/LLCNN.png" style="zoom:30%;"></p><h5 id="2-LLnet"><a href="#2-LLnet" class="headerlink" title="(2) LLnet"></a>(2) LLnet</h5><p><img src="/2020/09/17/%E6%9A%97%E5%85%89%E5%A2%9E%E5%BC%BA/LLNet.png" style="zoom:35%;"></p><p>â€‹        æ¯”è¾ƒæ—©çš„ç”¨æ·±åº¦å­¦ä¹ æ–¹æ³•å®Œæˆä½å…‰ç…§å¢å¼ºä»»åŠ¡çš„æ–‡ç« ï¼Œå®ƒè¯æ˜äº†åŸºäºåˆæˆæ•°æ®è®­ç»ƒçš„å †å ç¨€ç–å»å™ªè‡ªç¼–ç å™¨èƒ½å¤Ÿå¯¹çš„ä½å…‰ç…§æœ‰å™ªå£°å›¾åƒè¿›è¡Œå¢å¼ºå’Œå»å™ªã€‚æ¨¡å‹è®­ç»ƒåŸºäºå›¾åƒå—ï¼ˆpatchï¼‰ï¼Œé‡‡ç”¨ sparsity regularized reconstruction loss ä½œä¸ºæŸå¤±å‡½æ•°ã€‚ä¸»è¦è´¡çŒ®å¦‚ä¸‹ï¼š</p><ul><li><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§è®­ç»ƒæ•°æ®ç”Ÿæˆæ–¹æ³•ï¼ˆå³ä¼½é©¬æ ¡æ­£å’Œæ·»åŠ é«˜æ–¯å™ªå£°ï¼‰æ¥æ¨¡æ‹Ÿä½å…‰ç¯å¢ƒã€‚</p></li><li><p>æ¢ç´¢äº†ä¸¤ç§ç±»å‹çš„ç½‘ç»œç»“æ„ï¼š(a) LLNet,åŒæ—¶å­¦ä¹ å¯¹æ¯”åº¦å¢å¼ºå’Œå»å™ªï¼›(b) S-LLNet,ä½¿ç”¨ä¸¤ä¸ªæ¨¡å—åˆ†é˜¶æ®µæ‰§è¡Œå¯¹æ¯”åº¦å¢å¼ºå’Œå»å™ªã€‚</p></li><li><p>åœ¨çœŸå®æ‹æ‘„åˆ°çš„ä½å…‰ç…§å›¾åƒä¸Šè¿›è¡Œäº†å®éªŒï¼Œè¯æ˜äº†ç”¨åˆæˆæ•°æ®è®­ç»ƒçš„æ¨¡å‹çš„æœ‰æ•ˆæ€§ã€‚</p></li><li><p>å¯è§†åŒ–äº†ç½‘ç»œæƒå€¼ï¼Œæä¾›äº†å…³äºå­¦ä¹ åˆ°çš„ç‰¹å¾çš„ insightsã€‚</p></li></ul><h5 id="3-SID"><a href="#3-SID" class="headerlink" title="(3) SID"></a>(3) SID</h5><p><img src="/2020/09/17/%E6%9A%97%E5%85%89%E5%A2%9E%E5%BC%BA/SID.png" style="zoom:35%;"></p><p>â€‹        å…³æ³¨äºæç«¯ä½å…‰æ¡ä»¶å’ŒçŸ­æ—¶é—´æ›å…‰æ¡ä»¶ä¸‹çš„å›¾åƒæˆåƒç³»ç»Ÿï¼Œå®ƒç”¨å·ç§¯ç¥ç»ç½‘ç»œå»å®Œæˆ raw å›¾åƒåˆ° RGB å›¾åƒçš„å¤„ç†ï¼Œå®éªŒæ•ˆæœéå¸¸æƒŠè‰³.ç½‘ç»œç»“æ„åŸºäºå…¨å·ç§¯ç½‘ç»œ FCNï¼Œç›´æ¥é€šè¿‡ç«¯åˆ°ç«¯è®­ç»ƒï¼ŒæŸå¤±å‡½æ•°é‡‡ç”¨ L1 lossã€‚æ­¤å¤–ï¼Œæ–‡ç« æå‡ºäº†æ•°æ®é›† see-in-the-darkï¼Œç”±çŸ­æ›å…‰å›¾åƒåŠå¯¹åº”çš„é•¿æ›å…‰å‚è€ƒå›¾åƒç»„æˆã€‚</p><h3 id="2-è¿›é˜¶ç‰ˆæœ¬"><a href="#2-è¿›é˜¶ç‰ˆæœ¬" class="headerlink" title="2. è¿›é˜¶ç‰ˆæœ¬"></a>2. è¿›é˜¶ç‰ˆæœ¬</h3><p>å°†ä½å…‰ç…§é‡å»ºåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå…‰ç…§ä¼°è®¡ã€å»å™ªã€å¢å¼ºé‡å»ºã€‚</p><p>å¯¹äºå…‰ç…§ä¼°è®¡ï¼š</p><p>ï¼ˆ1ï¼‰åˆ©ç”¨ retinex ç†è®ºå°†å…¶åˆ†è§£ä¸ºå…‰ç…§åˆ†é‡å’Œåå°„åˆ†é‡çš„æ–¹æ¡ˆã€‚ è¯¸å¦‚ï¼šRetinexNetã€kinDã€KinD++</p><p>ï¼ˆ2ï¼‰ç›´æ¥ç”¨ç½‘ç»œç»“æ„(Unet)è¿›è¡Œå…‰ç…§ä¼°è®¡ã€‚ å…¸å‹çš„è§£å†³æ–¹æ¡ˆæœ‰ï¼šHDRNetã€DeepUPEã€GLADNet å’Œ AGLLEã€‚</p><h5 id="1-RetinexNet"><a href="#1-RetinexNet" class="headerlink" title="(1) RetinexNet"></a>(1) RetinexNet</h5><p><strong>Paper</strong>ï¼šã€ŠDeep Retinex Decomposition for Low-Light Enhancementã€‹</p><p><strong>code</strong>ï¼š<a href="https://github.com/weichen582/RetinexNet">https://github.com/weichen582/RetinexNet</a></p><p><strong>ä¸»è¦è´¡çŒ®</strong>ï¼š</p><ul><li><p>æ„å»ºäº† paired çš„ä½å…‰ç…§/æ­£å¸¸å…‰ç…§<strong>æ•°æ®é›†LOL dataset</strong>ï¼Œåº”è¯¥ä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªåœ¨çœŸå®åœºæ™¯ä¸‹é‡‡é›†çš„paired datasetã€‚</p></li><li><p>æå‡ºäº†RetinexNetï¼Œ<strong>å®ƒåˆ†ä¸ºä¸¤ä¸ªå­ç½‘ç»œï¼šDecomNet èƒ½å¤Ÿå¯¹å›¾åƒè¿›è¡Œè§£è€¦ï¼Œå¾—åˆ°å…‰ç…§å›¾å’Œåå°„å›¾</strong>ï¼›<strong>EnhanceNetå¯¹å‰é¢å¾—åˆ°çš„å…‰ç…§å›¾è¿›è¡Œå¢å¼ºï¼Œå¢å¼ºåçš„å…‰ç…§å›¾å’ŒåŸæ¥çš„åå°„å›¾ç›¸ä¹˜å°±å¾—åˆ°äº†å¢å¼ºç»“æœ</strong>ã€‚å¦å¤–ï¼Œè€ƒè™‘åˆ°å™ªå£°é—®é¢˜ï¼Œé‡‡ç”¨ä¸€ç§è”åˆå»å™ªå’Œå¢å¼ºçš„ç­–ç•¥ï¼Œå»å™ªæ–¹æ³•é‡‡ç”¨ <strong>BM3D</strong>ã€‚</p></li><li><p>æå‡ºä¸€ä¸ª structure-aware total variation constraintï¼Œå°±æ˜¯ç”¨ <strong>åå°„å›¾æ¢¯åº¦ä½œä¸ºæƒå€¼å¯¹ TV loss</strong>  è¿›è¡ŒåŠ æƒï¼Œ<strong>ä»è€Œåœ¨ä¿è¯å¹³æ»‘çº¦æŸçš„åŒæ—¶ä¸ç ´åçº¹ç†ç»†èŠ‚å’Œè¾¹ç•Œä¿¡æ¯</strong>ã€‚</p></li></ul><p><img src="/2020/09/17/%E6%9A%97%E5%85%89%E5%A2%9E%E5%BC%BA/RetinexNet.png" style="zoom:35%;"></p><h5 id="2-kinD"><a href="#2-kinD" class="headerlink" title="(2) kinD"></a>(2) kinD</h5><p><strong>Paper:</strong> ã€ŠKindling the Darkness: A Practical Low-light Image Enhancerã€‹</p><p><strong>codeï¼š</strong><a href="https://github.com/zhangyhuaee/KinD">https://github.com/zhangyhuaee/KinD</a></p><p><strong>ä¸»è¦è´¡çŒ®ï¼š</strong></p><p>â€‹        æ–‡ç« æ²¿ç”¨äº† Retinex-Net çš„ decomposition-&gt;enhance çš„ä¸¤é˜¶æ®µæ–¹å¼ï¼Œç½‘ç»œæ€»å…±åˆ†ä¸ºä¸‰ä¸ªæ¨¡å—ï¼šdecomposition-netã€restoration-netå’Œ adjustment-Netï¼Œåˆ†åˆ«æ‰§è¡Œå›¾åƒåˆ†è§£ã€åå°„å›¾æ¢å¤ã€å…‰ç…§å›¾è°ƒæ•´ã€‚ä¸€äº›åˆ›æ–°ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>å¯¹äºDecomposition-Netï¼Œå…¶æŸå¤±å‡½æ•°é™¤äº†æ²¿ç”¨Retinex-Netçš„é‡æ„æŸå¤±å’Œåå°„å›¾ä¸€è‡´æŸå¤±å¤–ï¼Œé’ˆå¯¹å…‰ç…§å›¾çš„åŒºåŸŸå¹³æ»‘æ€§å’Œç›¸äº’ä¸€è‡´æ€§ï¼Œè¿˜å¢åŠ äº†ä¸¤ä¸ªæ–°çš„æŸå¤±å‡½æ•°ã€‚</li><li>å¯¹äºRestoration-Netï¼Œè€ƒè™‘åˆ°äº†ä½å…‰ç…§æƒ…å†µä¸‹åå°„å›¾å¾€å¾€å­˜åœ¨ç€é€€åŒ–æ•ˆåº”ï¼Œå› æ­¤ä½¿ç”¨äº†è‰¯å¥½å…‰ç…§æƒ…å†µä¸‹çš„åå°„å›¾ä½œä¸ºå‚è€ƒã€‚åå°„å›¾ä¸­çš„é€€åŒ–æ•ˆåº”çš„åˆ†å¸ƒå¾ˆå¤æ‚ï¼Œé«˜åº¦ä¾èµ–äºå…‰ç…§åˆ†å¸ƒï¼Œå› æ­¤å¼•å…¥å…‰ç…§å›¾ä¿¡æ¯ã€‚</li><li>å¯¹äºAdjustment-Netï¼Œå®ç°äº†ä¸€ä¸ªèƒ½å¤Ÿè¿ç»­è°ƒèŠ‚å…‰ç…§å¼ºåº¦çš„æœºåˆ¶ï¼ˆå°†å¢å¼ºæ¯”ç‡ä½œä¸ºç‰¹å¾å›¾å’Œå…‰ç…§å›¾åˆå¹¶åä½œä¸ºè¾“å…¥ï¼‰ã€‚é€šè¿‡å’Œä¼½é©¬æ ¡æ­£è¿›è¡Œå¯¹æ¯”ï¼Œè¯æ˜å®ƒä»¬çš„è°ƒèŠ‚æ–¹æ³•æ›´ç¬¦åˆå®é™…æƒ…å†µã€‚</li></ul><p><img src="/2020/09/17/%E6%9A%97%E5%85%89%E5%A2%9E%E5%BC%BA/kinD.png" style="zoom:30%;"></p><h5 id="3-KinD"><a href="#3-KinD" class="headerlink" title="(3) KinD++"></a>(3) KinD++</h5><h5 id="4-MBLLEN-Low-light-Image-Video-Enhancement-Using-CNNs"><a href="#4-MBLLEN-Low-light-Image-Video-Enhancement-Using-CNNs" class="headerlink" title="(4) MBLLEN (Low-light Image/Video Enhancement Using CNNs)"></a>(4) MBLLEN (Low-light Image/Video Enhancement Using CNNs)</h5><p>â€‹        é’ˆå¯¹ç½‘ç»œä¸­ä¸åŒå±‚æ¬¡çš„ç‰¹å¾çš„æå–å’Œèåˆã€‚æå‡ºäº†é’ˆå¯¹è§†é¢‘çš„ä½å…‰ç…§å¢å¼ºç½‘ç»œï¼Œå’Œä¸€å¸§ä¸€å¸§å¤„ç†çš„ç›´æ¥åšæ³•ä¸åŒï¼Œå®ƒä»¬ä½¿ç”¨ 3D å·ç§¯å¯¹ç½‘ç»œè¿›è¡Œäº†æ”¹è¿›ï¼Œæœ‰æ•ˆæå‡äº†æ€§èƒ½ã€‚è¡¥å……è¯´æ˜ä¸€ä¸‹ï¼Œè§†é¢‘çš„ä½å…‰ç…§å¢å¼ºä¼šå­˜åœ¨çš„ä¸€ç§è´Ÿé¢æƒ…å†µï¼Œé—ªçƒï¼ˆflickeringï¼‰ï¼Œå³å¸§ä¸å¸§ä¹‹é—´å¯èƒ½å­˜åœ¨ä¸ç¬¦åˆé¢„æœŸçš„äº®åº¦è·³å˜ã€‚è¿™ä¸€é—®é¢˜å¯ä»¥ç”¨ AB(avr) æŒ‡æ ‡ (å³å¹³å‡äº®åº¦æ–¹å·®) æ¥åº¦é‡ã€‚</p><ul><li>ç½‘ç»œç»“æ„ï¼šåŒ…æ‹¬ç‰¹å¾æå–æ¨¡å— FEMã€å¢å¼ºæ¨¡å— EMå’Œèåˆæ¨¡å— FMã€‚FEM æ˜¯æœ‰ 10 å±‚å·ç§¯çš„å•æµå‘ç½‘ç»œï¼Œæ¯å±‚çš„è¾“å‡ºéƒ½ä¼šè¢«è¾“å…¥åˆ°å„ä¸ª EM å­æ¨¡å—ä¸­åˆ†åˆ«æå–å±‚æ¬¡ç‰¹å¾ã€‚æœ€ç»ˆè¿™äº›å±‚æ¬¡ç‰¹å¾è¢«æ‹¼æ¥åˆ°ä¸€èµ·å¹¶é€šè¿‡ 1x1 å·ç§¯èåˆå¾—åˆ°æœ€ç»ˆç»“æœã€‚ä¸ºäº†ç”¨äºè§†é¢‘å¢å¼ºï¼Œè¿˜éœ€è¦å¯¹ç½‘ç»œè¿›è¡Œä¿®æ”¹ï¼Œå…·ä½“å¯å‚è€ƒåŸæ–‡ã€‚</li><li>æŸå¤±å‡½æ•°ï¼šæœ¬æ–‡ä¸é‡‡ç”¨å¸¸è§„çš„ MSE æˆ–è€… MAE æŸå¤±ï¼Œè€Œæ˜¯æäº†ä¸€ä¸ªæ–°çš„æŸå¤±å‡½æ•°ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå³ç»“æ„æŸå¤±ã€å†…å®¹æŸå¤±å’ŒåŒºåŸŸæŸå¤±ã€‚ç»“æ„æŸå¤±é‡‡ç”¨ SSIM å’Œ MS-SSIM åº¦é‡ç›¸ç»“åˆçš„å½¢å¼ï¼›å†…å®¹æŸå¤±ï¼Œå°±æ˜¯ VGG æå–çš„ç‰¹å¾åº”è¯¥å°½å¯èƒ½ç›¸ä¼¼ï¼›åŒºåŸŸæŸå¤±ä»¤ç½‘ç»œæ›´å…³æ³¨äºå›¾åƒä¸­ä½å…‰ç…§çš„åŒºåŸŸã€‚</li></ul><h5 id="5-HDRNetã€DeepUPE-gt-ä½¿ç”¨åŒè¾¹å·ç§¯"><a href="#5-HDRNetã€DeepUPE-gt-ä½¿ç”¨åŒè¾¹å·ç§¯" class="headerlink" title="(5) HDRNetã€DeepUPE -&gt; ä½¿ç”¨åŒè¾¹å·ç§¯"></a>(5) HDRNetã€DeepUPE -&gt; ä½¿ç”¨åŒè¾¹å·ç§¯</h5><h3 id="3-å…¶ä»–"><a href="#3-å…¶ä»–" class="headerlink" title="3. å…¶ä»–"></a>3. å…¶ä»–</h3><ul><li>ç»“åˆçƒ­ç‚¹è¶‹åŠ¿ï¼Œ å¯¹ç½‘ç»œè¿›è¡Œè¡¥å……è®¾è®¡ï¼Œ å…¸å‹çš„ç»“åˆæ–¹æ¡ˆæœ‰ï¼štransformerã€æ³¨æ„åŠ›æœºåˆ¶ã€å›¾ç½‘ç»œã€å…‰åœºã€trsnsformer æ¨¡å‹</li><li>ç»“åˆ raw åŸŸåˆ° å›¾åƒåŸŸï¼ŒçœŸå®åœºæ™¯ã€åŸºäº DSP çš„è®¾è®¡ã€æ‰‹æœºç«¯ phoneçš„æš—å…‰å¢å¼º å’Œ è½»é‡çº§æš—å…‰å¢å¼ºè®¾è®¡æ–¹æ¡ˆ</li><li>å‡ ç¯‡è¾ƒæ–°çš„è®ºæ–‡ï¼šGLADNetã€DPEDã€Attention-Based å’Œ Attention-Guided</li></ul><h3 id="4-Datasets"><a href="#4-Datasets" class="headerlink" title="4. Datasets"></a>4. Datasets</h3><div class="table-container"><table><thead><tr><th>Datasets</th><th>Description</th><th>Download Link</th></tr></thead><tbody><tr><td><strong>LOL</strong></td><td>contains <strong>500 low/normal-light image pairs captured in real scenes</strong> and <strong>1000 synthetic image pairs</strong></td><td><a href="https://daooshee.github.io/BMVC2018website/">https://daooshee.github.io/BMVC2018website/</a></td></tr><tr><td><strong>SID</strong></td><td>contains <strong>5094 raw short-exposure images</strong>, each with a corresponding long-exposure reference image. Images were captured using two cameras: <strong>Sony Î±7S II</strong> and <strong>Fujifilm X-T2</strong></td><td><a href="http://vladlen.info/publications/learning-see-dark/">http://vladlen.info/publications/learning-see-dark/</a></td></tr><tr><td><strong>MIT-FiveK</strong></td><td><strong>5,000 photos</strong> in DNG formatï¼Œan Adobe Lightroom catalog with <strong>renditions by 5 experts</strong></td><td><a href="https://data.csail.mit.edu/graphics/fivek/">https://data.csail.mit.edu/graphics/fivek/</a></td></tr><tr><td><strong>DPED</strong></td><td>including <strong>4549 photos</strong> from <strong>Sony smartphone</strong>, <strong>5727</strong> from <strong>iPhone</strong> and <strong>6015 photos</strong> from <strong>BlackBerry</strong></td><td><a href="http://people.ee.ethz.ch/~ihnatova/">http://people.ee.ethz.ch/~ihnatova/</a></td></tr><tr><td><strong>ExDARK</strong></td><td>a collection of <strong>7,363 low-light images</strong> from very low-light environments to twilight with <strong>12 object classes</strong>.</td><td><a href="https://github.com/cs-chan/Exclusively-Dark-Image-Dataset">https://github.com/cs-chan/Exclusively-Dark-Image-Dataset</a></td></tr></tbody></table></div><h3 id="5-ä¸Šé‡‡æ ·æ–¹å¼"><a href="#5-ä¸Šé‡‡æ ·æ–¹å¼" class="headerlink" title="5. ä¸Šé‡‡æ ·æ–¹å¼"></a>5. ä¸Šé‡‡æ ·æ–¹å¼</h3><ul><li><p>æ’å€¼[æ’å€¼åŒ…å«åŒçº¿æ€§æ’å€¼ã€ä¸‰çº¿æ€§æ’å€¼å’Œæœ€è¿‘é‚»æ’å€¼]</p><p>å¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼šæ’å€¼ + å·ç§¯ã€‚ ä½¿ç”¨åŒçº¿æ€§æ’å€¼å’Œæœ€è¿‘é‚»æ’å€¼ä¸¤è€…æ‰€å¾—åˆ°çš„æ•ˆæœå¹¶æ²¡æœ‰ä»€ä¹ˆå·®å¼‚ï¼Œ å› æ­¤æœ€å»ºè®®çš„æ–¹æ¡ˆæ˜¯ï¼šæœ€è¿‘é‚»æ’å€¼ + å·ç§¯</p></li><li><p>åå·ç§¯ï¼šä½¿ç”¨åå·ç§¯ä¼šäº§ç”Ÿæ£‹ç›˜æ ¼æ•ˆåº”ã€‚</p><p>ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç° ï¼Ÿå½“å·ç§¯æ ¸å¤§å°ä¸èƒ½è¢«æ­¥é•¿æ•´é™¤çš„æ—¶å€™ï¼Œä¼šå‡ºç°æ£‹ç›˜ç°è±¡</p><p>ä¸ºä»€ä¹ˆä¼šå‡ºç° ï¼Ÿ</p></li><li><p>é€šé“é‡ç»„ pixelshuffle</p></li></ul><h3 id="6-å¸¸è§çš„-loss-å’Œè¯„ä»·æŒ‡æ ‡"><a href="#6-å¸¸è§çš„-loss-å’Œè¯„ä»·æŒ‡æ ‡" class="headerlink" title="6. å¸¸è§çš„ loss å’Œè¯„ä»·æŒ‡æ ‡"></a>6. å¸¸è§çš„ loss å’Œè¯„ä»·æŒ‡æ ‡</h3><h5 id="1-pixel-loss"><a href="#1-pixel-loss" class="headerlink" title="(1) pixel loss"></a>(1) pixel loss</h5><p>â€‹     é’ˆå¯¹äºåƒç´ ç‚¹çš„æŸå¤±ï¼Œ æ¯”è¾ƒå¸¸è§ï¼Œ å¦‚å¸¸è§çš„ l1 lossã€l2 lossã€charborn loss ç­‰ã€‚</p><h5 id="2-retinex-é‡‡ç”¨äº†ä¸‰ç§æŸå¤±å‡½æ•°"><a href="#2-retinex-é‡‡ç”¨äº†ä¸‰ç§æŸå¤±å‡½æ•°" class="headerlink" title="(2) retinex é‡‡ç”¨äº†ä¸‰ç§æŸå¤±å‡½æ•°"></a>(2) retinex é‡‡ç”¨äº†ä¸‰ç§æŸå¤±å‡½æ•°</h5><ul><li>é‡å»ºæŸå¤±(é¦–å…ˆå°†å¢å¼ºåçš„å…‰ç…§å›¾ * åå°„å›¾å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„å›¾åƒï¼Œ ç„¶åå’Œæ­£å¸¸çš„å›¾åƒæ±‚ l1æŸå¤±å³å¯)</li><li>åå°„ä¸€è‡´æ€§æŸå¤±(ä¸¤å¼ åˆ†è§£çš„åå°„å›¾æ±‚ l1 æŸå¤±å³å¯)</li><li>å…‰ç…§å¹³æ»‘æŸå¤±: æ ¹æ®ä¸€äº›å…ˆéªŒçŸ¥è¯†ï¼Œ ä¸€å¼ è‡ªç„¶çš„å›¾ç‰‡çš„æ¢¯åº¦æ˜¯è¶‹äºé›¶çš„ï¼Œ ä¸€å¼ å›¾ç‰‡ï¼Œå…¶å˜åŒ–çš„éƒ¨åˆ†å¾€å¾€å¾ˆå°‘ã€‚è¿™è¢«å«åšåŒºåŸŸä¸€è‡´æ€§ã€‚</li></ul><p>åŸå§‹çš„ TV loss ç›´æ¥å®šä¹‰ä¸ºå¦‚ä¸‹å…¬å¼ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ¢¯åº¦å¯¹å…¶è¿›è¡Œå·ç§¯ï¼Œå¾—åˆ°çš„ç»“æœå–ç»å¯¹å€¼ç„¶ååŠ å’Œã€‚</p><script type="math/tex; mode=display">V(y) = \sum_{i,j} \sqrt{|y_{i+1,j} - y_{i,j}|^2} + \sqrt{|y_{i,j+1} - y_{i,j}|^2} = \sum_{i,j} |y_{i+1,j} - y_{i,j}| + |y_{i,j+1} - y_{i,j}|</script><p>ä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ªæŸå¤±å‡½æ•°?  è¿™æ ·å¯ä»¥å°½å¯èƒ½çš„è®©å›¾ç‰‡å¹³æ»‘ï¼Œå› ä¸ºè¿™é‡Œè®©ç›¸é‚»ä¸¤ä¸ªåƒç´ ç‚¹çš„å€¼ç›¸è¿‘ã€‚ è¿™é‡Œçš„å…‰ç…§å¹³æ»‘æŸå¤±åŠ æƒäº†åå°„å›¾çš„ $e^{(-\lambda(\bigtriangledown(åå°„å›¾))}$ã€‚ä¸»è¦ç›®çš„æ˜¯è®©åå°„å›¾æ¯”è¾ƒå¹³æ»‘çš„åœ°æ–¹åœ¨å…‰ç…§å›¾ä¸Šä¹Ÿæ¯”è¾ƒå¹³æ»‘ã€‚å½“è¯´æ˜åå°„å›¾è¶Šå¹³æ»‘ï¼Œåå°„å›¾ä¸¤ä¸ªåƒç´ ç‚¹çš„å·®å€¼è¶Šå°ï¼Œå¯¹åº”çš„  $e^{(-\lambda(\bigtriangledown(åå°„å›¾))}$ è¶Šå¤§ï¼Œ å¯¹ä¸¤ç‚¹çš„å…‰ç…§å›¾æ–½åŠ çš„çº¦æŸè¶Šå¤§ã€‚å…‰ç…§å›¾æ‰æ›´å¹³æ»‘ã€‚</p><h5 id="3-å…¶ä»–-1"><a href="#3-å…¶ä»–-1" class="headerlink" title="(3) å…¶ä»–"></a>(3) å…¶ä»–</h5><ul><li><p>æ¢¯åº¦æŸå¤± -&gt;  TV(æ€»å˜åˆ†) -&gt; retinex å’Œ kind ä¸­çš„å…‰ç…§å¹³æ»‘æŸå¤±</p></li><li><p>ssim lossï¼šæ¯”è¾ƒçš„ä¸å•å•æ˜¯å•ä¸€çš„åƒç´ å€¼çš„å·®å¼‚ï¼Œå…¶çº¹ç†å’Œè´¨æ„Ÿæ¯”è¾ƒé‡è¦ !</p><p>ç»™å®šä¸€å¼ å›¾åƒï¼Œ ç¨å¾®(åŠ å‡)åƒç´ å€¼ï¼Œ å…¶ç»“æ„(strusture) åŸºæœ¬ä¸å˜ï¼Œ ä½†æ˜¯å…¶ psnr å´ä¼šå‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼Œpsnr åŸºäº l2ï¼Œ æ‰€ä»¥ l2 æŸå¤±å‡½æ•°å¹¶ä¸é€‚åˆã€‚å¯¹äº æš—å…‰å¢å¼ºä»»åŠ¡ï¼Œ å…¶çº¹ç†ã€è´¨æ„Ÿæ›´é‡è¦ï¼Œè€Œäº®åº¦åº”è¯¥æœ‰æ‰€è°ƒæ•´ã€‚</p></li><li><p>zero loss ã€æ„ŸçŸ¥æŸå¤±(textureã€content)ã€gan æŸå¤±</p></li></ul><h3 id="7-ä¸€äº›æ€è€ƒ"><a href="#7-ä¸€äº›æ€è€ƒ" class="headerlink" title="7. ä¸€äº›æ€è€ƒ"></a>7. ä¸€äº›æ€è€ƒ</h3><ul><li><p>æš—å…‰å¢å¼ºå’Œ SR / image denoising æœ‰ä»€ä¹ˆä¸åŒ?<br>SR / DeNoising é€€åŒ–çš„å›¾ç‰‡çš„åƒç´ å€¼åœ¨åŸå›¾é™„è¿‘ï¼Œè€Œå¹³å‡åƒç´ å€¼å‡ ä¹ä¸å˜ã€‚</p></li><li><p>ä¸ºå•¥æ²¡æœ‰ä½¿ç”¨ å…¨å±€æ®‹å·®è¿æ¥?     a. æš—å…‰å¢å¼º(ä¸è¶…åˆ†å’Œå»å™ªç›¸æ¯”) é€€åŒ–å›¾åƒä¸åŸå›¾å·®å¼‚å¤§ï¼Œ å› æ­¤å­¦ä¹ ä¸€ä¸ªæ®‹å·®å›¾éå¸¸å›°éš¾   b. æ¨¡å—å·²ç»å­˜åœ¨å±€éƒ¨æ®‹å·®è¿æ¥</p></li><li><p>å…‰ç…§ä¼°è®¡(illumination estimation)å’Œä½å…‰ç…§å¢å¼º(low-light enhancement)çš„åŒºåˆ«ï¼Ÿ</p><p>å…‰ç…§ä¼°è®¡æ˜¯ä¸€ä¸ªä¸“é—¨çš„åº•å±‚è§†è§‰ä»»åŠ¡ï¼ˆä¾‹å¦‚[1,2,6]ï¼‰ï¼Œå®ƒçš„è¾“å‡ºç»“æœå¯ä»¥è¢«ç”¨åˆ°å…¶å®ƒä»»åŠ¡ä¸­ï¼Œä¾‹å¦‚å›¾åƒå¢å¼ºã€å›¾åƒæ¢å¤ã€‚è€Œä½å…‰ç…§å¢å¼ºæ˜¯é’ˆå¯¹ç…§æ˜ä¸è¶³çš„å›¾åƒå­˜åœ¨çš„ä½äº®åº¦ã€ä½å¯¹æ¯”åº¦ã€å™ªå£°ã€ä¼ªå½±ç­‰é—®é¢˜è¿›è¡Œå¤„ç†ï¼Œæå‡è§†è§‰è´¨é‡ã€‚ä½å…‰ç…§å¢å¼ºæ–¹æ³•æœ‰ä¸¤ç§å¸¸è§çš„æ¨¡å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥ end-to-end è®­ç»ƒï¼Œå¦ä¸€ç§åˆ™åŒ…å«äº†å…‰ç…§ä¼°è®¡ã€‚</p></li><li></li><li></li></ul>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¨ç†å¼•æ“è®¾è®¡æŠ€å·§</title>
    <link href="/2020/09/13/%E6%8E%A8%E7%90%86%E5%BC%95%E6%93%8E%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7/"/>
    <url>/2020/09/13/%E6%8E%A8%E7%90%86%E5%BC%95%E6%93%8E%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h4 id="1-åŸºäºC-C-çš„åŸºæœ¬ä¼˜åŒ–"><a href="#1-åŸºäºC-C-çš„åŸºæœ¬ä¼˜åŒ–" class="headerlink" title="1. åŸºäºC/C++çš„åŸºæœ¬ä¼˜åŒ–"></a>1. åŸºäºC/C++çš„åŸºæœ¬ä¼˜åŒ–</h4><ol><li><p>ç¼–è¯‘å™¨å¾ˆç‰›é€¼ï¼ŒGCC/CLANG éƒ½æœ‰è¿è¡Œé€Ÿåº¦çš„ä¼˜åŒ–é€‰é¡¹ï¼Œæ‰“å¼€è¿™äº›é€‰é¡¹èƒ½å¸®åŠ©ç¨‹åºæ˜¾è‘—æå‡é€Ÿåº¦ï¼Œè™½ç„¶è¿™è¿˜è¿œè¿œä¸å¤Ÿï¼Œä½†èŠèƒœäºæ— å§ã€‚</p><p>ä¸‹é¢æ˜¯ ncnn ç¤ºä¾‹é¡¹ç›®ä¸­çš„ä¸€æ®µä»£ç :</p><pre><code class="hljs cmake"><span class="hljs-comment"># ncnn/examples/squeezencnn/jni/Android.mk</span>LOCAL_CFLAGS := -O2 -fvisibility=hidden -fomit-frame-pointer -fstrict-aliasing -ffunction-sections -fdata-sections -ffast-<span class="hljs-keyword">math</span>LOCAL_CPPFLAGS := -O2 -fvisibility=hidden -fvisibility-inlines-hidden -fomit-frame-pointer -fstrict-aliasing -ffunction-sections -fdata-sections -ffast-<span class="hljs-keyword">math</span>LOCAL_LDFLAGS += -Wl,--gc-sections</code></pre><p>ä»¥å‰å·¥ä½œæ—¶å€™å†™çš„CMakeLists ä¸­çš„ä»£ç ï¼š</p><pre><code class="hljs cmake"><span class="hljs-comment"># set(CMAKE_BUILD_TYPE Release)</span><span class="hljs-keyword">if</span> (CMAKE_BUILD_TYPE <span class="hljs-keyword">STREQUAL</span> <span class="hljs-string">&quot;Debug&quot;</span>)    <span class="hljs-keyword">set</span>(CMAKE_CXX_FLAGS_DEBUG <span class="hljs-string">&quot;$ENV&#123;CXXFLAGS&#125; -O0 -Wall -g2 -ggdb&quot;</span>)    <span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;CMAKE_BUILD_TYPE = Debug&quot;</span>)<span class="hljs-keyword">else</span>()    <span class="hljs-keyword">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="hljs-string">&quot;$ENV&#123;CXXFLAGS&#125; -O3 -Wall&quot;</span>)    <span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;CMAKE_BUILD_TYPE = Release&quot;</span>)<span class="hljs-keyword">endif</span>()</code></pre></li><li><p>ä¹¦å†™é«˜æ•ˆçš„Cä»£ç ã€‚å¾ªç¯å±•å¼€ã€å†…è”ã€åˆ†æ”¯ä¼˜åŒ–ï¼Œé¿å…é™¤æ³•ï¼ŒæŸ¥è¡¨ç­‰ä¼˜åŒ–å°æŠ€å·§è¦æ»šç“œçƒ‚ç†Ÿï¼Œä¿¡æ‰‹æ‹ˆæ¥ã€‚</p></li><li><p>å¿…é¡»çœ‹å¾—æ‡‚æ±‡ç¼–ï¼Œå³ä½¿ä½ ä¸å†™ï¼Œä¹Ÿè¦çŸ¥é“ç¼–è¯‘å™¨ç¼–è¯‘å‡ºæ¥çš„æ±‡ç¼–ä»£ç æ•ˆç‡å¦‚ä½•ã€‚è¿™æ ·ä½ å¯ä»¥é€šè¿‡è°ƒæ•´C/C++ä»£ç ï¼Œè®©ç¼–è¯‘å™¨ç”Ÿæˆä½ éœ€è¦çš„ä»£ç ã€‚</p></li></ol><h4 id="2-ç¼“å­˜å‹å¥½"><a href="#2-ç¼“å­˜å‹å¥½" class="headerlink" title="2. ç¼“å­˜å‹å¥½"></a>2. ç¼“å­˜å‹å¥½</h4><h5 id="ï¼ˆ1ï¼‰å°‘ç”¨å†…å­˜"><a href="#ï¼ˆ1ï¼‰å°‘ç”¨å†…å­˜" class="headerlink" title="ï¼ˆ1ï¼‰å°‘ç”¨å†…å­˜"></a>ï¼ˆ1ï¼‰å°‘ç”¨å†…å­˜</h5><h5 id="ï¼ˆ2ï¼‰è¿ç»­è®¿é—®ã€å¯¹é½è®¿é—®ã€åˆå¹¶è®¿é—®ã€æ˜¾ç¤ºå¯¹é½æ•°æ®åŠ è½½ã€ç¼“å­˜é¢„å–"><a href="#ï¼ˆ2ï¼‰è¿ç»­è®¿é—®ã€å¯¹é½è®¿é—®ã€åˆå¹¶è®¿é—®ã€æ˜¾ç¤ºå¯¹é½æ•°æ®åŠ è½½ã€ç¼“å­˜é¢„å–" class="headerlink" title="ï¼ˆ2ï¼‰è¿ç»­è®¿é—®ã€å¯¹é½è®¿é—®ã€åˆå¹¶è®¿é—®ã€æ˜¾ç¤ºå¯¹é½æ•°æ®åŠ è½½ã€ç¼“å­˜é¢„å–"></a>ï¼ˆ2ï¼‰è¿ç»­è®¿é—®ã€å¯¹é½è®¿é—®ã€åˆå¹¶è®¿é—®ã€æ˜¾ç¤ºå¯¹é½æ•°æ®åŠ è½½ã€ç¼“å­˜é¢„å–</h5><h4 id="3-å¤šçº¿ç¨‹"><a href="#3-å¤šçº¿ç¨‹" class="headerlink" title="3. å¤šçº¿ç¨‹"></a>3. å¤šçº¿ç¨‹</h4><h5 id="1-OpenMP"><a href="#1-OpenMP" class="headerlink" title="1. OpenMP"></a>1. OpenMP</h5><p>OpenMPä¼šè‡ªåŠ¨ä¸ºå¾ªç¯åˆ†é…çº¿ç¨‹ï¼Œä½¿ç”¨OpenMPåŠ é€Ÿåªéœ€è¦åœ¨ä¸²è¡Œä»£ç ä¸­æ·»åŠ ç¼–è¯‘æŒ‡ä»¤ä»¥åŠå°‘é‡APIå³å¯ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ŒåŠ é€Ÿæ¯”å¤§çº¦èƒ½è¾¾åˆ°0.75*coresã€‚</p><pre><code class="hljs cpp"><span class="hljs-comment">// ncnn/src/layer/relu.cpp</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ReLU::forward_inplace</span><span class="hljs-params">(Mat&amp; bottom_top_blob, <span class="hljs-keyword">const</span> Option&amp; opt)</span> <span class="hljs-keyword">const</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">if</span> (bottom_top_blob.elemsize == <span class="hljs-number">1u</span>)        <span class="hljs-keyword">return</span> ReLU::forward_inplace_int8(bottom_top_blob, opt);    <span class="hljs-keyword">int</span> w = bottom_top_blob.w;    <span class="hljs-keyword">int</span> h = bottom_top_blob.h;    <span class="hljs-keyword">int</span> channels = bottom_top_blob.c;    <span class="hljs-keyword">int</span> size = w * h;    <span class="hljs-keyword">if</span> (slope == <span class="hljs-number">0.f</span>)    &#123;        <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> omp parallel for num_threads(opt.num_threads)</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q=<span class="hljs-number">0</span>; q&lt;channels; q++)        &#123;            <span class="hljs-keyword">float</span>* ptr = bottom_top_blob.channel(q);            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)            &#123;                <span class="hljs-keyword">if</span> (ptr[i] &lt; <span class="hljs-number">0</span>)                    ptr[i] = <span class="hljs-number">0</span>;            &#125;        &#125;    &#125;    <span class="hljs-keyword">else</span>    &#123;        #pragma omp parallel <span class="hljs-keyword">for</span> num_threads(opt.num_threads)        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> q=<span class="hljs-number">0</span>; q&lt;channels; q++)        &#123;            <span class="hljs-keyword">float</span>* ptr = bottom_top_blob.channel(q);            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++)            &#123;                <span class="hljs-keyword">if</span> (ptr[i] &lt; <span class="hljs-number">0</span>)                    ptr[i] *= slope;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>â€‹    ä½†å¹¶éæ‰€æœ‰å¾ªç¯éƒ½é€‚åˆåšå¤šçº¿ç¨‹ä¼˜åŒ–ï¼Œå¦‚æœæ¯æ¬¡å¾ªç¯åªåšäº†éå¸¸å°‘çš„äº‹æƒ…ï¼Œé‚£ä¹ˆä½¿ç”¨å¤šçº¿ç¨‹ä¼šå¾—ä¸å¿å¤±ã€‚å®é™…è¿ç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>#pragma omp parallel for if (cond)</code> è¯­å¥æ¥åˆ¤æ–­runtimeè¿‡ç¨‹ä¸­æ˜¯å¦è¦å¯ç”¨å¤šçº¿ç¨‹ã€‚</p><h5 id="åŠ¨æ€è°ƒåº¦"><a href="#åŠ¨æ€è°ƒåº¦" class="headerlink" title="åŠ¨æ€è°ƒåº¦"></a>åŠ¨æ€è°ƒåº¦</h5><h5 id="ç¨€ç–åŒ–"><a href="#ç¨€ç–åŒ–" class="headerlink" title="ç¨€ç–åŒ–"></a>ç¨€ç–åŒ–</h5><h5 id="å®šç‚¹åŒ–"><a href="#å®šç‚¹åŒ–" class="headerlink" title="å®šç‚¹åŒ–"></a>å®šç‚¹åŒ–</h5><h5 id="NEON-æ±‡ç¼–"><a href="#NEON-æ±‡ç¼–" class="headerlink" title="NEON æ±‡ç¼–"></a>NEON æ±‡ç¼–</h5><h4 id="4-å†…å­˜ç²¾ç®€"><a href="#4-å†…å­˜ç²¾ç®€" class="headerlink" title="4. å†…å­˜ç²¾ç®€"></a>4. å†…å­˜ç²¾ç®€</h4><p>æ¯ä¸ªlayeréƒ½ä¼šäº§ç”Ÿblobï¼Œé™¤äº†æœ€åçš„ç»“æœå’Œå¤šåˆ†æ”¯ä¸­é—´ç»“æœï¼Œå¤§éƒ¨åˆ†blobéƒ½å¯ä»¥ä¸ä¿ç•™ï¼Œå¼€å¯ncnnçš„è½»æ¨¡å¼å¯ä»¥åœ¨è¿ç®—åè‡ªåŠ¨å›æ”¶ï¼Œçœä¸‹å†…å­˜ã€‚  å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2020/09/13/%E6%8E%A8%E7%90%86%E5%BC%95%E6%93%8E%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7/1.png" alt>æŸç½‘ç»œç»“æ„ä¸º <code>Conv</code> -&gt; <code>Bias</code> -&gt; <code>ReLU</code> -&gt; <code>Concat</code>ï¼Œåœ¨è½»æ¨¡å¼ä¸‹ï¼Œå‘ncnnç´¢è¦Concatç»“æœæ—¶ï¼ŒConvç»“æœä¼šåœ¨è¿ç®—Biasæ—¶è‡ªåŠ¨å›æ”¶ï¼Œè€ŒBaisç»“æœä¼šåœ¨è¿ç®—ReLUæ—¶è‡ªåŠ¨å›æ”¶ï¼Œè€ŒReLUç»“æœä¼šåœ¨è¿ç®—Concatæ—¶è‡ªåŠ¨å›æ”¶, æœ€ååªä¿ç•™Concatç»“æœï¼Œåé¢å†éœ€è¦Cç»“æœä¼šç›´æ¥è·å¾—ï¼Œæ»¡è¶³ç»å¤§éƒ¨åˆ†æ·±åº¦ç½‘ç»œçš„ä½¿ç”¨æ–¹å¼ã€‚ncnn å¼€å¯è½»æ¨¡å¼ä»…éœ€è¦ä¸€è¡Œä»£ç :</p><pre><code class="hljs cpp">set_light_mode(<span class="hljs-literal">true</span>)</code></pre><p>ç›¸å…³å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://m.facebook.com/notes/facebook-engineering/three-optimization-tips-for-c/10151361643253920">Three-optimization-tips-for-c</a></p><p><a href="https://www.ibm.com/developerworks/cn/aix/library/au-aix-openmp-framework/index.html">é€šè¿‡GCCå­¦ä¹ OpenMPæ¡†æ¶</a></p><p><a href="https://www.openmp.org/">OPEN MPå®˜ç½‘</a></p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>rk3399ç³»ç»Ÿçƒ§å†™</title>
    <link href="/2020/08/18/rk3399%E7%B3%BB%E7%BB%9F%E7%83%A7%E5%86%99/"/>
    <url>/2020/08/18/rk3399%E7%B3%BB%E7%BB%9F%E7%83%A7%E5%86%99/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€-ç›¸å…³å·¥å…·çš„å‡†å¤‡"><a href="#ä¸€-ç›¸å…³å·¥å…·çš„å‡†å¤‡" class="headerlink" title="ä¸€. ç›¸å…³å·¥å…·çš„å‡†å¤‡"></a>ä¸€. ç›¸å…³å·¥å…·çš„å‡†å¤‡</h4><ol><li>ä¸‹è½½ çƒ§å†™å·¥å…·:</li></ol><pre><code class="hljs shell">git clone https://github.com/rockchip-linux/rkbin.git</code></pre><ol><li>ä¸‹è½½ç›¸å…³çš„ ubuntu é•œåƒã€‚ä¸‹è½½åœ°å€  <a href="https://github.com/lanseyujie/tn3399_v3/release">https://github.com/lanseyujie/tn3399_v3/release</a></li></ol><h4 id="äºŒ-åˆ·æœº"><a href="#äºŒ-åˆ·æœº" class="headerlink" title="äºŒ. åˆ·æœº"></a>äºŒ. åˆ·æœº</h4><ol><li>æ¿å¡è¿›å…¥åˆ·æœºæ¨¡å¼</li></ol><p>è¿æ¥ usb-c å’Œ PC ä¸»æœºã€‚æ–­å¼€ç”µæºï¼Œ æŒ‰ä½ recovey é”®ï¼Œ ç„¶åæ’ä¸Šç”µæºï¼Œ è®©æ¿å¡è¿›å…¥åˆ·æœºæ¨¡å¼ã€‚</p><ol><li><p>çŸ­æ¥æ¿å¡åé¢çš„ä¸¤ä¸ªè§¦ç‚¹ï¼Œ è¿›å…¥ maskrom æ¨¡å¼ã€‚</p></li><li><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œ å°†ç›¸åº”çš„é•œåƒåˆ·å…¥ æ¿å¡</p><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> rkdeveloptool db rk<span class="hljs-number">3399</span>_loader_v<span class="hljs-number">1</span>.<span class="hljs-number">24</span>.<span class="hljs-number">126</span>.bin<span class="hljs-attribute">sudo</span> rkdeveloptool ef<span class="hljs-attribute">sudo</span> rkdeveloptool wl <span class="hljs-number">0</span>x<span class="hljs-number">0</span> system.img</code></pre></li></ol><h4 id="ä¸‰-ç™»å½•"><a href="#ä¸‰-ç™»å½•" class="headerlink" title="ä¸‰. ç™»å½•"></a>ä¸‰. ç™»å½•</h4><ol><li><p>é‡æ–°å¯åŠ¨å¼€ç”µè„‘ï¼Œ å°±å¯ä»¥è¿›å…¥ ubuntu ç³»ç»Ÿï¼Œ é»˜è®¤ç”¨æˆ·åæ˜¯ root  å¯†ç æ˜¯ 1234</p></li><li><p>åˆ†åŒºæ‰©å®¹</p><pre><code class="hljs shell">sudo apt install -y partedsudo parted /dev/mmcblk2unit sprintresizepart 5 100%printQsudo resize2fs /dev/mmcblk2p5</code></pre></li><li><p>å¯ä»¥å®‰è£… ç›¸å…³çš„æ¡Œé¢ç³»ç»Ÿï¼Œ ubuntu æ–°å¢è´¦å·å¾ªç¯ç™»é™†æ¡Œé¢ã€‚åªæ˜¯åœ¨æ·»åŠ æ–°ç”¨æˆ·çš„æ—¶å€™éœ€è¦ä½¿ç”¨</p></li></ol><pre><code class="hljs shell">useradd -m usrname # åŠ  m å‚æ•°ä¼šåˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œ å¦‚æœæ²¡æœ‰åˆ™ä¼šå¯¼è‡´å¾ªç¯ç™»å½•</code></pre><h4 id="å‚è€ƒç½‘å€"><a href="#å‚è€ƒç½‘å€" class="headerlink" title="å‚è€ƒç½‘å€:"></a>å‚è€ƒç½‘å€:</h4><p><a href="https://github.com/lanseyujie/tn3399_v3">https://github.com/lanseyujie/tn3399_v3</a>     # å¾ˆé½å…¨çš„èµ„æ–™åŒ…</p><p><a href="https://naivekun.tk/">https://naivekun.tk/</a></p>]]></content>
    
    
    <categories>
      
      <category>DL_Deploy</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorch2ncnn</title>
    <link href="/2020/05/17/pytorch2ncnn/"/>
    <url>/2020/05/17/pytorch2ncnn/</url>
    
    <content type="html"><![CDATA[<p>å€ŸåŠ© onnx å®ç° pytorch åˆ° ncnn çš„è½¬æ¢</p><a id="more"></a><p><strong>1. å®‰è£… onnx</strong> </p><pre><code class="hljs shell">pip3 install onnx</code></pre><p><strong>2. pytorch model &gt; onnx</strong></p><pre><code class="hljs python"><span class="hljs-keyword">from</span> models.pfld <span class="hljs-keyword">import</span> PFLDInference, AuxiliaryNet<span class="hljs-keyword">from</span> torch.autograd <span class="hljs-keyword">import</span> Variable<span class="hljs-keyword">import</span> onnx<span class="hljs-keyword">import</span> torchcheckpoint = torch.load(<span class="hljs-string">&quot;./checkpoint/snapshot/checkpoint.pth.tar&quot;</span>, map_location=<span class="hljs-string">&#x27;cpu&#x27;</span>)pfld_backbone = PFLDInference()pfld_backbone.load_state_dict(checkpoint[<span class="hljs-string">&#x27;pfld_backbone&#x27;</span>])dummy_input = Variable(torch.randn(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">112</span>, <span class="hljs-number">112</span>)) torch.onnx.export(plfd_backbone, dummy_input, <span class="hljs-string">&quot;output/plfd.onnx&quot;</span>)model = onnx.load(<span class="hljs-string">&#x27;output/pfld.onnx&#x27;</span>)</code></pre><p><strong>3. å®‰è£…ncnn</strong></p><p>(1) å®‰è£… protobuf</p><pre><code class="hljs shell">unzip protobuf-all-3.7.1.zipcd protobuf-all-3.7.1./configure --prefix=/usr/localmake -j4make check -j4sudo make installsudo ldconfig</code></pre><p>(2) å®‰è£… opencvï¼Œ opencv è¿™é‡Œç”¨çš„æ˜¯2.4.13.6</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment"># æºç ç¼–è¯‘</span></span>unzip opencv-2.4.13.6.zipcd opencv-2.4.13.6mkdir buildcd buildcmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..make -j8sudo make installsudo ldconfig</code></pre><p>(3) å®‰è£…ä¾èµ–é¡¹</p><pre><code class="hljs shell">sudo apt-get install build-essentialsudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-devsudo apt-get install  libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev</code></pre><p>(4) æŠŠncnnçš„æºç cloneä¸‹æ¥ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦æƒ³ä½¿ç”¨toolsä¸‹é¢çš„onnxè½¬æ¢å·¥å…·ã€‚</p><p>è¿™é‡Œä½œä¸€ç‚¹ä¿®æ”¹ï¼Œpytorch1.0ä¹‹åæ”¯æŒ0ç»´çš„å¼ é‡ï¼Œè¿™åœ¨ncnnè½¬æ¢ä¸­ä¼šå‡ºç°é—®é¢˜ï¼Œä¿®æ”¹onnx2ncnn.cppä¸­Constantå’ŒMemoryDataçš„è½¬æ¢ï¼Œ<strong>æœ‰2å¤„</strong></p><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> (M.dims_size() == <span class="hljs-number">1</span>) &#123;   <span class="hljs-built_in">fprintf</span>(pp, <span class="hljs-string">&quot; 0=%d&quot;</span>, (<span class="hljs-keyword">int</span>)M.dims(<span class="hljs-number">0</span>));&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (M.dims_size() == <span class="hljs-number">2</span>) &#123;    <span class="hljs-built_in">fprintf</span>(pp, <span class="hljs-string">&quot; 0=%d&quot;</span>, (<span class="hljs-keyword">int</span>)M.dims(<span class="hljs-number">1</span>));    <span class="hljs-built_in">fprintf</span>(pp, <span class="hljs-string">&quot; 1=%d&quot;</span>, (<span class="hljs-keyword">int</span>)M.dims(<span class="hljs-number">0</span>));&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (M.dims_size() == <span class="hljs-number">3</span>) &#123;    <span class="hljs-built_in">fprintf</span>(pp, <span class="hljs-string">&quot; 0=%d&quot;</span>, (<span class="hljs-keyword">int</span>)M.dims(<span class="hljs-number">2</span>));    <span class="hljs-built_in">fprintf</span>(pp, <span class="hljs-string">&quot; 1=%d&quot;</span>, (<span class="hljs-keyword">int</span>)M.dims(<span class="hljs-number">1</span>));    <span class="hljs-built_in">fprintf</span>(pp, <span class="hljs-string">&quot; 2=%d&quot;</span>, (<span class="hljs-keyword">int</span>)M.dims(<span class="hljs-number">0</span>));&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (get_tensor_proto_data_size(M)==<span class="hljs-number">1</span>) &#123;    <span class="hljs-comment">// scalar tensor!!! </span>    <span class="hljs-built_in">fprintf</span>(pp, <span class="hljs-string">&quot; 0=1&quot;</span>);&#125;</code></pre><p>(3) ç¼–è¯‘ ncnn</p><pre><code class="hljs shell">cd ncnnmkdir -p buildcd buildcmake ..make -j4</code></pre><p>è¿™æ ·åœ¨ build/tools/onnx/ ç›®å½•ä¸‹å°±æœ‰è½¬æ¢å·¥å…· onnx2ncnn äº†</p><p><strong>4. ç®€åŒ–ä¸€äº›onnx æ¨¡å‹</strong></p><p>å…ˆåˆ«æ€¥ç€è½¬æ¢ï¼Œonnxè½¬æ¢æ¨¡å‹æ—¶æœ‰ä¸€äº›å†—ä½™ï¼Œæˆ‘ä»¬ç”¨å·¥å…·ç®€åŒ–ä¸€äº›onnxæ¨¡å‹</p><pre><code class="hljs shell">pip3 install onnx-simplifierpython3 -m onnxsim pfld.onnx pfld-sim.onnx</code></pre><p><strong>5.  onnx &gt; ncnn</strong></p><pre><code class="hljs shell">cd ~/xxx/ncnn/build/tools/onnx/./onnx2ncnn pfld-sim.onnx pfld-sim.param pfld-sim.bin</code></pre><p>ç°åœ¨å°±ç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶å¯ä»¥ä¾›ä½¿ç”¨: <strong>pfld-sim.bin</strong> å’Œ <strong>pfld-sim.param</strong></p><p><strong>6. ç¼–å†™ä¸€ä¸ªå¯ä»¥ä¾›è°ƒç”¨çš„ncnnæ–‡ä»¶è¿›è¡Œè°ƒç”¨å³å¯ã€‚</strong></p><p><strong>é”™è¯¯ä¿¡æ¯:</strong></p><p><strong>Q: Pythonä¸­Import Error: no module named â€˜pastâ€™é”™è¯¯ä»¥åŠè§£å†³æ–¹æ³•</strong></p><pre><code class="hljs shell">pip3 install future</code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>RNN</title>
    <link href="/2020/02/06/RNN/"/>
    <url>/2020/02/06/RNN/</url>
    
    <content type="html"><![CDATA[<hr><p>title: RNN<br>date: 2019-03-05 11:49:20<br>tags:</p><h2 id="mathjax-true"><a href="#mathjax-true" class="headerlink" title="mathjax: true"></a>mathjax: true</h2><p>â€‹        <strong>å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networkï¼‰</strong>æ˜¯ç”¨æ¥å»ºæ¨¡åºåˆ—åŒ–æ•°æ®çš„ä¸€ç§ä¸»æµæ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä¼ ç»Ÿçš„å‰é¦ˆç¥ç»ç½‘ç»œä¸€èˆ¬çš„è¾“å…¥éƒ½æ˜¯ä¸€ä¸ªå®šé•¿çš„å‘é‡ï¼Œæ— æ³•å¤„ç†å˜é•¿çš„åºåˆ—ä¿¡æ¯ï¼Œå³ä½¿é€šè¿‡ä¸€äº›æ–¹æ³•æŠŠåºåˆ—å¤„ç†æˆå®šé•¿çš„å‘é‡ï¼Œæ¨¡å‹ä¹Ÿå¾ˆéš¾æ•æ‰åºåˆ—ä¸­çš„é•¿è·ç¦»ä¾èµ–å…³ç³»ã€‚RNNåˆ™é€šè¿‡å°†ç¥ç»å…ƒä¸²è¡Œèµ·æ¥å¤„ç†åºåˆ—åŒ–çš„æ•°æ®ã€‚ç”±äºæ¯ä¸ªç¥ç»å…ƒéƒ½èƒ½ç”¨å®ƒçš„å†…éƒ¨å˜é‡ä¿å­˜ä¹‹å‰è¾“å…¥çš„åºåˆ—ä¿¡æ¯ï¼Œå› æ­¤æ•´ä¸ªåºåˆ—è¢«æµ“ç¼©æˆæŠ½è±¡çš„è¡¨ç¤ºï¼Œå¹¶å¯ä»¥æ®æ­¤è¿›è¡Œåˆ†ç±»æˆ–ç”Ÿæˆæ–°çš„åºåˆ—ã€‚è¿‘å¹´æ¥RNNåœ¨å¾ˆå¤šé¢†åŸŸå–å¾—çªç ´æ€§è¿›å±• â€”â€” æœºå™¨ç¿»è¯‘ã€åºåˆ—æ ‡æ³¨ã€å›¾åƒæè¿°ã€æ¨èç³»ç»Ÿã€æ™ºèƒ½èŠå¤©æœºå™¨äººã€è‡ªåŠ¨ä½œè¯ä½œæ›²ç­‰ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„å¾ªç¯ç¥ç»ç½‘ç»œç»“æ„ï¼š</p><p><img src="/2020/02/06/RNN/rnn.png" alt></p><p>ä¸€ä¸ªé•¿åº¦ä¸ºT çš„åºåˆ—ç”¨å¾ªç¯ç¥ç»ç½‘ç»œå»ºæ¨¡ï¼Œå±•å¼€ä¹‹åå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªTæ›¾çš„å‰é¦ˆç¥ç»ç½‘ç»œã€‚å…¶ä¸­ï¼Œç¬¬ $t$ å±‚çš„éšå«çŠ¶æ€ $h<em>{t}$ ç¼–ç äº†åºåˆ—ä¸­å‰ $t$ ä¸ªè¾“å…¥çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡å½“å‰çš„è¾“å…¥$x</em>{t}$å’Œä¸Šä¸€å±‚çš„çŠ¶æ€ $h<em>{t-1}$ è®¡ç®—å¾—åˆ°ï¼›æœ€åä¸€å±‚çš„çŠ¶æ€ $h</em>{t}$ ç¼–ç äº†æ•´ä¸ªåºåˆ—çš„ä¿¡æ¯ï¼Œå› æ­¤å¯ä»¥ä½œä¸ºæ•´ä¸ªåºåˆ—çš„å‹ç¼©è¡¨ç¤ºã€‚å¾ªç¯ç¥ç»ç½‘ç»œçš„å‰å‘ä¼ æ’­å…¬å¼ä¸º:</p><script type="math/tex; mode=display">net_{t} = Ux_{t} + Wh_{t-1}  \\h_{t} = f(net_{t})  \\y = g(Vh_{t})</script><p>â€‹    å…¶ä¸­ $f$ å’Œ $g$  ä¸ºæ¿€æ´»å‡½æ•°ï¼Œ$U$ ä¸ºè¾“å…¥å±‚åˆ°éšå«å±‚çš„æƒé‡çŸ©é˜µï¼Œ$W$ ä¸ºéšå«å±‚ä»ä¸Šä¸€æ—¶åˆ»åˆ°ä¸‹ä¸€æ—¶åˆ»çŠ¶æ€è½¬ç§»çš„æƒé‡çŸ©é˜µã€‚$f$ å¯ä»¥é€‰å– Tanh å‡½æ•° æˆ–è€… ReLU å‡½æ•°ï¼Œ$g$ å¯ä»¥é‡‡ç”¨ Softmax å‡½æ•°ã€‚</p><h5 id="é—®é¢˜1ï¼šå¾ªç¯ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜"><a href="#é—®é¢˜1ï¼šå¾ªç¯ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜" class="headerlink" title="é—®é¢˜1ï¼šå¾ªç¯ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜"></a>é—®é¢˜1ï¼šå¾ªç¯ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</h5><p>å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹çš„æ±‚è§£å¯ä»¥é‡‡ç”¨ <strong>BPTT</strong> ç®—æ³•å®ç°ï¼Œ BPTT å®é™…ä¸Šæ˜¯åå‘ä¼ æ’­ç®—æ³•çš„å˜ç§ã€‚è¿™ä¸€ç°è±¡ä¸»è¦æºäºæ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±ã€‚ä¼ ç»Ÿçš„å¾ªç¯ç¥ç»ç½‘ç»œæ¢¯åº¦å¯ä»¥å†™æˆè¿ä¹˜çš„å½¢å¼ï¼š</p><script type="math/tex; mode=display">\frac{\partial{net_t}}{\partial{net_1}} = \frac{\partial{net_t}}{\partial{net_{t-1}}}.\frac{\partial{net_{t-1}}}{\partial{net_{t-2}}} ...\frac{\partial{net_{2}}}{\partial{net_{1}}}</script><p>å…¶ä¸­ï¼Œ</p><script type="math/tex; mode=display">net_{t} = Ux_{t} + Wh_{t-1} \\h_{t} = f(net_{t}) \\y = g(Vh_{t})</script><script type="math/tex; mode=display">\frac{\partial{net_t}}{\partial{net_{t-1}}} = \frac{\partial{net_t}}{\partial{h_{t-1}}}\frac{\partial{h_{t-1}}}{\partial{net_{t-1}}}= W \cdot diag[f'(net_{t-1})] \\=   \begin{bmatrix}W_{11}f'(net_{t-1}^1)      &  \dots  & W_{1n}f'(net_{t-1}^n) \\\vdots  &  \ddots & \vdots  \\W_{n1}f'(net_{t-1}^1)       &  \dots  & W_{nn}f'(net_{t-1}^n) \end{bmatrix}</script><p>å…¶ä¸­ $n$ ä¸º éšå«å±‚ $h<em>{t-1}$  çš„ç»´åº¦ï¼ˆå³éšå«å•å…ƒçš„ä¸ªæ•°ï¼‰ï¼Œ $\frac{\partial{net_1}}{\partial{net</em>{t-1}}}$ å¯¹åº” $n*n$ ç»´çŸ©é˜µï¼Œåˆè¢«ç§°ä¸ºé›…å„æ¯”çŸ©é˜µã€‚</p><p>ç”±äºé¢„æµ‹è¯¯å·®æ˜¯æ²¿ç€ç¥ç»ç½‘ç»œçš„æ¯ä¸€å±‚åå‘ä¼ æ’­çš„ï¼Œå› æ­¤å½“é›…å„æ¯”çŸ©é˜µçš„æœ€å¤§ç‰¹å¾å€¼å¤§äº1æ—¶ï¼Œ éšç€ç¦»è¾“å‡ºè¶Šæ¥è¶Šè¿œï¼Œæ¯å±‚æ¢¯åº¦å¤§å°ä¼šå‘ˆæŒ‡æ•°å¢é•¿ï¼Œå¯¼è‡´æ¢¯åº¦çˆ†ç‚¸ï¼›åä¹‹ï¼Œè‹¥é›…å„æ¯”çŸ©é˜µçš„æœ€å¤§ç‰¹å¾å€¼å°äº1ï¼Œ æ¢¯åº¦çš„å¤§å°ä¼šå‘ˆæŒ‡æ•°å‡å°ï¼Œäº§ç”Ÿæ¢¯åº¦æ¶ˆå¤±ã€‚</p><p>æ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜å¯ä»¥é€šè¿‡æ¢¯åº¦è£å‰ªæ¥ç¼“è§£ï¼Œå³å½“æ¢¯åº¦çš„èŒƒå¼å¤§äºæŸä¸ªæŸä¸ªç»™å®šå€¼æ—¶ï¼Œ å¯¹æ¢¯åº¦è¿›è¡Œç­‰æ¯”æ”¶ç¼©ã€‚è€Œå¯¹äºæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œ å¯ä»¥é€šè¿‡åŠ å…¥é—¨å£æœºåˆ¶æ¥å¼¥è¡¥æ¢¯åº¦æ¶ˆå¤±å¸¦æ¥çš„æŸå¤±ã€‚</p><h5 id="é—®é¢˜-2ï¼š-åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨-ReLU-ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Ÿ"><a href="#é—®é¢˜-2ï¼š-åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨-ReLU-ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Ÿ" class="headerlink" title="é—®é¢˜ 2ï¼š åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨ ReLU ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Ÿ"></a>é—®é¢˜ 2ï¼š åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ˜¯å¦å¯ä»¥ä½¿ç”¨ ReLU ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Ÿ</h5><p>å¯ä»¥ï¼Œä½†æ˜¯éœ€è¦å°†$W$åˆå§‹åŒ–ä¸ºå•ä½çŸ©é˜µã€‚å¦‚æœä¸ç„¶ä¼šå¼•å‘ä¸¥é‡çš„æ•°å€¼é—®é¢˜å’Œæ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸é—®é¢˜ã€‚</p><p><strong>æ•°å€¼é—®é¢˜ï¼š</strong></p><p>è€ƒè™‘å‰å‘ä¼ æ’­å…¬å¼ï¼š</p><script type="math/tex; mode=display">net_{t} = Ux_{t} + Wh_{t-1}  \\h_{t} = f(net_{t})  \\</script><p>æ ¹æ®å‰å‘ä¼ æ’­å…¬å¼å‘å‰ä¼ é€’ä¸€å±‚ï¼Œå¯ä»¥å¾—åˆ°</p><script type="math/tex; mode=display">net_{t} = Ux_{t} + Wh_{t-1} + Wf(Ux_{t-1} + Wh_{t-2})</script><p>å¦‚æœä½¿ç”¨ $ReLU$ æ›¿ä»£å…¬å¼ä¸­çš„æ¿€æ´»å‡½æ•° $f$ï¼Œ å¹¶ä¸”å‡è®¾ $ReLU$ å¤„äºæ¿€æ´»åŒºåŸŸï¼ˆå³è¾“å…¥å¤§äº0ï¼‰ï¼Œåˆ™æœ‰ $f(x)=x, net<em>{t}=Ux</em>{t}+W(Ux<em>{t-1}+Wh</em>{t-2})$, ç»§ç»­å°†å…¶å±•å¼€ï¼Œ$net_{t}$ çš„è¡¨è¾¾å¼ä¸­æœ€ç»ˆå°†åŒ…å«$t$ ä¸ª $W$ è¿ä¹˜ã€‚å¦‚æœ $W$ ä¸æ˜¯å•ä½çŸ©é˜µï¼Œæœ€ç»ˆçš„ç»“æœå°†è¶‹äº $0$ æˆ–è€…æ— ç©·ï¼Œå¼•å‘ä¸¥é‡çš„æ•°å€¼é—®é¢˜ã€‚</p><p><strong>æ¢¯åº¦çˆ†ç‚¸æˆ–æ¢¯åº¦æ¶ˆå¤±ï¼š</strong></p><p>è€ƒè™‘å¾ªç¯ç¥ç»ç½‘ç»œçš„æ¢¯åº¦è®¡ç®—å…¬å¼ï¼š</p><script type="math/tex; mode=display">\frac{\partial{net_t}}{\partial{net_{t-1}}} = W \cdot diag[f'(net_{t-1})] \\=   \begin{bmatrix}W_{11}f'(net_{t-1}^1)      &  \dots  & W_{1n}f'(net_{t-1}^n) \\\vdots  &  \ddots & \vdots  \\W_{n1}f'(net_{t-1}^1)       &  \dots  & W_{nn}f'(net_{t-1}^n) \end{bmatrix}</script><p>å‡è®¾é‡‡ç”¨ $ReLU$ æ¿€æ´»å‡½æ•°ï¼Œä¸”ä¸€å¼€å§‹æ‰€æœ‰çš„ç¥ç»å…ƒéƒ½å¤„äºæ¿€æ´»ä¸­ï¼Œ åˆ™ $diag[fâ€™(net<em>{t-1})]$ ä¸ºå•ä½çŸ©é˜µï¼Œ æœ‰ $\frac{\partial{net_t}}{\partial{net</em>{t-1}}}=W$ã€‚åœ¨æ¢¯åº¦ç»è¿‡äº†$n$ å±‚ä¹‹åï¼Œ $\frac{\partial{net<em>{t}}}{\partial{net</em>{1}}} = W^n$ã€‚å¯ä»¥çœ‹åˆ°å³ä½¿é‡‡ç”¨äº† $ReLU$ æ¿€æ´»å‡½æ•°ï¼Œåªè¦$W$ ä¸æ˜¯å•ä½çŸ©é˜µï¼Œè¿˜æ˜¯ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±æˆ–è€…çˆ†ç‚¸çš„ç°è±¡ã€‚</p><h5 id="é—®é¢˜-3ï¼š-LSTM-æ˜¯å¦‚ä½•å®ç°é•¿çŸ­æœŸè®°å¿†åŠŸèƒ½çš„ï¼Ÿ"><a href="#é—®é¢˜-3ï¼š-LSTM-æ˜¯å¦‚ä½•å®ç°é•¿çŸ­æœŸè®°å¿†åŠŸèƒ½çš„ï¼Ÿ" class="headerlink" title="é—®é¢˜ 3ï¼š LSTM æ˜¯å¦‚ä½•å®ç°é•¿çŸ­æœŸè®°å¿†åŠŸèƒ½çš„ï¼Ÿ"></a>é—®é¢˜ 3ï¼š LSTM æ˜¯å¦‚ä½•å®ç°é•¿çŸ­æœŸè®°å¿†åŠŸèƒ½çš„ï¼Ÿ</h5><p>â€‹    ä¸ä¼ ç»Ÿçš„å¾ªç¯ç¥ç»ç½‘ç»œç›¸æ¯”ï¼ŒLSTM ä»ç„¶æ˜¯åŸºäº$x<em>t$ å’Œ $h</em>{t-1}$ æ¥è®¡ç®— $h_t$, åªä¸è¿‡å¯¹å†…éƒ¨çš„ç»“æ„è¿›è¡Œäº†æ›´åŠ ç²¾å¿ƒçš„è®¾è®¡ï¼ŒåŠ å…¥äº†è¾“å…¥é—¨ $i_t$ ã€é—å¿˜é—¨ $f_t$ ä»¥åŠè¾“å‡ºé—¨ $o_t$ ä¸‰ä¸ªé—¨å’Œä¸€ä¸ªå†…éƒ¨è®°å¿†å•å…ƒ $c_t$ã€‚</p><p>â€‹    è¾“å…¥é—¨æ§åˆ¶å½“å‰è®¡ç®—çš„æ–°çŠ¶æ€ä»¥å¤šå¤§ç¨‹åº¦æ›´æ–°åˆ°è®°å¿†å•å…ƒä¸­ï¼›é—å¿˜é—¨æ§åˆ¶å‰ä¸€æ­¥è®°å¿†å•å…ƒä¸­çš„ä¿¡æ¯æœ‰å¤šå¤§ç¨‹åº¦è¢«é—å¿˜æ‰ï¼›è¾“å‡ºé—¨æ§åˆ¶å½“å‰çš„è¾“å‡ºæœ‰å¤šå¤§ç¨‹åº¦å–å†³äºå½“å‰çš„è®°å¿†å•å…ƒã€‚</p><p>ç»å…¸çš„LSTMä¸­ï¼Œ ç¬¬ $t$ æ­¥çš„æ›´æ–°è®¡ç®—å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">i_t = \sigma(W_{i}x_{t}+U_{i}h_{t-1}+b_{i}) \\f_t = \sigma(W_{f}x_{t}+U_{f}h_{t-1}+b_{f}) \\o_t = \sigma(W_{o}x_{t}+U_{o}h_{t-1}+b_{o}) \\\widetilde{c_{t}} = Tanh(W_{c}x_{t}+U_{c}h_{t-1}) \\c_{t} = f_{t} \odot c_{t-1} + i_{t} \odot \widetilde{c_{t}} \\h_{t} = o_{t} \odot Tanh(c_t)</script><p>å…¶ä¸­<strong>è¾“å…¥é—¨  $i<em>{t}$ æ˜¯é€šè¿‡è¾“å…¥ $x_t$å’Œä¸Šä¸€æ­¥çš„éšå«å±‚è¾“å‡º $h</em>{t-1}$ æ¥è¿›è¡Œçº¿æ€§å˜æ¢ï¼Œå†ç»è¿‡æ¿€æ´»å‡½æ•° $\sigma$ å¾—åˆ°çš„</strong>ã€‚è¾“å…¥é—¨ $i<em>t$  çš„ç»“æœæ˜¯å‘é‡ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ˜¯ 0 åˆ° 1 ä¹‹é—´çš„å®æ•°ï¼Œ ç”¨äºæ§åˆ¶å„ç»´åº¦æµè¿‡é˜€é—¨çš„ä¿¡æ¯é‡ï¼›$W</em>{i}$ã€$U<em>i$ ä¸¤ä¸ªçŸ©é˜µæ ¸å‘é‡ $b_i$ ä¸ºè¾“å…¥é—¨çš„å‚æ•°ï¼Œæ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¾—åˆ°çš„ã€‚**é—å¿˜é—¨ $f</em>{t}$ å’Œè¾“å‡ºé—¨ $o<em>{t}$ çš„è®¡ç®—æ–¹å¼ä¸è¾“å…¥é—¨ç±»ä¼¼ï¼Œå®ƒä»¬æœ‰å„è‡ªçš„å‚æ•° $W$ã€$U$ å’Œ $b$ **ã€‚ ä¸ä¼ ç»Ÿçš„å¾ªç¯ç¥ç»ç½‘ç»œä¸é€šçš„æ˜¯ï¼Œä»ä¸Šä¸€ä¸ªè®°å¿†å•å…ƒçš„çŠ¶æ€ $c</em>{t-1}$ åˆ° å½“å‰çš„çŠ¶æ€ $c_{t} $ çš„è½¬ç§»ä¸ä¸€å®šå®Œå…¨å–å†³äºæ¿€æ´»å‡½æ•°è®¡ç®—å¾—åˆ°çš„çŠ¶æ€ï¼Œè¿˜ç”±è¾“å…¥é—¨å’Œé—å¿˜é—¨æ¥å…±åŒæ§åˆ¶ã€‚</p><p>â€‹    åœ¨ä¸€ä¸ªå¾ªç¯å¥½çš„ç½‘ç»œä¸­ï¼Œå½“è¾“å…¥çš„åºåˆ—ä¸­æ²¡æœ‰é‡è¦ä¿¡æ¯æ—¶ï¼Œ $LSTM$ çš„é—å¿˜é—¨çš„å€¼ä¼šæ¥è¿‘äº 1ï¼Œ è¾“å…¥é—¨çš„å€¼ä¼šæ¥è¿‘äº0ï¼Œ æ­¤æ—¶è¿‡å»çš„ä¿¡æ¯å›æœ¬ä¿å­˜ï¼Œä»è€Œå®ç°é•¿æœŸè®°å¿†åŠŸèƒ½ï¼›å½“è¾“å…¥åºåˆ—ä¸­å‡ºç°é‡è¦ä¿¡æ¯æ—¶ï¼Œ$LSTM$ åº”å½“å°†å…¶å­˜å…¥è®°å¿†ä¸­ï¼Œæ­¤æ—¶å…¶è¾“å…¥é—¨çš„å€¼ä¼šæ¥è¿‘äº1ï¼› å½“è¾“å…¥çš„åºåˆ—å‡ºç°äº†é‡è¦ä¿¡æ¯ï¼Œä¸”è¯¥ä¿¡æ¯æ„å‘³ç€ä¹‹å‰çš„è®°å¿†ä¸åœ¨é‡è¦æ—¶ï¼Œè¾“å…¥é—¨çš„å€¼ä¼šæ¥è¿‘äº1ï¼Œ è€Œé—å¿˜é—¨çš„å€¼æ¥è¿‘äº0ï¼Œ è¿™æ ·æ—§çš„è®°å¿†è¢«é—å¿˜ï¼Œæ–°çš„é‡è¦ä¿¡æ¯è¢«è®°å¿†ã€‚ç»è¿‡è¿™æ ·çš„è®¾è®¡ï¼Œæ•´ä¸ªç½‘ç»œæ›´å®¹æ˜“å­¦åˆ°åºåˆ—ä¹‹é—´çš„é•¿æœŸä¾èµ–ã€‚</p><p><img src="/2020/02/06/RNN/lstm_1.png" alt></p><h5 id="é—®é¢˜4ï¼šLSTM-é‡Œå„ä¸ªæ¨¡å—åˆ†åˆ«ä½¿ç”¨ä»€ä¹ˆæ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨åˆ«çš„æ¿€æ´»å‡½æ•°å—ï¼Ÿ"><a href="#é—®é¢˜4ï¼šLSTM-é‡Œå„ä¸ªæ¨¡å—åˆ†åˆ«ä½¿ç”¨ä»€ä¹ˆæ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨åˆ«çš„æ¿€æ´»å‡½æ•°å—ï¼Ÿ" class="headerlink" title="é—®é¢˜4ï¼šLSTM é‡Œå„ä¸ªæ¨¡å—åˆ†åˆ«ä½¿ç”¨ä»€ä¹ˆæ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨åˆ«çš„æ¿€æ´»å‡½æ•°å—ï¼Ÿ"></a>é—®é¢˜4ï¼šLSTM é‡Œå„ä¸ªæ¨¡å—åˆ†åˆ«ä½¿ç”¨ä»€ä¹ˆæ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨åˆ«çš„æ¿€æ´»å‡½æ•°å—ï¼Ÿ</h5><p>å…³äºæ¿€æ´»å‡½æ•°çš„é€‰å–ï¼Œ <strong>åœ¨ $LSTM$ ä¸­ï¼Œé—å¿˜é—¨ã€è¾“å…¥é—¨å’Œè¾“å‡ºé—¨ä½¿ç”¨ $Sigmoid$ å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼›åœ¨ç”Ÿæˆå€™é€‰è®°å¿†æ—¶ï¼Œä½¿ç”¨åŒæ›²æ­£åˆ‡å‡½æ•° $Tanh$ ä½œä¸ºæ¿€æ´»å‡½æ•°ã€‚</strong><br> ï¼ˆ1ï¼‰  è¿™ä¸¤ä¸ªæ¿€æ´»å‡½æ•°éƒ½æ˜¯é¥±å’Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¾“å…¥è¾¾åˆ°ä¸€å®šå€¼å¾—æƒ…å†µä¸‹ï¼Œè¾“å‡ºå°±ä¸ä¼šå‘ç”Ÿæ˜æ˜¾å˜åŒ–äº†ã€‚å¦‚æœä½¿ç”¨éé¥±å’Œçš„æ¿€æ´»å‡½æ•°ï¼Œä¾‹å¦‚ $ReLU$ï¼Œé‚£ä¹ˆå°†å¾ˆéš¾å®ç°é—¨æ§çš„æ•ˆæœã€‚</p><p>ï¼ˆ2ï¼‰ $Sigmoid$ å‡½æ•°çš„è¾“å‡ºåœ¨ 0 ~ 1 ä¹‹é—´ï¼Œ<strong>ç¬¦åˆé—¨æ§çš„ç‰©ç†å®šä¹‰</strong>ã€‚å½“è¾“å…¥è¾ƒå¤§æˆ–è€…è¾ƒå°æ—¶ï¼Œ å…¶è¾“å‡ºä¼šéå¸¸æ¥è¿‘1æˆ– 0ï¼Œ ä»è€Œä¿è¯è¯¥é—¨çš„å¼€å…³ã€‚</p><p>ï¼ˆ3ï¼‰åœ¨ç”Ÿæˆå€™é€‰è®°å¿†æ—¶ï¼Œä½¿ç”¨ $Tanh$ å‡½æ•°ï¼Œæ—¶å› ä¸ºå…¶è¾“å‡ºåœ¨-1~1 ä¹‹é—´ï¼Œè¿™<strong>ä¸å¤§å¤šæ•°åœºæ™¯ä¸‹ç‰¹å¾åˆ†å¸ƒæ˜¯0ä¸­å¿ƒå»åˆ</strong>ã€‚æ­¤å¤–ï¼ŒTanh å‡½æ•°åœ¨è¾“å…¥ä¸º $0$ é™„è¿‘ç›¸æ¯” $Sigmoid$ å«æœ‰æœ‰æ›´å¤§çš„æ¢¯åº¦ï¼Œé€šå¸¸ä½¿<strong>æ¨¡å‹æ”¶æ•›æ›´å¿«</strong>ã€‚</p><p>æ­¤å¤–ï¼Œ<strong>åœ¨ä¸€äº›å¯¹è®¡ç®—èƒ½åŠ›æœ‰é™åˆ¶çš„è®¾å¤‡ï¼Œè¯¸å¦‚å¯ç©¿æˆ´è®¾å¤‡ä¸­ï¼Œç”±äº $Sigmoid$ å‡½æ•°æ±‚æŒ‡æ•°éœ€è¦ä¸€å®šçš„è®¡ç®—é‡ï¼Œæ­¤æ—¶ä¼šä½¿ç”¨0/1é—¨$ï¼ˆhard gardï¼‰$è®©é—¨æ§è¾“å‡ºä¸º0æˆ–è€…1çš„ç¦»æ•£å€¼ï¼Œå³å½“è¾“å…¥å°äºé˜ˆå€¼æ—¶ï¼Œé—¨æ§è¾“å‡ºä¸º0ï¼›å½“è¾“å…¥å¤§äºé˜ˆå€¼æ—¶ï¼Œè¾“å‡ºä¸º1</strong>ã€‚ä»è€Œåœ¨æ€§èƒ½ä¸‹é™ä¸æ˜æ˜¾çš„æƒ…å†µä¸‹ï¼Œå‡å°‘è®¡ç®—é‡ã€‚</p><h5 id="é—®é¢˜-5ï¼š-ä»€ä¹ˆæ˜¯-Seq2Seqæ¨¡å‹ï¼ŸSeq2Seqæ¨¡å‹æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#é—®é¢˜-5ï¼š-ä»€ä¹ˆæ˜¯-Seq2Seqæ¨¡å‹ï¼ŸSeq2Seqæ¨¡å‹æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="é—®é¢˜ 5ï¼š ä»€ä¹ˆæ˜¯ Seq2Seqæ¨¡å‹ï¼ŸSeq2Seqæ¨¡å‹æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>é—®é¢˜ 5ï¼š ä»€ä¹ˆæ˜¯ Seq2Seqæ¨¡å‹ï¼ŸSeq2Seqæ¨¡å‹æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h5><p>$Seq2Seq$ æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œ<strong>é€šè¿‡æ·±åº¦ç¥ç»ç½‘ç»œå°†ä¸€ä¸ªä½œä¸ºè¾“å…¥çš„åºåˆ—æ˜ å°„ä¸ºä¸€ä¸ªä½œä¸ºè¾“å‡ºçš„åºåˆ—ï¼Œè¿™ä¸€è¿‡ç¨‹ç”±ç¼–ç è¾“å…¥ä¸è§£ç è¾“å‡ºä¸¤ä¸ªç¯èŠ‚æ„æˆ</strong>ã€‚åœ¨ç»å…¸çš„å®ç°ä¸­ï¼Œç¼–ç å™¨å’Œè§£ç å™¨å„ç”±ä¸€ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œæ„æˆï¼Œæ—¢å¯ä»¥é€‰æ‹©ä¼ ç»Ÿçš„å¾ªç¯ç¥ç»ç½‘ç»œç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é•¿çŸ­æœŸè®°å¿†æ¨¡å‹ã€‚é—¨æ§å¾ªç¯å•å…ƒç­‰ã€‚åœ¨ $Seq2Seq$ æ¨¡å‹ä¸­ï¼Œä¸¤ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œæ˜¯å…±åŒè®­ç»ƒçš„ã€‚å…¸å‹çš„å¾ªç¯ç¥ç»ç½‘ç»œç¼–è§£ç ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="/2020/02/06/RNN/seq2seq_ts.png" alt></p><h5 id="é—®é¢˜-6ï¼š-Seq2Seq-æ¨¡å‹åœ¨è§£ç æ—¶ï¼Œ-æœ‰å“ªäº›å¸¸ç”¨çš„æ–¹æ³•ï¼Ÿ"><a href="#é—®é¢˜-6ï¼š-Seq2Seq-æ¨¡å‹åœ¨è§£ç æ—¶ï¼Œ-æœ‰å“ªäº›å¸¸ç”¨çš„æ–¹æ³•ï¼Ÿ" class="headerlink" title="é—®é¢˜ 6ï¼š Seq2Seq æ¨¡å‹åœ¨è§£ç æ—¶ï¼Œ æœ‰å“ªäº›å¸¸ç”¨çš„æ–¹æ³•ï¼Ÿ"></a>é—®é¢˜ 6ï¼š Seq2Seq æ¨¡å‹åœ¨è§£ç æ—¶ï¼Œ æœ‰å“ªäº›å¸¸ç”¨çš„æ–¹æ³•ï¼Ÿ</h5><p>$Seq2Seq$ æ¨¡å‹æœ€åŸºç¡€çš„è§£ç æ–¹æ³•æ˜¯<strong>è´ªå¿ƒæ³•</strong>ï¼Œ å³é€‰å–ä¸€ç§åº¦é‡æ ‡å‡†åï¼Œæ¯æ¬¡éƒ½åœ¨å½“å‰çŠ¶æ€ä¸‹é€‰æ‹©æœ€ä½³çš„ä¸€ä¸ªç»“æœï¼Œ ç›´åˆ°ç»“æŸã€‚å¾ˆæ˜¾ç„¶ï¼Œè´ªå¿ƒæ³•è·å¾—çš„æ˜¯ä¸€ä¸ªå±€éƒ¨æœ€ä¼˜è§£ï¼Œç”±äºå®é™…é—®é¢˜çš„å¤æ‚æ€§ï¼Œè¯¥æ–¹æ³•å¾€å¾€ä¸èƒ½å–å¾—æ›´å¥½çš„æ•ˆæœã€‚<strong>é›†æŸæœç´¢(beam search) </strong> æ˜¯ä¸€ç§å¸¸è§çš„æ”¹è¿›ç®—æ³•ã€‚è¯¥æ–¹æ³•ä¼š<strong>ä¿å­˜ beam size ä¸ªå½“å‰çš„è¾ƒä½³é€‰æ‹©ï¼Œç„¶åè§£ç æ—¶æ¯ä¸€æ­¥æ ¹æ®ä¿å­˜çš„é€‰æ‹©è¿›è¡Œä¸‹ä¸€æ­¥æ‰©å±•å’Œæ’åºï¼Œæ¥ç€é€‰æ‹©å‰ beam size ä¸ªè¿›è¡Œä¿å­˜ï¼Œå¾ªç¯è¿­ä»£ï¼Œç›´åˆ°ç»“æŸæ—¶é€‰æ‹©æœ€ä½³çš„ä¸€ä¸ªä½œä¸ºè§£ç çš„ç»“æœã€‚</strong> éšç€ beam size çš„å¢å¤§ï¼Œå…¶æœç´¢çš„ç©ºé—´å¢å¤§ï¼Œæœ€ç»ˆæ•ˆæœä¼šæœ‰æ‰€æå‡ï¼Œä½†éœ€è¦çš„è®¡ç®—é‡ä¹Ÿç›¸åº”å¢å¤§ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œbå¾€å¾€ä¼šé€‰æ‹©ä¸€ä¸ªé€‚ä¸­çš„èŒƒå›´ï¼Œä»¥8 ~ 12 ä¸ºä½³ã€‚ä¸‹å›¾æ˜¯ beam size ä¸º2æ—¶çš„é›†æŸæœç´¢ç¤ºä¾‹ã€‚</p><p><img src="/2020/02/06/RNN/beam search.png" alt></p><p>è§£ç æ—¶ä½¿ç”¨<strong>å †å çš„RNN</strong>ã€<strong>å¢åŠ  Dropoutæœºåˆ¶</strong>ã€<strong>ä¸ç¼–ç å™¨ä¹‹é—´å»ºç«‹æ®‹å·®è¿æ¥</strong>ã€<strong>å¢åŠ Attentionæœºåˆ¶</strong>ç­‰ï¼Œå‡æ˜¯å¸¸è§çš„æ”¹è¿›æªæ–½ã€‚åœ¨å®é™…çš„ç ”ç©¶å·¥ä½œä¸­ï¼Œå¯ä»¥æ ¹æ®ä¸åŒä½¿ç”¨åœºæ™¯ï¼Œæœ‰é’ˆå¯¹æ€§çš„é€‰æ‹©å’Œå®è·µã€‚</p><h5 id="é—®é¢˜7ï¼šSeq2Seq-æ¨¡å‹å¼•å…¥æ³¨æ„åŠ›æœºåˆ¶æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ-ä¸ºä»€ä¹ˆé€‰ç”¨åŒå‘çš„å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Ÿ"><a href="#é—®é¢˜7ï¼šSeq2Seq-æ¨¡å‹å¼•å…¥æ³¨æ„åŠ›æœºåˆ¶æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ-ä¸ºä»€ä¹ˆé€‰ç”¨åŒå‘çš„å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Ÿ" class="headerlink" title="é—®é¢˜7ï¼šSeq2Seq æ¨¡å‹å¼•å…¥æ³¨æ„åŠ›æœºåˆ¶æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ ä¸ºä»€ä¹ˆé€‰ç”¨åŒå‘çš„å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Ÿ"></a>é—®é¢˜7ï¼šSeq2Seq æ¨¡å‹å¼•å…¥æ³¨æ„åŠ›æœºåˆ¶æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ ä¸ºä»€ä¹ˆé€‰ç”¨åŒå‘çš„å¾ªç¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Ÿ</h5><p>åœ¨ Seq2Seq æ¨¡å‹ä¸­ï¼Œå½“å‰éšçŠ¶æ€ä»¥åŠä¸Šä¸€ä¸ªè¾“å‡ºè¯å†³å®šäº†å½“å‰çš„è¾“å‡ºè¯ï¼Œ å³ï¼š</p><script type="math/tex; mode=display">s_{i} = f(y_{i-1}, s_{i-1}) \\p(y_{i} | y_{1}, y_{2}, ..., y_{i-1}) = g(y_{i-1}, s_{i})</script><p><strong>åœ¨å®é™…åº”ç”¨ä¸­ä¼šå‘ç°éšç€åºåˆ—çš„å¢é•¿ï¼Œæ¨¡å‹çš„æ€§èƒ½å‘ç”Ÿæ˜¾è‘—ä¸‹é™ã€‚è¿™æ˜¯å› ä¸ºç¼–ç æ—¶è¾“å…¥åºåˆ—çš„å…¨éƒ¨ä¿¡æ¯è¢«å‹ç¼©åˆ°ä¸€ä¸ªå‘é‡è¡¨ç¤ºä¸­ã€‚éšç€åºåˆ—å¢é•¿ï¼Œå¥å­çº¦å‰é¢çš„ä¿¡æ¯å°±ä¸¢å¤±çš„è¶Šä¸¥é‡ã€‚</strong>$Seq2Seq$ æ¨¡å‹ä¸­å¼•å…¥æ³¨æ„åŠ›æœºåˆ¶å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p><img src="/2020/02/06/RNN/seq2seq_attn.png" alt></p><p>(1)  åœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»ç„¶ä½¿ç”¨æ™®é€šçš„å¾ªç¯ç¥ç»ç½‘ç»œå¯¹è¾“å…¥åºåˆ—è¿›è¡Œç¼–ç ï¼Œå¾—åˆ°éšçŠ¶æ€ $h1, h2, â€¦, h<em>T$ã€‚ä½¿ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œ $align$ ä¸Šä¸€ä¸ªè¾“å…¥åºåˆ—çš„éšçŠ¶æ€ $s</em>{i-1}$ å’Œè¾“å…¥åºåˆ—éšçŠ¶æ€  $h<em>{j}$ ä½œä¸ºè¾“å…¥ï¼Œè®¡ç®—å‡ºä¸€ä¸ª $x</em>{j}, y<em>{i}$ å¯¹é½çš„å€¼ $e</em>{ij}$ï¼Œ å†å½’ä¸€åŒ–å¾—åˆ°æƒé‡ $\alpha_{ij}$ã€‚</p><script type="math/tex; mode=display">e_{ij} = align(s_{i-1}, h_{j})  \\\alpha_{ij} = \frac{exp(e_{ij})}{\sum_{k=1}^{T}{exp(e_{ik})}}</script><p>(2) è®¡ç®—è¯­å¢ƒå‘é‡ $c_{i}$ , å³æ˜¯è¾“å…¥åºåˆ—å…¨éƒ¨éšçŠ¶æ€ $h1, h2, â€¦, h_T$çš„ä¸€ä¸ªåŠ æƒå’Œã€‚</p><script type="math/tex; mode=display">c_{i} = \sum_{j=1}^{T}{\alpha_{ij}h_{j}}</script><p>(3) åœ¨è§£ç è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªè¾“å‡ºè¯éƒ½ä¾èµ–äºå‰ä¸€ä¸ªéšçŠ¶æ€ä»¥åŠè¾“å…¥åºåˆ—æ¯ä¸€ä¸ªå¯¹åº”çš„éšçŠ¶æ€ã€‚</p><script type="math/tex; mode=display">s_{i} = f(y_{i-1}, s_{i-1}, x_{i}) \\p(y_{i} | y_{1}, y_{2}, ..., y_{i-1}) = g(y_{i-1}, s_{i}, c_{i})</script>]]></content>
    
    
    <categories>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>leetcode-review</title>
    <link href="/2020/02/03/leetcode-review/"/>
    <url>/2020/02/03/leetcode-review/</url>
    
    <content type="html"><![CDATA[<h3 id="1-CPP-è¯­æ³•å¿«é€Ÿå›é¡¾"><a href="#1-CPP-è¯­æ³•å¿«é€Ÿå›é¡¾" class="headerlink" title="1. CPP è¯­æ³•å¿«é€Ÿå›é¡¾"></a>1. CPP è¯­æ³•å¿«é€Ÿå›é¡¾</h3><h5 id="1-å£°æ˜"><a href="#1-å£°æ˜" class="headerlink" title="(1) å£°æ˜"></a>(1) å£°æ˜</h5><pre><code class="hljs cpp"><span class="hljs-comment">// äºŒç»´æ•°ç»„çš„ç”³è¯·</span><span class="hljs-keyword">int</span> m, n;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n, <span class="hljs-number">0</span>))</span></span>;<span class="hljs-comment">// å †çš„å£°æ˜</span><span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, greater&lt;<span class="hljs-keyword">int</span>&gt; &gt; min_heap; <span class="hljs-comment">// æœ€å°å †</span><span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, less&lt;<span class="hljs-keyword">int</span>&gt; &gt; max_heap;  <span class="hljs-comment">// æœ€å¤§å †</span></code></pre><h5 id="2-å¸¸è§ç®—æ³•"><a href="#2-å¸¸è§ç®—æ³•" class="headerlink" title="(2) å¸¸è§ç®—æ³•"></a>(2) å¸¸è§ç®—æ³•</h5><pre><code class="hljs cpp"><span class="hljs-comment">// å¸¸è§çš„ç®—æ³•ï¼š</span>sortã€swapã€max_elementã€findã€reverseã€accumulateã€  <span class="hljs-comment">// å­—ç¬¦ä¸²å‡½æ•°</span><span class="hljs-built_in">islower</span>(<span class="hljs-keyword">char</span> c) <span class="hljs-comment">// æ˜¯å¦ä¸ºå°å†™å­—æ¯</span><span class="hljs-built_in">isupper</span>(<span class="hljs-keyword">char</span> c) <span class="hljs-comment">// æ˜¯å¦ä¸ºå¤§å†™å­—æ¯</span><span class="hljs-built_in">isdigit</span>(<span class="hljs-keyword">char</span> c) <span class="hljs-comment">// æ˜¯å¦ä¸ºæ•°å­—</span><span class="hljs-built_in">isalpha</span>(<span class="hljs-keyword">char</span> c) <span class="hljs-comment">// æ˜¯å¦ä¸ºå­—æ¯</span><span class="hljs-built_in">isalnum</span>(<span class="hljs-keyword">char</span> c) <span class="hljs-comment">// æ˜¯å¦ä¸ºå­—æ¯æˆ–è€…æ•°å­—</span><span class="hljs-built_in">toupper</span>(<span class="hljs-keyword">char</span> c) <span class="hljs-comment">// å­—æ¯å°è½¬å¤§</span><span class="hljs-built_in">tolower</span>(<span class="hljs-keyword">char</span> c) <span class="hljs-comment">// å­—æ¯å¤§è½¬å°  </span>  find_first_not_of <span class="hljs-comment">//</span>find_last_not_of <span class="hljs-comment">// </span>substr <span class="hljs-comment">//</span>    <span class="hljs-comment">// find  ----  è¿”å›å€¼ä¸ºè¿­ä»£å™¨</span><span class="hljs-comment">// setã€map: è‡ªå¸¦ find å‡½æ•°  c.find(val);</span><span class="hljs-comment">// æ™®é€šå®¹å™¨     find(c.begin(), c.end(), val);</span></code></pre><h5 id="3-å®¹å™¨"><a href="#3-å®¹å™¨" class="headerlink" title="(3) å®¹å™¨"></a>(3) å®¹å™¨</h5><pre><code class="hljs cpp"><span class="hljs-comment">// begin()   end()   empty()   size()</span><span class="hljs-comment">// stack: æ ˆ   push  pop   top</span><span class="hljs-comment">// queue: é˜Ÿåˆ—    push   pop   front</span><span class="hljs-comment">// deque: åŒç«¯é˜Ÿåˆ—    push_backã€push_frontã€pop_backã€pop_frontã€frontã€back</span><span class="hljs-comment">// priority_queue: å †   topã€ pushã€ pop</span><span class="hljs-comment">// vector: å¯å˜æ•°ç»„  pop_backã€push_back()ã€back</span><span class="hljs-comment">// list: åŒå‘é“¾è¡¨   func?</span><span class="hljs-comment">// set:   s.insert(key_value)   erase(key_value)   erase(iterator)  </span><span class="hljs-comment">// mapã€unordered_map:  m[key] = val;    erase(key_value)   erase(iterator)  </span></code></pre><h3 id="2-å¸¸è§çš„å‘½åï¼š"><a href="#2-å¸¸è§çš„å‘½åï¼š" class="headerlink" title="2. å¸¸è§çš„å‘½åï¼š"></a>2. å¸¸è§çš„å‘½åï¼š</h3><pre><code class="hljs cpp"><span class="hljs-comment">// æ•°ç»„</span>beginã€endleftã€rightstartã€endmin_xxxã€max_xxxresã€nums<span class="hljs-comment">// å †ã€æ ˆã€é˜Ÿåˆ—</span>m_queueã€m_stkã€m_dequeã€max_heap/min_heapã€arr  <span class="hljs-comment">// å…³äºé“¾è¡¨</span>nodeã€pNodeã€ptrã€pã€l1ã€l2prevã€curã€nextã€headã€taildummy<span class="hljs-comment">// äºŒå‰æ ‘</span>rootã€leftã€right<span class="hljs-comment">// å›¾</span>matrixã€boardã€gridi, j, kã€mã€nã€rowã€colpath<span class="hljs-comment">// å“ˆå¸Œè¡¨</span>hash_mapã€keyã€val<span class="hljs-comment">// æ’åºã€æŸ¥æ‰¾ã€è®¡æ•°</span>searchã€findã€sortã€targetã€cntã€sã€sumã€freq<span class="hljs-comment">// é€’å½’ã€å›æº¯ã€è´ªå¿ƒã€åŠ¨è§„</span>trackã€backtrackã€dp<span class="hljs-comment">// å…¶ä»–:</span>reverseã€partitionã€rangeã€cacheã€candã€pointã€amountã€restã€flagã€baseã€coinsprimeã€fillã€capã€delete_nodeã€</code></pre><h3 id="3-é«˜é¢‘é¢˜ç›®"><a href="#3-é«˜é¢‘é¢˜ç›®" class="headerlink" title="3. é«˜é¢‘é¢˜ç›®"></a>3. é«˜é¢‘é¢˜ç›®</h3><ol><li><a href="https://leetcode-cn.com/problems/generate-parentheses">æ‹¬å·ç”Ÿæˆ</a></li></ol><ol><li><a href="https://leetcode-cn.com/problems/reverse-nodes-in-k-group">K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a></li></ol><ol><li><p><a href="https://leetcode-cn.com/problems/search-in-rotated-sorted-array">æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a></p><p>å…ˆå’Œå·¦ç«¯ç‚¹è¿›è¡Œæ¯”è¾ƒ(<strong>&gt;=</strong>)ã€åˆ¤å®šåŒºé—´æ˜¯å¦æœ‰åºï¼Œ ç„¶ååˆ¤æ–­ target æ˜¯å¦åœ¨æœ‰åºåŒºé—´å†… ï¼</p></li><li><p><a href="https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array">åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</a></p></li><li><p><a href="https://leetcode-cn.com/problems/trapping-rain-water">æ¥é›¨æ°´</a></p><p>max_element å‡½æ•°</p></li><li><p><a href="https://leetcode-cn.com/problems/permutations-ii">å…¨æ’åˆ— II</a></p></li><li><p><a href="https://leetcode-cn.com/problems/n-queens">N çš‡å</a></p></li><li><p><a href="https://leetcode-cn.com/problems/jump-game">è·³è·ƒæ¸¸æˆ</a></p><p>å…ˆåˆ¤æ–­ï¼Œå†è·³è·ƒ</p></li><li><p><a href="https://leetcode-cn.com/problems/merge-intervals">åˆå¹¶åŒºé—´</a></p><p>æ ¹æ®åŒºé—´å³ç«¯ç‚¹è¿›è¡Œæ’åºï¼Œ åˆ©ç”¨ vectorï¼Œ éœ€è¦åˆ¤å®šæ˜¯å¦è¿›è¡ŒåŒºé—´è¦†ç›–</p></li><li><p><a href="https://leetcode-cn.com/problems/word-search">å•è¯æœç´¢</a></p></li><li><p><a href="https://leetcode-cn.com/problems/maximal-rectangle">æœ€å¤§çŸ©å½¢</a></p><pre><code class="hljs cpp"><span class="hljs-comment">// å°†å…¶è½¬åŒ–ä¸ºæ¥é›¨æ°´çš„é—®é¢˜</span><span class="hljs-keyword">while</span>(!m_stk.empty() &amp;&amp; heights[i] &lt; heights[m_stk.top()])&#123;    <span class="hljs-keyword">int</span> h = heights[m_stk.top()];    m_stk.pop();    <span class="hljs-keyword">int</span> w = m_stk.empty() ?  i : i - m_stk.top() - <span class="hljs-number">1</span>;    area = max(area, w * h);&#125;</code></pre></li><li><p><a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal">äºŒå‰æ ‘çš„å±‚åºéå†</a></p><p>åœ¨å¾ªç¯å¤–å– sizeï¼Œ ç„¶åè¿›è¡Œéå† éœ€è¦åˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦ä¸ºç©º</p></li><li><p><a href="https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal">ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></p><p>ï¼ˆ1ï¼‰å‰åºå…¨å±€ã€ä¸­åºå– map  ï¼ˆ2ï¼‰ä¸‰ä¸ªå‚æ•°: pre_root: æ ¹èŠ‚ç‚¹åœ¨å‰åºéå†ä¸­çš„ä¸‹æ ‡ã€ä¸­åºéå†çš„å·¦ä¾§è¾¹ç•Œå’Œå³ä¾§è¾¹ç•Œ<br>ï¼ˆ3ï¼‰å³å­æ ‘çš„æ ¹èŠ‚ç‚¹: å‰åºéå†çš„æ ¹èŠ‚ç‚¹çš„åæ ‡ + å·¦å­æ ‘çš„ä¸ªæ•° + 1</p></li><li><p><a href="https://leetcode-cn.com/problems/binary-tree-maximum-path-sum">äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</a><br>é€’å½’å¤„ç†çš„å‡ ä¸ªæ­¥éª¤ï¼šä½•æ—¶è·³å‡ºé€’å½’ï¼Ÿ å¤„ç†éƒ¨åˆ†ï¼Ÿ é€’å½’éƒ¨åˆ† ï¼Ÿ è¿”å›å€¼<br>helper å‡½æ•°çš„ä½œç”¨ï¼š æ±‚ä»æ ¹èŠ‚ç‚¹å‡ºå‘çš„æœ€å¤§è·¯å¾„ï¼</p></li><li><p><a href="https://leetcode-cn.com/problems/copy-list-with-random-pointer">å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨</a><br>ï¼ˆ1ï¼‰ ä¸€ä¸ª node çš„ vecã€ä¸€ä¸ª node 2 idx çš„ map  ï¼ˆ2ï¼‰ åˆ«å¿˜è®° push_back(0)</p></li><li><p><a href="https://leetcode-cn.com/problems/linked-list-cycle-ii">ç¯å½¢é“¾è¡¨ II</a><br>(1) ä¼šè¯æ˜å—?    ï¼ˆ2ï¼‰fastã€slow åˆå§‹åŒ–å‡ä¸º headï¼Œ ç„¶åå…ˆç§»åŠ¨ï¼Œååˆ¤å®šæ˜¯å¦ç›¸ç­‰</p></li><li><p><a href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal">äºŒå‰æ ‘çš„å‰åºéå†</a><br>å‰åºéå†å’Œä¸­åºéå†çš„åŒºåˆ«åœ¨ push_back çš„ä½ç½®</p></li><li><p><a href="https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array">å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a><br>å’Œå³ç«¯ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œ å¦‚æœå¤§äº left = mid + 1ï¼› å¦‚æœå°äº right = mid;  å¦‚æœç­‰äº rightâ€”;</p></li><li><p><a href="https://leetcode-cn.com/problems/palindrome-linked-list">å›æ–‡é“¾è¡¨</a><br>(1) æ±‚ä¸­é—´å€¼ï¼Œ ç¿»è½¬ï¼Œåˆ¤æ–­å›æ–‡ (2) å°†ä¸­é—´èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹çš„ next æŒ‡é’ˆç½®é›¶   (3) ä¸¤ä¸ªæŒ‡é’ˆå‡ä¸ä¸ºç©º </p></li><li><p><a href="https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree">äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</a><br><code>if(left &amp;&amp; right) return root;   return left ? left : right;</code></p></li><li><p><a href="https://leetcode-cn.com/problems/minimum-number-of-arrows-to-burst-balloons">ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ</a><br>æŒ‰ç…§å·¦ç«¯ç‚¹è¿›è¡Œæ’åº</p></li><li><p><a href="https://leetcode-cn.com/problems/sort-an-array">æ’åºæ•°ç»„</a><br>å‡ ä¸ªæ¡ä»¶ä¸åŒï¼š<code>while(left != right)</code> ã€ <code>left &lt; right</code> ã€<code>nums[left] &gt;= pivot</code> ï¼ˆ2ï¼‰ return left</p></li><li><p><a href="https://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof">æœ€å°çš„kä¸ªæ•°</a><br>æœ€å°çš„kä¸ªæ•°ï¼Œ ç”¨æœ€å¤§å †ï¼Œ å£°æ˜æ—¶ç”¨ lessï¼› æœ€å¤§çš„kä¸ªæ•°ï¼Œ ç”¨æœ€å°å †ï¼Œ å£°æ˜æ—¶ç”¨ greater</p></li><li><p><a href="https://leetcode-cn.com/problems/shu-ju-liu-zhong-de-zhong-wei-shu-lcof">æ•°æ®æµä¸­çš„ä¸­ä½æ•°</a><br><img src="/2020/02/03/leetcode-review/1.png" style="zoom:40%;"></p></li><li><p><a href="https://leetcode-cn.com/problems/er-cha-shu-zhong-he-wei-mou-yi-zhi-de-lu-jing-lcof">äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</a></p></li><li><p><a href="https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof">æ•°ç»„ä¸­çš„é€†åºå¯¹</a></p></li><li><p><a href="https://leetcode-cn.com/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof">æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼</a></p><p>å…ˆè¿›è¡Œå¼¹å‡ºé˜Ÿåˆ—å¤´å…ƒç´ çš„åˆ¤æ–­(i - q.front() &gt;= k)ï¼Œå†è¿›è¡Œæ·»åŠ  (i &gt;= k-1)   res æ·»åŠ çš„æ˜¯åæ ‡ï¼Œè€Œä¸æ˜¯å…ƒç´            </p></li><li><p><a href="https://leetcode-cn.com/problems/lru-cache-lcci">LRU ç¼“å­˜</a></p><p>ä»¥å¯¹ cache çš„æ“ä½œä¸ºä¸»ï¼Œå¯¹ map çš„æ“ä½œåªæœ‰æ»¡äº†çš„æ—¶å€™åˆ é™¤ <code>m_map.erase(cache.back().first)</code> å’Œ ä¸¤ä¸ªæ“ä½œçš„æ›´æ”¹æŒ‡å‘ <code>m_map[key] = cache.begin()</code>ã€‚ å…¶ä½™çš„åŸºæœ¬æ˜¯å¯¹cache è¿›è¡Œæ“ä½œã€‚</p></li><li><p>BN æ“ä½œçš„å®ç°</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bn_forward</span>(<span class="hljs-params">x, gamma, beta, eps</span>):</span>    x_mean = np.mean(x, axis=(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>), keepdims=true)    x_var = np.var(x, axis=(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>), keepdims=true)        hat_x = (x - x_mean) / np.sqrt(x_var + eps)    out_x = gamma * hat_x + beta        <span class="hljs-keyword">return</span> out_x</code></pre></li><li><p>nms å®ç°</p><p>æœ€æ ¸å¿ƒçš„å‡ ä¸ªæ“ä½œ: è§£æå‡ºæ¥ x1ï¼Œy1ï¼Œx2ï¼Œ y2ï¼Œ scores å’Œ æ±‚ iou<br>æ’åº:   <code>order = scores.argsort()[::-1]</code></p><p>å¯¹ iou çš„é€‰æ‹©ï¼š</p><pre><code class="hljs python">iou = ...ids = order[iou &lt; thresh][<span class="hljs-number">0</span>]order = order[ids + <span class="hljs-number">1</span>]</code></pre></li></ol><h3 id="4-å‚è€ƒèµ„æ–™"><a href="#4-å‚è€ƒèµ„æ–™" class="headerlink" title="4. å‚è€ƒèµ„æ–™"></a>4. å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://leetcode.com/">https://leetcode.com/</a></li><li>ã€Šå‰‘æŒ‡ offerã€‹</li><li>ã€ŠCracking the Coding Interview: 150 Programming Interview Questions and Solutionsã€‹</li><li><a href="https://cspiration.com/leetcodeClassification">https://cspiration.com/leetcodeClassification</a></li><li><a href="https://greyireland.gitbook.io/algorithm-pattern/">https://greyireland.gitbook.io/algorithm-pattern/</a></li><li>leetcode åˆ·é¢˜ç­ <a href="https://www.bilibili.com/video/BV1GW411Q77S">https://www.bilibili.com/video/BV1GW411Q77S</a></li><li><a href="https://greyireland.gitbook.io/algorithm-pattern/">https://greyireland.gitbook.io/algorithm-pattern/</a></li><li><a href="https://github.com/donnemartin/interactive-coding-challenges">https://github.com/donnemartin/interactive-coding-challenges</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>leetcode-work</title>
    <link href="/2020/02/03/leetcode-work/"/>
    <url>/2020/02/03/leetcode-work/</url>
    
    <content type="html"><![CDATA[<a id="more"></a><h3 id="ä¸€äº›å·¥ä½œä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ç®—æ³•"><a href="#ä¸€äº›å·¥ä½œä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ç®—æ³•" class="headerlink" title="ä¸€äº›å·¥ä½œä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ç®—æ³•"></a>ä¸€äº›å·¥ä½œä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ç®—æ³•</h3><ul><li><p>IOU çš„è®¡ç®—</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isRectangleOverlap</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; rec1, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; rec2)</span> </span>&#123;    <span class="hljs-keyword">int</span> area_rec1 = (rec1[<span class="hljs-number">3</span>] - rec1[<span class="hljs-number">1</span>]) * (rec1[<span class="hljs-number">2</span>] - rec1[<span class="hljs-number">0</span>]);    <span class="hljs-keyword">int</span> aera_rec2 = (rec2[<span class="hljs-number">3</span>] - rec2[<span class="hljs-number">1</span>]) * (rec2[<span class="hljs-number">2</span>] - rec2[<span class="hljs-number">0</span>]);    <span class="hljs-keyword">int</span> w = max(<span class="hljs-number">0.0</span>, min(rec1[<span class="hljs-number">2</span>], rec2[<span class="hljs-number">2</span>]) - max(rec1[<span class="hljs-number">0</span>], rec2[<span class="hljs-number">0</span>]));    <span class="hljs-keyword">int</span> h = max(<span class="hljs-number">0.0</span>, min(rec1[<span class="hljs-number">3</span>], rec2[<span class="hljs-number">3</span>]) - max(rec1[<span class="hljs-number">1</span>], rec2[<span class="hljs-number">1</span>]));    <span class="hljs-keyword">int</span> intersect = w * h;    <span class="hljs-keyword">return</span> intersect /(rec1_area + rec1_area - intersect);&#125;</code></pre></li><li><p>resnet æ®‹å·®(pytorch)</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BasicBlock</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-string">&quot;&quot;&quot; å‡è®¾è¾“å…¥é€šé“å’Œè¾“å‡ºé€šé“ä¸€è‡´ &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, in_channels, out_channels</span>):</span>        super(BasicBlock, self).__init__()        self.conv1 = nn.Conv2d(in_channels, out_channels, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)        self.bn1 = nn.BatchNorm(out_channels)        self.relu = nn.ReLU(inplace = <span class="hljs-literal">True</span>);                self.conv2 = nn.Conv2d(out_channels, out_channels, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)        self.bn2 = nn.BatchNorm(out_channels)                self.shortcut = nn.Sequential()        <span class="hljs-keyword">if</span> in_channels != out_channels:          self.short_cut = nn.Sequential(nn.Conv2d(in_channels, out_channels, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),                                         nn.BatchNorm(out_channels))            <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>        out = self.relu(self.bn1(self.conv1(x)))        out = self.bn2(self.conv2(x))        out += self.shortcut(x)        <span class="hljs-keyword">return</span> self.relu(out)</code></pre></li><li><p>ç¿»è½¬å›¾åƒã€åè½¬å›¾åƒã€æ—‹è½¬çŸ©é˜µã€å›¾åƒæ¸²æŸ“ã€å›¾åƒé‡å </p><pre><code class="hljs cpp"><span class="hljs-comment">// 832. ç¿»è½¬å›¾åƒ</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">flipAndInvertImage</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; A)</span> </span>&#123;    <span class="hljs-keyword">if</span>(A.size() == <span class="hljs-number">0</span> || A[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> A;    <span class="hljs-keyword">int</span> m = A.size();    <span class="hljs-keyword">int</span> n = A[<span class="hljs-number">0</span>].size();    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n/<span class="hljs-number">2</span>; j++)&#123;            swap(A[i][j], A[i][n-j<span class="hljs-number">-1</span>]);        &#125;    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)&#123;            A[i][j] = <span class="hljs-number">1</span> - A[i][j];        &#125;    &#125;    <span class="hljs-keyword">return</span> A;&#125;<span class="hljs-comment">// 48. æ—‹è½¬çŸ©é˜µ</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rotate</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;    <span class="hljs-keyword">if</span>(matrix.size() == <span class="hljs-number">0</span> || matrix[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">int</span> row = matrix.size(), col = matrix[<span class="hljs-number">0</span>].size();    <span class="hljs-comment">// æ²¿ä¸»å¯¹è§’çº¿å¯¹æŠ˜</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; row; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = i; j &lt; col; j++)&#123;            swap(matrix[i][j], matrix[j][i]);        &#125;    &#125;    <span class="hljs-comment">// æ°´å¹³ç¿»è½¬</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; row; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; col / <span class="hljs-number">2</span>; j++)&#123;            swap(matrix[i][j], matrix[i][col<span class="hljs-number">-1</span>-j]);        &#125;    &#125;    <span class="hljs-keyword">return</span>;&#125;<span class="hljs-comment">// 733.å›¾åƒæ¸²æŸ“ é¢œè‰²å¡«å……</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">floodFill</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; image, <span class="hljs-keyword">int</span> sr, <span class="hljs-keyword">int</span> sc, <span class="hljs-keyword">int</span> newColor)</span> </span>&#123;    <span class="hljs-keyword">if</span>(image.size() == <span class="hljs-number">0</span> || image[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> image;    <span class="hljs-keyword">int</span> oriColor = image[sr][sc];    bfs(image, sr, sc, newColor, oriColor);    <span class="hljs-keyword">return</span> image;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; image, <span class="hljs-keyword">int</span> sr, <span class="hljs-keyword">int</span> sc, <span class="hljs-keyword">int</span> newColor, <span class="hljs-keyword">int</span> oriColor)</span></span>&#123;    <span class="hljs-keyword">if</span>(sr &gt;= image.size() || sc &gt;= image[<span class="hljs-number">0</span>].size()  || sc &lt; <span class="hljs-number">0</span> || sr &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">if</span>(image[sr][sc] == oriColor &amp;&amp; image[sr][sc] != newColor)&#123;        image[sr][sc] = newColor;        bfs(image, sr<span class="hljs-number">-1</span>, sc, newColor, oriColor);        bfs(image, sr+<span class="hljs-number">1</span>, sc, newColor, oriColor);        bfs(image, sr, sc<span class="hljs-number">-1</span>, newColor, oriColor);        bfs(image, sr, sc+<span class="hljs-number">1</span>, newColor, oriColor);    &#125;&#125;</code></pre></li><li><p>BN å±‚çš„å®ç°</p><pre><code class="hljs python"><span class="hljs-comment"># ç®€åŒ–ç‰ˆ</span><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">batchnorm_forward</span>(<span class="hljs-params">x, gamma, beta, eps</span>):</span>    <span class="hljs-comment"># calculate mean &amp; var</span>    batch_mean = np.mean(x, axis=(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), keepdims=<span class="hljs-literal">True</span>)    batch_var = np.var(x, axis=(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), keepdims=<span class="hljs-literal">True</span>)    <span class="hljs-comment"># normalize</span>    x_hat = (inp - batch_mean) / np.sqrt(batch_var + eps)    <span class="hljs-comment"># scale &amp; shift</span>    out = x_hat * gamma + beta    <span class="hljs-keyword">return</span> out</code></pre><pre><code class="hljs python"><span class="hljs-comment"># å¤æ‚ç‰ˆæœ¬</span><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">batchnorm_forward</span>(<span class="hljs-params">x, gamma, beta, bn_param</span>):</span>    mode = bn_param[<span class="hljs-string">&#x27;mode&#x27;</span>]    eps = bn_param.get(<span class="hljs-string">&#x27;eps&#x27;</span>, <span class="hljs-number">1e-5</span>)     momentum = bn_param.get(<span class="hljs-string">&#x27;momentum&#x27;</span>, <span class="hljs-number">0.9</span>)        N, D = s.shape  <span class="hljs-comment"># N is batch_size * H * W, D is channels</span>    running_mean = bn_param.get(<span class="hljs-string">&#x27;running_mean&#x27;</span>, np.zeros(D, dtype=x.dtype))    running_var = bn_param.get(<span class="hljs-string">&#x27;running_var&#x27;</span>, np.zeros(D, dtype=x.dtype))        out, cahce = <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>    <span class="hljs-keyword">if</span> mode == <span class="hljs-string">&#x27;train&#x27;</span>:            batch_mean = np.mean(x, axis=<span class="hljs-number">0</span>, keepdims=<span class="hljs-literal">True</span>)        batch_var = np.var(x, axis=<span class="hljs-number">0</span>, keepdims=<span class="hljs-literal">True</span>)         x_norm = (inp - batch_mean) / np.sqrt(batch_var + eps)        out = x_norm * gamma + beta        <span class="hljs-comment"># store variables in cache</span>        cache = (x, x_norm, gamma, beta, eps, batch_mean, batch_var)        <span class="hljs-comment"># update running_mean &amp; running var</span>        running_mean = momentum * running_mean + (<span class="hljs-number">1</span> - momentum) * batch_mean        running_var = momentum * running_var + (<span class="hljs-number">1</span> - momentum) * batch_var    <span class="hljs-keyword">elif</span> mode == <span class="hljs-string">&#x27;test&#x27;</span>:        x_norm = (x - running_mean) / np.sqrt(running_var + eps)        out = x_norm * gamma + beta            bn_param[<span class="hljs-string">&#x27;running_mean&#x27;</span>] = running_mean    bn_param[<span class="hljs-string">&#x27;running_var&#x27;</span>] = running_var    <span class="hljs-keyword">return</span> out, cache</code></pre></li><li><p>kmeansç®—æ³•</p><pre><code class="hljs python"></code></pre></li><li><p>æ‰‹å†™ nms ç®—æ³•</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pu_cpu_nms</span>(<span class="hljs-params">dets, thresh</span>):</span>    <span class="hljs-comment"># æå–å››è¾¹å½¢å¹¶è®¡ç®—åŒºåŸŸé¢ç§¯</span>    x1 = dets[:, <span class="hljs-number">0</span>]    y1 = dets[:, <span class="hljs-number">1</span>]    x2 = dets[:, <span class="hljs-number">2</span>]    y2 = dets[:, <span class="hljs-number">3</span>]    area = (x2 - x1 + <span class="hljs-number">1</span>) * (y2 - y1 + <span class="hljs-number">1</span>)    <span class="hljs-comment"># æå– scores å¹¶è¿›è¡Œæ’åº</span>    scores = dets[:, <span class="hljs-number">4</span>]    order = scores.argsort()[::<span class="hljs-number">-1</span>]        keep = []    <span class="hljs-keyword">while</span> order.size &gt; <span class="hljs-number">0</span>:        <span class="hljs-comment"># è®¡ç®— iou</span>        i = order[<span class="hljs-number">0</span>]        keep.append(i)        xx1 = np.maximum(x1[i], x1[<span class="hljs-number">1</span>:])        yy1 = np.maximun(y1[i], y1[<span class="hljs-number">1</span>:])        xx2 = np.minimum(x2[i], x2[<span class="hljs-number">1</span>:])        yy2 = np.minimum(y2[i], y2[<span class="hljs-number">1</span>:])                w = np.maximum(<span class="hljs-number">0.0</span>, xx2 - xx1 + <span class="hljs-number">1</span>)        h = np.maximum(<span class="hljs-number">0.0</span>, yy2 - yy1 + <span class="hljs-number">1</span>)                inter = w * h        ovr = inter / (area[i] + area[order[<span class="hljs-number">1</span>:]] - inter)                <span class="hljs-comment"># ä¿ç•™å°äº thresh çš„ bbox</span>        inds = np.where(ovr &lt;= thresh)[<span class="hljs-number">0</span>]        order = order[inds + <span class="hljs-number">1</span>]            <span class="hljs-keyword">return</span> keep</code></pre></li><li><p>æœ€å¤§çš„å²›å±¿é¢ç§¯</p><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; grid, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> n)</span></span>&#123;    <span class="hljs-keyword">if</span>(r &lt; <span class="hljs-number">0</span> || c &lt; <span class="hljs-number">0</span> || r &gt;= m || c &gt;= n || grid[r][c] == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    grid[r][c] = <span class="hljs-number">0</span>;    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + bfs(grid, r<span class="hljs-number">-1</span>, c, m, n) + bfs(grid, r+<span class="hljs-number">1</span>, c, m, n)                 + bfs(grid, r, c<span class="hljs-number">-1</span>, m, n) + bfs(grid, r, c+<span class="hljs-number">1</span>, m, n);&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxAreaOfIsland</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;    <span class="hljs-keyword">int</span> max_area = <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span>(grid.size() == <span class="hljs-number">0</span> || grid[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> m = grid.size();    <span class="hljs-keyword">int</span> n = grid[<span class="hljs-number">0</span>].size();    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(grid[i][j] == <span class="hljs-number">1</span>) &#123;                <span class="hljs-keyword">int</span> cur_area = bfs(grid, i, j, m, n);                max_area = max(max_area, cur_area);            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> max_area;&#125;</code></pre></li><li><p>æ‰‹å†™å·ç§¯</p><pre><code class="hljs cpp"></code></pre></li></ul>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>leetcode-algorithm</title>
    <link href="/2020/02/03/leetcode-algorithm/"/>
    <url>/2020/02/03/leetcode-algorithm/</url>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h3 id="1-ä½è¿ç®—"><a href="#1-ä½è¿ç®—" class="headerlink" title="1. ä½è¿ç®—"></a>1. ä½è¿ç®—</h3><p><img src="/2020/02/03/leetcode-algorithm/bit.png" alt></p><h4 id="1-å¸¸è§æŠ€å·§æ€»ç»“"><a href="#1-å¸¸è§æŠ€å·§æ€»ç»“" class="headerlink" title="(1) å¸¸è§æŠ€å·§æ€»ç»“"></a>(1) å¸¸è§æŠ€å·§æ€»ç»“</h4><ol><li><p>ç­‰å·çš„ä¼˜å…ˆçº§æ˜¯å¤§äºä½è¿ç®—çš„!  n &amp; (n-1) == 0 ç­‰ä»·äº n &amp; ((n-1) == 0) è€Œä¸æ˜¯ (n &amp; (n-1)) == 0</p></li><li><p>å¯¹ 32bit ä½åˆ†åˆ«è¿›è¡Œè¿ç®—æ˜¯ä¸€ç§æ€æƒ³ !</p></li></ol><pre><code class="hljs cpp"><span class="hljs-comment">// &amp;   ä¸    |   æˆ–    ~  é      ^   å¼‚æˆ–</span><span class="hljs-comment">// æœ€å¸¸è§çš„å‡ ä¸ªç”¨æ³•</span><span class="hljs-comment">// (1) </span>n &amp; (n<span class="hljs-number">-1</span>)  <span class="hljs-comment">// å°†äºŒè¿›åˆ¶ n çš„æœ€åä¸€ä½ ç”± 1 å˜æˆ 0</span>n ^ (n &amp; (n<span class="hljs-number">-1</span>)) <span class="hljs-comment">// åªä¿ç•™æœ€åä¸€ä¸ª bit ä½ï¼Œ å°† n = 1110 å˜ä¸º n = 0010</span><span class="hljs-comment">// (2) </span><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums) ret ^= num;  <span class="hljs-comment">// åˆ©ç”¨ n ^ n = 0 è¿›è¡Œå»é‡  </span><span class="hljs-comment">// (3) å–ä½å’Œç½®ä½</span>n |= <span class="hljs-number">1</span> &lt;&lt; bit<span class="hljs-comment">// ç½®ä½æ“ä½œ: å°† n çš„ bit ä½è®¾ç½®ä¸º 1, 1 &lt;&lt; bit äº§ç”Ÿä¸€ä¸ªåªæœ‰ bit ä½ä¸º 1ï¼Œ å…¶ä»–å‡ä¸º 0 çš„æ•°</span>n &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; bit) <span class="hljs-comment">// ç½®ä½æ“ä½œï¼Œ å°† n çš„ bit ä½ç½® 0</span>n &amp; <span class="hljs-number">1</span> &lt;&lt; bit   <span class="hljs-comment">// å–ä½æ“ä½œ: åˆ¤æ–­ n çš„ bit ä½æ˜¯å¦æ˜¯ 1</span></code></pre><h4 id="2-å…¸å‹ä¾‹é¢˜"><a href="#2-å…¸å‹ä¾‹é¢˜" class="headerlink" title="(2) å…¸å‹ä¾‹é¢˜"></a>(2) å…¸å‹ä¾‹é¢˜</h4><h5 id="â‘ -ä½¿ç”¨ä½è¿ç®—æ›¿æ¢-ã€-gt-ã€swap-æ“ä½œ"><a href="#â‘ -ä½¿ç”¨ä½è¿ç®—æ›¿æ¢-ã€-gt-ã€swap-æ“ä½œ" class="headerlink" title="â‘  ä½¿ç”¨ä½è¿ç®—æ›¿æ¢ +ã€&gt;ã€swap æ“ä½œ"></a>â‘  ä½¿ç”¨ä½è¿ç®—æ›¿æ¢ +ã€&gt;ã€swap æ“ä½œ</h5><h6 id="371-https-leetcode-cn-com-problems-sum-of-two-integers"><a href="#371-https-leetcode-cn-com-problems-sum-of-two-integers" class="headerlink" title="[371] https://leetcode-cn.com/problems/sum-of-two-integers/"></a>[371] <a href="https://leetcode-cn.com/problems/sum-of-two-integers/">https://leetcode-cn.com/problems/sum-of-two-integers/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getSum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;    <span class="hljs-keyword">while</span>(b)&#123;        <span class="hljs-keyword">int</span> carry = (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)(a &amp; b) &lt;&lt; <span class="hljs-number">1</span>;        a = a ^ b;        b = carry;    &#125;    <span class="hljs-keyword">return</span> a;&#125;</code></pre><h5 id="â‘¡-n-amp-n-1-å°†äºŒè¿›åˆ¶-n-çš„æœ€åä¸€ä½-1-å˜æˆ-0"><a href="#â‘¡-n-amp-n-1-å°†äºŒè¿›åˆ¶-n-çš„æœ€åä¸€ä½-1-å˜æˆ-0" class="headerlink" title="â‘¡ n &amp; (n - 1) å°†äºŒè¿›åˆ¶ n çš„æœ€åä¸€ä½ 1 å˜æˆ 0"></a>â‘¡ n &amp; (n - 1) å°†äºŒè¿›åˆ¶ n çš„æœ€åä¸€ä½ 1 å˜æˆ 0</h5><h6 id="191-https-leetcode-cn-com-problems-number-of-1-bits"><a href="#191-https-leetcode-cn-com-problems-number-of-1-bits" class="headerlink" title="[191] https://leetcode-cn.com/problems/number-of-1-bits/"></a>[191] <a href="https://leetcode-cn.com/problems/number-of-1-bits/">https://leetcode-cn.com/problems/number-of-1-bits/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">hammingWeight</span><span class="hljs-params">(<span class="hljs-keyword">uint32_t</span> n)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(n &gt; <span class="hljs-number">0</span>)&#123;        n = n &amp; (n<span class="hljs-number">-1</span>);        res++;    &#125;    <span class="hljs-keyword">return</span> res; &#125;</code></pre><h6 id="338-https-leetcode-com-problems-counting-bits-ğŸŒŸğŸŒŸ"><a href="#338-https-leetcode-com-problems-counting-bits-ğŸŒŸğŸŒŸ" class="headerlink" title="[338] https://leetcode.com/problems/counting-bits/    ğŸŒŸğŸŒŸ"></a>[338] <a href="https://leetcode.com/problems/counting-bits/">https://leetcode.com/problems/counting-bits/</a>    ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// i &amp; (i - 1) å¯ä»¥å»æ‰ i æœ€å³è¾¹çš„ä¸€ä¸ª1(å¦‚æœæœ‰)ï¼Œ</span><span class="hljs-comment">// æ‰€ä»¥ i çš„1çš„ä¸ªæ•°å°±æ˜¯ i &amp; (i - 1)çš„1çš„ä¸ªæ•°åŠ ä¸Š1</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">countBits</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> </span>&#123;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(num + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= num; i++)&#123;        dp[i] = dp[i &amp; (i<span class="hljs-number">-1</span>)] + <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">return</span> dp;&#125;</code></pre><h6 id="461-https-leetcode-cn-com-problems-hamming-distance"><a href="#461-https-leetcode-cn-com-problems-hamming-distance" class="headerlink" title="[461] https://leetcode-cn.com/problems/hamming-distance/"></a>[461] <a href="https://leetcode-cn.com/problems/hamming-distance/">https://leetcode-cn.com/problems/hamming-distance/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// æ±‚å¼‚æˆ–ç»“æœçš„ 1 çš„ä¸ªæ•°</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">hammingDistance</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>&#123;    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>, n = x ^ y;    <span class="hljs-keyword">while</span>(n)&#123;        n &amp;= (n<span class="hljs-number">-1</span>);        cnt++;    &#125;    <span class="hljs-keyword">return</span> cnt;&#125;</code></pre><h6 id="477-https-leetcode-cn-com-problems-total-hamming-distance"><a href="#477-https-leetcode-cn-com-problems-total-hamming-distance" class="headerlink" title="[477] https://leetcode-cn.com/problems/total-hamming-distance/"></a>[477] <a href="https://leetcode-cn.com/problems/total-hamming-distance/">https://leetcode-cn.com/problems/total-hamming-distance/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// !! å¯¹ 32 bit çš„æ¯ä¸€ä½è¿›è¡Œå¤„ç†ï¼Œè¿™æ˜¯ä¸€ç§æ€æƒ³</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">totalHammingDistance</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++)&#123;        <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums) <span class="hljs-keyword">if</span>(n &amp; (<span class="hljs-number">1</span> &lt;&lt; i)) cnt += <span class="hljs-number">1</span>;        res += (cnt) * (nums.size() - cnt);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="231-https-leetcode-cn-com-problems-power-of-two-ğŸŒŸğŸŒŸ"><a href="#231-https-leetcode-cn-com-problems-power-of-two-ğŸŒŸğŸŒŸ" class="headerlink" title="[231] https://leetcode-cn.com/problems/power-of-two/  ğŸŒŸğŸŒŸ"></a>[231] <a href="https://leetcode-cn.com/problems/power-of-two/">https://leetcode-cn.com/problems/power-of-two/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// å¦‚æœä¸€ä¸ªæ•°æ˜¯2çš„å¹‚ï¼Œé‚£ä¹ˆå…¶äºŒè¿›åˆ¶ä¸­åªæœ‰ä¸€ä½æ•°ä¸º 1</span><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPowerOfTwo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">if</span>(n &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">return</span> (n &amp; (n<span class="hljs-number">-1</span>)) == <span class="hljs-number">0</span>;&#125;</code></pre><h6 id="326-https-leetcode-cn-com-problems-power-of-three"><a href="#326-https-leetcode-cn-com-problems-power-of-three" class="headerlink" title="[326] https://leetcode-cn.com/problems/power-of-three/"></a>[326] <a href="https://leetcode-cn.com/problems/power-of-three/">https://leetcode-cn.com/problems/power-of-three/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPowerOfThree</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">if</span>(n &lt; <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">while</span>( n % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)&#123;        n /= <span class="hljs-number">3</span>;    &#125;    <span class="hljs-keyword">return</span> n == <span class="hljs-number">1</span>;&#125;</code></pre><h6 id="342-https-leetcode-cn-com-problems-power-of-four"><a href="#342-https-leetcode-cn-com-problems-power-of-four" class="headerlink" title="[342] https://leetcode-cn.com/problems/power-of-four/"></a>[342] <a href="https://leetcode-cn.com/problems/power-of-four/">https://leetcode-cn.com/problems/power-of-four/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// !!! ç­‰å·çš„ä¼˜å…ˆçº§æ˜¯è¦å¤§äº ä½è¿ç®—çš„</span><span class="hljs-comment">// power of fourçš„ç‰¹ç‚¹æ˜¯å…¶äºŒè¿›åˆ¶è¡¨ç¤ºé™¤äº†åªæœ‰1ä½ä¸º1å¤–ï¼Œ</span><span class="hljs-comment">// å…¶äºŒè¿›åˆ¶ä¸º1çš„æ•°åœ¨å¥‡æ•°æ•°ä½ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ® num &amp; 0xaaaaaaaa æ¥è·å–ç»“æœ</span><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPowerOfFour</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> </span>&#123;    <span class="hljs-keyword">return</span> (num &gt; <span class="hljs-number">0</span>) &amp;&amp; (num &amp; (num - <span class="hljs-number">1</span>)) == <span class="hljs-number">0</span> &amp;&amp; (num &amp; <span class="hljs-number">0xaaaaaaaa</span>) == <span class="hljs-number">0</span>; &#125;</code></pre><h5 id="â‘¢-å¼‚æˆ–è¿ç®—-n-n-åˆ©ç”¨-n-n-0-æ¥å»é‡"><a href="#â‘¢-å¼‚æˆ–è¿ç®—-n-n-åˆ©ç”¨-n-n-0-æ¥å»é‡" class="headerlink" title="â‘¢ å¼‚æˆ–è¿ç®—  n ^ n, åˆ©ç”¨ n ^ n = 0 æ¥å»é‡"></a>â‘¢ å¼‚æˆ–è¿ç®—  n ^ n, åˆ©ç”¨ n ^ n = 0 æ¥å»é‡</h5><pre><code class="hljs cpp"><span class="hljs-comment">// å¸¸è§ç”¨æ³•</span><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums) ret ^= num;</code></pre><h6 id="136-https-leetcode-com-problems-single-number-ğŸŒŸğŸŒŸ"><a href="#136-https-leetcode-com-problems-single-number-ğŸŒŸğŸŒŸ" class="headerlink" title="[136] https://leetcode.com/problems/single-number/      ğŸŒŸğŸŒŸ"></a>[136] <a href="https://leetcode.com/problems/single-number/">https://leetcode.com/problems/single-number/</a>      ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">singleNumber</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums) res ^= n;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="389-https-leetcode-com-problems-find-the-difference"><a href="#389-https-leetcode-com-problems-find-the-difference" class="headerlink" title="[389] https://leetcode.com/problems/find-the-difference/"></a>[389] <a href="https://leetcode.com/problems/find-the-difference/">https://leetcode.com/problems/find-the-difference/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">char</span> <span class="hljs-title">findTheDifference</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s, <span class="hljs-built_in">string</span> t)</span> </span>&#123;    <span class="hljs-keyword">char</span> res = t[<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.size(); i++) res ^= s[i];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; t.size(); i++) res ^= t[i];    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="268-https-leetcode-com-problems-missing-number"><a href="#268-https-leetcode-com-problems-missing-number" class="headerlink" title="[268] https://leetcode.com/problems/missing-number/"></a>[268] <a href="https://leetcode.com/problems/missing-number/">https://leetcode.com/problems/missing-number/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">missingNumber</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> len = nums.size()ï¼Œ res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= len; i++)   res ^= i;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)  res ^= nums[i];    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-comment">// è§£æ³•äºŒ: æ±‚å’Œ 0-n, ç„¶åå‡å»æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">missingNumber</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= nums.size(); i++) res ^= i;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); i++) res ^= nums[i];    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="260-https-leetcode-cn-com-problems-single-number-iii-ğŸŒŸğŸŒŸ"><a href="#260-https-leetcode-cn-com-problems-single-number-iii-ğŸŒŸğŸŒŸ" class="headerlink" title="[260] https://leetcode-cn.com/problems/single-number-iii/     ğŸŒŸğŸŒŸ"></a>[260] <a href="https://leetcode-cn.com/problems/single-number-iii/">https://leetcode-cn.com/problems/single-number-iii/</a>     ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">singleNumbers</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> diff = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums) diff ^= n;    <span class="hljs-keyword">int</span> last_diff = (diff &amp; (diff - <span class="hljs-number">1</span>)) ^ diff;    <span class="hljs-keyword">int</span> resA = <span class="hljs-number">0</span>, resB = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">if</span>(nums[i] &amp; last_diff) resA ^= nums[i];        <span class="hljs-keyword">else</span> resB ^= nums[i];    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &#123;resA, resB&#125;;&#125;</code></pre><h6 id="169-https-leetcode-cn-com-problems-majority-element-ğŸŒŸğŸŒŸ"><a href="#169-https-leetcode-cn-com-problems-majority-element-ğŸŒŸğŸŒŸ" class="headerlink" title="[169] https://leetcode-cn.com/problems/majority-element/   ğŸŒŸğŸŒŸ"></a>[169] <a href="https://leetcode-cn.com/problems/majority-element/">https://leetcode-cn.com/problems/majority-element/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// æ²¡æœ‰ç”¨åˆ° ä½è¿ç®—ï¼Œ ä½†æ˜¯å¤§éƒ¨åˆ†é¢˜ç›®éƒ½ä¼šå°†å…¶æ”¾åˆ°ä½è¿ç®—è¿™ä¸ªç±»åˆ«å½“ä¸­</span><span class="hljs-comment">// è§£æ³•äºŒ: æ‘©å°”æŠ•ç¥¨æ³•</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">majorityElement</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> cur = nums[<span class="hljs-number">0</span>];    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">if</span>(nums[i] != cur)&#123;            --cnt;            <span class="hljs-keyword">if</span>(cnt &lt;= <span class="hljs-number">0</span>)&#123;                cur = nums[i];                cnt = <span class="hljs-number">1</span>;            &#125;        &#125;<span class="hljs-keyword">else</span>&#123;            cnt += <span class="hljs-number">1</span>;         &#125;    &#125;    <span class="hljs-keyword">return</span> cur;&#125;</code></pre><h5 id="â‘£-å–ä½å’Œ-ç½®ä½æ“ä½œ"><a href="#â‘£-å–ä½å’Œ-ç½®ä½æ“ä½œ" class="headerlink" title="â‘£  å–ä½å’Œ ç½®ä½æ“ä½œ"></a>â‘£  å–ä½å’Œ ç½®ä½æ“ä½œ</h5><pre><code class="hljs cpp">n |= <span class="hljs-number">1</span> &lt;&lt; bit<span class="hljs-comment">// ç½®ä½æ“ä½œ: å°† n çš„ bit ä½è®¾ç½®ä¸º 1, 1 &lt;&lt; bit äº§ç”Ÿä¸€ä¸ªåªæœ‰ bit ä½ä¸º 1ï¼Œ å…¶ä»–å‡ä¸º 0 çš„æ•°</span>n &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; bit) <span class="hljs-comment">// ç½®ä½æ“ä½œï¼Œ å°† n çš„ bit ä½ç½® 0</span>n &amp; <span class="hljs-number">1</span> &lt;&lt; bit   <span class="hljs-comment">// å–ä½æ“ä½œ: åˆ¤æ–­ n çš„ bit ä½æ˜¯å¦æ˜¯ 1</span></code></pre><h6 id="190-https-leetcode-com-problems-reverse-bits"><a href="#190-https-leetcode-com-problems-reverse-bits" class="headerlink" title="[190] https://leetcode.com/problems/reverse-bits/"></a>[190] <a href="https://leetcode.com/problems/reverse-bits/">https://leetcode.com/problems/reverse-bits/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// A &amp; (1 &lt;&lt; i)  è·å– i ä½çš„ bit</span><span class="hljs-comment">// A |= (1 &lt;&lt; i)  å°† i ä½ è®¾ç½®ä¸º bit</span><span class="hljs-function"><span class="hljs-keyword">uint32_t</span> <span class="hljs-title">reverseBits</span><span class="hljs-params">(<span class="hljs-keyword">uint32_t</span> n)</span> </span>&#123;    <span class="hljs-keyword">uint32_t</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++)&#123;        <span class="hljs-keyword">bool</span> bit = (<span class="hljs-number">1</span> &lt;&lt; i) &amp; n; <span class="hljs-comment">// get</span>        res |= (bit &lt;&lt; (<span class="hljs-number">32</span> - i - <span class="hljs-number">1</span>)); <span class="hljs-comment">// set</span>    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="137-https-leetcode-com-problems-single-number-ii"><a href="#137-https-leetcode-com-problems-single-number-ii" class="headerlink" title="[137] https://leetcode.com/problems/single-number-ii/"></a>[137] <a href="https://leetcode.com/problems/single-number-ii/">https://leetcode.com/problems/single-number-ii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">singleNumber</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++)&#123;        <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums) <span class="hljs-keyword">if</span>((<span class="hljs-number">1</span> &lt;&lt; i) &amp; n) cnt+=<span class="hljs-number">1</span>;        <span class="hljs-keyword">if</span>(cnt % <span class="hljs-number">3</span> == <span class="hljs-number">1</span>) res += (<span class="hljs-number">1</span> &lt;&lt; i);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h5 id="â‘¤-å…¶ä»–"><a href="#â‘¤-å…¶ä»–" class="headerlink" title="â‘¤ å…¶ä»–"></a>â‘¤ å…¶ä»–</h5><h6 id="89-https-leetcode-cn-com-problems-gray-code"><a href="#89-https-leetcode-cn-com-problems-gray-code" class="headerlink" title="[89] https://leetcode-cn.com/problems/gray-code/"></a>[89] <a href="https://leetcode-cn.com/problems/gray-code/">https://leetcode-cn.com/problems/gray-code/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">grayCode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">int</span> max = <span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>, n);    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; max; i++)&#123;        res.push_back((i &gt;&gt; <span class="hljs-number">1</span>) ^ i); <span class="hljs-comment">// æ ¼é›·ç è¿ç®—</span>    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="201-https-leetcode-cn-com-problems-bitwise-and-of-numbers-range"><a href="#201-https-leetcode-cn-com-problems-bitwise-and-of-numbers-range" class="headerlink" title="[201] https://leetcode-cn.com/problems/bitwise-and-of-numbers-range/"></a>[201] <a href="https://leetcode-cn.com/problems/bitwise-and-of-numbers-range/">https://leetcode-cn.com/problems/bitwise-and-of-numbers-range/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">rangeBitwiseAnd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = n;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = m; i &lt; n &amp; res != <span class="hljs-number">0</span>; i++)&#123;  <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ª res != 0 é˜²æ­¢è¶…æ—¶</span>        res &amp;= i;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h3 id="4-æ•°å­¦å’Œå½’çº³æ€»ç»“"><a href="#4-æ•°å­¦å’Œå½’çº³æ€»ç»“" class="headerlink" title="4. æ•°å­¦å’Œå½’çº³æ€»ç»“"></a>4. æ•°å­¦å’Œå½’çº³æ€»ç»“</h3><h6 id="7-æ•´æ•°åè½¬-https-leetcode-cn-com-problems-reverse-integer"><a href="#7-æ•´æ•°åè½¬-https-leetcode-cn-com-problems-reverse-integer" class="headerlink" title="[7] æ•´æ•°åè½¬ https://leetcode-cn.com/problems/reverse-integer/"></a>[7] æ•´æ•°åè½¬ <a href="https://leetcode-cn.com/problems/reverse-integer/">https://leetcode-cn.com/problems/reverse-integer/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">reverse</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;    <span class="hljs-keyword">long</span> res = <span class="hljs-number">0</span>;    <span class="hljs-comment">// å¯ä»¥å¤„ç†è´Ÿæ•°çš„æƒ…å†µ</span>    <span class="hljs-keyword">while</span>(x != <span class="hljs-number">0</span>)&#123;        res = res * <span class="hljs-number">10</span> + x % <span class="hljs-number">10</span>;        x /= <span class="hljs-number">10</span>;    &#125;    <span class="hljs-keyword">if</span>(res &gt; INT_MAX || res &lt; INT_MIN) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">return</span> res;  &#125;</code></pre><h6 id="lcof-65-https-leetcode-cn-com-problems-bu-yong-jia-jian-cheng-chu-zuo-jia-fa-lcof"><a href="#lcof-65-https-leetcode-cn-com-problems-bu-yong-jia-jian-cheng-chu-zuo-jia-fa-lcof" class="headerlink" title="[lcof 65] https://leetcode-cn.com/problems/bu-yong-jia-jian-cheng-chu-zuo-jia-fa-lcof/"></a>[lcof 65] <a href="https://leetcode-cn.com/problems/bu-yong-jia-jian-cheng-chu-zuo-jia-fa-lcof/">https://leetcode-cn.com/problems/bu-yong-jia-jian-cheng-chu-zuo-jia-fa-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;    <span class="hljs-keyword">while</span>(b)&#123;        <span class="hljs-keyword">int</span> c_in = (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>) (a &amp; b) &lt;&lt; <span class="hljs-number">1</span>; <span class="hljs-comment">// è¿›ä½</span>        a = a ^ b; <span class="hljs-comment">// ç›¸åŠ </span>        b = c_in; <span class="hljs-comment">// èµ‹å€¼</span>    &#125;    <span class="hljs-keyword">return</span> a;&#125;</code></pre><h6 id="292-Nim-æ¸¸æˆ-https-leetcode-cn-com-problems-nim-game"><a href="#292-Nim-æ¸¸æˆ-https-leetcode-cn-com-problems-nim-game" class="headerlink" title="[292] Nim æ¸¸æˆ https://leetcode-cn.com/problems/nim-game/"></a>[292] Nim æ¸¸æˆ <a href="https://leetcode-cn.com/problems/nim-game/">https://leetcode-cn.com/problems/nim-game/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">canWinNim</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-comment">// å·´ä»€åšå¥•ï¼Œn % (m+1) != 0 æ—¶ï¼Œå…ˆæ‰‹æ€»æ˜¯ä¼šèµ¢çš„</span>    <span class="hljs-keyword">return</span> n % <span class="hljs-number">4</span> != <span class="hljs-number">0</span>;&#125;</code></pre><h6 id="50-Pow-x-n-https-leetcode-cn-com-problems-powx-n-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#50-Pow-x-n-https-leetcode-cn-com-problems-powx-n-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[50]. Pow(x, n)] https://leetcode-cn.com/problems/powx-n/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[50]. Pow(x, n)] <a href="https://leetcode-cn.com/problems/powx-n/">https://leetcode-cn.com/problems/powx-n/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">myPow</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">double</span> res = <span class="hljs-number">1.0</span>;    <span class="hljs-comment">// å½•ç”¨å¿«é€Ÿå¹‚è¿›è¡Œè§£é¢˜:</span>    <span class="hljs-comment">//  pow = x^n = </span>    <span class="hljs-comment">//    (x^2)^(n//2), nä¸ºå¶æ•°</span>    <span class="hljs-comment">//   x(x^2)^(n//2), nä¸ºå¥‡æ•°</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = n; i != <span class="hljs-number">0</span>; i /= <span class="hljs-number">2</span>)&#123;        <span class="hljs-keyword">if</span>(i % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>)&#123; <span class="hljs-comment">// è¿™é‡Œç”¨ i % 2 ï¼= 0 å¯ä»¥åŒæ—¶å¤„ç† æ­£è´Ÿä¸¤ç§æƒ…å†µ!</span>            res *= x;        &#125;        x *= x;    &#125;    <span class="hljs-keyword">return</span> n &gt; <span class="hljs-number">0</span> ? res : <span class="hljs-number">1.0</span> / res;&#125;</code></pre><h3 id="2-å›æº¯ã€è´ªå¿ƒã€åˆ†æ²»ã€é€’å½’"><a href="#2-å›æº¯ã€è´ªå¿ƒã€åˆ†æ²»ã€é€’å½’" class="headerlink" title="2. å›æº¯ã€è´ªå¿ƒã€åˆ†æ²»ã€é€’å½’"></a>2. å›æº¯ã€è´ªå¿ƒã€åˆ†æ²»ã€é€’å½’</h3><h4 id="2-1-å›æº¯"><a href="#2-1-å›æº¯" class="headerlink" title="2.1 å›æº¯"></a>2.1 å›æº¯</h4><p>â€‹        å›æº¯æ³•åˆç§°ä¸ºè¯•æ¢æ³•ï¼Œ <strong>ä½†å½“æ¢ç´¢åˆ°æŸä¸€æ­¥æ—¶ï¼Œ å‘ç°åŸå…ˆé€‰æ‹©è¾¾ä¸åˆ°ç›®æ ‡ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ï¼Œè¿™ç§èµ°ä¸é€šå°±é€€å›å†èµ°çš„æŠ€æœ¯</strong>ç§°ä¸ºå›æº¯æ³•ã€‚ å¸¸è§çš„é¢˜ç›®æœ‰ï¼šå­é›†ã€ç»„åˆã€å…¨æ’åˆ—ã€æ‹¬å·ç”Ÿæˆã€ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</p><ul><li><p>è®°ä½ï¼šä¼ é€’å¼•ç”¨ã€æ’åºã€å»é‡(åˆ©ç”¨é›†åˆå»é‡)ã€‚ è¿™å…¶ä¸­ï¼Œ æ’åºå’Œå»é‡å¯ä»¥ç”¨äºé™ä½å¤æ‚åº¦</p></li><li><p>å‰ªæ:</p><p>(1) å½“å®¹å™¨é•¿åº¦ç­‰äºæ·±åº¦çš„æ—¶å€™</p><p>(2) <code>find(path.begin(), path.end(), nums[i]) == path.end()</code>  åªæœ‰ä¸åœ¨ track ä¸­æ‰æ·»åŠ </p><p>(3) ä½¿ç”¨ flag è¿›è¡Œæ ‡è®°  -&gt; vistited</p></li><li><p>ä¸€èˆ¬ä¼ é€’çš„å‡ ä¸ªå‚æ•°ï¼šresã€trackã€depthã€nums(åŸæœ‰æ•°ç»„)</p></li><li><p>æ¨¡æ¿</p><pre><code class="hljs cpp">result = []def backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨):    <span class="hljs-keyword">if</span> ä¸æ»¡è¶³æ¡ä»¶: <span class="hljs-keyword">return</span>        <span class="hljs-keyword">if</span> æ»¡è¶³ç»“æŸæ¡ä»¶:        result.add(è·¯å¾„)        <span class="hljs-keyword">return</span>          <span class="hljs-keyword">for</span> é€‰æ‹© in é€‰æ‹©åˆ—è¡¨:        åšé€‰æ‹©        backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨)        æ’¤é”€é€‰æ‹©</code></pre></li><li><p>æ€è€ƒçš„è¿‡ç¨‹å°±æ˜¯æ„å»ºå†³ç­–æ ‘çš„è¿‡ç¨‹ï¼Œ è¦æœ‰è¿™ä¸ªæ€ç»´</p></li></ul><h6 id="78-å­é›†-https-leetcode-cn-com-problems-subsets"><a href="#78-å­é›†-https-leetcode-cn-com-problems-subsets" class="headerlink" title="[78. å­é›†] https://leetcode-cn.com/problems/subsets/"></a>[78. å­é›†] <a href="https://leetcode-cn.com/problems/subsets/">https://leetcode-cn.com/problems/subsets/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">subsets</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;   <span class="hljs-comment">// å­˜å‚¨æœ€ç»ˆç»“æœçš„ res</span>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span> &gt; track;         <span class="hljs-comment">// å›æº¯æ—¶å€™çš„å„ä¸ªå­é›†å…ƒç´ </span>    backtrack(nums, <span class="hljs-number">0</span>, res, track);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">backtrack</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> start, </span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt;&amp; res, </span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; track)</span></span>&#123;    res.push_back(track);    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = start; i &lt; nums.size(); i++)&#123;        track.push_back(nums[i]);  <span class="hljs-comment">// åšé€‰æ‹©</span>        backtrack(nums, i+<span class="hljs-number">1</span>, res, track);  <span class="hljs-comment">// å›æº¯</span>        track.pop_back();  <span class="hljs-comment">// æ’¤é”€é€‰æ‹©</span>    &#125;&#125;</code></pre><blockquote><p><strong>å›æº¯</strong>çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>åˆå§‹åŒ–æ—¶ä¸ºç©ºé›†åˆ</p><p>å½“ç¬¬ä¸€æ¬¡é€’å½’æ—¶ï¼Œ åˆ†åˆ«æ·»åŠ  [1]ã€[2]ã€[3] ä¸‰ä¸ªé›†åˆ</p><p>å½“ç¬¬äºŒæ¬¡é€’å½’æ—¶ï¼Œ å¯¹äºé›†åˆ [1]ï¼Œ æ·»åŠ  [2] ç»„æˆ [1, 2]ï¼Œ æ·»åŠ  [3]  ç»„æˆ [1, 3]</p><p>â€‹                                å¯¹äºé›†åˆ [2]ï¼Œ æ·»åŠ  [3] ç»„æˆ [2, 3]</p><p>ç¬¬ä¸‰æ¬¡é€’å½’æ—¶ï¼Œ å¯¹äºé›†åˆ [1, 2]ï¼Œ æ·»åŠ  [3] ç»„æˆ [1, 2, 3] å³å¯</p></blockquote><p>å›æº¯æ¨¡æ¿</p><pre><code class="hljs python">result = []<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">backtrack</span>(<span class="hljs-params">è·¯å¾„, é€‰æ‹©åˆ—è¡¨</span>):</span>    <span class="hljs-keyword">if</span> ä¸æ»¡è¶³æ¡ä»¶: <span class="hljs-keyword">return</span>        <span class="hljs-keyword">if</span> æ»¡è¶³ç»“æŸæ¡ä»¶:        result.add(è·¯å¾„)        <span class="hljs-keyword">return</span>          <span class="hljs-keyword">for</span> é€‰æ‹© <span class="hljs-keyword">in</span> é€‰æ‹©åˆ—è¡¨:        åšé€‰æ‹©        backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨)        æ’¤é”€é€‰æ‹©</code></pre><h6 id="90-å­é›†-II-https-leetcode-cn-com-problems-subsets-ii"><a href="#90-å­é›†-II-https-leetcode-cn-com-problems-subsets-ii" class="headerlink" title="[90. å­é›† II] https://leetcode-cn.com/problems/subsets-ii/"></a>[90. å­é›† II] <a href="https://leetcode-cn.com/problems/subsets-ii/">https://leetcode-cn.com/problems/subsets-ii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">subsetsWithDup</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; track;    sort(nums.begin(), nums.end());  <span class="hljs-comment">// é¢„å¤„ç†ï¼šæ’åº</span>    backtrack(nums, <span class="hljs-number">0</span>, res, track);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">backtrack</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; nums, <span class="hljs-keyword">int</span> start,</span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt;&amp; res,</span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span> &gt;&amp; track)</span></span>&#123;   <span class="hljs-keyword">if</span>(find(res.begin(), res.end(), track) == res.end()) res.push_back(track);  <span class="hljs-comment">// å‰ªæï¼Œ æ’é™¤é‡å¤å…ƒç´ </span>   <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = start; i &lt; nums.size(); i++)&#123;       track.push_back(nums[i]);       backtrack(nums, i+<span class="hljs-number">1</span>, res, track);       track.pop_back();   &#125;&#125;</code></pre><h6 id="46-å…¨æ’åˆ—-https-leetcode-cn-com-problems-permutations-ğŸŒŸğŸŒŸğŸŒŸ-ğŸŒŸ"><a href="#46-å…¨æ’åˆ—-https-leetcode-cn-com-problems-permutations-ğŸŒŸğŸŒŸğŸŒŸ-ğŸŒŸ" class="headerlink" title="[46] å…¨æ’åˆ— https://leetcode-cn.com/problems/permutations/  ğŸŒŸğŸŒŸğŸŒŸ ğŸŒŸ"></a>[46] å…¨æ’åˆ— <a href="https://leetcode-cn.com/problems/permutations/">https://leetcode-cn.com/problems/permutations/</a>  ğŸŒŸğŸŒŸğŸŒŸ ğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">permute</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; track;    <span class="hljs-keyword">int</span> n = nums.size();    trackback(track, res, <span class="hljs-number">0</span>, nums);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">trackback</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; track, </span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt;&amp; res,</span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-keyword">int</span> depth,</span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; nums</span></span><span class="hljs-function"><span class="hljs-params">              )</span></span>&#123;    <span class="hljs-keyword">int</span> n = nums.size();    <span class="hljs-keyword">if</span>(depth == n) res.push_back(track);    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)&#123;        <span class="hljs-keyword">if</span>(find(track.begin(), track.end(), nums[i]) == track.end())&#123; <span class="hljs-comment">// é˜²æ­¢å‡ºç°é‡å¤å…ƒç´ </span>            track.push_back(nums[i]);            trackback(track, res, depth+<span class="hljs-number">1</span>, nums);            track.pop_back();        &#125;    &#125;&#125;</code></pre><h6 id="47-å…¨æ’åˆ—-II-https-leetcode-cn-com-problems-permutations-ii-ğŸŒŸğŸŒŸğŸŒŸ-ğŸŒŸ"><a href="#47-å…¨æ’åˆ—-II-https-leetcode-cn-com-problems-permutations-ii-ğŸŒŸğŸŒŸğŸŒŸ-ğŸŒŸ" class="headerlink" title="[47] å…¨æ’åˆ— II https://leetcode-cn.com/problems/permutations-ii/   ğŸŒŸğŸŒŸğŸŒŸ ğŸŒŸ"></a>[47] å…¨æ’åˆ— II <a href="https://leetcode-cn.com/problems/permutations-ii/">https://leetcode-cn.com/problems/permutations-ii/</a>   ğŸŒŸğŸŒŸğŸŒŸ ğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">backtrack</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; track, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; res, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">bool</span>&gt; &amp; flag)</span> </span>&#123;    <span class="hljs-keyword">if</span> (track.size() == nums.size() &amp;&amp;          find(res.begin(), res.end(), track) == res.end()) &#123;        res.push_back(track);        <span class="hljs-keyword">return</span>;    &#125;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); ++i) &#123;        <span class="hljs-comment">// å‰ªæ !!</span>        <span class="hljs-keyword">if</span>(i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i<span class="hljs-number">-1</span>] &amp;&amp; flag[i<span class="hljs-number">-1</span>])&#123;            <span class="hljs-keyword">continue</span>;        &#125;        <span class="hljs-keyword">if</span>(flag[i] == <span class="hljs-literal">false</span>)&#123;            track.push_back(nums[i]);            flag[i] = <span class="hljs-literal">true</span>;            backtrack(nums, track, res, flag);            flag[i] = <span class="hljs-literal">false</span>;            track.pop_back();        &#125;    &#125;&#125;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">permuteUnique</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; res;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; track;    sort(nums.begin(), nums.end());    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">bool</span>&gt; <span class="hljs-title">flag</span><span class="hljs-params">(nums.size(), <span class="hljs-literal">false</span>)</span></span>;    backtrack(nums, track, res, flag);    <span class="hljs-keyword">return</span> res;   &#125;</code></pre><h6 id="lcof-å‰‘æŒ‡-Offer-38-å­—ç¬¦ä¸²çš„æ’åˆ—-https-leetcode-cn-com-problems-zi-fu-chuan-de-pai-lie-lcof"><a href="#lcof-å‰‘æŒ‡-Offer-38-å­—ç¬¦ä¸²çš„æ’åˆ—-https-leetcode-cn-com-problems-zi-fu-chuan-de-pai-lie-lcof" class="headerlink" title="[lcof] å‰‘æŒ‡ Offer 38. å­—ç¬¦ä¸²çš„æ’åˆ— https://leetcode-cn.com/problems/zi-fu-chuan-de-pai-lie-lcof/"></a>[lcof] å‰‘æŒ‡ Offer 38. å­—ç¬¦ä¸²çš„æ’åˆ— <a href="https://leetcode-cn.com/problems/zi-fu-chuan-de-pai-lie-lcof/">https://leetcode-cn.com/problems/zi-fu-chuan-de-pai-lie-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">trackback</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s, <span class="hljs-keyword">int</span> depth, <span class="hljs-built_in">string</span> track, </span></span><span class="hljs-function"><span class="hljs-params">               <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">bool</span>&gt; flag, <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; res)</span></span>&#123;    <span class="hljs-keyword">if</span>(depth == s.size())&#123;        res.insert(track);        <span class="hljs-keyword">return</span>;    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.size(); i++)&#123;        <span class="hljs-keyword">if</span>(!flag[i])&#123;            track.push_back(s[i]);            flag[i] = <span class="hljs-literal">true</span>;            trackback(s, depth+<span class="hljs-number">1</span>, track, flag, res);            track.pop_back();            flag[i] = <span class="hljs-literal">false</span>;        &#125;    &#125;&#125;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">permutation</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">string</span>&gt; res; <span class="hljs-comment">// ä½¿ç”¨ set æ¥é™ä½å¤æ‚åº¦</span>    <span class="hljs-built_in">string</span> track;    <span class="hljs-keyword">int</span> depth = <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">bool</span>&gt; <span class="hljs-title">flag</span><span class="hljs-params">(s.size(), <span class="hljs-number">0</span>)</span></span>; <span class="hljs-comment">// ä½¿ç”¨ flag æ¥æ ‡è®°æ˜¯å¦éå†è¿‡</span>    trackback(s, depth, track, flag, res);    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;(res.begin(), res.end());&#125;</code></pre><h6 id="22-æ‹¬å·ç”Ÿæˆ-https-leetcode-cn-com-problems-generate-parentheses"><a href="#22-æ‹¬å·ç”Ÿæˆ-https-leetcode-cn-com-problems-generate-parentheses" class="headerlink" title="[22] æ‹¬å·ç”Ÿæˆ https://leetcode-cn.com/problems/generate-parentheses/"></a>[22] æ‹¬å·ç”Ÿæˆ <a href="https://leetcode-cn.com/problems/generate-parentheses/">https://leetcode-cn.com/problems/generate-parentheses/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">generateParenthesis</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; res;    <span class="hljs-built_in">string</span> str;    backtrace(n, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, res, str);   <span class="hljs-comment">// å·²ç»æ”¾ç½®äº† 0 ä¸ª left å’Œ 0 ä¸ª right</span>    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">backtrace</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> left, <span class="hljs-keyword">int</span> right, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; res, <span class="hljs-built_in">string</span> str)</span></span>&#123;    <span class="hljs-comment">// å½“å³æ‹¬å·å¤§äºå·¦æ‹¬å· æˆ–è€… å·¦æ‹¬å·å¤§äºn æˆ–è€… å³æ‹¬å·å¤§äºn çš„æ—¶å€™ï¼Œä¸ç¬¦åˆæ¡ä»¶ -&gt; å‰ªæ</span>    <span class="hljs-keyword">if</span>(right &gt; left || right &gt; n || left &gt; n) <span class="hljs-keyword">return</span>;    <span class="hljs-comment">// å½“ å·¦æ‹¬å·æ•°ç›® == å³æ‹¬å·æ•°ç›®ï¼Œ ä¸”å·¦æ‹¬å· = n æ—¶ï¼Œ æ»¡è¶³æ¡ä»¶ -&gt; ä¿å­˜</span>    <span class="hljs-keyword">if</span>(right == left &amp;&amp; left == n)&#123;        res.push_back(str);        <span class="hljs-keyword">return</span>;    &#125;    <span class="hljs-comment">// é€’å½’è¿›è¡Œ</span>    backtrace(n, left+<span class="hljs-number">1</span>, right, res, str + <span class="hljs-string">&#x27;(&#x27;</span>);    backtrace(n, left, right+<span class="hljs-number">1</span>, res, str + <span class="hljs-string">&#x27;)&#x27;</span>);&#125;</code></pre><h6 id="17-ç”µè¯å·ç çš„å­—æ¯ç»„åˆhttps-leetcode-cn-com-problems-letter-combinations-of-a-phone-number"><a href="#17-ç”µè¯å·ç çš„å­—æ¯ç»„åˆhttps-leetcode-cn-com-problems-letter-combinations-of-a-phone-number" class="headerlink" title="[17] ç”µè¯å·ç çš„å­—æ¯ç»„åˆhttps://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/"></a>[17] ç”µè¯å·ç çš„å­—æ¯ç»„åˆ<a href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/">https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/</a></h6><pre><code class="hljs cpp"><span class="hljs-built_in">map</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">string</span>&gt; m_map = &#123;    &#123;<span class="hljs-number">2</span>,<span class="hljs-string">&quot;abc&quot;</span>&#125;, &#123;<span class="hljs-number">3</span>,<span class="hljs-string">&quot;def&quot;</span>&#125;, &#123;<span class="hljs-number">4</span>,<span class="hljs-string">&quot;ghi&quot;</span>&#125;, &#123;<span class="hljs-number">5</span>,<span class="hljs-string">&quot;jkl&quot;</span>&#125;,    &#123;<span class="hljs-number">6</span>, <span class="hljs-string">&quot;mno&quot;</span>&#125;, &#123;<span class="hljs-number">7</span>,<span class="hljs-string">&quot;pqrs&quot;</span>&#125;, &#123;<span class="hljs-number">8</span>,<span class="hljs-string">&quot;tuv&quot;</span>&#125;, &#123;<span class="hljs-number">9</span>,<span class="hljs-string">&quot;wxyz&quot;</span>&#125;&#125;;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">letterCombinations</span><span class="hljs-params">(<span class="hljs-built_in">string</span> digits)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; res;    <span class="hljs-keyword">if</span>(digits.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;&quot;</span>;    trackback(res, <span class="hljs-number">0</span>, digits, str);    <span class="hljs-keyword">return</span> res;&#125;       <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">trackback</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; res, <span class="hljs-keyword">int</span> depth, <span class="hljs-built_in">string</span> digits, <span class="hljs-built_in">string</span>&amp; str)</span></span>&#123;    <span class="hljs-comment">// res å­˜å‚¨å¯¹åº”çš„ ç»“æœ</span>    <span class="hljs-comment">// depth ä¸æ–­åŠ æ·±æ ‘çš„æ·±åº¦ digits</span>    <span class="hljs-comment">// åˆ©ç”¨ depth &amp; digits å¯ä»¥è·å–å½“å‰çš„é€‰æ‹©[è¿™é‡Œæ˜¯æŸä¸ªå­—ç¬¦]</span>    <span class="hljs-comment">// str æ˜¯éå†å¤„çš„å­—ç¬¦ä¸²å€¼</span>    <span class="hljs-keyword">if</span>(str.size() == digits.size()) res.push_back(str);    <span class="hljs-built_in">string</span> choose = m_map[digits[depth] - <span class="hljs-string">&#x27;0&#x27;</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; choose.size(); i++)&#123;       str += choose[i]; <span class="hljs-comment">// é€‰æ‹©</span>       trackback(res, depth+<span class="hljs-number">1</span>, digits, str); <span class="hljs-comment">// å›æº¯</span>       str.erase(str.end() - <span class="hljs-number">1</span>); <span class="hljs-comment">// æ’¤é”€  </span>    &#125;&#125;</code></pre><h6 id="39-ç»„åˆæ€»å’Œ-https-leetcode-cn-com-problems-combination-sum"><a href="#39-ç»„åˆæ€»å’Œ-https-leetcode-cn-com-problems-combination-sum" class="headerlink" title="[39] ç»„åˆæ€»å’Œ https://leetcode-cn.com/problems/combination-sum/"></a>[39] ç»„åˆæ€»å’Œ <a href="https://leetcode-cn.com/problems/combination-sum/">https://leetcode-cn.com/problems/combination-sum/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">trackback</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; res, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; track, <span class="hljs-keyword">int</span> start, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; candidates, <span class="hljs-keyword">int</span> target)</span></span>&#123;    <span class="hljs-keyword">int</span> s = accumulate(track.begin(), track.end(), <span class="hljs-number">0</span>);    <span class="hljs-keyword">if</span>(s &gt; target) <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">if</span>(s == target)  res.push_back(track);    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = start; i &lt; candidates.size(); i++)&#123;        track.push_back(candidates[i]);        trackback(res, track, i, candidates, target);        track.pop_back();    &#125;    &#125;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">combinationSum</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; candidates, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; track;    trackback(res, track, <span class="hljs-number">0</span>, candidates, target);    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="77-ç»„åˆ-https-leetcode-cn-com-problems-combinations"><a href="#77-ç»„åˆ-https-leetcode-cn-com-problems-combinations" class="headerlink" title="[77] ç»„åˆ https://leetcode-cn.com/problems/combinations/"></a>[77] ç»„åˆ <a href="https://leetcode-cn.com/problems/combinations/">https://leetcode-cn.com/problems/combinations/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">combine</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; track;    trackback(res, track, <span class="hljs-number">0</span>, n, k);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">trackback</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt;&amp; res, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &amp; track, <span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> k)</span></span>&#123;    <span class="hljs-keyword">if</span>(track.size() &gt; k) <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">if</span>(track.size() == k) res.push_back(track);    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = start; i &lt; n; i++)&#123;        track.push_back(i+<span class="hljs-number">1</span>);        trackback(res, track, i+<span class="hljs-number">1</span>, n, k);        track.pop_back();    &#125;&#125;</code></pre><h6 id="79-å•è¯æœç´¢-https-leetcode-cn-com-problems-word-search"><a href="#79-å•è¯æœç´¢-https-leetcode-cn-com-problems-word-search" class="headerlink" title="[79] å•è¯æœç´¢ https://leetcode-cn.com/problems/word-search/"></a>[79] å•è¯æœç´¢ <a href="https://leetcode-cn.com/problems/word-search/">https://leetcode-cn.com/problems/word-search/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> idx)</span></span>&#123;    <span class="hljs-comment">// åˆ¤æ–­éæ³•é€€å‡ºæ¡ä»¶</span>    <span class="hljs-keyword">if</span>(r &lt; <span class="hljs-number">0</span> || r &gt;= m || c &lt; <span class="hljs-number">0</span> || c &gt;= n        || g_word[idx] != g_board[r][c]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-comment">// åˆ¤å®šç¬¦åˆæ¡ä»¶</span>    <span class="hljs-keyword">if</span>(idx == g_word.size() - <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;   <span class="hljs-comment">// å››ä¸ªæ–¹å‘çš„å›æº¯</span>    <span class="hljs-keyword">char</span> t = g_board[r][c];    g_board[r][c] = <span class="hljs-string">&#x27;$&#x27;</span>;    <span class="hljs-keyword">if</span>(bfs(r<span class="hljs-number">-1</span>, c, idx+<span class="hljs-number">1</span>)      ||bfs(r+<span class="hljs-number">1</span>, c, idx+<span class="hljs-number">1</span>)      || bfs(r, c<span class="hljs-number">-1</span>, idx+<span class="hljs-number">1</span>)      || bfs(r, c+<span class="hljs-number">1</span>, idx+<span class="hljs-number">1</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    g_board[r][c] = t;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">exist</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt;&gt;&amp; board, <span class="hljs-built_in">string</span> word)</span> </span>&#123;    g_board = board;    g_word = word;    m = board.size();    n = board[<span class="hljs-number">0</span>].size();    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(bfs(i, j, <span class="hljs-number">0</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;<span class="hljs-keyword">int</span> m, n;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt; &gt; g_board;<span class="hljs-built_in">string</span> g_word;</code></pre><h6 id="51-N-çš‡å-https-leetcode-cn-com-problems-n-queens"><a href="#51-N-çš‡å-https-leetcode-cn-com-problems-n-queens" class="headerlink" title="[51] N çš‡å https://leetcode-cn.com/problems/n-queens/"></a>[51] N çš‡å <a href="https://leetcode-cn.com/problems/n-queens/">https://leetcode-cn.com/problems/n-queens/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; board, <span class="hljs-keyword">int</span> row, <span class="hljs-keyword">int</span> col, <span class="hljs-keyword">int</span> n)</span></span>&#123;    <span class="hljs-keyword">if</span>(row &lt; <span class="hljs-number">0</span> || row &gt;= n || col &lt; <span class="hljs-number">0</span> || col &gt;= n) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; row; i++)&#123;        <span class="hljs-keyword">if</span>(board[i][col] == <span class="hljs-string">&#x27;Q&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = row<span class="hljs-number">-1</span>, j = col+<span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span> &amp;&amp; j &lt; n;i--, j++)&#123;        <span class="hljs-keyword">if</span>(board[i][j] == <span class="hljs-string">&#x27;Q&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = row<span class="hljs-number">-1</span>, j = col<span class="hljs-number">-1</span>; i &gt;= <span class="hljs-number">0</span> &amp;&amp; j &gt;= <span class="hljs-number">0</span>;i--, j--)&#123;        <span class="hljs-keyword">if</span>(board[i][j] == <span class="hljs-string">&#x27;Q&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">backtrack</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; board, <span class="hljs-keyword">int</span> row, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;&amp; res, <span class="hljs-keyword">int</span> n)</span></span>&#123;    <span class="hljs-keyword">if</span>(row == board.size())&#123;        res.push_back(board);        <span class="hljs-keyword">return</span>;    &#125;    <span class="hljs-comment">// æ£‹ç›˜çš„éå†: åˆ—éå†æ˜¯é€šè¿‡for å¾ªç¯å®ç°çš„ï¼Œ è¡Œéå†æ˜¯é€šè¿‡é€’å½’å®ç°çš„</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> col = <span class="hljs-number">0</span>; col &lt; n; col++)&#123;        <span class="hljs-keyword">if</span>(!isValid(board, row, col, n)) <span class="hljs-keyword">continue</span>;        board[row][col] = <span class="hljs-string">&#x27;Q&#x27;</span>;        backtrack(board, row+<span class="hljs-number">1</span>, res, n);        board[row][col] = <span class="hljs-string">&#x27;.&#x27;</span>;    &#125;&#125;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; <span class="hljs-title">solveNQueens</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; res;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">board</span><span class="hljs-params">(n, <span class="hljs-built_in">string</span>(n, <span class="hljs-string">&#x27;.&#x27;</span>))</span></span>;    backtrack(board, <span class="hljs-number">0</span>, res, n);    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="37-è§£æ•°ç‹¬-https-leetcode-cn-com-problems-sudoku-solver"><a href="#37-è§£æ•°ç‹¬-https-leetcode-cn-com-problems-sudoku-solver" class="headerlink" title="[37] è§£æ•°ç‹¬ https://leetcode-cn.com/problems/sudoku-solver/"></a>[37] è§£æ•°ç‹¬ <a href="https://leetcode-cn.com/problems/sudoku-solver/">https://leetcode-cn.com/problems/sudoku-solver/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt;&gt;&amp; board, <span class="hljs-keyword">int</span> row, <span class="hljs-keyword">int</span> col, <span class="hljs-keyword">int</span> val)</span></span>&#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)  <span class="hljs-keyword">if</span>(board[row][i] == val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// åˆ¤æ–­è¡Œæ˜¯å¦æœ‰é‡å¤</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)  <span class="hljs-keyword">if</span>(board[i][col] == val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// åˆ¤æ–­åˆ—æ˜¯å¦æœ‰é‡å¤</span>    <span class="hljs-keyword">int</span> startRow =  row / <span class="hljs-number">3</span> * <span class="hljs-number">3</span>;    <span class="hljs-keyword">int</span> startCol = col / <span class="hljs-number">3</span> * <span class="hljs-number">3</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = startRow; i &lt; startRow + <span class="hljs-number">3</span>; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = startCol; j &lt; startCol + <span class="hljs-number">3</span>; j++)&#123;            <span class="hljs-keyword">if</span>(board[i][j] == val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">backtrack</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt;&gt;&amp; board)</span></span>&#123;    <span class="hljs-keyword">int</span> m = board.size();    <span class="hljs-keyword">int</span> n = board[<span class="hljs-number">0</span>].size();    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123; <span class="hljs-comment">// éå†è¡Œ</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)&#123; <span class="hljs-comment">// éå†åˆ—</span>            <span class="hljs-keyword">if</span>(board[i][j] != <span class="hljs-string">&#x27;.&#x27;</span>) <span class="hljs-keyword">continue</span>;             <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = <span class="hljs-string">&#x27;1&#x27;</span>; k &lt;= <span class="hljs-string">&#x27;9&#x27;</span>; k++)&#123;                 <span class="hljs-keyword">if</span>(isValid(board, i, j, k))&#123; <span class="hljs-comment">// (i, j) è¿™ä¸ªä½ç½®æ”¾ k æ˜¯å¦åˆé€‚</span>                    board[i][j] = k; <span class="hljs-comment">// æ”¾ç½® k</span>                    <span class="hljs-keyword">if</span>(backtrack(board)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ‰¾åˆ°ä¸€ç»„åˆé€‚çš„å°±ç«‹åˆ»è¿”å›</span>                    board[i][j] = <span class="hljs-string">&#x27;.&#x27;</span>; <span class="hljs-comment">// å›æº¯ï¼Œ æ’¤é”€k</span>                 &#125;            &#125;            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// 9ä¸ªæ•°å­—éƒ½å°è¯•å®Œäº†ï¼Œæ²¡æœ‰åˆé€‚çš„ï¼Œè¿”å› false</span>        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// å¡«å……å®Œæ¯•, æ²¡æœ‰è¿”å› falseï¼Œ è¯´æ˜æ‰¾åˆ°åˆé€‚æ£‹ç›˜ä½ç½®äº†</span>&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solveSudoku</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt;&gt;&amp; board)</span> </span>&#123;    backtrack(board);&#125;</code></pre><h4 id="2-2-è´ªå¿ƒ"><a href="#2-2-è´ªå¿ƒ" class="headerlink" title="2.2 è´ªå¿ƒ"></a>2.2 è´ªå¿ƒ</h4><p><strong>æ ¸å¿ƒè¦ç‚¹</strong></p><p>â€‹    <strong>ä½¿ç”¨è´ªå¿ƒç®—æ³•éœ€è¦æ»¡è¶³è´ªå¿ƒé€‰æ‹©çš„æ€§è´¨ï¼Œ ç®€å•è¯´å°±æ˜¯ï¼šæ¯ä¸€æ­¥éƒ½åšå‡ºä¸€ä¸ªå±€éƒ¨æœ€ä¼˜çš„é€‰æ‹©ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯å…¨å±€æœ€ä¼˜ã€‚</strong></p><p>æœ€å…³é”®çš„æ˜¯åˆ†æå‡ºç¬¬ä¸€æ­¥å¦‚ä½•æ˜¯æœ€ä¼˜è§£</p><h5 id="1-ç±»å‹ä¸€"><a href="#1-ç±»å‹ä¸€" class="headerlink" title="(1) ç±»å‹ä¸€"></a>(1) ç±»å‹ä¸€</h5><h6 id="å¤šæ•°å…ƒç´ -ğŸŒŸğŸŒŸğŸŒŸ"><a href="#å¤šæ•°å…ƒç´ -ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="å¤šæ•°å…ƒç´   ğŸŒŸğŸŒŸğŸŒŸ"></a>å¤šæ•°å…ƒç´   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// æ‘©å°”æŠ•ç¥¨æ³•ï¼šæœ‰æœ€ä¼˜è§£çš„æ€æƒ³åœ¨é‡Œé¢</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">majorityElement</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> cur = nums[<span class="hljs-number">0</span>];    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">if</span>(cur == nums[i]) cnt++;        <span class="hljs-keyword">else</span>&#123;            cnt--;            <span class="hljs-keyword">if</span>(cnt == <span class="hljs-number">0</span>)&#123;                cur = nums[i];                cnt = <span class="hljs-number">1</span>;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> cur;&#125;</code></pre><h5 id="2-ç±»å‹äºŒ"><a href="#2-ç±»å‹äºŒ" class="headerlink" title="(2) ç±»å‹äºŒ"></a>(2) ç±»å‹äºŒ</h5><h6 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº   ğŸŒŸğŸŒŸğŸŒŸ"></a>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// ç¬¬iå¤©çš„æ”¶ç›Šä¸º profit = prices[i] - prices[i-1]</span><span class="hljs-comment">//ï¼ˆ1ï¼‰å½“ profit &gt; 0 æ—¶ï¼Œå½“å¤©ä¹°å…¥å–å‡º</span><span class="hljs-comment">//ï¼ˆ2ï¼‰å½“ profit &lt;= 0 æ—¶ï¼Œå½“å¤©ä¸è¿›è¡Œäº¤æ˜“</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; prices)</span> </span>&#123;    <span class="hljs-keyword">int</span> profit = <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span>(prices.size() &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; prices.size(); i++)&#123;        <span class="hljs-keyword">if</span>(prices[i] &gt; prices[i<span class="hljs-number">-1</span>])            profit += (prices[i] - prices[i<span class="hljs-number">-1</span>]);    &#125;    <span class="hljs-keyword">return</span> profit;&#125;</code></pre><h6 id="121-https-leetcode-cn-com-problems-best-time-to-buy-and-sell-stock"><a href="#121-https-leetcode-cn-com-problems-best-time-to-buy-and-sell-stock" class="headerlink" title="[121] https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/"></a>[121] <a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/">https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; prices)</span> </span>&#123;    <span class="hljs-keyword">int</span> max_profit = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> min_val = INT_MAX;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; prices.size(); i++)&#123;        min_val = min(min_val, prices[i]); <span class="hljs-comment">// ä¿å­˜ä¹‹å‰çš„æœ€å°å€¼</span>        max_profit = max(max_profit, prices[i] - min_val);  <span class="hljs-comment">// å½“å‰ä¸æœ€å°å€¼çš„å·®</span>    &#125;    <span class="hljs-keyword">return</span> max_profit;&#125;</code></pre><h6 id="åŠ æ²¹ç«™"><a href="#åŠ æ²¹ç«™" class="headerlink" title="åŠ æ²¹ç«™"></a>åŠ æ²¹ç«™</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">canCompleteCircuit</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; gas, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; cost)</span> </span>&#123;    <span class="hljs-keyword">int</span> min_spare = INT_MAX; <span class="hljs-comment">// æœ€å°‘å‰©ä½™æ²¹é‡</span>    <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> spare = <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰å‰©ä½™æ²¹é‡</span>    <span class="hljs-comment">// ç¯ç»•ä¸€åœˆï¼Œ æœ€ç»ˆæ²¹é‡å¤§äºç­‰äºé›¶å³å¯å®ç°ç»•ç¯è¡Œé©¶ï¼Œæ ‡è®°æœ€å°‘çš„ä½ç½®</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; gas.size(); i++)&#123;        spare += (gas[i] - cost[i]);        <span class="hljs-keyword">if</span>(spare &lt; min_spare)&#123;            min_spare = spare;            pos = i; <span class="hljs-comment">// æ ‡è®°æ²¹é‡æœ€å°‘çš„ä½ç½®</span>        &#125;    &#125;    <span class="hljs-keyword">return</span> spare &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">-1</span> : (pos + <span class="hljs-number">1</span>) % gas.size();&#125;</code></pre><h5 id="3-ç±»å‹ä¸‰"><a href="#3-ç±»å‹ä¸‰" class="headerlink" title="(3) ç±»å‹ä¸‰"></a>(3) ç±»å‹ä¸‰</h5><h6 id="455-åˆ†å‘é¥¼å¹²-https-leetcode-cn-com-problems-assign-cookies"><a href="#455-åˆ†å‘é¥¼å¹²-https-leetcode-cn-com-problems-assign-cookies" class="headerlink" title="[455] åˆ†å‘é¥¼å¹² https://leetcode-cn.com/problems/assign-cookies/"></a>[455] åˆ†å‘é¥¼å¹² <a href="https://leetcode-cn.com/problems/assign-cookies/">https://leetcode-cn.com/problems/assign-cookies/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// å°½é‡å…ˆæ»¡è¶³èƒƒå£å€¼å°çš„å­©å­ï¼Œå› ä¸ºè¿™æ ·çš„å­©å­å®¹æ˜“æ»¡è¶³ã€‚</span><span class="hljs-comment">// å°½å¯èƒ½é€‰ç”¨å°ºå¯¸å°çš„ï¼Œè¿™æ ·å¤§å°ºå¯¸é¥¼å¹²å¯ä»¥ç”¨æ¥æ»¡è¶³èƒƒå£å€¼å¤§çš„å­©å­ã€‚</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findContentChildren</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; g, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; s)</span> </span>&#123;    <span class="hljs-keyword">if</span>(s.size() == <span class="hljs-number">0</span> || g.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    sort(g.begin(), g.end());    sort(s.begin(), s.end());    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; i &lt; g.size() &amp;&amp; j &lt; s.size(); ++j)&#123;        <span class="hljs-keyword">if</span>(s[j] &gt;= g[i]) i++;     &#125;    <span class="hljs-keyword">return</span> i &gt; g.size() ? g.size() : i;&#125;</code></pre><h6 id="55-è·³è·ƒæ¸¸æˆ-45-è·³è·ƒæ¸¸æˆ-II"><a href="#55-è·³è·ƒæ¸¸æˆ-45-è·³è·ƒæ¸¸æˆ-II" class="headerlink" title="[55] è·³è·ƒæ¸¸æˆ [45] è·³è·ƒæ¸¸æˆ II"></a>[55] è·³è·ƒæ¸¸æˆ [45] è·³è·ƒæ¸¸æˆ II</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">canJump</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-comment">// æ ¸å¿ƒæ€æƒ³: å¦‚æœä¸€ä¸ªä½ç½®èƒ½å¤Ÿåˆ°è¾¾ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®å·¦ä¾§æ‰€æœ‰ä½ç½®éƒ½èƒ½åˆ°è¾¾</span>    <span class="hljs-comment">//          æ¯ä¸€æ­¥éƒ½é€‰æ‹©éƒ½é€‰æ‹©ä»å½“å‰æ‰€åœ¨ä½ç½®å‡ºå‘å¯ä»¥åˆ°è¾¾çš„æœ€è¿œè·ç¦»</span>    <span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; <span class="hljs-comment">// ä»£è¡¨å½“å‰éå†çš„èŠ‚ç‚¹æœ€è¿œå¯ä»¥è·³åˆ°ä½•ä½ç½®</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-comment">// å¦‚æœå½“å‰æœ€è¿œå¯ä»¥è·³è¿‡è¶…å‡º nums.size(), åˆ™å¯ä»¥åˆ°è¾¾æœ€å</span>        <span class="hljs-keyword">if</span>(k &gt; nums.size()) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;        <span class="hljs-comment">// å¦‚æœ i å¤§äºå½“å‰æœ€è¿œçš„è·ç¦»ï¼Œè¯æ˜ å½“å‰ä½ç½®ä¸å¯è¾¾ï¼Œ è¿”å› false</span>        <span class="hljs-keyword">if</span>(i &gt; k) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;        <span class="hljs-comment">// æ›´æ–°å½“å‰æœ€è¿œä½ç½®</span>        k = max(k, i + nums[i]);    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;</code></pre><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">jump</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-comment">// æŒ¨ä¸ªè·³è·ƒå°±è¡Œ</span>    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>; <span class="hljs-comment">// è·³è·ƒæ¬¡æ•°</span>    <span class="hljs-keyword">int</span> max_pos = <span class="hljs-number">0</span>; <span class="hljs-comment">// æ ‡è®°æœ€å¤§ä½ç½®</span>    <span class="hljs-keyword">int</span> end = <span class="hljs-number">0</span>; <span class="hljs-comment">// æœ€åçš„è·³è·ƒä½ç½®</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size()<span class="hljs-number">-1</span>; i++)&#123;        max_pos = max(nums[i] + i, max_pos);         <span class="hljs-keyword">if</span>(i == end)&#123;            end = max_pos;            res++;        &#125;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="402-ç§»æ‰Kä½æ•°å­—-https-leetcode-cn-com-problems-remove-k-digits"><a href="#402-ç§»æ‰Kä½æ•°å­—-https-leetcode-cn-com-problems-remove-k-digits" class="headerlink" title="[402] ç§»æ‰Kä½æ•°å­— https://leetcode-cn.com/problems/remove-k-digits/"></a>[402] ç§»æ‰Kä½æ•°å­— <a href="https://leetcode-cn.com/problems/remove-k-digits/">https://leetcode-cn.com/problems/remove-k-digits/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// ç”¨ string æ¥è¡¨ç¤ºä¸€ä¸ªå•è°ƒæ ˆ:</span><span class="hljs-comment">//   å½“å‰æ•°å­—å¤§äºæœ€åä¸€ä¸ªæ—¶å€™ï¼Œ å°†æœ€åä¸€ä¸ªå­—æ¯å¼¹å‡ºï¼Œå¹¶kè®¡æ•°å‡ä¸€</span><span class="hljs-comment">// å½“å‰æ•°å­—è¿½åŠ </span><span class="hljs-comment">// </span><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">removeKdigits</span><span class="hljs-params">(<span class="hljs-built_in">string</span> num, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-built_in">string</span> res; <span class="hljs-comment">// é»˜è®¤æ˜¯ä¸€ä¸ªç©ºä¸²</span>    <span class="hljs-keyword">int</span> n = num.size(), m = n - k;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">char</span> c:num)&#123;        <span class="hljs-keyword">while</span>(k &amp;&amp; res.size() &amp;&amp; res.back() &gt; c)&#123;            res.pop_back();            --k;        &#125;        res.push_back(c);    &#125;    res.resize(m); <span class="hljs-comment">// è°ƒæ•´å¤§å°</span>    res.erase(<span class="hljs-number">0</span>, res.find_first_not_of(<span class="hljs-string">&quot;0&quot;</span>)); <span class="hljs-comment">// å»é™¤å‰å¯¼é›¶</span>    <span class="hljs-keyword">return</span> res.empty() ? <span class="hljs-string">&quot;0&quot;</span> : res; <span class="hljs-comment">// &quot;0&quot; é”™è¯¯</span>&#125;</code></pre><h5 id="4-ç±»å‹å››"><a href="#4-ç±»å‹å››" class="headerlink" title="(4) ç±»å‹å››"></a>(4) ç±»å‹å››</h5><ul><li>å¯èƒ½éœ€è¦è¿›è¡Œæ’åºä½œä¸ºé¢„å¤„ç†</li><li>ä¸€èˆ¬å¯¹æ’åºåçš„å®¹å™¨è¿›è¡Œéå†ï¼Œ è´ªå¿ƒçš„æ‰¾å‡ºå±€éƒ¨æœ€ä¼˜è§£</li></ul><h6 id="435-æ— é‡å åŒºé—´"><a href="#435-æ— é‡å åŒºé—´" class="headerlink" title="[435] æ— é‡å åŒºé—´"></a>[435] æ— é‡å åŒºé—´</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">eraseOverlapIntervals</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; intervals)</span> </span>&#123;    <span class="hljs-keyword">if</span>(intervals.size() &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-comment">// æ’åº</span>    sort(intervals.begin(), intervals.end(), [](<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; b)&#123;<span class="hljs-keyword">return</span> a[<span class="hljs-number">1</span>] &lt; b[<span class="hljs-number">1</span>];&#125;);    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> tail = intervals[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>];    <span class="hljs-comment">// è´ªå¿ƒçš„æ¯ä¸€æ­¥: é€‰æ‹©æœªè¢«æ’é™¤çš„åŒºé—´ä¸­ [å³åŒºé—´ åæ ‡æœ€å°] çš„é‚£ä¸ªä½œä¸ºé€‰å®šåŒºé—´</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; intervals.size(); i++)&#123;        <span class="hljs-comment">// å¦‚æœæœ‰äº¤é›†ï¼Œ å»æ‰è¯¥åŒºé—´</span>       <span class="hljs-keyword">if</span>(intervals[i][<span class="hljs-number">0</span>] &lt; tail) cnt++;        <span class="hljs-comment">// æ²¡æœ‰äº¤é›†ï¼Œé€‰æ‹©è¯¥åŒºé—´</span>       <span class="hljs-keyword">else</span> tail = intervals[i][<span class="hljs-number">1</span>];    &#125;    <span class="hljs-keyword">return</span>  cnt;&#125; </code></pre><h6 id="646-æœ€é•¿æ•°å¯¹é“¾-https-leetcode-cn-com-problems-maximum-length-of-pair-chain"><a href="#646-æœ€é•¿æ•°å¯¹é“¾-https-leetcode-cn-com-problems-maximum-length-of-pair-chain" class="headerlink" title="[646]. æœ€é•¿æ•°å¯¹é“¾ https://leetcode-cn.com/problems/maximum-length-of-pair-chain/)"></a>[646]. æœ€é•¿æ•°å¯¹é“¾ <a href="https://leetcode-cn.com/problems/maximum-length-of-pair-chain/">https://leetcode-cn.com/problems/maximum-length-of-pair-chain/</a>)</h6><pre><code class="hljs cpp"><span class="hljs-comment">// è¿˜æ˜¯æŒ‰ç…§ åŒºé—´æœ«å°¾è¿›è¡Œæ’åº!!</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findLongestChain</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; pairs)</span> </span>&#123;    sort(pairs.begin(), pairs.end(),             [](<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; b)&#123;                <span class="hljs-keyword">return</span> a[<span class="hljs-number">1</span>] &lt; b[<span class="hljs-number">1</span>];            &#125;);    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(i &lt; pairs.size())&#123;        <span class="hljs-keyword">int</span> j = i + <span class="hljs-number">1</span>;        <span class="hljs-keyword">while</span>(j &lt; pairs.size() &amp;&amp; pairs[i][<span class="hljs-number">1</span>] &gt;= pairs[j][<span class="hljs-number">0</span>]) j++;        i = j;        res += <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="452-ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ-https-leetcode-cn-com-problems-minimum-number-of-arrows-to-burst-balloons"><a href="#452-ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ-https-leetcode-cn-com-problems-minimum-number-of-arrows-to-burst-balloons" class="headerlink" title="[452] ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ https://leetcode-cn.com/problems/minimum-number-of-arrows-to-burst-balloons/"></a>[452] ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ <a href="https://leetcode-cn.com/problems/minimum-number-of-arrows-to-burst-balloons/">https://leetcode-cn.com/problems/minimum-number-of-arrows-to-burst-balloons/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// æ­¤é¢˜å’Œä¸Šä¸€é“é¢˜ç›®æ€è·¯ç›¸ä¼¼</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findMinArrowShots</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; points)</span> </span>&#123;    <span class="hljs-keyword">if</span>(points.size() &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    sort(points.begin(), points.end(), [](<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; b)&#123;<span class="hljs-keyword">return</span> a[<span class="hljs-number">1</span>] &lt; b[<span class="hljs-number">1</span>];&#125;);    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> tail = points[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; points.size(); i++)&#123;        <span class="hljs-comment">// å½“ å·¦åŒºé—´ å¤§äº è¿™ä¸ªåŒºé—´çš„å³åŒºé—´æ—¶ï¼Œ éœ€è¦ä¸€æ ¹å¼“ç®­</span>        <span class="hljs-keyword">if</span>(points[i][<span class="hljs-number">0</span>] &gt; tail)&#123;            tail = points[i][<span class="hljs-number">1</span>];            cnt++;        &#125;    &#125;    <span class="hljs-keyword">return</span> cnt;&#125;</code></pre><h6 id="253-ä¼šè®®å®¤-II-https-leetcode-cn-com-problems-meeting-rooms-ii-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#253-ä¼šè®®å®¤-II-https-leetcode-cn-com-problems-meeting-rooms-ii-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[253] ä¼šè®®å®¤ II https://leetcode-cn.com/problems/meeting-rooms-ii/  ğŸŒŸğŸŒŸğŸŒŸ"></a>[253] ä¼šè®®å®¤ II <a href="https://leetcode-cn.com/problems/meeting-rooms-ii/">https://leetcode-cn.com/problems/meeting-rooms-ii/</a>  ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">minMeetingRooms</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; intervals)</span> </span>&#123;    <span class="hljs-comment">// æŒ‰ç…§å¼€å§‹æ—¶é—´æ’åº</span>    sort(intervals.begin(), intervals.end());    <span class="hljs-comment">// æœ€å°å †ï¼Œ ç”¨æ¥å­˜å‚¨room çš„ç»“æŸæ—¶é—´</span>    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, greater&lt;<span class="hljs-keyword">int</span>&gt; &gt;rooms;    <span class="hljs-comment">// </span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; intervals.size(); i++)&#123;        <span class="hljs-comment">// å¦‚æœå †ä¸ºç©ºï¼Œ åˆ™ç›´æ¥æ’å…¥</span>        <span class="hljs-keyword">if</span>(rooms.empty()) rooms.push(intervals[i][<span class="hljs-number">1</span>]);         <span class="hljs-comment">// å †ä¸ç©º</span>        <span class="hljs-keyword">else</span>&#123;            <span class="hljs-comment">// å¦‚æœå¼€å§‹æ—¶é—´å¤§äºæœ€å°çš„ç»“æŸæ—¶é—´ï¼Œ ç›´æ¥æ›¿æ¢æ‰å †é¡¶å³å¯</span>            <span class="hljs-keyword">if</span>(rooms.top() &lt;= intervals[i][<span class="hljs-number">0</span>])                rooms.pop();            <span class="hljs-comment">// å¦åˆ™å†å¼€è¾Ÿä¸€ä¸ªæ–°çš„æˆ¿é—´</span>            rooms.push(intervals[i][<span class="hljs-number">1</span>]);        &#125;    &#125;    <span class="hljs-keyword">return</span> rooms.size();&#125;</code></pre><h6 id="æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—"><a href="#æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—" class="headerlink" title="æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—"></a>æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">reconstructQueue</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; people)</span> </span>&#123;    <span class="hljs-comment">// å…ˆæ’åº</span>    <span class="hljs-comment">// [7,0], [7,1], [6,1], [5,0], [5,2], [4,4]</span>    sort(people.begin(), people.end(),             [](<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;b)            &#123;<span class="hljs-keyword">return</span> (a[<span class="hljs-number">0</span>] &gt; b[<span class="hljs-number">0</span>]) || (a[<span class="hljs-number">0</span>] == b[<span class="hljs-number">0</span>] &amp;&amp; a[<span class="hljs-number">1</span>] &lt; b[<span class="hljs-number">1</span>]);&#125;);    <span class="hljs-comment">// å†ä¸€ä¸ªä¸€ä¸ªæ’å…¥, æ’å…¥ä½ç½®ä¸ºç¬¬äºŒä¸ªå…ƒç´ çš„å¤§å°</span>    <span class="hljs-comment">// [7,0]</span>    <span class="hljs-comment">// [7,0], [7,1]</span>    <span class="hljs-comment">// [7,0], [6,1], [7,1]</span>    <span class="hljs-comment">// [5,0], [7,0], [6,1], [7,1]</span>    <span class="hljs-comment">// [5,0], [7,0], [5,2], [6,1], [7,1]</span>    <span class="hljs-comment">// [5,0], [7,0], [5,2], [6,1], [4,4], [7,1]</span>    <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; li;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> elem:people)&#123;        <span class="hljs-keyword">auto</span> pos = li.begin(); <span class="hljs-comment">// æ‰¾åˆ°åˆ—è¡¨å¤´</span>        advance(pos, elem[<span class="hljs-number">1</span>]);   <span class="hljs-comment">// ç§»åŠ¨ elem[1]</span>        li.insert(pos, elem);    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt;(li.begin(), li.end());&#125;</code></pre><h6 id="56-åˆå¹¶åŒºé—´-https-leetcode-cn-com-problems-merge-intervals-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#56-åˆå¹¶åŒºé—´-https-leetcode-cn-com-problems-merge-intervals-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[56] åˆå¹¶åŒºé—´ https://leetcode-cn.com/problems/merge-intervals/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[56] åˆå¹¶åŒºé—´ <a href="https://leetcode-cn.com/problems/merge-intervals/">https://leetcode-cn.com/problems/merge-intervals/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">merge</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; intervals)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-keyword">if</span>(intervals.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-comment">// !! æŒ‰ç…§å·¦ç«¯ç‚¹è¿›è¡Œæ’åº: æ–¹ä¾¿ååºå¤„ç† æœ‰äº¤é›†å¹¶ä¸”æ˜¯åŒ…å«å…³ç³»çš„æƒ…å†µ</span>    sort(intervals.begin(), intervals.end(),         [](<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;b)&#123; <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>] &lt; b[<span class="hljs-number">0</span>];&#125;);    <span class="hljs-keyword">int</span> cur = <span class="hljs-number">0</span>;    res.push_back(intervals[<span class="hljs-number">0</span>]);    <span class="hljs-comment">// éœ€è¦è€ƒè™‘ä¸¤ç§æƒ…å†µ:(1) æœ‰æ— äº¤é›† &amp; æ˜¯å¦æ˜¯åŒ…å«å…³ç³»</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; intervals.size(); i++)&#123;        <span class="hljs-keyword">if</span>(intervals[i][<span class="hljs-number">0</span>] &gt; res.back()[<span class="hljs-number">1</span>])&#123;  <span class="hljs-comment">// æ— äº¤é›†</span>            res.push_back(intervals[i]);        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(intervals[i][<span class="hljs-number">1</span>] &gt; res.back()[<span class="hljs-number">1</span>])&#123;  <span class="hljs-comment">// æœ‰äº¤é›† ä¸” ä¸æ˜¯åŒ…å«å…³ç³»</span>            res.back()[<span class="hljs-number">1</span>] = intervals[i][<span class="hljs-number">1</span>];        &#125;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h3 id="3-åŠ¨æ€è§„åˆ’"><a href="#3-åŠ¨æ€è§„åˆ’" class="headerlink" title="3. åŠ¨æ€è§„åˆ’"></a>3. åŠ¨æ€è§„åˆ’</h3><h4 id="1-å¸¸ç”¨æŠ€å·§æ€»ç»“"><a href="#1-å¸¸ç”¨æŠ€å·§æ€»ç»“" class="headerlink" title="(1) å¸¸ç”¨æŠ€å·§æ€»ç»“"></a>(1) å¸¸ç”¨æŠ€å·§æ€»ç»“</h4><p>åŠ¨æ€è§„åˆ’åœ¨é¢è¯•ä¸­å æ®äº†ç»å¯¹çš„é‡è¦çš„åœ°ä½ï¼Œå€¼å¾—é‡ç‚¹çªç ´ã€‚ä¸‹é¢æ˜¯åŠ¨æ€è§„åˆ’è§£é¢˜çš„åŸºæœ¬æ­¥éª¤ï¼š</p><p>ï¼ˆ1ï¼‰ ç¡®å®šçŠ¶æ€: ç¡®å®š $dp[i]$  ä»£è¡¨ä»€ä¹ˆ ?  å¯ä»¥ä»è€ƒè™‘å­é—®é¢˜å’Œæœ€åä¸€æ­¥è¿›è¡Œè€ƒè™‘</p><p>ï¼ˆ2ï¼‰ ç¡®å®šè½¬ç§»æ–¹ç¨‹  $dp[i] = f(dp[i-1])$</p><p>ï¼ˆ3ï¼‰åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œæƒ…å†µï¼šèµ·å§‹å€¼çš„èµ‹å€¼ &amp; æœ€åä¸€æ­¥</p><p>ï¼ˆ4ï¼‰ è®¡ç®—é¡ºåº: æ¶ˆé™¤å†—ä½™ï¼ŒåŠ é€Ÿè®¡ç®—     $f[0],  f[1],  f[2],  â€¦ $</p><p>å¸¸ç”¨æŠ€å·§ï¼š</p><ul><li><p>å¦‚ä½•ç¡®å®šæŸä¸ªé¢˜ç›®æ˜¯åŠ¨æ€è§„åˆ’ç±»çš„é¢˜ç›®:</p><ul><li><p>count è®¡æ•°ï¼šæœ‰å¤šå°‘ç§æ–¹å¼èµ°åˆ°å³ä¸‹è§’ã€æœ‰å¤šå°‘ç§æ–¹å¼é€‰å‡º k ä¸ªæ•°ä½¿å¾—å’Œæ˜¯ sum</p></li><li><p>min/maxæ±‚æœ€å¤§æœ€å°å€¼ï¼šä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’è·¯å¾„çš„æœ€å¤§æ•°å­—å’Œã€æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦</p></li><li><p>yes/no æ±‚å­˜åœ¨æ€§ï¼šå–çŸ³å­æ¸¸æˆï¼Œ å…ˆæ‰‹æ˜¯å¦å¿…èƒœã€èƒ½ä¸èƒ½é€‰å‡ºkä¸ªæ•°ä½¿å¾—å’Œæ˜¯Sum</p></li></ul></li><li><p>å¯¹äºå­—ç¬¦ä¸²çš„ç›¸å…³é—®é¢˜(å›æ–‡ã€å…¬å…±å­ä¸²ã€ä¸Šå‡å­ä¸²)ï¼Œ ä¸€ä¸ªå¾ˆå¸¸è§çš„æ“ä½œå°±æ˜¯ï¼Œç”¨å­—ç¬¦ä¸²æ„é€ çŸ©é˜µï¼Œç„¶åè¿›è¡ŒçŠ¶æ€è½¬ç§»ã€‚</p></li><li>è§£é¢˜æ­¥éª¤ä¸­ï¼šç¡®å®šçŠ¶æ€å’Œç¡®å®šè½¬ç§»æ–¹ç¨‹æ˜¯æœ€é‡è¦çš„ã€‚</li><li>æ²¡æœ‰æ€è·¯çš„æ—¶å€™å¯ä»¥ä»èµ·å§‹çŠ¶æ€è¿›è¡Œæ¨¡æ‹Ÿï¼Œæˆ–è€…å–å…¶ä¸­ä¸€ä¸ªç‰¹æ®Šçš„çŠ¶æ€è¿›è¡Œæ¨¡æ‹Ÿã€‚</li></ul><h4 id="2-å…¸å‹ä¾‹é¢˜-1"><a href="#2-å…¸å‹ä¾‹é¢˜-1" class="headerlink" title="(2) å…¸å‹ä¾‹é¢˜"></a>(2) å…¸å‹ä¾‹é¢˜</h4><h5 id="ç±»å‹ä¸€-ç®€å•ä¸€ç»´-DP"><a href="#ç±»å‹ä¸€-ç®€å•ä¸€ç»´-DP" class="headerlink" title="ç±»å‹ä¸€ ç®€å•ä¸€ç»´ DP"></a>ç±»å‹ä¸€ ç®€å•ä¸€ç»´ DP</h5><h6 id="509-æ–æ³¢é‚£å¥‘æ•°-https-leetcode-cn-com-problems-fibonacci-number"><a href="#509-æ–æ³¢é‚£å¥‘æ•°-https-leetcode-cn-com-problems-fibonacci-number" class="headerlink" title="[509] æ–æ³¢é‚£å¥‘æ•° https://leetcode-cn.com/problems/fibonacci-number/"></a>[509] æ–æ³¢é‚£å¥‘æ•° <a href="https://leetcode-cn.com/problems/fibonacci-number/">https://leetcode-cn.com/problems/fibonacci-number/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// ä½¿ç”¨ prev å’Œ cur æ¥æ¶ˆé™¤äº† DP æ•°ç»„çš„ä½¿ç”¨</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">fib</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> prev = <span class="hljs-number">0</span>, cur = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)&#123;        <span class="hljs-keyword">int</span> s = (prev + cur) % <span class="hljs-number">1000000007</span>;        prev = cur;        cur = s;    &#125;    <span class="hljs-keyword">return</span> cur;&#125;</code></pre><h6 id="70-çˆ¬æ¥¼æ¢¯-https-leetcode-cn-com-problems-climbing-stairs"><a href="#70-çˆ¬æ¥¼æ¢¯-https-leetcode-cn-com-problems-climbing-stairs" class="headerlink" title="[70] çˆ¬æ¥¼æ¢¯ https://leetcode-cn.com/problems/climbing-stairs/"></a>[70] çˆ¬æ¥¼æ¢¯ <a href="https://leetcode-cn.com/problems/climbing-stairs/">https://leetcode-cn.com/problems/climbing-stairs/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">numWays</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">if</span>(n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;    <span class="hljs-keyword">int</span> prev = <span class="hljs-number">1</span>, cur = <span class="hljs-number">2</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">3</span>; i &lt;= n; i++)&#123;        <span class="hljs-keyword">int</span> s= (prev + cur) % <span class="hljs-number">1000000007</span>;        prev = cur;        cur = s;    &#125;    <span class="hljs-keyword">return</span> cur;&#125;</code></pre><h6 id="198-https-leetcode-com-problems-house-robber"><a href="#198-https-leetcode-com-problems-house-robber" class="headerlink" title="[198] https://leetcode.com/problems/house-robber/"></a>[198] <a href="https://leetcode.com/problems/house-robber/">https://leetcode.com/problems/house-robber/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">rob</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums[<span class="hljs-number">0</span>];    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> max(nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]);    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span> &gt; <span class="hljs-title">dp</span><span class="hljs-params">(nums.size(), <span class="hljs-number">0</span>)</span></span>;    dp[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>];    dp[<span class="hljs-number">1</span>] = max(nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]);    <span class="hljs-keyword">int</span> res = <span class="hljs-number">2</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-comment">// è½¬ç§»æ–¹ç¨‹åªå’Œå‰ä¸¤ä¸ªçŠ¶æ€æœ‰å…³:</span>        <span class="hljs-comment">// (1) é€‰æ‹©å½“å‰çš„æˆ¿å­: dp[i-2] + nums[i]</span>        <span class="hljs-comment">// (2) ä¸é€‰å½“å‰æˆ¿å­: dp[i-1]</span>        dp[i] = max(dp[i<span class="hljs-number">-2</span>] + nums[i], dp[i<span class="hljs-number">-1</span>]);    &#125;    <span class="hljs-keyword">return</span> dp[nums.size()<span class="hljs-number">-1</span>];&#125;</code></pre><h6 id="264-https-leetcode-cn-com-problems-ugly-number-ii-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#264-https-leetcode-cn-com-problems-ugly-number-ii-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[264] https://leetcode-cn.com/problems/ugly-number-ii/    ğŸŒŸğŸŒŸğŸŒŸ"></a>[264] <a href="https://leetcode-cn.com/problems/ugly-number-ii/">https://leetcode-cn.com/problems/ugly-number-ii/</a>    ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// å…¶å®å°±æ˜¯ä¸æ–­çš„æ±‚æ•°ç»„ Aï¼Œ Bï¼Œ C çš„æœ€å°å€¼</span><span class="hljs-comment">// A: &#123;1*2ï¼Œ2*2ï¼Œ3*2ï¼Œ4*2ï¼Œ5*2ï¼Œ6*2ï¼Œ8*2ï¼Œ10*2......&#125;</span><span class="hljs-comment">// B: &#123;1*3ï¼Œ2*3ï¼Œ3*3ï¼Œ4*3ï¼Œ5*3ï¼Œ6*3ï¼Œ8*3ï¼Œ10*3......&#125;</span><span class="hljs-comment">// C: &#123;1*5ï¼Œ2*5ï¼Œ3*5ï¼Œ4*5ï¼Œ5*5ï¼Œ6*5ï¼Œ8*5ï¼Œ10*5......&#125;</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">nthUglyNumber</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n, <span class="hljs-number">0</span>)</span></span>;    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> p2 = <span class="hljs-number">0</span>, p3 = <span class="hljs-number">0</span>, p5 = <span class="hljs-number">0</span>; <span class="hljs-comment">// è¿™é‡Œæ˜¯ä¸‰ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ä¸‰ä¸ªæ•°ç»„</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++)&#123;        <span class="hljs-comment">// åªå’Œä¹‹å‰çš„ä¸‰ä¸ªå˜é‡æœ‰å…³ç³»</span>        dp[i] = min(min(dp[p2]*<span class="hljs-number">2</span>, dp[p3]*<span class="hljs-number">3</span>), dp[p5]*<span class="hljs-number">5</span>);          <span class="hljs-keyword">if</span>(dp[i]/dp[p2] == <span class="hljs-number">2</span>) p2++;        <span class="hljs-keyword">if</span>(dp[i]/dp[p3] == <span class="hljs-number">3</span>) p3++;        <span class="hljs-keyword">if</span>(dp[i]/dp[p5] == <span class="hljs-number">5</span>) p5++;    &#125;    <span class="hljs-keyword">return</span> dp[n<span class="hljs-number">-1</span>];&#125;</code></pre><h6 id="53-æœ€å¤§å­åºå’Œ-https-leetcode-cn-com-problems-maximum-subarray-ğŸŒŸğŸŒŸ"><a href="#53-æœ€å¤§å­åºå’Œ-https-leetcode-cn-com-problems-maximum-subarray-ğŸŒŸğŸŒŸ" class="headerlink" title="[53] æœ€å¤§å­åºå’Œ https://leetcode-cn.com/problems/maximum-subarray/   ğŸŒŸğŸŒŸ"></a>[53] æœ€å¤§å­åºå’Œ <a href="https://leetcode-cn.com/problems/maximum-subarray/">https://leetcode-cn.com/problems/maximum-subarray/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxSubArray</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> res = nums[<span class="hljs-number">0</span>];    <span class="hljs-comment">// ä»¥ dp ä¸ºç»“æŸçš„æœ€å¤§å­åºåˆ—çš„å’Œ</span>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(nums.size(), <span class="hljs-number">0</span>)</span></span>;     dp[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; nums.size(); i++)&#123;        dp[i] = dp[i<span class="hljs-number">-1</span>] &gt; <span class="hljs-number">0</span> ? dp[i<span class="hljs-number">-1</span>] + nums[i] : nums[i];        res = max(res, dp[i]);    &#125;    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-comment">// è¿™é“é¢˜å’Œä¸Šé¢é‚£é“å‡ ä¹ç›¸åŒ: dp[i] çš„å®šä¹‰ç±»ä¼¼ï¼Œè½¬ç§»æ–¹ç¨‹ä¹Ÿç±»ä¼¼</span></code></pre><h5 id="ç±»å‹äºŒ-ä¸€ç»´-DPï¼š-ä¸ä¹‹å‰çš„æ‰€æœ‰çš„-dp-çŠ¶æ€å‡æœ‰å…³ç³»"><a href="#ç±»å‹äºŒ-ä¸€ç»´-DPï¼š-ä¸ä¹‹å‰çš„æ‰€æœ‰çš„-dp-çŠ¶æ€å‡æœ‰å…³ç³»" class="headerlink" title="ç±»å‹äºŒ ä¸€ç»´ DPï¼š ä¸ä¹‹å‰çš„æ‰€æœ‰çš„ dp çŠ¶æ€å‡æœ‰å…³ç³»"></a>ç±»å‹äºŒ ä¸€ç»´ DPï¼š ä¸ä¹‹å‰çš„æ‰€æœ‰çš„ dp çŠ¶æ€å‡æœ‰å…³ç³»</h5><p>æ¥ä¸‹æ¥å‡ é“é¢˜ç›®è™½ç„¶å½¢å¼å„å¼‚ï¼Œä½†æ˜¯å½“å‰çš„çŠ¶æ€å’Œä¹‹å‰çš„æ‰€æœ‰çŠ¶æ€å‡æœ‰è”ç³»ã€‚</p><h6 id="lcof-14-I-å‰ªç»³å­-https-leetcode-cn-com-problems-jian-sheng-zi-lcof"><a href="#lcof-14-I-å‰ªç»³å­-https-leetcode-cn-com-problems-jian-sheng-zi-lcof" class="headerlink" title="[lcof 14- I] å‰ªç»³å­ https://leetcode-cn.com/problems/jian-sheng-zi-lcof/"></a>[lcof 14- I] å‰ªç»³å­ <a href="https://leetcode-cn.com/problems/jian-sheng-zi-lcof/">https://leetcode-cn.com/problems/jian-sheng-zi-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">cuttingRope</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">if</span>(n &lt;= <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> n<span class="hljs-number">-1</span>;    <span class="hljs-comment">// dp[n] è¡¨ç¤ºé•¿åº¦ä¸º n çš„ç»³å­ï¼Œå‰ªæˆè‹¥å¹²æ®µä¹‹åï¼Œä¹˜ç§¯çš„æœ€å¤§å€¼</span>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n+<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)</span></span>;    <span class="hljs-comment">// å¦‚æœæŸä¸ªé•¿åº¦çš„ç»³å­ï¼Œå‰ªäº†ä¸€ä¸‹ä¹‹åï¼Œå…¶ä¸­ä¸€æ®µçš„é•¿åº¦åœ¨ [0,3] çš„åŒºé—´å†…ï¼Œå°±ä¸è¦å†å‰ªè¿™ä¸€æ®µäº†</span>    <span class="hljs-comment">// å› ä¸ºå‰ªäº†ä¹‹åï¼Œä¹˜ç§¯ä¼šå˜å°</span>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;    dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;    dp[<span class="hljs-number">2</span>] = <span class="hljs-number">2</span>;    dp[<span class="hljs-number">3</span>] = <span class="hljs-number">3</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">4</span>;  i &lt;= n; i++)&#123;   <span class="hljs-comment">// é€æ¸å¢åŠ  dp æ•°ç»„çš„é•¿åº¦ </span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= i / <span class="hljs-number">2</span>; j++)&#123;     <span class="hljs-comment">// ç¬¬ä¸€åˆ€å‰ªåœ¨ä»€ä¹ˆåœ°æ–¹?</span>            <span class="hljs-comment">//  å‰©ä¸‹çš„ä¸¤æ®µä¸º j å’Œ i-jï¼Œ æ±‚è¿™ä¸¤æ®µçš„æœ€å¤§å€¼å³å¯</span>            dp[i] = max(dp[i], dp[j] * dp[i-j]);        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[n];&#125;</code></pre><h6 id="300-æœ€é•¿ä¸Šå‡å­åºåˆ—-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#300-æœ€é•¿ä¸Šå‡å­åºåˆ—-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="300]. æœ€é•¿ä¸Šå‡å­åºåˆ—    ğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://leetcode-cn.com/problems/longest-increasing-subsequence/">300]. æœ€é•¿ä¸Šå‡å­åºåˆ—</a>    ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// æ ¸å¿ƒæ€æƒ³ï¼š</span><span class="hljs-comment">// å½“ nums[j] &gt; nums[i] æ—¶ï¼š nums[j] å¯ä»¥æ¥åœ¨ nums[i] ä¹‹åï¼Œæ­¤æƒ…å†µä¸‹æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ä¸º dp[i] + 1 ï¼›</span><span class="hljs-comment">// å¦åˆ™ æ— æ³•æ¥åœ¨ nums[i]ä¹‹åï¼Œæ­¤æƒ…å†µä¸Šå‡å­åºåˆ—ä¸æˆç«‹ï¼Œè·³è¿‡ã€‚</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lengthOfLIS</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> n = nums.size();    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n, <span class="hljs-number">1</span>)</span></span>;    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n<span class="hljs-number">-1</span>; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = i+<span class="hljs-number">1</span>; j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(nums[j] &gt; nums[i])                dp[j] = max(dp[j], dp[i]+<span class="hljs-number">1</span>);        &#125;    &#125;    <span class="hljs-keyword">return</span> *max_element(dp.begin(), dp.end());&#125;</code></pre><h6 id="354-ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜-https-leetcode-cn-com-problems-russian-doll-envelopes"><a href="#354-ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜-https-leetcode-cn-com-problems-russian-doll-envelopes" class="headerlink" title="[354] ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜ (https://leetcode-cn.com/problems/russian-doll-envelopes/)"></a>[354] ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜ (<a href="https://leetcode-cn.com/problems/russian-doll-envelopes/">https://leetcode-cn.com/problems/russian-doll-envelopes/</a>)</h6><pre><code class="hljs cpp"><span class="hljs-comment">// å…ˆå°†ä¿¡å°æŒ‰ç…§ç¬¬ä¸€ä¸ªå…ƒç´ å‡åºï¼Œç¬¬äºŒä¸ªå…ƒç´ é™åºè¿›è¡Œæ’åˆ—ï¼Œ ç„¶åæ±‚æ‰€æœ‰ç¬¬äºŒä¸ªå…ƒç´ çš„æœ€é•¿é€’å¢å­åºåˆ—</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxEnvelopes</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; envelopes)</span> </span>&#123;    sort(envelopes.begin(), envelopes.end(), [](<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; b)&#123;        <span class="hljs-keyword">return</span> (a[<span class="hljs-number">0</span>] &lt; b[<span class="hljs-number">0</span>]) || (a[<span class="hljs-number">0</span>] == b[<span class="hljs-number">0</span>] &amp;&amp; a[<span class="hljs-number">1</span>] &gt; b[<span class="hljs-number">1</span>]);    &#125;);        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; nums;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> envelope: envelopes) nums.push_back(envelope[<span class="hljs-number">1</span>]);    <span class="hljs-keyword">return</span> lengthOfLIS(nums);&#125;</code></pre><p>æ¥ä¸‹æ¥è¿™ä¸¤é“é¢˜ç›®è™½ç„¶æ²¡æœ‰ç›´æ¥çš„ dp å½¢å¼ï¼Œä½†æ˜¯è•´å«çš„  dp æ€æƒ³ï¼Œè€Œä¸”æ˜¯å¯ä»¥å†™æˆ dp çš„ã€‚</p><h6 id="152-ä¹˜ç§¯æœ€å¤§å­æ•°ç»„-https-leetcode-cn-com-problems-maximum-product-subarray"><a href="#152-ä¹˜ç§¯æœ€å¤§å­æ•°ç»„-https-leetcode-cn-com-problems-maximum-product-subarray" class="headerlink" title="[152] ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ https://leetcode-cn.com/problems/maximum-product-subarray/"></a>[152] ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ <a href="https://leetcode-cn.com/problems/maximum-product-subarray/">https://leetcode-cn.com/problems/maximum-product-subarray/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// è¿™ä¸ªé¢˜ç›®æ˜¯ dp çš„æ€æƒ³åœ¨è§£å†³ï¼Œ ä½†æ˜¯ä¸æ˜¯ç”¨çš„ dp</span><span class="hljs-comment">// ç»´æŒä¸€ä¸ªæœ€å¤§å€¼å’Œä¸€ä¸ªæœ€å°å€¼çš„æ•°ç»„</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxProduct</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = INT_MIN;    <span class="hljs-keyword">int</span> min_val = <span class="hljs-number">1</span>, max_val = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums)&#123;        <span class="hljs-keyword">if</span>(n &lt; <span class="hljs-number">0</span>) swap(max_val, min_val);  <span class="hljs-comment">// å¦‚æœå½“å‰å€¼å°äºé›¶ï¼Œåˆ™å¯¹æœ€å¤§å€¼å’Œæœ€å°å€¼è¿›è¡Œäº’æ¢</span>        min_val = min(min_val * n, n);        max_val = max(max_val * n, n);        res = max(res, max_val);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="376-æ‘†åŠ¨åºåˆ—-https-leetcode-cn-com-problems-wiggle-subsequence-ğŸŒŸğŸŒŸ"><a href="#376-æ‘†åŠ¨åºåˆ—-https-leetcode-cn-com-problems-wiggle-subsequence-ğŸŒŸğŸŒŸ" class="headerlink" title="[376] æ‘†åŠ¨åºåˆ— https://leetcode-cn.com/problems/wiggle-subsequence/      ğŸŒŸğŸŒŸ"></a>[376] æ‘†åŠ¨åºåˆ— <a href="https://leetcode-cn.com/problems/wiggle-subsequence/">https://leetcode-cn.com/problems/wiggle-subsequence/</a>      ğŸŒŸğŸŒŸ</h6><pre><code class="hljs c"><span class="hljs-comment">// æ€è·¯å‚è€ƒ: https://leetcode-cn.com/problems/wiggle-subsequence/solution/tan-xin-si-lu-qing-xi-er-zheng-que-de-ti-jie-by-lg/</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">wiggleMaxLength</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> up = <span class="hljs-number">1</span>, down = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>;  i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">if</span>(nums[i] &gt; nums[i<span class="hljs-number">-1</span>]) up = down + <span class="hljs-number">1</span>;        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nums[i] &lt; nums[i<span class="hljs-number">-1</span>]) down = up + <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">return</span> max(up, down);&#125;</code></pre><h5 id="ç±»å‹ä¸‰ï¼š-äºŒç»´-DP"><a href="#ç±»å‹ä¸‰ï¼š-äºŒç»´-DP" class="headerlink" title="ç±»å‹ä¸‰ï¼š äºŒç»´ DP"></a>ç±»å‹ä¸‰ï¼š äºŒç»´ DP</h5><h6 id="62-ä¸åŒè·¯å¾„-https-leetcode-cn-com-problems-unique-paths"><a href="#62-ä¸åŒè·¯å¾„-https-leetcode-cn-com-problems-unique-paths" class="headerlink" title="[62]  ä¸åŒè·¯å¾„ https://leetcode-cn.com/problems/unique-paths/"></a>[62]  ä¸åŒè·¯å¾„ <a href="https://leetcode-cn.com/problems/unique-paths/">https://leetcode-cn.com/problems/unique-paths/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">uniquePaths</span><span class="hljs-params">(<span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n, <span class="hljs-number">1</span>))</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt; n; j++)&#123;            dp[i][j] = dp[i<span class="hljs-number">-1</span>][j] + dp[i][j<span class="hljs-number">-1</span>];        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>];&#125;</code></pre><h6 id="63-ä¸åŒè·¯å¾„-II-https-leetcode-cn-com-problems-unique-paths-ii-ğŸŒŸğŸŒŸ"><a href="#63-ä¸åŒè·¯å¾„-II-https-leetcode-cn-com-problems-unique-paths-ii-ğŸŒŸğŸŒŸ" class="headerlink" title="[63] ä¸åŒè·¯å¾„ II https://leetcode-cn.com/problems/unique-paths-ii/      ğŸŒŸğŸŒŸ"></a>[63] ä¸åŒè·¯å¾„ II <a href="https://leetcode-cn.com/problems/unique-paths-ii/">https://leetcode-cn.com/problems/unique-paths-ii/</a>      ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">uniquePathsWithObstacles</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; obstacleGrid)</span> </span>&#123;    <span class="hljs-keyword">if</span>(obstacleGrid.size() == <span class="hljs-number">0</span> || obstacleGrid[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> m = obstacleGrid.size(), n = obstacleGrid[<span class="hljs-number">0</span>].size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n, <span class="hljs-number">1</span>))</span></span>;    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = obstacleGrid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] == <span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++)  dp[i][<span class="hljs-number">0</span>] = obstacleGrid[i][<span class="hljs-number">0</span>] == <span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt; n; j++)  dp[<span class="hljs-number">0</span>][j] = obstacleGrid[<span class="hljs-number">0</span>][j] == <span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : dp[<span class="hljs-number">0</span>][j<span class="hljs-number">-1</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>;  j &lt; n; j++)&#123;            dp[i][j] = obstacleGrid[i][j] == <span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : dp[i<span class="hljs-number">-1</span>][j] + dp[i][j<span class="hljs-number">-1</span>];        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>];&#125;</code></pre><h6 id="64-æœ€å°è·¯å¾„å’Œ-https-leetcode-cn-com-problems-minimum-path-sum"><a href="#64-æœ€å°è·¯å¾„å’Œ-https-leetcode-cn-com-problems-minimum-path-sum" class="headerlink" title="[64] æœ€å°è·¯å¾„å’Œ https://leetcode-cn.com/problems/minimum-path-sum/"></a>[64] æœ€å°è·¯å¾„å’Œ <a href="https://leetcode-cn.com/problems/minimum-path-sum/">https://leetcode-cn.com/problems/minimum-path-sum/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">minPathSum</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;    <span class="hljs-keyword">if</span>(grid.size() == <span class="hljs-number">0</span> || grid[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> m = grid.size();    <span class="hljs-keyword">int</span> n = grid[<span class="hljs-number">0</span>].size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n, <span class="hljs-number">0</span>))</span></span>;        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = grid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) dp[<span class="hljs-number">0</span>][i] = dp[<span class="hljs-number">0</span>][i<span class="hljs-number">-1</span>] + grid[<span class="hljs-number">0</span>][i];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++) dp[i][<span class="hljs-number">0</span>] = dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>] + grid[i][<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt; n; j++)&#123;            dp[i][j] = min(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>]) + grid[i][j];        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>];&#125;</code></pre><h6 id="lcof-47-https-leetcode-cn-com-problems-li-wu-de-zui-da-jie-zhi-lcof"><a href="#lcof-47-https-leetcode-cn-com-problems-li-wu-de-zui-da-jie-zhi-lcof" class="headerlink" title="[lcof 47] https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/"></a>[lcof 47] <a href="https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/">https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxValue</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;    <span class="hljs-keyword">int</span> m = grid.size();    <span class="hljs-keyword">int</span> n = grid[<span class="hljs-number">0</span>].size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n))</span></span>;   <span class="hljs-comment">// è¿™ä¸ªè¯­æ³•ä½¿ç”¨é”™äº†  vector</span>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = grid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++) dp[i][<span class="hljs-number">0</span>] = dp[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>] + grid[i][<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt; n; j++) dp[<span class="hljs-number">0</span>][j] = dp[<span class="hljs-number">0</span>][j<span class="hljs-number">-1</span>] + grid[<span class="hljs-number">0</span>][j];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>;  j &lt; n; j++)&#123;            dp[i][j] = max(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>]) + grid[i][j];        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[m<span class="hljs-number">-1</span>][n<span class="hljs-number">-1</span>];&#125;</code></pre><h6 id="120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ-https-leetcode-cn-com-problems-triangle"><a href="#120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ-https-leetcode-cn-com-problems-triangle" class="headerlink" title="[120] ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ https://leetcode-cn.com/problems/triangle/"></a>[120] ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ <a href="https://leetcode-cn.com/problems/triangle/">https://leetcode-cn.com/problems/triangle/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// ç›´æ¥åœ¨åŸæ•°ç»„ä¸Šæ›´æ”¹</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">minimumTotal</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; triangle)</span> </span>&#123;    <span class="hljs-keyword">if</span>(triangle.size() == <span class="hljs-number">0</span> || triangle[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> n = triangle.size();    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt;= i; j++)&#123;            <span class="hljs-keyword">if</span>(j == <span class="hljs-number">0</span>) triangle[i][<span class="hljs-number">0</span>] = triangle[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>] + triangle[i][j];            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(j == i) triangle[i][i] = triangle[i<span class="hljs-number">-1</span>][i<span class="hljs-number">-1</span>] + triangle[i][j];            <span class="hljs-keyword">else</span>&#123;                triangle[i][j] = min(triangle[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>], triangle[i<span class="hljs-number">-1</span>][j]) + triangle[i][j];            &#125;        &#125;    &#125;    <span class="hljs-keyword">int</span> res = INT_MAX;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)  res = min(res, triangle[n<span class="hljs-number">-1</span>][i]);    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h5 id="ç±»å‹å››ï¼š-å­ä¸²å’Œå­åºåˆ—é—®é¢˜ï¼šä¸Šå‡ã€æ‘†åŠ¨ã€å›æ–‡ã€å…¬å…±"><a href="#ç±»å‹å››ï¼š-å­ä¸²å’Œå­åºåˆ—é—®é¢˜ï¼šä¸Šå‡ã€æ‘†åŠ¨ã€å›æ–‡ã€å…¬å…±" class="headerlink" title="ç±»å‹å››ï¼š å­ä¸²å’Œå­åºåˆ—é—®é¢˜ï¼šä¸Šå‡ã€æ‘†åŠ¨ã€å›æ–‡ã€å…¬å…±"></a>ç±»å‹å››ï¼š å­ä¸²å’Œå­åºåˆ—é—®é¢˜ï¼šä¸Šå‡ã€æ‘†åŠ¨ã€å›æ–‡ã€å…¬å…±</h5><p>è¿™äº›é¢˜ç›®çš„å…±åŒè§£æ³•æ˜¯ä»¥å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä½œä¸ºè¡Œï¼Œ å¦ä¸€ä¸ªå­—ç¬¦ä½œä¸ºåˆ—ï¼Œ ç„¶ååˆ›å»ºäºŒç»´æ•°ç»„è¿›è¡Œéå†ã€‚</p><ul><li>æœ€é•¿å…¬å…±å­ä¸²/å­åºåˆ—</li></ul><h6 id="718-æœ€é•¿é‡å¤å­æ•°ç»„-https-leetcode-cn-com-problems-maximum-length-of-repeated-subarray"><a href="#718-æœ€é•¿é‡å¤å­æ•°ç»„-https-leetcode-cn-com-problems-maximum-length-of-repeated-subarray" class="headerlink" title="[718] æœ€é•¿é‡å¤å­æ•°ç»„ https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/"></a>[718] æœ€é•¿é‡å¤å­æ•°ç»„ <a href="https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/">https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findLength</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; A, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; B)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> m = A.size(), n = B.size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n, <span class="hljs-number">0</span>))</span></span>;    <span class="hljs-comment">// init</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)         <span class="hljs-keyword">if</span>(A[i] == B[<span class="hljs-number">0</span>]) dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;  i &lt; n; i++)        <span class="hljs-keyword">if</span>(A[<span class="hljs-number">0</span>] == B[i]) dp[<span class="hljs-number">0</span>][i] = <span class="hljs-number">1</span>;    <span class="hljs-comment">// transform</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>;  j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(A[i] == B[j])                 dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span>;                res = max(res, dp[i][j]);        &#125;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="1143-æœ€é•¿å…¬å…±å­åºåˆ—-https-leetcode-cn-com-problems-longest-common-subsequence-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#1143-æœ€é•¿å…¬å…±å­åºåˆ—-https-leetcode-cn-com-problems-longest-common-subsequence-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[1143] æœ€é•¿å…¬å…±å­åºåˆ— https://leetcode-cn.com/problems/longest-common-subsequence/    ğŸŒŸğŸŒŸğŸŒŸ"></a>[1143] æœ€é•¿å…¬å…±å­åºåˆ— <a href="https://leetcode-cn.com/problems/longest-common-subsequence/">https://leetcode-cn.com/problems/longest-common-subsequence/</a>    ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">longestCommonSubsequence</span><span class="hljs-params">(<span class="hljs-built_in">string</span> text1, <span class="hljs-built_in">string</span> text2)</span> </span>&#123;    <span class="hljs-keyword">int</span> m = text1.size();    <span class="hljs-keyword">int</span> n = text2.size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m+<span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n+<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j&lt;= n; j++)&#123;            <span class="hljs-comment">// å› ä¸ºçŸ©é˜µå¤§å°ä¸º (m+1)(n+1),  æ‰€ä»¥ i-1, j-1 å¯¹åº”çš„ dpçš„ i,j</span>            <span class="hljs-keyword">if</span>(text1[i<span class="hljs-number">-1</span>] == text2[j<span class="hljs-number">-1</span>])&#123;                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span>;            &#125;<span class="hljs-keyword">else</span>&#123;                dp[i][j] = max(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>]);            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[m][n];&#125;</code></pre><ul><li>æœ€é•¿å›æ–‡å­ä¸²/å­åºåˆ—</li></ul><h6 id="5-æœ€é•¿å›æ–‡å­ä¸²-https-leetcode-cn-com-problems-longest-palindromic-substring-ğŸŒŸğŸŒŸ"><a href="#5-æœ€é•¿å›æ–‡å­ä¸²-https-leetcode-cn-com-problems-longest-palindromic-substring-ğŸŒŸğŸŒŸ" class="headerlink" title="[5] æœ€é•¿å›æ–‡å­ä¸² https://leetcode-cn.com/problems/longest-palindromic-substring/    ğŸŒŸğŸŒŸ"></a>[5] æœ€é•¿å›æ–‡å­ä¸² <a href="https://leetcode-cn.com/problems/longest-palindromic-substring/">https://leetcode-cn.com/problems/longest-palindromic-substring/</a>    ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">palindrome</span><span class="hljs-params">(<span class="hljs-built_in">string</span> str, <span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j, <span class="hljs-keyword">int</span> base)</span></span>&#123;    <span class="hljs-keyword">for</span>(;i &gt;= <span class="hljs-number">0</span> &amp;&amp; j &lt; str.size() &amp;&amp; str[i] == str[j]; i--, j++)   len += <span class="hljs-number">2</span>;    <span class="hljs-keyword">return</span> str.substr(i+<span class="hljs-number">1</span>, base);&#125;<span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">longestPalindrome</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-built_in">string</span> res = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">if</span>(s.size() == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> s;    <span class="hljs-built_in">string</span> s1, s2;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; s.size(); i++)&#123;        s1 = palindrome(s, i<span class="hljs-number">-1</span>, i+<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);        s2 = palindrome(s, i<span class="hljs-number">-1</span>, i, <span class="hljs-number">0</span>);        <span class="hljs-built_in">string</span> max_str = s1.size() &gt; s2.size() ? s1 : s2;        res = res.size() &gt; max_str.size() ? res : max_str;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="516-æœ€é•¿å›æ–‡å­åºåˆ—-https-leetcode-cn-com-problems-longest-palindromic-subsequence-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#516-æœ€é•¿å›æ–‡å­åºåˆ—-https-leetcode-cn-com-problems-longest-palindromic-subsequence-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[516] æœ€é•¿å›æ–‡å­åºåˆ— https://leetcode-cn.com/problems/longest-palindromic-subsequence/    ğŸŒŸğŸŒŸğŸŒŸ"></a>[516] æœ€é•¿å›æ–‡å­åºåˆ— <a href="https://leetcode-cn.com/problems/longest-palindromic-subsequence/">https://leetcode-cn.com/problems/longest-palindromic-subsequence/</a>    ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">longestPalindromeSubseq</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-keyword">int</span> n = s.size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(n, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n))</span></span>;    <span class="hljs-comment">// dp[i][j]: j-&gt;i æœ€å¤§å›æ–‡å­ä¸²çš„é•¿åº¦</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) dp[i][i] = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = n<span class="hljs-number">-1</span>; i &gt;= <span class="hljs-number">0</span>; i--)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = i+<span class="hljs-number">1</span>; j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(s[i] == s[j])                 dp[i][j] = dp[i+<span class="hljs-number">1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">2</span>;            <span class="hljs-keyword">else</span>                dp[i][j] = max(dp[i+<span class="hljs-number">1</span>][j], dp[i][j<span class="hljs-number">-1</span>]);        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][n<span class="hljs-number">-1</span>];&#125;</code></pre><h6 id="583-ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ-https-leetcode-cn-com-problems-delete-operation-for-two-strings"><a href="#583-ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ-https-leetcode-cn-com-problems-delete-operation-for-two-strings" class="headerlink" title="[583] ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ https://leetcode-cn.com/problems/delete-operation-for-two-strings/"></a>[583] ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ <a href="https://leetcode-cn.com/problems/delete-operation-for-two-strings/">https://leetcode-cn.com/problems/delete-operation-for-two-strings/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">minDistance</span><span class="hljs-params">(<span class="hljs-built_in">string</span> word1, <span class="hljs-built_in">string</span> word2)</span> </span>&#123;    <span class="hljs-comment">// å¯ä»¥è½¬æ¢ä¸ºæ±‚å…¬å…±å­ä¸²çš„é—®é¢˜</span>    <span class="hljs-keyword">if</span>(word1.size() == <span class="hljs-number">0</span> || word2.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> m = word1.size();    <span class="hljs-keyword">int</span> n = word2.size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m+<span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n+<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)&#123;            <span class="hljs-keyword">if</span>(word1[i<span class="hljs-number">-1</span>] == word2[j<span class="hljs-number">-1</span>])&#123;                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span>;            &#125;<span class="hljs-keyword">else</span>&#123;                dp[i][j] = max(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>]);            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> m + n - <span class="hljs-number">2</span>*dp[m][n];&#125;</code></pre><h6 id="72-ç¼–è¾‘è·ç¦»-https-leetcode-cn-com-problems-edit-distance-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#72-ç¼–è¾‘è·ç¦»-https-leetcode-cn-com-problems-edit-distance-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[72] ç¼–è¾‘è·ç¦» https://leetcode-cn.com/problems/edit-distance/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[72] ç¼–è¾‘è·ç¦» <a href="https://leetcode-cn.com/problems/edit-distance/">https://leetcode-cn.com/problems/edit-distance/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">minDistance</span><span class="hljs-params">(<span class="hljs-built_in">string</span> word1, <span class="hljs-built_in">string</span> word2)</span> </span>&#123;    <span class="hljs-keyword">if</span>(word1.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> word2.size();    <span class="hljs-keyword">if</span>(word2.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> word1.size();    <span class="hljs-keyword">int</span> m = word1.size(), n = word2.size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">dp</span><span class="hljs-params">(m+<span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n+<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))</span></span>;    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)   dp[i][<span class="hljs-number">0</span>] = i;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++) dp[<span class="hljs-number">0</span>][j] = j;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>;  i &lt;= m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)&#123;            <span class="hljs-keyword">if</span>(word1[i<span class="hljs-number">-1</span>] == word2[j<span class="hljs-number">-1</span>])                dp[i][j] = dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>];            <span class="hljs-keyword">else</span>&#123;                dp[i][j] = min(dp[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>], min(dp[i<span class="hljs-number">-1</span>][j], dp[i][j<span class="hljs-number">-1</span>])) + <span class="hljs-number">1</span>;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[m][n];&#125;</code></pre><h5 id="ç±»å‹äº”-è‚¡ç¥¨äº¤æ˜“"><a href="#ç±»å‹äº”-è‚¡ç¥¨äº¤æ˜“" class="headerlink" title="ç±»å‹äº”: è‚¡ç¥¨äº¤æ˜“"></a>ç±»å‹äº”: è‚¡ç¥¨äº¤æ˜“</h5><p>è‚¡ç¥¨äº¤æ˜“é—®é¢˜ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ é“é¢˜ç›®ï¼š åŸå§‹çš„ä¹°å–è‚¡ç¥¨121ã€æ— é™æ¬¡æ“ä½œ122ã€åªèƒ½è¿›è¡Œä¸¤æ¬¡æ“ä½œ123ã€æœ€å¤š k æ¬¡188ã€å«å†·å†»æœŸ 309ã€å«æ‰‹ç»­è´¹ <a href="https://leetcode-cn.com/problemset/50/">714</a></p><h6 id="121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-https-leetcode-cn-com-problems-best-time-to-buy-and-sell-stock-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-https-leetcode-cn-com-problems-best-time-to-buy-and-sell-stock-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[121]  ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/  ğŸŒŸğŸŒŸğŸŒŸ"></a>[121]  ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº <a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/">https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/</a>  ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// å¯»æ‰¾ vector çš„æœ€å°å€¼ï¼Œç”¨åé¢çš„å€¼å‡å»ä¹‹å‰çš„æœ€å°å€¼</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; prices)</span> </span>&#123;    <span class="hljs-keyword">int</span> min_val = INT_MAX;    <span class="hljs-keyword">int</span> max_profit = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; prices.size(); i++)&#123;        min_val = min(min_val, prices[i]);        max_profit = max(max_profit, prices[i] - min_val);    &#125;    <span class="hljs-keyword">return</span> max_profit &lt;=<span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : max_profit;&#125;</code></pre><h6 id="122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="[122] ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>[122] ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h6><pre><code class="hljs cpp"><span class="hljs-comment">// ç¬¬ i å¤©çš„æ”¶ç›Šä¸º profit = prices[i] - prices[i-1]</span><span class="hljs-comment">//ï¼ˆ1ï¼‰å½“ profit &gt; 0 æ—¶ï¼Œå½“å¤©ä¹°å…¥å–å‡º</span><span class="hljs-comment">//ï¼ˆ2ï¼‰å½“ profit &lt;= 0 æ—¶ï¼Œå½“å¤©ä¸è¿›è¡Œäº¤æ˜“</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; prices)</span> </span>&#123;    <span class="hljs-keyword">int</span> profit = <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span>(prices.size() &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; prices.size(); i++)&#123;        <span class="hljs-keyword">if</span>(prices[i] &gt; prices[i<span class="hljs-number">-1</span>])            profit += (prices[i] - prices[i<span class="hljs-number">-1</span>]);    &#125;    <span class="hljs-keyword">return</span> profit;&#125;</code></pre><h5 id="ç±»å‹ä¸ƒï¼š-åˆ†å‰²æ•´æ•°"><a href="#ç±»å‹ä¸ƒï¼š-åˆ†å‰²æ•´æ•°" class="headerlink" title="ç±»å‹ä¸ƒï¼š åˆ†å‰²æ•´æ•°"></a>ç±»å‹ä¸ƒï¼š åˆ†å‰²æ•´æ•°</h5><h6 id="343-https-leetcode-cn-com-problems-integer-break-ğŸŒŸğŸŒŸ"><a href="#343-https-leetcode-cn-com-problems-integer-break-ğŸŒŸğŸŒŸ" class="headerlink" title="[343] https://leetcode-cn.com/problems/integer-break/  ğŸŒŸğŸŒŸ"></a>[343] <a href="https://leetcode-cn.com/problems/integer-break/">https://leetcode-cn.com/problems/integer-break/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">cuttingRope</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;    <span class="hljs-keyword">if</span>(n == <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;    <span class="hljs-keyword">int</span> mod = (<span class="hljs-keyword">int</span>)<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;    <span class="hljs-keyword">long</span> res = <span class="hljs-number">1</span>;    <span class="hljs-comment">// å½“å¤§äº 4 æ—¶å€™ï¼Œ ä¼˜å…ˆå‰ªæˆ 3, ä¹‹åä¹˜ä»¥å‰©ä¸‹çš„ä¸€æ®µ</span>    <span class="hljs-keyword">while</span>(n &gt; <span class="hljs-number">4</span>)&#123;        res *= <span class="hljs-number">3</span>;        res %= mod;        n-=<span class="hljs-number">3</span>;    &#125;    res = (n * res) % mod;    <span class="hljs-keyword">return</span> res;  &#125;</code></pre><h5 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h5><h6 id="lcof46-https-leetcode-cn-com-problems-li-wu-de-zui-da-jie-zhi-lcof-ğŸŒŸğŸŒŸ"><a href="#lcof46-https-leetcode-cn-com-problems-li-wu-de-zui-da-jie-zhi-lcof-ğŸŒŸğŸŒŸ" class="headerlink" title="[lcof46] https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/  ğŸŒŸğŸŒŸ"></a>[lcof46] <a href="https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/">https://leetcode-cn.com/problems/li-wu-de-zui-da-jie-zhi-lcof/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">translateNum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> </span>&#123;    <span class="hljs-built_in">string</span> str = to_string(num);    <span class="hljs-keyword">int</span> n = str.size();    <span class="hljs-comment">// dp[i] è¡¨ç¤ºå‰ i ä½ å¯ä»¥æœ‰å‡ ç§ç¿»è¯‘æ–¹æ³•</span>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(n + <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++)&#123;        <span class="hljs-comment">// å¦‚æœå‰ä¸€ä¸ªæ˜¯ 0ï¼Œ æˆ–è€… å‰ä¸€ä¸ªå’Œå½“å‰ &gt; 25ï¼Œ é‚£ä¹ˆä¸èƒ½ç»„æˆä¸€ä¸ªæ–°å­—æ¯</span>        <span class="hljs-keyword">if</span> (str[i<span class="hljs-number">-1</span>] == <span class="hljs-string">&#x27;0&#x27;</span> || str.substr(i<span class="hljs-number">-1</span>, <span class="hljs-number">2</span>) &gt; <span class="hljs-string">&quot;25&quot;</span> ) &#123;            dp[i+<span class="hljs-number">1</span>] = dp[i];        &#125; <span class="hljs-keyword">else</span> &#123;            dp[i+<span class="hljs-number">1</span>] = dp[i] + dp[i<span class="hljs-number">-1</span>];        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[str.size()];&#125;</code></pre><h5 id="ç±»å‹ä¸‰-èƒŒåŒ…é—®é¢˜"><a href="#ç±»å‹ä¸‰-èƒŒåŒ…é—®é¢˜" class="headerlink" title="ç±»å‹ä¸‰ èƒŒåŒ…é—®é¢˜"></a>ç±»å‹ä¸‰ èƒŒåŒ…é—®é¢˜</h5><h6 id="322-é›¶é’±å…‘æ¢-https-leetcode-cn-com-problems-coin-change-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#322-é›¶é’±å…‘æ¢-https-leetcode-cn-com-problems-coin-change-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[322] é›¶é’±å…‘æ¢ https://leetcode-cn.com/problems/coin-change/  ğŸŒŸğŸŒŸğŸŒŸ"></a>[322] é›¶é’±å…‘æ¢ <a href="https://leetcode-cn.com/problems/coin-change/">https://leetcode-cn.com/problems/coin-change/</a>  ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">coinChange</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; coins, <span class="hljs-keyword">int</span> amount)</span> </span>&#123;    <span class="hljs-comment">//  dp[i]: é‡‘é¢ä¸ºiæ—¶å€™çš„æœ€å°ä½¿ç”¨å¼ æ•° -&gt; åˆå§‹åŒ–ä¸º amount+1</span>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dp</span><span class="hljs-params">(amount + <span class="hljs-number">1</span>, amount + <span class="hljs-number">1</span>)</span></span>;        dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= amount; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> coin:coins)&#123;            <span class="hljs-keyword">if</span>(i &gt;= coin)  dp[i] = min(dp[i], dp[i-coin] + <span class="hljs-number">1</span>);        &#125;    &#125;    <span class="hljs-keyword">return</span> dp[amount] == amount + <span class="hljs-number">1</span> ? <span class="hljs-number">-1</span> : dp[amount];&#125;</code></pre><h3 id="4-æœç´¢-DFS-BFS-äºŒåˆ†-å’Œæ’åº-5"><a href="#4-æœç´¢-DFS-BFS-äºŒåˆ†-å’Œæ’åº-5" class="headerlink" title="4. æœç´¢(DFS/BFS/äºŒåˆ†)å’Œæ’åº  5"></a>4. æœç´¢(DFS/BFS/äºŒåˆ†)å’Œæ’åº  5</h3><h4 id="4-1-äºŒåˆ†æŸ¥æ‰¾"><a href="#4-1-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="4.1 äºŒåˆ†æŸ¥æ‰¾"></a>4.1 äºŒåˆ†æŸ¥æ‰¾</h4><p>äºŒåˆ†æŸ¥æ‰¾çš„æ ¸å¿ƒæ€æƒ³åœ¨äºæ€ä¹ˆæ’é™¤ä¸€åŠä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œ è®©æœå¯»çš„ç›®æ ‡å‡ºç°åœ¨é™å®šèŒƒå›´å†…</p><p>åŸºæœ¬çš„é¢˜ç›®åŒ…å«ï¼šäºŒåˆ†æŸ¥æ‰¾ã€æŸ¥æ‰¾æ’å…¥ä½ç½®ã€æ—‹è½¬æ•°ç»„çš„æŸ¥æ‰¾ã€æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª</p><pre><code class="hljs cpp"><span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">search</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-keyword">int</span> left = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> right = nums.size()<span class="hljs-number">-1</span>;    <span class="hljs-keyword">while</span>(left &lt;= right)&#123;  <span class="hljs-comment">// ç­‰å·</span>        <span class="hljs-keyword">int</span> mid = left + (right - left) / <span class="hljs-number">2</span>; <span class="hljs-comment">// é˜²æ­¢æº¢å‡º</span>        <span class="hljs-keyword">if</span>(nums[mid] == target) <span class="hljs-keyword">return</span> mid;        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nums[mid] &gt; target)&#123;            right = mid - <span class="hljs-number">1</span>;  <span class="hljs-comment">// -1</span>        &#125;<span class="hljs-keyword">else</span>&#123;            left = mid + <span class="hljs-number">1</span>;   <span class="hljs-comment">// + 1</span>        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;</code></pre><h6 id="35-æœç´¢æ’å…¥ä½ç½®-https-leetcode-cn-com-problems-search-insert-position"><a href="#35-æœç´¢æ’å…¥ä½ç½®-https-leetcode-cn-com-problems-search-insert-position" class="headerlink" title="[35] æœç´¢æ’å…¥ä½ç½® https://leetcode-cn.com/problems/search-insert-position/"></a>[35] æœç´¢æ’å…¥ä½ç½® <a href="https://leetcode-cn.com/problems/search-insert-position/">https://leetcode-cn.com/problems/search-insert-position/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">searchInsert</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-keyword">int</span> begin = <span class="hljs-number">0</span>, end = nums.size() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(begin &lt;= end)&#123;        <span class="hljs-keyword">int</span> mid = begin + (end - begin) / <span class="hljs-number">2</span>;        <span class="hljs-keyword">if</span>(nums[mid] == target) <span class="hljs-keyword">return</span> mid;        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nums[mid] &gt; target) end = mid - <span class="hljs-number">1</span>;        <span class="hljs-keyword">else</span> begin = mid + <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">return</span> begin;&#125;</code></pre><h6 id="33-æœç´¢æ—‹è½¬æ’åºæ•°ç»„-https-leetcode-cn-com-problems-search-in-rotated-sorted-array-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#33-æœç´¢æ—‹è½¬æ’åºæ•°ç»„-https-leetcode-cn-com-problems-search-in-rotated-sorted-array-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[33] æœç´¢æ—‹è½¬æ’åºæ•°ç»„ https://leetcode-cn.com/problems/search-in-rotated-sorted-array/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[33] æœç´¢æ—‹è½¬æ’åºæ•°ç»„ <a href="https://leetcode-cn.com/problems/search-in-rotated-sorted-array/">https://leetcode-cn.com/problems/search-in-rotated-sorted-array/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š å…ˆå’Œnums[begin] è¿›è¡Œæ¯”è¾ƒç¡®å®šé‚£ä¸€æ®µæœ‰åº</span><span class="hljs-comment">//            ç„¶ååˆ¤å®šæ˜¯å¦åœ¨æœ‰åºæ•°ç»„ä¹‹ä¸­ï¼Œ è¿›è€Œç¡®å®šäºŒåˆ†åˆ°å“ªæ®µ?</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">search</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-keyword">int</span> begin = <span class="hljs-number">0</span>, end = nums.size() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(begin &lt;= end)&#123;  <span class="hljs-comment">// ! ç­‰å·</span>        <span class="hljs-keyword">int</span> mid = begin + (end - begin) / <span class="hljs-number">2</span>; <span class="hljs-comment">// ! é˜²æ­¢æº¢å‡º</span>        <span class="hljs-keyword">if</span>(nums[mid] == target) <span class="hljs-keyword">return</span> mid;                  <span class="hljs-keyword">if</span>(nums[mid] &gt;= nums[begin])&#123;  <span class="hljs-comment">// left is short ! &gt;=</span>            <span class="hljs-keyword">if</span>(nums[begin] &lt;= target &amp;&amp; target &lt; nums[mid]) end = mid<span class="hljs-number">-1</span>;            <span class="hljs-keyword">else</span> begin = mid + <span class="hljs-number">1</span>;        &#125; <span class="hljs-keyword">else</span> &#123;   <span class="hljs-comment">// right is sorted</span>            <span class="hljs-keyword">if</span>(nums[mid] &lt; target &amp;&amp; target &lt;= nums[end]) begin = mid+<span class="hljs-number">1</span>;            <span class="hljs-keyword">else</span> end = mid - <span class="hljs-number">1</span>;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;</code></pre><h6 id="34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®-https-leetcode-cn-com-problems-find-first-and-last-position-of-element-in-sorted-array"><a href="#34-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®-https-leetcode-cn-com-problems-find-first-and-last-position-of-element-in-sorted-array" class="headerlink" title="[34] åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)"></a>[34] åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® <a href="https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/">https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/</a>)</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findFirstTarget</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span></span>&#123;    <span class="hljs-keyword">int</span> begin = <span class="hljs-number">0</span>, end = nums.size()<span class="hljs-number">-1</span>;    <span class="hljs-keyword">while</span>(begin &lt;= end)&#123;        <span class="hljs-keyword">int</span> mid = begin + (end - begin) / <span class="hljs-number">2</span>;        <span class="hljs-keyword">if</span>(nums[mid] == target)&#123;            <span class="hljs-keyword">if</span>(mid == <span class="hljs-number">0</span> || nums[mid<span class="hljs-number">-1</span>] != target) <span class="hljs-keyword">return</span> mid;            <span class="hljs-keyword">else</span>  end = mid<span class="hljs-number">-1</span>;        &#125;        <span class="hljs-keyword">else</span>&#123;            <span class="hljs-keyword">if</span>(nums[mid] &gt; target) end = mid<span class="hljs-number">-1</span>;            <span class="hljs-keyword">else</span> begin = mid + <span class="hljs-number">1</span>;         &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findLastTarget</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span></span>&#123;    <span class="hljs-keyword">int</span> begin = <span class="hljs-number">0</span>, end = nums.size()<span class="hljs-number">-1</span>;    <span class="hljs-keyword">while</span>(begin &lt;= end)&#123;        <span class="hljs-keyword">int</span> mid = begin + (end - begin) / <span class="hljs-number">2</span>;        <span class="hljs-keyword">if</span>(nums[mid] == target)&#123;            <span class="hljs-keyword">if</span>(mid == nums.size()<span class="hljs-number">-1</span> || nums[mid+<span class="hljs-number">1</span>] != target) <span class="hljs-keyword">return</span> mid;            <span class="hljs-keyword">else</span>  begin = mid+<span class="hljs-number">1</span>;        &#125;        <span class="hljs-keyword">else</span>&#123;            <span class="hljs-keyword">if</span>(nums[mid] &gt; target) end = mid<span class="hljs-number">-1</span>;            <span class="hljs-keyword">else</span> begin = mid + <span class="hljs-number">1</span>;         &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;&#125;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">searchRange</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>&#125;;    <span class="hljs-keyword">int</span> first = findFirstTarget(nums, target);    <span class="hljs-keyword">int</span> last = findLastTarget(nums, target);    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&#123;first, last&#125;;&#125;</code></pre><h6 id="lcof-11-æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—-https-leetcode-cn-com-problems-xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof"><a href="#lcof-11-æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—-https-leetcode-cn-com-problems-xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof" class="headerlink" title="[lcof 11] æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­— https://leetcode-cn.com/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/"></a>[lcof 11] æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­— <a href="https://leetcode-cn.com/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/">https://leetcode-cn.com/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">minArray</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; numbers)</span> </span>&#123;    <span class="hljs-keyword">int</span> left = <span class="hljs-number">0</span>, right = numbers.size() <span class="hljs-number">-1</span>;    <span class="hljs-keyword">while</span>(left &lt; right)&#123;   <span class="hljs-comment">// è¿™é‡Œæ²¡æœ‰ç­‰å·</span>        <span class="hljs-keyword">int</span> mid = left + (right - left) / <span class="hljs-number">2</span>;        <span class="hljs-keyword">if</span>(numbers[mid] &gt; numbers[right])&#123;            left = mid + <span class="hljs-number">1</span>;        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(numbers[mid] &lt; numbers[right])&#123;            right = mid;        &#125;<span class="hljs-keyword">else</span>&#123;            right -= <span class="hljs-number">1</span>;  <span class="hljs-comment">// è¿™é‡Œè¦åˆ†ä¸‰ç§æƒ…å†µçš„ï¼Œ ç­‰äºçš„æ—¶å€™ right -= 1 å³å¯</span>        &#125;    &#125;    <span class="hljs-keyword">return</span> numbers[left];&#125;</code></pre><h6 id="69-x-çš„å¹³æ–¹æ ¹-https-leetcode-cn-com-problems-sqrtx-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#69-x-çš„å¹³æ–¹æ ¹-https-leetcode-cn-com-problems-sqrtx-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[69] x çš„å¹³æ–¹æ ¹ https://leetcode-cn.com/problems/sqrtx/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[69] x çš„å¹³æ–¹æ ¹ <a href="https://leetcode-cn.com/problems/sqrtx/">https://leetcode-cn.com/problems/sqrtx/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">mySqrt</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;    <span class="hljs-keyword">int</span> low = <span class="hljs-number">0</span>, high = x;     <span class="hljs-comment">// (1) ä»¥ x ä¸ºä¸Šç•Œ</span>    <span class="hljs-keyword">while</span>(low &lt;= high)&#123;        <span class="hljs-keyword">int</span> mid = low + (high-low) / <span class="hljs-number">2</span>;        <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>)mid * mid &gt; x)&#123;   <span class="hljs-comment">// (2) ä½¿ç”¨ long long é˜²æ­¢æº¢å‡º</span>                high = mid - <span class="hljs-number">1</span>;        &#125; <span class="hljs-keyword">else</span> &#123;                low = mid + <span class="hljs-number">1</span>;        &#125;    &#125;    <span class="hljs-keyword">return</span> high;   <span class="hljs-comment">// (3) è¿”å› high</span>&#125;</code></pre><h6 id="162-å¯»æ‰¾å³°å€¼"><a href="#162-å¯»æ‰¾å³°å€¼" class="headerlink" title="[162] å¯»æ‰¾å³°å€¼"></a>[162] å¯»æ‰¾å³°å€¼</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findPeakElement</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = nums.size()<span class="hljs-number">-1</span>;    <span class="hljs-keyword">while</span>(l &lt; r)&#123;        <span class="hljs-keyword">int</span> mid = l + (r - l) / <span class="hljs-number">2</span>;        <span class="hljs-keyword">if</span>(nums[mid] &gt; nums[mid+<span class="hljs-number">1</span>])  r = mid;        <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">return</span> l;&#125;</code></pre><h4 id="4-2-æœç´¢-BFS-amp-DFS"><a href="#4-2-æœç´¢-BFS-amp-DFS" class="headerlink" title="4.2  æœç´¢ BFS &amp; DFS"></a>4.2  æœç´¢ BFS &amp; DFS</h4><h6 id="733-å›¾åƒæ¸²æŸ“-https-leetcode-cn-com-problems-flood-fill"><a href="#733-å›¾åƒæ¸²æŸ“-https-leetcode-cn-com-problems-flood-fill" class="headerlink" title="[733]  å›¾åƒæ¸²æŸ“ https://leetcode-cn.com/problems/flood-fill/"></a>[733]  å›¾åƒæ¸²æŸ“ <a href="https://leetcode-cn.com/problems/flood-fill/">https://leetcode-cn.com/problems/flood-fill/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">floodFill</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; image, <span class="hljs-keyword">int</span> sr, <span class="hljs-keyword">int</span> sc, <span class="hljs-keyword">int</span> newColor)</span> </span>&#123;    <span class="hljs-keyword">if</span>(image.size() == <span class="hljs-number">0</span> || image[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> image;    <span class="hljs-keyword">int</span> oriColor = image[sr][sc];    bfs(image, sr, sc, newColor, oriColor);    <span class="hljs-keyword">return</span> image;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; image, <span class="hljs-keyword">int</span> sr, <span class="hljs-keyword">int</span> sc, <span class="hljs-keyword">int</span> newColor, <span class="hljs-keyword">int</span> oriColor)</span></span>&#123;    <span class="hljs-keyword">if</span>(sr &gt;= image.size() || sc &gt;= image[<span class="hljs-number">0</span>].size()  || sc &lt; <span class="hljs-number">0</span> || sr &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">if</span>(image[sr][sc] == oriColor &amp;&amp; image[sr][sc] != newColor)&#123;        image[sr][sc] = newColor;        bfs(image, sr<span class="hljs-number">-1</span>, sc, newColor, oriColor);        bfs(image, sr+<span class="hljs-number">1</span>, sc, newColor, oriColor);        bfs(image, sr, sc<span class="hljs-number">-1</span>, newColor, oriColor);        bfs(image, sr, sc+<span class="hljs-number">1</span>, newColor, oriColor);    &#125;&#125;</code></pre><h6 id="200-å²›å±¿æ•°é‡-https-leetcode-cn-com-problems-number-of-islands-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#200-å²›å±¿æ•°é‡-https-leetcode-cn-com-problems-number-of-islands-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[200] å²›å±¿æ•°é‡ https://leetcode-cn.com/problems/number-of-islands/  ğŸŒŸğŸŒŸğŸŒŸ"></a>[200] å²›å±¿æ•°é‡ <a href="https://leetcode-cn.com/problems/number-of-islands/">https://leetcode-cn.com/problems/number-of-islands/</a>  ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt;&gt;&amp; grid, <span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j, <span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> n)</span></span>&#123;    <span class="hljs-comment">// é€’å½’é€€å‡ºæ¡ä»¶</span>    <span class="hljs-keyword">if</span>(i &lt; <span class="hljs-number">0</span> || j &lt; <span class="hljs-number">0</span> || i &gt;= m || j &gt;= n || grid[i][j] == <span class="hljs-string">&#x27;0&#x27;</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-comment">// op</span>    grid[i][j] = <span class="hljs-string">&#x27;0&#x27;</span>;    bfs(grid, i+<span class="hljs-number">1</span>, j, m, n);    bfs(grid, i<span class="hljs-number">-1</span>, j, m, n);    bfs(grid, i, j+<span class="hljs-number">1</span>, m, n);    bfs(grid, i, j<span class="hljs-number">-1</span>, m, n);&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">numIslands</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt;&gt;&amp; grid)</span> </span>&#123;    <span class="hljs-keyword">if</span>(grid.size() == <span class="hljs-number">0</span> || grid[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> m = grid.size();    <span class="hljs-keyword">int</span> n = grid[<span class="hljs-number">0</span>].size();    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(grid[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>)&#123;                bfs(grid, i, j, m, n);                cnt++;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> cnt;&#125;</code></pre><h6 id="695-å²›å±¿çš„æœ€å¤§é¢ç§¯-https-leetcode-cn-com-problems-max-area-of-island"><a href="#695-å²›å±¿çš„æœ€å¤§é¢ç§¯-https-leetcode-cn-com-problems-max-area-of-island" class="headerlink" title="[695] å²›å±¿çš„æœ€å¤§é¢ç§¯ https://leetcode-cn.com/problems/max-area-of-island/"></a>[695] å²›å±¿çš„æœ€å¤§é¢ç§¯ <a href="https://leetcode-cn.com/problems/max-area-of-island/">https://leetcode-cn.com/problems/max-area-of-island/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; grid, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> n)</span></span>&#123;    <span class="hljs-keyword">if</span>(r &lt; <span class="hljs-number">0</span> || c &lt; <span class="hljs-number">0</span> || r &gt;= m || c &gt;= n || grid[r][c] == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    grid[r][c] = <span class="hljs-number">0</span>;    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + bfs(grid, r<span class="hljs-number">-1</span>, c, m, n) + bfs(grid, r+<span class="hljs-number">1</span>, c, m, n)                 + bfs(grid, r, c<span class="hljs-number">-1</span>, m, n) + bfs(grid, r, c+<span class="hljs-number">1</span>, m, n);&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxAreaOfIsland</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;    <span class="hljs-keyword">int</span> max_area = <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span>(grid.size() == <span class="hljs-number">0</span> || grid[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> m = grid.size();    <span class="hljs-keyword">int</span> n = grid[<span class="hljs-number">0</span>].size();    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(grid[i][j] == <span class="hljs-number">1</span>) &#123;                <span class="hljs-keyword">int</span> cur_area = bfs(grid, i, j, m, n);                max_area = max(max_area, cur_area);            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> max_area;&#125;</code></pre><h4 id="4-3-æ’åº"><a href="#4-3-æ’åº" class="headerlink" title="4.3 æ’åº"></a>4.3 æ’åº</h4><p>ä¸»è¦é›†ä¸­åœ¨<strong>å½’å¹¶æ’åº</strong>ã€<strong>å¿«é€Ÿæ’åº</strong>å’Œ<strong>å †æ’åº</strong>å‡ ç§æ’åºæ–¹æ³•ä¸Š</p><p>sort å‡½æ•°çš„ä¸€äº›è¦ç‚¹ï¼š</p><ul><li><p>æ¥å£</p><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RandomAccessIterator</span>&gt;</span><span class="hljs-class">  <span class="hljs-title">void</span> <span class="hljs-title">sort</span> (<span class="hljs-title">RandomAccessIterator</span> <span class="hljs-title">first</span>, <span class="hljs-title">RandomAccessIterator</span> <span class="hljs-title">last</span>);</span><span class="hljs-keyword">template</span> &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RandomAccessIterator</span>, <span class="hljs-title">class</span> <span class="hljs-title">Compare</span>&gt;</span><span class="hljs-class">  <span class="hljs-title">void</span> <span class="hljs-title">sort</span> (<span class="hljs-title">RandomAccessIterator</span> <span class="hljs-title">first</span>, <span class="hljs-title">RandomAccessIterator</span> <span class="hljs-title">last</span>, <span class="hljs-title">Compare</span> <span class="hljs-title">comp</span>);</span></code></pre></li><li><p>å¹¶éæ‰€æœ‰å®¹å™¨éƒ½ä½¿ç”¨sortç®—æ³•</p><ul><li>å…³ç³»å‹å®¹å™¨æ‹¥æœ‰è‡ªåŠ¨æ’åºåŠŸèƒ½ï¼Œå› ä¸ºåº•å±‚é‡‡ç”¨ rb-treeï¼Œæ‰€ä»¥ä¸éœ€è¦ç”¨åˆ° sort ç®—æ³•ã€‚</li><li>åºåˆ—å¼å®¹å™¨ä¸­çš„ stackã€queue å’Œ priority-queue éƒ½æœ‰ç‰¹å®šçš„å‡ºå…¥å£ï¼Œä¸å…è®¸ç”¨æˆ·å¯¹å…ƒç´ æ’åºã€‚</li><li>åªæœ‰ vectorã€dequeï¼Œé€‚ç”¨ sort ç®—æ³•</li></ul><p>å¯¹äºä¸èƒ½æ’åºçš„å®¹å™¨ï¼Œä¸€èˆ¬éœ€è¦è½¬åŒ–ä¸º vector è¿›è¡Œæ’åºã€‚ æ¯”å¦‚</p><pre><code class="hljs cpp">vector&lt;pair&lt;int, int&gt; &gt; pair_vec(m_map.begin(), m_map.end());sort(pair_vec.begin(), pair_vec.end(),      [](<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; b)&#123;<span class="hljs-keyword">return</span> a.second &gt; b.second;&#125;);</code></pre></li><li><p>åº•å±‚å®ç°ï¼š STL çš„ sort ç®—æ³•ï¼Œæ•°æ®é‡å¤§æ—¶é‡‡ç”¨ QuickSort å¿«æ’ç®—æ³•ã€‚ä¸€æ—¦åˆ†æ®µåçš„æ•°æ®é‡å°äºæŸä¸ªé˜ˆå€¼(16)ï¼Œä¸ºé¿å… QuickSort å¿«æ’çš„é€’å½’è°ƒç”¨å¸¦æ¥è¿‡å¤§çš„é¢å¤–è´Ÿè·ï¼Œå°±æ”¹ç”¨ Insertion Sort æ’å…¥æ’åºã€‚å¦‚æœé€’å½’å±‚æ¬¡è¿‡æ·±ï¼Œè¿˜ä¼šæ”¹ç”¨ HeapSort å †æ’åºã€‚</p></li><li><p>sort æ¥å—ä¸€ä¸ªç”¨æˆ·æŒ‡å®šçš„å‡½æ•° cmpã€‚å¯ä»¥ä½¿å¤–éƒ¨å®šä¹‰çš„å‡½æ•°ï¼Œ ä¹Ÿå¯ä»¥æ˜¯å†…åµŒçš„ lambda å‡½æ•°ã€‚ è¦æ±‚: å¯¹äºæ’åºåçš„æ¯ä¸¤ä¸ªç›¸é‚»å…ƒç´ éƒ½è¦æ»¡è¶³ä½¿ cmp ç»“æœä¸º TRUEã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—çš„æ—¶å€™æ‹¿ç”¨æˆ·å®šä¹‰çš„æ¯”è¾ƒå‡½æ•°æ¥æ›¿ä»£åŸæœ‰çš„æ¯”è¾ƒè¿ç®—ç¬¦ã€‚</p></li></ul><h6 id="lcof-51-é€†åºæ•°-https-leetcode-cn-com-problems-shu-zu-zhong-de-ni-xu-dui-lcof-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#lcof-51-é€†åºæ•°-https-leetcode-cn-com-problems-shu-zu-zhong-de-ni-xu-dui-lcof-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[lcof 51] é€†åºæ•°  https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/   ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>[lcof 51] é€†åºæ•°  <a href="https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/">https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/</a>   ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">mergeSort</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; tmp, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r)</span> </span>&#123;    <span class="hljs-keyword">if</span> (l &gt;= r)   <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">int</span> mid = l + (r-l) / <span class="hljs-number">2</span>;    mergeSort(nums, tmp, l, mid);    mergeSort(nums, tmp, mid + <span class="hljs-number">1</span>, r);    <span class="hljs-keyword">int</span> i = l, j = mid + <span class="hljs-number">1</span>, pos = l;    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;        <span class="hljs-keyword">if</span> (nums[i] &lt;= nums[j]) &#123;            tmp[pos++] = nums[i];            ++i;            inv_count += (j - (mid + <span class="hljs-number">1</span>));        &#125;        <span class="hljs-keyword">else</span> &#123;            tmp[pos++] = nums[j];            ++j;        &#125;    &#125;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = i; k &lt;= mid; ++k) &#123;        tmp[pos++] = nums[k];        inv_count += (j - (mid + <span class="hljs-number">1</span>));    &#125;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = j; k &lt;= r; ++k)  tmp[pos++] = nums[k];    copy(tmp.begin() + l, tmp.begin() + r + <span class="hljs-number">1</span>, nums.begin() + l);&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">reversePairs</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> n = nums.size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">tmp</span><span class="hljs-params">(n)</span></span>;    <span class="hljs-keyword">return</span> mergeSort(nums, tmp, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>);&#125;</code></pre><h6 id="912-æ’åºæ•°ç»„-https-leetcode-cn-com-problems-sort-an-array-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#912-æ’åºæ•°ç»„-https-leetcode-cn-com-problems-sort-an-array-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[912] æ’åºæ•°ç»„ https://leetcode-cn.com/problems/sort-an-array/    ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>[912] æ’åºæ•°ç»„ <a href="https://leetcode-cn.com/problems/sort-an-array/">https://leetcode-cn.com/problems/sort-an-array/</a>    ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &amp; nums, <span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> end)</span></span>&#123;    <span class="hljs-keyword">int</span> index = start + (end - start) / <span class="hljs-number">2</span>;   <span class="hljs-comment">// è·å–ä¸­é—´å€¼çš„ä¸‹æ ‡</span>    swap(nums[start], nums[index]);  <span class="hljs-comment">// äº¤æ¢</span>    <span class="hljs-keyword">int</span> pivot = nums[start];  <span class="hljs-comment">// å–è½´</span>    <span class="hljs-keyword">int</span> left = start, right = end;  <span class="hljs-comment">// å®šå·¦å³</span>    <span class="hljs-keyword">while</span>(left != right)&#123;        <span class="hljs-comment">// æ³¨æ„: ä¸‹é¢ä¸¤è¡Œçš„é¡ºåºæ˜¯ä¸èƒ½æ¢çš„!</span>        <span class="hljs-keyword">while</span>(left &lt; right &amp;&amp; nums[right] &gt;= pivot) right--;        <span class="hljs-keyword">while</span>(left &lt; right &amp;&amp; nums[left] &lt;= pivot) left++;        <span class="hljs-keyword">if</span>(left &lt; right) swap(nums[left], nums[right]);    &#125;    swap(nums[start], nums[left]);  <span class="hljs-comment">// å†æ¬¡äº¤æ¢</span>    <span class="hljs-keyword">return</span> left;   <span class="hljs-comment">// ! æ³¨æ„è¿”å› left</span>&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">quickSort</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> end)</span></span>&#123;    <span class="hljs-keyword">if</span>(start &lt; end)&#123;        <span class="hljs-keyword">int</span> index = partition(nums, start, end);        quickSort(nums, start, index<span class="hljs-number">-1</span>);        quickSort(nums, index+<span class="hljs-number">1</span>, end);    &#125;&#125;<span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">sortArray</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span></span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> nums;    quickSort(nums, <span class="hljs-number">0</span>, nums.size()<span class="hljs-number">-1</span>);    <span class="hljs-keyword">return</span> nums;&#125;</code></pre><h3 id="5-ç³»ç»Ÿ-å¤šçº¿ç¨‹-ä¸è®¾è®¡"><a href="#5-ç³»ç»Ÿ-å¤šçº¿ç¨‹-ä¸è®¾è®¡" class="headerlink" title="5. ç³»ç»Ÿ(å¤šçº¿ç¨‹)ä¸è®¾è®¡"></a>5. ç³»ç»Ÿ(å¤šçº¿ç¨‹)ä¸è®¾è®¡</h3><h6 id="é¢è¯•é¢˜-16-25-LRUç¼“å­˜-https-leetcode-cn-com-problems-lru-cache-lcci-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#é¢è¯•é¢˜-16-25-LRUç¼“å­˜-https-leetcode-cn-com-problems-lru-cache-lcci-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[é¢è¯•é¢˜ 16.25. LRUç¼“å­˜] https://leetcode-cn.com/problems/lru-cache-lcci/  ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>[é¢è¯•é¢˜ 16.25. LRUç¼“å­˜] <a href="https://leetcode-cn.com/problems/lru-cache-lcci/">https://leetcode-cn.com/problems/lru-cache-lcci/</a>  ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// ä½¿ç”¨ å“ˆå¸ŒåŒå‘é“¾è¡¨</span><span class="hljs-comment">// æ³¨æ„ä¸‰ä¸ªæ•°æ®ç»“æ„ä¸åŒçš„æ“ä½œæ–¹æ³•ï¼Œ åˆ«å¼„æ··äº†å°±å¯ä»¥äº†ã€‚</span><span class="hljs-comment">// map:  æ·»åŠ /ä¿®æ”¹ map[key]   åˆ é™¤: erase(x)</span><span class="hljs-comment">// list:  åˆ é™¤: cache.erase()</span><span class="hljs-comment">//        back()    front()    pop_x()   push_x()  </span><span class="hljs-comment">//        è·å–è¿­ä»£å™¨: .begin()     .end()</span><span class="hljs-comment">//        é€šè¿‡è¿­ä»£å™¨è·å–å€¼  *iter   </span><span class="hljs-comment">// pair:  è·å–å€¼ kv.second  kv.first</span><span class="hljs-keyword">public</span>:    LRUCache(<span class="hljs-keyword">int</span> capacity) &#123;        max_capacity = capacity;    &#125;        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> key)</span> </span>&#123;        <span class="hljs-keyword">if</span>(m_map.find(key) != m_map.end())&#123;            <span class="hljs-keyword">auto</span> kv = *m_map[key]; <span class="hljs-comment">// è·å–</span>                      cache.erase(m_map[key]);  <span class="hljs-comment">// åˆ é™¤</span>            cache.push_front(kv);  <span class="hljs-comment">// æ·»åŠ </span>            m_map[key] = cache.begin(); <span class="hljs-comment">// æ›´æ”¹æŒ‡å‘</span>            <span class="hljs-keyword">return</span> kv.second;        &#125;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">put</span><span class="hljs-params">(<span class="hljs-keyword">int</span> key, <span class="hljs-keyword">int</span> value)</span> </span>&#123;        <span class="hljs-keyword">if</span> (m_map.find(key) == m_map.end()) &#123;            <span class="hljs-keyword">if</span> (cache.size() == max_capacity) &#123;                m_map.erase(cache.back().first);  <span class="hljs-comment">// åˆ é™¤   !!! éœ€è¦åˆ é™¤ key å€¼</span>                cache.pop_back(); <span class="hljs-comment">// </span>            &#125;        &#125;        <span class="hljs-keyword">else</span> &#123;            cache.erase(m_map[key]);        &#125;        cache.push_front(&#123;key, value&#125;);        m_map[key] = cache.begin();    &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">int</span> max_capacity;    <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;&gt; cache;    <span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">list</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;&gt;::iterator&gt; m_map; <span class="hljs-comment">// int-è¿­ä»£</span></code></pre><h5 id="è¡¥å……å‡ é“å¤šçº¿ç¨‹çš„é¢˜ç›®"><a href="#è¡¥å……å‡ é“å¤šçº¿ç¨‹çš„é¢˜ç›®" class="headerlink" title="!!!! è¡¥å……å‡ é“å¤šçº¿ç¨‹çš„é¢˜ç›®"></a>!!!! è¡¥å……å‡ é“å¤šçº¿ç¨‹çš„é¢˜ç›®</h5>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>leetcode-ds</title>
    <link href="/2020/02/03/leetcode-ds/"/>
    <url>/2020/02/03/leetcode-ds/</url>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h3 id="1-æ•°ç»„-å«äºŒç»´-å’Œå­—ç¬¦ä¸²"><a href="#1-æ•°ç»„-å«äºŒç»´-å’Œå­—ç¬¦ä¸²" class="headerlink" title="1. æ•°ç»„(å«äºŒç»´)å’Œå­—ç¬¦ä¸²"></a>1. æ•°ç»„(å«äºŒç»´)å’Œå­—ç¬¦ä¸²</h3><h5 id="é¢˜å‹ä¸€-åŒå‘åŒæŒ‡é’ˆ"><a href="#é¢˜å‹ä¸€-åŒå‘åŒæŒ‡é’ˆ" class="headerlink" title="é¢˜å‹ä¸€: åŒå‘åŒæŒ‡é’ˆ"></a>é¢˜å‹ä¸€: åŒå‘åŒæŒ‡é’ˆ</h5><h6 id="283-ç§»åŠ¨é›¶-https-leetcode-cn-com-problems-move-zeroes-ğŸŒŸğŸŒŸ"><a href="#283-ç§»åŠ¨é›¶-https-leetcode-cn-com-problems-move-zeroes-ğŸŒŸğŸŒŸ" class="headerlink" title="[283] ç§»åŠ¨é›¶ https://leetcode-cn.com/problems/move-zeroes/   ğŸŒŸğŸŒŸ"></a>[283] ç§»åŠ¨é›¶ <a href="https://leetcode-cn.com/problems/move-zeroes/">https://leetcode-cn.com/problems/move-zeroes/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// ç»å…¸åŒæŒ‡é’ˆ</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">moveZeroes</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; nums.size(); j++)&#123;        <span class="hljs-keyword">if</span>(nums[j] != <span class="hljs-number">0</span>)&#123;   <span class="hljs-comment">// å½“ä¸ä¸ºé›¶çš„æ—¶å€™ï¼Œ</span>            nums[i] = nums[j];   <span class="hljs-comment">// ç›´æ¥è¿›è¡Œæ›¿æ¢</span>            i++;        &#125;    &#125;    <span class="hljs-keyword">while</span>(i &lt; nums.size()) nums[i++] = <span class="hljs-number">0</span>; &#125;</code></pre><h6 id="27-ç§»é™¤å…ƒç´ -https-leetcode-cn-com-problems-remove-element"><a href="#27-ç§»é™¤å…ƒç´ -https-leetcode-cn-com-problems-remove-element" class="headerlink" title="[27] ç§»é™¤å…ƒç´  https://leetcode-cn.com/problems/remove-element/"></a>[27] ç§»é™¤å…ƒç´  <a href="https://leetcode-cn.com/problems/remove-element/">https://leetcode-cn.com/problems/remove-element/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">removeElement</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> val)</span> </span>&#123;    <span class="hljs-keyword">int</span>  i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; nums.size(); j++)&#123;        <span class="hljs-keyword">if</span>(nums[j] != val)&#123;            nums[i] = nums[j];            i++;        &#125;    &#125;    <span class="hljs-keyword">return</span> i;&#125;</code></pre><h6 id="26-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#26-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="26]. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/">26]. åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">removeDuplicates</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; nums.size(); j++)&#123;        <span class="hljs-keyword">if</span>(nums[i] != nums[j])&#123;            i++;            nums[i] = nums[j];        &#125;    &#125;    <span class="hljs-keyword">return</span> i+<span class="hljs-number">1</span>;&#125;</code></pre><h6 id="80-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-II-https-leetcode-cn-com-problems-remove-duplicates-from-sorted-array-ii"><a href="#80-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-II-https-leetcode-cn-com-problems-remove-duplicates-from-sorted-array-ii" class="headerlink" title="[80] åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array-ii/"></a>[80] åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II <a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array-ii/">https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array-ii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">removeDuplicates</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() &lt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> nums.size();    <span class="hljs-keyword">int</span> p = <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">if</span>(nums[i] == nums[i<span class="hljs-number">-1</span>]) cnt++;        <span class="hljs-keyword">else</span> cnt = <span class="hljs-number">1</span>;          <span class="hljs-keyword">if</span>(cnt &lt;= <span class="hljs-number">2</span>) nums[p++] = nums[i];    &#125;    <span class="hljs-keyword">return</span> p;&#125;</code></pre><h6 id="58-æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦-https-leetcode-cn-com-problems-length-of-last-word"><a href="#58-æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦-https-leetcode-cn-com-problems-length-of-last-word" class="headerlink" title="[58] æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦ https://leetcode-cn.com/problems/length-of-last-word/"></a>[58] æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦ <a href="https://leetcode-cn.com/problems/length-of-last-word/">https://leetcode-cn.com/problems/length-of-last-word/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lengthOfLastWord</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> pos = s.size() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(pos &gt;= <span class="hljs-number">0</span> &amp;&amp; s[pos] == <span class="hljs-string">&#x27; &#x27;</span>) pos--;    <span class="hljs-keyword">while</span>(pos &gt;= <span class="hljs-number">0</span> &amp;&amp; s[pos--] != <span class="hljs-string">&#x27; &#x27;</span>) res++;        <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="lcof-21-è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢-https-leetcode-cn-com-problems-diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof"><a href="#lcof-21-è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢-https-leetcode-cn-com-problems-diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof" class="headerlink" title="[lcof 21] è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢ https://leetcode-cn.com/problems/diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof/)"></a>[lcof 21] è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢ <a href="https://leetcode-cn.com/problems/diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof/">https://leetcode-cn.com/problems/diao-zheng-shu-zu-shun-xu-shi-qi-shu-wei-yu-ou-shu-qian-mian-lcof/</a>)</h6><pre><code class="hljs matlab">vector&lt;int&gt; exchange(vector&lt;int&gt;&amp; nums) &#123;    int <span class="hljs-built_in">i</span> = <span class="hljs-number">0</span>, <span class="hljs-built_in">j</span> = nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">i</span> &lt; <span class="hljs-built_in">j</span>)&#123;        <span class="hljs-keyword">while</span>(<span class="hljs-built_in">i</span> &lt;<span class="hljs-built_in">j</span> &amp;&amp; nums[<span class="hljs-built_in">i</span>] <span class="hljs-comment">% 2 == 1) i++;</span>        <span class="hljs-keyword">while</span>(<span class="hljs-built_in">i</span> &lt; <span class="hljs-built_in">j</span> &amp;&amp; nums[<span class="hljs-built_in">j</span>] <span class="hljs-comment">% 2 == 0) j--;</span>        swap(nums[<span class="hljs-built_in">i</span>++], nums[<span class="hljs-built_in">j</span>--]);    &#125;    <span class="hljs-keyword">return</span> nums;&#125;</code></pre><h5 id="é¢˜å‹äºŒ-ç›¸å‘åŒæŒ‡é’ˆ"><a href="#é¢˜å‹äºŒ-ç›¸å‘åŒæŒ‡é’ˆ" class="headerlink" title="é¢˜å‹äºŒ: ç›¸å‘åŒæŒ‡é’ˆ"></a>é¢˜å‹äºŒ: ç›¸å‘åŒæŒ‡é’ˆ</h5><h6 id="167-ä¸¤æ•°ä¹‹å’Œ-II-è¾“å…¥æœ‰åºæ•°ç»„-https-leetcode-cn-com-problems-two-sum-ii-input-array-is-sorted-ğŸŒŸğŸŒŸ"><a href="#167-ä¸¤æ•°ä¹‹å’Œ-II-è¾“å…¥æœ‰åºæ•°ç»„-https-leetcode-cn-com-problems-two-sum-ii-input-array-is-sorted-ğŸŒŸğŸŒŸ" class="headerlink" title="[167] ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„ https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/    ğŸŒŸğŸŒŸ"></a>[167] ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„ <a href="https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/">https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/</a>    ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">twoSum</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; numbers, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-keyword">int</span> begin = <span class="hljs-number">0</span>, end = numbers.size() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(begin &lt; end)&#123;        <span class="hljs-keyword">int</span> s = numbers[begin] + numbers[end];        <span class="hljs-keyword">if</span>(s == target) <span class="hljs-keyword">return</span> &#123;begin+<span class="hljs-number">1</span>, end+<span class="hljs-number">1</span>&#125;;        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s &gt; target) end--;        <span class="hljs-keyword">else</span> begin++;    &#125;    <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>&#125;;&#125;</code></pre><h6 id="15-ä¸‰æ•°ä¹‹å’Œ-https-leetcode-cn-com-problems-3sum-ğŸŒŸğŸŒŸ"><a href="#15-ä¸‰æ•°ä¹‹å’Œ-https-leetcode-cn-com-problems-3sum-ğŸŒŸğŸŒŸ" class="headerlink" title="[15] ä¸‰æ•°ä¹‹å’Œ https://leetcode-cn.com/problems/3sum/   ğŸŒŸğŸŒŸ"></a>[15] ä¸‰æ•°ä¹‹å’Œ <a href="https://leetcode-cn.com/problems/3sum/">https://leetcode-cn.com/problems/3sum/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">threeSum</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt;  res;  <span class="hljs-comment">// set å»é‡</span>    <span class="hljs-keyword">if</span>(nums.size()==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> &#123;&#125;;    sort(nums.begin(), nums.end());    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size() - <span class="hljs-number">1</span>; i++)&#123;        <span class="hljs-keyword">if</span>(nums[i] &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">// å‰ªæ</span>        <span class="hljs-keyword">if</span>(i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i<span class="hljs-number">-1</span>]) <span class="hljs-keyword">continue</span>;        <span class="hljs-keyword">int</span> l = i + <span class="hljs-number">1</span>, r = nums.size()<span class="hljs-number">-1</span>;        <span class="hljs-keyword">while</span>(l &lt; r)&#123;            <span class="hljs-keyword">if</span>(nums[l] + nums[r] == <span class="hljs-number">-1</span> * nums[i])&#123;                res.insert(&#123;nums[i], nums[l], nums[r]&#125;);                l++;                r--;            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nums[l] + nums[r] &gt; <span class="hljs-number">-1</span> * nums[i])&#123;                r--;            &#125;<span class="hljs-keyword">else</span>&#123;                l++;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;(res.begin(), res.end());&#125;</code></pre><h6 id="18-å››æ•°ä¹‹å’Œ-https-leetcode-cn-com-problems-4sum"><a href="#18-å››æ•°ä¹‹å’Œ-https-leetcode-cn-com-problems-4sum" class="headerlink" title="[18] å››æ•°ä¹‹å’Œ https://leetcode-cn.com/problems/4sum/"></a>[18] å››æ•°ä¹‹å’Œ <a href="https://leetcode-cn.com/problems/4sum/">https://leetcode-cn.com/problems/4sum/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">fourSum</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-built_in">set</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-keyword">if</span>(nums.size() &lt; <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> &#123;&#125;;    sort(nums.begin(), nums.end());    <span class="hljs-keyword">int</span> n = nums.size();    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">3</span>; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = i + <span class="hljs-number">1</span>; j &lt; n<span class="hljs-number">-2</span>; j++)&#123;            <span class="hljs-keyword">int</span> t = target - (nums[i] + nums[j]);            <span class="hljs-keyword">int</span> l = j + <span class="hljs-number">1</span>, r = n<span class="hljs-number">-1</span>;            <span class="hljs-keyword">while</span>(l &lt; r)&#123;                <span class="hljs-keyword">if</span>(nums[l] + nums[r] == t)&#123;                    res.insert(&#123;nums[i], nums[j], nums[l], nums[r]&#125;);                    l++;                    r--;                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nums[l] + nums[r] &gt; t)&#123;                    r--;                &#125;<span class="hljs-keyword">else</span>&#123;                    l++;                &#125;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt;(res.begin(), res.end());&#125;</code></pre><h6 id="16-æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ-https-leetcode-cn-com-problems-3sum-closest"><a href="#16-æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ-https-leetcode-cn-com-problems-3sum-closest" class="headerlink" title="[16] æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ https://leetcode-cn.com/problems/3sum-closest/"></a>[16] æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ <a href="https://leetcode-cn.com/problems/3sum-closest/">https://leetcode-cn.com/problems/3sum-closest/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">threeSumClosest</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> min_diff  = INT_MAX;        sort(nums.begin(), nums.end());    <span class="hljs-keyword">int</span> n = nums.size();    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n<span class="hljs-number">-2</span>; i++)&#123;        <span class="hljs-keyword">int</span> l = i+<span class="hljs-number">1</span>, r = n<span class="hljs-number">-1</span>;        <span class="hljs-keyword">while</span>(l &lt; r)&#123;            <span class="hljs-keyword">int</span> s = nums[i] + nums[l] + nums[r];            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">abs</span>(s - target) &lt; min_diff)&#123;                min_diff = <span class="hljs-built_in">abs</span>(s - target);                res = s;            &#125;            <span class="hljs-keyword">if</span>(s == target)&#123;                l++;r--;            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s &gt; target)&#123;                r--;            &#125;<span class="hljs-keyword">else</span>&#123;                l++;            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="11-ç››æœ€å¤šæ°´çš„å®¹å™¨-https-leetcode-cn-com-problems-container-with-most-water"><a href="#11-ç››æœ€å¤šæ°´çš„å®¹å™¨-https-leetcode-cn-com-problems-container-with-most-water" class="headerlink" title="[11] ç››æœ€å¤šæ°´çš„å®¹å™¨ https://leetcode-cn.com/problems/container-with-most-water/"></a>[11] ç››æœ€å¤šæ°´çš„å®¹å™¨ <a href="https://leetcode-cn.com/problems/container-with-most-water/">https://leetcode-cn.com/problems/container-with-most-water/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxArea</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; height)</span> </span>&#123;    <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = height.size()<span class="hljs-number">-1</span>;    <span class="hljs-keyword">int</span> max_water = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(l &lt; r)&#123;        <span class="hljs-keyword">int</span> water = (r-l) * min(height[l], height[r]);        max_water = max(max_water, water);        <span class="hljs-keyword">if</span>(height[l] &lt; height[r]) l++; <span class="hljs-comment">// ç§»åŠ¨çŸ­æ¿å³å¯ !!</span>        <span class="hljs-keyword">else</span> r--;    &#125;    <span class="hljs-keyword">return</span> max_water;&#125;</code></pre><h5 id="é¢˜å‹ä¸‰-äºŒç»´çŸ©é˜µ"><a href="#é¢˜å‹ä¸‰-äºŒç»´çŸ©é˜µ" class="headerlink" title="é¢˜å‹ä¸‰: äºŒç»´çŸ©é˜µ"></a>é¢˜å‹ä¸‰: äºŒç»´çŸ©é˜µ</h5><h6 id="59-èºæ—‹çŸ©é˜µ-II-https-leetcode-cn-com-problems-spiral-matrix-ii"><a href="#59-èºæ—‹çŸ©é˜µ-II-https-leetcode-cn-com-problems-spiral-matrix-ii" class="headerlink" title="[59]. èºæ—‹çŸ©é˜µ II https://leetcode-cn.com/problems/spiral-matrix-ii/"></a>[59]. èºæ—‹çŸ©é˜µ II <a href="https://leetcode-cn.com/problems/spiral-matrix-ii/">https://leetcode-cn.com/problems/spiral-matrix-ii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">generateMatrix</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; <span class="hljs-title">matrix</span><span class="hljs-params">(n, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n))</span></span>;    <span class="hljs-keyword">int</span> row_b = <span class="hljs-number">0</span>, row_e = n - <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> col_b = <span class="hljs-number">0</span>, col_e= n - <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> val = <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(row_b&lt;= row_e &amp;&amp; col_b &lt;= col_e)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = col_b; i &lt;= col_e; i++)  matrix[row_b][i] = val++;        row_b++;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = row_b; i &lt;= row_e; i++)  matrix[i][col_e] = val++;        col_e--;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = col_e; i &gt;= col_b; i--)  matrix[row_e][i] = val++;        row_e--;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = row_e; i &gt;= row_b; i--)  matrix[i][col_b] = val++;        col_b++;    &#125;    <span class="hljs-keyword">return</span> matrix;&#125;</code></pre><h6 id="54-èºæ—‹çŸ©é˜µ-https-leetcode-cn-com-problems-spiral-matrix"><a href="#54-èºæ—‹çŸ©é˜µ-https-leetcode-cn-com-problems-spiral-matrix" class="headerlink" title="[54] èºæ—‹çŸ©é˜µ https://leetcode-cn.com/problems/spiral-matrix/"></a>[54] èºæ—‹çŸ©é˜µ <a href="https://leetcode-cn.com/problems/spiral-matrix/">https://leetcode-cn.com/problems/spiral-matrix/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// è¡Œåˆ—ä¸åŒï¼Œå¯ä»¥åœ¨æ¯ä¸€è¡Œ/åˆ— éƒ½è¿›è¡Œä¸€æ¬¡å¼¹å‡ºåˆ¤æ–­</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">spiralOrder</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">if</span>(matrix.size() == <span class="hljs-number">0</span> || matrix[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-keyword">int</span> start_r = <span class="hljs-number">0</span>,  end_r = matrix.size() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">int</span> start_c = <span class="hljs-number">0</span>, end_c = matrix[<span class="hljs-number">0</span>].size() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123; <span class="hljs-comment">// è¿™é‡Œé€€å‡ºçš„æ¡ä»¶æ”¾åœ¨æ¯ä¸ªå†…å±‚å¾ªç¯é‡Œé¢</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = start_c; i &lt;= end_c; i++) res.push_back(matrix[start_r][i]);        <span class="hljs-keyword">if</span>(++start_r &gt; end_r) <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = start_r; i &lt;= end_r; i++) res.push_back(matrix[i][end_c]);         <span class="hljs-keyword">if</span>(--end_c &lt; start_c) <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = end_c; i &gt;= start_c; i--) res.push_back(matrix[end_r][i]);        <span class="hljs-keyword">if</span>(--end_r &lt; start_r) <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = end_r; i &gt;= start_r; i--) res.push_back(matrix[i][start_c]);        <span class="hljs-keyword">if</span>(++start_c &gt; end_c)  <span class="hljs-keyword">break</span>;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="74-æœç´¢äºŒç»´çŸ©é˜µ-https-leetcode-cn-com-problems-search-a-2d-matrix"><a href="#74-æœç´¢äºŒç»´çŸ©é˜µ-https-leetcode-cn-com-problems-search-a-2d-matrix" class="headerlink" title="[74] æœç´¢äºŒç»´çŸ©é˜µ https://leetcode-cn.com/problems/search-a-2d-matrix/"></a>[74] æœç´¢äºŒç»´çŸ©é˜µ <a href="https://leetcode-cn.com/problems/search-a-2d-matrix/">https://leetcode-cn.com/problems/search-a-2d-matrix/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">searchMatrix</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; matrix, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-keyword">if</span>(matrix.size() == <span class="hljs-number">0</span> || matrix[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">int</span> raw = matrix.size(), col = matrix[<span class="hljs-number">0</span>].size();    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, j = col - <span class="hljs-number">1</span>;    <span class="hljs-keyword">while</span>(i &lt; raw &amp;&amp; j &gt;= <span class="hljs-number">0</span>)&#123;        <span class="hljs-keyword">if</span>(matrix[i][j] == target) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(matrix[i][j] &gt; target) j--;        <span class="hljs-keyword">else</span> i++;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; &#125;</code></pre><h6 id="48-æ—‹è½¬å›¾åƒ-https-leetcode-cn-com-problems-rotate-image-ğŸŒŸğŸŒŸ"><a href="#48-æ—‹è½¬å›¾åƒ-https-leetcode-cn-com-problems-rotate-image-ğŸŒŸğŸŒŸ" class="headerlink" title="[48] æ—‹è½¬å›¾åƒ https://leetcode-cn.com/problems/rotate-image/   ğŸŒŸğŸŒŸ"></a>[48] æ—‹è½¬å›¾åƒ <a href="https://leetcode-cn.com/problems/rotate-image/">https://leetcode-cn.com/problems/rotate-image/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rotate</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;    <span class="hljs-keyword">if</span>(matrix.size() == <span class="hljs-number">0</span> || matrix[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">int</span> row = matrix.size(), col = matrix[<span class="hljs-number">0</span>].size();    <span class="hljs-comment">// æ²¿ä¸»å¯¹è§’çº¿å¯¹æŠ˜</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; row; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = i; j &lt; col; j++)&#123;            swap(matrix[i][j], matrix[j][i]);        &#125;    &#125;    <span class="hljs-comment">// æ°´å¹³ç¿»è½¬</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; row; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; col / <span class="hljs-number">2</span>; j++)&#123;            swap(matrix[i][j], matrix[i][col<span class="hljs-number">-1</span>-j]);        &#125;    &#125;    <span class="hljs-keyword">return</span>;&#125;</code></pre><h6 id="73-çŸ©é˜µç½®é›¶-https-leetcode-cn-com-problems-set-matrix-zeroes"><a href="#73-çŸ©é˜µç½®é›¶-https-leetcode-cn-com-problems-set-matrix-zeroes" class="headerlink" title="[73]. çŸ©é˜µç½®é›¶ https://leetcode-cn.com/problems/set-matrix-zeroes/"></a>[73]. çŸ©é˜µç½®é›¶ <a href="https://leetcode-cn.com/problems/set-matrix-zeroes/">https://leetcode-cn.com/problems/set-matrix-zeroes/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setZeroes</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;    <span class="hljs-keyword">int</span> m = matrix.size(); <span class="hljs-comment">// è¡Œ</span>    <span class="hljs-keyword">int</span> n = matrix[<span class="hljs-number">0</span>].size(); <span class="hljs-comment">// åˆ—</span>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">raw</span><span class="hljs-params">(m, <span class="hljs-number">0</span>)</span></span>;     <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">col</span><span class="hljs-params">(n, <span class="hljs-number">0</span>)</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>;  j &lt; n; j++)&#123;            <span class="hljs-keyword">if</span>(matrix[i][j] == <span class="hljs-number">0</span>) raw[i]=<span class="hljs-number">1</span>;            <span class="hljs-keyword">if</span>(matrix[i][j] == <span class="hljs-number">0</span>) col[j]=<span class="hljs-number">1</span>;        &#125;    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; raw.size(); i++)&#123;        <span class="hljs-keyword">if</span>(raw[i])            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)   matrix[i][j] = <span class="hljs-number">0</span>;    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; col.size(); j++)&#123;        <span class="hljs-keyword">if</span>(col[j])            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)   matrix[i][j] = <span class="hljs-number">0</span>;    &#125;  &#125;</code></pre><h5 id="é¢˜å‹å››-å›æ–‡ä¸ç¿»è½¬"><a href="#é¢˜å‹å››-å›æ–‡ä¸ç¿»è½¬" class="headerlink" title="é¢˜å‹å››: å›æ–‡ä¸ç¿»è½¬"></a>é¢˜å‹å››: å›æ–‡ä¸ç¿»è½¬</h5><h6 id="9-å›æ–‡æ•°-https-leetcode-cn-com-problems-palindrome-number"><a href="#9-å›æ–‡æ•°-https-leetcode-cn-com-problems-palindrome-number" class="headerlink" title="[9] å›æ–‡æ•° https://leetcode-cn.com/problems/palindrome-number/"></a>[9] å›æ–‡æ•° <a href="https://leetcode-cn.com/problems/palindrome-number/">https://leetcode-cn.com/problems/palindrome-number/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPalindrome</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;    <span class="hljs-built_in">string</span> str = to_string(x);    <span class="hljs-keyword">int</span> begin = <span class="hljs-number">0</span>, end = str.size()<span class="hljs-number">-1</span>;    <span class="hljs-keyword">while</span>(begin &lt; end)&#123;        <span class="hljs-keyword">if</span>(str[begin++] != str[end--]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;</code></pre><h6 id="lcof-58-https-leetcode-cn-com-problems-zuo-xuan-zhuan-zi-fu-chuan-lcof-ğŸŒŸğŸŒŸ"><a href="#lcof-58-https-leetcode-cn-com-problems-zuo-xuan-zhuan-zi-fu-chuan-lcof-ğŸŒŸğŸŒŸ" class="headerlink" title="[lcof 58] https://leetcode-cn.com/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/   ğŸŒŸğŸŒŸ"></a>[lcof 58] <a href="https://leetcode-cn.com/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/">https://leetcode-cn.com/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs angelscript"><span class="hljs-built_in">void</span> reverse(<span class="hljs-built_in">string</span>&amp; s, <span class="hljs-built_in">int</span> i, <span class="hljs-built_in">int</span> j)&#123;    <span class="hljs-keyword">while</span>(i &lt; j)&#123;        swap(s[i++], s[j--]);    &#125;&#125;<span class="hljs-built_in">string</span> reverseLeftWords(<span class="hljs-built_in">string</span> s, <span class="hljs-built_in">int</span> n) &#123;    reverse(s, <span class="hljs-number">0</span>, n<span class="hljs-number">-1</span>);    reverse(s, n, s.size() - <span class="hljs-number">1</span>);    reverse(s, <span class="hljs-number">0</span>, s.size() - <span class="hljs-number">1</span>);    <span class="hljs-keyword">return</span> s;&#125;</code></pre><h6 id="557-åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯-III-https-leetcode-cn-com-problems-reverse-words-in-a-string-iii"><a href="#557-åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯-III-https-leetcode-cn-com-problems-reverse-words-in-a-string-iii" class="headerlink" title="[557] åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ III https://leetcode-cn.com/problems/reverse-words-in-a-string-iii/"></a>[557] åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ III <a href="https://leetcode-cn.com/problems/reverse-words-in-a-string-iii/">https://leetcode-cn.com/problems/reverse-words-in-a-string-iii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reverse</span><span class="hljs-params">(<span class="hljs-built_in">string</span>&amp; a, <span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> end)</span></span>&#123;    <span class="hljs-keyword">while</span>(start &lt; end)&#123;        swap(a[start++], a[end--]);    &#125;&#125;<span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">reverseWords</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.size(); i++)&#123;        <span class="hljs-keyword">while</span>(i &lt; s.size() &amp;&amp; s[i] == <span class="hljs-string">&#x27; &#x27;</span>) i++; <span class="hljs-comment">// æŒ‡å‘éç©º</span>        <span class="hljs-keyword">int</span> j = i+<span class="hljs-number">1</span>;        <span class="hljs-keyword">while</span>(j &lt; s.size() &amp;&amp; s[j] != <span class="hljs-string">&#x27; &#x27;</span>) j++;        reverse(s, i, j<span class="hljs-number">-1</span>);        i = j;    &#125;    <span class="hljs-keyword">return</span> s;&#125;</code></pre><h6 id="lcof-58-ç¿»è½¬å•è¯é¡ºåº-https-leetcode-cn-com-problems-fan-zhuan-dan-ci-shun-xu-lcof"><a href="#lcof-58-ç¿»è½¬å•è¯é¡ºåº-https-leetcode-cn-com-problems-fan-zhuan-dan-ci-shun-xu-lcof" class="headerlink" title="[lcof 58] ç¿»è½¬å•è¯é¡ºåº https://leetcode-cn.com/problems/fan-zhuan-dan-ci-shun-xu-lcof/"></a>[lcof 58] ç¿»è½¬å•è¯é¡ºåº <a href="https://leetcode-cn.com/problems/fan-zhuan-dan-ci-shun-xu-lcof/">https://leetcode-cn.com/problems/fan-zhuan-dan-ci-shun-xu-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// å…¨æ‰‹å†™: æœ‰ç‚¹ç¹ç</span><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">reverseWords</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-comment">// é¢„å¤„ç†: å»é™¤é¦–å°¾å­—ç¬¦</span>    s.erase(<span class="hljs-number">0</span>, s.find_first_not_of(<span class="hljs-string">&quot; &quot;</span>));      s.erase(s.find_last_not_of(<span class="hljs-string">&quot; &quot;</span>) + <span class="hljs-number">1</span>);    <span class="hljs-keyword">if</span>(s.empty()) <span class="hljs-keyword">return</span> s; <span class="hljs-comment">// å¯ä»¥é˜²æ­¢å¤šç©ºæ ¼çš„æƒ…å†µ</span>    <span class="hljs-comment">// å•è¯æ‹†åˆ†</span>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; vec_word;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.size();)&#123;        <span class="hljs-keyword">int</span> j = i + <span class="hljs-number">1</span>;        <span class="hljs-keyword">while</span>(j &lt; s.size() &amp;&amp; s[j] != <span class="hljs-string">&#x27; &#x27;</span>) j++;        vec_word.push_back(s.substr(i, j-i));        <span class="hljs-keyword">while</span>(j &lt; s.size() &amp;&amp; s[j] == <span class="hljs-string">&#x27; &#x27;</span>) j++;        i = j;    &#125;    <span class="hljs-comment">// è¿æ¥</span>    <span class="hljs-built_in">string</span> res;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = vec_word.size()<span class="hljs-number">-1</span>; i &gt; <span class="hljs-number">0</span>; i--)&#123;        res += vec_word[i];        res += <span class="hljs-string">&quot; &quot;</span>;    &#125;    res += vec_word[<span class="hljs-number">0</span>];    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h5 id="é¢˜å‹äº”-å­—ç¬¦ä¸²å’Œæ•°å­—äº¤äº’"><a href="#é¢˜å‹äº”-å­—ç¬¦ä¸²å’Œæ•°å­—äº¤äº’" class="headerlink" title="é¢˜å‹äº”: å­—ç¬¦ä¸²å’Œæ•°å­—äº¤äº’"></a>é¢˜å‹äº”: å­—ç¬¦ä¸²å’Œæ•°å­—äº¤äº’</h5><h6 id="8-å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi-https-leetcode-cn-com-problems-string-to-integer-atoi"><a href="#8-å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi-https-leetcode-cn-com-problems-string-to-integer-atoi" class="headerlink" title="[8] å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi) https://leetcode-cn.com/problems/string-to-integer-atoi/"></a>[8] å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi) <a href="https://leetcode-cn.com/problems/string-to-integer-atoi/">https://leetcode-cn.com/problems/string-to-integer-atoi/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">myAtoi</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(s[pos] == <span class="hljs-string">&#x27; &#x27;</span>) pos++;    <span class="hljs-keyword">int</span> positive = <span class="hljs-literal">true</span>;    <span class="hljs-keyword">if</span>(s[pos] == <span class="hljs-string">&#x27;+&#x27;</span>)&#123;        positive = <span class="hljs-literal">true</span>;        pos++;    &#125;    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s[pos] == <span class="hljs-string">&#x27;-&#x27;</span>)&#123;        positive = <span class="hljs-literal">false</span>;        pos++;    &#125;    <span class="hljs-keyword">long</span> res = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(s[pos]))&#123;        res = res * <span class="hljs-number">10</span> + (s[pos] - <span class="hljs-string">&#x27;0&#x27;</span>);        <span class="hljs-keyword">if</span>(res &gt; INT_MAX || res &lt; INT_MIN) <span class="hljs-keyword">break</span>;        pos++;    &#125;    res = positive ? res : <span class="hljs-number">-1</span> * res;    <span class="hljs-keyword">if</span>(res &gt; INT_MAX) <span class="hljs-keyword">return</span> INT_MAX;    <span class="hljs-keyword">if</span>(res &lt; INT_MIN) <span class="hljs-keyword">return</span> INT_MIN;    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>)res;&#125;</code></pre><h6 id="æ•°ç»„ä¸­é‡å¤çš„æ•°å­—"><a href="#æ•°ç»„ä¸­é‡å¤çš„æ•°å­—" class="headerlink" title="æ•°ç»„ä¸­é‡å¤çš„æ•°å­—"></a>æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findRepeatNumber</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">int</span>&gt; m_set;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums)&#123;        <span class="hljs-keyword">if</span>(m_set.find(n) == m_set.end())            m_set.insert(n);        <span class="hljs-keyword">else</span>            <span class="hljs-keyword">return</span> n;    &#125;     <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h6 id="lcof-66-æ„å»ºä¹˜ç§¯æ•°ç»„-https-leetcode-cn-com-problems-gou-jian-cheng-ji-shu-zu-lcof"><a href="#lcof-66-æ„å»ºä¹˜ç§¯æ•°ç»„-https-leetcode-cn-com-problems-gou-jian-cheng-ji-shu-zu-lcof" class="headerlink" title="[lcof 66] æ„å»ºä¹˜ç§¯æ•°ç»„ https://leetcode-cn.com/problems/gou-jian-cheng-ji-shu-zu-lcof/"></a>[lcof 66] æ„å»ºä¹˜ç§¯æ•°ç»„ <a href="https://leetcode-cn.com/problems/gou-jian-cheng-ji-shu-zu-lcof/">https://leetcode-cn.com/problems/gou-jian-cheng-ji-shu-zu-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">constructArr</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; a)</span> </span>&#123;    <span class="hljs-keyword">if</span>(a.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> &#123;&#125;;    <span class="hljs-keyword">int</span> len = a.size();    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">res</span><span class="hljs-params">(a.size(), a[len<span class="hljs-number">-1</span>])</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = len - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--)        res[i] = res[i+<span class="hljs-number">1</span>] * a[i];    <span class="hljs-keyword">int</span> m = <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;  i &lt; a.size()<span class="hljs-number">-1</span>; i++)&#123;        res[i] = m * res[i+<span class="hljs-number">1</span>];        m *= a[i];    &#125;    res[a.size()<span class="hljs-number">-1</span>] = m;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="415-å­—ç¬¦ä¸²ç›¸åŠ -https-leetcode-cn-com-problems-add-strings-ğŸŒŸğŸŒŸ"><a href="#415-å­—ç¬¦ä¸²ç›¸åŠ -https-leetcode-cn-com-problems-add-strings-ğŸŒŸğŸŒŸ" class="headerlink" title="[415] å­—ç¬¦ä¸²ç›¸åŠ  https://leetcode-cn.com/problems/add-strings/   ğŸŒŸğŸŒŸ"></a>[415] å­—ç¬¦ä¸²ç›¸åŠ  <a href="https://leetcode-cn.com/problems/add-strings/">https://leetcode-cn.com/problems/add-strings/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">addStrings</span><span class="hljs-params">(<span class="hljs-built_in">string</span> num1, <span class="hljs-built_in">string</span> num2)</span> </span>&#123;    reverse(num1.<span class="hljs-built_in">begin</span>(), num1.<span class="hljs-built_in">end</span>());    reverse(num2.<span class="hljs-built_in">begin</span>(), num2.<span class="hljs-built_in">end</span>());    <span class="hljs-built_in">string</span> res = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">int</span> c_in = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(i &lt; num1.<span class="hljs-built_in">size</span>() || i &lt; num2.<span class="hljs-built_in">size</span>())&#123;        <span class="hljs-keyword">int</span> n1 = i &lt; num1.<span class="hljs-built_in">size</span>() ? num1[i] - <span class="hljs-string">&#x27;0&#x27;</span>:<span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> n2 = i &lt; num2.<span class="hljs-built_in">size</span>() ? num2[i] - <span class="hljs-string">&#x27;0&#x27;</span>:<span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> s = n1 + n2 + c_in;        c_in = s / <span class="hljs-number">10</span>;        res = res + to_string(s % <span class="hljs-number">10</span>);        i++;    &#125;    <span class="hljs-keyword">if</span>(c_in) res += to_string(c_in);    reverse(res.<span class="hljs-built_in">begin</span>(), res.<span class="hljs-built_in">end</span>());    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="14-æœ€é•¿å…¬å…±å‰ç¼€-https-leetcode-cn-com-problems-longest-common-prefix"><a href="#14-æœ€é•¿å…¬å…±å‰ç¼€-https-leetcode-cn-com-problems-longest-common-prefix" class="headerlink" title="[14] æœ€é•¿å…¬å…±å‰ç¼€ https://leetcode-cn.com/problems/longest-common-prefix/"></a>[14] æœ€é•¿å…¬å…±å‰ç¼€ <a href="https://leetcode-cn.com/problems/longest-common-prefix/">https://leetcode-cn.com/problems/longest-common-prefix/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">longestCommonPrefix</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; strs)</span> </span>&#123;    <span class="hljs-keyword">if</span>(strs.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">if</span>(strs.size() == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; strs[<span class="hljs-number">0</span>].size(); i++)&#123;        <span class="hljs-keyword">char</span> c = strs[<span class="hljs-number">0</span>][i];        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt; strs.size(); j++)&#123;            <span class="hljs-keyword">if</span>(strs[j].size() &lt; i) <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>].substr(<span class="hljs-number">0</span>, i);            <span class="hljs-keyword">if</span>(strs[j][i] != c) <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>].substr(<span class="hljs-number">0</span>, i);        &#125;    &#125;    <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>];&#125;</code></pre><h6 id="88-åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„-https-leetcode-cn-com-problems-merge-sorted-array-ğŸŒŸğŸŒŸ"><a href="#88-åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„-https-leetcode-cn-com-problems-merge-sorted-array-ğŸŒŸğŸŒŸ" class="headerlink" title="[88] åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ https://leetcode-cn.com/problems/merge-sorted-array/   ğŸŒŸğŸŒŸ"></a>[88] åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ <a href="https://leetcode-cn.com/problems/merge-sorted-array/">https://leetcode-cn.com/problems/merge-sorted-array/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums1, <span class="hljs-keyword">int</span> m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums2, <span class="hljs-keyword">int</span> n)</span> </span>&#123;    nums1.resize(m+n);    <span class="hljs-keyword">int</span> i = m<span class="hljs-number">-1</span>, j = n<span class="hljs-number">-1</span>, k = m+n<span class="hljs-number">-1</span>;    <span class="hljs-keyword">while</span>(i &gt;= <span class="hljs-number">0</span> &amp;&amp; j &gt;= <span class="hljs-number">0</span>)&#123;        <span class="hljs-keyword">if</span>(nums1[i] &lt; nums2[j]) nums1[k--] = nums2[j--];        <span class="hljs-keyword">else</span> nums1[k--] = nums1[i--];    &#125;    <span class="hljs-keyword">while</span>(j &gt;= <span class="hljs-number">0</span>)  nums1[k--] = nums2[j--];&#125;</code></pre><h6 id="217-å­˜åœ¨é‡å¤å…ƒç´ -https-leetcode-cn-com-problems-contains-duplicate"><a href="#217-å­˜åœ¨é‡å¤å…ƒç´ -https-leetcode-cn-com-problems-contains-duplicate" class="headerlink" title="[217] å­˜åœ¨é‡å¤å…ƒç´  https://leetcode-cn.com/problems/contains-duplicate/"></a>[217] å­˜åœ¨é‡å¤å…ƒç´  <a href="https://leetcode-cn.com/problems/contains-duplicate/">https://leetcode-cn.com/problems/contains-duplicate/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">containsDuplicate</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-function"><span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">m_set</span><span class="hljs-params">(nums.begin(), nums.end())</span></span>;    <span class="hljs-keyword">return</span> nums.size() &gt; m_set.size();&#125;</code></pre><h5 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h5><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lengthOfLongestSubstring</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-built_in">map</span>&lt;<span class="hljs-keyword">char</span>, <span class="hljs-keyword">int</span>&gt; m_map;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> max_len = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; s.size(); j++)&#123;        <span class="hljs-keyword">if</span>(m_map.find(s[j]) == m_map.end() || m_map[s[j]] &lt; i )&#123;            max_len = max(max_len, j-i+<span class="hljs-number">1</span>);         &#125;<span class="hljs-keyword">else</span>&#123;            i = m_map[s[j]] + <span class="hljs-number">1</span>;        &#125;        m_map[s[j]] = j;    &#125;    <span class="hljs-keyword">return</span> max_len;&#125;</code></pre><h6 id="31-ä¸‹ä¸€ä¸ªæ’åˆ—-https-leetcode-cn-com-problems-next-permutation"><a href="#31-ä¸‹ä¸€ä¸ªæ’åˆ—-https-leetcode-cn-com-problems-next-permutation" class="headerlink" title="[31] ä¸‹ä¸€ä¸ªæ’åˆ— https://leetcode-cn.com/problems/next-permutation/"></a>[31] ä¸‹ä¸€ä¸ªæ’åˆ— <a href="https://leetcode-cn.com/problems/next-permutation/">https://leetcode-cn.com/problems/next-permutation/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">nextPermutation</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-comment">// 1. å…ˆæ‰¾å‡ºæœ€å¤§çš„ç´¢å¼• k æ»¡è¶³ nums[k] &lt; nums[k+1]ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ç¿»è½¬æ•´ä¸ªæ•°ç»„</span>    <span class="hljs-keyword">int</span> index1 = <span class="hljs-number">-1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = nums.size()<span class="hljs-number">-2</span>; i &gt;= <span class="hljs-number">0</span>; i--)&#123;        <span class="hljs-keyword">if</span>(nums[i] &lt; nums[i+<span class="hljs-number">1</span>])&#123;            index1 = i;            <span class="hljs-keyword">break</span>;        &#125;    &#125;    <span class="hljs-keyword">if</span>(index1 == <span class="hljs-number">-1</span>)&#123;        reverse(nums, <span class="hljs-number">0</span>, nums.size()<span class="hljs-number">-1</span>);        <span class="hljs-keyword">return</span>;    &#125;    <span class="hljs-comment">// 2. å†æ‰¾å‡ºå¦ä¸€ä¸ªæœ€å¤§ç´¢å¼• l æ»¡è¶³ nums[l] &gt; nums[k]ï¼›</span>    <span class="hljs-keyword">int</span> index2 = <span class="hljs-number">-1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = nums.size()<span class="hljs-number">-1</span>; i &gt;= <span class="hljs-number">0</span>; i--)&#123;        <span class="hljs-keyword">if</span>(nums[i] &gt; nums[index1])&#123;            index2 = i;            <span class="hljs-keyword">break</span>;        &#125;    &#125;    <span class="hljs-comment">//  3. äº¤æ¢ nums[l] å’Œ nums[k]ï¼›</span>    swap(nums[index1], nums[index2]);    <span class="hljs-comment">//  4. æœ€åç¿»è½¬ nums[k+1:]ã€‚</span>    reverse(nums, index1+<span class="hljs-number">1</span>, nums.size()<span class="hljs-number">-1</span>); &#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reverse</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &amp; nums, <span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> end)</span></span>&#123;    <span class="hljs-keyword">while</span>(start &lt; end)&#123;        swap(nums[start++], nums[end--]);    &#125;&#125;</code></pre><h6 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-https-leetcode-cn-com-problems-longest-substring-without-repeating-characters-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-https-leetcode-cn-com-problems-longest-substring-without-repeating-characters-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[3] æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/)    ğŸŒŸğŸŒŸğŸŒŸ"></a>[3] æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² <a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/">https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/</a>)    ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lengthOfLongestSubstring</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-comment">// ç”¨ lookup æ¥æ›¿ä»£æ»‘åŠ¨çª—å£ï¼Œ å®ç°é«˜æ•ˆå»é‡æŸ¥è¯¢</span>    <span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-keyword">int</span>&gt; lookup;    <span class="hljs-keyword">int</span> left = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.size(); i++)&#123;        <span class="hljs-keyword">while</span>(lookup.find(s[i]) != lookup.end())&#123;            lookup.erase(s[left]);            left++;        &#125;        res = max(res, i - left + <span class="hljs-number">1</span>);        lookup.insert(s[i]);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h3 id="2-æ ˆã€å †ã€é˜Ÿåˆ—"><a href="#2-æ ˆã€å †ã€é˜Ÿåˆ—" class="headerlink" title="2. æ ˆã€å †ã€é˜Ÿåˆ—"></a>2. æ ˆã€å †ã€é˜Ÿåˆ—</h3><p>å¸¸è§é¢˜ç›®ç±»å‹ï¼š</p><ul><li>è®¾è®¡é¢˜å°±æ˜¯ç”¨æ ˆå®ç°é˜Ÿåˆ—ã€ç”¨é˜Ÿåˆ—å®ç°æ ˆã€è®¾è®¡æœ€å°æ ˆ</li><li>åŸºäºè¿™å‡ ç§æ•°æ®ç»“æ„æ¥å®ç°æŸäº›åŠŸèƒ½ï¼Œ æ¯”å¦‚æ•°æ®æµçš„ä¸­ä½æ•°ã€æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ã€ç¬¬kä¸ªæœ€å¤§å€¼</li><li>å•è°ƒæ ˆ(é˜Ÿåˆ—)çš„åº”ç”¨ï¼š æ¯”å¦‚æ¥é›¨æ°´ã€ç›´æ–¹å›¾ä¸­çš„æœ€å¤§çŸ©å½¢</li></ul><h4 id="1-å¸¸è§æŠ€å·§æ€»ç»“"><a href="#1-å¸¸è§æŠ€å·§æ€»ç»“" class="headerlink" title="(1) å¸¸è§æŠ€å·§æ€»ç»“"></a>(1) å¸¸è§æŠ€å·§æ€»ç»“</h4><ul><li>ä¸è¦å¯¹ç©ºå®¹å™¨(æ ˆã€å †ã€é˜Ÿåˆ—è¿›è¡Œæ“ä½œ)</li><li>å•è°ƒæ ˆ/é˜Ÿåˆ—çš„åº”ç”¨æ˜¯ä¸€ä¸ªæŒºé‡è¦çš„ç‚¹ã€‚</li><li>æœ‰æ—¶å…¥æ ˆçš„å…ƒç´ æ—¶ä¸‹æ ‡ indexï¼Œ è€Œä¸æ˜¯ valueï¼Œè¿™æ ·æ›´æ–¹ä¾¿æ“ä½œã€‚å› ä¸ºæ•°ç»„å¯ä»¥ç›´æ¥æŒ‰ç…§ä¸‹æ ‡è¿›è¡Œç´¢å¼•ã€‚</li></ul><p><strong>æ ˆ : å…ˆè¿›åå‡º</strong></p><pre><code class="hljs c++"><span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; m_stack;   m_stack.size()    m_stack.empty()    m_stack.push()    m_stack.pop()    m_stack.top()</code></pre><p><strong>é˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆå‡º</strong></p><pre><code class="hljs cpp"><span class="hljs-built_in">queue</span>&lt;<span class="hljs-keyword">int</span>&gt; m_queue;   m_queue.size()    m_queue.empty()   m_queue.push()    m_queue.pop()    m_queue.front()</code></pre><p><strong>åŒç«¯é˜Ÿåˆ—</strong></p><pre><code class="hljs cpp"><span class="hljs-built_in">deque</span>&lt;<span class="hljs-keyword">int</span>&gt; m_deque;    m_deque.size()    m_deque.empty()   m_deque.front()    m_deque.back()m_deque.push_back()   m_deque.pop_back()    m_deque.push_front()   m_deque.pop_front()</code></pre><p><strong>ä¼˜å…ˆé˜Ÿåˆ—</strong></p><p>å®ç°ï¼šäºŒå‰å †ï¼Œ æœ€å¤§(å°)å€¼ å…ˆå‡ºçš„å®Œå…¨äºŒå‰æ ‘</p><pre><code class="hljs cpp"><span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>&gt; max_heap;              <span class="hljs-comment">// é»˜è®¤æ„é€ æœ€å¤§å †</span><span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, less&lt;<span class="hljs-keyword">int</span>&gt; &gt; max_heap;     <span class="hljs-comment">// æ„é€ æœ€å¤§å †:less -&gt; max_heap</span><span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, greater&lt;<span class="hljs-keyword">int</span>&gt; &gt; min_heap;   <span class="hljs-comment">// æ„é€ æœ€å°å †:greater -&gt; min_heap</span>max_heap.size()    max_heap.empty()     max_heap.push()      max_heap.pop()     max_heap.top()  <span class="hljs-comment">// è™½ç„¶å®ƒæ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä½†æ˜¯è¿™é‡Œå»å…ƒç´ ä¸æ˜¯ front æ–¹æ³•, è€Œæ˜¯ top æ–¹æ³•: è¿”å›å †é¡¶</span></code></pre><h4 id="2-å…¸å‹ä¾‹é¢˜"><a href="#2-å…¸å‹ä¾‹é¢˜" class="headerlink" title="(2) å…¸å‹ä¾‹é¢˜"></a>(2) å…¸å‹ä¾‹é¢˜</h4><h5 id="ç±»å‹ä¸€-å¸¸è§„é¢˜ç›®"><a href="#ç±»å‹ä¸€-å¸¸è§„é¢˜ç›®" class="headerlink" title="ç±»å‹ä¸€: å¸¸è§„é¢˜ç›®"></a>ç±»å‹ä¸€: å¸¸è§„é¢˜ç›®</h5><h6 id="155-https-leetcode-cn-com-problems-min-stack-ğŸŒŸğŸŒŸ"><a href="#155-https-leetcode-cn-com-problems-min-stack-ğŸŒŸğŸŒŸ" class="headerlink" title="[155] https://leetcode-cn.com/problems/min-stack/   ğŸŒŸğŸŒŸ"></a>[155] <a href="https://leetcode-cn.com/problems/min-stack/">https://leetcode-cn.com/problems/min-stack/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// è§£é¢˜æ€è·¯:</span><span class="hljs-comment">// ä½¿ç”¨è¾…åŠ©æ ˆè®°å½•æ ˆçš„æœ€å°å€¼</span><span class="hljs-comment">// å½“æ·»åŠ å…ƒç´ æ—¶ï¼Œ å°†å¾…æ·»åŠ å…ƒç´ ä¸è¾…åŠ©æ ˆæ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒ</span><span class="hljs-comment">//     å½“æ ˆé¡¶å…ƒç´ å°äºå¾…æ·»åŠ å…ƒç´  -&gt; è¾…åŠ©æ ˆæ·»åŠ æ ˆé¡¶å…ƒç´ </span><span class="hljs-comment">//     å½“æ ˆé¡¶å…ƒç´ å¤§äºå¾…æ·»åŠ å…ƒç´  -&gt; è¾…åŠ©æ ˆæ·»åŠ å¾…æ·»åŠ å…ƒç´ </span><span class="hljs-comment">// !! é¢˜ç›®é»˜è®¤å„ç§æ“ä½œåˆæ³•:å³ä¸å›å¯¹ç©ºæ ˆè¿›è¡Œtopã€minå’Œ pop æ“ä½œï¼Œæ‰€ä»¥ä»£ç ä¸­æ²¡æœ‰è¿›è¡Œç›¸å…³åˆ¤å®š</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinStack</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-comment">/** initialize your data structure here. */</span>    MinStack() &#123;    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;        m_stk.push(x);        <span class="hljs-keyword">if</span>(min_stk.empty())   min_stk.push(x);        <span class="hljs-keyword">else</span> min_stk.push(<span class="hljs-built_in">std</span>::min(min_stk.top(), x));    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;        m_stk.pop();        min_stk.pop();    &#125;        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">top</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> m_stk.top();    &#125;        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">min</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> min_stk.top();    &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; min_stk;    <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; m_stk;&#125;;</code></pre><h6 id="232-https-leetcode-com-problems-implement-queue-using-stacks-ğŸŒŸğŸŒŸ"><a href="#232-https-leetcode-com-problems-implement-queue-using-stacks-ğŸŒŸğŸŒŸ" class="headerlink" title="[232] https://leetcode.com/problems/implement-queue-using-stacks/  ğŸŒŸğŸŒŸ"></a>[232] <a href="https://leetcode.com/problems/implement-queue-using-stacks/">https://leetcode.com/problems/implement-queue-using-stacks/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// è§£é¢˜æ€è·¯:</span><span class="hljs-comment">// (1) ç”³è¯·ä¸¤ä¸ªæ ˆ data_stack å’Œ m_stack</span><span class="hljs-comment">// (2) å½“å…¥é˜Ÿ(æ·»åŠ æ•°æ®)æ—¶, æ‰§è¡Œå¦‚ä¸‹ä¸‰ä¸ªæ­¥éª¤</span><span class="hljs-comment">//      - å°† data_stack ä¸­çš„æ•°æ®é€ä¸ª æ”¾åˆ° m_stack ä¸­</span><span class="hljs-comment">//      - å°† value æ·»åŠ åˆ° m_stack ä¸­</span><span class="hljs-comment">//      - å°† m_stack ä¸­çš„æ•°æ® é€ä¸ªæ”¾å…¥åˆ° data_stack ä¸­ </span><span class="hljs-comment">// (3) å½“å‡ºé˜Ÿ(åˆ é™¤æ•°æ®)æ—¶ï¼Œ ç›´æ¥å¼¹å‡º data_stack æ ˆé¡¶æ•°æ®å³å¯    </span><span class="hljs-keyword">private</span>:    <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; data_stack;    <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; m_stack;<span class="hljs-keyword">public</span>:    CQueue() &#123;    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">appendTail</span><span class="hljs-params">(<span class="hljs-keyword">int</span> value)</span> </span>&#123;        <span class="hljs-keyword">while</span>(!data_stack.empty())&#123;            m_stack.push(data_stack.top());            data_stack.pop();        &#125;        data_stack.push(value);        <span class="hljs-keyword">while</span>(!m_stack.empty())&#123;            data_stack.push(m_stack.top());            m_stack.pop();        &#125;    &#125;        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteHead</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">if</span>(data_stack.empty()) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶!  æ ˆç©º!</span>              <span class="hljs-keyword">int</span> x = data_stack.top();        data_stack.pop();        <span class="hljs-keyword">return</span> x;    &#125;</code></pre><h6 id="225-ç”¨é˜Ÿåˆ—å®ç°æ ˆ-https-leetcode-cn-com-problems-implement-stack-using-queues-ğŸŒŸğŸŒŸ"><a href="#225-ç”¨é˜Ÿåˆ—å®ç°æ ˆ-https-leetcode-cn-com-problems-implement-stack-using-queues-ğŸŒŸğŸŒŸ" class="headerlink" title="[225] ç”¨é˜Ÿåˆ—å®ç°æ ˆ https://leetcode-cn.com/problems/implement-stack-using-queues/  ğŸŒŸğŸŒŸ"></a>[225] ç”¨é˜Ÿåˆ—å®ç°æ ˆ <a href="https://leetcode-cn.com/problems/implement-stack-using-queues/">https://leetcode-cn.com/problems/implement-stack-using-queues/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">/** Initialize your data structure here. */</span>MyStack() &#123;&#125;<span class="hljs-comment">/** Push element x onto stack. */</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;    <span class="hljs-keyword">if</span>(data_queue.empty()) data_queue.push(x);    <span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">while</span>(!data_queue.empty())&#123;            temp_queue.push(data_queue.front());            data_queue.pop();        &#125;        data_queue.push(x);        <span class="hljs-keyword">while</span>(!temp_queue.empty())&#123;            data_queue.push(temp_queue.front());            temp_queue.pop();        &#125;    &#125;&#125;<span class="hljs-comment">/** Removes the element on top of the stack and returns that element. */</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">int</span> x = data_queue.front();    data_queue.pop();    <span class="hljs-keyword">return</span> x;&#125;<span class="hljs-comment">/** Get the top element. */</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">top</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> data_queue.front();&#125;<span class="hljs-comment">/** Returns whether the stack is empty. */</span><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> data_queue.empty();&#125;<span class="hljs-keyword">private</span>:<span class="hljs-built_in">queue</span>&lt;<span class="hljs-keyword">int</span>&gt; data_queue;<span class="hljs-built_in">queue</span>&lt;<span class="hljs-keyword">int</span>&gt; temp_queue;</code></pre><h6 id="946-https-leetcode-cn-com-problems-validate-stack-sequences"><a href="#946-https-leetcode-cn-com-problems-validate-stack-sequences" class="headerlink" title="[946] https://leetcode-cn.com/problems/validate-stack-sequences/"></a>[946] <a href="https://leetcode-cn.com/problems/validate-stack-sequences/">https://leetcode-cn.com/problems/validate-stack-sequences/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">validateStackSequences</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; pushed, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; popped)</span> </span>&#123;    <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; m_stk;    <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;  i &lt; pushed.size(); i++)&#123;        m_stk.push(pushed[i]);        <span class="hljs-keyword">while</span>(!m_stk.empty() &amp;&amp; m_stk.top() == popped[j])&#123;            j++;            m_stk.pop();        &#125;    &#125;    <span class="hljs-keyword">return</span> m_stk.empty();&#125;</code></pre><h5 id="ç±»å‹äºŒï¼š-åˆ©ç”¨å®¹å™¨å®ç°æŸç§åŠŸèƒ½"><a href="#ç±»å‹äºŒï¼š-åˆ©ç”¨å®¹å™¨å®ç°æŸç§åŠŸèƒ½" class="headerlink" title="ç±»å‹äºŒï¼š åˆ©ç”¨å®¹å™¨å®ç°æŸç§åŠŸèƒ½"></a>ç±»å‹äºŒï¼š åˆ©ç”¨å®¹å™¨å®ç°æŸç§åŠŸèƒ½</h5><h6 id="215-https-leetcode-cn-com-problems-kth-largest-element-in-an-array"><a href="#215-https-leetcode-cn-com-problems-kth-largest-element-in-an-array" class="headerlink" title="[215] https://leetcode-cn.com/problems/kth-largest-element-in-an-array/"></a>[215] <a href="https://leetcode-cn.com/problems/kth-largest-element-in-an-array/">https://leetcode-cn.com/problems/kth-largest-element-in-an-array/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// æŸ¥æ‰¾æœ€å¤§ k ä¸ªå€¼ï¼š ç”¨æœ€å°å †, å£°æ˜çš„ç¬¬ä¸‰ä¸ªç±»å‹æ˜¯ greater&lt;int&gt;</span><span class="hljs-comment">// æŸ¥æ‰¾æœ€å° k ä¸ªå€¼ï¼š ç”¨æœ€å¤§å †, å£°æ˜çš„ç¬¬ä¸‰ä¸ªç±»å‹æ˜¯ less &lt;int&gt;</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">findKthLargest</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, greater&lt;<span class="hljs-keyword">int</span>&gt; &gt; min_heap;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">if</span>(i &lt; k) min_heap.push(nums[i]);        <span class="hljs-keyword">else</span>&#123;            <span class="hljs-keyword">if</span>(nums[i] &gt; min_heap.top())&#123;                min_heap.pop();                min_heap.push(nums[i]);            &#125;        &#125;    &#125;    <span class="hljs-keyword">return</span> min_heap.top();&#125;</code></pre><h6 id="lcci-17-14-æœ€å°Kä¸ªæ•°-https-leetcode-cn-com-problems-smallest-k-lcci-ğŸŒŸğŸŒŸ"><a href="#lcci-17-14-æœ€å°Kä¸ªæ•°-https-leetcode-cn-com-problems-smallest-k-lcci-ğŸŒŸğŸŒŸ" class="headerlink" title="[lcci 17.14] æœ€å°Kä¸ªæ•° https://leetcode-cn.com/problems/smallest-k-lcci/     ğŸŒŸğŸŒŸ"></a>[lcci 17.14] æœ€å°Kä¸ªæ•° <a href="https://leetcode-cn.com/problems/smallest-k-lcci/">https://leetcode-cn.com/problems/smallest-k-lcci/</a>     ğŸŒŸğŸŒŸ</h6><p>ç±»é¢˜ : 347  Top K Frequent Elements   â€”&gt; å¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨è§£å†³</p><pre><code class="hljs cpp"><span class="hljs-comment">// å’Œ leetcode 215 å‡ ä¹ä¸€æ ·, æœ€å°å€¼ï¼Œ ç”¨æœ€å¤§å †!!</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">smallestK</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; arr, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">if</span>(arr.size() == <span class="hljs-number">0</span> || k == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-keyword">int</span>&gt; max_heap;   <span class="hljs-comment">// æœ€å¤§å †</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.size(); i++)&#123;        <span class="hljs-keyword">if</span>(i &lt; k) max_heap.push(arr[i]);        <span class="hljs-keyword">else</span>&#123;            <span class="hljs-keyword">if</span>(arr[i] &lt; max_heap.top())&#123;                max_heap.pop();                max_heap.push(arr[i]);            &#125;        &#125;    &#125;    <span class="hljs-keyword">while</span>(!max_heap.empty())&#123;        res.push_back(max_heap.top());        max_heap.pop();    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="259-https-leetcode-cn-com-problems-find-median-from-data-stream-ğŸŒŸğŸŒŸ"><a href="#259-https-leetcode-cn-com-problems-find-median-from-data-stream-ğŸŒŸğŸŒŸ" class="headerlink" title="[259] https://leetcode-cn.com/problems/find-median-from-data-stream/  ğŸŒŸğŸŒŸ"></a>[259] <a href="https://leetcode-cn.com/problems/find-median-from-data-stream/">https://leetcode-cn.com/problems/find-median-from-data-stream/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// ï¼ éå¸¸ç»å…¸çš„ä¸€é“é¢˜ç›®ï¼Œ å€ŸåŠ©æ•°æ®ç»“æ„ï¼Œé™ä½ç®—æ³•å¤æ‚åº¦</span><span class="hljs-keyword">public</span>:    <span class="hljs-comment">/** initialize your data structure here. */</span>    MedianFinder() &#123;    &#125;        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addNum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> </span>&#123;        <span class="hljs-comment">// ç¡®ä¿åŠ å…¥ä¹‹åï¼Œæœ€å¤§å †çš„å…ƒç´ å€¼éƒ½æ˜¯å°äºæœ€å°å †çš„  </span>        max_heap.push(num);        min_heap.push(max_heap.top());        max_heap.pop();              <span class="hljs-comment">// å¹³è¡¡ä¸¤ä¸ªå †å¾—å…ƒç´ ä¸ªæ•°</span>        <span class="hljs-keyword">while</span>(min_heap.size() &gt; max_heap.size())&#123;            max_heap.push(min_heap.top());            min_heap.pop();        &#125;    &#125;        <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">findMedian</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> max_heap.size() &gt; min_heap.size() ? <span class="hljs-keyword">double</span>(max_heap.top())                                                   : (max_heap.top() + min_heap.top()) * <span class="hljs-number">0.5</span>;    &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-comment">// ä¿æŒå¤§é¡¶å †çš„å…ƒç´ æ•°ç›®å¤§äºå°é¡¶å †å¾—å…ƒç´ æ•°ç›®</span>    <span class="hljs-built_in">priority_queue</span> &lt;<span class="hljs-keyword">int</span>&gt; max_heap; <span class="hljs-comment">// å¤§é¡¶å †</span>    <span class="hljs-built_in">priority_queue</span> &lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, greater&lt;<span class="hljs-keyword">int</span>&gt; &gt; min_heap; <span class="hljs-comment">// å°é¡¶å †</span></code></pre><h5 id="ç±»å‹ä¸‰ï¼š-å•è°ƒæ ˆ-é˜Ÿåˆ—"><a href="#ç±»å‹ä¸‰ï¼š-å•è°ƒæ ˆ-é˜Ÿåˆ—" class="headerlink" title="ç±»å‹ä¸‰ï¼š å•è°ƒæ ˆ/é˜Ÿåˆ—"></a>ç±»å‹ä¸‰ï¼š å•è°ƒæ ˆ/é˜Ÿåˆ—</h5><h6 id="lcof-59-https-leetcode-cn-com-problems-dui-lie-de-zui-da-zhi-lcof"><a href="#lcof-59-https-leetcode-cn-com-problems-dui-lie-de-zui-da-zhi-lcof" class="headerlink" title="[lcof 59] https://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcof/"></a>[lcof 59] <a href="https://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcof/">https://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// ! ä½¿ç”¨å•è°ƒçš„åŒå‘é˜Ÿåˆ—</span><span class="hljs-keyword">public</span>:    MaxQueue() &#123;    &#125;        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">max_value</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">if</span>(max_deq.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        <span class="hljs-keyword">return</span> max_deq.front();    &#125;         <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-keyword">int</span> value)</span> </span>&#123;        data.push(value);        <span class="hljs-keyword">while</span>(max_deq.size() &amp;&amp; max_deq.back() &lt; value)            max_deq.pop_back();        max_deq.push_back(value);    &#125;        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">pop_front</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">if</span>(data.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;        <span class="hljs-keyword">int</span> n = data.front();           data.pop();        <span class="hljs-keyword">if</span>(max_deq.size() &amp;&amp; max_deq.front() == n)            max_deq.pop_front();        <span class="hljs-keyword">return</span> n;    &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-built_in">queue</span>&lt;<span class="hljs-keyword">int</span>&gt; data;    <span class="hljs-built_in">deque</span>&lt;<span class="hljs-keyword">int</span>&gt; max_deq;</code></pre><h6 id="739-https-leetcode-cn-com-problems-daily-temperatures"><a href="#739-https-leetcode-cn-com-problems-daily-temperatures" class="headerlink" title="[739] https://leetcode-cn.com/problems/daily-temperatures/"></a>[739] <a href="https://leetcode-cn.com/problems/daily-temperatures/">https://leetcode-cn.com/problems/daily-temperatures/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dailyTemperatures</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; T)</span> </span>&#123;    <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; m_stk;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">m_vec</span><span class="hljs-params">(T.size(), <span class="hljs-number">0</span>)</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; T.size(); i++)&#123;        <span class="hljs-keyword">if</span>(m_stk.empty()) m_stk.push(i);        <span class="hljs-keyword">else</span>&#123;            <span class="hljs-keyword">while</span>(!m_stk.empty() &amp;&amp; T[i] &gt; T[m_stk.top()])&#123;                m_vec[m_stk.top()] = i - m_stk.top();                m_stk.pop();            &#125;            m_stk.push(i);        &#125;    &#125;      <span class="hljs-keyword">while</span>(!m_stk.empty())&#123;       <span class="hljs-comment">// å…¶å®è¿™å‡ è¡Œä¸éœ€è¦ï¼Œ åˆå§‹åŒ–å°±æ˜¯ 0</span>        m_vec[m_stk.top()] = <span class="hljs-number">0</span>;        m_stk.pop();    &#125;    <span class="hljs-keyword">return</span> m_vec;&#125;</code></pre><h6 id="239-https-leetcode-cn-com-problems-sliding-window-maximum-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#239-https-leetcode-cn-com-problems-sliding-window-maximum-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[239] https://leetcode-cn.com/problems/sliding-window-maximum/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[239] <a href="https://leetcode-cn.com/problems/sliding-window-maximum/">https://leetcode-cn.com/problems/sliding-window-maximum/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// ! ä½¿ç”¨äº†å•è°ƒåŒå‘é˜Ÿåˆ—: è¿™æ˜¯ç»å¸¸è€ƒæŸ¥çš„é‡ç‚¹</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">maxSlidingWindow</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-built_in">deque</span>&lt;<span class="hljs-keyword">int</span>&gt; m_deque;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">while</span>(!m_deque.empty() &amp;&amp; nums[i] &gt; nums[m_deque.back()])&#123;            m_deque.pop_back();        &#125;        m_deque.push_back(i);    <span class="hljs-comment">// è¿™é‡Œè¿›å…¥é˜Ÿåˆ—çš„æ˜¯ indexï¼Œ è€Œä¸æ˜¯ value</span>        <span class="hljs-keyword">if</span>(i - m_deque.front() &gt;= k) m_deque.pop_front();        <span class="hljs-comment">// å¼€å§‹æ·»åŠ !</span>        <span class="hljs-keyword">if</span>(i &gt;= k<span class="hljs-number">-1</span>) res.push_back(nums[m_deque.front()]);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="42-æ¥é›¨æ°´-https-leetcode-cn-com-problems-trapping-rain-water-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#42-æ¥é›¨æ°´-https-leetcode-cn-com-problems-trapping-rain-water-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[42] æ¥é›¨æ°´ https://leetcode-cn.com/problems/trapping-rain-water/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[42] æ¥é›¨æ°´ <a href="https://leetcode-cn.com/problems/trapping-rain-water/">https://leetcode-cn.com/problems/trapping-rain-water/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">trap</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; height)</span> </span>&#123;    <span class="hljs-keyword">if</span>(height.size() &lt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    <span class="hljs-comment">// é¦–å…ˆæ‰¾åˆ°æœ€é«˜çš„å€¼çš„ä¸‹æ ‡</span>    <span class="hljs-keyword">int</span> max_ind = max_element(height.begin(), height.end()) - height.begin();    <span class="hljs-comment">// ä»å·¦å‘å³å¼€å§‹éå†ï¼šå¦‚æœå½“å‰å€¼æ¯”(ä¹‹å‰çš„æœ€å¤§å€¼)çš„å°ï¼Œé‚£ä¹ˆå¯ä»¥ç§¯é›¨æ°´ï¼› å¦åˆ™æ›´æ–°å½“å‰å€¼</span>    <span class="hljs-keyword">int</span> cur = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; max_ind; i++)&#123;        <span class="hljs-keyword">if</span>(height[i] &lt; height[cur])  res += (height[cur] - height[i]);        <span class="hljs-keyword">else</span> cur = i;    &#125;    <span class="hljs-comment">// ä»å³å‘å·¦å¼€å§‹éå†</span>    cur = height.size() - <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = cur - <span class="hljs-number">1</span>; i &gt; max_ind; i--)&#123;        <span class="hljs-keyword">if</span>(height[i] &lt; height[cur]) res += (height[cur] - height[i]);        <span class="hljs-keyword">else</span> cur = i;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="84-Largest-Rectangle-in-Histogram-https-leetcode-com-problems-largest-rectangle-in-histogram-description-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#84-Largest-Rectangle-in-Histogram-https-leetcode-com-problems-largest-rectangle-in-histogram-description-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[84] Largest Rectangle in Histogram https://leetcode.com/problems/largest-rectangle-in-histogram/description/  ğŸŒŸğŸŒŸğŸŒŸ"></a>[84] Largest Rectangle in Histogram <a href="https://leetcode.com/problems/largest-rectangle-in-histogram/description/">https://leetcode.com/problems/largest-rectangle-in-histogram/description/</a>  ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">largestRectangleArea</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; heights)</span> </span>&#123;    <span class="hljs-keyword">int</span> cur_area = <span class="hljs-number">0</span>;    <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; m_stk;    <span class="hljs-comment">// (1) è®©æœ€åçš„æ ˆå†…å…ƒç´ éƒ½å¯ä»¥å¼¹å‡º !</span>    heights.push_back(<span class="hljs-number">0</span>);     <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;  i &lt; heights.size(); i++)&#123;        <span class="hljs-comment">// (1) å½“å½“å‰çš„å€¼æ¯”æ ˆé¡¶å…ƒç´ å°çš„æ—¶å€™ï¼Œ å¯ä»¥è®¡ç®—ä»¥æ ˆé¡¶å…ƒç´ ä¸ºé«˜çš„æœ€å¤§çŸ©å½¢çš„é•¿åº¦</span>        <span class="hljs-keyword">while</span>(!m_stk.empty() &amp;&amp; heights[i] &lt; heights[m_stk.top()])&#123;            <span class="hljs-keyword">int</span> height = heights[m_stk.top()];  <span class="hljs-comment">// é«˜</span>            m_stk.pop();            <span class="hljs-comment">// å½“å‰çš„å…ƒç´  å’Œ å¼¹å‡ºå…ƒç´ åçš„æ ˆé¡¶ å·®å€¼ä¸º å®½</span>            <span class="hljs-comment">// æ³¨æ„! å¼¹å‡ºåå¯èƒ½æ ˆä¸ºç©º</span>            <span class="hljs-keyword">int</span> width = m_stk.empty() ? i : i - m_stk.top() - <span class="hljs-number">1</span>;             cur_area = max(height * width, cur_area);        &#125;        m_stk.push(i);    &#125;    <span class="hljs-keyword">return</span> cur_area;&#125;<span class="hljs-comment">// æœ€å¤§çŸ©å½¢</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maximalRectangle</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt;&gt;&amp; matrix)</span> </span>&#123;    <span class="hljs-keyword">if</span>(matrix.size() == <span class="hljs-number">0</span> || matrix[<span class="hljs-number">0</span>].size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> n = matrix[<span class="hljs-number">0</span>].size();      <span class="hljs-keyword">int</span> max_area = <span class="hljs-number">0</span>;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">heights</span><span class="hljs-params">(n, <span class="hljs-number">0</span>)</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; matrix.size(); i++)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; matrix[<span class="hljs-number">0</span>].size(); j++)&#123;            <span class="hljs-keyword">if</span>(matrix[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>) heights[j]++;            <span class="hljs-keyword">else</span> heights[j] = <span class="hljs-number">0</span>;        &#125;        max_area = max(largestRectangleArea(heights), max_area);    &#125;    <span class="hljs-keyword">return</span> max_area;&#125;</code></pre><h3 id="3-é“¾è¡¨"><a href="#3-é“¾è¡¨" class="headerlink" title="3. é“¾è¡¨"></a>3. é“¾è¡¨</h3><p><img src="/2020/02/03/leetcode-ds/linklist.png" style="zoom:50%;"></p><h4 id="1-å¸¸ç”¨æŠ€å·§æ€»ç»“"><a href="#1-å¸¸ç”¨æŠ€å·§æ€»ç»“" class="headerlink" title="(1) å¸¸ç”¨æŠ€å·§æ€»ç»“"></a>(1) å¸¸ç”¨æŠ€å·§æ€»ç»“</h4><ul><li><p>æ·»åŠ å“‘èŠ‚ç‚¹</p><pre><code class="hljs c++"><span class="hljs-comment">// å»ºç«‹</span>ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);dummy -&gt; next = head;<span class="hljs-comment">// é‡Šæ”¾:</span>ListNode * res = dummy -&gt; next;<span class="hljs-keyword">delete</span> dummy;<span class="hljs-keyword">return</span> res;</code></pre></li><li><p>å¤´æŒ‡é’ˆä¸€èˆ¬ä¸å¯ä»¥éšæ„æ”¹å˜ï¼Œ å¯ä»¥ç”³è¯·ä¸€ä¸ªæŒ‡å‘å¤´æŒ‡é’ˆçš„æŒ‡é’ˆ</p><pre><code class="hljs abnf">ListNode * p = head<span class="hljs-comment">;</span></code></pre></li><li><p>ä¸è¦è®©é“¾è¡¨æ–­å¼€äº†ï¼Œ é€‚å½“çš„åœ¨çº¸ä¸Šæ¨¡æ‹Ÿä¸€ä¸‹å¯¹åº”çš„é“¾è¡¨æŒ‡å‘æ“ä½œã€‚</p></li><li><p>æ³¨æ„ä¸€ä¸‹å¸¸è§çš„è¾¹ç•Œæ¡ä»¶ï¼šå¤´ç»“ç‚¹ å’Œ å°¾ç»“ç‚¹ï¼Œ é“¾è¡¨ä¸ºç©ºï¼Œ åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p></li><li><p>ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆã€å»ºç«‹ä¸€ä¸ª Node2index çš„ æ˜ å°„</p></li><li><p>æ³¨æ„äº›å°ç»†èŠ‚ï¼šåˆ é™¤èŠ‚ç‚¹çš„é‡Šæ”¾ï¼Œæœ«å°¾æŒ‡é’ˆä¸è¦ä¹±æŒ‡</p></li></ul><h4 id="2-å…¸å‹ä¾‹é¢˜-1"><a href="#2-å…¸å‹ä¾‹é¢˜-1" class="headerlink" title="(2) å…¸å‹ä¾‹é¢˜"></a>(2) å…¸å‹ä¾‹é¢˜</h4><h5 id="â‘ -æ€§è´¨åˆ¤å®š"><a href="#â‘ -æ€§è´¨åˆ¤å®š" class="headerlink" title="â‘  æ€§è´¨åˆ¤å®š"></a>â‘  æ€§è´¨åˆ¤å®š</h5><h6 id="141-https-leetcode-com-problems-linked-list-cycle-ğŸŒŸğŸŒŸ"><a href="#141-https-leetcode-com-problems-linked-list-cycle-ğŸŒŸğŸŒŸ" class="headerlink" title="[141] https://leetcode.com/problems/linked-list-cycle/  ğŸŒŸğŸŒŸ"></a>[141] <a href="https://leetcode.com/problems/linked-list-cycle/">https://leetcode.com/problems/linked-list-cycle/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">hasCycle</span><span class="hljs-params">(ListNode *head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    ListNode * slow = head;  <span class="hljs-comment">// (1) ä¸¤ä¸ªèŠ‚ç‚¹åˆå§‹æ—¶å€™å‡æŒ‡å‘ head</span>    ListNode * fast = head;    <span class="hljs-keyword">while</span>(fast &amp;&amp; fast -&gt; next)&#123;        <span class="hljs-comment">// (2) å…ˆç§»åŠ¨ï¼Œ å†åˆ¤æ–­</span>        slow = slow -&gt; next;        fast = fast -&gt; next -&gt; next;        <span class="hljs-keyword">if</span>(slow == fast) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;</code></pre><h6 id="142-https-leetcode-cn-com-problems-linked-list-cycle-ii-ğŸŒŸğŸŒŸ"><a href="#142-https-leetcode-cn-com-problems-linked-list-cycle-ii-ğŸŒŸğŸŒŸ" class="headerlink" title="[142] https://leetcode-cn.com/problems/linked-list-cycle-ii/    ğŸŒŸğŸŒŸ"></a>[142] <a href="https://leetcode-cn.com/problems/linked-list-cycle-ii/">https://leetcode-cn.com/problems/linked-list-cycle-ii/</a>    ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode *<span class="hljs-title">detectCycle</span><span class="hljs-params">(ListNode *head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;    ListNode * slow = head;     ListNode * fast = head;    <span class="hljs-keyword">while</span>(fast &amp;&amp; fast -&gt; next)&#123;        slow = slow -&gt; next;        fast = fast -&gt; next -&gt; next;        <span class="hljs-keyword">if</span>(fast == slow) <span class="hljs-keyword">break</span>;    &#125;    <span class="hljs-keyword">if</span>(fast == <span class="hljs-literal">NULL</span> || fast -&gt; next == <span class="hljs-literal">NULL</span>)        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;      <span class="hljs-comment">// (3) ä¸€ä¸ªæŒ‡é’ˆä»ç›¸é‡èŠ‚ç‚¹å¼€å§‹ï¼Œ å¦ä¸€ä¸ªæŒ‡é’ˆä»å¤´å¼€å§‹ï¼Œä¸¤è€…å¦‚æœç›¸é‡</span>    <span class="hljs-comment">// åˆ™è¯¥èŠ‚ç‚¹å³ä¸ºå…¥ç¯èŠ‚ç‚¹</span>    slow = head;    <span class="hljs-keyword">while</span>(slow != fast)&#123;        slow = slow -&gt; next;        fast = fast -&gt; next;    &#125;    <span class="hljs-keyword">return</span> fast;  &#125;</code></pre><h6 id="234-https-leetcode-cn-com-problems-palindrome-linked-list"><a href="#234-https-leetcode-cn-com-problems-palindrome-linked-list" class="headerlink" title="[234] https://leetcode-cn.com/problems/palindrome-linked-list/"></a>[234] <a href="https://leetcode-cn.com/problems/palindrome-linked-list/">https://leetcode-cn.com/problems/palindrome-linked-list/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode * <span class="hljs-title">reverseLinkList</span><span class="hljs-params">(ListNode * head)</span></span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;    ListNode * prev = <span class="hljs-literal">NULL</span>;    ListNode * cur = head;    <span class="hljs-keyword">while</span>(cur)&#123;        ListNode * next = cur -&gt; next;        cur -&gt; next = prev;        prev = cur;        cur = next;    &#125;    <span class="hljs-keyword">return</span> prev;&#125;<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPalindrome</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    <span class="hljs-comment">// (1) æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹</span>    ListNode * p = head;     <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(p)&#123;        cnt += <span class="hljs-number">1</span>;        p = p -&gt; next;    &#125;    cnt /= <span class="hljs-number">2</span>;    p = head;    <span class="hljs-keyword">while</span>(cnt--)  p = p -&gt; next;         <span class="hljs-comment">// (2) ç¿»è½¬ååŠéƒ¨åˆ†</span>    ListNode * q = reverseLinkList(p);       <span class="hljs-comment">// (3) åˆ¤æ–­æ˜¯å¦ç›¸ç­‰</span>    <span class="hljs-keyword">while</span>(q &amp;&amp; head)&#123;         <span class="hljs-keyword">if</span>(head -&gt; val != q -&gt; val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;        q = q -&gt; next;        head = head -&gt; next;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;</code></pre><h5 id="â‘¡è·å–æŒ‡å®šèŠ‚ç‚¹"><a href="#â‘¡è·å–æŒ‡å®šèŠ‚ç‚¹" class="headerlink" title="â‘¡è·å–æŒ‡å®šèŠ‚ç‚¹"></a>â‘¡è·å–æŒ‡å®šèŠ‚ç‚¹</h5><h6 id="19-https-leetcode-com-problems-remove-nth-node-from-end-of-list-ğŸŒŸğŸŒŸ"><a href="#19-https-leetcode-com-problems-remove-nth-node-from-end-of-list-ğŸŒŸğŸŒŸ" class="headerlink" title="[19] https://leetcode.com/problems/remove-nth-node-from-end-of-list/     ğŸŒŸğŸŒŸ"></a>[19] <a href="https://leetcode.com/problems/remove-nth-node-from-end-of-list/">https://leetcode.com/problems/remove-nth-node-from-end-of-list/</a>     ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">removeNthFromEnd</span><span class="hljs-params">(ListNode* head, <span class="hljs-keyword">int</span> n)</span> </span>&#123;    ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    dummy -&gt; next = head;    ListNode * fast = dummy;    ListNode * slow = dummy;    <span class="hljs-comment">// (1) fast å¤šèµ°ä¸€æ­¥, slow å°‘èµ°ä¸€æ­¥</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n+<span class="hljs-number">1</span>; i++)&#123;         fast = fast -&gt; next;        &#125;    <span class="hljs-keyword">while</span>(fast)&#123;        fast = fast -&gt; next;        slow = slow -&gt; next;    &#125;    <span class="hljs-comment">// (2) é‡Šæ”¾åˆ é™¤èŠ‚ç‚¹</span>    ListNode * del = slow -&gt; next;    slow -&gt; next = slow -&gt; next -&gt; next;    <span class="hljs-keyword">delete</span> del;    <span class="hljs-comment">// (3) é‡Šæ”¾ç”³è¯·çš„ ListNode</span>    ListNode * res = dummy -&gt; next;    <span class="hljs-keyword">delete</span> dummy;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="160-https-leetcode-cn-com-problems-intersection-of-two-linked-lists-ğŸŒŸğŸŒŸ"><a href="#160-https-leetcode-cn-com-problems-intersection-of-two-linked-lists-ğŸŒŸğŸŒŸ" class="headerlink" title="[160] https://leetcode-cn.com/problems/intersection-of-two-linked-lists/    ğŸŒŸğŸŒŸ"></a>[160] <a href="https://leetcode-cn.com/problems/intersection-of-two-linked-lists/">https://leetcode-cn.com/problems/intersection-of-two-linked-lists/</a>    ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getLengh</span><span class="hljs-params">(ListNode * head)</span></span>&#123;    ListNode * cur = head;    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(cur)&#123;        cnt += <span class="hljs-number">1</span>;        cur = cur -&gt; next;    &#125;    <span class="hljs-keyword">return</span> cnt;&#125;<span class="hljs-function">ListNode *<span class="hljs-title">getIntersectionNode</span><span class="hljs-params">(ListNode *headA, ListNode *headB)</span> </span>&#123;    <span class="hljs-keyword">int</span> lenA = getLengh(headA);    <span class="hljs-keyword">int</span> lenB = getLengh(headB);    <span class="hljs-keyword">int</span> diff = <span class="hljs-built_in">abs</span>(lenB - lenA);    ListNode * pA = headA;    ListNode * pB = headB;    <span class="hljs-keyword">if</span>(lenA &gt; lenB)&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; diff; i++)  pA = pA -&gt; next;    &#125;<span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; diff; i++) pB = pB -&gt; next;    &#125;    <span class="hljs-keyword">while</span>(pA &amp;&amp; pB &amp;&amp; pA != pB)&#123;        pA = pA -&gt; next;        pB = pB -&gt; next;    &#125;    <span class="hljs-keyword">if</span>(pA == <span class="hljs-literal">NULL</span> || pB == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;    <span class="hljs-keyword">return</span> pA;   &#125;</code></pre><h5 id="â‘¢-é“¾è¡¨èŠ‚ç‚¹é¡ºåºçš„è°ƒæ•´"><a href="#â‘¢-é“¾è¡¨èŠ‚ç‚¹é¡ºåºçš„è°ƒæ•´" class="headerlink" title="â‘¢ é“¾è¡¨èŠ‚ç‚¹é¡ºåºçš„è°ƒæ•´"></a>â‘¢ é“¾è¡¨èŠ‚ç‚¹é¡ºåºçš„è°ƒæ•´</h5><h6 id="206-https-leetcode-com-problems-reverse-linked-list-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#206-https-leetcode-com-problems-reverse-linked-list-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[206] https://leetcode.com/problems/reverse-linked-list  ğŸŒŸğŸŒŸğŸŒŸ"></a>[206] <a href="https://leetcode.com/problems/reverse-linked-list">https://leetcode.com/problems/reverse-linked-list</a>  ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">reverseList</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    ListNode * prev = <span class="hljs-literal">NULL</span>;    ListNode * cur = head;    <span class="hljs-keyword">while</span>(cur)&#123;        ListNode * next = cur -&gt; next;        cur -&gt; next = prev;        prev = cur;        cur = next;    &#125;    <span class="hljs-keyword">return</span> prev;&#125;</code></pre><h6 id="328-https-leetcode-com-problems-odd-even-linked-list"><a href="#328-https-leetcode-com-problems-odd-even-linked-list" class="headerlink" title="[328] https://leetcode.com/problems/odd-even-linked-list/"></a>[328] <a href="https://leetcode.com/problems/odd-even-linked-list/">https://leetcode.com/problems/odd-even-linked-list/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">oddEvenList</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;    ListNode * oddhead = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    ListNode * evenhead = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);      ListNode * p_odd = oddhead;    ListNode * p_even = evenhead;    ListNode * p = head;    <span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(p)&#123;        <span class="hljs-keyword">if</span>(index % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)&#123;            p_even -&gt; next = p;            p_even = p_even -&gt; next;        &#125;<span class="hljs-keyword">else</span>&#123;            p_odd -&gt; next = p;            p_odd = p_odd -&gt; next;        &#125;        p = p -&gt; next;          index += <span class="hljs-number">1</span>;       &#125;    p_even -&gt; next = oddhead -&gt; next;    p_odd -&gt; next = <span class="hljs-literal">NULL</span>;    <span class="hljs-comment">// !! ä¸è¦å¿˜è®°å°†è¿™ä¸ªé“¾è¡¨ next ç½®é›¶ &lt;--- å¦åˆ™ä¼šäº§ç”Ÿæ­»å¾ªç¯! è®¡ç®—è¶…æ—¶</span>      <span class="hljs-comment">// ! åˆ é™¤ç”³è¯·çš„ç»“ç‚¹</span>    <span class="hljs-keyword">delete</span> evenhead;    ListNode * res = oddhead -&gt; next;    <span class="hljs-keyword">delete</span> oddhead;    <span class="hljs-keyword">return</span> evenhead -&gt; next; &#125;</code></pre><h6 id="86-https-leetcode-cn-com-problems-partition-list-ğŸŒŸğŸŒŸ"><a href="#86-https-leetcode-cn-com-problems-partition-list-ğŸŒŸğŸŒŸ" class="headerlink" title="[86] https://leetcode-cn.com/problems/partition-list/    ğŸŒŸğŸŒŸ"></a>[86] <a href="https://leetcode-cn.com/problems/partition-list/">https://leetcode-cn.com/problems/partition-list/</a>    ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">partition</span><span class="hljs-params">(ListNode* head, <span class="hljs-keyword">int</span> x)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;    ListNode * before = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    ListNode * p1 = before;    ListNode * after = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    ListNode * p2 = after;    ListNode * p = head;    <span class="hljs-keyword">while</span>(p)&#123;        <span class="hljs-keyword">if</span>(p -&gt; val &lt; x)&#123;            p1 -&gt; next = p;            p1 = p1 -&gt; next;        &#125;<span class="hljs-keyword">else</span>&#123;            p2 -&gt; next = p;            p2 = p2 -&gt; next;        &#125;            p = p -&gt; next;    &#125;    p1 -&gt; next = after -&gt; next;    p2 -&gt; next = <span class="hljs-literal">NULL</span>;    <span class="hljs-keyword">return</span> before -&gt; next;&#125;</code></pre><h6 id="143-https-leetcode-cn-com-problems-reorder-list"><a href="#143-https-leetcode-cn-com-problems-reorder-list" class="headerlink" title="[143] https://leetcode-cn.com/problems/reorder-list/"></a>[143] <a href="https://leetcode-cn.com/problems/reorder-list/">https://leetcode-cn.com/problems/reorder-list/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reorderList</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-comment">// è·å–é“¾è¡¨é•¿åº¦</span>    ListNode * p = head;    <span class="hljs-keyword">int</span> len = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(p)&#123;        len++;        p = p -&gt; next;    &#125;    <span class="hljs-comment">// ç¿»è½¬ååŠéƒ¨åˆ†</span>    <span class="hljs-keyword">int</span> mid = len / <span class="hljs-number">2</span>;    p = head;    <span class="hljs-keyword">while</span>(mid--)  p = p -&gt; next;    ListNode * rhead = reverseList(p-&gt;next);    p -&gt; next = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// !!! </span>    <span class="hljs-comment">// åˆå¹¶ä¸¤ä¸ªé“¾è¡¨</span>    ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    ListNode * ptr = dummy;    <span class="hljs-keyword">while</span>(rhead &amp;&amp; head)&#123;        ptr -&gt; next = head;        head = head -&gt; next;        ptr = ptr -&gt; next;        ptr -&gt; next = rhead;        rhead = rhead -&gt; next;        ptr = ptr -&gt; next;    &#125;    <span class="hljs-keyword">if</span>(rhead != <span class="hljs-literal">NULL</span>) ptr -&gt; next = rhead;    <span class="hljs-keyword">if</span>(head != <span class="hljs-literal">NULL</span>) ptr -&gt; next = head;    head = dummy -&gt; next;&#125;</code></pre><h6 id="61-https-leetcode-cn-com-problems-rotate-list"><a href="#61-https-leetcode-cn-com-problems-rotate-list" class="headerlink" title="[61] https://leetcode-cn.com/problems/rotate-list/"></a>[61] <a href="https://leetcode-cn.com/problems/rotate-list/">https://leetcode-cn.com/problems/rotate-list/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">rotateRight</span><span class="hljs-params">(ListNode* head, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;        <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">1</span>;    ListNode * ptr = head;    <span class="hljs-keyword">while</span>(ptr -&gt; next)&#123;        ptr = ptr -&gt; next;        ++cnt;    &#125;    <span class="hljs-comment">// åšç¯</span>    ptr -&gt; next = head;    <span class="hljs-comment">// ç§»åŠ¨</span>    k = cnt - k % cnt;    <span class="hljs-keyword">while</span>(k<span class="hljs-number">-1</span>)&#123;        k--;        head = head -&gt; next;    &#125;    <span class="hljs-comment">// ä¿®æ”¹æŒ‡é’ˆ</span>    ptr = head;    head = head -&gt; next;    ptr -&gt; next = <span class="hljs-literal">NULL</span>;    <span class="hljs-keyword">return</span> head; &#125;</code></pre><h6 id="24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹-https-leetcode-cn-com-problems-swap-nodes-in-pairs-ğŸŒŸğŸŒŸ"><a href="#24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹-https-leetcode-cn-com-problems-swap-nodes-in-pairs-ğŸŒŸğŸŒŸ" class="headerlink" title="[24]. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ https://leetcode-cn.com/problems/swap-nodes-in-pairs/   ğŸŒŸğŸŒŸ"></a>[24]. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ <a href="https://leetcode-cn.com/problems/swap-nodes-in-pairs/">https://leetcode-cn.com/problems/swap-nodes-in-pairs/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">swapPairs</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    dummy -&gt; next = head;    ListNode * prev = dummy;    ListNode * cur = prev -&gt; next;    <span class="hljs-keyword">while</span>(cur &amp;&amp; cur -&gt; next)&#123;        ListNode * next = cur -&gt; next -&gt; next;        <span class="hljs-comment">// ç¿»è½¬</span>        prev -&gt; next = cur -&gt; next;        cur -&gt; next -&gt; next = cur;        cur -&gt; next = next;        <span class="hljs-comment">// ç§»åŠ¨</span>        prev = cur;        cur = next;    &#125;    <span class="hljs-keyword">return</span> dummy-&gt; next; &#125;</code></pre><h6 id="92-åè½¬é“¾è¡¨-II-https-leetcode-cn-com-problems-reverse-linked-list-ii-ğŸŒŸğŸŒŸ"><a href="#92-åè½¬é“¾è¡¨-II-https-leetcode-cn-com-problems-reverse-linked-list-ii-ğŸŒŸğŸŒŸ" class="headerlink" title="[92] åè½¬é“¾è¡¨ II https://leetcode-cn.com/problems/reverse-linked-list-ii/   ğŸŒŸğŸŒŸ"></a>[92] åè½¬é“¾è¡¨ II <a href="https://leetcode-cn.com/problems/reverse-linked-list-ii/">https://leetcode-cn.com/problems/reverse-linked-list-ii/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp">    <span class="hljs-function">ListNode * <span class="hljs-title">reverseLists</span><span class="hljs-params">(ListNode * head)</span></span>&#123;        <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span> || head -&gt; next == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;        ListNode * prev = <span class="hljs-literal">NULL</span>;        ListNode * cur = head;        <span class="hljs-keyword">while</span>(cur)&#123;            ListNode * next = cur -&gt; next;            cur -&gt; next = prev;            prev = cur;            cur =  next;        &#125;        <span class="hljs-keyword">return</span> prev;    &#125;<span class="hljs-keyword">public</span>:    <span class="hljs-function">ListNode* <span class="hljs-title">reverseBetween</span><span class="hljs-params">(ListNode* head, <span class="hljs-keyword">int</span> m, <span class="hljs-keyword">int</span> n)</span> </span>&#123;        <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;        ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);        dummy -&gt; next = head;        <span class="hljs-comment">// æŸ¥æ‰¾ç¿»è½¬ä¹‹å‰çš„èŠ‚ç‚¹ï¼Œ è®°å½•ä¸º prev</span>        ListNode * pNode = dummy;        <span class="hljs-keyword">int</span> i;        <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; m<span class="hljs-number">-1</span>; i++)  pNode = pNode -&gt; next;        ListNode * prev = pNode;        <span class="hljs-comment">// è®°å½•ç¿»è½¬ä¹‹åçš„èŠ‚ç‚¹ï¼Œ è®°å½•ä¸º next</span>        <span class="hljs-keyword">for</span>(; i &lt; n; i++)  pNode = pNode -&gt; next;        ListNode * next = pNode -&gt; next;        pNode -&gt; next = <span class="hljs-literal">NULL</span>;        <span class="hljs-comment">// ç¿»è½¬</span>        ListNode * newhead = reverseLists(prev -&gt; next);        prev -&gt; next = newhead;        <span class="hljs-comment">// è¿æ¥æ–­æ‰çš„é“¾è¡¨</span>        <span class="hljs-keyword">while</span>(prev -&gt; next) prev = prev -&gt; next;        prev -&gt; next = next;        <span class="hljs-keyword">return</span> dummy -&gt; next;    &#125;</code></pre><h5 id="â‘£-åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#â‘£-åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="â‘£ åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a>â‘£ åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</h5><h6 id="237-https-leetcode-com-problems-delete-node-in-a-linked-list"><a href="#237-https-leetcode-com-problems-delete-node-in-a-linked-list" class="headerlink" title="[237] https://leetcode.com/problems/delete-node-in-a-linked-list/"></a>[237] <a href="https://leetcode.com/problems/delete-node-in-a-linked-list/">https://leetcode.com/problems/delete-node-in-a-linked-list/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">deleteNode</span><span class="hljs-params">(ListNode* node)</span> </span>&#123;    node -&gt; val = node -&gt; next -&gt; val;    node -&gt; next = node -&gt; next -&gt; next;&#125;</code></pre><h6 id="é¢è¯•é¢˜-02-01-ç§»é™¤é‡å¤èŠ‚ç‚¹-https-leetcode-cn-com-problems-remove-duplicate-node-lcci"><a href="#é¢è¯•é¢˜-02-01-ç§»é™¤é‡å¤èŠ‚ç‚¹-https-leetcode-cn-com-problems-remove-duplicate-node-lcci" class="headerlink" title="[é¢è¯•é¢˜ 02.01] ç§»é™¤é‡å¤èŠ‚ç‚¹ https://leetcode-cn.com/problems/remove-duplicate-node-lcci/"></a>[é¢è¯•é¢˜ 02.01] ç§»é™¤é‡å¤èŠ‚ç‚¹ <a href="https://leetcode-cn.com/problems/remove-duplicate-node-lcci/">https://leetcode-cn.com/problems/remove-duplicate-node-lcci/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">removeDuplicateNodes</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span> || head -&gt; next == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;    <span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">int</span>&gt; m_set = &#123; head-&gt;val &#125;;    ListNode * prev = head;    ListNode * cur = head -&gt; next;    <span class="hljs-keyword">while</span>(cur)&#123;        <span class="hljs-keyword">if</span>(m_set.find(cur -&gt; val) == m_set.end())&#123;            m_set.insert(cur-&gt;val);            prev = cur;        &#125;<span class="hljs-keyword">else</span>&#123;            prev -&gt; next = cur -&gt; next;        &#125;        cur = cur -&gt; next;    &#125;    <span class="hljs-keyword">return</span> head;&#125;</code></pre><h6 id="203-https-leetcode-com-problems-remove-linked-list-elements"><a href="#203-https-leetcode-com-problems-remove-linked-list-elements" class="headerlink" title="[203] https://leetcode.com/problems/remove-linked-list-elements/"></a>[203] <a href="https://leetcode.com/problems/remove-linked-list-elements/">https://leetcode.com/problems/remove-linked-list-elements/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">deleteNode</span><span class="hljs-params">(ListNode* head, <span class="hljs-keyword">int</span> val)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;    <span class="hljs-comment">// æ·»åŠ å“‘èŠ‚ç‚¹</span>    ListNode * newhead = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    newhead -&gt; next = head;    ListNode * p = newhead;    <span class="hljs-keyword">while</span>(p -&gt; next)&#123;        <span class="hljs-keyword">if</span>(p -&gt; next -&gt; val == val)&#123;            ListNode * tmp = p -&gt; next;            p -&gt; next = p -&gt; next -&gt; next;            <span class="hljs-keyword">delete</span> tmp;  <span class="hljs-comment">// åˆ é™¤æ— ç”¨èŠ‚ç‚¹</span>        &#125;         <span class="hljs-keyword">else</span>            p = p -&gt; next;    &#125;    <span class="hljs-keyword">return</span> newhead -&gt; next;&#125;</code></pre><h6 id="83-https-leetcode-com-problems-remove-duplicates-from-sorted-list-ğŸŒŸğŸŒŸ"><a href="#83-https-leetcode-com-problems-remove-duplicates-from-sorted-list-ğŸŒŸğŸŒŸ" class="headerlink" title="[83] https://leetcode.com/problems/remove-duplicates-from-sorted-list/  ğŸŒŸğŸŒŸ"></a>[83] <a href="https://leetcode.com/problems/remove-duplicates-from-sorted-list/">https://leetcode.com/problems/remove-duplicates-from-sorted-list/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">deleteDuplicates</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;    ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    dummy -&gt; next = head;    ListNode * ptr = head;    <span class="hljs-keyword">while</span>(ptr &amp;&amp; ptr -&gt; next)&#123;        <span class="hljs-keyword">if</span>(ptr-&gt;val == ptr-&gt;next-&gt;val)&#123;            ListNode * tmp = ptr -&gt; next;            ptr -&gt; next = ptr -&gt; next -&gt; next;            <span class="hljs-keyword">delete</span> tmp;        &#125;<span class="hljs-keyword">else</span>&#123;            ptr = ptr -&gt; next;        &#125;    &#125;    <span class="hljs-keyword">return</span> dummy -&gt; next;&#125;</code></pre><h6 id="82-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -II-https-leetcode-cn-com-problems-remove-duplicates-from-sorted-list-ii"><a href="#82-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -II-https-leetcode-cn-com-problems-remove-duplicates-from-sorted-list-ii" class="headerlink" title="[82] åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/"></a>[82] åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II <a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/">https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">deleteDuplicates</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    dummy -&gt; next = head;    ListNode * prev = dummy;        ListNode * cur = head;    <span class="hljs-keyword">while</span>(cur &amp;&amp; cur -&gt; next)&#123;        ListNode * next = cur -&gt; next;        <span class="hljs-keyword">if</span>(cur -&gt; val != next -&gt; val)&#123;            prev = cur;            cur = next;        &#125;<span class="hljs-keyword">else</span>&#123;            <span class="hljs-keyword">while</span>(next &amp;&amp; cur -&gt; val == next -&gt; val)   <span class="hljs-comment">// æ‰¾åˆ°ä¸‹ä¸€ä¸ªéé‡å¤å­—ç¬¦</span>                next = next -&gt; next;            prev -&gt; next = next == <span class="hljs-literal">NULL</span> ? <span class="hljs-literal">NULL</span> : next;            cur = next;          &#125;    &#125;    <span class="hljs-keyword">return</span> dummy -&gt; next;&#125;</code></pre><h5 id="â‘¤-åˆå¹¶æœ‰åºé“¾è¡¨"><a href="#â‘¤-åˆå¹¶æœ‰åºé“¾è¡¨" class="headerlink" title="â‘¤ åˆå¹¶æœ‰åºé“¾è¡¨"></a>â‘¤ åˆå¹¶æœ‰åºé“¾è¡¨</h5><h6 id="21-https-leetcode-cn-com-problems-merge-two-sorted-lists-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#21-https-leetcode-cn-com-problems-merge-two-sorted-lists-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[21] https://leetcode-cn.com/problems/merge-two-sorted-lists/   ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>[21] <a href="https://leetcode-cn.com/problems/merge-two-sorted-lists/">https://leetcode-cn.com/problems/merge-two-sorted-lists/</a>   ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">mergeTwoLists</span><span class="hljs-params">(ListNode* l1, ListNode* l2)</span> </span>&#123;    ListNode * newhead = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    ListNode * p = newhead;    ListNode * p_l1 = l1, * p_l2 = l2;    <span class="hljs-keyword">while</span>(p_l1 &amp;&amp; p_l2)&#123;        <span class="hljs-keyword">if</span>(p_l1 -&gt; val &gt; p_l2 -&gt; val)&#123;            p -&gt; next = p_l2;            p_l2 = p_l2 -&gt; next;            p = p -&gt; next;        &#125;<span class="hljs-keyword">else</span>&#123;            p -&gt; next = p_l1;            p_l1 = p_l1 -&gt; next;            p = p -&gt; next;         &#125;    &#125;    <span class="hljs-keyword">if</span>(p_l1 == <span class="hljs-literal">NULL</span>) p-&gt;next = p_l2;    <span class="hljs-keyword">else</span> p-&gt; next = p_l1;    <span class="hljs-comment">// æ³¨æ„: è¿™é‡Œè¦åˆ é™¤ç”³è¯·çš„ new head èŠ‚ç‚¹, å¦åˆ™ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼</span>    ListNode * res = newhead;    <span class="hljs-keyword">delete</span> newhead;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="23-https-leetcode-cn-com-problems-merge-k-sorted-lists-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#23-https-leetcode-cn-com-problems-merge-k-sorted-lists-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[23] https://leetcode-cn.com/problems/merge-k-sorted-lists/      ğŸŒŸğŸŒŸğŸŒŸ"></a>[23] <a href="https://leetcode-cn.com/problems/merge-k-sorted-lists/">https://leetcode-cn.com/problems/merge-k-sorted-lists/</a>      ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">mergeKLists</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;    <span class="hljs-keyword">if</span>(lists.size() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;    <span class="hljs-keyword">if</span>(lists.size() == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> lists[<span class="hljs-number">0</span>];    <span class="hljs-keyword">if</span>(lists.size() == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> mergeTwoLists(lists[<span class="hljs-number">0</span>], lists[<span class="hljs-number">1</span>]);    <span class="hljs-keyword">int</span> len = lists.size();    <span class="hljs-keyword">int</span> mid = len / <span class="hljs-number">2</span>;    <span class="hljs-built_in">vector</span>&lt;ListNode* &gt; lists1;    <span class="hljs-built_in">vector</span>&lt;ListNode* &gt; lists2;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; mid; i++)  lists1.push_back(lists[i]);      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = mid; i &lt; len; i++)  lists2.push_back(lists[i]);    ListNode * p1 = mergeKLists(lists1);    ListNode * p2 = mergeKLists(lists2);    <span class="hljs-keyword">return</span> mergeTwoLists(p1, p2);  &#125;</code></pre><h5 id="â‘¥-æ¨¡æ‹Ÿæ•°å­¦è¿ç®—-ä¸¤æ•°ç›¸åŠ ã€é“¾è¡¨-1"><a href="#â‘¥-æ¨¡æ‹Ÿæ•°å­¦è¿ç®—-ä¸¤æ•°ç›¸åŠ ã€é“¾è¡¨-1" class="headerlink" title="â‘¥ æ¨¡æ‹Ÿæ•°å­¦è¿ç®—(ä¸¤æ•°ç›¸åŠ ã€é“¾è¡¨+1)"></a>â‘¥ æ¨¡æ‹Ÿæ•°å­¦è¿ç®—(ä¸¤æ•°ç›¸åŠ ã€é“¾è¡¨+1)</h5><h6 id="2-https-leetcode-com-problems-add-two-numbers"><a href="#2-https-leetcode-com-problems-add-two-numbers" class="headerlink" title="[2] https://leetcode.com/problems/add-two-numbers/"></a>[2] <a href="https://leetcode.com/problems/add-two-numbers/">https://leetcode.com/problems/add-two-numbers/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// æ¨¡æ‹Ÿå¸¸è§çš„åŠ æ³•æ“ä½œ: éœ€è¦æ³¨æ„ï¼Œå½“ä¸€æ¡é“¾è¡¨ä¸ºç©ºæ—¶å€™ï¼Œä»ç„¶åœ¨æ­¤æ¡†æ¶ä¸‹ç›¸åŠ ï¼Œæœ€åè¿˜éœ€è¦æ·»åŠ  c_in</span><span class="hljs-function">ListNode* <span class="hljs-title">addTwoNumbers</span><span class="hljs-params">(ListNode* l1, ListNode* l2)</span> </span>&#123;    ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    ListNode * p = dummy;    <span class="hljs-keyword">int</span> c_in = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(l1 != <span class="hljs-literal">NULL</span> || l2 != <span class="hljs-literal">NULL</span>)&#123;        <span class="hljs-keyword">int</span> val1 = l1 != <span class="hljs-literal">NULL</span> ? l1 -&gt; val : <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> val2 = l2 != <span class="hljs-literal">NULL</span> ? l2 -&gt; val : <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> res = val1 + val2 + c_in;        ListNode * newNode =  <span class="hljs-keyword">new</span> ListNode(res % <span class="hljs-number">10</span>);        c_in = res / <span class="hljs-number">10</span>;        p -&gt; next = newNode;        p = p -&gt; next;        <span class="hljs-keyword">if</span>(l1 != <span class="hljs-literal">NULL</span>) l1 = l1 -&gt; next;        <span class="hljs-keyword">if</span>(l2 != <span class="hljs-literal">NULL</span>) l2 = l2 -&gt; next;                                                 &#125;    <span class="hljs-keyword">if</span>(c_in)&#123;        ListNode * newNode = <span class="hljs-keyword">new</span> ListNode(c_in);        p -&gt; next = newNode;        p = p -&gt; next;    &#125;    <span class="hljs-keyword">return</span> dummy -&gt; next;  &#125;</code></pre><h6 id="445-ä¸¤æ•°ç›¸åŠ -II-https-leetcode-cn-com-problems-add-two-numbers-ii"><a href="#445-ä¸¤æ•°ç›¸åŠ -II-https-leetcode-cn-com-problems-add-two-numbers-ii" class="headerlink" title="[445] ä¸¤æ•°ç›¸åŠ  II https://leetcode-cn.com/problems/add-two-numbers-ii/"></a>[445] ä¸¤æ•°ç›¸åŠ  II <a href="https://leetcode-cn.com/problems/add-two-numbers-ii/">https://leetcode-cn.com/problems/add-two-numbers-ii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">ListNode* <span class="hljs-title">addTwoNumbers</span><span class="hljs-params">(ListNode* l1, ListNode* l2)</span> </span>&#123;    <span class="hljs-keyword">if</span>(l1 == <span class="hljs-literal">NULL</span> || l2 == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> l1 == <span class="hljs-literal">NULL</span> ? l2 : l1;        <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; stk_1,stk_2;    <span class="hljs-keyword">while</span>(l1)&#123;        stk_1.push(l1 -&gt; val);        l1 = l1 -&gt; next;    &#125;    <span class="hljs-keyword">while</span>(l2)&#123;        stk_2.push(l2 -&gt; val);        l2 = l2-&gt;next;    &#125;        <span class="hljs-keyword">int</span> c_in = <span class="hljs-number">0</span>;    ListNode * dummy = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">0</span>);    ListNode * ptr = dummy;    <span class="hljs-keyword">while</span>(!stk_1.empty() || !stk_2.empty())&#123;        <span class="hljs-keyword">int</span> n1 = stk_1.empty() ? <span class="hljs-number">0</span> : stk_1.top();        <span class="hljs-keyword">int</span> n2 = stk_2.empty() ? <span class="hljs-number">0</span> : stk_2.top();                <span class="hljs-keyword">int</span> s = n1 + n2 + c_in;                ListNode * pNode = <span class="hljs-keyword">new</span> ListNode(s % <span class="hljs-number">10</span>);        c_in = s / <span class="hljs-number">10</span>;        <span class="hljs-comment">// å¤´æ’æ³•: å¯ä»¥åå‘æ’å…¥èŠ‚ç‚¹</span>        pNode -&gt; next = ptr -&gt; next;        ptr -&gt; next = pNode;        <span class="hljs-keyword">if</span>(!stk_1.empty()) stk_1.pop();        <span class="hljs-keyword">if</span>(!stk_2.empty())  stk_2.pop();    &#125;    <span class="hljs-keyword">if</span>(c_in)&#123;        ListNode * pNode = <span class="hljs-keyword">new</span> ListNode(c_in);        pNode -&gt; next = ptr -&gt; next;        ptr -&gt; next = pNode;      &#125;    ListNode* res = dummy-&gt;next;    <span class="hljs-keyword">delete</span> dummy;        <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="369-https-leetcode-com-problems-plus-one-linked-list"><a href="#369-https-leetcode-com-problems-plus-one-linked-list" class="headerlink" title="[369] https://leetcode.com/problems/plus-one-linked-list/"></a>[369] <a href="https://leetcode.com/problems/plus-one-linked-list/">https://leetcode.com/problems/plus-one-linked-list/</a></h6><pre><code class="hljs cpp"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><span class="hljs-keyword">public</span>:    <span class="hljs-function">ListNode * <span class="hljs-title">reverseList</span><span class="hljs-params">(ListNode * head)</span></span>&#123;        <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;        ListNode * prev = <span class="hljs-literal">NULL</span>;        <span class="hljs-keyword">while</span>(head)&#123;            ListNode * next = head -&gt; next;            head -&gt; next = prev;            prev = head;            head = next;        &#125;        <span class="hljs-keyword">return</span> prev;            &#125;        <span class="hljs-function">ListNode* <span class="hljs-title">plusOne</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;        <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;        head = reverseList(head);                <span class="hljs-keyword">int</span> c_in = <span class="hljs-number">1</span>;        ListNode * ptr = head;        ListNode * prev = head;        <span class="hljs-keyword">while</span>(ptr)&#123;            <span class="hljs-keyword">int</span> res = ptr -&gt; val + c_in;            c_in = res / <span class="hljs-number">10</span>;            ptr -&gt; val = res % <span class="hljs-number">10</span>;            prev = ptr;            ptr = ptr -&gt; next;        &#125;                <span class="hljs-keyword">if</span>(c_in)  prev -&gt; next = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">1</span>);                <span class="hljs-keyword">return</span> reverseList(head);            &#125;&#125;;</code></pre><h6 id="148-æ’åºé“¾è¡¨-https-leetcode-cn-com-problems-sort-list-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#148-æ’åºé“¾è¡¨-https-leetcode-cn-com-problems-sort-list-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[148] æ’åºé“¾è¡¨ https://leetcode-cn.com/problems/sort-list/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[148] æ’åºé“¾è¡¨ <a href="https://leetcode-cn.com/problems/sort-list/">https://leetcode-cn.com/problems/sort-list/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// å¤æ‚åº¦ nlogn çš„é“¾è¡¨æ’åº</span><span class="hljs-function">ListNode* <span class="hljs-title">merge</span><span class="hljs-params">(ListNode * p1, ListNode * p2)</span></span>&#123;    <span class="hljs-keyword">if</span>(p1 == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> p2;    <span class="hljs-keyword">if</span>(p2 == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> p1;    <span class="hljs-keyword">if</span>(p1 -&gt; val &gt; p2 -&gt; val)&#123;        p2 -&gt; next = merge(p2-&gt;next, p1);        <span class="hljs-keyword">return</span> p2;    &#125;<span class="hljs-keyword">else</span>&#123;        p1 -&gt; next = merge(p1-&gt;next, p2);        <span class="hljs-keyword">return</span> p1;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;&#125;<span class="hljs-function">ListNode* <span class="hljs-title">sortList</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span> || head -&gt; next == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> head;    ListNode * fast = head;    ListNode * slow = head;    ListNode * pre = head;    <span class="hljs-keyword">while</span>(fast &amp;&amp; fast -&gt; next)&#123;        pre = slow;        fast = fast -&gt; next -&gt; next;        slow = slow -&gt; next;    &#125;    pre -&gt; next = <span class="hljs-literal">NULL</span>;    <span class="hljs-keyword">return</span> merge(sortList(head), sortList(slow));&#125;</code></pre><h5 id="â‘¦-å¤æ‚é“¾è¡¨çš„å¤åˆ¶-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#â‘¦-å¤æ‚é“¾è¡¨çš„å¤åˆ¶-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="â‘¦  å¤æ‚é“¾è¡¨çš„å¤åˆ¶  ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>â‘¦  å¤æ‚é“¾è¡¨çš„å¤åˆ¶  ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h5><pre><code class="hljs cpp"><span class="hljs-comment">// (1) å­˜å‚¨åŸé“¾è¡¨çš„ node -&gt; index map</span><span class="hljs-comment">// (2) æ•°ç»„å­˜å‚¨æ–°å»ºçš„ ç»“ç‚¹</span><span class="hljs-function">Node* <span class="hljs-title">copyRandomList</span><span class="hljs-params">(Node* head)</span> </span>&#123;      <span class="hljs-built_in">map</span>&lt;Node*, <span class="hljs-keyword">int</span>&gt; node_map;    <span class="hljs-built_in">vector</span>&lt;Node *&gt; node_vec;    Node * ptr = head;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(ptr)&#123;        node_vec.push_back(<span class="hljs-keyword">new</span> Node(ptr-&gt;val));        node_map[ptr] = i;        ptr = ptr -&gt; next;        i += <span class="hljs-number">1</span>;    &#125;    node_vec.push_back(<span class="hljs-number">0</span>);    ptr = head;    i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(ptr)&#123;        node_vec[i] -&gt; next = node_vec[i+<span class="hljs-number">1</span>]; <span class="hljs-comment">// next</span>        <span class="hljs-keyword">if</span>(ptr-&gt;random)&#123; <span class="hljs-comment">// random</span>            node_vec[i] -&gt; random = node_vec[node_map[ptr-&gt;random]];        &#125;        ptr = ptr -&gt; next;        i += <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">return</span> node_vec[<span class="hljs-number">0</span>];&#125;</code></pre><h3 id="4-æ ‘å’ŒäºŒå‰æ ‘"><a href="#4-æ ‘å’ŒäºŒå‰æ ‘" class="headerlink" title="4. æ ‘å’ŒäºŒå‰æ ‘"></a>4. æ ‘å’ŒäºŒå‰æ ‘</h3><h4 id="1-åŸºç¡€é¢˜å‹æ€»ç»“"><a href="#1-åŸºç¡€é¢˜å‹æ€»ç»“" class="headerlink" title="(1) åŸºç¡€é¢˜å‹æ€»ç»“"></a>(1) åŸºç¡€é¢˜å‹æ€»ç»“</h4><ul><li>[éå†] å‰åºã€ä¸­åºã€ååºã€å±‚åºéå†(å¸¸è§„ã€æŒ‰å±‚ã€ä¹‹å­—å‹)</li><li>[æ€§è´¨åˆ¤å®š] æœ€å¤§æ·±åº¦ã€æœ€å°æ·±åº¦ã€å¯¹ç§°äºŒå‰æ ‘ã€ç¿»è½¬äºŒå‰æ ‘ã€ç›¸åŒçš„æ ‘ã€å¹³è¡¡æ ‘ã€å·¦å¶å­ä¹‹å’Œ</li><li>[å…¬å…±ç¥–å…ˆ] æœ€è¿‘å…¬å…±ç¥–å…ˆ(äºŒå‰æ ‘ã€äºŒå‰æœç´¢æ ‘)</li><li>[è·¯å¾„å’Œ]  äºŒå‰æ ‘çš„è·¯å¾„å’Œã€æ‰€æœ‰è·¯å¾„ã€æœ€å¤§è·¯å¾„</li><li>[vector å’Œ tree äº¤äº’] åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æ ‘ã€æœ‰åºé“¾è¡¨é‡å»ºäºŒå‰æœç´¢æ ‘ã€é‡å»ºäºŒå‰æ ‘</li></ul><p><strong>ä¸€äº›å¸¸è§„æ€è·¯ï¼š</strong></p><ul><li><p>leetcodeçš„æµ‹è¯•é›†ç»å¸¸ä¼šæœ‰ [] ,  [0]ï¼Œæ‰€ä»¥å¾ˆå¤šé¢˜ç›®å…ˆè¦è€ƒè™‘åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œreturn None æˆ–è€… return [ ]ã€‚</p></li><li><p>æ—¶åˆ»è¦è€ƒè™‘è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œ ç©ºèŠ‚ç‚¹æ˜¯ä¸èƒ½è®¿é—®å·¦å­æ ‘å’Œå³å­æ ‘çš„ã€‚</p></li><li><p>å½“è¿”å›å€¼é void æ—¶ï¼Œè€ƒè™‘åˆ°é€’å½’çš„è¿”å›å€¼é—®é¢˜ï¼Œå¤§éƒ¨åˆ†éœ€è¦è®¾ç½®ä¸€ä¸ª helper å‡½æ•°ã€‚ä½†æ˜¯ä¸æ˜¯ç»å¯¹ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªè¿”å›å€¼ã€‚</p></li><li><p>é€’å½’çš„åŸºæœ¬æ€æƒ³</p><pre><code class="hljs cpp"><span class="hljs-function">def <span class="hljs-title">func</span><span class="hljs-params">(root)</span>:</span>    if æ»¡è¶³æ¡ä»¶: é€€å‡ºæˆ–è¿›è¡Œç›¸å…³æ“ä½œ        <span class="hljs-comment">// ç›¸å…³æ“ä½œ1;</span>    func(root-&gt;left); <span class="hljs-comment">// é€’å½’å·¦å­æ ‘</span>    <span class="hljs-comment">// ç›¸å…³æ“ä½œ2;</span>    func(root-&gt;right);  <span class="hljs-comment">//é€’å½’å³å­æ ‘</span>    <span class="hljs-comment">// ç›¸å…³æ“ä½œ3;</span></code></pre></li><li><p>é€’å½’ç›¸è¾ƒäºè¿­ä»£ï¼šæµªè´¹èµ„æºåå¤è°ƒç”¨å‡½æ•°</p><ul><li>é€’å½’æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼Œæ¯ä¸ªåˆ†æ”¯éƒ½æ¢ç©¶åˆ°æœ€è¿œï¼Œå‘ç°æ— æ³•ç»§ç»­çš„æ—¶å€™å¾€å›èµ°ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªä¼šè®¿é—®ä¸€æ¬¡</li><li>è¿­ä»£æ˜¯ä¸€ä¸ªç¯ç»“æ„ï¼Œæ¯æ¬¡è¿­ä»£éƒ½æ˜¯ä¸€ä¸ªåœˆï¼Œä¸ä¼šæ‹‰æ‰å…¶ä¸­çš„æŸä¸€æ­¥ï¼Œç„¶åä¸æ–­å¾ªç¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¢«å¾ªç¯è®¿é—®</li></ul></li><li><p>æ€è€ƒçš„é¡ºåº:</p><ul><li>å…³äºé€’å½’ï¼šé€€å‡ºæ¡ä»¶ã€é€’å½’ä»»åŠ¡ã€è¿”å›å€¼</li><li>å…³äºå­æ ‘ï¼šæ ¹èŠ‚ç‚¹ã€å·¦å­æ ‘ã€å³å­æ ‘</li><li>å…³äºç‰¹æ®Šæ¡ä»¶å¤„ç†ï¼šèŠ‚ç‚¹ root ä¸ºç©ºï¼Œ å¶å­èŠ‚ç‚¹<code>root-&gt;left &amp;&amp; root-&gt;right</code> ä¸ºç©ºã€ å•å­æ ‘ä¸ºç©º <code>root-&gt;left || root-&gt;right</code> ã€æ­£å¸¸èŠ‚ç‚¹</li></ul></li></ul><h4 id="2-å…¸å‹ä¾‹é¢˜-2"><a href="#2-å…¸å‹ä¾‹é¢˜-2" class="headerlink" title="(2) å…¸å‹ä¾‹é¢˜"></a>(2) å…¸å‹ä¾‹é¢˜</h4><h5 id="ç±»å‹ä¸€-éå†"><a href="#ç±»å‹ä¸€-éå†" class="headerlink" title="ç±»å‹ä¸€. éå†"></a>ç±»å‹ä¸€. éå†</h5><h6 id="144-äºŒå‰æ ‘çš„å‰åºéå†-https-leetcode-cn-com-problems-binary-tree-preorder-traversal-ğŸŒŸğŸŒŸ"><a href="#144-äºŒå‰æ ‘çš„å‰åºéå†-https-leetcode-cn-com-problems-binary-tree-preorder-traversal-ğŸŒŸğŸŒŸ" class="headerlink" title="[144] äºŒå‰æ ‘çš„å‰åºéå† https://leetcode-cn.com/problems/binary-tree-preorder-traversal/ ğŸŒŸğŸŒŸ"></a>[144] äºŒå‰æ ‘çš„å‰åºéå† <a href="https://leetcode-cn.com/problems/binary-tree-preorder-traversal/">https://leetcode-cn.com/problems/binary-tree-preorder-traversal/</a> ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// å‰åº</span><span class="hljs-comment">// é€’å½’å†™æ³•</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">preorderTraversal</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    helper(root, res);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">helper</span><span class="hljs-params">(TreeNode * root, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; res)</span></span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;    res.push_back(root-&gt;val);    helper(root-&gt;left, res);    helper(root-&gt;right, res);&#125;<span class="hljs-comment">// è¿­ä»£å†™æ³•</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">preorderTraversal</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    TreeNode * p = root;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-built_in">stack</span>&lt;TreeNode *&gt; m_stack;    <span class="hljs-keyword">while</span>(p || !m_stack.empty())&#123;        <span class="hljs-keyword">if</span>(p)&#123;  <span class="hljs-comment">// å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ç©ºï¼Œå°†å…¶å…¥æ ˆï¼Œ å¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°å·¦èŠ‚ç‚¹</span>            m_stack.push(p);            res.push_back(p-&gt;val);  <span class="hljs-comment">// åœ¨æ­¤å†™å…¥ç»“æœ</span>            p = p -&gt; left;        &#125;<span class="hljs-keyword">else</span>&#123;   <span class="hljs-comment">// å¦åˆ™å°†æ ˆé¡¶å¼¹å‡ºï¼Œå…¶å€¼å†™å…¥ç»“æœï¼Œå¹¶å°†æŒ‡é’ˆæŒ‡å‘å…¶å³èŠ‚ç‚¹</span>            p = m_stack.top();            m_stack.pop();            p = p -&gt; right;        &#125;    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="94-äºŒå‰æ ‘çš„ä¸­åºéå†-https-leetcode-cn-com-problems-binary-tree-inorder-traversal"><a href="#94-äºŒå‰æ ‘çš„ä¸­åºéå†-https-leetcode-cn-com-problems-binary-tree-inorder-traversal" class="headerlink" title="[94] äºŒå‰æ ‘çš„ä¸­åºéå† https://leetcode-cn.com/problems/binary-tree-inorder-traversal/"></a>[94] äºŒå‰æ ‘çš„ä¸­åºéå† <a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/">https://leetcode-cn.com/problems/binary-tree-inorder-traversal/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// ä¸­åº</span><span class="hljs-comment">//é€’å½’è§£æ³•</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">inorderTraversal</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    helper(root, res);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">helper</span><span class="hljs-params">(TreeNode* root, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; res)</span></span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;    helper(root-&gt;left, res);    res.push_back(root-&gt;val);    helper(root-&gt;right, res);&#125;<span class="hljs-comment">// è¿­ä»£å†™æ³•:</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">inorderTraversal</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    TreeNode * p = root;    <span class="hljs-built_in">stack</span>&lt;TreeNode *&gt; m_stack;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">while</span>(p || !m_stack.empty())&#123;        <span class="hljs-keyword">if</span>(p)&#123;  <span class="hljs-comment">// å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ç©ºï¼Œå°†å…¶å…¥æ ˆï¼Œ å¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°å·¦èŠ‚ç‚¹</span>            m_stack.push(p);            p = p-&gt;left;        &#125;<span class="hljs-keyword">else</span>&#123;  <span class="hljs-comment">// å¦åˆ™å°†æ ˆé¡¶å¼¹å‡ºï¼Œå…¶å€¼å†™å…¥ç»“æœï¼Œå¹¶å°†æŒ‡é’ˆæŒ‡å‘å…¶å³èŠ‚ç‚¹</span>            p = m_stack.top();            res.push_back(p-&gt;val); <span class="hljs-comment">// åœ¨æ­¤å†™å…¥ç»“æœ</span>            m_stack.pop();            p = p -&gt; right;        &#125;    &#125;    <span class="hljs-keyword">return</span> res; &#125;</code></pre><h6 id="145-https-leetcode-cn-com-problems-binary-tree-postorder-traversal"><a href="#145-https-leetcode-cn-com-problems-binary-tree-postorder-traversal" class="headerlink" title="[145] https://leetcode-cn.com/problems/binary-tree-postorder-traversal/"></a>[145] <a href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/">https://leetcode-cn.com/problems/binary-tree-postorder-traversal/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">postorderTraversal</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-comment">// æ€ä¹ˆå’Œå±‚åºéå†çš„ä»£ç å·®ä¸å¤šå‘€ï¼Œ æŠŠ queue æ”¹ä¸º stack</span>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">stack</span>&lt;TreeNode *&gt; m_stk;    TreeNode * p = root;    m_stk.push(p);    <span class="hljs-keyword">while</span>(!m_stk.empty())&#123;        TreeNode * cur = m_stk.top();        m_stk.pop();        res.push_back(cur-&gt;val);        <span class="hljs-keyword">if</span>(cur -&gt; left) m_stk.push(cur-&gt;left);        <span class="hljs-keyword">if</span>(cur-&gt;right) m_stk.push(cur-&gt;right);    &#125;    reverse(res.begin(), res.end());    <span class="hljs-keyword">return</span> res; &#125;</code></pre><h6 id="102-https-leetcode-cn-com-problems-binary-tree-level-order-traversal-ğŸŒŸğŸŒŸ"><a href="#102-https-leetcode-cn-com-problems-binary-tree-level-order-traversal-ğŸŒŸğŸŒŸ" class="headerlink" title="[102] https://leetcode-cn.com/problems/binary-tree-level-order-traversal/  ğŸŒŸğŸŒŸ"></a>[102] <a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">https://leetcode-cn.com/problems/binary-tree-level-order-traversal/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">levelOrder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">queue</span>&lt;TreeNode *&gt; m_queue;    m_queue.push(root);    <span class="hljs-keyword">while</span>(!m_queue.empty())&#123;        <span class="hljs-keyword">int</span> n = m_queue.size();        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; raw;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)&#123;            raw.push_back(m_queue.front() -&gt; val);            <span class="hljs-keyword">if</span>(m_queue.front() -&gt;left) m_queue.push(m_queue.front() -&gt; left);            <span class="hljs-keyword">if</span>(m_queue.front() -&gt; right) m_queue.push(m_queue.front() -&gt; right);            m_queue.pop();        &#125;        res.push_back(raw);    &#125;     <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="lcof-32-https-leetcode-cn-com-problems-cong-shang-dao-xia-da-yin-er-cha-shu-lcof"><a href="#lcof-32-https-leetcode-cn-com-problems-cong-shang-dao-xia-da-yin-er-cha-shu-lcof" class="headerlink" title="[lcof 32] https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-lcof/"></a>[lcof 32] <a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-lcof/">https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">levelOrder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">queue</span>&lt;TreeNode *&gt; m_queue;    m_queue.push(root);    <span class="hljs-keyword">while</span>(!m_queue.empty())&#123;        res.push_back(m_queue.front() -&gt; val);        <span class="hljs-keyword">if</span>(m_queue.front() -&gt; left) m_queue.push(m_queue.front() -&gt; left);        <span class="hljs-keyword">if</span>(m_queue.front() -&gt; right) m_queue.push(m_queue.front() -&gt; right);        m_queue.pop();    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="103-äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†-https-leetcode-cn-com-problems-binary-tree-zigzag-level-order-traversal"><a href="#103-äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†-https-leetcode-cn-com-problems-binary-tree-zigzag-level-order-traversal" class="headerlink" title="[103] äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå† https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/"></a>[103] äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå† <a href="https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/">https://leetcode-cn.com/problems/binary-tree-zigzag-level-order-traversal/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">levelOrder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">deque</span>&lt;TreeNode * &gt; m_deque;    m_deque.push_front(root);    <span class="hljs-keyword">bool</span> flag = <span class="hljs-literal">true</span>;    <span class="hljs-keyword">while</span>(!m_deque.empty())&#123;        <span class="hljs-keyword">int</span> n = m_deque.size();        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; raw;        <span class="hljs-keyword">if</span>(flag)&#123;      <span class="hljs-comment">// ä¸€ä¸ªä»å¤´å‡ºæ¥ï¼Œ ä¸€ä¸ªä»å°¾éƒ¨å‡ºæ¥</span>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)&#123;                raw.push_back(m_deque.front()-&gt;val);                <span class="hljs-keyword">if</span>(m_deque.front()-&gt;left) m_deque.push_back(m_deque.front()-&gt;left);                <span class="hljs-keyword">if</span>(m_deque.front()-&gt;right) m_deque.push_back(m_deque.front()-&gt;right);                m_deque.pop_front();            &#125;        &#125;<span class="hljs-keyword">else</span>&#123;            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)&#123;                raw.push_back(m_deque.back()-&gt;val);                <span class="hljs-keyword">if</span>(m_deque.back()-&gt;right) m_deque.push_front(m_deque.back()-&gt;right);                <span class="hljs-keyword">if</span>(m_deque.back()-&gt;left) m_deque.push_front(m_deque.back()-&gt;left);                m_deque.pop_back();            &#125;        &#125;        flag = ! flag;        res.push_back(raw);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="199-äºŒå‰æ ‘çš„å³è§†å›¾-https-leetcode-cn-com-problems-binary-tree-right-side-view"><a href="#199-äºŒå‰æ ‘çš„å³è§†å›¾-https-leetcode-cn-com-problems-binary-tree-right-side-view" class="headerlink" title="[199] äºŒå‰æ ‘çš„å³è§†å›¾ https://leetcode-cn.com/problems/binary-tree-right-side-view/"></a>[199] äºŒå‰æ ‘çš„å³è§†å›¾ <a href="https://leetcode-cn.com/problems/binary-tree-right-side-view/">https://leetcode-cn.com/problems/binary-tree-right-side-view/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">rightSideView</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">queue</span>&lt;TreeNode *&gt; m_queue;    m_queue.push(root);    <span class="hljs-keyword">while</span>(!m_queue.empty())&#123;        <span class="hljs-keyword">int</span> n = m_queue.size();        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; row;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)&#123;            TreeNode * pNode = m_queue.front();            <span class="hljs-keyword">if</span>(pNode-&gt;right) m_queue.push(pNode-&gt;right);            <span class="hljs-keyword">if</span>(pNode-&gt;left) m_queue.push(pNode-&gt;left);            m_queue.pop();            row.push_back(pNode-&gt;val);        &#125;        res.push_back(row[<span class="hljs-number">0</span>]);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="230-https-leetcode-cn-com-problems-kth-smallest-element-in-a-bst"><a href="#230-https-leetcode-cn-com-problems-kth-smallest-element-in-a-bst" class="headerlink" title="[230] https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/"></a>[230] <a href="https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/">https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">kthSmallest</span><span class="hljs-params">(TreeNode* root, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-comment">// ä¸­åºéå†çš„ç¬¬kä¸ªå…ƒç´ </span>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-built_in">stack</span>&lt;TreeNode *&gt; m_stk;    TreeNode * cur = root;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(cur || !m_stk.empty())&#123;        <span class="hljs-keyword">if</span>(cur)&#123;            m_stk.push(cur);            cur = cur -&gt; left;        &#125;<span class="hljs-keyword">else</span>&#123;            cur = m_stk.top();            i++;            <span class="hljs-keyword">if</span>(i == k) <span class="hljs-keyword">return</span> cur -&gt; val;            m_stk.pop();            cur =  cur-&gt; right;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; &#125;</code></pre><h6 id="lcof-52-https-leetcode-cn-com-problems-er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof"><a href="#lcof-52-https-leetcode-cn-com-problems-er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof" class="headerlink" title="[lcof 52] https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof/"></a>[lcof 52] <a href="https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof/">https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">kthLargest</span><span class="hljs-params">(TreeNode* root, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-comment">// åä¸­åºéå†ï¼Œ æ»¡è¶³æ¡ä»¶å³è¾“å‡º</span>    <span class="hljs-built_in">stack</span>&lt;TreeNode *&gt; m_stk;    TreeNode * p = root;    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">while</span>(p || !m_stk.empty())&#123;        <span class="hljs-keyword">if</span>(p)&#123;            m_stk.push(p);            p = p -&gt; right;        &#125;<span class="hljs-keyword">else</span>        &#123;            p = m_stk.top();            <span class="hljs-keyword">if</span>(++i == k) <span class="hljs-keyword">return</span> p-&gt;val;            m_stk.pop();            p = p -&gt; left;                    &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h5 id="ç±»å‹äºŒ-æ€§è´¨åˆ¤å®š"><a href="#ç±»å‹äºŒ-æ€§è´¨åˆ¤å®š" class="headerlink" title="ç±»å‹äºŒ  æ€§è´¨åˆ¤å®š"></a>ç±»å‹äºŒ  æ€§è´¨åˆ¤å®š</h5><h6 id="111-äºŒå‰æ ‘çš„æœ€å°æ·±åº¦-https-leetcode-cn-com-problems-minimum-depth-of-binary-tree-ğŸŒŸğŸŒŸ"><a href="#111-äºŒå‰æ ‘çš„æœ€å°æ·±åº¦-https-leetcode-cn-com-problems-minimum-depth-of-binary-tree-ğŸŒŸğŸŒŸ" class="headerlink" title="[111] äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/   ğŸŒŸğŸŒŸ"></a>[111] äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ <a href="https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/">https://leetcode-cn.com/problems/minimum-depth-of-binary-tree/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs coq">int minDepth(TreeNode* root) &#123;    <span class="hljs-keyword">if</span>(root == NULL) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span>(root-&gt;<span class="hljs-built_in">left</span> == NULL &amp;&amp; root -&gt; <span class="hljs-built_in">right</span> == NULL) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;    <span class="hljs-keyword">if</span>(root-&gt;<span class="hljs-built_in">left</span> == NULL) <span class="hljs-keyword">return</span> minDepth(root-&gt;<span class="hljs-built_in">right</span>) + <span class="hljs-number">1</span>;    <span class="hljs-keyword">if</span>(root-&gt;<span class="hljs-built_in">right</span> == NULL) <span class="hljs-keyword">return</span> minDepth(root-&gt;<span class="hljs-built_in">left</span>) + <span class="hljs-number">1</span>;    <span class="hljs-keyword">return</span> min(minDepth(root-&gt;<span class="hljs-built_in">left</span>), minDepth(root-&gt;<span class="hljs-built_in">right</span>)) + <span class="hljs-number">1</span>;&#125;</code></pre><h6 id="104-https-leetcode-cn-com-problems-maximum-depth-of-binary-tree"><a href="#104-https-leetcode-cn-com-problems-maximum-depth-of-binary-tree" class="headerlink" title="[104] https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/"></a>[104] <a href="https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/">https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxDepth</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + max(maxDepth(root-&gt;left), maxDepth(root-&gt;right));&#125;</code></pre><h6 id="226-https-leetcode-cn-com-problems-er-cha-shu-de-jing-xiang-lcof"><a href="#226-https-leetcode-cn-com-problems-er-cha-shu-de-jing-xiang-lcof" class="headerlink" title="[226] https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/"></a>[226] <a href="https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/">https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">TreeNode* <span class="hljs-title">mirrorTree</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> root;    exchangeTreeNode(root);    <span class="hljs-keyword">return</span> root;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">exchangeTreeNode</span><span class="hljs-params">(TreeNode * root)</span></span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;    TreeNode * tmp = root -&gt; left;    root -&gt; left = root -&gt; right;    root -&gt; right = tmp;        exchangeTreeNode(root -&gt; left);    exchangeTreeNode(root -&gt; right);&#125;</code></pre><h6 id="110-https-leetcode-cn-com-problems-balanced-binary-tree"><a href="#110-https-leetcode-cn-com-problems-balanced-binary-tree" class="headerlink" title="[110] https://leetcode-cn.com/problems/balanced-binary-tree/"></a>[110] <a href="https://leetcode-cn.com/problems/balanced-binary-tree/">https://leetcode-cn.com/problems/balanced-binary-tree/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getDepth</span><span class="hljs-params">(TreeNode * root)</span></span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">return</span> max(getDepth(root-&gt;left), getDepth(root-&gt;right)) + <span class="hljs-number">1</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isBalanced</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-comment">// é€’å½’çš„è§£å†³æ–¹æ¡ˆï¼Œ å…ˆçœ‹é€€å‡ºæ¡ä»¶æ¯”è¾ƒå¥½!</span>    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    <span class="hljs-keyword">int</span> left_depth = getDepth(root-&gt;left);    <span class="hljs-keyword">int</span> right_depth = getDepth(root-&gt;right);    <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(left_depth - right_depth) &lt;= <span class="hljs-number">1</span> &amp;&amp; isBalanced(root -&gt; left) &amp;&amp; isBalanced(root -&gt; right); &#125;</code></pre><h6 id="101-https-leetcode-cn-com-problems-symmetric-tree"><a href="#101-https-leetcode-cn-com-problems-symmetric-tree" class="headerlink" title="[101] https://leetcode-cn.com/problems/symmetric-tree/"></a>[101] <a href="https://leetcode-cn.com/problems/symmetric-tree/">https://leetcode-cn.com/problems/symmetric-tree/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">helper</span><span class="hljs-params">(TreeNode* left, TreeNode * right)</span></span>&#123;    <span class="hljs-keyword">if</span>(left == <span class="hljs-literal">NULL</span> &amp;&amp; right == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    <span class="hljs-keyword">if</span>(left == <span class="hljs-literal">NULL</span> || right == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">return</span> left -&gt; val == right -&gt; val &amp;&amp; helper(left-&gt;left, right-&gt;right) &amp;&amp; helper(left-&gt;right, right-&gt;left);&#125;<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isSymmetric</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    <span class="hljs-keyword">return</span> helper(root-&gt;left, root-&gt;right);&#125;</code></pre><h6 id="100-https-leetcode-cn-com-problems-same-tree"><a href="#100-https-leetcode-cn-com-problems-same-tree" class="headerlink" title="[100] https://leetcode-cn.com/problems/same-tree/"></a>[100] <a href="https://leetcode-cn.com/problems/same-tree/">https://leetcode-cn.com/problems/same-tree/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isSameTree</span><span class="hljs-params">(TreeNode* p, TreeNode* q)</span> </span>&#123;    <span class="hljs-keyword">if</span>(p == <span class="hljs-literal">NULL</span> &amp;&amp; q == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    <span class="hljs-keyword">if</span>((p == <span class="hljs-literal">NULL</span> || q == <span class="hljs-literal">NULL</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">return</span> p-&gt;val == q-&gt;val &amp;&amp;             isSameTree(p-&gt;left, q-&gt;left) &amp;&amp;  isSameTree(p-&gt;right, q-&gt;right); &#125;</code></pre><h6 id="98-Validate-Binary-Search-Tree-https-leetcode-com-problems-validate-binary-search-tree-description"><a href="#98-Validate-Binary-Search-Tree-https-leetcode-com-problems-validate-binary-search-tree-description" class="headerlink" title="[98] Validate Binary Search Tree https://leetcode.com/problems/validate-binary-search-tree/description/"></a>[98] Validate Binary Search Tree <a href="https://leetcode.com/problems/validate-binary-search-tree/description/">https://leetcode.com/problems/validate-binary-search-tree/description/</a></h6><pre><code class="hljs cpp"><span class="hljs-keyword">long</span> pre = LONG_MIN; <span class="hljs-comment">// è¶…çº§å‘çš„è¾¹ç•Œæ¡ä»¶</span><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValidBST</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// å…ˆå†™é€€å‡ºæ¡ä»¶</span>    <span class="hljs-keyword">bool</span> left = isValidBST(root-&gt;left); <span class="hljs-comment">// å·¦å­æ ‘</span>    <span class="hljs-comment">// ä¸­é—´å¤„ç†è¿‡ç¨‹</span>    <span class="hljs-keyword">if</span>(pre &gt;= root-&gt;val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">else</span> pre = root-&gt;val;    <span class="hljs-keyword">bool</span> right = isValidBST(root-&gt;right); <span class="hljs-comment">// å³å­æ ‘</span>    <span class="hljs-keyword">return</span>  left &amp;&amp; right;  &#125;</code></pre><h6 id="404-å·¦å¶å­ä¹‹å’Œ-https-leetcode-cn-com-problems-sum-of-left-leaves-ğŸŒŸğŸŒŸ"><a href="#404-å·¦å¶å­ä¹‹å’Œ-https-leetcode-cn-com-problems-sum-of-left-leaves-ğŸŒŸğŸŒŸ" class="headerlink" title="[404] å·¦å¶å­ä¹‹å’Œ https://leetcode-cn.com/problems/sum-of-left-leaves/  ğŸŒŸğŸŒŸ"></a>[404] å·¦å¶å­ä¹‹å’Œ <a href="https://leetcode-cn.com/problems/sum-of-left-leaves/">https://leetcode-cn.com/problems/sum-of-left-leaves/</a>  ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// é€’å½’å†™æ³•</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sumOfLeftLeaves</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    helper(root, <span class="hljs-literal">false</span>, res);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-comment">// ä¸è¦æ‰æ€¥ï¼Œå…ˆå†™ä¸€ä¸ªé€’å½’éå†å‡½æ•°ï¼Œ ç„¶åè€ƒè™‘æ€ä¹ˆåœ¨è¿™ä¸ªçš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹</span><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">helper</span><span class="hljs-params">(TreeNode * root, <span class="hljs-keyword">bool</span> flag, <span class="hljs-keyword">int</span>&amp; res)</span></span>&#123;    <span class="hljs-comment">// é€’å½’é€€å‡ºæ¡ä»¶</span>    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-comment">// æ»¡è¶³å¯¹åº”çš„æ“ä½œï¼Œ æ‰§è¡Œå¯¹åº”çš„æµç¨‹</span>    <span class="hljs-keyword">if</span>(flag &amp;&amp; root-&gt;left == <span class="hljs-literal">NULL</span> &amp;&amp; root-&gt;right == <span class="hljs-literal">NULL</span>)         res +=  root-&gt;val;    <span class="hljs-comment">// é€’å½’éå†ä¸¤é¢—å­æ ‘</span>    helper(root-&gt;left, <span class="hljs-literal">true</span>, res);    helper(root-&gt;right, <span class="hljs-literal">false</span>, res);&#125;<span class="hljs-comment">// éé€’å½’</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sumOfLeftLeaves</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-keyword">int</span> s;    <span class="hljs-built_in">stack</span>&lt;TreeNode * &gt; m_stk;    TreeNode * p = root;    <span class="hljs-keyword">while</span>(p || !m_stk.empty())&#123;        <span class="hljs-keyword">if</span>(p)&#123;             m_stk.push(p);             p = p -&gt; left;             <span class="hljs-keyword">if</span>(p &amp;&amp; p -&gt; left == <span class="hljs-literal">NULL</span> &amp;&amp; p -&gt; right == <span class="hljs-literal">NULL</span>) s += p-&gt;val;        &#125;<span class="hljs-keyword">else</span>&#123;             p = m_stk.top();             m_stk.pop();             p = p -&gt; right;        &#125;    &#125;    <span class="hljs-keyword">return</span> s;&#125;</code></pre><h5 id="ç±»å‹ä¸‰-è·¯å¾„ä¸è·¯å¾„å’Œ"><a href="#ç±»å‹ä¸‰-è·¯å¾„ä¸è·¯å¾„å’Œ" class="headerlink" title="ç±»å‹ä¸‰ è·¯å¾„ä¸è·¯å¾„å’Œ"></a>ç±»å‹ä¸‰ è·¯å¾„ä¸è·¯å¾„å’Œ</h5><h6 id="113-https-leetcode-cn-com-problems-path-sum-ii"><a href="#113-https-leetcode-cn-com-problems-path-sum-ii" class="headerlink" title="[113] https://leetcode-cn.com/problems/path-sum-ii/"></a>[113] <a href="https://leetcode-cn.com/problems/path-sum-ii/">https://leetcode-cn.com/problems/path-sum-ii/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-title">pathSum</span><span class="hljs-params">(TreeNode* root, <span class="hljs-keyword">int</span> sum)</span> </span>&#123;    <span class="hljs-comment">// æ€»å…¥å£å‡½æ•°è§„å®šè¾“å…¥å’Œè¾“å‡º</span>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &gt; res;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> res;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span> &gt; path;    recur(root, path, res, sum);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">recur</span><span class="hljs-params">(TreeNode * root, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; path, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; res, <span class="hljs-keyword">int</span> sum)</span></span>&#123;    <span class="hljs-comment">// å¦‚æœä¸ºç©ºï¼Œ è¿”å›!</span>    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-comment">// æ‰§è¡Œæ“ä½œ</span>    path.push_back(root-&gt;val);    <span class="hljs-comment">// æ»¡è¶³æ¡ä»¶çš„æ“ä½œ</span>    <span class="hljs-keyword">if</span>(root-&gt;val == sum &amp;&amp; root-&gt;left == <span class="hljs-literal">NULL</span> &amp;&amp; root-&gt;right == <span class="hljs-literal">NULL</span>)&#123;        res.push_back(path);    &#125;    <span class="hljs-comment">// ä¸¤æ¬¡é€’å½’!</span>    recur(root-&gt;left, path, res, sum - root-&gt;val);    recur(root-&gt;right, path, res, sum - root-&gt;val);    <span class="hljs-comment">// ä»”ç»†è€ƒè™‘æ­¤å¤„æ˜¯ä¸æ˜¯åº”è¯¥æ·»åŠ !</span>    path.pop_back();&#125;</code></pre><h6 id="112-https-leetcode-cn-com-problems-path-sum"><a href="#112-https-leetcode-cn-com-problems-path-sum" class="headerlink" title="[112] https://leetcode-cn.com/problems/path-sum/"></a>[112] <a href="https://leetcode-cn.com/problems/path-sum/">https://leetcode-cn.com/problems/path-sum/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">hasPathSum</span><span class="hljs-params">(TreeNode* root, <span class="hljs-keyword">int</span> sum)</span> </span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">if</span>(sum == root-&gt;val &amp;&amp; root-&gt;left == <span class="hljs-literal">NULL</span> &amp;&amp; root-&gt;right == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    <span class="hljs-keyword">bool</span> left = hasPathSum(root-&gt;left, sum - root-&gt;val);    <span class="hljs-keyword">bool</span> right = hasPathSum(root-&gt;right, sum - root-&gt;val);    <span class="hljs-keyword">return</span> left || right;&#125;</code></pre><h6 id="129-https-leetcode-cn-com-problems-sum-root-to-leaf-numbers-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#129-https-leetcode-cn-com-problems-sum-root-to-leaf-numbers-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[129] https://leetcode-cn.com/problems/sum-root-to-leaf-numbers/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[129] <a href="https://leetcode-cn.com/problems/sum-root-to-leaf-numbers/">https://leetcode-cn.com/problems/sum-root-to-leaf-numbers/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sumNumbers</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;    TreeNode * cur = root;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; path;    recur(cur, res, path);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">recur</span><span class="hljs-params">(TreeNode * root,<span class="hljs-keyword">int</span>&amp; res, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; path)</span></span>&#123;    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;    path.push_back(root-&gt;val);    <span class="hljs-keyword">if</span>(root -&gt; left == <span class="hljs-literal">NULL</span> &amp;&amp; root -&gt; right == <span class="hljs-literal">NULL</span>)&#123; <span class="hljs-comment">// å¶å­èŠ‚ç‚¹</span>        <span class="hljs-keyword">int</span> pathsum = <span class="hljs-number">0</span>;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n: path) pathsum = pathsum * <span class="hljs-number">10</span> + n;        res += pathsum;    &#125;    recur(root-&gt;left, res, path);    recur(root-&gt;right, res, path);    path.pop_back();&#125;</code></pre><h6 id="543-äºŒå‰æ ‘çš„ç›´å¾„-https-leetcode-cn-com-problems-diameter-of-binary-tree"><a href="#543-äºŒå‰æ ‘çš„ç›´å¾„-https-leetcode-cn-com-problems-diameter-of-binary-tree" class="headerlink" title="[543] äºŒå‰æ ‘çš„ç›´å¾„ https://leetcode-cn.com/problems/diameter-of-binary-tree/"></a>[543] äºŒå‰æ ‘çš„ç›´å¾„ <a href="https://leetcode-cn.com/problems/diameter-of-binary-tree/">https://leetcode-cn.com/problems/diameter-of-binary-tree/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// ç›´å¾„æ˜¯è¾¹çš„é•¿åº¦ï¼Œ è€Œä¸æ˜¯èŠ‚ç‚¹æ•°ã€‚é€šè¿‡è§‚å¯Ÿå¯ä»¥çœ‹å‡ºï¼Œ è¿™é‡Œçš„ç›´å¾„ä¸€å®šæ˜¯æŸä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘çš„æ·±åº¦ + å³å­æ ‘çš„æ·±åº¦ã€‚</span><span class="hljs-comment">// åŸºäºè¿™ä¸ªé€»è¾‘ã€‚ å¯ä»¥å¯¹æ±‚æ·±åº¦çš„ä»£ç è¿›è¡Œæ›´æ”¹å³å¯</span><span class="hljs-keyword">public</span>:    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">diameterOfBinaryTree</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;        <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;        <span class="hljs-keyword">int</span> max_depth = depth(root);        <span class="hljs-keyword">return</span> res;    &#125;    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">depth</span><span class="hljs-params">(TreeNode * root)</span></span>&#123;        <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;                <span class="hljs-keyword">int</span> left = depth(root-&gt;left);        <span class="hljs-keyword">int</span> right = depth(root-&gt;right);        <span class="hljs-comment">// è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼š ä¸ºä»€ä¹ˆä½¿ç”¨ååº? å› ä¸ºè¦å…ˆè·å¾—ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æ·±åº¦</span>        res = max(res, left + right); <span class="hljs-comment">// (1) å¦‚æœä¸è€ƒè™‘è¿™è¡Œï¼Œ è¯¥å‡½æ•°æ˜¯æ±‚è¯¥èŠ‚ç‚¹çš„æœ€å¤§çš„æ·±åº¦</span>                                      <span class="hljs-comment">// (2) è¿™è¡Œæ˜¯å»æ±‚ä¹‹å‰çš„æœ€å¤§ç›´å¾„ï¼Œ å’Œç»è¿‡è¯¥èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„</span>                    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + max(left, right);    &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;</code></pre><h6 id="124-Binary-Tree-Maximum-Path-Sum-https-leetcode-com-problems-binary-tree-maximum-path-sum-description-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#124-Binary-Tree-Maximum-Path-Sum-https-leetcode-com-problems-binary-tree-maximum-path-sum-description-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[124] Binary Tree Maximum Path Sum https://leetcode.com/problems/binary-tree-maximum-path-sum/description/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[124] Binary Tree Maximum Path Sum <a href="https://leetcode.com/problems/binary-tree-maximum-path-sum/description/">https://leetcode.com/problems/binary-tree-maximum-path-sum/description/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-comment">// è¿™é“é¢˜ç›®å’Œä¸Šä¸€é“å¾ˆç±»ä¼¼</span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxPathSum</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;    helper(root);    <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">helper</span><span class="hljs-params">(TreeNode * root)</span></span>&#123;    <span class="hljs-comment">// æ±‚ ä»¥ root ä¸ºå‡ºå‘ç‚¹çš„ æœ€å¤§è·¯å¾„å’Œ</span>    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;    <span class="hljs-keyword">int</span> left = helper(root-&gt;left);    <span class="hljs-keyword">int</span> right = helper(root-&gt;right);    <span class="hljs-comment">// åˆ†ä¸‰ç§æƒ…å†µ:</span>    <span class="hljs-comment">// (1) root-&gt;val  æ ¹èŠ‚ç‚¹</span>    <span class="hljs-comment">// (2) root-&gt;val + max(root-&gt;left, roor-&gt;right) æ ¹èŠ‚ç‚¹ + å·¦å­æ ‘ or å³å­æ ‘</span>    <span class="hljs-comment">// (3) root-&gt;val + root-&gt;left + root-&gt;left æ ¹èŠ‚ç‚¹ + å·¦å­æ ‘ + å³å­æ ‘</span>    <span class="hljs-keyword">int</span> max_path_sum = max(root-&gt;val ,                            max(root-&gt;val + max(left, right),                                root-&gt;val + left + right)))    res = max(res,  max_path_sum);    <span class="hljs-comment">// åˆ†ä¸¤ç§æƒ…å†µ:</span>    <span class="hljs-comment">// (1) å­¤ç«‹çš„å•ä¸€èŠ‚ç‚¹</span>    <span class="hljs-comment">// (2) æ ¹èŠ‚ç‚¹ + å·¦å³å­æ ‘çš„æœ€å¤§å€¼</span>    <span class="hljs-keyword">return</span> max(root-&gt;val, max(left, right) + root-&gt;val);&#125;<span class="hljs-keyword">int</span> res = INT_MIN;</code></pre><h5 id="ç±»å‹å››ï¼š-é‡å»ºäºŒå‰æ ‘"><a href="#ç±»å‹å››ï¼š-é‡å»ºäºŒå‰æ ‘" class="headerlink" title="ç±»å‹å››ï¼š é‡å»ºäºŒå‰æ ‘"></a>ç±»å‹å››ï¼š é‡å»ºäºŒå‰æ ‘</h5><h6 id="617-https-leetcode-com-problems-merge-two-binary-trees"><a href="#617-https-leetcode-com-problems-merge-two-binary-trees" class="headerlink" title="[617] https://leetcode.com/problems/merge-two-binary-trees/"></a>[617] <a href="https://leetcode.com/problems/merge-two-binary-trees/">https://leetcode.com/problems/merge-two-binary-trees/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">TreeNode* <span class="hljs-title">mergeTrees</span><span class="hljs-params">(TreeNode* t1, TreeNode* t2)</span> </span>&#123;    <span class="hljs-keyword">if</span>(t1 == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> t2;    <span class="hljs-keyword">if</span>(t2 == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> t1;    TreeNode * pNode = <span class="hljs-keyword">new</span> TreeNode(t1-&gt;val + t2-&gt;val);    pNode -&gt; left = mergeTrees(t1-&gt;left, t2-&gt;left);    pNode -&gt; right = mergeTrees(t1-&gt;right, t2-&gt;right);    <span class="hljs-keyword">return</span> pNode;&#125;</code></pre><h6 id="105-https-leetcode-cn-com-problems-construct-binary-tree-from-preorder-and-inorder-traversal-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#105-https-leetcode-cn-com-problems-construct-binary-tree-from-preorder-and-inorder-traversal-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[105] https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/   ğŸŒŸğŸŒŸğŸŒŸ"></a>[105] <a href="https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">https://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/</a>   ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-keyword">public</span>:    <span class="hljs-function">TreeNode* <span class="hljs-title">buildTree</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; preorder, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; inorder)</span> </span>&#123;        po = preorder; <span class="hljs-comment">// å‰åºåºåˆ—å…¨å±€åŒ–</span>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;  i &lt; inorder.size(); i++) <span class="hljs-comment">// ä¸­åºåºåˆ— map åŒ–</span>            m_map[inorder[i]] = i;        <span class="hljs-keyword">return</span> helper(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, inorder.size()<span class="hljs-number">-1</span>); <span class="hljs-comment">// call</span>    &#125;    <span class="hljs-function">TreeNode * <span class="hljs-title">helper</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pre_root, <span class="hljs-keyword">int</span> left, <span class="hljs-keyword">int</span> right)</span></span>&#123;        <span class="hljs-comment">/* pre_root: æ ¹èŠ‚ç‚¹åœ¨å‰åºéå†ä¸­çš„ä¸‹è¡¨</span><span class="hljs-comment">           left: ä¸­åºéå†çš„å·¦ä¾§è¾¹ç•Œ</span><span class="hljs-comment">           right: ä¸­åºéå†çš„å³ä¾§è¾¹ç•Œ  */</span>        <span class="hljs-keyword">if</span>(left &gt; right) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// é€€å‡ºæ¡ä»¶</span>        TreeNode * root = <span class="hljs-keyword">new</span> TreeNode(po[pre_root]);        <span class="hljs-keyword">int</span> i  = m_map[po[pre_root]]; <span class="hljs-comment">// æ‰¾åˆ°æ ¹èŠ‚ç‚¹åœ¨ä¸­åºéå† index ä½œä¸ºåˆ’åˆ†æ ‡å‡†</span>        root -&gt; left = helper(pre_root+<span class="hljs-number">1</span>, left, i<span class="hljs-number">-1</span>);        <span class="hljs-comment">// æ‰¾åˆ°å³å­æ ‘çš„æ ¹èŠ‚ç‚¹: å‰åºéå†çš„æ ¹èŠ‚ç‚¹çš„åæ ‡ + å·¦å­æ ‘çš„ä¸ªæ•° + 1</span>        root -&gt; right = helper(pre_root + (i-left)+<span class="hljs-number">1</span>, i+<span class="hljs-number">1</span>, right);        <span class="hljs-keyword">return</span> root;     &#125;<span class="hljs-keyword">private</span>:    <span class="hljs-built_in">map</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; m_map;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; po;</code></pre><h6 id="108-Convert-Sorted-Array-to-Binary-Search-Tree"><a href="#108-Convert-Sorted-Array-to-Binary-Search-Tree" class="headerlink" title="[108] Convert Sorted Array to Binary Search Tree"></a>[108] Convert Sorted Array to Binary Search Tree</h6><pre><code class="hljs cpp"><span class="hljs-comment">// å°†äºŒå‰æ ‘å’ŒäºŒåˆ†æŸ¥æ‰¾ç»“åˆçš„ä¸€é“é¢˜ç›®</span><span class="hljs-function">TreeNode* <span class="hljs-title">sortedArrayToBST</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-keyword">if</span>(nums.size() == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;    <span class="hljs-keyword">return</span> heler(nums, <span class="hljs-number">0</span>, nums.size()<span class="hljs-number">-1</span>);&#125;<span class="hljs-function">TreeNode* <span class="hljs-title">heler</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; nums, <span class="hljs-keyword">int</span> begin, <span class="hljs-keyword">int</span> end)</span></span>&#123;    <span class="hljs-keyword">if</span>(begin &gt; end) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;    <span class="hljs-keyword">int</span> mid = begin + (end - begin) / <span class="hljs-number">2</span>;    TreeNode * root = <span class="hljs-keyword">new</span> TreeNode(nums[mid]);    root-&gt;left = heler(nums, begin, mid<span class="hljs-number">-1</span>);    root-&gt;right = heler(nums, mid+<span class="hljs-number">1</span>, end);    <span class="hljs-keyword">return</span> root;&#125;&#125;;</code></pre><h6 id="109-æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘-https-leetcode-cn-com-problems-convert-sorted-list-to-binary-search-tree-ğŸŒŸğŸŒŸ"><a href="#109-æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘-https-leetcode-cn-com-problems-convert-sorted-list-to-binary-search-tree-ğŸŒŸğŸŒŸ" class="headerlink" title="[109] æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘ https://leetcode-cn.com/problems/convert-sorted-list-to-binary-search-tree/   ğŸŒŸğŸŒŸ"></a>[109] æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘ <a href="https://leetcode-cn.com/problems/convert-sorted-list-to-binary-search-tree/">https://leetcode-cn.com/problems/convert-sorted-list-to-binary-search-tree/</a>   ğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">TreeNode* <span class="hljs-title">sortedListToBST</span><span class="hljs-params">(ListNode* head)</span> </span>&#123;    <span class="hljs-keyword">if</span>(head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;    <span class="hljs-comment">//  ç¬¬ä¸€éå†™çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¡ä»¶æ²¡æœ‰å¤„ç†å¥½</span>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(head -&gt; next == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> TreeNode(head-&gt;val);         ListNode * fast = head;    ListNode * slow = head;    ListNode * prev = head;    <span class="hljs-keyword">while</span>(fast &amp;&amp; fast -&gt; next)&#123;        prev = slow;        fast = fast -&gt; next -&gt; next;        slow = slow -&gt; next;    &#125;    prev -&gt; next = <span class="hljs-literal">NULL</span>;    TreeNode * root = <span class="hljs-keyword">new</span> TreeNode(slow-&gt;val);    root-&gt;left = sortedListToBST(head);    root-&gt;right = sortedListToBST(slow-&gt;next);    <span class="hljs-keyword">return</span> root;   &#125;</code></pre><h5 id="ç±»å‹äº”ï¼šæœ€ä½å…¬å…±ç¥–å…ˆ"><a href="#ç±»å‹äº”ï¼šæœ€ä½å…¬å…±ç¥–å…ˆ" class="headerlink" title="ç±»å‹äº”ï¼šæœ€ä½å…¬å…±ç¥–å…ˆ"></a>ç±»å‹äº”ï¼šæœ€ä½å…¬å…±ç¥–å…ˆ</h5><h6 id="235-https-leetcode-cn-com-problems-lowest-common-ancestor-of-a-binary-search-tree"><a href="#235-https-leetcode-cn-com-problems-lowest-common-ancestor-of-a-binary-search-tree" class="headerlink" title="[235] https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/"></a>[235] <a href="https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/">https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/</a></h6><pre><code class="hljs cpp"><span class="hljs-function">TreeNode* <span class="hljs-title">lowestCommonAncestor</span><span class="hljs-params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>&#123;    <span class="hljs-keyword">if</span>(p-&gt;val &gt; root-&gt;val &amp;&amp; q-&gt;val &gt; root-&gt;val)&#123;        <span class="hljs-keyword">return</span> lowestCommonAncestor(root-&gt;right, p, q);    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(p-&gt;val &lt; root-&gt;val &amp;&amp; q-&gt;val &lt; root-&gt;val)&#123;        <span class="hljs-keyword">return</span> lowestCommonAncestor(root-&gt;left, p, q);    &#125;    <span class="hljs-keyword">return</span> root;&#125;</code></pre><h6 id="236-äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ-https-leetcode-cn-com-problems-lowest-common-ancestor-of-a-binary-tree-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#236-äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ-https-leetcode-cn-com-problems-lowest-common-ancestor-of-a-binary-tree-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="[236] äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/  ğŸŒŸğŸŒŸğŸŒŸ"></a>[236] äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ <a href="https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/">https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/</a>  ğŸŒŸğŸŒŸğŸŒŸ</h6><pre><code class="hljs cpp"><span class="hljs-function">TreeNode* <span class="hljs-title">lowestCommonAncestor</span><span class="hljs-params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>&#123;    <span class="hljs-comment">// exit: æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œ æˆ–è€…æ‰¾åˆ° pèŠ‚ç‚¹ æˆ–è€… qèŠ‚ç‚¹</span>    <span class="hljs-keyword">if</span>(root == <span class="hljs-literal">NULL</span> || p == root || q == root) <span class="hljs-keyword">return</span> root;    <span class="hljs-comment">// é€’å½’å¼ï¼šä»æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘å¯»æ‰¾pã€qçš„èŠ‚ç‚¹</span>    TreeNode * left = lowestCommonAncestor(root-&gt;left, p, q);    TreeNode * right = lowestCommonAncestor(root-&gt;right, p, q);    <span class="hljs-comment">// åˆ¤æ–­å…¶ç¥–å…ˆä½ç½®</span>    <span class="hljs-keyword">if</span>(left &amp;&amp; right) <span class="hljs-keyword">return</span> root; <span class="hljs-comment">// åˆ†åˆ«å‡ºç°åœ¨å·¦å³å­æ ‘ï¼Œ åˆ™è¯¥èŠ‚ç‚¹ä¸ºæœ€ä½å…¬å…±ç¥–å…ˆ</span>    <span class="hljs-keyword">return</span> left ? left : right; &#125;</code></pre><h3 id="5-å›¾"><a href="#5-å›¾" class="headerlink" title="5. å›¾"></a>5. å›¾</h3><h3 id="6-å­—å…¸-map-çš„ä½¿ç”¨"><a href="#6-å­—å…¸-map-çš„ä½¿ç”¨" class="headerlink" title="6. å­—å…¸ map çš„ä½¿ç”¨"></a>6. å­—å…¸ map çš„ä½¿ç”¨</h3><ul><li><p>STL æä¾›äº†  Map/MultiMap å’Œ Unordered Map/Multi-Map æ¥è¿›è¡Œå­—å…¸æ“ä½œï¼Œ å…¶ä¸­å‰è€…çš„åº•å±‚æ˜¯çº¢é»‘æ ‘ï¼Œåè€…çš„åº•å±‚æ‰æ˜¯ å“ˆå¸Œè¡¨</p></li><li><p>è¿›è¡Œç´¢å¼•æ—¶ï¼Œ å¦‚æœæ²¡æœ‰ keyï¼Œ åˆ™ä¼šè‡ªåŠ¨æ’å…¥ keyï¼Œ ä¸”å¦‚æœ value ä¸º intï¼Œ åˆ™åˆå§‹åŒ–ä¸º 0</p><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> k in keys:    m_map[k]++;</code></pre></li><li><p>ç»å¸¸ä¼šä½¿ç”¨æ•°ç»„æ¥ä»£æ›¿hashmapï¼Œ å½¢æˆ index -&gt; value è¿™æ ·ä¸€ç§æ˜ å°„ï¼Œ è¿™ç§æ“ä½œåœ¨å­—ç¬¦ä¸²ä¸­å°¤ä¸ºå¸¸è§ã€‚ </p></li><li><p>å¸¸è§çš„ set/map API</p><pre><code class="hljs cpp">begin()   end()   empty()   size()erase(iterator)       erase(key_value)find()s.insert(key_value); <span class="hljs-comment">// set  </span>m[key] = val;  <span class="hljs-comment">// map</span></code></pre></li></ul><h6 id="347-å‰-K-ä¸ªé«˜é¢‘å…ƒç´ -https-leetcode-cn-com-problems-top-k-frequent-elements"><a href="#347-å‰-K-ä¸ªé«˜é¢‘å…ƒç´ -https-leetcode-cn-com-problems-top-k-frequent-elements" class="headerlink" title="[347] å‰ K ä¸ªé«˜é¢‘å…ƒç´  https://leetcode-cn.com/problems/top-k-frequent-elements/"></a>[347] å‰ K ä¸ªé«˜é¢‘å…ƒç´  <a href="https://leetcode-cn.com/problems/top-k-frequent-elements/">https://leetcode-cn.com/problems/top-k-frequent-elements/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">topKFrequent</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> k)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-built_in">map</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; m_map;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n:nums)  m_map[n]++; <span class="hljs-comment">// å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨æ·»åŠ ï¼Œ ä¸” value åˆå§‹åŒ–ä¸º 0</span>    <span class="hljs-comment">// å°† map è½¬åŒ–ä¸º vector è¿›è¡Œæ’åº</span>    vector&lt;pair&lt;int, int&gt; &gt; pair_vec(m_map.begin(), m_map.end());     sort(pair_vec.begin(), pair_vec.end(),             [](<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; a, <span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; b)&#123;<span class="hljs-keyword">return</span> a.second &gt; b.second;&#125;);  <span class="hljs-comment">// lambda ç®—å­</span>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> p: pair_vec)&#123;        <span class="hljs-keyword">if</span>(i++ &lt; k) res.push_back(p.first);     &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="387-å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦-https-leetcode-cn-com-problems-first-unique-character-in-a-string"><a href="#387-å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦-https-leetcode-cn-com-problems-first-unique-character-in-a-string" class="headerlink" title="[387] å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ https://leetcode-cn.com/problems/first-unique-character-in-a-string/"></a>[387] å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ <a href="https://leetcode-cn.com/problems/first-unique-character-in-a-string/">https://leetcode-cn.com/problems/first-unique-character-in-a-string/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// ä¸è¦ä½¿ç”¨ map, ç›´æ¥ä½¿ç”¨ æ•°ç»„ ä½œä¸º å“ˆå¸Œè¡¨å³å¯</span><span class="hljs-function"><span class="hljs-keyword">char</span> <span class="hljs-title">firstUniqChar</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s)</span> </span>&#123;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">dic</span><span class="hljs-params">(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>)</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> c:s)   dic[ c - <span class="hljs-string">&#x27;a&#x27;</span>] += <span class="hljs-number">1</span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> c:s)   <span class="hljs-keyword">if</span>(dic[c - <span class="hljs-string">&#x27;a&#x27;</span>] == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> c;    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27; &#x27;</span>; <span class="hljs-comment">// å¯ä»¥ç›´æ¥ return  &#x27; &#x27; çš„</span>&#125;</code></pre><h6 id="lcof-57-å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—-https-leetcode-cn-com-problems-he-wei-sde-liang-ge-shu-zi-lcof"><a href="#lcof-57-å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—-https-leetcode-cn-com-problems-he-wei-sde-liang-ge-shu-zi-lcof" class="headerlink" title="[lcof 57] å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­— https://leetcode-cn.com/problems/he-wei-sde-liang-ge-shu-zi-lcof/"></a>[lcof 57] å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­— <a href="https://leetcode-cn.com/problems/he-wei-sde-liang-ge-shu-zi-lcof/">https://leetcode-cn.com/problems/he-wei-sde-liang-ge-shu-zi-lcof/</a></h6><pre><code class="hljs cpp"><span class="hljs-comment">// è¦æ±‚è¿”å›ä¸‹æ ‡æ—¶ -&gt; ä½¿ç”¨å“ˆå¸Œè¡¨è§£å†³</span><span class="hljs-comment">//    è¿”å›æ•°å€¼æ—¶ -&gt; ä½¿ç”¨æ’åº + åŒæŒ‡é’ˆ</span><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">twoSum</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>&#123;    <span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">int</span>&gt; m_set;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> n : nums)&#123;        <span class="hljs-keyword">if</span>(m_set.find(target - n) == m_set.end())&#123;            m_set.insert(n);        &#125;<span class="hljs-keyword">else</span>&#123;            res.push_back(n);            res.push_back(target - n);            <span class="hljs-keyword">break</span>;        &#125;    &#125;    <span class="hljs-keyword">return</span> res; &#125;</code></pre><h6 id="242-æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯-https-leetcode-cn-com-problems-valid-anagram"><a href="#242-æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯-https-leetcode-cn-com-problems-valid-anagram" class="headerlink" title="[242]. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ https://leetcode-cn.com/problems/valid-anagram/"></a>[242]. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ <a href="https://leetcode-cn.com/problems/valid-anagram/">https://leetcode-cn.com/problems/valid-anagram/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isAnagram</span><span class="hljs-params">(<span class="hljs-built_in">string</span> s, <span class="hljs-built_in">string</span> t)</span> </span>&#123;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt; <span class="hljs-title">m_vec</span><span class="hljs-params">(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>)</span></span>;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> c:s) m_vec[c-<span class="hljs-string">&#x27;a&#x27;</span>]++;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> c:t) m_vec[c-<span class="hljs-string">&#x27;a&#x27;</span>]--;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i &lt; m_vec.size(); i++)        <span class="hljs-keyword">if</span>(m_vec[i] != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;</code></pre><h6 id="49-å­—æ¯å¼‚ä½è¯åˆ†ç»„-https-leetcode-cn-com-problems-group-anagrams"><a href="#49-å­—æ¯å¼‚ä½è¯åˆ†ç»„-https-leetcode-cn-com-problems-group-anagrams" class="headerlink" title="[49] å­—æ¯å¼‚ä½è¯åˆ†ç»„ https://leetcode-cn.com/problems/group-anagrams/"></a>[49] å­—æ¯å¼‚ä½è¯åˆ†ç»„ <a href="https://leetcode-cn.com/problems/group-anagrams/">https://leetcode-cn.com/problems/group-anagrams/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; <span class="hljs-title">groupAnagrams</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; strs)</span> </span>&#123;        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; &gt; res;        <span class="hljs-built_in">map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; &gt;  m_map;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> str: strs)&#123;            <span class="hljs-built_in">string</span> ori_str = str;            sort(str.begin(), str.end());            m_map[str].push_back(ori_str);        &#125;        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it:m_map) res.push_back(it.second);        <span class="hljs-keyword">return</span> res;&#125;</code></pre><h6 id="448-æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—-https-leetcode-cn-com-problems-find-all-numbers-disappeared-in-an-array"><a href="#448-æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—-https-leetcode-cn-com-problems-find-all-numbers-disappeared-in-an-array" class="headerlink" title="[448] æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­— https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/"></a>[448] æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­— <a href="https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/">https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/</a></h6><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">findDisappearedNumbers</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; res;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">int</span> index = <span class="hljs-built_in">abs</span>(nums[i]) - <span class="hljs-number">1</span>;        <span class="hljs-keyword">if</span>(nums[index] &gt; <span class="hljs-number">0</span>)             nums[index] = <span class="hljs-number">-1</span> * nums[index];    &#125;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;  i &lt; nums.size(); i++)&#123;        <span class="hljs-keyword">if</span>(nums[i] &gt; <span class="hljs-number">0</span>) res.push_back(i+<span class="hljs-number">1</span>);    &#125;    <span class="hljs-keyword">return</span> res;&#125;</code></pre><h3 id="7-ç‰¹æ®Šç»“æ„"><a href="#7-ç‰¹æ®Šç»“æ„" class="headerlink" title="7. ç‰¹æ®Šç»“æ„"></a>7. ç‰¹æ®Šç»“æ„</h3>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>camera-calibration</title>
    <link href="/2019/06/09/camera-calibration/"/>
    <url>/2019/06/09/camera-calibration/</url>
    
    <content type="html"><![CDATA[<p>ç›¸æœºæ ‡å®šç›¸å…³æ€»ç»“</p><a id="more"></a><h4 id="1-ä¸ºä»€ä¹ˆéœ€è¦ç›¸æœºæ ‡å®šï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦ç›¸æœºæ ‡å®šï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦ç›¸æœºæ ‡å®šï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆéœ€è¦ç›¸æœºæ ‡å®šï¼Ÿ</h4><p>ç›¸æœºæœºæ ‡å®šçš„ç›®çš„ï¼šå»ºç«‹ç›¸æœºæˆåƒå‡ ä½•æ¨¡å‹å¹¶çŸ«æ­£é€é•œç•¸å˜ã€‚</p><p><strong>å»ºç«‹ç›¸æœºæˆåƒé›†åˆæ¨¡å‹</strong>ï¼šè®¡ç®—æœºè§†è§‰çš„é¦–è¦ä»»åŠ¡å°±æ˜¯è¦é€šè¿‡æ‹æ‘„åˆ°çš„å›¾åƒä¿¡æ¯è·å–åˆ°ç‰©ä½“åœ¨çœŸå®ä¸‰ç»´ä¸–ç•Œé‡Œç›¸å¯¹åº”çš„ä¿¡æ¯ï¼Œäºæ˜¯ï¼Œå»ºç«‹ç‰©ä½“ä»ä¸‰ç»´ä¸–ç•Œæ˜ å°„åˆ°ç›¸æœºæˆåƒå¹³é¢è¿™ä¸€è¿‡ç¨‹ä¸­çš„å‡ ä½•æ¨¡å‹å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œè€Œè¿™ä¸€è¿‡ç¨‹æœ€å…³é”®çš„éƒ¨åˆ†å°±æ˜¯è¦å¾—åˆ°ç›¸æœºçš„<strong>å†…å‚å’Œå¤–å‚</strong>ã€‚</p><p><strong>çŸ«æ­£é€é•œç•¸å˜</strong>ï¼šæˆ‘ä»¬æœ€å¼€å§‹æ¥è§¦åˆ°çš„æˆåƒæ–¹é¢çš„çŸ¥è¯†åº”è¯¥æ˜¯æœ‰å…³å°å­”æˆåƒçš„ï¼Œä½†æ˜¯ç”±äºè¿™ç§æˆåƒæ–¹å¼åªæœ‰å°å­”éƒ¨åˆ†èƒ½é€è¿‡å…‰çº¿å°±ä¼šå¯¼è‡´ç‰©ä½“çš„æˆåƒäº®åº¦å¾ˆä½ï¼Œäºæ˜¯èªæ˜çš„äººç±»å‘æ˜äº†é€é•œã€‚è™½ç„¶äº®åº¦é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯æ–°çš„é—®é¢˜åˆæ¥äº†ï¼šç”±äºé€é•œçš„åˆ¶é€ å·¥è‰ºï¼Œä¼šä½¿æˆåƒäº§ç”Ÿå¤šç§å½¢å¼çš„ç•¸å˜ï¼Œäºæ˜¯ä¸ºäº†å»é™¤ç•¸å˜ï¼ˆä½¿æˆåƒåçš„å›¾åƒä¸çœŸå®ä¸–ç•Œçš„æ™¯è±¡ä¿æŒä¸€è‡´ï¼‰ï¼Œäººä»¬è®¡ç®—å¹¶åˆ©ç”¨<strong>ç•¸å˜ç³»æ•°</strong>æ¥çŸ«æ­£è¿™ç§åƒå·®ã€‚è™½ç„¶ç†è®ºä¸Šå¯ä»¥è®¾è®¡å‡ºä¸äº§ç”Ÿç•¸å˜çš„é€é•œï¼Œä½†å…¶åˆ¶é€ å·¥è‰ºç›¸å¯¹äºçƒé¢é€é•œä¼šå¤æ‚å¾ˆå¤šï¼Œæ‰€ä»¥ç›¸å¯¹äºå¤æ‚ä¸”é«˜æˆæœ¬çš„åˆ¶é€ å·¥è‰ºï¼Œäººä»¬æ›´å–œæ¬¢ç”¨æ•°å­¦æ¥è§£å†³é—®é¢˜ã€‚</p><p>å¸¸è§æœ¯è¯­ï¼š</p><ul><li>å†…å‚çŸ©é˜µ: Intrinsic Matrix </li><li>ç„¦è·: Focal Length </li><li>ä¸»ç‚¹: Principal Point </li><li>å¾„å‘ç•¸å˜: Radial Distortion </li><li>åˆ‡å‘ç•¸å˜: Tangential Distortion </li><li>æ—‹è½¬çŸ©é˜µ: Rotation Matrices </li><li>å¹³ç§»å‘é‡: Translation Vectors </li><li>å¹³å‡é‡æŠ•å½±è¯¯å·®: Mean Reprojection Error </li><li>é‡æŠ•å½±è¯¯å·®: Reprojection Errors </li><li>é‡æŠ•å½±ç‚¹: Reprojected Points</li></ul><h4 id="2-åŸºç¡€çŸ¥è¯†"><a href="#2-åŸºç¡€çŸ¥è¯†" class="headerlink" title="2. åŸºç¡€çŸ¥è¯†"></a>2. åŸºç¡€çŸ¥è¯†</h4><p>ç›¸æœºæ ‡å®šçš„ç›®çš„ä¹‹ä¸€æ˜¯ä¸ºäº†å»ºç«‹ç‰©ä½“ä»ä¸‰ç»´ä¸–ç•Œåˆ°æˆåƒå¹³é¢ä¸Šå„åæ ‡ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰è¿™æ ·å‡ ä¸ªåæ ‡ç³»æ¥ä¸ºæ•´ä¸ªè¿‡ç¨‹åšå¥½é“ºå«ï¼š</p><p><strong>ä¸–ç•Œåæ ‡ç³»(world coordinate system)</strong>ï¼šç”¨æˆ·å®šä¹‰çš„ä¸‰ç»´ä¸–ç•Œçš„åæ ‡ç³»ï¼Œä¸ºäº†æè¿°ç›®æ ‡ç‰©åœ¨çœŸå®ä¸–ç•Œé‡Œçš„ä½ç½®è€Œè¢«å¼•å…¥ï¼Œå•ä½ä¸ºmã€‚</p><p><strong>ç›¸æœºåæ ‡ç³»(camera coordinate system)</strong>ï¼šåœ¨ç›¸æœºä¸Šå»ºç«‹çš„åæ ‡ç³»ï¼Œä¸ºäº†ä»ç›¸æœºçš„è§’åº¦æè¿°ç‰©ä½“ä½ç½®è€Œå®šä¹‰ï¼Œä½œä¸ºæ²Ÿé€šä¸–ç•Œåæ ‡ç³»å’Œå›¾åƒ/åƒç´ åæ ‡ç³»çš„ä¸­é—´ä¸€ç¯ã€‚å•ä½ä¸ºmã€‚</p><p><strong>å›¾åƒåæ ‡ç³»(image coordinate system)</strong>ï¼šä¸ºäº†æè¿°æˆåƒè¿‡ç¨‹ä¸­ç‰©ä½“ä»ç›¸æœºåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»çš„æŠ•å½±é€å°„å…³ç³»è€Œå¼•å…¥ï¼Œæ–¹ä¾¿è¿›ä¸€æ­¥å¾—åˆ°åƒç´ åæ ‡ç³»ä¸‹çš„åæ ‡ã€‚ å•ä½ä¸ºmã€‚</p><p><strong>åƒç´ åæ ‡ç³»(pixel coordinate system)</strong>ï¼šä¸ºäº†æè¿°ç‰©ä½“æˆåƒåçš„åƒç‚¹åœ¨æ•°å­—å›¾åƒä¸Šï¼ˆç›¸ç‰‡ï¼‰çš„åæ ‡è€Œå¼•å…¥ï¼Œæ˜¯æˆ‘ä»¬çœŸæ­£ä»ç›¸æœºå†…è¯»å–åˆ°çš„ä¿¡æ¯æ‰€åœ¨çš„åæ ‡ç³»ã€‚å•ä½ä¸ºä¸ªï¼ˆåƒç´ æ•°ç›®ï¼‰ã€‚</p><p>ä¸‹å›¾å¯ä»¥æ›´æ¸…æ™°åœ°è¡¨è¾¾è¿™å››ä¸ªåæ ‡ç³»ä¹‹é—´çš„å…³ç³»ï¼š</p><p><img src="/2019/06/09/camera-calibration/1.jpg" alt="img"></p><p>ä¸–ç•Œåæ ‡ç³»ï¼š$X_w$ ã€$Y_w$ã€$Z_w$</p><p>ç›¸æœºåæ ‡ç³»ï¼š $X_c$ã€$Y_c$ã€$Z_c$</p><p>å›¾åƒåæ ‡ç³»ï¼š$x$ã€$y$</p><p>åƒç´ åæ ‡ç³»ï¼š$u$ã€$v$ã€‚</p><p>ç›¸æœºåæ ‡ç³»çš„ $Z$ è½´ä¸å…‰è½´é‡åˆï¼Œä¸”å‚ç›´äºå›¾åƒåæ ‡ç³»å¹³é¢å¹¶é€šè¿‡å›¾åƒåæ ‡ç³»çš„åŸç‚¹ï¼Œç›¸æœºåæ ‡ç³»ä¸å›¾åƒåæ ‡ç³»ä¹‹é—´çš„è·ç¦»ä¸ºç„¦è·$f$ï¼ˆä¹Ÿå³å›¾åƒåæ ‡ç³»åŸç‚¹ä¸ç„¦ç‚¹é‡åˆï¼‰ã€‚åƒç´ åæ ‡ç³»å¹³é¢$u-v$å’Œå›¾åƒåæ ‡ç³»å¹³é¢$x-y$é‡åˆï¼Œä½†åƒç´ åæ ‡ç³»åŸç‚¹ä½äºå›¾ä¸­å·¦ä¸Šè§’ï¼ˆä¹‹æ‰€ä»¥è¿™ä¹ˆå®šä¹‰ï¼Œç›®çš„æ˜¯ä»å­˜å‚¨ä¿¡æ¯çš„é¦–åœ°å€å¼€å§‹è¯»å†™ï¼‰ã€‚</p><p><strong>æ£‹ç›˜</strong>æ˜¯ä¸€å—ç”±é»‘ç™½æ–¹å—é—´éš”ç»„æˆçš„æ ‡å®šæ¿ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥ä½œä¸ºç›¸æœºæ ‡å®šçš„<strong>æ ‡å®šç‰©</strong>ï¼ˆä»çœŸå®ä¸–ç•Œæ˜ å°„åˆ°æ•°å­—å›¾åƒå†…çš„å¯¹è±¡ï¼‰ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬ç”¨æ£‹ç›˜ä½œä¸ºæ ‡å®šç‰©æ˜¯å› ä¸ºå¹³é¢æ£‹ç›˜æ¨¡å¼æ›´å®¹æ˜“å¤„ç†ï¼ˆç›¸å¯¹äºå¤æ‚çš„ä¸‰ç»´ç‰©ä½“ï¼‰ï¼Œä½†ä¸æ­¤åŒæ—¶ï¼ŒäºŒç»´ç‰©ä½“ç›¸å¯¹äºä¸‰ç»´ç‰©ä½“ä¼šç¼ºå°‘ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œäºæ˜¯<strong>æˆ‘ä»¬ä¼šå¤šæ¬¡æ”¹å˜æ£‹ç›˜çš„æ–¹ä½æ¥æ•æ‰å›¾åƒï¼Œä»¥æ±‚è·å¾—æ›´ä¸°å¯Œçš„åæ ‡ä¿¡æ¯</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ˜¯ç›¸æœºåœ¨ä¸åŒæ–¹å‘ä¸‹æ‹æ‘„çš„åŒä¸€ä¸ªæ£‹ç›˜å›¾åƒã€‚</p><p><img src="/2019/06/09/camera-calibration/2.png" alt></p><p>ä¸‹é¢å°†ä¾æ¬¡å¯¹åˆšä½“è¿›è¡Œä¸€ç³»åˆ—å˜æ¢ï¼Œä½¿ä¹‹<strong>ä»ä¸–ç•Œåæ ‡ç³»è¿›è¡Œä»¿å°„å˜æ¢ã€æŠ•å½±é€å°„ï¼Œæœ€ç»ˆå¾—åˆ°åƒç´ åæ ‡ç³»ä¸‹çš„ç¦»æ•£å›¾åƒç‚¹ï¼Œè¿‡ç¨‹ä¸­ä¼šé€æ­¥å¼•å…¥å„å‚æ•°çŸ©é˜µ</strong>ã€‚</p><h5 id="1-ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»"><a href="#1-ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»" class="headerlink" title="(1) ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»"></a>(1) ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»</h5><p>åˆšä½“ä»ä¸–ç•Œåæ ‡ç³»è½¬æ¢åˆ°ç›¸æœºåæ ‡ç³»çš„è¿‡ç¨‹ï¼Œå¯ä»¥é€šè¿‡æ—‹è½¬å’Œå¹³ç§»æ¥å¾—åˆ°ï¼Œæˆ‘ä»¬å°†å…¶å˜æ¢çŸ©é˜µç”±ä¸€ä¸ªæ—‹è½¬çŸ©é˜µå’Œå¹³ç§»å‘é‡ç»„åˆæˆçš„é½æ¬¡åæ ‡çŸ©é˜µæ¥è¡¨ç¤ºï¼š</p><p><img src="/2019/06/09/camera-calibration/4.png" alt></p><p>å…¶ä¸­ï¼Œ$R$ä¸ºæ—‹è½¬çŸ©é˜µï¼Œ$t$ä¸ºå¹³ç§»å‘é‡ã€‚å…¶ä¸­å˜æ¢çŸ©é˜µ</p><p><img src="/2019/06/09/camera-calibration/7.png" alt></p><p>å³ä¸ºå‰æ–‡æåˆ°çš„å¤–å‚çŸ©é˜µï¼Œä¹‹æ‰€ç§°ä¹‹ä¸ºå¤–å‚çŸ©é˜µå¯ä»¥ç†è§£ä¸ºåªä¸ç›¸æœºå¤–éƒ¨å‚æ•°æœ‰å…³ï¼Œä¸”å¤–å‚çŸ©é˜µéšåˆšä½“ä½ç½®çš„å˜åŒ–è€Œå˜åŒ–ã€‚ä¸‹å›¾è¡¨ç¤ºäº†ç”¨Rï¼Œtå°†ä¸Šè¿°ä¸–ç•Œåæ ‡ç³»è½¬æ¢åˆ°ç›¸æœºåæ ‡ç³»çš„è¿‡ç¨‹ã€‚</p><p><img src="/2019/06/09/camera-calibration/8.png" alt></p><h5 id="2-ä»ç›¸æœºåæ ‡ç³»åˆ°ç†æƒ³å›¾åƒåæ ‡ç³»"><a href="#2-ä»ç›¸æœºåæ ‡ç³»åˆ°ç†æƒ³å›¾åƒåæ ‡ç³»" class="headerlink" title="(2) ä»ç›¸æœºåæ ‡ç³»åˆ°ç†æƒ³å›¾åƒåæ ‡ç³»"></a>(2) ä»ç›¸æœºåæ ‡ç³»åˆ°ç†æƒ³å›¾åƒåæ ‡ç³»</h5><p>è¿™ä¸€è¿‡ç¨‹è¿›è¡Œäº†ä»ä¸‰ç»´åæ ‡åˆ°äºŒç»´åæ ‡çš„è½¬æ¢ï¼Œä¹Ÿå³æŠ•å½±é€è§†è¿‡ç¨‹ï¼ˆç”¨ä¸­å¿ƒæŠ•å½±æ³•å°†ç‰©ä½“æŠ•å°„åˆ°æŠ•å½±é¢ä¸Šï¼Œä»è€Œè·å¾—çš„ä¸€ç§è¾ƒä¸ºæ¥è¿‘è§†è§‰æ•ˆæœçš„å•é¢æŠ•å½±å›¾ï¼Œä¹Ÿå°±æ˜¯ä½¿æˆ‘ä»¬äººçœ¼çœ‹åˆ°æ™¯ç‰©è¿‘å¤§è¿œå°çš„ä¸€ç§æˆåƒæ–¹å¼ï¼‰ã€‚æˆ‘ä»¬è¿˜æ˜¯æ‹¿é’ˆå­”æˆåƒæ¥è¯´æ˜ï¼ˆé™¤äº†æˆåƒäº®åº¦ä½å¤–ï¼Œæˆåƒæ•ˆæœå’Œé€é•œæˆåƒæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å…‰è·¯æ›´ç®€å•ï¼‰ã€‚æˆåƒè¿‡ç¨‹å¦‚å›¾äºŒæ‰€ç¤ºï¼šé’ˆå­”é¢ï¼ˆç›¸æœºåæ ‡ç³»ï¼‰åœ¨å›¾åƒå¹³é¢ï¼ˆå›¾åƒåæ ‡ç³»ï¼‰å’Œç‰©ç‚¹å¹³é¢ï¼ˆæ£‹ç›˜å¹³é¢ï¼‰ä¹‹é—´ï¼Œæ‰€æˆå›¾åƒä¸ºå€’ç«‹å®åƒã€‚</p><p><img src="/2019/06/09/camera-calibration/9.png" alt></p><p>ä½†æ˜¯ä¸ºäº†åœ¨æ•°å­¦ä¸Šæ›´æ–¹ä¾¿æè¿°ï¼Œæˆ‘ä»¬å°†ç›¸æœºåæ ‡ç³»å’Œå›¾åƒåæ ‡ç³»ä½ç½®å¯¹è°ƒï¼Œå˜æˆå›¾ä¸‰æ‰€ç¤ºçš„å¸ƒç½®æ–¹å¼ï¼ˆæ²¡æœ‰å®é™…çš„ç‰©ç†æ„ä¹‰ï¼Œåªæ˜¯æ–¹ä¾¿è®¡ç®—ï¼‰ï¼š</p><p><img src="/2019/06/09/camera-calibration/10.png" alt></p><p>æ­¤æ—¶ï¼Œå‡è®¾ç›¸æœºåæ ‡ç³»ä¸­æœ‰ä¸€ç‚¹Mï¼Œåˆ™åœ¨ç†æƒ³å›¾åƒåæ ‡ç³»ä¸‹ï¼ˆæ— ç•¸å˜ï¼‰çš„æˆåƒç‚¹Pçš„åæ ‡ä¸ºï¼ˆå¯ç”±ç›¸ä¼¼ä¸‰è§’å½¢åŸåˆ™å¾—å‡ºï¼‰ï¼š</p><p><img src="/2019/06/09/camera-calibration/11.png" alt="img"></p><p>å°†ä¸Šå¼åŒ–ä¸ºé½æ¬¡åæ ‡è¡¨ç¤ºå½¢å¼ä¸ºï¼š</p><p><img src="/2019/06/09/camera-calibration/12.png" alt="img"></p><h5 id="3-ä»ç†æƒ³å›¾åƒåæ ‡ç³»åˆ°å®é™…å›¾åƒåæ ‡ç³»ï¼ˆè€ƒè™‘ç•¸å˜ï¼‰"><a href="#3-ä»ç†æƒ³å›¾åƒåæ ‡ç³»åˆ°å®é™…å›¾åƒåæ ‡ç³»ï¼ˆè€ƒè™‘ç•¸å˜ï¼‰" class="headerlink" title="(3) ä»ç†æƒ³å›¾åƒåæ ‡ç³»åˆ°å®é™…å›¾åƒåæ ‡ç³»ï¼ˆè€ƒè™‘ç•¸å˜ï¼‰"></a>(3) ä»ç†æƒ³å›¾åƒåæ ‡ç³»åˆ°å®é™…å›¾åƒåæ ‡ç³»ï¼ˆè€ƒè™‘ç•¸å˜ï¼‰</h5><p>â€‹        é€é•œçš„ç•¸å˜ä¸»è¦åˆ†ä¸ºå¾„å‘ç•¸å˜å’Œåˆ‡å‘ç•¸å˜ï¼Œè¿˜æœ‰è–„é€é•œç•¸å˜ç­‰ç­‰ï¼Œä½†éƒ½æ²¡æœ‰å¾„å‘å’Œåˆ‡å‘ç•¸å˜å½±å“æ˜¾è‘—ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œåªè€ƒè™‘å¾„å‘å’Œåˆ‡å‘ç•¸å˜ã€‚</p><ul><li><strong>å¾„å‘ç•¸å˜</strong>æ˜¯ç”±äºé€é•œå½¢çŠ¶çš„åˆ¶é€ å·¥è‰ºå¯¼è‡´ã€‚ä¸”è¶Šå‘é€é•œè¾¹ç¼˜ç§»åŠ¨å¾„å‘ç•¸å˜è¶Šä¸¥é‡ã€‚ä¸‹å›¾æ‰€ç¤ºæ˜¯å¾„å‘ç•¸å˜çš„ä¸¤ç§ç±»å‹ï¼šæ¡¶å½¢ç•¸å˜å’Œæ•å½¢ç•¸å˜ã€‚</li></ul><p><img src="/2019/06/09/camera-calibration/13.png" alt="img"></p><p>å®é™…æƒ…å†µä¸­æˆ‘ä»¬å¸¸ç”¨r=0å¤„çš„æ³°å‹’çº§æ•°å±•å¼€çš„å‰å‡ é¡¹æ¥è¿‘ä¼¼æè¿°å¾„å‘ç•¸å˜ã€‚çŸ«æ­£å¾„å‘ç•¸å˜å‰åçš„åæ ‡å…³ç³»ä¸ºï¼š</p><p><img src="/2019/06/09/camera-calibration/14.png" alt="img"></p><p>ç”±æ­¤å¯çŸ¥å¯¹äºå¾„å‘ç•¸å˜ï¼Œæˆ‘ä»¬æœ‰3ä¸ªç•¸å˜å‚æ•°éœ€è¦æ±‚è§£ã€‚</p><ul><li><strong>åˆ‡å‘ç•¸å˜</strong>æ˜¯ç”±äºé€é•œå’ŒCMOSæˆ–è€…CCDçš„å®‰è£…ä½ç½®è¯¯å·®å¯¼è‡´ã€‚å› æ­¤ï¼Œå¦‚æœå­˜åœ¨åˆ‡å‘ç•¸å˜ï¼Œä¸€ä¸ªçŸ©å½¢è¢«æŠ•å½±åˆ°æˆåƒå¹³é¢ä¸Šæ—¶ï¼Œå¾ˆå¯èƒ½ä¼šå˜æˆä¸€ä¸ªæ¢¯å½¢ã€‚åˆ‡å‘ç•¸å˜éœ€è¦ä¸¤ä¸ªé¢å¤–çš„ç•¸å˜å‚æ•°æ¥æè¿°ï¼ŒçŸ«æ­£å‰åçš„åæ ‡å…³ç³»ä¸ºï¼š</li></ul><p><img src="/2019/06/09/camera-calibration/15.png" alt="img"></p><p>ç”±æ­¤å¯çŸ¥å¯¹äºåˆ‡å‘ç•¸å˜ï¼Œæˆ‘ä»¬æœ‰2ä¸ªç•¸å˜å‚æ•°éœ€è¦æ±‚è§£ã€‚</p><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬ä¸€å…±éœ€è¦5ä¸ªç•¸å˜å‚æ•°ï¼ˆk1ã€k2ã€k3ã€p1å’Œp2 ï¼‰æ¥æè¿°é€é•œç•¸å˜ã€‚</p><h5 id="4-ä»å®é™…å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»"><a href="#4-ä»å®é™…å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»" class="headerlink" title="(4) ä»å®é™…å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»"></a>(4) ä»å®é™…å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»</h5><p>ç”±äºå®šä¹‰çš„åƒç´ åæ ‡ç³»åŸç‚¹ä¸å›¾åƒåæ ‡ç³»åŸç‚¹ä¸é‡åˆï¼Œå‡è®¾å›¾åƒåæ ‡ç³»åŸç‚¹åœ¨åƒç´ åæ ‡ç³»ä¸‹çš„åæ ‡ä¸ºï¼ˆu0ï¼Œv0ï¼‰ï¼Œæ¯ä¸ªåƒç´ ç‚¹åœ¨å›¾åƒåæ ‡ç³»xè½´ã€yè½´æ–¹å‘çš„å°ºå¯¸ä¸ºï¼šdxã€dyï¼Œä¸”åƒç‚¹åœ¨å®é™…å›¾åƒåæ ‡ç³»ä¸‹çš„åæ ‡ä¸ºï¼ˆxcï¼Œycï¼‰ï¼Œäºæ˜¯å¯å¾—åˆ°åƒç‚¹åœ¨åƒç´ åæ ‡ç³»ä¸‹çš„åæ ‡ä¸ºï¼š</p><p><img src="/2019/06/09/camera-calibration/16.png" alt="img"></p><p>åŒ–ä¸ºé½æ¬¡åæ ‡è¡¨ç¤ºå½¢å¼å¯å¾—ï¼š</p><p><img src="/2019/06/09/camera-calibration/17.png" alt="img"></p><p>å…¬å¼2ä¸­(xp, yp)ä¸å…¬å¼5ä¸­(xc, yc)ç›¸åŒï¼Œéƒ½æ˜¯å›¾åƒåæ ‡ç³»ä¸‹çš„åæ ‡ã€‚</p><p>è‹¥æš‚ä¸è€ƒè™‘é€é•œç•¸å˜ï¼Œåˆ™å°†å¼2ä¸å¼5çš„è½¬æ¢çŸ©é˜µç›¸ä¹˜å³ä¸ºå†…å‚çŸ©é˜µMï¼š</p><p><img src="/2019/06/09/camera-calibration/17.png" alt="img"></p><p>ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºå†…å‚çŸ©é˜µå¯ä»¥ç†è§£ä¸ºçŸ©é˜µå†…å„å€¼åªä¸ç›¸æœºå†…éƒ¨å‚æ•°æœ‰å…³ï¼Œä¸”ä¸éšç‰©ä½“ä½ç½®å˜åŒ–è€Œå˜åŒ–ã€‚</p><p>æœ€åç”¨ä¸€å¹…å›¾æ¥æ€»ç»“ä»ä¸–ç•Œåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»ï¼ˆä¸è€ƒè™‘ç•¸å˜ï¼‰çš„è½¬æ¢å…³ç³»ï¼š</p><p><img src="/2019/06/09/camera-calibration/3.png" alt></p><h4 id="3-æ ‡å®šæ–¹æ³•"><a href="#3-æ ‡å®šæ–¹æ³•" class="headerlink" title="3. æ ‡å®šæ–¹æ³•"></a>3. æ ‡å®šæ–¹æ³•</h4><h5 id="1-ã€ä¼ ç»Ÿç›¸æœºæ ‡å®š"><a href="#1-ã€ä¼ ç»Ÿç›¸æœºæ ‡å®š" class="headerlink" title="(1)ã€ä¼ ç»Ÿç›¸æœºæ ‡å®š"></a>(1)ã€ä¼ ç»Ÿç›¸æœºæ ‡å®š</h5><p>æœ€ç®€å•çš„ç›¸æœºæ ‡å®šä¸ºçº¿æ€§æ ‡å®šï¼Œå³ä¸è€ƒè™‘ç›¸æœºçš„ç•¸å˜è€Œåªè€ƒè™‘ç©ºé—´åæ ‡è½¬æ¢ã€‚<br>æ¯ä¸ªåæ ‡ç‚¹æœ‰X,Yä¸¤ä¸ªå˜é‡ï¼Œå¯åˆ—ä¸¤ä¸ªæ–¹ç¨‹ï¼Œç›¸æœºå†…å‚æœ‰5ä¸ªæœªçŸ¥æ•°ï¼Œå¤–å‚å¹³ç§»å’Œæ—‹è½¬å„3ä¸ªï¼Œå…±æœ‰11ä¸ªå˜é‡ï¼Œå› æ­¤è‡³å°‘éœ€è¦6ä¸ªç‰¹å¾ç‚¹æ¥æ±‚è§£ã€‚</p><h5 id="2-ã€éçº¿æ€§æ ‡å®š"><a href="#2-ã€éçº¿æ€§æ ‡å®š" class="headerlink" title="(2)ã€éçº¿æ€§æ ‡å®š"></a>(2)ã€éçº¿æ€§æ ‡å®š</h5><p>å½“é•œå¤´ç•¸å˜æ˜æ˜¾æ—¶å¿…é¡»è€ƒè™‘ç•¸å˜ï¼Œä¸€èˆ¬è¾ƒä¸ºä¾¿å®œçš„ç½‘ç»œæ‘„åƒå¤´ç•¸å˜ç‰¹åˆ«å¤§ï¼Œè€Œä»·æ ¼è¾ƒè´µçš„å·¥ä¸šæ‘„åƒå¤´åˆ™ç•¸å˜å¾ˆå°ï¼Œå› ä¸ºå…¶ä¸­å·²ç»åµŒå…¥äº†è®¸å¤šæ¶ˆé™¤ç•¸å˜çš„ç¨‹åºã€‚è¿™æ—¶çº¿æ€§æ¨¡å‹è½¬åŒ–ä¸ºéçº¿æ€§æ¨¡å‹ï¼Œéœ€è¦é€šè¿‡éçº¿æ€§æ ‡å®šæ–¹æ³•æ±‚è§£ã€‚æœ‰æœ€é€Ÿä¸‹é™æ³•ï¼Œé—ä¼ ç®—æ³•ï¼Œé«˜æ–¯ç‰›é¡¿æ³•å’Œç¥ç»ç½‘ç»œç®—æ³•ç­‰ã€‚</p><h5 id="3-ã€å¼ æ­£å‹æ ‡å®š"><a href="#3-ã€å¼ æ­£å‹æ ‡å®š" class="headerlink" title="(3)ã€å¼ æ­£å‹æ ‡å®š"></a>(3)ã€å¼ æ­£å‹æ ‡å®š</h5><h4 id="4-ç›¸æœºæ ‡å®šæ­¥éª¤ï¼š"><a href="#4-ç›¸æœºæ ‡å®šæ­¥éª¤ï¼š" class="headerlink" title="4.  ç›¸æœºæ ‡å®šæ­¥éª¤ï¼š"></a>4.  ç›¸æœºæ ‡å®šæ­¥éª¤ï¼š</h4><blockquote><p>(1)ã€æ‰“å°ä¸€å¼ æ£‹ç›˜æ ¼ï¼ŒæŠŠå®ƒè´´åœ¨ä¸€ä¸ªå¹³é¢ä¸Šï¼Œä½œä¸ºæ ‡å®šç‰©ã€‚<br>(2)ã€é€šè¿‡è°ƒæ•´æ ‡å®šç‰©æˆ–æ‘„åƒæœºçš„æ–¹å‘ï¼Œä¸ºæ ‡å®šç‰©æ‹æ‘„ä¸€äº›ä¸åŒæ–¹å‘çš„ç…§ç‰‡ã€‚<br>(3)ã€ä»ç…§ç‰‡ä¸­æå–æ£‹ç›˜æ ¼è§’ç‚¹ã€‚<br>(4)ã€ä¼°ç®—ç†æƒ³æ— ç•¸å˜çš„æƒ…å†µä¸‹ï¼Œäº”ä¸ªå†…å‚å’Œå…­ä¸ªå¤–å‚ã€‚<br>(5)ã€åº”ç”¨æœ€å°äºŒä¹˜æ³•ä¼°ç®—å®é™…å­˜åœ¨å¾„å‘ç•¸å˜ä¸‹çš„ç•¸å˜ç³»æ•°ã€‚<br>(6)ã€æå¤§ä¼¼ç„¶æ³•ï¼Œä¼˜åŒ–ä¼°è®¡ï¼Œæå‡ä¼°è®¡ç²¾åº¦ã€‚</p></blockquote><h4 id="5-å‚è€ƒèµ„æ–™ï¼š"><a href="#5-å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="5. å‚è€ƒèµ„æ–™ï¼š"></a>5. å‚è€ƒèµ„æ–™ï¼š</h4><ul><li>ä»é›¶å¼€å§‹å­¦ä¹ å¼ æ°ç›¸æœºæ ‡å®šå‘ï¼š <a href="https://zhuanlan.zhihu.com/p/35223115">https://zhuanlan.zhihu.com/p/35223115</a></li><li>ç›¸æœºæ ‡å®šï¼ˆCamera calibrationï¼‰åŸç†ã€æ­¥éª¤<a href="https://blog.csdn.net/qq_37791134/article/details/80942171">https://blog.csdn.net/qq_37791134/article/details/80942171</a></li><li>è°­å¹³ï¼šä»ç›¸æœºæ ‡å®šåˆ°SLAMï¼Œæç®€ä¸‰ç»´è§†è§‰å…­å°æ—¶è¯¾ç¨‹è§†é¢‘ <a href="http://www.sohu.com/a/317611305_100007727">http://www.sohu.com/a/317611305_100007727</a></li><li>SLAM bookï¼š <a href="https://github.com/gaoxiang12/slambook">https://github.com/gaoxiang12/slambook</a></li><li>åŒç›®è§†è§‰ä¹‹ç›¸æœºæ ‡å®šï¼š<a href="https://www.cnblogs.com/zyly/p/9366080.html">https://www.cnblogs.com/zyly/p/9366080.html</a></li><li>æœ€è¯¦ç»†ã€æœ€å®Œæ•´çš„ç›¸æœºæ ‡å®šè®²è§£<a href="https://blog.csdn.net/lxy_2011/article/details/80675803">https://blog.csdn.net/lxy_2011/article/details/80675803</a></li><li>OPENCV ç›¸æœºå‚æ•°æ ‡å®š <a href="https://www.jianshu.com/p/967a35dbb56a">https://www.jianshu.com/p/967a35dbb56a</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ¢ç´¢</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorchæ·±å…¥ç†è§£</title>
    <link href="/2019/05/17/pytorch%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/"/>
    <url>/2019/05/17/pytorch%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>æŒ–ä¸ªå‘ï¼šä¸»è¦æƒ³å­¦ä¹ ä¸€ä¸‹ Pytorch çš„å†…éƒ¨å®ç°æœºåˆ¶</p><a id="more"></a><p>å‚è€ƒèµ„æ–™</p><p><a href="https://minitorch.github.io/index.html">https://minitorch.github.io/index.html</a></p>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorchåˆ†å¸ƒå¼è®­ç»ƒ</title>
    <link href="/2019/05/17/pytorch%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%AD%E7%BB%83/"/>
    <url>/2019/05/17/pytorch%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%AD%E7%BB%83/</url>
    
    <content type="html"><![CDATA[<p>pytorch åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆå°è¯•: </p><ul><li>nn.Dataparallel ç®€å•è§£å†³æ–¹æ¡ˆï¼šé€‚åˆäºå•èŠ‚ç‚¹å¤š GPU å¹¶è¡Œ</li><li>nn.parallel.DistributedDataParallel å¹¶è¡Œ +  torch.utils.data.distributed.DistributedSampler æ•°æ® + torch.distributed é…ç½®</li><li>horovodï¼š Uber å¼€æºå¤–éƒ¨è§£å†³æ–¹æ¡ˆ</li></ul><a id="more"></a><p>å…¸å‹çš„ä¸¤ç§æ–¹å¼ï¼š Map-reduce å’Œ Ring all reduce</p><p>å‡ ç§é€šä¿¡æ–¹å¼ï¼š</p><h4 id="æ–¹å¼ä¸€-nn-DataParallel"><a href="#æ–¹å¼ä¸€-nn-DataParallel" class="headerlink" title="æ–¹å¼ä¸€: nn.DataParallel"></a>æ–¹å¼ä¸€: nn.DataParallel</h4><p>â€‹    nn.DataParallel ä¸ºå•è¿›ç¨‹ï¼Œå¤šçº¿ç¨‹ã€‚ä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œç›¸åº”çš„æ•ˆç‡ä¹Ÿè¾ƒä½ï¼Œ é€‚ç”¨äº<strong>å•èŠ‚ç‚¹å¤š GPU</strong> çš„æƒ…å†µã€‚nn.DataParallel ä¼šå°†æ¨¡å‹å¤åˆ¶åˆ°ä¸åŒçš„ GPU ä¸Šã€‚ å¯¹äºæ¯ä¸ªè®­ç»ƒæ‰¹æ¬¡ batchï¼Œ ä¼šå°†å…¶åˆ‡åˆ†åˆ°ä¸åŒçš„ GPU ä¸Šè¿›è¡Œæ­£å‘ä¼ æ’­å¹¶å°†æ¢¯åº¦æ±‡æ€»ï¼ˆé»˜è®¤æ˜¯ç¬¬ä¸€ä¸ª GPUï¼‰ã€‚å…¶å‡½æ•°åŸå‹ä¸ºï¼š</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">torch</span>.<span class="hljs-title">nn</span>.<span class="hljs-title">DataParallel</span>(<span class="hljs-params">module, device_ids=None, output_device=None, dim=<span class="hljs-number">0</span></span>)</span><span class="hljs-class"># <span class="hljs-title">device_ids</span>:</span> æŒ‡å®šå‚ä¸è®­ç»ƒçš„ GPU<span class="hljs-comment">#  output_device: ç”¨äºæ¢¯åº¦æ±‡æ€»çš„ GPU</span></code></pre><p>æ³¨æ„ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰æ•ˆç‡ä½ä¸‹çš„åŸå› ï¼šåœ¨æ¯ä¸ªè®­ç»ƒæ‰¹æ¬¡ï¼ˆbatchï¼‰ä¸­ï¼Œä¼šå°†æ¢¯åº¦æ±‡æ€»ç„¶ååˆ†å‘åˆ°æ¯ä¸ª GPU ä¸Šï¼Œæ‰€ä»¥ç½‘ç»œé€šä¿¡å°±æˆä¸ºäº†ä¸€ä¸ªç“¶é¢ˆï¼Œå¹¶ä¸”ä¼šå¸¦æ¥æ˜¾å­˜åˆ©ç”¨ä¸å¹³è¡¡çš„é—®é¢˜ã€‚</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨ nn.DataParallel ä¼šåœ¨åŸæœ‰çš„æ¨¡å‹å¤–è¾¹åŒ…è£…ä¸€ä¸ª moduleï¼Œ åŠ è½½æ¨¡å‹çš„æ—¶å€™éœ€è¦è¿›è¡Œé€‚å½“çš„æ‹†åŒ…ã€‚</p><p>ï¼ˆ2ï¼‰ å½“æ²¡æœ‰æŒ‡å®š device_ids çš„æ—¶å€™ï¼Œç¨‹åºä¼šè‡ªåŠ¨æ‰¾åˆ°è¿™ä¸ªæœºå™¨ä¸Šé¢å¯ä»¥ç”¨çš„æ‰€æœ‰çš„æ˜¾å¡, ç„¶åç”¨äºè®­ç»ƒã€‚å¯ä»¥é€šè¿‡ï¼š</p><p><code>os.environ[&#39;CUDA_VISIBLE_DEVICES&#39;]</code> äº‹å…ˆæŒ‡å®šå¯ç”¨ GPUï¼Œ é˜²æ­¢ GPU å†²çªã€‚</p><h4 id="æ–¹å¼äºŒï¼štorch-nn-parallel-DistributedDataParallel"><a href="#æ–¹å¼äºŒï¼štorch-nn-parallel-DistributedDataParallel" class="headerlink" title="æ–¹å¼äºŒï¼štorch.nn.parallel.DistributedDataParallel"></a>æ–¹å¼äºŒï¼štorch.nn.parallel.DistributedDataParallel</h4><p>torch.nn.parallel.DistributedDataParallel æ˜¯ pytorch æ¨èçš„å¹¶è¡Œæ–¹æ¡ˆã€‚å®ƒæ”¯æŒå¤šæœºå¤šå¡è®­ç»ƒï¼Œæ˜¾å­˜åˆ†é…æ›´åŠ å‡è¡¡ï¼Œä¸”æ•ˆç‡è¾ƒé«˜ã€‚</p><h5 id="Step1ï¼š-ç¯å¢ƒé…ç½®"><a href="#Step1ï¼š-ç¯å¢ƒé…ç½®" class="headerlink" title="Step1ï¼š ç¯å¢ƒé…ç½®"></a>Step1ï¼š ç¯å¢ƒé…ç½®</h5><p>ç¡®å®šç½‘ç»œçš„æ¥å£ï¼Œ é€šå¸¸ä¼šè‡ªå·±å¯»æ‰¾ç½‘ç»œæ¥å£ï¼Œå½“æ²¡æœ‰è‡ªå·±å¯»æ‰¾åˆ°çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œé…ç½®: </p><pre><code class="hljs python"><span class="hljs-keyword">import</span> osos.environ[<span class="hljs-string">&#x27;NCCL_SOCKET_IFNAME&#x27;</span>] = <span class="hljs-string">&#x27;enp2s0&#x27;</span>   <span class="hljs-comment"># for NCCL</span>os.environ[<span class="hljs-string">&#x27;GLOO_SOCKET_IFNAME&#x27;</span>] = <span class="hljs-string">&#x27;enp2s0&#x27;</span>   <span class="hljs-comment"># for GLOO</span></code></pre><h5 id="step2-ç¡®å®šç›¸å…³é…ç½®"><a href="#step2-ç¡®å®šç›¸å…³é…ç½®" class="headerlink" title="step2: ç¡®å®šç›¸å…³é…ç½®"></a>step2: ç¡®å®šç›¸å…³é…ç½®</h5><ul><li><p><strong>åç«¯</strong>ï¼š  åç«¯æ”¯æŒ glooã€nccl å’Œ mpi ä¸‰ç§æ–¹å¼ã€‚åœ¨ä½¿ç”¨ CPU è¿›è¡Œåˆ†å¸ƒå¼è®­ç»ƒçš„æ—¶å€™ï¼Œä¼˜å…ˆé€‰æ‹© glooï¼Œ åœ¨ä½¿ç”¨ GPU è¿›è¡Œåˆ†å¸ƒå¼è®­ç»ƒçš„æ—¶å€™ï¼Œ ä¼˜å…ˆé€‰æ‹© ncclã€‚</p><p>   <strong>NCCL</strong>ï¼šNCCL çš„å…¨ç§°ä¸º  NVIDIA Collective Communications Library ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å®ç°å¤šä¸ª GPU ã€å¤šä¸ªç»“ç‚¹é—´èšåˆé€šä¿¡çš„åº“ï¼Œåœ¨  PCIeã€Nvlinkã€InfiniBand ä¸Šå¯ä»¥å®ç°è¾ƒé«˜çš„é€šä¿¡é€Ÿåº¦ã€‚NCCL å¯¹ GPU å‡æœ‰è¾ƒå¥½æ”¯æŒï¼Œä¸”  torch.distributed å¯¹å…¶ä¹Ÿæä¾›äº†åŸç”Ÿæ”¯æŒã€‚</p><p>MPI</p><p>â€‹    <strong>MPI</strong>ï¼šå³æ¶ˆæ¯ä¼ é€’æ¥å£ (Message Passing Interface)ï¼Œæ˜¯ä¸€ä¸ªæ¥è‡ªäºé«˜æ€§èƒ½è®¡ç®—é¢†åŸŸçš„æ ‡å‡†çš„å·¥å…·ã€‚å®ƒæ”¯æŒç‚¹å¯¹ç‚¹é€šä¿¡ä»¥åŠé›†ä½“é€šä¿¡ï¼Œå¹¶ä¸”æ˜¯ torch.distributed çš„ API çš„çµæ„Ÿæ¥æºã€‚MPI åç«¯çš„ä¼˜åŠ¿åœ¨äºï¼Œåœ¨å¤§å‹è®¡ç®—æœºé›†ç¾¤ä¸Šï¼ŒMPI åº”ç”¨å¹¿æ³›ï¼Œä¸”é«˜åº¦ä¼˜åŒ–ã€‚ ä½†æ˜¯ï¼Œtorch.distributed å¯¹ MPI å¹¶ä¸æä¾›åŸç”Ÿæ”¯æŒã€‚å› æ­¤ï¼Œè¦ä½¿ç”¨ MPIï¼Œå¿…é¡»ä»æºç ç¼–è¯‘ Pytorchã€‚æ˜¯å¦æ”¯æŒ GPUï¼Œè§†å®‰è£…çš„ MPI ç‰ˆæœ¬è€Œå®šã€‚</p><p>â€‹    <strong>Gloo</strong>ï¼šGlooåç«¯æ”¯æŒ CPU å’Œ GPUï¼Œå…¶æ”¯æŒé›†ä½“é€šä¿¡ï¼ˆcollective Communicationï¼‰ï¼Œå¹¶å¯¹å…¶è¿›è¡Œäº†ä¼˜åŒ–ã€‚torch.distributed å¯¹ gloo æä¾›åŸç”Ÿæ”¯æŒï¼Œæ— éœ€è¿›è¡Œé¢å¤–æ“ä½œã€‚</p></li><li><p><strong>init_method: </strong> åˆå§‹åŒ– <code>init_method</code> çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ TCP è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦å¤–ä¸€ç§æ˜¯ä½¿ç”¨ å…±äº«æ–‡ä»¶ç³»ç»Ÿ è¿›è¡Œåˆå§‹åŒ–ã€‚å¹¶ä¸æ¨èä½¿ç”¨å…±äº«æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œåˆå§‹åŒ–ã€‚ TCP åˆå§‹åŒ–çš„æ ¼å¼ä¸ºï¼š<code>tcp://ip:ç«¯å£å·</code></p></li><li><p><strong>rank</strong> å’Œ  <strong>world_size</strong></p><p>ä½ éœ€è¦ç¡®ä¿, ä¸åŒæœºå™¨çš„ <code>rank</code> å€¼ä¸åŒï¼Œ å¹¶ä¸”éœ€è¦æ³¨æ„ï¼š ä¸»æœºçš„<code>rank</code>å¿…é¡»ä¸º0ï¼Œè€Œä¸”ä½¿ç”¨ <code>init_method</code>çš„ ip ä¸€å®šæ˜¯ <code>rank</code>ä¸º 0 çš„ä¸»æœºï¼Œ<code>world_size</code> æ˜¯ä½ çš„ä¸»æœºæ•°é‡,  ä¸èƒ½éšä¾¿è®¾ç½®è¿™ä¸ªæ•°å€¼, å½“å‚ä¸è®­ç»ƒçš„ä¸»æœºæ•°é‡è¾¾åˆ° <code>world_size</code> çš„è®¾ç½®å€¼æ—¶, ä»£ç æ‰ä¼šæ‰§è¡Œçš„.</p></li></ul><pre><code class="hljs python">parser = argparse.ArgumentParser()parser.add_argument(<span class="hljs-string">&#x27;-bk&#x27;</span>,                    <span class="hljs-string">&#x27;--backend&#x27;</span>, type=str, default=<span class="hljs-string">&#x27;nccl&#x27;</span>, help=<span class="hljs-string">&#x27;Name of the backend to use.&#x27;</span>)parser.add_argument(<span class="hljs-string">&#x27;-im&#x27;</span>,                    <span class="hljs-string">&#x27;--init-method&#x27;</span>,                    type=str,                    default=<span class="hljs-string">&#x27;env://&#x27;</span>,                    help=<span class="hljs-string">&#x27;URL specifying how to initialize the package.&#x27;</span>)parser.add_argument(<span class="hljs-string">&#x27;-ws&#x27;</span>, <span class="hljs-string">&#x27;--world-size&#x27;</span>, type=int, default=<span class="hljs-number">1</span>, help=<span class="hljs-string">&#x27;Number of processes participating in the job.&#x27;</span>)parser.add_argument(<span class="hljs-string">&#x27;-r&#x27;</span>, <span class="hljs-string">&#x27;--rank&#x27;</span>, type=int, default=<span class="hljs-number">0</span>, help=<span class="hljs-string">&#x27;Rank of the current process.&#x27;</span>)args = parser.parse_args()distributed.init_process_group(    backend=args.backend,    init_method=args.init_method,    world_size=args.world_size,    rank=args.rank,)</code></pre><h5 id="step-3-åŠ è½½æ•°æ®ï¼Œè¿›è¡Œè®­ç»ƒ"><a href="#step-3-åŠ è½½æ•°æ®ï¼Œè¿›è¡Œè®­ç»ƒ" class="headerlink" title="step 3: åŠ è½½æ•°æ®ï¼Œè¿›è¡Œè®­ç»ƒ"></a>step 3: åŠ è½½æ•°æ®ï¼Œè¿›è¡Œè®­ç»ƒ</h5><pre><code class="hljs python">train_sampler = torch.utils.data.distributed.DistributedSampler(train_dataset)train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=..., sampler=train_sampler)model = nn.parallel.DistributedDataParallel(model)<span class="hljs-comment"># ...</span></code></pre><h5 id="step4-åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤"><a href="#step4-åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤" class="headerlink" title="step4: åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:"></a>step4: åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:</h5><p>æœºå™¨1ï¼š</p><pre><code class="hljs shell">python3 -m torch.distributed.launch torch_ddp.py  -bk nccl -im tcp://10.10.10.1:12345 -rn 0 -ws 2</code></pre><p>æœºå™¨2ï¼š</p><pre><code class="hljs shell">python3 -m torch.distributed.launch torch_ddp.py  -bk nccl -im tcp://10.10.10.1:12345 -rn 1 -ws 2</code></pre><h4 id="æ–¹å¼ä¸‰-Horovod"><a href="#æ–¹å¼ä¸‰-Horovod" class="headerlink" title="æ–¹å¼ä¸‰: Horovod"></a>æ–¹å¼ä¸‰: Horovod</h4><p>Horovod æ˜¯ Uber å¼€æºçš„è·¨å¹³å°çš„åˆ†å¸ƒå¼è®­ç»ƒå·¥å…·ï¼Œåå­—æ¥è‡ªäºä¿„å›½ä¼ ç»Ÿæ°‘é—´èˆè¹ˆï¼Œèˆè€…æ‰‹ç‰µæ‰‹å›´æˆä¸€ä¸ªåœˆè·³èˆï¼Œä¸ Horovod è®¾å¤‡ä¹‹é—´çš„é€šä¿¡æ¨¡å¼å¾ˆåƒï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>å…¼å®¹ TensorFlowã€Keras å’Œ PyTorch æœºå™¨å­¦ä¹ æ¡†æ¶ã€‚</li><li>ä½¿ç”¨ Ring-AllReduce ç®—æ³•ï¼Œå¯¹æ¯” Parameter Server ç®—æ³•ï¼Œæœ‰ç€æ— éœ€ç­‰å¾…ï¼Œè´Ÿè½½å‡è¡¡çš„ä¼˜ç‚¹ã€‚</li><li>å®ç°ç®€å•ï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚ï¼ˆåˆ’é‡ç‚¹ï¼‰</li></ol><h5 id="step1-ç®€å•è®¾ç½®"><a href="#step1-ç®€å•è®¾ç½®" class="headerlink" title="step1:  ç®€å•è®¾ç½®"></a>step1:  ç®€å•è®¾ç½®</h5><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<span class="hljs-keyword">import</span> horovod.torch <span class="hljs-keyword">as</span> hvd<span class="hljs-comment"># init horovod</span>hvd.init()<span class="hljs-comment"># ç»™å½“å‰è¿›ç¨‹åˆ†é…å¯¹åº”çš„ gpuï¼Œlocal_rank() è¿”å›çš„æ˜¯å½“å‰æ˜¯ç¬¬å‡ ä¸ªè¿›ç¨‹</span>torch.cuda.set_device(hvd.local_rank())</code></pre><h5 id="step2-datasetsã€modelã€optimizer"><a href="#step2-datasetsã€modelã€optimizer" class="headerlink" title="step2: datasetsã€modelã€optimizer"></a>step2: datasetsã€modelã€optimizer</h5><pre><code class="hljs python"><span class="hljs-comment"># dataset ...</span>train_dataset = ...train_sampler = torch.utils.data.distributed.DistributedSampler(    train_dataset, num_replicas=hvd.size(), rank=hvd.rank())train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=..., sampler=train_sampler)<span class="hljs-comment"># model ...</span>model = ...model.cuda()<span class="hljs-comment"># optimizer ...</span>optimizer = optim.SGD(model.parameters())optimizer = hvd.DistributedOptimizer(optimizer, named_parameters=model.named_parameters())</code></pre><h5 id="step3-è®­ç»ƒ"><a href="#step3-è®­ç»ƒ" class="headerlink" title="step3: è®­ç»ƒ"></a>step3: è®­ç»ƒ</h5><pre><code class="hljs python"><span class="hljs-comment"># åˆå§‹åŒ–çš„æ—¶å€™å¹¿æ’­å‚æ•°ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†åœ¨ä¸€å¼€å§‹çš„æ—¶å€™åŒæ­¥å„ä¸ª gpu ä¹‹é—´çš„å‚æ•°</span>hvd.broadcast_parameters(model.state_dict(), root_rank=<span class="hljs-number">0</span>)<span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>):   <span class="hljs-keyword">for</span> batch_idx, (data, target) <span class="hljs-keyword">in</span> enumerate(train_loader):       optimizer.zero_grad()       output = model(data)       loss = F.nll_loss(output, target)       loss.backward()       optimizer.step()       <span class="hljs-keyword">if</span> batch_idx % args.log_interval == <span class="hljs-number">0</span>:           print(<span class="hljs-string">&#x27;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125;]\tLoss: &#123;&#125;&#x27;</span>.format(               epoch, batch_idx * len(data), len(train_sampler), loss.item()))</code></pre><h4 id="æ–¹å¼å››ï¼š-æ··åˆç²¾åº¦-apex-æ­é…åˆ†å¸ƒå¼"><a href="#æ–¹å¼å››ï¼š-æ··åˆç²¾åº¦-apex-æ­é…åˆ†å¸ƒå¼" class="headerlink" title="æ–¹å¼å››ï¼š æ··åˆç²¾åº¦ apex æ­é…åˆ†å¸ƒå¼"></a>æ–¹å¼å››ï¼š æ··åˆç²¾åº¦ apex æ­é…åˆ†å¸ƒå¼</h4><p>è¿™æ ·å¯ä»¥å–å¾—æ¯”è¾ƒä½çš„æ˜¾å­˜å æ¯”ï¼ŒåŒæ—¶è®­ç»ƒæ—¶é—´ä¹Ÿå¤§å¹…ç¼©å‡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorchåŠ é€Ÿ</title>
    <link href="/2019/05/17/pytorch%E5%8A%A0%E9%80%9F/"/>
    <url>/2019/05/17/pytorch%E5%8A%A0%E9%80%9F/</url>
    
    <content type="html"><![CDATA[<p>Pytorch åŠ é€Ÿæ–¹æ¡ˆ</p><a id="more"></a><h3 id="1-æ•°æ®"><a href="#1-æ•°æ®" class="headerlink" title="1. æ•°æ®"></a>1. æ•°æ®</h3><h5 id="0-dataloader"><a href="#0-dataloader" class="headerlink" title="(0) dataloader"></a>(0) dataloader</h5><ul><li>num_workersä¸batch_sizeè°ƒåˆ°åˆé€‚å€¼ï¼Œå¹¶éè¶Šå¤§è¶Šå¿«ï¼ˆæ³¨æ„åè€…ä¹Ÿå½±å“æ¨¡å‹æ€§èƒ½ï¼‰(éœ€è¦åœ¨å®éªŒä¸­æ‰¾åˆ°æœ€å¿«çš„å–å€¼)</li><li>eval/testæ—¶shuffle=False</li><li>å†…å­˜å¤Ÿå¤§çš„æƒ…å†µä¸‹ï¼Œdataloaderçš„<strong>pin_memory</strong>è®¾ä¸ºTrueã€‚å¯¹ç‰¹åˆ«å°çš„æ•°æ®é›†å¦‚ MNIST è®¾ç½® <code>pin_memory=False</code>  åè€Œæ›´å¿«ä¸€äº›ã€‚</li></ul><h5 id="1-é¢„å¤„ç†æé€Ÿ"><a href="#1-é¢„å¤„ç†æé€Ÿ" class="headerlink" title="(1) é¢„å¤„ç†æé€Ÿ"></a>(1) é¢„å¤„ç†æé€Ÿ</h5><ul><li>å°½é‡å‡å°‘æ¯æ¬¡è¯»å–æ•°æ®æ—¶çš„é¢„å¤„ç†æ“ä½œï¼Œå¯ä»¥è€ƒè™‘æŠŠä¸€äº›å›ºå®šçš„æ“ä½œï¼Œä¾‹å¦‚ resize ï¼Œäº‹å…ˆå¤„ç†å¥½ä¿å­˜ä¸‹æ¥ï¼Œè®­ç»ƒçš„æ—¶å€™ç›´æ¥æ‹¿æ¥ç”¨</li><li><p>Linuxä¸Šå°†é¢„å¤„ç†æ¬åˆ°GPUä¸ŠåŠ é€Ÿï¼š</p></li><li><ul><li><strong>NVIDIA/DALI</strong> ï¼š<a href="https://github.com/NVIDIA/DALI">https://github.com/NVIDIA/DALI</a></li><li><a href="https://github.com/tanglang96/DataLoaders_DALI">https://github.com/tanglang96/DataLoaders_DALI</a></li></ul></li><li><p>æ•°æ®é¢„å–ï¼šprefetch_generatorï¼ˆ<a href="https://zhuanlan.zhihu.com/p/80695364">æ–¹æ³•</a>ï¼‰è®©è¯»æ•°æ®çš„workerèƒ½åœ¨è¿ç®—æ—¶é¢„è¯»æ•°æ®ï¼Œè€Œé»˜è®¤æ˜¯æ•°æ®æ¸…ç©ºæ—¶æ‰è¯»</p></li></ul><h5 id="2-IO-æé€Ÿ"><a href="#2-IO-æé€Ÿ" class="headerlink" title="(2) IO æé€Ÿ"></a>(2) IO æé€Ÿ</h5><ul><li><p>ä½¿ç”¨æ›´å¿«çš„å›¾ç‰‡å¤„ç†ï¼š</p></li><li><ul><li><strong>opencv ä¸€èˆ¬è¦æ¯” PIL è¦å¿«</strong></li><li>å¯¹äºjpegè¯»å–ï¼Œå¯ä»¥å°è¯• <strong>jpeg4py</strong></li><li>å­˜ <strong>bmp</strong> å›¾ï¼ˆé™ä½è§£ç æ—¶é—´ï¼‰</li></ul></li><li><p><strong>å°å›¾æ‹¼èµ·æ¥å­˜æ”¾ï¼ˆé™ä½è¯»å–æ¬¡æ•°ï¼‰ï¼šå¯¹äºå¤§è§„æ¨¡çš„å°æ–‡ä»¶è¯»å–ï¼Œå»ºè®®è½¬æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œå¯ä»¥é€‰æ‹©çš„æ ¼å¼å¯ä»¥è€ƒè™‘</strong>ï¼šTFRecordï¼ˆTensorflowï¼‰ã€recordIO(recordIO)ã€hdf5ã€ pthã€n5ã€lmdb ç­‰ç­‰ï¼ˆ<a href="https://github.com/Lyken17/Efficient-PyTorch#data-loaderï¼‰">https://github.com/Lyken17/Efficient-PyTorch#data-loaderï¼‰</a></p></li><li><ul><li><strong>TFRecord</strong>ï¼š<a href="https://github.com/vahidk/tfrecord">https://github.com/vahidk/tfrecord</a></li><li>å€ŸåŠ© <strong>lmdb æ•°æ®åº“æ ¼å¼</strong>ï¼š</li></ul></li><li><ul><li><ul><li><a href="https://github.com/Fangyh09/Image2LMDB">https://github.com/Fangyh09/Image2LMDB</a></li><li><a href="https://blog.csdn.net/P_LarT/article/details/103208405">https://blog.csdn.net/P_LarT/article/details/103208405</a></li><li><a href="https://github.com/lartpang/PySODToolBox/blob/master/ForBigDataset/ImageFolder2LMDB.py">https://github.com/lartpang/PySODToolBox/blob/master/ForBigDataset/ImageFolder2LMDB.py</a></li><li><a href="https://github.com/Lyken17/Efficient-PyTorch">https://github.com/Lyken17/Efficient-PyTorch</a></li></ul></li></ul></li></ul><h5 id="3-å€ŸåŠ©ç¡¬ä»¶"><a href="#3-å€ŸåŠ©ç¡¬ä»¶" class="headerlink" title="(3)ã€€å€ŸåŠ©ç¡¬ä»¶"></a>(3)ã€€å€ŸåŠ©ç¡¬ä»¶</h5><ul><li>å€ŸåŠ©å†…å­˜ï¼š<strong>ç›´æ¥è½½åˆ°å†…å­˜é‡Œé¢ï¼Œæˆ–è€…æŠŠæŠŠå†…å­˜æ˜ å°„æˆç£ç›˜å¥½äº†</strong></li><li>å€ŸåŠ©å›ºæ€ï¼šæŠŠè¯»å–é€Ÿåº¦æ…¢çš„æœºæ¢°ç¡¬ç›˜æ¢æˆ <strong>NVME å›ºæ€</strong>å§ï½</li></ul><h5 id="4-è®­ç»ƒç­–ç•¥"><a href="#4-è®­ç»ƒç­–ç•¥" class="headerlink" title="(4) è®­ç»ƒç­–ç•¥"></a>(4) è®­ç»ƒç­–ç•¥</h5><ul><li><p>åœ¨è®­ç»ƒä¸­ä½¿ç”¨<strong>ä½ç²¾åº¦ï¼ˆFP16 ç”šè‡³ INT8 ã€äºŒå€¼ç½‘ç»œã€ä¸‰å€¼ç½‘ç»œï¼‰è¡¨ç¤ºå–ä»£åŸæœ‰ç²¾åº¦ï¼ˆFP32ï¼‰è¡¨ç¤º</strong></p></li><li><ul><li>NVIDIA/Apexï¼š</li></ul></li><li><ul><li><ul><li><a href="https://blog.csdn.net/c9Yv2cf9I06K2A9E/article/details/100135729">https://blog.csdn.net/c9Yv2cf9I06K2A9E/article/details/100135729</a></li><li><a href="https://github.com/nvidia/apex">https://github.com/nvidia/apex</a></li></ul></li></ul></li><li><p>ä½¿ç”¨åˆ†å¸ƒå¼è®­ç»ƒã€€DDP æˆ–è€… horovod</p></li></ul><h5 id="5-ä»£ç å±‚é¢"><a href="#5-ä»£ç å±‚é¢" class="headerlink" title="(5) ä»£ç å±‚é¢"></a>(5) ä»£ç å±‚é¢</h5><ul><li><code>torch.backends.cudnn.benchmark = True</code></li><li>Do numpy-like operations on the GPU wherever you can</li><li>Free up memory using<code>del</code>     ç”¨<code>del</code>åŠæ—¶åˆ é™¤ä¸ç”¨çš„ä¸­é—´å˜é‡ï¼ŒèŠ‚çº¦GPUå­˜å‚¨ã€‚</li><li>Avoid unnecessary transfer of data from the GPU</li><li>Use pinned memory, and use non_blocking=False to parallelize data transfer and GPU number crunching</li></ul><h3 id="2-model"><a href="#2-model" class="headerlink" title="2. model"></a>2. model</h3><ol><li><p>ç”¨<strong>float16</strong>ä»£æ›¿é»˜è®¤çš„float32è¿ç®—ï¼ˆ<a href="https://link.zhihu.com/?target=https%3A//github.com/huggingface/transformers/blob/dad3c7a485b7ffc6fd2766f349e6ee845ecc2eee/examples/run_classifier.py">æ–¹æ³•å‚è€ƒ</a>ï¼Œæœç´¢â€fp16â€å¯ä»¥çœ‹åˆ°éœ€è¦ä¿®æ”¹ä¹‹å¤„ï¼ŒåŒ…æ‹¬modelã€optimizerã€backwardã€learning rateï¼‰</p></li><li><p><strong>ä¼˜åŒ–å™¨</strong>ä»¥åŠå¯¹åº”å‚æ•°çš„é€‰æ‹©ï¼Œå¦‚learning rateï¼Œä¸è¿‡å®ƒå¯¹æ€§èƒ½çš„å½±å“ä¼¼ä¹æ›´é‡è¦ã€å å‘ã€‘</p></li><li><p>å°‘ç”¨å¾ªç¯ï¼Œå¤šç”¨<strong>å‘é‡åŒ–</strong>æ“ä½œ</p></li><li><p>ç»å…¸æ“ä½œå°½é‡ç”¨åˆ«äººä¼˜åŒ–å¥½çš„<strong>åº“</strong>ï¼Œåˆ«è‡ªå·±å†™</p></li><li><p>æ•°æ®å¾ˆå¤šæ—¶å°‘ç”¨appendï¼Œè™½ç„¶ä½¿ç”¨å¾ˆæ–¹ä¾¿ï¼Œä¸è¿‡å®ƒæ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ†é…ç©ºé—´ï¼Ÿæ‰€ä»¥æ•°æ®å¾ˆå¤§çš„è¯ï¼Œå…‰ä¸€æ¬¡appendå°±è¦å‡ ç§’ï¼ˆæµ‹è¿‡ï¼‰ï¼Œå¯ä»¥å…ˆåˆ†é…å¥½æ•´ä¸ªå®¹å™¨å¤§å°ï¼Œæ¯æ¬¡ç”¨ç´¢å¼•å»ä¿®æ”¹å†…å®¹ï¼Œè¿™æ ·ä¸€æ­¥åªè¦0.0xç§’</p></li><li><p>å›ºå®šå¯¹æ¨¡å‹å½±å“ä¸å¤§çš„éƒ¨åˆ†å‚æ•°ï¼Œè¿˜èƒ½èŠ‚çº¦æ˜¾å­˜ï¼Œå¯ä»¥ç”¨ detach() åˆ‡æ–­åå‘ä¼ æ’­ï¼Œæ³¨æ„è‹¥ä»…ä»…ç»™å˜é‡è®¾ç½® required_grad=False è¿˜æ˜¯ä¼šè®¡ç®—æ¢¯åº¦çš„</p></li><li><p>eval/test çš„æ—¶å€™ï¼ŒåŠ ä¸Š model.eval() å’Œ torch.no_grad()ï¼Œå‰è€…å›ºå®š batch-normalization å’Œ dropout ä½†æ˜¯ä¼šå½±å“æ€§èƒ½ï¼Œåè€…å…³é—­ autograd</p></li><li><p>æé«˜ç¨‹åº<strong>å¹¶è¡Œåº¦</strong>ï¼Œä¾‹å¦‚ æˆ‘æƒ³ train æ—¶å¯¹æ¯ä¸ª epoch éƒ½èƒ½ test ä¸€ä¸‹ä»¥è¿½è¸ªæ¨¡å‹æ€§èƒ½å˜åŒ–ï¼Œä½†æ˜¯ test æ—¶é—´æˆæœ¬å¤ªé«˜è¦ä¸€ä¸ªå°æ—¶ï¼Œæ‰€ä»¥å†™äº†ä¸ª socketï¼Œè®¾ä¸€ä¸ª127.0.0.1 çš„ç«¯å£ï¼Œæ¯æ¬¡ train å®Œä¸€ä¸ª epoch å°±å‘ä¸ªUDPè¿‡å»ï¼Œé‚£ä¸ªè¿›ç¨‹å°±å¯ä»¥è‡ªå·± testï¼ŒåŒæ—¶åŸè¿›ç¨‹å¯ä»¥ç»§ç»­ train ä¸‹ä¸€ä¸ª epochï¼ˆå¯¹ è¿™æ˜¯è‡ªå·±æƒ³çš„è¯¡å¼‚æ–¹æ³•hhhï¼‰</p></li><li><p>torch.backends.cudnn.benchmarkè®¾ä¸ºTrueï¼Œå¯ä»¥è®©cudnnæ ¹æ®å½“å‰è®­ç»ƒå„é¡¹configå¯»æ‰¾ä¼˜åŒ–ç®—æ³•ï¼Œä½†è¿™æœ¬èº«éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥input sizeåœ¨è®­ç»ƒæ—¶ä¼šé¢‘ç¹å˜åŒ–çš„è¯ï¼Œå»ºè®®è®¾ä¸ºFalse</p></li><li><p>ä½¿ç”¨<code>inplace</code>æ“ä½œå¯èŠ‚çº¦ GPU å­˜å‚¨ï¼Œå¦‚</p><pre><code class="hljs ini"><span class="hljs-attr">x</span> = torch.nn.functional.relu(x, inplace=<span class="hljs-literal">True</span>)</code></pre></li><li><p>å‡å°‘CPUå’ŒGPUä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚ä¾‹å¦‚ï¼Œ å¦‚æœä½ æƒ³çŸ¥é“ä¸€ä¸ª epoch ä¸­æ¯ä¸ª mini-batch çš„ loss å’Œå‡†ç¡®ç‡ï¼Œå…ˆå°†å®ƒä»¬ç´¯ç§¯åœ¨ GPU ä¸­ç­‰ä¸€ä¸ª epoch ç»“æŸä¹‹åä¸€èµ·ä¼ è¾“å› CPU ä¼šæ¯”æ¯ä¸ª mini-batch éƒ½è¿›è¡Œä¸€æ¬¡ GPU åˆ° CPU çš„ä¼ è¾“æ›´å¿«ã€‚</p></li><li><p>ä½¿ç”¨åŠç²¾åº¦æµ®ç‚¹æ•°<code>half()</code>ä¼šæœ‰ä¸€å®šçš„é€Ÿåº¦æå‡ï¼Œå…·ä½“æ•ˆç‡ä¾èµ–äºGPUå‹å·ã€‚éœ€è¦å°å¿ƒæ•°å€¼ç²¾åº¦è¿‡ä½å¸¦æ¥çš„ç¨³å®šæ€§é—®é¢˜ã€‚æ—¶å¸¸ä½¿ç”¨ <code>assert tensor.size() == (N, D, H, W)</code>ä½œä¸ºè°ƒè¯•æ‰‹æ®µï¼Œç¡®ä¿å¼ é‡ç»´åº¦å’Œä½ è®¾æƒ³ä¸­ä¸€è‡´ã€‚</p></li><li><p>é™¤äº†æ ‡è®° y å¤–ï¼Œå°½é‡å°‘ä½¿ç”¨ä¸€ç»´å¼ é‡ï¼Œä½¿ç”¨n*1çš„äºŒç»´å¼ é‡ä»£æ›¿ï¼Œå¯ä»¥é¿å…ä¸€äº›æ„æƒ³ä¸åˆ°çš„ä¸€ç»´å¼ é‡è®¡ç®—ç»“æœã€‚</p></li><li><p>ç»Ÿè®¡ä»£ç å„éƒ¨åˆ†è€—æ—¶</p></li></ol><pre><code class="hljs python"><span class="hljs-keyword">with</span> torch.autograd.profiler.profile(enabled=<span class="hljs-literal">True</span>, use_cuda=<span class="hljs-literal">False</span>) <span class="hljs-keyword">as</span> profile:    ...    print(profile)</code></pre><p>æˆ–è€…åœ¨å‘½ä»¤è¡Œè¿è¡Œï¼š</p><pre><code class="hljs css"><span class="hljs-selector-tag">python</span> <span class="hljs-selector-tag">-m</span> <span class="hljs-selector-tag">torch</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.bottleneck</span> <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.py</span></code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorché¡¹ç›®æ­å»º</title>
    <link href="/2019/05/17/pytorch%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/"/>
    <url>/2019/05/17/pytorch%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<p>pytorch æ­å»ºé¡¹ç›®çš„åŸºæœ¬æµç¨‹</p><a id="more"></a><h3 id="åŸºæœ¬å·¥ä½œæµç¨‹"><a href="#åŸºæœ¬å·¥ä½œæµç¨‹" class="headerlink" title="åŸºæœ¬å·¥ä½œæµç¨‹"></a>åŸºæœ¬å·¥ä½œæµç¨‹</h3><ol><li><p>ç›¸å…³å·¥ä½œè°ƒç ”:  <strong>è¯„ä»·æŒ‡æ ‡ã€æ•°æ®é›†ã€ç»å…¸è§£å†³æ–¹æ¡ˆã€å¾…è§£å†³é—®é¢˜å’Œå·²æœ‰æ–¹æ¡ˆçš„ä¸åŒã€ç²¾åº¦å’Œé€Ÿåº¦é¢„ä¼°ã€ç›¸å…³éš¾ç‚¹ ! </strong></p></li><li><p>æ•°æ®æ¢ç´¢å’Œæ–¹æ¡ˆç¡®å®š</p></li><li>ä¾æ¬¡ç¼–å†™æ¨¡å‹ models.pyã€æ•°æ®é›†è¯»å–æ¥å£ datasets.py ã€æŸå¤±å‡½æ•° losses.py ã€è¯„ä»·æŒ‡æ ‡ criterion.py</li><li>ç¼–å†™è®­ç»ƒè„šæœ¬(train.py)å’Œæµ‹è¯•è„šæœ¬(test.py)</li><li>è®­ç»ƒã€è°ƒè¯•å’Œæµ‹è¯„</li><li>æ¨¡å‹çš„éƒ¨ç½²</li></ol><p>æ³¨æ„ï¼Œä¸è¦å°†æ‰€æœ‰å±‚å’Œæ¨¡å‹æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æœ€ä½³åšæ³•æ˜¯å°†æœ€ç»ˆç½‘ç»œåˆ†ç¦»ä¸ºå•ç‹¬çš„æ–‡ä»¶ï¼ˆnetworks.pyï¼‰ï¼Œå¹¶å°†layers ã€loss å’Œ ops ä¿å­˜åœ¨å„è‡ªçš„æ–‡ä»¶ï¼ˆlayers.pyã€losses.pyã€ops.pyï¼‰ä¸­ã€‚å®Œæˆçš„æ¨¡å‹ï¼ˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œç»„æˆï¼‰åº”åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¼•ç”¨ï¼Œæ–‡ä»¶åä¸º yolov3.pyã€dcgan.py è¿™æ ·ã€‚</p><h5 id="1-æ„å»ºç¥ç»ç½‘ç»œ"><a href="#1-æ„å»ºç¥ç»ç½‘ç»œ" class="headerlink" title="(1) æ„å»ºç¥ç»ç½‘ç»œ"></a>(1) æ„å»ºç¥ç»ç½‘ç»œ</h5><p>â€‹    è‡ªå®šä¹‰çš„ç½‘ç»œç»§æ‰¿è‡ªä¸€èˆ¬ç»§æ‰¿è‡ªã€€<code>nn.Module</code> ç±»ï¼Œã€€å¿…é¡»æœ‰ä¸€ä¸ª <code>forward</code> æ–¹æ³•æ¥å®ç°å„ä¸ªå±‚æˆ–æ“ä½œçš„ forward ä¼ é€’ï¼Œã€€</p><p>å¯¹äºå…·æœ‰<strong>å•ä¸ªè¾“å…¥</strong>å’Œ<strong>å•ä¸ªè¾“å‡º</strong>çš„ç®€å•ç½‘ç»œï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ¨¡å¼ï¼š</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConvBlock</span>(<span class="hljs-params">nn.Module</span>):</span>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>    super(ConvBlock, self).__init__()    self.block = nn.Squential(       nn.Conv2d(...),       nn.ReLU(),       nn.BatchNorm2d(...)    )     <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>    <span class="hljs-keyword">return</span> self.block(x)<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleNetwork</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, num_of_layers = <span class="hljs-number">15</span></span>):</span>        super(SimpleNetwork, self).__init__()        layers = list()        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(num_of_layers):            layers.append(..)        self.conv0 = nn.Sequential(*layers)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>        out = self.conv0(x)        <span class="hljs-keyword">return</span> out</code></pre><p>æˆ‘ä»¬å»ºè®®å°†ç½‘ç»œæ‹†åˆ†ä¸ºæ›´å°çš„<strong>å¯é‡ç”¨éƒ¨åˆ†</strong>ã€‚ç½‘ç»œç”±æ“ä½œæˆ–å…¶å®ƒç½‘ç»œæ¨¡å—ç»„æˆã€‚æŸå¤±å‡½æ•°ä¹Ÿæ˜¯ç¥ç»ç½‘ç»œçš„æ¨¡å—ï¼Œå› æ­¤å¯ä»¥ç›´æ¥é›†æˆåˆ°ç½‘ç»œä¸­ã€‚</p><h5 id="2-è‡ªå®šä¹‰æ•°æ®é›†"><a href="#2-è‡ªå®šä¹‰æ•°æ®é›†" class="headerlink" title="(2) è‡ªå®šä¹‰æ•°æ®é›†"></a>(2) è‡ªå®šä¹‰æ•°æ®é›†</h5><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomDataset</span>(<span class="hljs-params">Dataset</span>):</span>    <span class="hljs-string">&quot;&quot;&quot; CustomDataset. &quot;&quot;&quot;</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, root_dir=<span class="hljs-string">&#x27;./data&#x27;</span>, transform=None</span>):</span>        <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        &quot;&quot;&quot;</span>        self.root_dir = root_dir        self.transform = transform        self.train_data = ...        self.train_target = ...    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__len__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> len(self.train_data)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__getitem__</span>(<span class="hljs-params">self, idx</span>):</span>        <span class="hljs-keyword">if</span> torch.is_tensor(idx):            idx = idx.tolist()        data = Image.open(self.train_data[idx])        target = Image.open(self.train_target[idx])        <span class="hljs-keyword">if</span> self.transform:            data, target = self.transform(data, target)        sample = &#123;<span class="hljs-string">&#x27;data&#x27;</span>: data, <span class="hljs-string">&#x27;high_img&#x27;</span>: target&#125;        <span class="hljs-keyword">return</span> sample</code></pre><h5 id="3-è‡ªå®šä¹‰æŸå¤±"><a href="#3-è‡ªå®šä¹‰æŸå¤±" class="headerlink" title="(3) è‡ªå®šä¹‰æŸå¤±"></a>(3) è‡ªå®šä¹‰æŸå¤±</h5><p>â€‹        è™½ç„¶ PyTorch å·²ç»æœ‰å¾ˆå¤šæ ‡å‡†çš„æŸå¤±å‡½æ•°ï¼Œä½†æœ‰æ—¶ä¹Ÿå¯èƒ½éœ€è¦åˆ›å»ºè‡ªå·±çš„æŸå¤±å‡½æ•°ã€‚ä¸ºæ­¤ï¼Œè¯·åˆ›å»ºå•ç‹¬çš„æ–‡ä»¶ <code>losses.py</code> å¹¶æ‰©å±• <code>nn.module</code> ç±»ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„æŸå¤±å‡½æ•°ï¼š</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomLoss</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-string">&quot;&quot;&quot; CustomLoss&quot;&quot;&quot;</span>        super(CustomLoss, self).__init__()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x, y</span>):</span>        <span class="hljs-keyword">return</span> torch.mean(torch.square(x  - y))</code></pre><h5 id="4-æ¨èå¯ä»¥å‚è€ƒçš„ç”¨äºè®­ç»ƒæ¨¡å‹çš„ä»£ç ç»“æ„"><a href="#4-æ¨èå¯ä»¥å‚è€ƒçš„ç”¨äºè®­ç»ƒæ¨¡å‹çš„ä»£ç ç»“æ„" class="headerlink" title="(4) æ¨èå¯ä»¥å‚è€ƒçš„ç”¨äºè®­ç»ƒæ¨¡å‹çš„ä»£ç ç»“æ„"></a>(4) æ¨èå¯ä»¥å‚è€ƒçš„ç”¨äºè®­ç»ƒæ¨¡å‹çš„ä»£ç ç»“æ„</h5><pre><code class="hljs python"><span class="hljs-comment"># import statements</span><span class="hljs-keyword">import</span> torch<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<span class="hljs-keyword">from</span> torch.utils <span class="hljs-keyword">import</span> data...<span class="hljs-comment"># set flags / seeds</span>torch.backends.cudnn.benchmark = <span class="hljs-literal">True</span>np.random.seed(<span class="hljs-number">1</span>)torch.manual_seed(<span class="hljs-number">1</span>)torch.cuda.manual_seed(<span class="hljs-number">1</span>)...  <span class="hljs-comment"># dataset</span>transform_train = ...trainform_text = ...train_dataset = CustomDataset(args.train_dataset, is_trainval = <span class="hljs-literal">True</span>, transform = transform_train) train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=args.batch_size,                                           shuffle=<span class="hljs-literal">True</span>, num_workers=<span class="hljs-number">0</span>, drop_last=<span class="hljs-literal">False</span>) valid_dataset = CustomDataset(args.valid_dataset, is_trainval = <span class="hljs-literal">True</span>, transform = transform_test)  valid_loader = torch.utils.data.DataLoader(valid_dataset, batch_size=args.val_batch_size,                                            shuffle=<span class="hljs-literal">True</span>, num_workers=<span class="hljs-number">0</span>) <span class="hljs-comment"># model &amp; loss</span>net = CustomNet().to(device) criterion = ...  <span class="hljs-comment"># lr &amp; optimizer</span>optim = optim.SGD(model.parameters(), lr=args.init_lr, momentum=args.momentum, weight_decay=args.weight_decay)scheduler = torch.optim.lr_scheduler.MultiStepLR(optimizer, milestones=[<span class="hljs-number">50</span>, <span class="hljs-number">70</span>], gamma=<span class="hljs-number">0.1</span>)<span class="hljs-comment"># load resume</span><span class="hljs-keyword">if</span> args.resume:    <span class="hljs-keyword">if</span> os.path.isfile(args.resume):        print(<span class="hljs-string">&quot;=&gt; loading checkpoint &#x27;&#123;&#125;&#x27;&quot;</span>.format(args.resume))        checkpoint = torch.load(args.resume)        args.start_epoch = checkpoint[<span class="hljs-string">&#x27;epoch&#x27;</span>]        best_prec = checkpoint[<span class="hljs-string">&#x27;best_prec&#x27;</span>]        model.load_state_dict(checkpoint[<span class="hljs-string">&#x27;state_dict&#x27;</span>])        optimizer.load_state_dict(checkpoint[<span class="hljs-string">&#x27;optimizer&#x27;</span>])        print(<span class="hljs-string">&quot;=&gt; loaded checkpoint &#x27;&#123;&#125;&#x27; (epoch &#123;&#125;) Prec: &#123;:f&#125;&quot;</span>              .format(args.resume, checkpoint[<span class="hljs-string">&#x27;epoch&#x27;</span>], best_prec1))    <span class="hljs-keyword">else</span>:        print(<span class="hljs-string">&quot;=&gt; no checkpoint found at &#x27;&#123;&#125;&#x27;&quot;</span>.format(args.resume))<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">train</span>(<span class="hljs-params">epoch</span>):</span>    model.train()ã€€<span class="hljs-comment"># åœ¨ã€€model(x)ã€€å‰éœ€è¦æ·»åŠ ã€€model.eval()ã€€æˆ–è€…ã€€model.eval()</span>    avg_loss = <span class="hljs-number">0.0</span>    train_acc = <span class="hljs-number">0.0</span>    <span class="hljs-keyword">for</span> batch_idx, batchdata <span class="hljs-keyword">in</span> enumerate(train_loader):        data, target = batchdata[<span class="hljs-string">&quot;data&quot;</span>], batchdata[<span class="hljs-string">&quot;target&quot;</span>] <span class="hljs-comment">#</span>        data, target = data.to(device), target.to(device)  <span class="hljs-comment">#</span>        <span class="hljs-comment"># åœ¨ loss.backward()ã€€å‰ç”¨ã€€optimizer.zero_grad()ã€€æ¸…é™¤ç´¯ç§¯æ¢¯åº¦</span>        optimizer.zero_grad() <span class="hljs-comment"># optimizer.zero_gradã€€ä¸ã€€model.zero_gradæ•ˆæœä¸€æ ·</span>        predict = model(data) <span class="hljs-comment"># </span>        loss = criterion(predict, target) <span class="hljs-comment">#</span>        avg_loss += loss.item() <span class="hljs-comment">#</span>        loss.backward()        optimizer.step()        print(<span class="hljs-string">&#x27;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125; (&#123;:.1f&#125;%)]\tLoss: &#123;:.6f&#125;&#x27;</span>.format(                epoch, batch_idx * len(data), len(train_loader.dataset),                <span class="hljs-number">100.</span> * batch_idx / len(train_loader), loss.item()))    <span class="hljs-keyword">if</span> (epoch + <span class="hljs-number">1</span>) %  args.save_interval == <span class="hljs-number">0</span>:        state = &#123; <span class="hljs-string">&#x27;epoch&#x27;</span>: epoch + <span class="hljs-number">1</span>,                   <span class="hljs-string">&#x27;state_dict&#x27;</span>: model.state_dict(),                   <span class="hljs-string">&#x27;best_prec&#x27;</span>: <span class="hljs-number">0.0</span>,                   <span class="hljs-string">&#x27;optimizer&#x27;</span>: optimizer.state_dict()&#125;        model_path = os.path.join(args.checkpoint_dir, <span class="hljs-string">&#x27;model_&#x27;</span> + str(epoch) + <span class="hljs-string">&#x27;.pth&#x27;</span>)        torch.save(state, model_path)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test</span>():</span>    model.eval()    test_loss = <span class="hljs-number">0</span>    <span class="hljs-keyword">for</span> batch_idx, batchdata <span class="hljs-keyword">in</span> enumerate(valid_loader):        data, target = batchdata[<span class="hljs-string">&quot;data&quot;</span>], batchdata[<span class="hljs-string">&quot;target&quot;</span>] <span class="hljs-comment">#</span>        data, target = data.to(device), target.to(device) <span class="hljs-comment">#</span>        predict = model(data) <span class="hljs-comment"># </span>        test_loss += criterion(predict, target) <span class="hljs-comment">#</span>        psnr = criterion(predict * <span class="hljs-number">255</span>, target * <span class="hljs-number">255</span>) <span class="hljs-comment">#</span>    test_loss /= len(valid_loader.dataset)    print(<span class="hljs-string">&#x27;\nTest set: Average loss: &#123;:.4f&#125;, loss:&#123;&#125;, PSNR: (&#123;:.1f&#125;)\n&#x27;</span>.format(        test_loss, test_loss / len(valid_loader.dataset), psnr / len(valid_loader.dataset)))    <span class="hljs-keyword">return</span> psnr / float(len(valid_loader.dataset))best_prec = <span class="hljs-number">0.0</span><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> range(args.start_epoch, args.epochs):    train(epoch)    scheduler.step()    print(print(optimizer.state_dict()[<span class="hljs-string">&#x27;param_groups&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;lr&#x27;</span>]))    current_prec = test()     is_best = current_prec &gt; best_prec <span class="hljs-comment">#ã€€æ›´æ”¹å¤§å°å†™ !</span>    best_prec = max(best_prec, best_prec) <span class="hljs-comment">#  max or min</span>    save_checkpoint(&#123;        <span class="hljs-string">&#x27;epoch&#x27;</span>: epoch + <span class="hljs-number">1</span>,        <span class="hljs-string">&#x27;state_dict&#x27;</span>: model.state_dict(),        <span class="hljs-string">&#x27;best_prec&#x27;</span>: best_prec,        <span class="hljs-string">&#x27;optimizer&#x27;</span>: optimizer.state_dict(),    &#125;, is_best, args.checkpoint_dir)</code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•ç›¸å…³æ•´ç†</title>
    <link href="/2019/04/29/Interview-2019/"/>
    <url>/2019/04/29/Interview-2019/</url>
    
    <content type="html"><![CDATA[<p>é¢è¯•ä¸€äº›ç›¸å…³çš„æ„Ÿå—ç»å†æ•´ç†</p><a id="more"></a><p>â€‹    æŠ•äº†å¤§æ¦‚æœ‰åå®¶å…¬å¸çš„æ ·å­ï¼Œå›å¤å¹¶è¿‡å»é¢è¯•çš„å…¬å¸æœ‰äº”å®¶ã€‚åº”è¯¥ä¼šåœ¨è¿™å‡ å®¶ä¸­å†³å®šå§ã€‚é¢è¯•æŒºè€—è´¹æ—¶é—´çš„ï¼Œå¿ƒä¹Ÿç´¯ï¼Œå¾—å‡†å¤‡å¥½å¤šä¸œè¥¿ã€‚è¿™äº”å®¶å…¬å¸åšçš„ä¸œè¥¿éƒ½ä¸å¤§ç›¸åŒã€‚ä¸¤å®¶åšAI+æ•™è‚²ï¼Œä¸€å®¶AI+å®‰é˜²ï¼Œä¸€å®¶é¥æ„Ÿå›¾åƒå¤„ç†ï¼Œè¿˜æœ‰ä¸€å®¶ä¸æ˜ç¡®ä¸»è¦ä¸šåŠ¡ã€‚ä¸»è¦é¢è¯•çš„å²—ä½ä¸º<strong>è®¡ç®—æœºè§†è§‰/å›¾åƒå¤„ç†å²—ä½</strong>ã€‚é™¤äº†ä¸€å®¶æ²¡æœ‰ç»™å‡ºæ„å‘ï¼Œå…¶ä»–å…¬å¸é¢çš„éƒ½è¿˜ç®—å¯ä»¥ã€‚å…¶å®å¹¶ä¸å–œæ¬¢AIã€äººå·¥æ™ºèƒ½è¿™äº› Titleï¼Œ æ„Ÿè§‰æœ‰ç‚¹è™šæ— ç¼¥ç¼ˆï¼Œä¸ç€è¾¹é™…(å¯èƒ½èèµ„æ¯”è¾ƒå®¹æ˜“å§)ï¼Œæ„Ÿè§‰è®¡ç®—æœºè§†è§‰/æœºå™¨è§†è§‰/å›¾åƒå¤„ç†æ›´åŠ è´´åœ°æ°”ï¼Œä¹ŸçŸ¥é“æ–¹å‘å’Œç›®æ ‡ã€‚</p><p>â€‹    æ¯ä¸ªå…¬å¸çš„ä¸»è¦æµç¨‹ä¸å°½ç›¸åŒï¼Œé¢è¯•çš„å†…å®¹ä¹Ÿä¸å°½ç›¸åŒã€‚ï¼ˆå…¶å®æ„Ÿè§‰åº”å±Šç”Ÿå’Œæœ‰å·¥ä½œç»éªŒçš„äººçš„é¢è¯•å†…å®¹è¿˜æŒºä¸ä¸€æ ·çš„ã€‚å‰è€…åŸºç¡€æ¯”è¾ƒé‡è¦ï¼Œåè€…æ›´çœ‹é‡é¡¹ç›®ç»å†ï¼‰ã€‚</p><p>â€‹    å…ˆè¯´ä¸€ä¸‹å¤§ä½“çš„é¢è¯•æµç¨‹ï¼š<strong>æŠ•ç®€å†</strong> -&gt; <strong>HR å‘é€ç›¸åº”çš„é¢è¯•é€šçŸ¥</strong>  -&gt; <strong>æ‰¾åˆ°ç›¸åº”çš„é¢è¯•åœ°ç‚¹</strong> -&gt; <strong>å¡«å†™é¢è¯•åº”è˜è¡¨</strong>  â€”&gt; <strong>æŠ€æœ¯é¢è¯•(ä¸€é¢/äºŒé¢)</strong> -&gt; <strong>HR é¢è¯•</strong> -&gt; <strong>åç»­æ²Ÿé€šä»¥åŠofferäº‹å®œ</strong></p><h4 id="1-ä¸€äº›åŸºæœ¬çš„ç¤¼ä»ªå’Œç»†èŠ‚é—®é¢˜ï¼š"><a href="#1-ä¸€äº›åŸºæœ¬çš„ç¤¼ä»ªå’Œç»†èŠ‚é—®é¢˜ï¼š" class="headerlink" title="1. ä¸€äº›åŸºæœ¬çš„ç¤¼ä»ªå’Œç»†èŠ‚é—®é¢˜ï¼š"></a>1. ä¸€äº›åŸºæœ¬çš„ç¤¼ä»ªå’Œç»†èŠ‚é—®é¢˜ï¼š</h4><p>ï¼ˆ1ï¼‰ç€è£…ï¼šæŠ€æœ¯æ€§é¢è¯•ï¼Œä¹Ÿæ²¡å¿…è¦æ­£è£…ï¼Œå¹³å¸¸ç€è£…å°±å¯ä»¥ã€‚ç„¶åå¹²å‡€ï¼Œåˆ©è½å°±è¡Œã€‚é¢è¯•å‰å¯ä»¥æ´—ä¸ªå¤´å§ï¼Œä¸€æ˜¯çœ‹ç€èˆ’çˆ½ï¼Œå¦å¤–é†’é†’ç›¹ğŸ¤£</p><p>ï¼ˆ2ï¼‰æˆ‘é¢è¯•çš„æ—¶å€™æºå¸¦çš„ä¸œè¥¿ï¼šèƒŒåŒ… + mac + ä¸€åªä¸­æ€§ç¬” + å‡ å¼ A4ç™½çº¸ + ç®€å†ï¼ˆä¸€äº›è¯ä¹¦å¯å¸¦å¯ä¸å¸¦ï¼‰</p><p>ï¼ˆ3ï¼‰å…³äºåˆ°è¾¾çš„æ—¶é—´ï¼šæˆ‘ä¸€èˆ¬æå‰30åˆ†é’Ÿåˆ°è¾¾é¢è¯•åœ°ç‚¹ï¼Œæå‰20åˆ†é’Ÿä¸Šæ¥¼ã€‚ä¸€æ˜¯ é¢„ç•™ buffer ç»™å µè½¦/æ‰¾è·¯ç­‰äº‹æƒ…ã€‚äºŒæ˜¯å¡«ä¸ªè¡¨ä»€ä¹ˆçš„ã€‚(è¿™ä¸ªçœ‹ä¸ªäººä¹ æƒ¯ï¼Œä¹Ÿä¸æ™“å¾—å¯¹ä¸å¯¹ã€‚)</p><p>ï¼ˆ4ï¼‰è¯šå®ï¼Œ ä¸ä¼šçš„å°±è¯´ä¸ä¼šã€‚éƒ½æ˜¯ææŠ€æœ¯çš„ï¼Œä¹Ÿä¸ä¼šä¸ºéš¾å¤§å®¶ã€‚å¦å¤–åƒæˆ‘æœ‰æ®µè€ƒç ”çš„ç»å†ï¼Œæˆ‘ä¹Ÿéƒ½ç›´æ¥è¯´å‡ºæ¥äº†ã€‚ä¸ç®¡ä»–ä»¬æ€ä¹ˆæƒ³ã€‚</p><h4 id="2-é¢è¯•çš„ä½“éªŒï¼š"><a href="#2-é¢è¯•çš„ä½“éªŒï¼š" class="headerlink" title="2. é¢è¯•çš„ä½“éªŒï¼š"></a>2. é¢è¯•çš„ä½“éªŒï¼š</h4><p>A å²—ä½ï¼šç»™äº†ä¸€é“å®é™…å·¥ä½œä¸­åº”ç”¨åœºæ™¯å†™ä»£ç ã€‚ç„¶åé—®é¡¹ç›®ã€é—®çš„æŒºç»†è‡´çš„ã€‚ã€å†™å‡ºä»£ç å¾ˆé‡è¦ï¼Œ è¿™ä¸ä»…å†³å®šä½ èƒ½ä¸èƒ½æ¥ä¸‹æ¥äºŒé¢ï¼Œç”šè‡³å½±å“äºŒé¢çš„å°è±¡ã€‘</p><p>B å²—ä½ï¼šé—®é¡¹ç›®ï¼ŒæŒºç»†è‡´çš„ã€‚ è¿˜é—®äº†ä¸€äº›åŸºç¡€çš„CPPå’Œlinuxçš„å†…å®¹ã€‚ï¼ˆè¯¥å²—ä½é¢è¯•ä½“éªŒå¾ˆå·®ï¼Œä¸€æ–¹é¢æœ‰ç‚¹ä¸ºéš¾äººï¼Œæˆ‘éƒ½è¯´ä¸ä¼šäº†ï¼Œè¿˜ä¸€ç›´é—®ã€‚å¦å¤–ä¸€æ–¹é¢é—®äº†å¥½å¤šå’Œå²—ä½æ— å…³çš„çŸ¥è¯†ï¼‰</p><p>C å²—ä½ï¼šåšé¢˜ï¼Œå¯èƒ½é¢˜ç›®[linuxåŸºç¡€+æ·±åº¦å­¦ä¹ +Python/CPP]åšçš„æ¯”è¾ƒå¥½ã€‚ç„¶åé¡¹ç›®é—®äº†ååˆ†é’Ÿå°±å·®ä¸å¤šè¿‡äº†ã€‚ã€åšå‡ºé¢˜ç›®å¾ˆå…³é”®ã€‘</p><p>D å²—ä½ï¼šé—®é¡¹ç›®ï¼Œä¹‹åè¿‡äº†ä¸‰å¤©æ‰“ç”µè¯æŠ€æœ¯é¢ï¼ˆæ„Ÿè§‰é—®çš„æŒºç²—,å¯èƒ½é¢è¯•å®˜ä¸æ˜¯åšè¿™ä¸ªçš„ï¼Œå¯¹æˆ‘çš„é¡¹ç›®ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼‰ã€‚</p><p>E å²—ä½ï¼šç›´æ¥é—®é¡¹ç›® + ä¸Šæœºå†™ä»£ç ã€‚ã€ä¸Šæœºå†™ä»£ç å¾ˆå…³é”®ã€‘</p><h4 id="3-é¢è¯•çš„æ”¶è·ä»¥åŠéœ€è¦åŠªåŠ›çš„åœ°æ–¹ï¼š"><a href="#3-é¢è¯•çš„æ”¶è·ä»¥åŠéœ€è¦åŠªåŠ›çš„åœ°æ–¹ï¼š" class="headerlink" title="3. é¢è¯•çš„æ”¶è·ä»¥åŠéœ€è¦åŠªåŠ›çš„åœ°æ–¹ï¼š"></a>3. é¢è¯•çš„æ”¶è·ä»¥åŠéœ€è¦åŠªåŠ›çš„åœ°æ–¹ï¼š</h4><p>ï¼ˆ0ï¼‰ç®€å†/è‡ªæˆ‘ä»‹ç»è¿˜æ˜¯è¦å‡†å¤‡å¥½çš„ï¼Œ æ„Ÿè§‰æŒºé‡è¦çš„ã€‚å…¶å®æˆ‘çš„ä»‹ç»çš„å¹¶ä¸å¤§å¥½ã€‚</p><p>ï¼ˆ1ï¼‰å†™ä»£ç å¾ˆå…³é”®ã€‚Pythonå’ŒC++éƒ½è¦ç†Ÿæ‚‰ï¼ŒC++ç”¨çš„å°‘äº†æœ‰ç‚¹ç”Ÿç–äº†ã€‚å¯¼è‡´Eå²—ä½çš„ç¿»è½¬åˆ—è¡¨éƒ½å¿˜äº†æ€ä¹ˆå†™äº†ã€‚(âŠ™ï¹âŠ™)b å‡†å¤‡æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œä¹Ÿæ²¡æœ‰å»åˆ·é¢˜ï¼Œç›´æ¥ç¡¬ç€å¤´çš®å°±ä¸Šäº†ã€‚ã€‚</p><p>ï¼ˆ2ï¼‰é¡¹ç›®è¦è®°å¾—éå¸¸ä»”ç»†ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚ï¼Œç”šè‡³ä¹‹å‰çš„ä»£ç éƒ½è¦è®°ä½</p><p>ï¼ˆ3ï¼‰å¸¸è§çš„é¢è¯•èŒƒå›´ï¼š</p><ul><li>é¡¹ç›®</li><li>(åˆ·é¢˜)å‰‘æŒ‡ offer + leetcode + codewars(Eé¢è¯•å®˜ç”¨çš„ï¼Œå“ˆå“ˆï¼Œå·å·å­¦æ¥çš„)</li><li>æœºå™¨å­¦ä¹  + æ·±åº¦å­¦ä¹  åŸºç¡€</li><li>å›¾åƒå¤„ç†åŸºç¡€çŸ¥è¯†</li></ul><p>ï¼ˆ4ï¼‰æœ‰ä¸¤ä¸‰å®¶å…¬å¸å¯¹ é«˜æ€§èƒ½è®¡ç®—å¾ˆæ„Ÿå…´è¶£ã€‚æˆ‘çŒœæµ‹æ˜¯åº”ä¸ºéƒ¨ç½²çš„æ—¶å€™DLå¤ªæ…¢å¯¼è‡´çš„ã€‚éœ€è¦è¿›è¡Œä¼˜åŒ–ã€‚å…¶ä¸­æœ‰ä¸€å®¶è¿˜é—®äº†caffe ä¸­å·ç§¯çš„å®ç°æ–¹æ¡ˆï¼šim2col + çŸ©é˜µä¹˜æ³•ã€‚è¿˜å¥½å½“å¹´çœ‹çœ‹ç™¾åº¦çš„MDL æ—¶å€™å»çœ‹äº†è¿™ä¸ªæºç ã€‚</p><p>â€‹     å…¶å®è¿™æ–¹é¢ä¹Ÿæ˜¯æˆ‘æŒºæ„Ÿå…´è¶£çš„ä¸€ä¸ªæ–¹é¢ï¼šå¸¸è§å¹¶è¡Œæ–¹æ¡ˆæœ‰ MPIã€OPENMPã€SIMDã€neonã€CUDA â€”&gt; éœ€è¦å¥½å¥½å­¦å­¦ ncnnï¼Œ çœ‹çœ‹äººå®¶æ€ä¹ˆå†™çš„DL interfaceã€‚</p><p>ï¼ˆ5ï¼‰blog å’Œ github è¿˜æ˜¯è¦å¥½å¥½æ•´æ•´çš„ï¼Œæ ‘ç«‹ä¸ªäººå“ç‰Œå¾ˆå…³é”®(Kaggleæ¯”èµ›ã€blogã€github)ï¼Œæœ‰å‡ ç¯‡blogæ˜¯æƒ³ç€å¥½å¥½å­¦ä¹ ä¸€ä¸‹çš„(å¿ƒæœ‰ä½™è€ŒåŠ›ä¸è¶³å‘€)ï¼š</p><ul><li><p>openmp</p></li><li><p>æœ€è¿‘çš„anchor freeçš„ç›®æ ‡æ£€æµ‹ç®—æ³•(è†œä¸€ä¸‹ densebox)</p></li><li><p>ncnn çš„ä¼˜åŒ–æ–¹æ¡ˆ</p></li></ul><p>ï¼ˆ6ï¼‰ æœ‰äº›é¢è¯•å®˜æ„Ÿè§‰çš„å‡ºæ¥ä¹Ÿä¸å¤§æ‡‚ä½ åšçš„ï¼Œå› æ­¤é¡¹ç›®ä¸­çš„å…±åŒçš„ä¸œè¥¿å°±è¦éå¸¸ç†Ÿæ‚‰ï¼Œæ¯”å¦‚ï¼š</p><p>â€‹      ç½‘ç»œä¸­çš„backboneã€ä¸€äº›è¡¡é‡æŒ‡æ ‡ã€lossè®¾è®¡ã€å‚æ•°è°ƒæ•´çš„è¿‡ç¨‹ã€ä¸€äº›æ£€æµ‹çš„æ–¹æ¡ˆï¼ˆSSD/YOLO/R-CNNã€anchor free or anchor basedï¼‰è¦ç†Ÿè®°ã€‚</p><p>ï¼ˆ7ï¼‰æœ‰äº›å…¬å¸è¿˜æ˜¯æŒºçœ‹é‡å®è·µèƒ½åŠ›çš„ï¼Œæ¯”å¦‚é—®äº† CMakeLists æ€ä¹ˆå†™ï¼Ÿ ncnnä¸­æ€ä¹ˆå®šä¹‰å±‚ï¼Ÿ æ€ä¹ˆä¼˜åŒ–ä»£ç ï¼Ÿæœ€åæ€ä¹ˆæäº¤æˆç»©çš„(åœ¨å…±æœ‰æ•°æ®é›†ä¸Šï¼Œæ¯”å¦‚lfwä¸Š)ï¼Ÿ</p><h4 id="4-å†™ä¸€ä¸‹å…¶ä»–çš„å§-åæ§½-ï¼š"><a href="#4-å†™ä¸€ä¸‹å…¶ä»–çš„å§-åæ§½-ï¼š" class="headerlink" title="4. å†™ä¸€ä¸‹å…¶ä»–çš„å§(åæ§½)ï¼š"></a>4. å†™ä¸€ä¸‹å…¶ä»–çš„å§(åæ§½)ï¼š</h4><p>ï¼ˆ1ï¼‰æœ‰äº›é¢è¯•é€šçŸ¥ä¸­éƒ½æ²¡æœ‰å†™æ˜åœ°ç‚¹? é‚£æ ‹æ¥¼? æ€ä¹ˆèµ°? â€”&gt; [æŸå…¬å¸å»åˆ°æ²¡æ‰¾åˆ°(ABCDEæ ‹/æ¥¼å±‚éƒ½æ²¡å†™)ï¼Œæ‰“äº†ä¸‰éç”µè¯æ‰æ¥é€š]</p><p>ï¼ˆ2ï¼‰æœ‰ä¸€å®¶å…¬å¸è¯´äº†ä¸¤ä¸ªå¤šå°æ—¶ï¼Œä¸€å£æ°´éƒ½æ²¡ç»™å–(æˆ‘é‚£ä¸ªæ¸´å‘€ï¼Œä»¥åå¯ä»¥è‡ªå·±å¸¦ä¸€ç“¶æ°´å§)</p><p>ï¼ˆ3ï¼‰æœ‰å®¶å…¬å¸æ‰”äº†ä¸€å¼ è¯•å·å°±èµ°äº†ï¼Œæˆ‘åŠä¸ªå°æ—¶å°±åšå®Œäº†ï¼Œä¸€ä¸ªåŠå°æ—¶ä¹‹åä»–æ‰å›æ¥(å…¶å®ä¹Ÿä¸æ˜¯ä»–ï¼Œå¦ä¸€ä¸ªé¢è¯•å®˜é¢çš„)ï¼ŒæœŸé—´å‡ºå»æ‰¾é¢è¯•å®˜ä¸¤æ¬¡æ²¡æ‰¾åˆ°ï¼Œä¸æ˜¯å‘ç°è¯¥å…¬å¸åŒäº‹åœ¨ç©æ‰‹æœºï¼Œå°±æ˜¯åœ¨èµ°å»ŠèŠå¤©ï¼Œ ç”šè€…è¿˜åœ¨æˆ‘åšé¢˜çš„é‚£ä¸ªå±‹é‡ŒåŠç†é“¶è¡Œå¡ï¼Œæˆ‘çœŸæ˜¯è§è¯†äº†ã€‚å¯¹è¯¥å…¬å¸å°è±¡æå…¶å·®ã€‚</p><p>â€‹    ã€æœ‰ä¸€å®¶åˆ›ä¸šå…¬å¸ç»™æˆ‘å°è±¡æŒºå¥½ï¼Œæ—©ä¸Šè¿˜ç»™æˆ‘å‘äº†é¢è¯•æé†’ï¼ŒHRè¿˜ä¸‹æ¥¼å»æ¥çš„æˆ‘ï¼Œè™½ç„¶æ²¡ç¢°åˆ°ã€‘</p><p>ï¼ˆ4ï¼‰é¢è¯•æ—¶ä¸è¦å®³æ€•(é¢å¤šäº†å°±å¥½äº†ï¼Œç°åœ¨é¢è¯•å¿ƒæƒ…å¾ˆè½»æ¾çš„)ï¼Œè¿›å…¬å¸ä¹‹åå°±æ˜¯åŒäº‹æˆ–è€…leaderï¼Œé¢è¯•å®˜ä¹Ÿä¸€èˆ¬ä¸ä¼šä¸ºéš¾é¢è¯•è€…çš„ã€‚æœ‰ä¸€å®¶å…¬å¸é¢è¯•å®˜åœ¨æˆ‘åšé¢˜æœŸé—´å¾ˆç»†å¿ƒçš„æŒ‡å¯¼åˆ«äººï¼Œç»™æˆ‘ç•™ä¸‹å¾ˆæ·±åˆ»çš„å°è±¡ã€‚</p><p>ï¼ˆ5ï¼‰é¢è¯•ä¹Ÿæ˜¯ä¸€ä¸ªåŒé€‰çš„è¿‡ç¨‹ï¼Œæ„Ÿè§‰ä¸å¥½çš„å…¬å¸å°½é‡ä¹Ÿä¸è¦å»ï¼Œå…å¾—æœ€åä¸æ¬¢è€Œæ•£ã€</p><p>ï¼ˆ6ï¼‰ä¹Ÿä¸è¦å®³æ€•è°ˆè–ªèµ„ï¼ŒæŒ‰è‡ªå·±èƒ½åŠ›è¦å³å¯ã€‚å¥½å§ï¼Œè¿™æ–¹é¢æˆ‘ä¸€ç›´ä¸åœ¨è¡Œã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>YOLO</title>
    <link href="/2019/04/23/YOLO/"/>
    <url>/2019/04/23/YOLO/</url>
    
    <content type="html"><![CDATA[<p>YOLO series: YOLO v1. YOLO v2 and. YOLO v3</p><a id="more"></a><h3 id="1-YOLO-v1"><a href="#1-YOLO-v1" class="headerlink" title="1. YOLO v1"></a>1. YOLO v1</h3><h4 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h4><p>ç›´æ¥åœ¨è¾“å‡ºå±‚å›å½’ bounding box çš„ä½ç½®å’Œ bounding boxæ‰€å±çš„ç±»åˆ«(æ•´å¼ å›¾ä½œä¸ºç½‘ç»œçš„è¾“å…¥ï¼ŒæŠŠ Object Detection çš„é—®é¢˜è½¬åŒ–æˆä¸€ä¸ª Regression é—®é¢˜)</p><h4 id="YOLO-v1-æµç¨‹"><a href="#YOLO-v1-æµç¨‹" class="headerlink" title="YOLO v1 æµç¨‹"></a>YOLO v1 æµç¨‹</h4><p><img src="/2019/04/23/YOLO/2.png" alt></p><ol><li><p>å°†å›¾ç‰‡Resizeæˆ448x448ï¼Œåˆ†æˆ7x7ä¸ªç½‘æ ¼(grid cell)ï¼ŒæŸä¸ªç‰©ä½“çš„ä¸­å¿ƒè½åœ¨è¿™ä¸ªç½‘æ ¼ä¸­æ­¤ç½‘æ ¼å°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªç‰©ä½“ã€‚</p></li><li><p>æå–ç‰¹å¾å’Œé¢„æµ‹ï¼Œå·ç§¯éƒ¨åˆ†è´Ÿè´£æå–ç‰¹å¾ã€‚å…¨è¿æ¥éƒ¨åˆ†è´Ÿè´£é¢„æµ‹ï¼š</p><ul><li>ä¸¤ä¸ª ã€bounding box(bbox) + conï¬denceã€‘ (2x5)</li><li>20ä¸ªç‰©ä½“çš„æ¦‚ç‡ï¼ˆ20ï¼‰</li></ul><p>æ€»çš„è¾“å‡ºä¸º (7X7)X30 çš„ç»´åº¦ã€‚</p></li><li><p>è¿‡æ»¤bboxï¼ˆé€šè¿‡nmsï¼‰</p></li></ol><h3 id="2-YOLO-v2"><a href="#2-YOLO-v2" class="headerlink" title="2. YOLO v2"></a>2. YOLO v2</h3><ol><li><p>class-specific confidence scoreï¼š</p><p>class-specific confidence score æ˜¯ä¸‰é¡¹çš„æˆç»©ã€‚ç¬¬ä¸€é¡¹æ˜¯ bboxæ¯ä¸ªç½‘æ ¼é¢„æµ‹çš„ç±»åˆ«ä¿¡æ¯å³20ä¸ªç‰©ä½“çš„æ¦‚ç‡ï¼Œ ç¬¬äºŒé¡¹æ˜¯æ¯ä¸ª bbox çš„ç½®ä¿¡åº¦ï¼Œ ç¬¬ä¸‰é¡¹æ˜¯ ground truth å’Œ é¢„æµ‹æ¡†çš„ IOUã€‚å¾—åˆ°æ¯ä¸ªbboxçš„class-specific confidence scoreä»¥åï¼Œè®¾ç½®é˜ˆå€¼ï¼Œæ»¤æ‰å¾—åˆ†ä½çš„boxesï¼Œå¯¹ä¿ç•™çš„boxesè¿›è¡ŒNMSå¤„ç†ï¼Œå°±å¾—åˆ°æœ€ç»ˆçš„æ£€æµ‹ç»“æœ</p></li><li><p>æŸå¤±å‡½æ•°çš„è®¾è®¡ï¼š<br><img src="/2019/04/23/YOLO/1.png" alt></p></li></ol><h3 id="3-YOLOv3"><a href="#3-YOLOv3" class="headerlink" title="3. YOLOv3"></a>3. YOLOv3</h3><p>è®ºæ–‡æ”¹è¿›ç‚¹</p><ul><li><p>BN + leaky ReLU + res connection[ åŠ å…¥äº†BNå±‚, æ¿€æ´»å‡½æ•°ä½¿ç”¨äº†Leaky ReLU, å¹¶ä¸”å¼•å…¥äº†æ®‹å·®è¿æ¥ ]</p></li><li><p>backbone(FPN multi scales)[ ä»¿ç…§FPNç½‘ç»œç»“æ„çš„å¤šå°ºåº¦æ£€æµ‹ ]</p></li><li><p>loss function [ é™¤äº†wã€hä»ç„¶ä½¿ç”¨å¹³æ–¹å‡å·®ï¼Œ å…¶ä»–å‡ä½¿ç”¨äº¤å‰ç†µã€‚ç„¶åæŒ‰æƒé‡ç›¸åŠ  ]</p></li><li><p>bbox anchor priors -&gt; softmax [ èšç±»è·å¾—å…ˆéªŒæ¡†å¤§å° ]</p></li></ul><h5 id="1-YOLOv3-ç»“æ„"><a href="#1-YOLOv3-ç»“æ„" class="headerlink" title="(1) YOLOv3 ç»“æ„"></a>(1) YOLOv3 ç»“æ„</h5><p><img src="/2019/04/23/YOLO/3_1.png" alt></p><p>â€‹    å…ˆä½¿ç”¨ DBL (conv+bn+leaky_relu) è¿›è¡Œä¸€ä¸ªç®€å•çš„æ»¤æ³¢å¤„ç†ï¼Œ ç„¶åæ¥res1, res2, res8 æå–ç‰¹å¾1, å†æ¥ res8 æå–ç‰¹å¾2, å†æ¥ res4 æå–ç‰¹å¾ 3, æœ€åèåˆä¸‰ä¸ªç‰¹å¾ã€‚</p><ul><li>ç›¸æ¯”äº YOLO V2 çš„ darknet19 é‡‡ç”¨ maxpool è¿›è¡Œä¸‹é‡‡æ ·ï¼Œ YOLO V3 æå‡ºçš„ Darknet53 åˆ™ä½¿ç”¨ stride ä¸º 2 çš„å·ç§¯æ ¸æ¥å®ç°ä¸‹é‡‡æ ·ã€‚åœ¨ YOLO v3 ä¸­ï¼Œ è¦ç»å†äº”æ¬¡ä¸‹é‡‡æ ·ï¼Œ ç‰¹å¾å›¾å°ºå¯¸ç¼©å°ä¸ºåŸæ¥çš„ 1/32ï¼Œ å³è¾“å…¥ä¸º 416 x 416, è¾“å‡ºä¸º 13x13ã€‚</li></ul><p><img src="/2019/04/23/YOLO/3_2.png" alt="x" style="zoom:50%;"></p><ul><li><p>å…·ä½“çš„ç»†èŠ‚å®ç°ä¸Šï¼Œ <strong>darknet 19 çš„ conv + bn + relu è¢«æ›¿æ¢ä¸º conv + bn + leaky_relu</strong>ã€‚å¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†æ®‹å·®ç»“æ„ã€‚</p></li><li><p>ä¸‰ä¸ªè¾“å‡ºåˆ†åˆ«æ˜¯ 13x13x255ã€26x26x255ã€52x52x255ã€‚yolo v3 è¾“å‡ºäº†3ä¸ªä¸åŒå°ºåº¦çš„ feature mapï¼ŒYOLO v3 å€Ÿé‰´äº† FPN(feature pyramid networks)ï¼Œé‡‡ç”¨å¤šå°ºåº¦æ¥å¯¹ä¸åŒ size çš„ç›®æ ‡è¿›è¡Œæ£€æµ‹ï¼Œè¶Šç²¾ç»†çš„ grid cell å°±å¯ä»¥æ£€æµ‹å‡ºè¶Šç²¾ç»†çš„ç‰©ä½“ã€‚</p><p>255çš„æ¥æº ? COCO çš„ç±»åˆ«æ•°ä¸º 80ï¼Œ åŠ ä¸Šä½ç½®ä¿¡æ¯ x, y, w, h å’Œ confidence ä¸º 85ã€‚æ¯ä¸ªç½‘æ ¼å•å…ƒé¢„æµ‹ 3 ä¸ª boxã€‚ æ€»å…±ä¸º 3 *( 80 + 5) = 255ã€‚</p></li></ul><h5 id="2-æŸå¤±å‡½æ•°"><a href="#2-æŸå¤±å‡½æ•°" class="headerlink" title="(2) æŸå¤±å‡½æ•°"></a>(2) æŸå¤±å‡½æ•°</h5><p>â€‹     åœ¨ YOLO v3é™¤äº†wã€h ä»ç„¶ä½¿ç”¨å¹³æ–¹å‡å·®ï¼Œ å…¶ä»– (x, y)ã€ class, confidence å‡ä½¿ç”¨äº¤å‰ç†µï¼Œç„¶åæŒ‰æƒé‡ç›¸åŠ ï¼ŒæŸå¤±å‡½æ•°åº”è¯¥ç”±å„è‡ªç‰¹ç‚¹ç¡®å®šã€‚æœ€ååŠ åˆ°ä¸€èµ·å°±å¯ä»¥ç»„æˆæœ€ç»ˆçš„ loss_function äº†ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªloss_functionæå®šç«¯åˆ°ç«¯çš„è®­ç»ƒã€‚</p><pre><code class="hljs cpp">xy_loss = object_mask * box_loss_scale * K.binary_crossentropy(raw_true_xy, raw_pred[..., <span class="hljs-number">0</span>:<span class="hljs-number">2</span>], from_logits=True)wh_loss = object_mask * box_loss_scale * <span class="hljs-number">0.5</span> * K.square(raw_true_wh - raw_pred[..., <span class="hljs-number">2</span>:<span class="hljs-number">4</span>])confidence_loss = object_mask * K.binary_crossentropy(object_mask, raw_pred[..., <span class="hljs-number">4</span>:<span class="hljs-number">5</span>], from_logits=True) + \                          (<span class="hljs-number">1</span> - object_mask) * K.binary_crossentropy(object_mask, raw_pred[..., <span class="hljs-number">4</span>:<span class="hljs-number">5</span>],                                                                    from_logits=True) * ignore_maskclass_loss = object_mask * K.binary_crossentropy(true_class_probs, raw_pred[..., <span class="hljs-number">5</span>:], from_logits=True)xy_loss = K.sum(xy_loss) / mfwh_loss = K.sum(wh_loss) / mfconfidence_loss = K.sum(confidence_loss) / mfclass_loss = K.sum(class_loss) / mfloss += xy_loss + wh_loss + confidence_loss + class_loss</code></pre><p>ä»¥ä¸Šæ˜¯ä¸€æ®µ keras æ¡†æ¶æè¿°çš„ yolo v3 çš„ loss_function ä»£ç ã€‚å¿½ç•¥æ’å®šç³»æ•°ä¸çœ‹ï¼Œå¯ä»¥ä»ä¸Šè¿°ä»£ç çœ‹å‡ºï¼šé™¤äº† w, h çš„æŸå¤±å‡½æ•°ä¾ç„¶é‡‡ç”¨å‡æ–¹è¯¯å·®ä¹‹å¤–ï¼Œå…¶ä»–éƒ¨åˆ†çš„æŸå¤±å‡½æ•°ç”¨çš„æ˜¯äº¤å‰ç†µã€‚æœ€ååŠ åˆ°ä¸€èµ·ã€‚</p><h5 id="3-Bounding-Box-Prediction"><a href="#3-Bounding-Box-Prediction" class="headerlink" title="(3) Bounding Box Prediction"></a>(3) Bounding Box Prediction</h5><p>â€‹    å¯¹äºYOLO v3 è€Œè¨€ï¼Œåœ¨ prior è¿™é‡Œçš„å¤„ç†æœ‰æ˜ç¡®è§£é‡Šï¼šé€‰ç”¨çš„ bbox priors çš„ k=9ï¼Œå¯¹äº tiny-yolo çš„è¯ï¼Œk = 6ã€‚priors éƒ½æ˜¯åœ¨æ•°æ®é›†ä¸Šèšç±»å¾—æ¥çš„ï¼Œæœ‰ç¡®å®šçš„æ•°å€¼ï¼Œå¦‚ä¸‹:</p><pre><code class="hljs cpp"><span class="hljs-number">10</span>,<span class="hljs-number">13</span>,  <span class="hljs-number">16</span>,<span class="hljs-number">30</span>,  <span class="hljs-number">33</span>,<span class="hljs-number">23</span>,  <span class="hljs-number">30</span>,<span class="hljs-number">61</span>,  <span class="hljs-number">62</span>,<span class="hljs-number">45</span>,  <span class="hljs-number">59</span>,<span class="hljs-number">119</span>,  <span class="hljs-number">116</span>,<span class="hljs-number">90</span>,  <span class="hljs-number">156</span>,<span class="hljs-number">198</span>,  <span class="hljs-number">373</span>,<span class="hljs-number">326</span></code></pre><p>â€‹    æ¯ä¸ª anchor prior å°±æ˜¯ä¸¤ä¸ªæ•°å­—ç»„æˆçš„ï¼Œä¸€ä¸ªä»£è¡¨é«˜åº¦å¦ä¸€ä¸ªä»£è¡¨å®½åº¦ã€‚ v3å¯¹b-boxè¿›è¡Œé¢„æµ‹çš„æ—¶å€™ï¼Œé‡‡ç”¨äº†logistic regressionã€‚è¾“å‡ºå’Œv2ä¸€æ ·éƒ½æ˜¯ (t_x, t_y, t_w, t_h, t_o)ï¼Œç„¶åé€šè¿‡å…¬å¼1è®¡ç®—å‡ºç»å¯¹çš„ (x, y, w, h, c) ã€‚</p><p><img src="/2019/04/23/YOLO/3_7.png" alt="c" style="zoom:50%;"></p><p>â€‹    logisticå›å½’ç”¨äºå¯¹anchoråŒ…å›´çš„éƒ¨åˆ†è¿›è¡Œä¸€ä¸ªç›®æ ‡æ€§è¯„åˆ†(objectness score)ï¼Œå³è¿™å—ä½ç½®æ˜¯ç›®æ ‡çš„å¯èƒ½æ€§æœ‰å¤šå¤§ã€‚è¿™ä¸€æ­¥æ˜¯åœ¨predictä¹‹å‰è¿›è¡Œçš„ï¼Œå¯ä»¥å»æ‰ä¸å¿…è¦anchorï¼Œå¯ä»¥å‡å°‘è®¡ç®—é‡ã€‚</p><h3 id="4-YOLOv4"><a href="#4-YOLOv4" class="headerlink" title="4. YOLOv4"></a>4. YOLOv4</h3><h3 id="5-YOLOv5"><a href="#5-YOLOv5" class="headerlink" title="5. YOLOv5"></a>5. YOLOv5</h3><h3 id="6-PP-YOLO"><a href="#6-PP-YOLO" class="headerlink" title="6. PP-YOLO"></a>6. PP-YOLO</h3><h3 id="7-Bag-of-Freebies"><a href="#7-Bag-of-Freebies" class="headerlink" title="7. Bag of Freebies"></a>7. Bag of Freebies</h3><p>è®ºæ–‡ã€ŠBag of Freebies for Training Object Detection Neural Networksã€‹æç‚¼äº†ç›®æ ‡æ£€æµ‹ç®—æ³•é€šç”¨è®­ç»ƒ tricksï¼Œè®ºæ–‡è¯´æ˜¯ Bag of Freebiesï¼Œå¹¶ä¸”æ›´å€¾å‘äºå¯¹ One-stage ç³»åˆ—ä¼˜åŒ–ï¼Œone-stage è®¡ç®—é‡æ›´å°ï¼Œåœ¨è½åœ°ä¸Šæ›´ä¸ºæ™®éã€‚</p><h3 id="äºŒã€ç›®æ ‡æ£€æµ‹è®­ç»ƒTricks"><a href="#äºŒã€ç›®æ ‡æ£€æµ‹è®­ç»ƒTricks" class="headerlink" title="äºŒã€ç›®æ ‡æ£€æµ‹è®­ç»ƒTricks"></a><strong>äºŒã€ç›®æ ‡æ£€æµ‹è®­ç»ƒTricks</strong></h3><p>  è®ºæ–‡[1]æ€»å…±æåˆ°äº†å…­ç§é€šç”¨çš„è®­ç»ƒTricksï¼Œå…¶ä¸­æœ‰å‡ ç§åœ¨yolov3åŸå§‹ç®—æ³•ä¸­éƒ½æœ‰ç”¨åˆ°ï¼Œæ‰€ä»¥è¯´ä¸å¾—ä¸æ‰¿è®¤yoloç³»åˆ—æ˜¯éå¸¸ä¼˜ç§€çš„ç›®æ ‡æ£€æµ‹ç®—æ³•ã€‚å…·ä½“ä¸º</p><p>1ã€Visually Coherent Image Mixup for Object Detection (mixupæ•°å‰§å¢å¼º,å€Ÿé‰´æ–‡[2])</p><p> ä¸[2]åŸå§‹çš„mixupä¸åŒç‚¹æœ‰ä¸¤ç‚¹ï¼š</p><p>1ï¼‰æ–‡[2]æå‡ºçš„mixupæ•°æ®å¢å¼ºæ˜¯ä¸€ç§æœ‰ç‰¹è‰²æ–¹æ³•ï¼Œä½†æ˜¯å®éªŒå¯¹è±¡æ˜¯åˆ†ç±»ä¸å¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼Œæˆå¯¹å›¾åƒçš„mixupæ˜¯ä»¥resizeåˆ°ç›¸åŒå¤§å°çš„å›¾åƒä¸ºå‰æå®Œæˆçš„ã€‚</p><p>â€‹            <img src="https://img-blog.csdnimg.cn/20190320130541830.png" alt="img"></p><p>  ç›®æ ‡æ£€æµ‹é—®é¢˜ä¸­å¦‚æœresizeå›¾åƒåˆ°ç›¸åŒå¤§å°åˆ™ä¼šé€ æˆå›¾åƒç•¸å˜ï¼Œæ£€æµ‹ä»»åŠ¡å¯¹äºè¿™ç§å˜åŒ–è¾ƒä¸ºæ•æ„Ÿï¼Œå› æ­¤ä½œè€…é‡‡ç”¨ä¿å›¾åƒå‡ ä½•å½¢çŠ¶çš„æ–¹å¼å¯¹å›¾åƒè¿›è¡Œmixup,æˆ‘çš„ç†è§£æ˜¯å›¾åƒç›´æ¥mixupæˆå¯¹å›¾åƒï¼Œå–æœ€å¤§å®½é«˜å¹¶å¡«å……ï¼ˆconstantåˆæˆçš„ç©ºç™½åŒºåŸŸï¼‰ï¼Œæœ€åè®¡ç®—æŸå¤±æ—¶æŒ‰ç…§mixupçš„betaåˆ†å¸ƒäº§ç”Ÿçš„æƒé‡ï¼Œå¯¹æŸå¤±è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå†åå‘ä¼ æ’­lossæ›´æ–°æ¨¡å‹æƒé‡ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20190320130542430.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L291eWFuZ2Z1c2h1,size_16,color_FFFFFF,t_70" alt="img"></p><p>2ï¼‰æ–‡[2]çš„mixupæ–¹æ³•ä¸­æˆå¯¹å›¾åƒæ±‚åŠ æƒå’Œçš„æƒé‡æ˜¯ç”±Betaåˆ†å¸ƒéšæœºç”Ÿæˆï¼ˆBetaåˆ†å¸ƒå¦‚å›¾ï¼‰ï¼ŒBetaçš„ä¸¤ä¸ªå‚æ•°é»˜è®¤å–å€¼1.0ï¼ˆæºç ï¼‰ï¼ŒåŸå§‹mixupè®ºæ–‡[2]è¯•éªŒåˆ™æ˜¯ä»0.2åˆ°1.0çš„å‡ ç»„è¯•éªŒå€¼ï¼Œè®ºæ–‡[1]é‡‡ç”¨çš„Betaåˆ†å¸ƒä¸¤ä¸ªå‚æ•°åˆ™æ˜¯å–å€¼å¤§äºç­‰äº1ï¼Œåœ¨å®éªŒä¸­Betaåˆ†å¸ƒçš„å‚æ•°å€¼å–1.5æ—¶æ•ˆæœæ›´å¥½ï¼Œæ¶¨ç‚¹æ˜æ˜¾ï¼š</p><p>â€‹                    <img src="https://img-blog.csdnimg.cn/20190320130541559.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L291eWFuZ2Z1c2h1,size_16,color_FFFFFF,t_70" alt="img">ã€‚</p><p>â€‹                     <img src="https://img-blog.csdnimg.cn/20190320130541720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L291eWFuZ2Z1c2h1,size_16,color_FFFFFF,t_70" alt="img"></p><h5 id="4-æ ‡ç­¾å¹³æ»‘-label-smoothing"><a href="#4-æ ‡ç­¾å¹³æ»‘-label-smoothing" class="headerlink" title="4. æ ‡ç­¾å¹³æ»‘ label smoothing"></a>4. æ ‡ç­¾å¹³æ»‘ label smoothing</h5><p>label  smoothing ä¸ªäººæ„Ÿè§‰åˆ™æ˜¯å¯¹æ ‡ç­¾æ”¾æ¾å¤„ç†ï¼ˆæ”¹å˜ç±»åˆ«çš„åˆ†å¸ƒï¼‰ï¼Œä½¿å¾—ç›®æ ‡å‡½æ•°ä¸è‡³äºå¤ªä¸¥æ ¼ï¼Œé™ä½ä¸åŒç±»åˆ«çš„ç½®ä¿¡åº¦ï¼Œä¸€å®šç¨‹åº¦ä¸Šä½¿å¾—æ¨¡å‹æ›´æ˜“äºæ”¶æ•›ä¸”èƒ½é¿å…æ¨¡å‹è¿‡æ‹Ÿåˆï¼ˆover fittingï¼‰ã€‚å¯¹ç›®æ ‡ç±»åˆ«çš„ Ground Truth åšå¦‚ä¸‹å¤„ç†ï¼Œå¯¹åŸå§‹æ ‡ç­¾ä¹˜ä¸Šä¸€ä¸ªå°äº 1 ä¸”æ¥è¿‘äº 1 çš„æ•°ï¼Œå†åŠ ä¸Šä¸€ä¸ªç±»ä¼¼æ­£åˆ™é¡¹çš„ä¸œä¸œï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸€ç§å¯¹ç›®æ ‡å‡½æ•°åšçš„æ­£åˆ™åŒ–å¤„ç†ã€‚</p><p>â€‹                         <img src="https://img-blog.csdnimg.cn/20190320130540863.png" alt="img"></p><p>  å…¶ä¸­ï¼ŒK ä¸ºç±»åˆ«æ•°ç›®ï¼Œåˆ†å­ä¸ºå°æ­£æ•°ï¼Œ ä¸€èˆ¬å– 0.1 ã€‚å…·ä½“çš„æè¿°å¯ä»¥å‚çœ‹è®ºæ–‡[3]ã€‚</p><pre><code class="hljs python"><span class="hljs-keyword">for</span> images, labels <span class="hljs-keyword">in</span> train_loader:    ...    N = labels.size(<span class="hljs-number">0</span>)    <span class="hljs-comment"># C is the number of classes.</span>    smoothed_labels = torch.full(size=(N, C), fill_value = <span class="hljs-number">0.1</span> / (C - <span class="hljs-number">1</span>)).cuda()    smoothed_labels.scatter_(dim=<span class="hljs-number">1</span>, index=torch.unsqueeze(labels, dim=<span class="hljs-number">1</span>), value=<span class="hljs-number">0.9</span>)        ...</code></pre><h5 id="5-æ•°æ®é¢„å¤„ç†-Data-Preprocessing"><a href="#5-æ•°æ®é¢„å¤„ç†-Data-Preprocessing" class="headerlink" title="5. æ•°æ®é¢„å¤„ç†  Data Preprocessing"></a>5. æ•°æ®é¢„å¤„ç†  Data Preprocessing</h5><p>æ–‡ç« ç€é‡è¯„ä¼°äº†å¸¸è§çš„å›¾åƒå¢å¼ºæ–¹æ³•:</p><ul><li>å‡ ä½•å˜æ¢ï¼šéšæœºè£å‰ªã€éšæœºæ‰©å¼ ã€éšæœºæ°´å¹³ç¿»è½¬ã€éšæœº resize</li><li>é¢œè‰²æŠ–åŠ¨ï¼šäº®åº¦ã€è‰²è°ƒã€æ›å…‰åº¦ã€å¯¹æ¯”åº¦è°ƒæ•´</li></ul><h5 id="6-Training-Scheduler-Revampingï¼ˆè®­ç»ƒç­–ç•¥æ”¹è¿›ï¼‰"><a href="#6-Training-Scheduler-Revampingï¼ˆè®­ç»ƒç­–ç•¥æ”¹è¿›ï¼‰" class="headerlink" title="6. Training Scheduler Revampingï¼ˆè®­ç»ƒç­–ç•¥æ”¹è¿›ï¼‰"></a>6. Training Scheduler Revampingï¼ˆè®­ç»ƒç­–ç•¥æ”¹è¿›ï¼‰</h5><p>è¿™é‡Œä¸»è¦é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼š warmup + cosine schedule</p><h5 id="7-Synchronized-Batch-Normalization"><a href="#7-Synchronized-Batch-Normalization" class="headerlink" title="7. Synchronized Batch Normalization"></a>7. Synchronized Batch Normalization</h5><p>  è¿™ä¸ªç­–ç•¥æ˜¯é’ˆå¯¹åœŸè±ªæçš„ï¼Œå¯¹äºå¤§è§„æ¨¡æ•°æ®é›†çš„å¤šå¡è®­ç»ƒï¼ŒBatchä¼šè¢«åˆ†å‰²æˆå¾ˆå¤šå°éƒ¨åˆ†ï¼ˆå° Batchï¼‰åœ¨ä¸åŒçš„æ˜¾å¡ï¼Œè¿™æ ·å®é™…ä¸Šè™½ç„¶åŠ é€Ÿäº†è®­ç»ƒï¼Œä½†æ˜¯Batchå´å˜å°äº†ï¼Œå¯èƒ½ä¼šé™åˆ¶Batch Normalizationçš„ä½œç”¨ï¼Œä¸å¤§Batchè®­ç»ƒçš„åˆè¡·å‘å·¦ã€‚å¯¹äºåˆ†ç±»é—®é¢˜å¯èƒ½å½±å“ä¸åˆ°ï¼Œä½†æ˜¯å¯¹äºå¯¹Batchæ•æ„Ÿçš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡åˆ™å½±å“å¾ˆå¤§ã€‚åŸºäºæ­¤é‡‡ç”¨Synchronized Batch Normalizationã€‚</p><h5 id="8ã€Random-shapes-training-for-single-stage-object-detection-networks-å¤šå°ºåº¦è®­ç»ƒ"><a href="#8ã€Random-shapes-training-for-single-stage-object-detection-networks-å¤šå°ºåº¦è®­ç»ƒ" class="headerlink" title="8ã€Random shapes training for single-stage object detection networks  å¤šå°ºåº¦è®­ç»ƒ"></a>8ã€Random shapes training for single-stage object detection networks  å¤šå°ºåº¦è®­ç»ƒ</h5><p>åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œ æ¯éš”ä¸€å®šçš„ iterations å°±æ”¹å˜è®­ç»ƒå›¾ç‰‡çš„å°ºåº¦ï¼Œè¿™æ ·åšå¯ä»¥å®ç°è·¨å°ºåº¦ç‰¹å¾èåˆï¼Œä¹Ÿèƒ½ä½¿å¾—æ¨¡å‹åœ¨å¤šç§è¾“å…¥å¤§å°ä¸‹è®­ç»ƒä»¥é€‚åº”ä¸åŒçš„å›¾åƒå¤§å°è¾“å…¥ã€‚è¿™æ ·åšä¹Ÿå¯ä»¥ä½¿å¾—æ¨¡å‹ä¸å®¹æ˜“è¿‡æ‹Ÿåˆä»¥å¢å¼ºæ³›åŒ–æ€§èƒ½ã€‚</p><h3 id="8-YOLO-çš„è½»é‡çº§æ”¹è¿›å‹"><a href="#8-YOLO-çš„è½»é‡çº§æ”¹è¿›å‹" class="headerlink" title="8. YOLO çš„è½»é‡çº§æ”¹è¿›å‹"></a>8. YOLO çš„è½»é‡çº§æ”¹è¿›å‹</h3>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>recent convolutions</title>
    <link href="/2019/04/21/recent-convolutions/"/>
    <url>/2019/04/21/recent-convolutions/</url>
    
    <content type="html"><![CDATA[<p>octave conv(octconv)ã€hetconvã€res2net</p><a id="more"></a><h3 id="1-octave-conv"><a href="#1-octave-conv" class="headerlink" title="1. octave conv"></a>1. octave conv</h3><h5 id="Paper"><a href="#Paper" class="headerlink" title="Paper:"></a>Paper:</h5><p>Drop an Octave: Reducing Spatial Redundancy in Convolutional Neural Networks with Octave Convolution</p><h5 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation:"></a>Motivation:</h5><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šï¼ˆaï¼‰è‡ªç„¶å›¾åƒå¯ä»¥è¢«åˆ†è§£ä¸ºé«˜é¢‘éƒ¨åˆ†å’Œä½é¢‘éƒ¨åˆ†ã€‚é«˜é¢‘åˆ†é‡è¡¨è¾¾ç»†èŠ‚ï¼Œä½é¢‘åˆ†é‡è¡¨è¾¾æ•´ä½“ã€‚å¾ˆæ˜¾ç„¶ï¼Œä½é¢‘åˆ†é‡æ˜¯å­˜åœ¨å†—ä½™çš„ï¼Œåœ¨ç¼–ç è¿‡ç¨‹ä¸­å¯ä»¥èŠ‚çœã€‚(b) å·ç§¯å±‚çš„è¾“å‡ºé€šé“ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¯ä»¥è¢«åˆ†è§£ä¸ºä½é¢‘åˆ†é‡å’Œé«˜é¢‘åˆ†é‡å¹¶è¿›è¡Œé‡ç»„ã€‚ï¼ˆcï¼‰ä½œè€…å°†ä½é¢‘åˆ†é‡çš„é€šé“å¤§å°è®¾ç½®ä¸ºé«˜é¢‘åˆ†é‡é€šé“å¤§å°çš„ä¸€åŠï¼Œç”¨æ¥å‡å°‘å†—ä½™ã€‚(d) ä½é¢‘éƒ¨åˆ†å’Œé«˜é¢‘éƒ¨åˆ†å¯ä»¥å„è‡ªæ›´æ–°ï¼Œå¹¶è¿›è¡Œé€šé“ä¹‹é—´çš„äº¤æµã€‚</p><p><img src="/2019/04/21/recent-convolutions/1.png" alt></p><h5 id="mothods"><a href="#mothods" class="headerlink" title="mothods"></a>mothods</h5><p>ä½œè€…æå‡ºäº† conv çš„æ”¹è¿›ç‰ˆ OctConv ç”¨æ¥é™ä½ä½é¢‘éƒ¨åˆ†çš„å†—ä½™åº¦ã€‚ Octconv çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/04/21/recent-convolutions/2.png" alt></p><p>å½“åœ¨ç¬¬ä¸€ä¸ª OctConv æ˜¯ $\alpha_{in} = 0$ï¼Œæ­¤æ—¶æ‰§è¡Œ â‘ â‘¡ ä¸¤ä¸ªæ“ä½œã€‚</p><pre><code class="hljs python"><span class="hljs-keyword">if</span> self.type == <span class="hljs-string">&#x27;first&#x27;</span>:    <span class="hljs-keyword">return</span> self.H2H(x), self.H2L(self.avg_pool(x))<span class="hljs-comment"># H2Hã€L2H å‡ä¸ºä¼ ç»Ÿå·ç§¯</span></code></pre><p>å½“åœ¨æœ€åä¸€ä¸ª OctConv ä¸­ $\alpha_{out} = 0$ï¼Œ æ­¤æ—¶æ‰§è¡Œ â‘ â‘¢ ä¸¤ä¸ªæ“ä½œã€‚</p><pre><code class="hljs python"><span class="hljs-keyword">if</span> self.type == <span class="hljs-string">&#x27;last&#x27;</span>:    hf, lf = x    <span class="hljs-keyword">return</span> self.H2H(hf) + self.L2H(self.upsample(lf))<span class="hljs-comment"># H2Hã€L2H å‡ä¸ºä¼ ç»Ÿå·ç§¯</span></code></pre><p>å½“å…¶ä»–æƒ…å†µæ—¶ï¼Œæ‰§è¡Œ â‘ â‘¡â‘¢â‘£å››ä¸ªæ“ä½œ</p><pre><code class="hljs python"><span class="hljs-keyword">else</span>ï¼š    hf, lf = x    <span class="hljs-keyword">return</span> self.H2H(hf) + self.upsample(self.L2H(lf)),            self.L2L(lf) + self.H2L(self.avg_pool(hf))<span class="hljs-comment"># L2Hã€L2Lã€H2Hã€H2L å‡ä¸ºä¼ ç»Ÿå·ç§¯</span></code></pre><p>octconv æ•´ä½“çš„å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OctConv</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, in_channels, out_channels, kernel_size, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">0</span>, </span></span><span class="hljs-function"><span class="hljs-params">             alpha_in=<span class="hljs-number">0.25</span>, alpha_out=<span class="hljs-number">0.25</span>, type=<span class="hljs-string">&#x27;normal&#x27;</span></span>):</span>        super(OctConv, self).__init__()        self.kernel_size = kernel_size        self.stride = stride        self.type = type        hf_in = int(in_channels * (<span class="hljs-number">1</span> - alpha_in))        hf_out = int(out_channels * (<span class="hljs-number">1</span> - alpha_out))        lf_in = in_channels - hf_in        lf_out = out_channels - hf_out        <span class="hljs-keyword">if</span> stride == <span class="hljs-number">2</span>:            self.downsample = nn.AvgPool2d(kernel_size=<span class="hljs-number">2</span>, stride=stride)        <span class="hljs-keyword">if</span> type == <span class="hljs-string">&#x27;first&#x27;</span>:            self.H2H = nn.Conv2d(in_channels, hf_out, kernel_size=kernel_size, stride=<span class="hljs-number">1</span>, padding=padding)            self.H2L = nn.Conv2d(in_channels, lf_out, kernel_size=kernel_size, stride=<span class="hljs-number">1</span>, padding=padding)            self.avg_pool = nn.AvgPool2d(kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>)        <span class="hljs-keyword">elif</span> type == <span class="hljs-string">&#x27;last&#x27;</span>:            self.H2H = nn.Conv2d(hf_in, out_channels, kernel_size=kernel_size, padding=padding)            self.L2H = nn.Conv2d(lf_in, out_channels, kernel_size=kernel_size, padding=padding)            self.upsample = partial(F.interpolate, scale_factor=<span class="hljs-number">2</span>, mode=<span class="hljs-string">&quot;nearest&quot;</span>)        <span class="hljs-keyword">else</span>:            self.L2L = nn.Conv2d(lf_in, lf_out, kernel_size=kernel_size, stride=<span class="hljs-number">1</span>, padding=padding)            self.L2H = nn.Conv2d(lf_in, hf_out, kernel_size=kernel_size, stride=<span class="hljs-number">1</span>, padding=padding)            self.H2L = nn.Conv2d(hf_in, lf_out, kernel_size=kernel_size, stride=<span class="hljs-number">1</span>, padding=padding)            self.H2H = nn.Conv2d(hf_in, hf_out, kernel_size=kernel_size, stride=<span class="hljs-number">1</span>, padding=padding)            self.upsample = partial(F.interpolate, scale_factor=<span class="hljs-number">2</span>, mode=<span class="hljs-string">&quot;nearest&quot;</span>)            self.avg_pool = partial(F.avg_pool2d, kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>        <span class="hljs-keyword">if</span> self.type == <span class="hljs-string">&#x27;first&#x27;</span>:            <span class="hljs-keyword">if</span> self.stride == <span class="hljs-number">2</span>:                x = self.downsample(x)            <span class="hljs-keyword">return</span> self.H2H(x), self.H2L(self.avg_pool(x))        <span class="hljs-keyword">elif</span> self.type == <span class="hljs-string">&#x27;last&#x27;</span>:            hf, lf = x            <span class="hljs-keyword">if</span> self.stride == <span class="hljs-number">2</span>:                hf = self.downsample(hf)                <span class="hljs-keyword">return</span> self.H2H(hf) + self.L2H(lf)            <span class="hljs-keyword">else</span>:                <span class="hljs-keyword">return</span> self.H2H(hf) + self.L2H(self.upsample(lf))        <span class="hljs-keyword">else</span>:            hf, lf = x            <span class="hljs-keyword">if</span> self.stride == <span class="hljs-number">2</span>:                hf = self.downsample(hf)                <span class="hljs-keyword">return</span> self.H2H(hf) + self.L2H(lf), self.L2L(self.avg_pool(lf)) + self.H2L(self.avg_pool(hf))            <span class="hljs-keyword">else</span>:                <span class="hljs-keyword">return</span> self.H2H(hf) + self.upsample(self.L2H(lf)), self.L2L(lf) + self.H2L(self.avg_pool(hf))</code></pre><h3 id="2-res2net"><a href="#2-res2net" class="headerlink" title="2. res2net"></a>2. res2net</h3><h5 id="Paper-1"><a href="#Paper-1" class="headerlink" title="Paper:"></a>Paper:</h5><p>Res2Net: A New Multi-scale Backbone Architecture</p><h5 id="Methods"><a href="#Methods" class="headerlink" title="Methods:"></a>Methods:</h5><p>ä½œè€…æå‡ºäº†ä¸€ç§åœ¨æ›´åŠ ç»†ç²’åº¦(å·ç§¯å±‚)çš„å±‚é¢æå‡å¤šå°ºåº¦è¡¨è¾¾èƒ½åŠ›ã€‚å…¶åŸºæœ¬ç»“æ„å¦‚ä¸‹å›¾(b) æ‰€ç¤ºï¼š</p><p><img src="/2019/04/21/recent-convolutions/3.png" alt></p><p>ä¼ ç»Ÿçš„resnetç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½œè€…åœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ï¼Œåœ¨ä¸å¢åŠ è®¡ç®—é‡çš„åŒæ—¶ï¼Œä½¿å…¶å…·å¤‡æ›´å¼ºçš„å¤šå°ºåº¦æå–èƒ½åŠ›ã€‚å¦‚ä¸Šå›¾ï¼ˆbï¼‰æ‰€ç¤ºï¼Œä½œè€…é‡‡ç”¨äº†æ›´å°çš„å·ç§¯ç»„æ¥æ›¿ä»£ bottleneck block é‡Œé¢çš„ 3x3 å·ç§¯ã€‚å…·ä½“æ“ä½œä¸ºï¼š</p><ul><li>é¦–å…ˆå°† 1x1 å·ç§¯åçš„ç‰¹å¾å›¾å‡åˆ†ä¸º s ä¸ªç‰¹å¾å›¾å­é›†ã€‚æ¯ä¸ªç‰¹å¾å›¾å­é›†çš„å¤§å°ç›¸åŒï¼Œä½†æ˜¯é€šé“æ•°æ˜¯è¾“å…¥ç‰¹å¾å›¾çš„ 1/sã€‚</li><li>å¯¹æ¯ä¸€ä¸ªç‰¹å¾å›¾å­é›† $X<em>i$ï¼Œæœ‰ä¸€ä¸ªå¯¹åº”çš„ 3x3 å·ç§¯ $K_i$ , å‡è®¾ $K_i$çš„è¾“å‡ºæ˜¯ $y_i$ã€‚æ¥ä¸‹æ¥æ¯ä¸ªç‰¹å¾å›¾å­é›† $X_i $ä¼šåŠ ä¸Š $K</em>{i-1}$ çš„è¾“å‡ºï¼Œç„¶åä¸€èµ·è¾“å…¥è¿› $K_i$ã€‚ä¸ºäº†åœ¨å¢å¤§ s çš„å€¼æ—¶å‡å°‘å‚æ•°é‡ï¼Œä½œè€…çœå»äº† $X_1$ çš„ 3x3 ç½‘ç»œã€‚å› æ­¤ï¼Œè¾“å‡º $y_i$ å¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼è¡¨ç¤ºï¼š</li></ul><script type="math/tex; mode=display">y_i = \begin{equation}\begin{cases}x_i && i=1;\\K_i(x_i+y_{i-1}) && 1 < i \leq s.\end{cases}\end{equation}</script><p>æ ¹æ®å›¾(b)ï¼Œå¯ä»¥å‘ç°æ¯ä¸€ä¸ª $X_j (j&lt;=i)$ ä¸‹çš„ 3x3 å·ç§¯å¯ä»¥åˆ©ç”¨ä¹‹å‰æ‰€æœ‰çš„ç‰¹æ€§ä¿¡æ¯ï¼Œå®ƒçš„è¾“å‡ºä¼šæœ‰æ¯” $X_j$ æ›´å¤§çš„æ„Ÿå—é‡ã€‚å› æ­¤è¿™æ ·çš„ç»„åˆå¯ä»¥ä½¿ Res2Net çš„è¾“å‡ºæœ‰æ›´å¤šæ ·çš„æ„Ÿå—é‡ä¿¡æ¯ã€‚ä¸ºäº†æ›´å¥½çš„èåˆä¸åŒå°ºåº¦çš„ä¿¡æ¯ï¼Œä½œè€…å°†å®ƒä»¬çš„è¾“å‡ºæ‹¼æ¥èµ·æ¥ï¼Œç„¶åå†é€å…¥ 1x1 å·ç§¯ï¼Œå¦‚ä¸Šå›¾ï¼ˆbï¼‰æ‰€ç¤ºã€‚</p><p>res2Net module çš„å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Res2NetBottleneck</span>(<span class="hljs-params">nn.Module</span>):</span>   expansion = <span class="hljs-number">4</span>   <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, in_channels, out_channels, downsample=None, stride=<span class="hljs-number">1</span>, scales=<span class="hljs-number">4</span>, groups=<span class="hljs-number">1</span>, se=False, norm_layer=None</span>):</span>       super(Res2NetBottleneck, self).__init__()       <span class="hljs-keyword">if</span> out_channels % scales != <span class="hljs-number">0</span>:           <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;Planes must be divisible by scales&#x27;</span>)       <span class="hljs-keyword">if</span> norm_layer <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:           norm_layer = nn.BatchNorm2d                  <span class="hljs-comment"># Both self.conv2 and self.downsample layers downsample the input when stride != 1</span>       self.conv1 = conv1x1(in_channels, out_channels, stride)       self.bn1 = norm_layer(out_channels)       self.conv2 = nn.ModuleList([conv3x3(out_channels // scales, out_channels // scales, groups=groups) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(scales<span class="hljs-number">-1</span>)])       self.bn2 = nn.ModuleList([norm_layer(out_channels // scales) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(scales<span class="hljs-number">-1</span>)])       self.conv3 = conv1x1(out_channels, out_channels * self.expansion)       self.bn3 = norm_layer(out_channels * self.expansion)       self.relu = nn.ReLU(inplace=<span class="hljs-literal">True</span>)       self.downsample = downsample       self.stride = stride       self.scales = scales   <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>       identity = x              out = self.relu(self.bn1(self.conv1(x)))       xs = torch.chunk(out, self.scales, <span class="hljs-number">1</span>)       ys = []       <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> range(self.scales):           <span class="hljs-keyword">if</span> s == <span class="hljs-number">0</span>:               ys.append(xs[s])           <span class="hljs-keyword">elif</span> s == <span class="hljs-number">1</span>:               ys.append(self.relu(self.bn2[s<span class="hljs-number">-1</span>](self.conv2[s<span class="hljs-number">-1</span>](xs[s]))))           <span class="hljs-keyword">else</span>:               ys.append(self.relu(self.bn2[s<span class="hljs-number">-1</span>](self.conv2[s<span class="hljs-number">-1</span>](xs[s] + ys[<span class="hljs-number">-1</span>]))))       out = torch.cat(ys, <span class="hljs-number">1</span>)       out = self.bn3(self.conv3(out))              <span class="hljs-keyword">if</span> self.downsample <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:           identity = self.downsample(identity)       <span class="hljs-keyword">return</span> self.relu(out + identity)</code></pre><h3 id="3-Hetconv"><a href="#3-Hetconv" class="headerlink" title="3. Hetconv"></a>3. Hetconv</h3><h5 id="Paperï¼š"><a href="#Paperï¼š" class="headerlink" title="Paperï¼š"></a>Paperï¼š</h5><p>HetConv: Heterogeneous Kernel-Based Convolutions for Deep CNNs</p><h5 id="Methods-1"><a href="#Methods-1" class="headerlink" title="Methods:"></a>Methods:</h5><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§é«˜æ•ˆçš„å¼‚æ„å·ç§¯è¿‡æ»¤å™¨(ä¸€äº›æ ¸çš„å¤§å°æ˜¯ 3x3ï¼Œ å…¶ä½™çš„æ˜¯1x1)ï¼Œç›¸è¾ƒäº mobilenetçš„åŸå§‹çš„ depthwise convï¼Œèƒ½åœ¨ä¸ç‰ºç‰²å‡†ç¡®åº¦çš„åŒæ—¶æå‡è¿™äº›æ¶æ„çš„æ•ˆç‡ã€‚å®ç°çš„æ–¹æ¡ˆå¾ˆç®€å•ï¼Œ å°†ä¼ ç»Ÿå·ç§¯è¿›è¡Œæ”¹è¿›ï¼Œå¯¹äºæŸä¸€ä¸ªå·ç§¯ï¼Œåªæœ‰1/pä¸ªé€šé“ ä½¿ç”¨ 3x3 çš„å·ç§¯ï¼Œå…¶ä½™å‡ä½¿ç”¨ 1x1å·ç§¯ï¼Œç„¶åå°†æ‰€æœ‰é€šé“ç›¸åŠ ï¼Œä½œä¸ºä¸€ä¸ªè¾“å‡ºé€šé“ã€‚</p><p>Hexconv module çš„å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤º</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HetConv</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, in_channels, out_channels, p=<span class="hljs-number">2</span></span>):</span>        super(HetConv, self).__init__()        <span class="hljs-keyword">if</span> in_channels % groups != <span class="hljs-number">0</span>:            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;in_channels must be divisible by groups&#x27;</span>)        self.in_channels = in_channels        self.out_channels = out_channels        self.blocks = nn.ModuleList()        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(out_channels):            self.blocks.append(self._make_hetconv_layer(i, p))    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_make_hetconv_layer</span>(<span class="hljs-params">self, n, p</span>):</span>        layers = nn.ModuleList()        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(self.in_channels):            <span class="hljs-keyword">if</span> ((i - n) % (p)) == <span class="hljs-number">0</span>:                layers.append(nn.Conv2d(in_channels=<span class="hljs-number">1</span>, out_channels=<span class="hljs-number">1</span>, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>))            <span class="hljs-keyword">else</span>:                layers.append(nn.Conv2d(in_channels=<span class="hljs-number">1</span>, out_channels=<span class="hljs-number">1</span>, kernel_size=<span class="hljs-number">1</span>, padding=<span class="hljs-number">0</span>))        <span class="hljs-keyword">return</span> layers    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>        out = []        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, self.out_channels):            out_ = self.blocks[i][<span class="hljs-number">0</span>](x[:, <span class="hljs-number">0</span>: <span class="hljs-number">1</span>, :, :])            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, self.in_channels):               out_ += self.blocks[i][j](x[:, j:j + <span class="hljs-number">1</span>, :, :])            out.append(out_)        <span class="hljs-keyword">return</span> torch.cat(out, <span class="hljs-number">1</span>)</code></pre><h3 id="ä¸‰ç§å·ç§¯çš„æ„é€ æ–¹å¼æ€»ç»“ï¼š"><a href="#ä¸‰ç§å·ç§¯çš„æ„é€ æ–¹å¼æ€»ç»“ï¼š" class="headerlink" title="ä¸‰ç§å·ç§¯çš„æ„é€ æ–¹å¼æ€»ç»“ï¼š"></a>ä¸‰ç§å·ç§¯çš„æ„é€ æ–¹å¼æ€»ç»“ï¼š</h3><p><img src="/2019/04/21/recent-convolutions/4.png" alt></p><ol><li>ä¸‰ç§å·ç§¯å‡åœ¨è¾“å…¥é€šé“è¿›è¡Œæ”¹è¿›ï¼Œå‰ä¸¤ç§æ–¹æ¡ˆ(res2netã€octconv)éƒ½è¿›è¡Œäº†ç‰¹å¾é€šé“çš„èåˆã€‚ä½†æ˜¯ç¬¬ä¸€ç§æ–¹æ¡ˆå¯¹ç¡¬ä»¶å¹¶ä¸å‹å¥½(æ²¡æœ‰è¿›è¡Œè¯•éªŒçš„éªŒè¯)ã€‚ç¬¬ä¸‰ç§æ–¹æ¡ˆå¯ä»¥çœ‹åšæ˜¯ä¼ ç»Ÿå·ç§¯çš„æ”¹å–„ï¼Œå°†å…¶ä¸­çš„æŸäº›é€šé“è®¾ç½®ä¸º3x3ï¼Œå…¶ä»–é€šé“è®¾ç½®ä¸º1x1å·ç§¯ã€‚</li><li>å¸¸è§çš„å¤šå°ºåº¦çš„è·å–æ–¹å¼ï¼š<ul><li>ç»†ç²’åº¦å·ç§¯(res2netæ–¹å¼)</li><li>NIN(ä¾‹å¦‚ Inception æ ·å¼çš„å·ç§¯ä¹Ÿå¯ä»¥)</li><li>å¤šå°ºåº¦å›¾åƒè¾“å‡º(å›¾åƒé‡‘å­—å¡”)</li><li>ç‰¹å¾å¤šå°ºåº¦(èåˆå¤šä¸ªå°ºåº¦çš„ç‰¹å¾å›¾ï¼šFPNç½‘ç»œ)</li><li>ç©ºé—´é‡‘å­—å¡”æ± åŒ–(Spatial Pyramid Pooling)</li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>receptive_size_and_anchor_design</title>
    <link href="/2019/04/21/receptive-size-and-anchor-design/"/>
    <url>/2019/04/21/receptive-size-and-anchor-design/</url>
    
    <content type="html"><![CDATA[<p>octave conv(octconv)ã€hetconvã€res2net</p><a id="more"></a><h3 id="1-æ„Ÿå—é‡çš„è®¡ç®—ï¼š"><a href="#1-æ„Ÿå—é‡çš„è®¡ç®—ï¼š" class="headerlink" title="1. æ„Ÿå—é‡çš„è®¡ç®—ï¼š"></a>1. æ„Ÿå—é‡çš„è®¡ç®—ï¼š</h3><pre><code class="hljs python"><span class="hljs-comment"># [kernel_size, stride, padding]</span>convnet =   [[<span class="hljs-number">11</span>,<span class="hljs-number">4</span>,<span class="hljs-number">0</span>], [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>], [<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>], [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>], [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>]]layer_names = [<span class="hljs-string">&#x27;conv1&#x27;</span>,<span class="hljs-string">&#x27;pool1&#x27;</span>,<span class="hljs-string">&#x27;conv2&#x27;</span>,<span class="hljs-string">&#x27;pool2&#x27;</span>,<span class="hljs-string">&#x27;conv3&#x27;</span>,<span class="hljs-string">&#x27;conv4&#x27;</span>,<span class="hljs-string">&#x27;conv5&#x27;</span>,<span class="hljs-string">&#x27;pool5&#x27;</span>]input image: receptive size: <span class="hljs-number">1</span> conv1: receptive size: <span class="hljs-number">11</span>  pool1: receptive size: <span class="hljs-number">19</span>  conv2: receptive size: <span class="hljs-number">51</span>pool2: receptive size: <span class="hljs-number">67</span>conv3: receptive size: <span class="hljs-number">99</span>conv4: receptive size: <span class="hljs-number">131</span>conv5: receptive size: <span class="hljs-number">163</span>pool5: receptive size: <span class="hljs-number">195</span></code></pre><h5 id="1-åå‘æ¨å¯¼ï¼š"><a href="#1-åå‘æ¨å¯¼ï¼š" class="headerlink" title="(1) åå‘æ¨å¯¼ï¼š"></a>(1) <strong>åå‘æ¨å¯¼</strong>ï¼š</h5><ul><li>åˆå§‹(æœ€å) $feature map$ å±‚çš„æ„Ÿå—é‡æ˜¯1ã€‚</li><li>æ¯ç»è¿‡ä¸€å±‚ kernel<em>sizeä¸º k, æ­¥é•¿ä¸º sçš„å·ç§¯/æ± åŒ–å±‚ï¼Œæ„Ÿå—é‡ $r</em>{l} = r \times s + (k-s) = (r_{l+1} -1) \times s + k$ ã€‚</li><li>ç»è¿‡å¤šåˆ†æ”¯çš„è·¯å¾„ï¼ŒæŒ‰ç…§æ„Ÿå—é‡æœ€å¤§æ”¯è·¯è®¡ç®—ã€‚</li><li>ä¸ä¼šæ”¹å˜æ„Ÿå—é‡çš„æƒ…å†µ: conv1x1 s1ã€ReLUã€BNã€dropoutã€shotcutç­‰å…ƒç´ çº§æ“ä½œã€‚</li><li>ç»è¿‡FCå±‚å’ŒGobal Ave Pooling å±‚ï¼Œæ„Ÿå—é‡å°±æ˜¯æ•´ä¸ªè¾“å…¥å›¾åƒã€‚</li></ul><pre><code class="hljs angelscript">ä»¥ pool5 ä¸ºä¾‹ï¼šPool5: (<span class="hljs-number">1</span><span class="hljs-number">-1</span>)*<span class="hljs-number">2</span> + <span class="hljs-number">3</span> = <span class="hljs-number">3</span>Conv5: (<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">1</span> + <span class="hljs-number">3</span> = <span class="hljs-number">5</span>Conv4: (<span class="hljs-number">5</span><span class="hljs-number">-1</span>)*<span class="hljs-number">1</span> + <span class="hljs-number">3</span> =  <span class="hljs-number">7</span>Conv3:(<span class="hljs-number">7</span><span class="hljs-number">-1</span>)*<span class="hljs-number">1</span> + <span class="hljs-number">3</span> = <span class="hljs-number">9</span>pool2: (<span class="hljs-number">9</span><span class="hljs-number">-1</span>)*<span class="hljs-number">2</span> + <span class="hljs-number">3</span> = <span class="hljs-number">19</span>Conv2: (<span class="hljs-number">19</span><span class="hljs-number">-1</span>)*<span class="hljs-number">1</span> + <span class="hljs-number">5</span>  = <span class="hljs-number">23</span>Pool1ï¼š (<span class="hljs-number">23</span><span class="hljs-number">-1</span>)*<span class="hljs-number">2</span> + <span class="hljs-number">3</span> = <span class="hljs-number">47</span>Conv1: (<span class="hljs-number">47</span><span class="hljs-number">-1</span>)*<span class="hljs-number">4</span> + <span class="hljs-number">11</span> = <span class="hljs-number">195</span></code></pre><h5 id="2-æ­£å‘æ¨å¯¼"><a href="#2-æ­£å‘æ¨å¯¼" class="headerlink" title="(2) æ­£å‘æ¨å¯¼"></a>(2) æ­£å‘æ¨å¯¼</h5><p>å’Œåå‘æ¨å¯¼ç›¸ä¼¼ï¼Œ $s_0 = 1$,  $feature_map$ çš„æ„Ÿå—é‡ä¸º1ã€‚</p><script type="math/tex; mode=display">\begin{eqnarray}&& r_{l+1} = r_l + (k-1) * s_l \\&& s_{l+1} = s_{l} * s \\\end{eqnarray}</script><pre><code class="hljs python">ä»¥ pool5 ä¸ºä¾‹ï¼šConv1: <span class="hljs-number">1</span> + (<span class="hljs-number">11</span><span class="hljs-number">-1</span>)*<span class="hljs-number">1</span> =  <span class="hljs-number">11</span>, s1=<span class="hljs-number">1</span>*<span class="hljs-number">4</span>=<span class="hljs-number">4</span>   <span class="hljs-comment"># [11,4,0]</span>Pool1: <span class="hljs-number">11</span> + (<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">4</span> = <span class="hljs-number">19</span>, s2=<span class="hljs-number">4</span>*<span class="hljs-number">2</span>=<span class="hljs-number">8</span>   <span class="hljs-comment"># [3,2,0]</span>Conv2: <span class="hljs-number">19</span> + (<span class="hljs-number">5</span><span class="hljs-number">-1</span>)*<span class="hljs-number">8</span> = <span class="hljs-number">51</span>, s3=<span class="hljs-number">8</span>*<span class="hljs-number">1</span>=<span class="hljs-number">8</span>  <span class="hljs-comment"># [5,1,2]</span>pool2: <span class="hljs-number">51</span> + (<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">8</span> = <span class="hljs-number">67</span>, s4=<span class="hljs-number">8</span>*<span class="hljs-number">2</span>=<span class="hljs-number">16</span> <span class="hljs-comment"># [3,2,0]</span>Conv3: <span class="hljs-number">67</span> + (<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">16</span> = <span class="hljs-number">99</span>, s5=<span class="hljs-number">16</span>*<span class="hljs-number">1</span>=<span class="hljs-number">16</span>  <span class="hljs-comment"># [3ï¼Œ1ï¼Œ1]</span>Conv4: <span class="hljs-number">99</span> + (<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">16</span> = <span class="hljs-number">131</span>ï¼Œ s6=<span class="hljs-number">16</span>*<span class="hljs-number">1</span>=<span class="hljs-number">16</span> <span class="hljs-comment"># [3ï¼Œ1ï¼Œ1]</span>Conv5: <span class="hljs-number">131</span> + (<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">16</span> = <span class="hljs-number">163</span>, s7=<span class="hljs-number">16</span>*<span class="hljs-number">1</span>=<span class="hljs-number">16</span> <span class="hljs-comment"># [3, 1, 1]</span>Pool5: <span class="hljs-number">163</span> + (<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">16</span> = <span class="hljs-number">195</span>, s8=<span class="hljs-number">16</span>*<span class="hljs-number">2</span>=<span class="hljs-number">32</span> <span class="hljs-comment"># [3, 2, 0]</span></code></pre><p>[<a href="https://medium.com/mlreview/a-guide-to-receptive-field-arithmetic-for-convolutional-neural-networks-e0f514068807">https://medium.com/mlreview/a-guide-to-receptive-field-arithmetic-for-convolutional-neural-networks-e0f514068807</a>]</p><p>[<a href="https://fomoro.com/projects/project/receptive-field-calculator">https://fomoro.com/projects/project/receptive-field-calculator</a>]</p><h3 id="2-å·ç§¯çš„æœ‰æ•ˆæ„Ÿå—é‡"><a href="#2-å·ç§¯çš„æœ‰æ•ˆæ„Ÿå—é‡" class="headerlink" title="2. å·ç§¯çš„æœ‰æ•ˆæ„Ÿå—é‡"></a>2. å·ç§¯çš„æœ‰æ•ˆæ„Ÿå—é‡</h3><p>ä¸Šæ–‡æ‰€è¿°çš„æ˜¯ç†è®ºæ„Ÿå—é‡ï¼Œè€Œç‰¹å¾çš„æœ‰æ•ˆæ„Ÿå—é‡ï¼ˆå®é™…èµ·ä½œç”¨çš„æ„Ÿå—é‡ï¼‰å®é™…ä¸Šæ˜¯è¿œå°äºç†è®ºæ„Ÿå—é‡çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å…·ä½“æ•°å­¦åˆ†ææ¯”è¾ƒå¤æ‚ï¼Œä¸å†èµ˜è¿°ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å‚è€ƒè®ºæ–‡ [Understanding the Effective Receptive Field in Deep Convolutional Neural Networks]ã€‚</p><p><img src="/2019/04/21/receptive-size-and-anchor-design/effective_receptive.jpg" alt="æœ‰æ•ˆæ„Ÿå—é‡ç¤ºä¾‹"></p><p>â€‹    ä¸‹é¢æˆ‘ä»ç›´è§‚ä¸Šè§£é‡Šä¸€ä¸‹æœ‰æ•ˆæ„Ÿå—é‡èƒŒåçš„åŸå› ã€‚ä»¥ä¸€ä¸ªä¸¤å±‚ <img src="https://www.zhihu.com/equation?tex=kernel%5C_size%3D3" alt="kernel\_size=3">ï¼Œ <img src="https://www.zhihu.com/equation?tex=stride%3D1" alt="stride=1">çš„ç½‘ç»œä¸ºä¾‹ï¼Œè¯¥ç½‘ç»œçš„ç†è®ºæ„Ÿå—é‡ä¸º5ï¼Œè®¡ç®—æµç¨‹å¯ä»¥å‚åŠ ä¸‹å›¾ã€‚å…¶ä¸­ <img src="https://www.zhihu.com/equation?tex=x" alt="x"> ä¸ºè¾“å…¥ï¼Œ <img src="https://www.zhihu.com/equation?tex=w" alt="w"> ä¸ºå·ç§¯æƒé‡ï¼Œ <img src="https://www.zhihu.com/equation?tex=o" alt="o"> ä¸ºç»è¿‡å·ç§¯åçš„è¾“å‡ºç‰¹å¾ã€‚</p><p>â€‹    å¾ˆå®¹æ˜“å¯ä»¥å‘ç°ï¼Œ <img src="https://www.zhihu.com/equation?tex=x_%7B1%2C1%7D" alt="x_{1,1}"> åªå½±å“ç¬¬ä¸€å±‚feature mapä¸­çš„ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E1" alt="o_{1,1}^1"> ï¼›è€Œ <img src="https://www.zhihu.com/equation?tex=x_%7B3%2C3%7D" alt="x_{3,3}"> ä¼šå½±å“ç¬¬ä¸€å±‚feature mapä¸­çš„æ‰€æœ‰ç‰¹å¾ï¼Œå³ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E1%2Co_%7B1%2C2%7D%5E1%2Co_%7B1%2C3%7D%5E1%2Co_%7B2%2C1%7D%5E1%2Co_%7B2%2C2%7D%5E1%2Co_%7B2%2C3%7D%5E1%2Co_%7B3%2C1%7D%5E1%2Co_%7B3%2C2%7D%5E1%2Co_%7B3%2C3%7D%5E1" alt="o_{1,1}^1,o_{1,2}^1,o_{1,3}^1,o_{2,1}^1,o_{2,2}^1,o_{2,3}^1,o_{3,1}^1,o_{3,2}^1,o_{3,3}^1"> ã€‚ç¬¬ä¸€å±‚çš„è¾“å‡ºå…¨éƒ¨ä¼šå½±å“ç¬¬äºŒå±‚çš„ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E2" alt="o_{1,1}^2"> ã€‚äºæ˜¯ <img src="https://www.zhihu.com/equation?tex=x_%7B1%2C1%7D" alt="x_{1,1}"> åªèƒ½é€šè¿‡ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E1" alt="o_{1,1}^1"> æ¥å½±å“ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E2" alt="o_{1,1}^2"> ï¼›è€Œ <img src="https://www.zhihu.com/equation?tex=x_%7B3%2C3%7D" alt="x_{3,3}"> èƒ½é€šè¿‡ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E1%2Co_%7B1%2C2%7D%5E1%2Co_%7B1%2C3%7D%5E1%2Co_%7B2%2C1%7D%5E1%2Co_%7B2%2C2%7D%5E1%2Co_%7B2%2C3%7D%5E1%2Co_%7B3%2C1%7D%5E1%2Co_%7B3%2C2%7D%5E1%2Co_%7B3%2C3%7D%5E1" alt="o_{1,1}^1,o_{1,2}^1,o_{1,3}^1,o_{2,1}^1,o_{2,2}^1,o_{2,3}^1,o_{3,1}^1,o_{3,2}^1,o_{3,3}^1"> æ¥å½±å“ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E2" alt="o_{1,1}^2"> ã€‚æ˜¾è€Œæ˜“è§ï¼Œè™½ç„¶ <img src="https://www.zhihu.com/equation?tex=x_%7B1%2C1%7D" alt="x_{1,1}"> å’Œ <img src="https://www.zhihu.com/equation?tex=x_%7B3%2C3%7D" alt="x_{3,3}"> éƒ½ä½äºç¬¬äºŒå±‚ç‰¹å¾æ„Ÿå—é‡å†…ï¼Œä½†æ˜¯äºŒè€…å¯¹æœ€åçš„ç‰¹å¾ <img src="https://www.zhihu.com/equation?tex=o_%7B1%2C1%7D%5E2" alt="o_{1,1}^2"> çš„å½±å“å´å¤§ä¸ç›¸åŒï¼Œè¾“å…¥ä¸­è¶Šé æ„Ÿå—é‡ä¸­é—´çš„å…ƒç´ å¯¹ç‰¹å¾çš„è´¡çŒ®è¶Šå¤§ã€‚</p><p><img src="/2019/04/21/receptive-size-and-anchor-design/123.png" alt></p><h3 id="3-anchor-è®¾è®¡åŸåˆ™ï¼š"><a href="#3-anchor-è®¾è®¡åŸåˆ™ï¼š" class="headerlink" title="3. anchor è®¾è®¡åŸåˆ™ï¼š"></a>3. anchor è®¾è®¡åŸåˆ™ï¼š</h3><p>anchorçš„æœ¬è´¨æ˜¯ç‰¹å¾å±‚çš„mapï¼Œè¿™å’Œä¼ ç»Ÿcvä¸­çš„æ»‘åŠ¨çª—å£å¹¶æ— äºŒè‡´ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”Ÿæˆæ›´å¥½çš„çª—å£å»åŒ¹é…bboxã€‚faster rcnn æ˜¯é€šè¿‡CNN æ¥è‡ªåŠ¨ç”Ÿæˆ anchorï¼Œåˆ©ç”¨äº† CNN è‡ªåŠ¨æå–ç‰¹å¾çš„èƒ½åŠ›ã€‚</p><p>anchor è®¾è®¡åŸåˆ™ï¼š</p><p>(1) anchor çš„å°ºå¯¸ã€é•¿å®½æ¯”ã€ä½ç½®éƒ½åº”è¯¥ match æºæ•°æ®ä¸­çš„bboxã€‚ä¸€ç§æ–¹æ³•æ˜¯é’ˆå¯¹ç‰¹å®šæ•°æ®é›†è®¾è®¡anchorï¼Œå¦‚YOLOv2ä¸­çš„èšç±»ï¼Œå’Œè¿‘æœŸæœ‰è®ºæ–‡CNNè®­ç»ƒanchorçš„è®¾ç½®ï¼Œè¿™äº›æ–¹æ³•æˆ–è®¸æ›´é€‚åˆæŸä¸€æ•°æ®é›†ï¼Œä½†ä¹Ÿå¯èƒ½å½±å“æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œæ¢ä¸€ä¸ªåº“æ˜¯å¦ä¾ç„¶å¤Ÿç”¨ã€‚</p><p>(2) anchor çš„ size å¿…é¡»å°äºæ„Ÿå—é‡</p><p>(3) ä¸åŒsizeçš„anchoråº”å½“å…·æœ‰ç›¸åŒçš„ç©ºé—´å¯†åº¦åˆ†å¸ƒã€‚å¯†åº¦ä¸€è‡´çš„è¯ï¼Œè¦æ±‚ anchor/stride ä¸ºä¸€ä¸ªå®šå€¼ã€‚</p><p>ä¸‹é¢ä»¥äººè„¸æ£€æµ‹ä¸ºä¾‹ï¼Œæ¥åˆ†æ anchor çš„è®¾è®¡ï¼š</p><p>ï¼ˆ1ï¼‰MSFD ä¸­é€šè¿‡åˆ†æ WIDER Face ä¸­äººè„¸çš„èŒƒå›´ï¼Œè¿›è€Œå°† anchor çš„å°ºå¯¸è®¾å®šä¸º </p><p>16/32/64/128/256/512 è¿™äº›èŒƒå›´ï¼Œä»è€Œè¦†ç›–ä¸åŒå°ºå¯¸çš„äººè„¸ã€‚anchorsâ€™ aspect ratio åˆ™è®¾å®šä¸º1: 1.5 ã€‚è¿™æ˜¯è€ƒè™‘åˆ°äººè„¸çš„å½¢çŠ¶å®½é«˜æ¯”ä¸º 1.5 è¿™ä¸€äº‹å®ã€‚</p><p>(2) S3FD ä¸­æå‡ºçš„ä¸¤æ¡è®¾è®¡åŸåˆ™ã€‚æˆ‘ä»¬çœ‹åˆ° anchor å°äºæ„Ÿå—é‡ï¼Œå¤§çº¦ä¸ºæ„Ÿå—é‡çš„ 1/4ï¼Œ stride åˆ™å‡ä¸º anchor çš„ 1/4ã€‚è¿™ä¿è¯äº†anchor çš„å¯†åº¦ä¸€è‡´ã€‚</p><p><img src="/2019/04/21/receptive-size-and-anchor-design/rf.png" alt></p><p>æˆ‘ä»¬æ¥çœ‹Faceboxesä¸­çš„anchor è®¾è®¡ï¼š</p><p><img src="/2019/04/21/receptive-size-and-anchor-design/anchor.png" alt></p><p>è¿™é‡Œ 32 å’Œ 64 çš„anchor å¯†åº¦ä¸º1å’Œ2ï¼Œå°äºå…¶ä»–çš„å¯†åº¦4ï¼Œæ‰€ä»¥é€šè¿‡å¯¹ 32 å¤åˆ¶4æ¬¡ï¼Œå¯¹64 å¤åˆ¶ä¸¤æ¬¡æ¥ä½¿anchor å¯†åº¦ä¸€è‡´ã€‚</p><p>[1]SSD:Single Shot MultiBox Detector</p><p>[2] YOLOv3: An Incremental Improvement</p><p>[3]FPN: feature pyramid networks for object detection </p><p>[4] A practical theory for designing very deep convolutional neural networks</p><p>[5] S3FD: Single Shot Scale-invariant Face Detector</p><p>[6] FaceBoxes: A CPU Real-time Face Detector with High Accuracy</p><p>[7] <a href="https://medium.com/@andersasac/anchor-boxes-the-key-to-quality-object-detection-ddf9d612d4f9">https://medium.com/@andersasac/anchor-boxes-the-key-to-quality-object-detection-ddf9d612d4f9</a></p><p>[8] <a href="https://www.reddit.com/r/MachineLearning/comments/7giwk1/d_is_anchor_necessary_for_object_detection/">https://www.reddit.com/r/MachineLearning/comments/7giwk1/d_is_anchor_necessary_for_object_detection/</a></p><p>[9] <a href="https://zhuanlan.zhihu.com/p/55824651">https://zhuanlan.zhihu.com/p/55824651</a></p>]]></content>
    
    
    <categories>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>GCN</title>
    <link href="/2019/04/20/GCN/"/>
    <url>/2019/04/20/GCN/</url>
    
    <content type="html"><![CDATA[<p>GCN tutorial</p><a id="more"></a><h4 id="1-åŸºæœ¬çš„ä¼ æ’­è§„åˆ™"><a href="#1-åŸºæœ¬çš„ä¼ æ’­è§„åˆ™" class="headerlink" title="1. åŸºæœ¬çš„ä¼ æ’­è§„åˆ™"></a>1. åŸºæœ¬çš„ä¼ æ’­è§„åˆ™</h4><p><img src="/2019/04/20/GCN/1.png" alt></p><p>åœ¨å¼€å§‹å‰å…ˆè¯´æ˜å‡ ä¸ªç¬¦å·çš„å«ä¹‰ï¼š</p><ol><li>$N = 1,2,3,â€¦,n$ ä»£è¡¨æ‰€æœ‰èŠ‚ç‚¹ã€‚</li><li>$X$ ä»£è¡¨æ‰€æœ‰èŠ‚ç‚¹çš„ç‰¹å¾ï¼Œ å…¶ä¸­  $X_i$ ä»£è¡¨èŠ‚ç‚¹ $i$ çš„ç‰¹å¾ã€‚</li><li>$A$  ä»£è¡¨é‚»æ¥çŸ©é˜µï¼Œå…¶ä¸­ $A_{ij}$ ä»£è¡¨èŠ‚ç‚¹ $i$ å’Œ èŠ‚ç‚¹ $j$ ä¹‹é—´çš„è¾¹çš„æƒï¼Œ å¦‚æœæ— æƒå›¾åˆ™ä¸º 0 æˆ–è€… 1ã€‚</li></ol><h5 id="1-ç®€å•ä¼ æ’­ï¼ˆå¹³å‡ï¼‰ï¼š"><a href="#1-ç®€å•ä¼ æ’­ï¼ˆå¹³å‡ï¼‰ï¼š" class="headerlink" title="1. ç®€å•ä¼ æ’­ï¼ˆå¹³å‡ï¼‰ï¼š"></a>1. ç®€å•ä¼ æ’­ï¼ˆå¹³å‡ï¼‰ï¼š</h5><script type="math/tex; mode=display">f(Xï¼ŒA) = AX</script><p>ç®€å•ä¼ æ’­çš„é—®é¢˜ï¼š</p><ul><li>èŠ‚ç‚¹çš„èšåˆè¡¨å¾ä¸åŒ…å«å®ƒè‡ªå·±çš„ç‰¹å¾ï¼</li><li>åº¦å¤§çš„èŠ‚ç‚¹åœ¨å…¶ç‰¹å¾è¡¨å¾ä¸­å°†å…·æœ‰è¾ƒå¤§çš„å€¼ï¼Œåº¦å°çš„èŠ‚ç‚¹å°†å…·æœ‰è¾ƒå°çš„å€¼ã€‚</li></ul><h5 id="2-å¢åŠ è‡ªç¯"><a href="#2-å¢åŠ è‡ªç¯" class="headerlink" title="2. å¢åŠ è‡ªç¯"></a>2. å¢åŠ è‡ªç¯</h5><script type="math/tex; mode=display">f(Xï¼ŒA) = (A+I)X</script><h5 id="3-ç‰¹å¾å½’ä¸€åŒ–å¤„ç†"><a href="#3-ç‰¹å¾å½’ä¸€åŒ–å¤„ç†" class="headerlink" title="3. ç‰¹å¾å½’ä¸€åŒ–å¤„ç†"></a>3. ç‰¹å¾å½’ä¸€åŒ–å¤„ç†</h5><script type="math/tex; mode=display">f(Xï¼ŒA) =  D^{-1}(A+I)X</script><h5 id="4-å¯¹ç§°å½’ä¸€åŒ–å¤„ç†"><a href="#4-å¯¹ç§°å½’ä¸€åŒ–å¤„ç†" class="headerlink" title="4. å¯¹ç§°å½’ä¸€åŒ–å¤„ç†"></a>4. å¯¹ç§°å½’ä¸€åŒ–å¤„ç†</h5><script type="math/tex; mode=display">f(Xï¼ŒA) = D^{-0.5}(A+I)D^{-0.5}X</script><h5 id="5-å¢åŠ æƒé‡"><a href="#5-å¢åŠ æƒé‡" class="headerlink" title="5. å¢åŠ æƒé‡"></a>5. å¢åŠ æƒé‡</h5><script type="math/tex; mode=display">f(Xï¼ŒA) = D^{-0.5}(A+I)D^{-0.5}X W</script><h5 id="6-æ·»åŠ -æ¿€æ´»å‡½æ•°"><a href="#6-æ·»åŠ -æ¿€æ´»å‡½æ•°" class="headerlink" title="6. æ·»åŠ  æ¿€æ´»å‡½æ•°"></a>6. æ·»åŠ  æ¿€æ´»å‡½æ•°</h5><script type="math/tex; mode=display">f(Xï¼ŒA) = \sigma (D^{-0.5}(A+I)D^{-0.5}XW)</script><h4 id="2-GCN-å¯ä»¥åšä»€ä¹ˆï¼Ÿ"><a href="#2-GCN-å¯ä»¥åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. GCN å¯ä»¥åšä»€ä¹ˆï¼Ÿ"></a>2. GCN å¯ä»¥åšä»€ä¹ˆï¼Ÿ</h4><h5 id="ï¼ˆ1ï¼‰-ç»“ç‚¹åˆ†ç±»ï¼ˆNode-classificationï¼‰"><a href="#ï¼ˆ1ï¼‰-ç»“ç‚¹åˆ†ç±»ï¼ˆNode-classificationï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰ ç»“ç‚¹åˆ†ç±»ï¼ˆNode classificationï¼‰"></a>ï¼ˆ1ï¼‰ ç»“ç‚¹åˆ†ç±»ï¼ˆNode classificationï¼‰</h5><h5 id="ï¼ˆ2ï¼‰-å›¾åˆ†ç±»ï¼ˆGraph-classificationï¼‰"><a href="#ï¼ˆ2ï¼‰-å›¾åˆ†ç±»ï¼ˆGraph-classificationï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰ å›¾åˆ†ç±»ï¼ˆGraph classificationï¼‰"></a>ï¼ˆ2ï¼‰ å›¾åˆ†ç±»ï¼ˆGraph classificationï¼‰</h5><h5 id="ï¼ˆ3ï¼‰è¿æ¥é¢„æµ‹ï¼ˆLink-prediction-ï¼‰"><a href="#ï¼ˆ3ï¼‰è¿æ¥é¢„æµ‹ï¼ˆLink-prediction-ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰è¿æ¥é¢„æµ‹ï¼ˆLink prediction ï¼‰"></a>ï¼ˆ3ï¼‰è¿æ¥é¢„æµ‹ï¼ˆLink prediction ï¼‰</h5><p><img src="/2019/04/20/GCN/2.png" alt></p><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ol><li><a href="https://tkipf.github.io/graph-convolutional-networks">https://tkipf.github.io/graph-convolutional-networks</a></li><li></li></ol>]]></content>
    
    
    <categories>
      
      <category>æ¢ç´¢</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>awesome-face</title>
    <link href="/2019/04/18/awesome-face/"/>
    <url>/2019/04/18/awesome-face/</url>
    
    <content type="html"><![CDATA[<p>my GitHub project awesome-face: face algorithmã€source codeã€datasetsã€conf/workshop/trans</p><a id="more"></a><h1 id="awesome-face"><a href="#awesome-face" class="headerlink" title="awesome-face"></a>awesome-face</h1><p>ğŸ”¥  face releated algorithm, datasets and papers  ğŸ¤”</p><h2 id="ğŸ“-Paper-Algorithm"><a href="#ğŸ“-Paper-Algorithm" class="headerlink" title="ğŸ“ Paper / Algorithm"></a>ğŸ“ Paper / Algorithm</h2><h4 id="2D-Face-Recognition"><a href="#2D-Face-Recognition" class="headerlink" title="2D- Face Recognition"></a>2D- Face Recognition</h4><p><img src="/2019/04/18/awesome-face/face_reg.png" alt="2d_face_reg"></p><p><strong>[1] DeepID1</strong>  <a href="https://www.cv-foundation.org/openaccess/content_cvpr_2014/papers/Sun_Deep_Learning_Face_2014_CVPR_paper.pdf"><strong>[paper]</strong></a> </p><p>Deep Learning Face Representation from Predicting 10,000 Classes</p><p><strong>[2] DeepID2</strong>  <a href="https://arxiv.org/abs/1406.4773"><strong>[paper]</strong></a> </p><p>Deep Learning Face Representation by Joint Identification-Verification</p><p><strong>[3] DeepID2+</strong>  <a href="https://arxiv.org/abs/1412.1265"><strong>[paper]</strong></a></p><p>Deeply learned face representations are sparse, selective, and robust</p><p><strong>[4] DeepIDv3</strong>  <a href="https://arxiv.org/abs/1502.00873"><strong>[paper]</strong></a> </p><p>DeepID3: Face Recognition with Very Deep Neural Networks</p><p><strong>[5] Deep Face</strong> <a href="https://www.robots.ox.ac.uk/~vgg/publications/2015/Parkhi15/parkhi15.pdf"><strong>[paper]</strong></a> </p><p>Deep Face Recognition</p><p><strong>[6] Center Loss</strong> <a href="http://ydwen.github.io/papers/WenECCV16.pdf"><strong>[paper]</strong></a>    <a href="https://github.com/ydwen/caffe-face"><strong>[code]</strong></a></p><p>A Discriminative Feature Learning Approach for Deep Face Recognition</p><p><strong>[7]Marginal loss</strong> <a href="https://www.computer.org/csdl/proceedings-article/cvprw/2017/0733c006/12OmNzayNCT"><strong>[paper]</strong></a></p><p>Marginal loss for deep face recognition</p><p><strong>[8] Range Loss</strong><a href="https://arxiv.org/abs/1611.08976"><strong>[paper]</strong></a> </p><p>Range Loss for Deep Face Recognition with Long-tail</p><p><strong>[9]Contrastive Loss</strong> <a href="https://arxiv.org/abs/1406.4773"><strong>[paper]</strong></a></p><p>Deep learning face representation by joint identification-verification</p><p><strong>[10] FaceNet</strong>   <a href="https://arxiv.org/abs/1503.03832"><strong>[paper]</strong></a>   <a href="https://github.com/davidsandberg/facenet">[<strong>third-party implemention</strong>]</a></p><p>FaceNet: A Unified Embedding for Face Recognition and Clustering</p><p><strong>[11] NormFace</strong>  <a href="https://arxiv.org/pdf/1704.06369.pdf"><strong>[paper]</strong></a>    <a href="https://github.com/happynear/NormFace"><strong>[code]</strong></a></p><p>NormFace: L2 Hypersphere Embedding for Face Verification</p><p><strong>[12] COCO Loss:</strong>    <a href="https://arxiv.org/pdf/1710.00870.pdf"><strong>[paper]</strong></a>   <a href="https://github.com/sciencefans/coco_loss">[<strong>code</strong>]</a></p><p>Rethinking Feature Discrimination and Polymerization for Large-scale Recognition</p><p><strong>[13] Large-Margin Softmax Loss</strong>  <a href="https://arxiv.org/pdf/1612.02295.pdf"><strong>[paper]</strong></a>  <a href="https://github.com/wy1iu/LargeMargin_Softmax_Loss">[<strong>code</strong>]</a></p><p>Large-Margin Softmax Loss for Convolutional Neural Networks(L-Softmax loss)</p><p><strong>[14]SphereFaceï¼š</strong>  <strong>A-Softmax</strong>   <a href="https://arxiv.org/abs/1704.08063"><strong>[paper]</strong></a>  <a href="https://github.com/wy1iu/sphereface">[<strong>code</strong>]</a></p><p>SphereFace: Deep Hypersphere Embedding for Face Recognition</p><p><strong>[15]AM-Softmax/cosFace</strong>     <a href="https://arxiv.org/pdf/1801.05599.pdf"><strong>[paper AM-Softmax]</strong></a>       <a href="https://arxiv.org/pdf/1801.09414.pdf"><strong>[paper cosFace]</strong></a>        <a href="https://github.com/happynear/AMSoftmax">[<strong>AM-softmax code</strong>]</a></p><p>AM : Additive Margin Softmax for Face Verification</p><p>CosFace: Large Margin Cosine Loss for Deep Face Recognition(Tencent AI Lab)</p><p><strong>[16] ArcFace:</strong>  <a href="https://arxiv.org/pdf/1801.07698.pdf"><strong>[paper]</strong></a>  <a href="https://github.com/deepinsight/insightface"><strong>[code]</strong></a></p><p>ArcFace: Additive Angular Margin Loss for Deep Face Recognition</p><p><img src="/2019/04/18/awesome-face/cos_loss.png" alt="cos_loss"></p><h4 id="Face-Detection"><a href="#Face-Detection" class="headerlink" title="Face Detection"></a>Face Detection</h4><p><img src="/2019/04/18/awesome-face/face_detection.png" alt></p><p><strong>[1] Cascade CNN</strong>  <a href="https://ieeexplore.ieee.org/document/7299170/"><strong>[paper]</strong></a>   <a href="https://github.com/anson0910/CNN_face_detection"><strong>[code]</strong></a>    </p><p>A Convolutional Neural Network Cascade for Face Detection</p><p><strong>[2] MTCNN</strong>   <a href="https://kpzhang93.github.io/MTCNN_face_detection_alignment/"><strong>[Paper]</strong></a>    <a href="https://github.com/kpzhang93/MTCNN_face_detection_alignment"><strong>[code]</strong></a>  </p><p>Joint Face Detection and Alignment using Multi-task Cascaded Convolutional Networks</p><p><strong>[3] ICC - CNN</strong>  <a href="https://ieeexplore.ieee.org/document/8237606"><strong>[paper]</strong></a></p><p>Detecting Faces Using Inside Cascaded Contextual CNN</p><p><strong>[4] Face R-CNN</strong>  <a href="https://arxiv.org/pdf/1706.01061.pdf"><strong>[Paper]</strong></a></p><p>Face R-CNN</p><p><strong>[5] Deep-IR</strong><a href="https://arxiv.org/abs/1701.08289"><strong>[Paper]</strong></a></p><p>Face Detection using Deep Learning: An Improved Faster RCNN Approach</p><p><strong>[6] SSH</strong>     <a href="https://arxiv.org/pdf/1708.03979.pdf"><strong>[paper]</strong></a>    <a href="https://github.com/mahyarnajibi/SSH"><strong>[code]</strong></a></p><p>SSH: Single Stage Headless Face Detector</p><p><strong>[7] S3FD</strong>   <a href="https://arxiv.org/abs/1708.05237"><strong>[paper]</strong></a></p><p>Single Shot Scale-invariant Face Detector</p><p><strong>[8] FaceBoxes</strong> <a href="https://arxiv.org/pdf/1708.05234.pdf"><strong>[paper]</strong></a>     <a href="https://github.com/sfzhang15/FaceBoxes"><strong>[code]</strong></a></p><p>Faceboxes: A CPU Real-time Face Detector with High Accuracy</p><p><strong>[9] Scaleface</strong>     <a href="http://cn.arxiv.org/abs/1706.02863"><strong>[paper]</strong></a></p><p>Face Detection through Scale-Friendly Deep Convolutional Networks</p><p><strong>[10] HR</strong>  <a href="https://arxiv.org/abs/1612.04402"><strong>[paper]</strong></a>  <a href="https://github.com/peiyunh/tiny"><strong>[code]</strong></a></p><p>Finding Tiny Faces</p><p><strong>[11] FAN</strong>   <a href="https://arxiv.org/abs/1712.00721"><strong>[paper]</strong></a></p><p>Feature Agglomeration Networks for Single Stage Face Detection.</p><p><strong>[12] PyramidBox</strong>    <a href="https://arxiv.org/abs/1803.07737?context=cs"><strong>[paper]</strong></a> <a href="https://github.com/PaddlePaddle/models/blob/develop/fluid/PaddleCV/face_detection/README_cn.md"><strong>[code]</strong></a></p><p>PyramidBox: A Context-assisted Single Shot Face Detector</p><p><strong>[13] SRN</strong>     <a href="https://arxiv.org/abs/1809.02693"><strong>[paper]</strong></a> </p><p>Selective Refinement Network for High Performance Face Detection.</p><p><strong>[14] DSFD</strong>  <a href="https://arxiv.org/abs/1810.10220"><strong>[paper]</strong></a></p><p>DSFD: Dual Shot Face Detector</p><p><strong>[15] VIM FD</strong> <a href="https://arxiv.org/abs/1901.02350"><strong>[paper]</strong></a></p><p>Robust and High Performance Face Detector</p><p><strong>[16] ISRN</strong>  <a href="https://arxiv.org/abs/1901.06651"><strong>[paper]</strong></a></p><p>Improved Selective Refinement Network for Face Detection</p><h4 id="Face-Alignment"><a href="#Face-Alignment" class="headerlink" title="Face Alignment"></a>Face Alignment</h4><ul><li><a href="https://arxiv.org/abs/1805.10483">Look at Boundary: A Boundary-Aware Face Alignment Algorithm</a>[Wayne Wu al., 2018]</li><li><a href="https://arxiv.org/pdf/1902.10859.pdf">PFLD: A Practical Facial Landmark Detector</a>[Xiaojie Guo al., 2019]</li></ul><h2 id="âš™-Open-source-lib"><a href="#âš™-Open-source-lib" class="headerlink" title="âš™ Open source lib"></a>âš™ Open source lib</h2><h4 id="face-recognition"><a href="#face-recognition" class="headerlink" title="face recognition"></a>face recognition</h4><ul><li><p><a href="https://github.com/ZhaoJ9014/face.evoLVe.PyTorch">face.evoLVe.</a></p></li><li><p><a href="https://github.com/grib0ed0v/face_recognition.pytorch">face_recognition.pytorch</a></p></li><li><a href="https://github.com/deepinsight/insightface">insightface</a></li></ul><h4 id="face-detection"><a href="#face-detection" class="headerlink" title="face detection"></a>face detection</h4><ul><li><a href="https://github.com/ShiqiYu/libfacedetection">libfaccedetection</a></li></ul><h2 id="ğŸ“¦-Datasets"><a href="#ğŸ“¦-Datasets" class="headerlink" title="ğŸ“¦ Datasets"></a>ğŸ“¦ Datasets</h2><h4 id="2D-Face-Recognition-1"><a href="#2D-Face-Recognition-1" class="headerlink" title="2D Face Recognition"></a>2D Face Recognition</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th>Description</th><th>Links</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>CASIA-WebFace</strong></td><td><strong>10,575</strong> subjects and <strong>494,414</strong> images</td><td><a href="http://www.cbsr.ia.ac.cn/english/CASIA-WebFace-Database.html">Download</a></td><td>2014</td></tr><tr><td><strong>MegaFace</strong>ğŸ…</td><td><strong>1 million</strong> faces, <strong>690K</strong> identities</td><td><a href="http://megaface.cs.washington.edu/">Download</a></td><td>2016</td></tr><tr><td><strong>MS-Celeb-1M</strong>ğŸ…</td><td>about <strong>10M</strong> images for <strong>100K</strong> celebrities   Concrete measurement to evaluate the performance of recognizing one million celebrities</td><td><a href="http://www.msceleb.org">Download</a></td><td>2016</td></tr><tr><td><strong>LFW</strong>ğŸ…</td><td><strong>13,000</strong> images of faces collected from the web. Each face has been labeled with the name of the person pictured.  <strong>1680</strong> of the people pictured have two or more distinct photos in the data set.</td><td><a href="http://vis-www.cs.umass.edu/lfw/">Download</a></td><td>2007</td></tr><tr><td><strong>VGG Face2</strong>ğŸ…</td><td>The dataset contains <strong>3.31 million</strong> images of <strong>9131</strong> subjects (identities), with an average of 362.6 images for each subject.</td><td><a href="http://www.robots.ox.ac.uk/~vgg/data/vgg_face2/">Download</a></td><td>2017</td></tr><tr><td><strong>UMDFaces Dataset-image</strong></td><td><strong>367,888 face annotations</strong> for <strong>8,277 subjects.</strong></td><td><a href="http://www.umdfaces.io">Download</a></td><td>2016</td></tr><tr><td><strong>Trillion Pairs</strong>ğŸ…</td><td>Train: <strong>MS-Celeb-1M-v1c</strong> &amp;  <strong>Asian-Celeb</strong> Test: <strong>ELFW&amp;DELFW</strong></td><td><a href="http://trillionpairs.deepglint.com/overview">Download</a></td><td>2018</td></tr><tr><td><strong>FaceScrub</strong></td><td>It comprises a total of <strong>106,863</strong> face images of male and female <strong>530</strong> celebrities, with about <strong>200 images per person</strong>.</td><td><a href="http://vintage.winklerbros.net/facescrub.html">Download</a></td><td>2014</td></tr><tr><td><strong>Mut1ny</strong>ğŸ…</td><td>head/face segmentation dataset contains over 17.3k labeled images</td><td><a href="http://www.mut1ny.com/face-headsegmentation-dataset">Download</a></td><td>2018</td></tr><tr><td><strong>IMDB-Face</strong></td><td>The dataset contains about 1.7 million faces, 59k identities, which is manually cleaned from 2.0 million raw images.</td><td><a href="https://github.com/fwang91/IMDb-Face">Download</a></td><td>2018</td></tr></tbody></table></div><h4 id="video-face-recognition"><a href="#video-face-recognition" class="headerlink" title="video face recognition"></a>video face recognition</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th>Description</th><th>Links</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>YouTube Face</strong>ğŸ…</td><td>The data set contains <strong>3,425</strong> videos of <strong>1,595</strong> different people.</td><td><a href="http://www.cs.tau.ac.il/%7Ewolf/ytfaces/">Download</a></td><td>2011</td></tr><tr><td><strong>UMDFaces Dataset-video</strong>ğŸ…</td><td>Over <strong>3.7 million</strong> annotated video frames from over <strong>22,000</strong> videos of <strong>3100 subjects.</strong></td><td><a href="http://www.umdfaces.io">Download</a></td><td>2017</td></tr><tr><td><strong>PaSC</strong></td><td>The challenge includes 9,376 still images and 2,802 videos of 293 people.</td><td><a href="https://www.nist.gov/programs-projects/point-and-shoot-face-recognition-challenge-pasc">Download</a></td><td>2013</td></tr><tr><td><strong>YTC</strong></td><td>The data consists of two parts: video clips (1910 sequences of 47 subjects) and initialization data(initial frame face bounding boxes, manually marked).</td><td><a href="http://seqamlab.com/youtube-celebrities-face-tracking-and-recognition-dataset/">Download</a></td><td>2008</td></tr><tr><td><strong>iQIYI-VID</strong>ğŸ…</td><td>The iQIYI-VID dataset <strong>contains 500,000 videos clips of 5,000 celebrities, adding up to 1000 hours</strong>. This dataset supplies multi-modal cues, including face, cloth, voice, gait, and subtitles, for character identification.</td><td><a href="http://challenge.ai.iqiyi.com/detail?raceId=5b1129e42a360316a898ff4f">Download</a></td><td>2018</td></tr></tbody></table></div><h4 id="3D-face-recognition"><a href="#3D-face-recognition" class="headerlink" title="3D face recognition"></a>3D face recognition</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th>Description</th><th>Links</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>Bosphorus</strong>ğŸ…</td><td>105 subjects and 4666 faces 2D &amp; 3D face data</td><td><a href="http://bosphorus.ee.boun.edu.tr/default.aspx">Download</a></td><td>2008</td></tr><tr><td><strong>BD-3DFE</strong></td><td>Analyzing <strong>Facial Expressions</strong> in <strong>3D</strong> Space</td><td><a href="http://www.cs.binghamton.edu/~lijun/Research/3DFE/3DFE_Analysis.html">Download</a></td><td>2006</td></tr><tr><td><strong>ND-2006</strong></td><td>422 subjects and 9443 faces 3D Face Recognition</td><td><a href="https://sites.google.com/a/nd.edu/public-cvrl/data-sets">Download</a></td><td>2006</td></tr><tr><td><strong>FRGC V2.0</strong></td><td>466 subjects and 4007 of 3D Face, Visible Face Images</td><td><a href="https://sites.google.com/a/nd.edu/public-cvrl/data-sets">Download</a></td><td>2005</td></tr><tr><td><strong>B3D(AC)^2</strong></td><td><strong>1000</strong> high quality, dynamic <strong>3D scans</strong> of faces, recorded while pronouncing a set of English sentences.</td><td><a href="http://www.vision.ee.ethz.ch/datasets/b3dac2.en.html">Download</a></td><td>2010</td></tr></tbody></table></div><h4 id="Anti-spoofing"><a href="#Anti-spoofing" class="headerlink" title="Anti-spoofing"></a>Anti-spoofing</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th style="text-align:center"># of subj. / # of sess.</th><th>Links</th><th>Year</th><th>Spoof attacks attacks</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>NUAA</strong></td><td style="text-align:center">15/3</td><td><a href="http://parnec.nuaa.edu.cn/xtan/data/nuaaimposterdb.html">Download</a></td><td>2010</td><td><strong>Print</strong></td><td>2010</td></tr><tr><td><strong>CASIA-MFSD</strong></td><td style="text-align:center">50/3</td><td>Download(link failed)</td><td>2012</td><td><strong>Print, Replay</strong></td><td>2012</td></tr><tr><td><strong>Replay-Attack</strong></td><td style="text-align:center">50/1</td><td><a href="https://www.idiap.ch/dataset/replayattack">Download</a></td><td>2012</td><td><strong>Print, 2 Replay</strong></td><td>2012</td></tr><tr><td><strong>MSU-MFSD</strong></td><td style="text-align:center">35/1</td><td><a href="https://www.cse.msu.edu/rgroups/biometrics/Publications/Databases/MSUMobileFaceSpoofing/index.htm">Download</a></td><td>2015</td><td><strong>Print, 2 Replay</strong></td><td>2015</td></tr><tr><td><strong>MSU-USSA</strong></td><td style="text-align:center">1140/1</td><td><a href="http://biometrics.cse.msu.edu/Publications/Databases/MSU_USSA/">Download</a></td><td>2016</td><td><strong>2 Print, 6 Replay</strong></td><td>2016</td></tr><tr><td><strong>Oulu-NPU</strong></td><td style="text-align:center">55/3</td><td><a href="https://sites.google.com/site/oulunpudatabase/">Download</a></td><td>2017</td><td><strong>2 Print, 6 Replay</strong></td><td>2017</td></tr><tr><td><strong>Siw</strong></td><td style="text-align:center">165/4</td><td><a href="http://cvlab.cse.msu.edu/spoof-in-the-wild-siw-face-anti-spoofing-database.html">Download</a></td><td>2018</td><td><strong>2 Print, 4 Replay</strong></td><td>2018</td></tr></tbody></table></div><h4 id="cross-age-and-cross-pose"><a href="#cross-age-and-cross-pose" class="headerlink" title="cross age and cross pose"></a>cross age and cross pose</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th style="text-align:left">Description</th><th>Links</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>CACD2000</strong></td><td style="text-align:left">The dataset contains more than 160,000 images of 2,000 celebrities with <strong>age ranging from 16 to 62</strong>.</td><td><a href="http://bcsiriuschen.github.io/CARC/">Download</a></td><td>2014</td></tr><tr><td><strong>FGNet</strong></td><td style="text-align:left">The dataset contains more than 1002 images of 82 people with <strong>age ranging from 0 to 69</strong>.</td><td><a href="http://www-prima.inrialpes.fr/FGnet/html/benchmarks.html">Download</a></td><td>2000</td></tr><tr><td><strong>MPRPH</strong></td><td style="text-align:left">The MORPH database contains <strong>55,000</strong> images of more than <strong>13,000</strong> people within the age ranges of <strong>16</strong> to <strong>77</strong></td><td><a href="http://www.faceaginggroup.com/morph/">Download</a></td><td>2016</td></tr><tr><td><strong>CPLFW</strong></td><td style="text-align:left">we construct a Cross-Pose LFW (CPLFW) which deliberately searches and selects <strong>3,000 positive face pairs</strong> with <strong>pose difference</strong> to add pose variation to intra-class variance.</td><td><a href="http://www.whdeng.cn/cplfw/index.html">Download</a></td><td>2017</td></tr><tr><td><strong>CALFW</strong></td><td style="text-align:left">Thereby we construct a Cross-Age LFW (CALFW) which deliberately searches and selects <strong>3,000 positive face pairs</strong> with <strong>age gaps</strong> to add aging process intra-class variance.</td><td><a href="http://www.whdeng.cn/calfw/index.html">Download</a></td><td>2017</td></tr></tbody></table></div><h4 id="Face-Detection-1"><a href="#Face-Detection-1" class="headerlink" title="Face Detection"></a>Face Detection</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th>Description</th><th>Links</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>FDDB</strong>ğŸ…</td><td><strong>5171</strong> faces in a set of <strong>2845</strong> images</td><td><a href="http://vis-www.cs.umass.edu/fddb/index.html">Download</a></td><td>2010</td></tr><tr><td><strong>Wider-face</strong> ğŸ…</td><td><strong>32,203</strong> images and label <strong>393,703</strong> faces with a high degree of variability in scale, pose and occlusion, organized based on <strong>61</strong> event classes</td><td><a href="http://mmlab.ie.cuhk.edu.hk/projects/WIDERFace/">Download</a></td><td>2015</td></tr><tr><td><strong>AFW</strong></td><td>AFW dataset is built using Flickr images. It has <strong>205</strong> images with <strong>473</strong> labeled faces. For each face, annotations include a rectangular <strong>bounding box</strong>, <strong>6 landmarks</strong> and the <strong>pose angles</strong>.</td><td><a href="http://www.ics.uci.edu/~xzhu/face/">Download</a></td><td>2013</td></tr><tr><td><strong>MALF</strong></td><td>MALF is the first face detection dataset that supports fine-gained evaluation. MALF consists of <strong>5,250</strong> images and <strong>11,931</strong> faces.</td><td><a href="http://www.cbsr.ia.ac.cn/faceevaluation/">Download</a></td><td>2015</td></tr></tbody></table></div><h4 id="Face-Attributes"><a href="#Face-Attributes" class="headerlink" title="Face Attributes"></a>Face Attributes</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th>Description</th><th>Links</th><th>Key features</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>CelebA</strong></td><td><strong>10,177</strong> number of <strong>identities</strong>,  <strong>202,599</strong> number of <strong>face images</strong>, and  <strong>5 landmark locations</strong>, <strong>40 binary attributes</strong> annotations per image.</td><td><a href="http://mmlab.ie.cuhk.edu.hk/projects/CelebA.html">Download</a></td><td><strong>attribute &amp; landmark</strong></td><td>2015</td></tr><tr><td><strong>IMDB-WIKI</strong></td><td>500k+ face images with <strong>age</strong> and <strong>gender</strong> labels</td><td><a href="https://data.vision.ee.ethz.ch/cvl/rrothe/imdb-wiki/">Download</a></td><td><strong>age &amp; gender</strong></td><td>2015</td></tr><tr><td><strong>Adience</strong></td><td>Unfiltered faces for <strong>gender</strong> and <strong>age</strong> classification</td><td><a href="http://www.openu.ac.il/home/hassner/Adience/data.html">Download</a></td><td><strong>age &amp; gender</strong></td><td>2014</td></tr><tr><td><strong>WFLW</strong>ğŸ…</td><td>WFLW contains <strong>10000 faces</strong> (7500 for training and 2500 for testing) with <strong>98 fully manual annotated landmarks</strong>.</td><td><a href="https://wywu.github.io/projects/LAB/WFLW.html">Download</a></td><td><strong>landmarks</strong></td><td>2018</td></tr><tr><td><strong>Caltech10k Web Faces</strong></td><td>The dataset has 10,524 human faces of various resolutions and in <strong>different settings</strong></td><td><a href="http://www.vision.caltech.edu/Image_Datasets/Caltech_10K_WebFaces/#Description">Download</a></td><td><strong>landmarks</strong></td><td>2005</td></tr><tr><td><strong>EmotioNet</strong></td><td>The EmotioNet database includes<strong>950,000 images</strong> with <strong>annotated AUs</strong>.  A <strong>subset</strong> of the images in the EmotioNet database correspond to <strong>basic and compound emotions.</strong></td><td><a href="http://cbcsl.ece.ohio-state.edu/EmotionNetChallenge/index.html#overview">Download</a></td><td><strong>AU and Emotion</strong></td><td>2017</td></tr><tr><td><strong>RAF( Real-world Affective Faces)</strong></td><td><strong>29672</strong> number of <strong>real-world images</strong>,  including <strong>7</strong> classes of basic emotions and <strong>12</strong> classes of compound emotions,  <strong>5 accurate landmark locations</strong>,  <strong>37 automatic landmark locations</strong>, <strong>race, age range</strong> and  <strong>gender</strong> <strong>attributes</strong> annotations per image</td><td><a href="http://www.whdeng.cn/RAF/model1.html">Download</a></td><td><strong>Emotionsã€landmarkã€raceã€age and gender</strong></td><td>2017</td></tr></tbody></table></div><h4 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h4><div class="table-container"><table><thead><tr><th>Datasets</th><th>Description</th><th>Links</th><th>Publish Time</th></tr></thead><tbody><tr><td><strong>IJB C/B/A</strong>ğŸ…</td><td>IJB C/B/A is currently running <strong>three challenges</strong> related to  <strong>face detection, verification, identification, and identity clustering.</strong></td><td><a href="https://www.nist.gov/programs-projects/face-challenges">Download</a></td><td>2015</td></tr><tr><td><strong>MOBIO</strong></td><td><strong>bi-modal</strong> (<strong>audio</strong> and <strong>video</strong>) data taken from 152 people.</td><td><a href="https://www.idiap.ch/dataset/mobio">Download</a></td><td>2012</td></tr><tr><td><strong>BANCA</strong></td><td>The BANCA database was captured in four European languages in <strong>two modalities</strong> (<strong>face</strong> and <strong>voice</strong>).</td><td><a href="http://www.ee.surrey.ac.uk/CVSSP/banca/">Download</a></td><td>2014</td></tr><tr><td><strong>3D Mask Attack</strong></td><td><strong>76500</strong> frames of <strong>17</strong> persons using Kinect RGBD with eye positions (Sebastien Marcel).</td><td><a href="https://www.idiap.ch/dataset/3dmad">Download</a></td><td>2013</td></tr><tr><td><strong>WebCaricature</strong></td><td><strong>6042</strong> <strong>caricatures</strong> and <strong>5974 photographs</strong> from <strong>252 persons</strong> collected from the web</td><td><a href="https://cs.nju.edu.cn/rl/WebCaricature.htm">Download</a></td><td>2018</td></tr></tbody></table></div><h2 id="ğŸ -Research-home-conf-amp-workshop-amp-trans"><a href="#ğŸ -Research-home-conf-amp-workshop-amp-trans" class="headerlink" title="ğŸ  Research home(conf &amp; workshop &amp; trans)"></a>ğŸ  Research home(conf &amp; workshop &amp; trans)</h2><p><img src="/2019/04/18/awesome-face/research_home.png" alt></p><p><strong>ICCV</strong>: <a href="http://iccv2019.thecvf.com">IEEE International Conference on Computer Vision</a></p><p><strong>CVPR</strong>: <a href="http://cvpr2018.thecvf.com/">IEEE Conference on Computer Vision and Pattern Recognition</a></p><p><strong>ECCV</strong>: <a href="https://eccv2018.org">European Conference on Computer Vision</a></p><p><strong>FG</strong>: <a href="http://dblp.uni-trier.de/db/conf/fgr/">IEEE International Conference on Automatic Face and Gesture Recognition</a></p><p><strong>BMVC:</strong> <a href="http://www.bmva.org/bmvc/?id=bmvc">The British Machine Vision Conference</a></p><p><strong>IJCB[ICB+BTAS]</strong>:International Joint Conference on Biometrics</p><ul><li><p><strong>ICB</strong>: <a href="http://icb2018.org">International Conference on Biometrics</a></p></li><li><p><strong>BTAS</strong>: <a href="https://www.isi.edu/events/btas2018/home">IEEE International Conference on Biometrics: Theory, Applications and Systems</a></p></li></ul><p><strong>AMFG</strong>: IEEE workshop on Analysis and Modeling of Faces and Gestures</p><p><strong>CVPR Workshop on Biometrics</strong></p><p><strong>TPAMI:</strong> <a href="https://ieeexplore.ieee.org/xpl/RecentIssue.jsp?punumber=34">IEEE Transactions on Pattern Analysis and Machine Intelligence</a></p><p><strong>IJCV:</strong> <a href="https://link.springer.com/journal/11263">International Journal of Computer Vision</a> </p><p><strong>TIP:</strong> <a href="https://ieeexplore.ieee.org/xpl/RecentIssue.jsp?punumber=83">IEEE Transactions on Image Processing</a></p><p><strong>TIFS:</strong> <a href="IEEE Transactions on Information Forensics and Security">IEEE Transactions on Information Forensics and Security</a></p><p><strong>PR:</strong> <a href="https://www.journals.elsevier.com/pattern-recognition/">Pattern Recognition</a></p><h2 id="ğŸ·-References"><a href="#ğŸ·-References" class="headerlink" title="ğŸ· References:"></a>ğŸ· References:</h2><p>[1] <a href="https://github.com/RiweiChen/DeepFace/tree/master/FaceDataset">https://github.com/RiweiChen/DeepFace/tree/master/FaceDataset</a></p><p>[2] <a href="https://www.zhihu.com/question/33505655?sort=created">https://www.zhihu.com/question/33505655?sort=created</a></p><p>[3] <a href="https://github.com/betars/Face-Resources">https://github.com/betars/Face-Resources</a></p><p>[4] <a href="https://zhuanlan.zhihu.com/p/33288325">https://zhuanlan.zhihu.com/p/33288325</a></p><p>[5] <a href="https://github.com/L706077/DNN-Face-Recognition-Papers">https://github.com/L706077/DNN-Face-Recognition-Papers</a></p><p>[6] <a href="https://www.zhihu.com/question/67919300">https://www.zhihu.com/question/67919300</a></p><p>[7] <a href="https://jackietseng.github.io/conference_call_for_paper/2018-2019-conferences.html">https://jackietseng.github.io/conference_call_for_paper/2018-2019-conferences.html</a></p><p>[8]<a href="http://history.ccf.org.cn/sites/ccf/biaodan.jsp?contentId=2903940690839">http://history.ccf.org.cn/sites/ccf/biaodan.jsp?contentId=2903940690839</a></p><p>[9]<a href="http://mmlab.ie.cuhk.edu.hk/projects/WIDERFace/WiderFace_Results.html">http://mmlab.ie.cuhk.edu.hk/projects/WIDERFace/WiderFace_Results.html</a></p>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorchå¸¸è§å·¥å…·ç®±</title>
    <link href="/2019/04/17/pytorch%E5%B8%B8%E8%A7%81%E5%B7%A5%E5%85%B7%E7%AE%B1/"/>
    <url>/2019/04/17/pytorch%E5%B8%B8%E8%A7%81%E5%B7%A5%E5%85%B7%E7%AE%B1/</url>
    
    <content type="html"><![CDATA[<p>æ”¶é›†æ•´ç†äº†ä¸€äº›å¸¸è§çš„å¯ä»¥ç”¨åˆ°çš„æ·±åº¦å­¦ä¹ ç½‘å€ã€å·¥å…·</p><a id="more"></a><h3 id="1-é¢„è®­ç»ƒæ¨¡å‹"><a href="#1-é¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="1. é¢„è®­ç»ƒæ¨¡å‹"></a>1. é¢„è®­ç»ƒæ¨¡å‹</h3><p><a href="https://github.com/Cadene/pretrained-models.pytorch">https://github.com/Cadene/pretrained-models.pytorch</a></p><p><a href="https://github.com/rwightman/pytorch-image-models">https://github.com/rwightman/pytorch-image-models</a></p><p><a href="https://github.com/welkin-feng/ComputerVision">https://github.com/welkin-feng/ComputerVision</a></p><h3 id="2-æ•°æ®å¢å¼º"><a href="#2-æ•°æ®å¢å¼º" class="headerlink" title="2. æ•°æ®å¢å¼º"></a>2. æ•°æ®å¢å¼º</h3><p><a href="https://github.com/albumentations-team/albumentations">https://github.com/albumentations-team/albumentations</a></p><h3 id="3-æ ‡è®°å·¥å…·"><a href="#3-æ ‡è®°å·¥å…·" class="headerlink" title="3. æ ‡è®°å·¥å…·"></a>3. æ ‡è®°å·¥å…·</h3><p><a href="https://github.com/wkentaro/labelme"><strong>Labelme:</strong></a> Image Polygonal Annotation with Python</p><p><a href="https://github.com/tzutalin/labelImg"><strong>LabelImg</strong></a>ï¼šLabelImg is a graphical image annotation tool and label object bounding boxes in images</p><h3 id="4-æ•°æ®é›†æŸ¥æ‰¾"><a href="#4-æ•°æ®é›†æŸ¥æ‰¾" class="headerlink" title="4. æ•°æ®é›†æŸ¥æ‰¾"></a>4. æ•°æ®é›†æŸ¥æ‰¾</h3><p><strong>! ! !  You can find datasets in Paper Beachmark</strong></p><p><a href="https://www.kaggle.com/"><strong>Kaggle</strong></a></p><p><a href="https://toolbox.google.com/datasetsearch"><strong>Google Datasets Search Engine</strong></a></p><p><a href="https://msropendata.com/"><strong>Microsoft Datasets</strong></a></p><p><a href="https://www.visualdata.io/"><strong>Computer Vision Datasets</strong></a></p><p><a href="https://github.com/awesomedata/awesome-public-datasets"><strong>Github awesomedata</strong></a></p><p><a href="https://archive.ics.uci.edu/ml/datasets.html"><strong>UCI Machine Learning Repository.</strong></a></p><p><a href="https://registry.opendata.aws/"><strong>Amazon Datasets</strong></a></p><p><strong>Government Datasets:</strong> <a href="https://data.europa.eu/euodp/data/dataset"><strong>EU</strong></a> <a href="https://www.data.gov/"><strong>US</strong></a> <a href="https://catalogue.data.govt.nz/dataset"><strong>NZL</strong></a> <a href="https://data.gov.in/"><strong>IND</strong></a></p><h3 id="5-æ¨¡å‹åˆ†æå·¥å…·"><a href="#5-æ¨¡å‹åˆ†æå·¥å…·" class="headerlink" title="5. æ¨¡å‹åˆ†æå·¥å…·"></a>5. æ¨¡å‹åˆ†æå·¥å…·</h3><h5 id="1-å·ç§¯å±‚è¾“å‡ºå¤§å°è®¡ç®—"><a href="#1-å·ç§¯å±‚è¾“å‡ºå¤§å°è®¡ç®—" class="headerlink" title="(1) å·ç§¯å±‚è¾“å‡ºå¤§å°è®¡ç®—"></a>(1) å·ç§¯å±‚è¾“å‡ºå¤§å°è®¡ç®—</h5><h5 id="https-ezyang-github-io-convolution-visualizer-index-html"><a href="#https-ezyang-github-io-convolution-visualizer-index-html" class="headerlink" title="https://ezyang.github.io/convolution-visualizer/index.html"></a><a href="https://ezyang.github.io/convolution-visualizer/index.html">https://ezyang.github.io/convolution-visualizer/index.html</a></h5><h5 id="2-è®¡ç®—æ¨¡å‹å‚æ•°é‡"><a href="#2-è®¡ç®—æ¨¡å‹å‚æ•°é‡" class="headerlink" title="(2) è®¡ç®—æ¨¡å‹å‚æ•°é‡"></a>(2) è®¡ç®—æ¨¡å‹å‚æ•°é‡</h5><p><a href="https://github.com/sksq96/pytorch-summary">https://github.com/sksq96/pytorch-summary</a></p><h5 id="3-æ¨¡å‹å¯è§†åŒ–å·¥å…·"><a href="#3-æ¨¡å‹å¯è§†åŒ–å·¥å…·" class="headerlink" title="(3) æ¨¡å‹å¯è§†åŒ–å·¥å…·"></a>(3) æ¨¡å‹å¯è§†åŒ–å·¥å…·</h5><p><a href="https://github.com/lutzroeder/Netron"><strong>Netron:</strong></a> now supports <strong>ONNX</strong>, <strong>Keras</strong>, <strong>CoreML</strong>, <strong>Caffe2</strong>, <strong>Mxnet</strong>, <strong>Pytorch</strong> and <strong>Tensorflow</strong>.</p><p><a href="https://github.com/szagoruyko/pytorchviz"><strong>Graphviz:</strong></a> <strong>Pytorch</strong></p><h3 id="6-å¯è§†åŒ–å·¥å…·"><a href="#6-å¯è§†åŒ–å·¥å…·" class="headerlink" title="6. å¯è§†åŒ–å·¥å…·"></a>6. å¯è§†åŒ–å·¥å…·</h3><p><a href="https://github.com/facebookresearch/visdom">visdom</a></p><pre><code class="hljs python"><span class="hljs-comment"># Example using Visdom.</span>vis = visdom.Visdom(env=<span class="hljs-string">&#x27;Learning curve&#x27;</span>, use_incoming_socket=<span class="hljs-literal">False</span>)<span class="hljs-keyword">assert</span> self._visdom.check_connection()self._visdom.close()options = collections.namedtuple(<span class="hljs-string">&#x27;Options&#x27;</span>, [<span class="hljs-string">&#x27;loss&#x27;</span>, <span class="hljs-string">&#x27;acc&#x27;</span>, <span class="hljs-string">&#x27;lr&#x27;</span>])(    loss=&#123;<span class="hljs-string">&#x27;xlabel&#x27;</span>: <span class="hljs-string">&#x27;Epoch&#x27;</span>, <span class="hljs-string">&#x27;ylabel&#x27;</span>: <span class="hljs-string">&#x27;Loss&#x27;</span>, <span class="hljs-string">&#x27;showlegend&#x27;</span>: <span class="hljs-literal">True</span>&#125;,    acc=&#123;<span class="hljs-string">&#x27;xlabel&#x27;</span>: <span class="hljs-string">&#x27;Epoch&#x27;</span>, <span class="hljs-string">&#x27;ylabel&#x27;</span>: <span class="hljs-string">&#x27;Accuracy&#x27;</span>, <span class="hljs-string">&#x27;showlegend&#x27;</span>: <span class="hljs-literal">True</span>&#125;,    lr=&#123;<span class="hljs-string">&#x27;xlabel&#x27;</span>: <span class="hljs-string">&#x27;Epoch&#x27;</span>, <span class="hljs-string">&#x27;ylabel&#x27;</span>: <span class="hljs-string">&#x27;Learning rate&#x27;</span>, <span class="hljs-string">&#x27;showlegend&#x27;</span>: <span class="hljs-literal">True</span>&#125;)<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> epoch(<span class="hljs-number">80</span>):    tran(...)    val(...)    vis.line(X=torch.Tensor([t + <span class="hljs-number">1</span>]), Y=torch.Tensor([train_loss]),             name=<span class="hljs-string">&#x27;train&#x27;</span>, win=<span class="hljs-string">&#x27;Loss&#x27;</span>, update=<span class="hljs-string">&#x27;append&#x27;</span>, opts=options.loss)    vis.line(X=torch.Tensor([t + <span class="hljs-number">1</span>]), Y=torch.Tensor([val_loss]),             name=<span class="hljs-string">&#x27;val&#x27;</span>, win=<span class="hljs-string">&#x27;Loss&#x27;</span>, update=<span class="hljs-string">&#x27;append&#x27;</span>, opts=options.loss)    vis.line(X=torch.Tensor([t + <span class="hljs-number">1</span>]), Y=torch.Tensor([train_acc]),             name=<span class="hljs-string">&#x27;train&#x27;</span>, win=<span class="hljs-string">&#x27;Accuracy&#x27;</span>, update=<span class="hljs-string">&#x27;append&#x27;</span>, opts=options.acc)    vis.line(X=torch.Tensor([t + <span class="hljs-number">1</span>]), Y=torch.Tensor([val_acc]),             name=<span class="hljs-string">&#x27;val&#x27;</span>, win=<span class="hljs-string">&#x27;Accuracy&#x27;</span>, update=<span class="hljs-string">&#x27;append&#x27;</span>, opts=options.acc)    vis.line(X=torch.Tensor([t + <span class="hljs-number">1</span>]), Y=torch.Tensor([lr]),             win=<span class="hljs-string">&#x27;Learning rate&#x27;</span>, update=<span class="hljs-string">&#x27;append&#x27;</span>, opts=options.lr)</code></pre><p><a href="https://pytorch.org/docs/stable/tensorboard.html">Tensorboard</a></p><ul><li><strong>acc / loss</strong></li></ul><pre><code class="hljs python"><span class="hljs-keyword">from</span> tensorboard <span class="hljs-keyword">import</span> SummaryWriterwriter = SummaryWriter()<span class="hljs-keyword">for</span> n_iter <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>):    dummy_s1 = torch.rand(<span class="hljs-number">1</span>)    writer.add_scalar(<span class="hljs-string">&#x27;data/scalar1&#x27;</span>, dummy_s1[<span class="hljs-number">0</span>], n_iter)writer.close()</code></pre><ul><li><strong>img</strong></li></ul><pre><code class="hljs python"><span class="hljs-keyword">from</span> tensorboard <span class="hljs-keyword">import</span> SummaryWriter<span class="hljs-keyword">import</span> torchvision.utils <span class="hljs-keyword">as</span> vutilswriter = SummaryWriter()<span class="hljs-keyword">if</span> n_iter % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>:    x = vutils.make_grid(dummy_img, normalize=<span class="hljs-literal">True</span>, scale_each=<span class="hljs-literal">True</span>)    writer.add_image(<span class="hljs-string">&#x27;Image&#x27;</span>, x, n_iter)writer.close()</code></pre><ul><li>åœ¨ä¸€å¼ å›¾ä¸­åŠ å…¥ä¸¤æ¡æ›²çº¿</li></ul><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>):    writer.add_scalars(<span class="hljs-string">&#x27;run_14h&#x27;</span>, &#123;<span class="hljs-string">&#x27;xsinx&#x27;</span>:i*np.sin(i/r),                                    <span class="hljs-string">&#x27;xcosx&#x27;</span>:i*np.cos(i/r),                                    <span class="hljs-string">&#x27;tanx&#x27;</span>: np.tan(i/r)&#125;, i)</code></pre><h3 id="7-Pytorch-åŠ é€Ÿ"><a href="#7-Pytorch-åŠ é€Ÿ" class="headerlink" title="7. Pytorch åŠ é€Ÿ"></a>7. Pytorch åŠ é€Ÿ</h3><p><strong>NVIDIA/DLAI:</strong> <a href="https://github.com/NVIDIA/DALI">https://github.com/NVIDIA/DALI</a></p><p><strong>Efficient-Pytorch:</strong> <a href="https://github.com/Lyken17/Efficient-PyTorch">https://github.com/Lyken17/Efficient-PyTorch</a></p><p><strong>NVIDIA/APEX:</strong> <a href="https://github.com/nvidia/apex">https://github.com/nvidia/apex</a></p><h3 id="8-æ€§èƒ½åˆ†æå·¥å…·"><a href="#8-æ€§èƒ½åˆ†æå·¥å…·" class="headerlink" title="8. æ€§èƒ½åˆ†æå·¥å…·"></a>8. æ€§èƒ½åˆ†æå·¥å…·</h3><ul><li>nvidia-smi</li><li>htop</li><li>iotop</li><li>nvtop</li><li>py-spy</li><li>strace</li></ul><h3 id="9-æ·±åº¦å­¦ä¹ ç»˜å›¾"><a href="#9-æ·±åº¦å­¦ä¹ ç»˜å›¾" class="headerlink" title="9. æ·±åº¦å­¦ä¹ ç»˜å›¾"></a>9. æ·±åº¦å­¦ä¹ ç»˜å›¾</h3><ul><li><a href="https://github.com/dair-ai/ml-visuals"><strong>ML Visuals</strong></a></li><li><a href="https://github.com/HarisIqbal88/PlotNeuralNet"><strong>PlotNeuralNet</strong></a></li></ul><h3 id="10-å…¶ä»–è¾…åŠ©å·¥å…·"><a href="#10-å…¶ä»–è¾…åŠ©å·¥å…·" class="headerlink" title="10. å…¶ä»–è¾…åŠ©å·¥å…·"></a>10. å…¶ä»–è¾…åŠ©å·¥å…·</h3><ul><li><strong>byobu</strong></li><li><strong>screen</strong></li></ul>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äººè„¸è¯†åˆ«æŸå¤±å‡½æ•°</title>
    <link href="/2019/04/15/Face-recog-loss-fun/"/>
    <url>/2019/04/15/Face-recog-loss-fun/</url>
    
    <content type="html"><![CDATA[<p>å¸¸è§çš„æŸå¤±å‡½æ•°ä¸€è§ˆ:ä»softmax loss åˆ° triplet loss å†åˆ°å„ç§ softmax æ”¹å‹ã€‚</p><a id="more"></a><h4 id="softmax-loss"><a href="#softmax-loss" class="headerlink" title="softmax loss"></a>softmax loss</h4><p>softmaxæ˜¯æœ€å¸¸è§çš„äººè„¸è¯†åˆ«å‡½æ•°ã€‚softmax å‡½æ•°å°†äººè„¸è¯†åˆ«é—®é¢˜çœ‹åšä¸€ä¸ªç»å…¸çš„åˆ†ç±»é—®é¢˜ã€‚</p><script type="math/tex; mode=display">L_{softmax} = -\frac{1}{N}\sum_{i=1}^{N} log \frac{e^{W^T_{y_i}x_i+b_{y_i}}}{\sum_{j=1}^{k}e^{W^T_jx_i+b_j}}</script><p>å…¬å¼ä¸­ N æ˜¯ batch size çš„å¤§å°ï¼Œkæ˜¯ç±»åˆ«æ•°ç›®ã€‚</p><h4 id="Triplet-loss"><a href="#Triplet-loss" class="headerlink" title="Triplet loss"></a>Triplet loss</h4><p>â€‹        Triplet loss é‡‡ç”¨ä¸‰å…ƒç»„è¿›è¡Œè®­ç»ƒï¼Œæ‰€è°“çš„ä¸‰å…ƒç»„å°±æ˜¯ä¸‰ä¸ªæ ·ä¾‹ï¼Œå¦‚(anchor, pos, neg)ï¼Œå…¶ä¸­ï¼Œxå’Œpæ˜¯åŒä¸€ç±»ï¼Œxå’Œnæ˜¯ä¸åŒç±»ã€‚é‚£ä¹ˆå­¦ä¹ çš„è¿‡ç¨‹å°±æ˜¯å­¦åˆ°ä¸€ç§è¡¨ç¤ºï¼Œå¯¹äºå°½å¯èƒ½å¤šçš„ä¸‰å…ƒç»„ï¼Œä½¿å¾—anchorå’Œposçš„è·ç¦»ï¼Œå°äºanchorå’Œnegçš„è·ç¦»ã€‚</p><p><img src="/2019/04/15/Face-recog-loss-fun/triplet.png" alt></p><script type="math/tex; mode=display">||x_i^a - x_i^p||^2_2 +m < ||x_i^a-x_i^n||_2^2</script><h4 id="center-loss"><a href="#center-loss" class="headerlink" title="center loss"></a>center loss</h4><p>â€‹       center lossçš„æ ¸å¿ƒæ˜¯ï¼šä¸ºæ¯ä¸€ä¸ªç±»åˆ«æä¾›ä¸€ä¸ªç±»åˆ«ä¸­å¿ƒï¼Œæœ€å°åŒ–æ¯ä¸ªæ ·æœ¬ä¸è¯¥ä¸­å¿ƒçš„è·ç¦»ï¼Œä»è€Œå‡å°ç±»å†…å·®è·ã€‚center loss ç”±ä¸¤é¡¹æ„æˆï¼Œç¬¬ä¸€é¡¹æ˜¯ä¼ ç»Ÿçš„ softmax lossï¼Œ ç¬¬äºŒé¡¹æ˜¯æ ·æœ¬åˆ°ç±»ä¸­å¿ƒçš„è·ç¦»ã€‚</p><script type="math/tex; mode=display">L_{center} = -\frac{1}{N}\sum_{i=1}^{N} log \frac{e^{W^T_{y_i}x_i+b_{y_i}}}{\sum_{j=1}^{k}e^{W^T_jx_i+b_j}} + \frac{\lambda}{2}\sum_{i=1}^N||x_i-c_{y_i}||^2_2</script><p><img src="/2019/04/15/Face-recog-loss-fun/center loss.png" alt></p><h4 id="L-softmax"><a href="#L-softmax" class="headerlink" title="L-softmax"></a>L-softmax</h4><p>è€ƒè™‘ä¸€ä¸ªä¸¤åˆ†ç±»é—®é¢˜ã€‚åŸå§‹çš„Softmaxçš„ç›®çš„æ˜¯ä½¿å¾—  $W_1^Tx &gt; W_2^Tx$ï¼Œ å³ $||W_1||||x||cos(\theta_1) &gt; ||W_1||||x||cos(\theta_2)$ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼ŒL-softmax(Large-margin softmax) å¸Œæœ›å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªæ­£æ•´æ•°å˜é‡mï¼Œä½¿å¾—äº§ç”Ÿçš„å†³ç­–è¾¹ç•Œå¯ä»¥æ›´åŠ ä¸¥æ ¼åœ°çº¦æŸä¸Šè¿°ä¸ç­‰å¼ï¼Œè®©ç±»å†…çš„é—´è·æ›´åŠ çš„ç´§å‡‘ï¼Œç±»é—´çš„é—´è·æ›´åŠ å…·æœ‰åŒºåˆ†æ€§ã€‚</p><script type="math/tex; mode=display">L_{l-softmax} = -\frac{1}{N}\sum_{i=1}^N log(\frac{e^{||W_{yi}||||x_i||\psi{(\theta_{y_i})}}}{e^{||W_{yi}||||x_i||\psi{(\theta_{y_i})}} + \sum_{j=1, j\neq y_i}^k{e^{||W_j||||x_i||cos(\theta_j)}}})</script><p>å…¶ä¸­,</p><script type="math/tex; mode=display">\psi(\theta) = \begin{equation}  \left\{      \begin{array}{**lr**}     cos(m\theta), 0 \leq \theta \leq \frac{\pi}{m}\\     D(\theta) ,  \frac{\pi}{m}\leq \theta \leq \pi \\        \end{array}  \right. \end{equation}</script><p>coså‡½æ•°åœ¨(0,Ï€)å†…æ˜¯å•è°ƒé€’å‡çš„ï¼Œä¹˜ä¸Šæ­£æ•´æ•°måå†…ç§¯ä¼šå‡å°ï¼Œè¿™æ ·å¯ä»¥åŠ å¤§ç±»é—´çš„å·®åˆ«ã€‚é€šè¿‡æ§åˆ¶mçš„å¤§å°ï¼Œè°ƒæ•´ç±»é—´è·ç¦»ã€‚mè¶Šå¤§ï¼Œç±»é—´è·ç¦»å°±è¶Šå¤§ï¼Œç±»å†…æ›´åŠ ç´§å‡‘ã€‚</p><p><img src="/2019/04/15/Face-recog-loss-fun/lms.png" alt></p><h4 id="sphereface-A-softmax"><a href="#sphereface-A-softmax" class="headerlink" title="sphereface(A-softmax)"></a>sphereface(A-softmax)</h4><p>SphereFaceæ˜¯åœ¨ softmax çš„åŸºç¡€ä¸Šå°†æƒé‡å½’ä¸€åŒ–ï¼Œå³å¼ $||W||=1, b=0$  ã€‚å®ƒä¸å‰é¢æåˆ°çš„L-sofrmaxæœ€å¤§çš„åŒºåˆ«åœ¨äºSphereFaceå°†Wæƒé‡å½’ä¸€åŒ–äº†ã€‚L-Softmaxä¼šåŒæ—¶ä»è§’åº¦å’Œæƒé‡é•¿åº¦ä¸ŠåŒºåˆ†ä¸åŒç±»åˆ«ï¼Œè€ŒSphereFaceåªä»è§’åº¦ä¸Šå»åŒºåˆ†ä¸åŒç±»åˆ«ã€‚</p><script type="math/tex; mode=display">L_{A-softmax} = -\frac{1}{N}\sum_{i=1}^{N}log(\frac{e^{||x_i||\psi(\theta_{y_i})}}{e^{||x_i||\psi(\theta_{y_i})} + \sum_{j=1, j \neq y_i}^k{e^{||x_i||cos\theta_j}}})</script><h4 id="cosface"><a href="#cosface" class="headerlink" title="cosface"></a>cosface</h4><p>cosFaceçš„æ€æƒ³å’ŒsphereFace( A-softmax)çš„æ€æƒ³æ¥è¿‘ï¼Œå…¶ä¸­ä¸»è¦åšäº†ä»¥ä¸‹ä¸‰ç‚¹çš„æ”¹è¿›ï¼š</p><ul><li>lossçš„å½¢å¼åšäº†ç¨å¾®çš„æ”¹å˜ï¼Œå°†è¶…å‚æ•°mç”±ä¹˜æ³•è¿ç®—å˜æˆäº†å‡æ³•è¿ç®—</li><li>ä¸ä»…å¯¹æƒé‡è¿›è¡Œäº†æ­£åˆ™åŒ–ï¼Œè¿˜å¯¹ç‰¹å¾è¿›è¡Œäº†æ­£åˆ™åŒ–</li><li>å†ä¹˜ä¸Šä¸€ä¸ª s å‚æ•°ï¼Œå½“è¶…çƒé¢è¿‡å°æ—¶ï¼Œåˆ†ç±»æ˜ å°„åˆ°è¶…çƒé¢ä¸Šä¸å¥½åˆ†ç±»ï¼Œè¿™ä¸ª s å‚æ•°å¯ä»¥æ‰©å¤§è¶…çƒé¢ä½“ç§¯ï¼Œå¸®åŠ©åˆ†ç±»</li></ul><script type="math/tex; mode=display">L_{cos} = -\frac{1}{N} \sum_{i=1}^{N} log(\frac{e^{s(cos(\theta_{yi})-m)}}{e^{s(cos(\theta_{yi})-m)}+\sum_{j=1, j\neq y_i}^k e^{scos \theta_j}})</script><h4 id="arcface"><a href="#arcface" class="headerlink" title="arcface"></a>arcface</h4><p>arcfaceçš„æ€æƒ³å’Œcosfaceç±»ä¼¼ï¼Œä¸»è¦åŒºåˆ«æ˜¯å°†mæ”¾å…¥äº†cosä¸­ï¼Œè§’åº¦è·ç¦»æ¯”ä½™å¼¦è·ç¦»å¯¹è§’åº¦çš„å½±å“æ›´åŠ ç›´æ¥:</p><script type="math/tex; mode=display">L_{arc} = -\frac{1}{N} \sum_{i=1}^{N} log(\frac{e^{s(cos(\theta_{yi}+m))}}{e^{s(cos(\theta_{yi}+m))}+\sum_{j=1,j\neq y_i}^k e^{scos\theta_j}})</script><p>arcface äººè„¸è¯†åˆ«æµç¨‹å›¾ï¼š</p><p><img src="/2019/04/15/Face-recog-loss-fun/flowchart.png" alt></p><p>ä¸åŒæŸå¤±å‡½æ•°çš„åˆ†ç±»è¾¹ç•Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2019/04/15/Face-recog-loss-fun/cos_loss.png" alt></p>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Face-Detection-Solution</title>
    <link href="/2019/04/13/Face-Detection-Solution/"/>
    <url>/2019/04/13/Face-Detection-Solution/</url>
    
    <content type="html"><![CDATA[<p>Face Detection äººè„¸æ£€æµ‹è®¾è®¡æ–¹æ¡ˆ</p><a id="more"></a><h4 id="1-æ•´ä½“ç½‘ç»œæ¶æ„è®¾è®¡"><a href="#1-æ•´ä½“ç½‘ç»œæ¶æ„è®¾è®¡" class="headerlink" title="1. æ•´ä½“ç½‘ç»œæ¶æ„è®¾è®¡"></a>1. æ•´ä½“ç½‘ç»œæ¶æ„è®¾è®¡</h4><p><strong>DSFD</strong>ï¼šResNet101, DPNâˆ’98, SE-ResNeXt101 32Ã—4dã€<strong>ResNet152</strong>ã€SE-ResNet101ï¼ˆSSD æ¶æ„ã€æœªè¿›è¡Œä¸Šä¸‹å±‚çš„èåˆï¼‰</p><p><strong>Faceboxes</strong>ï¼š(conv+CReLU+pool)<em>2 + inception </em> 3 + conv * 4ï¼ˆSSD æ¶æ„ã€æœªè¿›è¡Œä¸Šä¸‹å±‚çš„èåˆï¼‰</p><p><strong>PymaridBox</strong>ï¼šVGG16ï¼ˆLFPNæ¶æ„ï¼‰</p><p><strong>VIM-FD</strong> ï¼š densenet121 ï¼ˆSSD+attentionï¼šSTR+STCï¼‰</p><p><strong>S3FD</strong>ï¼šVGG16 ï¼ˆSSD + normï¼‰</p><p><strong>SSH</strong>: vgg16</p><p><strong>Scale Face</strong>ï¼šResnet 50</p><p><strong>smallhardface</strong>ï¼šVGG16 ï¼ˆone shotã€ç›´é€šå¼æ¶æ„ï¼šèƒ½å®ç°è¿™ä¸ªæ€§èƒ½ç®€ç›´æœ‰ç‚¹ä¸å¯æ€è®®ï¼ å€¼å¾—ç ”ç©¶çš„æ¶æ„ï¼‰</p><p><strong>SRN</strong>ï¼šcombining DRN with Root-ResNet-18 to have a training speed/accuracy trade-off backbone for SRN</p><p>(æ¯”è¾ƒæ–°çš„æ¶æ„ã€å€¼å¾—ç ”ç©¶ä¸€ä¸‹ï¼šSTR+STC)</p><p><strong>MSFD</strong>ï¼šVGG 16ï¼ˆä¸Šä¸­ä¸‹ä¸‰å±‚èåˆæœºåˆ¶ï¼‰</p><p><strong>å¯¹äºä¸»å¹²æ¶æ„ï¼Œé€šå¸¸é€‰æ‹© vgg16 æˆ–è€… resnet50/101, å¦‚æœè¿½æ±‚è½»é‡çº§å¯ä»¥ä½¿ç”¨ mobilenetv2 or shufflenet v2ã€‚</strong></p><h4 id="2-å¦‚ä½•è®¾è®¡å¤šå°ºåº¦ç‰¹å¾"><a href="#2-å¦‚ä½•è®¾è®¡å¤šå°ºåº¦ç‰¹å¾" class="headerlink" title="2. å¦‚ä½•è®¾è®¡å¤šå°ºåº¦ç‰¹å¾"></a>2. å¦‚ä½•è®¾è®¡å¤šå°ºåº¦ç‰¹å¾</h4><p>å¸¸è§çš„å¤šå°ºåº¦çš„è®¾è®¡æ–¹æ¡ˆï¼š</p><p>ï¼ˆaï¼‰å›¾åƒé‡‘å­—å¡”ï¼Œå³å°†å›¾åƒåšæˆä¸åŒçš„scaleï¼Œç„¶åä¸åŒscaleçš„å›¾åƒç”Ÿæˆå¯¹åº”çš„ä¸åŒscaleçš„ç‰¹å¾ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹åœ¨äºå¢åŠ äº†æ—¶é—´æˆæœ¬ã€‚æœ‰äº›ç®—æ³•ä¼šåœ¨æµ‹è¯•æ—¶å€™é‡‡ç”¨å›¾åƒé‡‘å­—å¡”ã€‚ </p><p>ï¼ˆbï¼‰åƒSPP netï¼ŒFast RCNNï¼ŒFaster RCNNæ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå³ä»…é‡‡ç”¨ç½‘ç»œæœ€åä¸€å±‚çš„ç‰¹å¾ã€‚ </p><p>ï¼ˆcï¼‰åƒSSDï¼ˆSingle Shot Detectorï¼‰é‡‡ç”¨è¿™ç§å¤šå°ºåº¦ç‰¹å¾èåˆçš„æ–¹å¼ï¼Œæ²¡æœ‰ä¸Šé‡‡æ ·è¿‡ç¨‹ï¼Œå³ä»ç½‘ç»œä¸åŒå±‚æŠ½å–ä¸åŒå°ºåº¦çš„ç‰¹å¾åšé¢„æµ‹ï¼Œè¿™ç§æ–¹å¼ä¸ä¼šå¢åŠ é¢å¤–çš„è®¡ç®—é‡ã€‚ä½œè€…è®¤ä¸ºSSDç®—æ³•ä¸­æ²¡æœ‰ç”¨åˆ°è¶³å¤Ÿä½å±‚çš„ç‰¹å¾ï¼ˆåœ¨SSDä¸­ï¼Œæœ€ä½å±‚çš„ç‰¹å¾æ˜¯VGGç½‘ç»œçš„conv4_3ï¼‰ï¼Œè€Œåœ¨ä½œè€…çœ‹æ¥è¶³å¤Ÿä½å±‚çš„ç‰¹å¾å¯¹äºæ£€æµ‹å°ç‰©ä½“æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚ </p><p>ï¼ˆdï¼‰æœ¬æ–‡ä½œè€…æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œé¡¶å±‚ç‰¹å¾é€šè¿‡ä¸Šé‡‡æ ·å’Œä½å±‚ç‰¹å¾åšèåˆï¼Œè€Œä¸”æ¯å±‚éƒ½æ˜¯ç‹¬ç«‹é¢„æµ‹çš„ã€‚</p><p><img src="/2019/04/13/Face-Detection-Solution/2.png" alt></p><p><strong>è¿›å…¥ 2018å¹´ä»¥æ¥ï¼Œå¤§éƒ¨åˆ†ç½‘ç»œå‡é‡‡ç”¨ FPN ç½‘ç»œç»“æ„çš„å½¢å¼ï¼Œèåˆå¤šä¸ªç‰¹å¾å±‚è¿›è¡Œæ£€æµ‹ã€‚æœ‰æ—¶å€™ä¼šæ­é…ä¸€ä¸ªç‹¬ç‰¹è®¾è®¡çš„ç½‘ç»œï¼Œæ¯”å¦‚SRN çš„ STR_STC ç»“æ„ã€MSFD çš„ä¸‰å±‚èåˆæœºåˆ¶ã€DSFD çš„ Two-shot ç»“æ„ã€‚éƒ½è¿›è¡Œäº†ä¸åŒç¨‹åº¦çš„åˆ›æ–°ã€‚</strong></p><h4 id="3-Loss-è®¾è®¡"><a href="#3-Loss-è®¾è®¡" class="headerlink" title="3. Loss è®¾è®¡"></a>3. Loss è®¾è®¡</h4><h5 id="ï¼ˆ1ï¼‰smooth-l1-loss"><a href="#ï¼ˆ1ï¼‰smooth-l1-loss" class="headerlink" title="ï¼ˆ1ï¼‰smooth l1  loss"></a>ï¼ˆ1ï¼‰smooth l1  loss</h5><p>Smooth l1 loss çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><script type="math/tex; mode=display">smooth_{L_1}(x) = \begin{equation}  \left\{      \begin{array}{**lr**}      0.5 x^2,  if |x| < 1  \\      |x|-0.5,  otherwise \\        \end{array}  \right.  \end{equation}</script><h5 id="ï¼ˆ2ï¼‰focal-loss"><a href="#ï¼ˆ2ï¼‰focal-loss" class="headerlink" title="ï¼ˆ2ï¼‰focal loss"></a>ï¼ˆ2ï¼‰focal loss</h5><script type="math/tex; mode=display">L_{focol\ loss} = \begin{equation}  \left\{      \begin{array}{**lr**}      -(1-y')^\gamma logy',  y=1 \\      -y'^\gamma log(1-y'),  y=0 \\        \end{array}  \right.  \end{equation}</script><h4 id="4-anchor-è®¾è®¡"><a href="#4-anchor-è®¾è®¡" class="headerlink" title="4. anchor è®¾è®¡"></a>4. anchor è®¾è®¡</h4><p><strong>anchor è®¾è®¡çš„ä¸‰ä¸ªåŸåˆ™ï¼š</strong><br><strong>(1) anchor çš„å°ºå¯¸ã€é•¿å®½æ¯”ã€ä½ç½®éƒ½åº”è¯¥ match æºæ•°æ®ä¸­çš„bboxã€‚ä¸€ç§æ–¹æ³•æ˜¯é’ˆå¯¹ç‰¹å®šæ•°æ®é›†è®¾è®¡anchorï¼Œå¦‚YOLOv2ä¸­çš„èšç±»ï¼Œå’Œè¿‘æœŸæœ‰è®ºæ–‡CNNè®­ç»ƒanchorçš„è®¾ç½®ï¼Œè¿™äº›æ–¹æ³•æˆ–è®¸æ›´é€‚åˆæŸä¸€æ•°æ®é›†ï¼Œä½†ä¹Ÿå¯èƒ½å½±å“æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œæ¢ä¸€ä¸ªåº“æ˜¯å¦ä¾ç„¶å¤Ÿç”¨ã€‚</strong><br><strong>(2) anchorçš„size å¿…é¡»å°äºæ„Ÿå—é‡</strong><br><strong>(3) ä¸åŒsizeçš„anchoråº”å½“å…·æœ‰ç›¸åŒçš„ç©ºé—´å¯†åº¦åˆ†å¸ƒã€‚å¯†åº¦ä¸€è‡´çš„è¯ï¼Œè¦æ±‚ anchor/stride ä¸ºä¸€ä¸ªå®šå€¼ã€‚</strong></p><h4 id="5-æ•°æ®å¢å¼ºç­–ç•¥"><a href="#5-æ•°æ®å¢å¼ºç­–ç•¥" class="headerlink" title="5. æ•°æ®å¢å¼ºç­–ç•¥:"></a>5. æ•°æ®å¢å¼ºç­–ç•¥:</h4><p><strong>S3FD</strong>ï¼šColor distortã€Random cropã€Horizontal flip</p><p><strong>Faceboxes</strong>ï¼šColor distortã€Random cropã€Horizontal flipã€Scale transformationã€Face-box filter</p><p><strong>SRN</strong>ï¼šphotometric distortions<strong>, </strong>randomly expanding by zero-padding operation<strong>, </strong>randomly cropping patches<strong>ã€ </strong>data-anchor-sampling in PyramidBox</p><p><strong>Pyramid box</strong>ï¼š color distort, random crop and horizontal flip.data-anchor-sampling</p><p><strong>VIMFD</strong>: data-anchor-sampling method in PyramidBox</p><p><strong>Small hard face</strong>: random cropping,photometric distortion</p><p><strong>Tiny face</strong>: resize</p><p><strong>æœ€å¸¸è§çš„å‡ ç§æ–¹æ¡ˆæ˜¯ï¼šColor distortã€Random crop(resize)ã€Horizontal flipã€data-anchor-sampling method in PyramidBox </strong></p><p>å…¶ä»–å€¼å¾—å€Ÿé‰´çš„æ•°æ®å¢å¼ºç­–ç•¥:</p><p>[1] SSD &amp; YOLO v3 ç›¸å…³æ•°æ®å¢å¼º</p><p>[2] <a href="https://github.com/maozezhong/CV_ToolBox/blob/master/DataAugForObjectDetection/DataAugmentForObejctDetection.py">https://github.com/maozezhong/CV_ToolBox/blob/master/DataAugForObjectDetection/DataAugmentForObejctDetection.py</a></p><p>[3] torchvision</p><p>[4] <a href="https://github.com/dmlc/gluon-cv?files=1">mxnetï¼šBag of Freebies for Training Object Detection Neural Networks</a></p><h4 id="6-æ·±åº¦å­¦ä¹ äººè„¸æ£€æµ‹æ–¹æ¡ˆçš„å‘å±•"><a href="#6-æ·±åº¦å­¦ä¹ äººè„¸æ£€æµ‹æ–¹æ¡ˆçš„å‘å±•" class="headerlink" title="6. æ·±åº¦å­¦ä¹ äººè„¸æ£€æµ‹æ–¹æ¡ˆçš„å‘å±•"></a>6. æ·±åº¦å­¦ä¹ äººè„¸æ£€æµ‹æ–¹æ¡ˆçš„å‘å±•</h4><p><img src="/2019/04/13/Face-Detection-Solution/face_detection.png" alt="Face Detection"></p><h4 id="7-å¸¸è§æ•°æ®é›†"><a href="#7-å¸¸è§æ•°æ®é›†" class="headerlink" title="7. å¸¸è§æ•°æ®é›†"></a>7. å¸¸è§æ•°æ®é›†</h4><ul><li><p>FDDB</p></li><li><p>Wider-Face</p></li><li><p>PASCAL</p></li><li><p>AFW</p></li></ul><p><strong>ç›¸æ¯”è€Œè¨€ï¼šWIDER-FACE æ›´åŠ æƒå¨ã€FDDB æ¬¡ä¹‹ï¼ŒPASCALå’ŒAFW éƒ½æ˜¯æ¯”è¾ƒå°çš„æ•°æ®é›†ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥ã€‚</strong></p>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>FaceBoxes</title>
    <link href="/2019/04/13/FaceBoxes/"/>
    <url>/2019/04/13/FaceBoxes/</url>
    
    <content type="html"><![CDATA[<p>FaceBoxes: A CPU Real-time Face Detector with High Accuracy</p><a id="more"></a><h3 id="FaceBoxes-A-CPU-Real-time-Face-Detector-with-High-Accuracy"><a href="#FaceBoxes-A-CPU-Real-time-Face-Detector-with-High-Accuracy" class="headerlink" title="FaceBoxes: A CPU Real-time Face Detector with High Accuracy"></a>FaceBoxes: A CPU Real-time Face Detector with High Accuracy</h3><p>è®ºæ–‡é˜…è¯»ï¼šFaceBoxes: A CPU Real-time Face Detector with High Accuracy</p><p>æ–‡ç« ï¼š <a href="http://cn.arxiv.org/abs/1708.05234">http://cn.arxiv.org/abs/1708.05234</a></p><h4 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h4><p>2ä¸ªæŒ‘æˆ˜ï¼š</p><p>1) åœ¨æ‚ä¹±èƒŒæ™¯ä¸‹äººè„¸è§†è§’å¤§çš„å˜åŒ–éœ€è¦äººè„¸æ£€æµ‹å™¨ç²¾å‡†çš„è§£å†³å¤æ‚äººè„¸å’Œéäººè„¸çš„åˆ†ç±»é—®é¢˜ã€‚</p><p>2) è¾ƒå¤§çš„æœç´¢ç©ºé—´å’Œäººè„¸å°ºå¯¸è¿›ä¸€æ­¥å¢åŠ äº†æ—¶é—´æ•ˆç‡çš„éœ€è¦ã€‚</p><p>â€‹        ä¼ ç»Ÿæ–¹æ³•æ•ˆç‡é«˜ä½†åœ¨äººè„¸å¤§çš„è§†è§’å˜åŒ–ä¸‹ç²¾åº¦ä¸å¤Ÿï¼ŒåŸºäºCNNçš„æ–¹æ³•ç²¾åº¦é«˜ä½†é€Ÿåº¦å¾ˆæ…¢ã€‚å—åˆ°Faster R-CNNçš„RPNä»¥åŠSSDä¸­å¤šå°ºåº¦æœºåˆ¶çš„å¯å‘ï¼Œä¾¿æœ‰äº†è¿™ç¯‡å¯ä»¥åœ¨CPUä¸Šå®æ—¶è·‘çš„FaceBoxesã€‚</p><h4 id="FaceBoxes"><a href="#FaceBoxes" class="headerlink" title="FaceBoxes"></a>FaceBoxes</h4><p><strong>ï¼ˆ1ï¼‰RDCLï¼šRapidly Digested Convolutional Layers, åŠ é€Ÿè®¡ç®—</strong></p><p>â€‹    ç¼©å°è¾“å…¥çš„ç©ºé—´å¤§å°ï¼šä¸ºäº†å¿«é€Ÿå‡å°è¾“å…¥çš„ç©ºé—´å°ºåº¦å¤§å°ï¼Œåœ¨å·ç§¯æ ¸æ± åŒ–ä¸Šä½¿ç”¨äº†ä¸€ç³»åˆ—çš„å¤§çš„stride,åœ¨Conv1,Pool1,Conv2,Pool2ä¸Šstrideåˆ†åˆ«æ˜¯4,2,2,2,RDCLçš„strideä¸€å…±æ˜¯32ï¼Œæ„å‘³ç€è¾“å…¥çš„å°ºåº¦å¤§å°è¢«å¿«é€Ÿå‡å°äº†32å€ã€‚è¿™é‡Œæ˜¯åŒºåˆ«äºYOLO v3 çš„å…³é”®ï¼Œ YOLO v3 æ•´ä½“ä¸‹é™äº†32å€ï¼Œè¿™é‡Œä»…ä»…åœ¨ RDCL éƒ¨åˆ†å°±ä¸‹é™äº†32å€ï¼Œå‚æ•°é‡æ˜¯å°‘äº†å¾ˆå¤šï¼Œå¯ä»¥åŠ å¿«é€Ÿåº¦ï¼Œè¿™ä¸ªç‚¹è¿˜æ˜¯å€¼å¾—å€Ÿé‰´çš„</p><ul><li><p>é€‰æ‹©åˆé€‚çš„kernel sizeï¼šä¸€ä¸ªç½‘ç»œå¼€å§‹çš„ä¸€äº›å±‚çš„kernel sizeåº”è¯¥æ¯”è¾ƒå°ä»¥ç”¨æ¥åŠ é€Ÿï¼ŒåŒæ—¶ä¹Ÿåº”è¯¥è¶³å¤Ÿå¤§ç”¨ä»¥å‡è½»ç©ºé—´å¤§å°å‡å°å¸¦æ¥çš„ä¿¡æ¯æŸå¤±ã€‚Conv1,Conv2å’Œæ‰€æœ‰çš„Poolåˆ†åˆ«é€‰å–7x7, 5x5, 3x3çš„kernel sizeã€‚</p></li><li><p>å‡å°‘è¾“å‡ºé€šé“æ•°ï¼šä½¿ç”¨C.ReLUæ¥å¢åŠ è¾“å‡ºé€šé“æ•°ï¼Œæ¯”ä½¿ç”¨å·ç§¯å¢åŠ é€šé“æ•°éœ€è¦çš„å‚æ•°é‡æ›´å°‘ã€‚</p></li></ul><p><strong>ï¼ˆ2ï¼‰MSCLï¼šMultiple Scale Convolutional Layers,ä¸°å¯Œæ„Ÿå—é‡ï¼Œä½¿ä¸åŒå±‚çš„anchorç¦»æ•£åŒ–ä»¥å¤„ç†å¤šå°ºåº¦äººè„¸</strong></p><p>ã€€ã€€å°†RPNä½œä¸ºä¸€ä¸ªäººè„¸æ£€æµ‹å™¨ï¼Œä¸èƒ½è·å–å¾ˆå¥½çš„æ€§èƒ½æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š(1) RPNä¸­çš„anchoråªå’Œæœ€åä¸€ä¸ªå·ç§¯å±‚ç›¸å…³ï¼Œå…¶ä¸­çš„ç‰¹å¾å’Œåˆ†è¾¨ç‡åœ¨å¤„ç†äººè„¸å˜åŒ–ä¸Šå¤ªå¼±ã€‚(2) anchorç›¸åº”çš„å±‚ä½¿ç”¨ä¸€ç³»åˆ—ä¸åŒçš„å°ºåº¦æ¥æ£€æµ‹äººè„¸ï¼Œä½†åªæœ‰å•ä¸€çš„æ„Ÿå—é‡ï¼Œä¸èƒ½åŒ¹é…ä¸åŒå°ºåº¦çš„äººè„¸ã€‚</p><p>ã€€ã€€ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯¹MSCLä»ä»¥ä¸‹ä¸¤ä¸ªè§’åº¦å»è®¾è®¡ï¼š</p><p>ã€€ã€€Multi-scale design along the dimension of network depth.å¦‚ä¸‹å›¾ï¼Œanchoråœ¨å¤šå°ºåº¦çš„feature mapä¸Šé¢å–ï¼Œç±»ä¼¼SSDã€‚</p><p><img src="/2019/04/13/FaceBoxes/1.png" alt="img"></p><p>Multi-scale design along the dimension of network width.ä½¿ç”¨inceptionæ¨¡å—ï¼Œå†…éƒ¨ä½¿ç”¨ä¸åŒå¤§å°çš„å·ç§¯æ ¸ï¼Œå¯ä»¥æ•è·åˆ°æ›´å¤šçš„å°ºåº¦ä¿¡æ¯ã€‚</p><p><strong>ï¼ˆ3ï¼‰Anchor densification strategyï¼š</strong></p><p> Inceptionçš„anchorå°ºåº¦ä¸º32<em>32,64</em>64,128<em>128,Conv3_2ã€Conv4_2çš„å°ºåº¦åˆ†åˆ«ä¸º256</em>256å’Œ512<em>512ã€‚æ¯”å¦‚Conv3_2çš„strideæ˜¯64ã€anchorå¤§å°ä¸º256</em>256ï¼Œè¡¨ç¤ºå¯¹åº”è¾“å…¥å›¾ç‰‡æ¯64åƒç´ å¤§å°æœ‰ä¸€ä¸ª256*256çš„anchorã€‚</p><p><img src="/2019/04/13/FaceBoxes/2.png" alt="img"></p><p>â€‹    æˆ‘ä»¬å®šä¹‰ anchorå¯†åº¦ä¸ºï¼šAdensity = Ascale/Aintervalã€‚Ascaleè¡¨ç¤ºanchorçš„å°ºåº¦ï¼ŒAintervalè¡¨ç¤ºanchoré—´éš”ã€‚</p><p>â€‹    æ˜¾ç„¶åœ¨ä¸åŒå°ºåº¦ä¸Šanchorçš„å¯†åº¦ä¸å‡è¡¡ã€‚ç›¸æ¯”å¤§çš„anchorï¼ˆ128-256-512ï¼‰ï¼Œå°çš„anchorï¼ˆ32å’Œ64ï¼‰è¿‡äºç¨€ç–ï¼Œå°†ä¼šå¯¼è‡´åœ¨å°è„¸æ£€æµ‹ä¸­ä½çš„å¬å›ç‡ã€‚</p><p>ä¸ºè§£å†³ä¸å‡è¡¡é—®é¢˜ï¼Œæ­¤å¤„æå‡ºæ–°çš„anchorç­–ç•¥ã€‚ä¸ºäº†åŠ å¤§ä¸€ç§anchorçš„å¯†åº¦ï¼Œåœ¨ä¸€ä¸ªæ„Ÿå—é‡çš„ä¸­å¿ƒå‡åŒ€çš„å †å n^2 ä¸ªanchorï¼ˆæœ¬æ¥æ˜¯1ä¸ªï¼‰ç”¨æ¥é¢„æµ‹ã€‚æ–‡ç« é‡Œå¯¹32<em>32çš„anchoråšäº†4å€ï¼Œå¯¹64</em>64çš„anchoråšäº†2å€ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ä¸åŒå°ºåº¦çš„anchoræœ‰ç›¸åŒçš„å¯†åº¦ã€‚</p><p><img src="/2019/04/13/FaceBoxes/3.png" alt="img"></p><h4 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h4><h5 id="1-Training-dataset"><a href="#1-Training-dataset" class="headerlink" title="1. Training dataset:"></a>1. Training dataset:</h5><p>â€‹    WIDER FACEçš„å­é›†ï¼Œ12880ä¸ªå›¾ç‰‡ã€‚</p><p><strong>ï¼ˆ1ï¼‰Data augmentation:</strong></p><ul><li><p>Color distorition:æ ¹æ®<a href="https://arxiv.org/ftp/arxiv/papers/1312/1312.5402.pdf">ã€ŠSome Improvements on Deep Convolutional Neural Network Based Image Classificationã€‹</a></p></li><li><p>Random cropping: ä»åŸå›¾ä¸­éšæœºè£å‰ª5ä¸ªæ–¹å—patch:ä¸€ä¸ªæœ€å¤§æ–¹å—ï¼Œå…¶ä»–çš„åˆ†åˆ«åœ¨èŒƒå›´[0.3, 1]ä¹‹äºåŸå›¾å°ºå¯¸ã€‚</p></li><li><p>Scale transformation:å°†éšæœºè£å‰ªåçš„æ–¹å—patchç»™resizeåˆ°1024*1024.</p></li><li><p>Horizontal flipping: 0.5çš„æ¦‚ç‡ç¿»è½¬ã€‚</p></li><li><p>Face-box filter: å¦‚æœface boxçš„ä¸­å¿ƒåœ¨å¤„ç†åçš„å›¾ç‰‡ä¸Šï¼Œåˆ™ä¿æŒå…¶é‡å ï¼Œç„¶åå°†é«˜æˆ–å®½å°äº20åƒç´ çš„face boxè¿‡æ»¤å‡ºæ¥ã€‚</p></li></ul><p><strong>ï¼ˆ2ï¼‰Matching strategy:</strong></p><p>â€‹    åœ¨è®­ç»ƒæ—¶éœ€è¦åˆ¤æ–­å“ªä¸ªanchoræ˜¯å’Œå“ªä¸ªface bounding boxç›¸å…³çš„ã€‚é¦–å…ˆä½¿ç”¨jaccard overlapå°†æ¯ä¸ªè„¸å’Œanchorå¯¹åº”èµ·æ¥ï¼Œç„¶åå¯¹anchorå’Œä»»æ„è„¸jaccard overlapé«˜äºé˜ˆå€¼ï¼ˆ0.35ï¼‰çš„åŒ¹é…èµ·æ¥ã€‚</p><p><strong>ï¼ˆ3ï¼‰Loss function:</strong></p><p>â€‹    å’ŒFaster R-CNNä¸­çš„RPNç”¨åŒæ ·çš„loss,ä¸€ä¸ª2åˆ†ç±»çš„softmax lossç”¨æ¥åšåˆ†ç±»ï¼Œsmooth L1ç”¨æ¥åšå›å½’ã€‚</p><p><strong>ï¼ˆ4ï¼‰Hard negative mining:</strong></p><p>åœ¨anchoråŒ¹é…åï¼Œå¤§å¤šæ•°anchoréƒ½æ˜¯è´Ÿæ ·æœ¬ï¼Œå¯¼è‡´æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬ä¸¥é‡ä¸å‡è¡¡ã€‚ä¸ºäº†æ›´å¿«æ›´ç¨³å®šçš„è®­ç»ƒï¼Œå°†ä»–ä»¬æŒ‰ç…§losså€¼æ’åºå¹¶é€‰å–æœ€é«˜çš„å‡ ä¸ªï¼Œä¿è¯æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬çš„æ¯”ä¾‹æœ€é«˜ä¸è¶…è¿‡3:1.</p><p><strong>ï¼ˆ5ï¼‰Other implementation details:</strong></p><p>â€‹    Xavieréšæœºåˆå§‹åŒ–ã€ä¼˜åŒ–å™¨SGDã€momentum:0.9ã€weight decay:5e-4ï¼Œbatch size:32ï¼Œè¿­ä»£æœ€å¤§æ¬¡æ•°:120kï¼Œåˆå§‹80kè¿­ä»£learning rate:1e-3ï¼Œ80-100kè¿­ä»£ç”¨1e-4ï¼Œ,100-120kè¿­ä»£ç”¨1e-5ï¼Œä½¿ç”¨caffeå®ç°ã€‚</p><h4 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h4><p><img src="/2019/04/13/FaceBoxes/4.png" alt="img"></p><p><strong>(2) Model analysis</strong></p><p>â€‹    FDDBç›¸æ¯” AFW å’Œ PASCAL face è¾ƒä¸ºå›°éš¾ï¼Œå› æ­¤è¿™é‡Œåœ¨FDDBä¸Šä½œåˆ†æã€‚</p><p><strong>(2) Ablative Setting:</strong></p><p>1) å»æ‰ anchor densification strategy. =&gt; Anchor densification strategy is crucial.  è¿™ç§ anchor ç­–ç•¥ä¹Ÿæå‡äº†å¤§çº¦1ä¸ªç™¾åˆ†ç‚¹</p><p>2)æŠŠ MSCL æ›¿æ¢ä¸ºä¸‰å±‚å·ç§¯ï¼Œå…¶å¤§å°éƒ½ä¸º3*3ï¼Œè¾“å‡ºæ•°éƒ½å’ŒMSCLä¸­å‰ä¸‰ä¸ªInceptionçš„ä¿æŒä¸€è‡´. åŒæ—¶ï¼ŒæŠŠanchoråªå’Œæœ€åä¸€å±‚å·ç§¯å…³è”ã€‚ =&gt; MSCL is better.  ç¨å¾®æ…¢äº† 1ç‚¹ï¼Œä½†æ˜¯ç²¾åº¦æé«˜äº†ä¸€ä¸ªç‚¹ï¼ˆï¼FPN å·²ç»æˆä¸ºç°æœ‰ç½‘ç»œéƒ½å€Ÿé‰´çš„ä¸€ç‚¹ï¼‰</p><p>3)æŠŠRDCLä¸­çš„C.ReLUæ›¿æ¢ä¸ºReLUã€‚=&gt; RDCL is efficient and accuracy-preserving. ä¸æ”¹å˜ç²¾ç¡®åº¦çš„æƒ…å†µä¸‹ï¼Œ æå‡äº†å¤§çº¦ 1/3 çš„é€Ÿåº¦</p><p><img src="/2019/04/13/FaceBoxes/5.png" alt="img"></p><p><strong>(3) å®éªŒç»“æœ:</strong></p><p>AFW:</p><p><img src="/2019/04/13/FaceBoxes/6.png" alt="img"></p><p>PASCAL face:</p><p><img src="/2019/04/13/FaceBoxes/7.png" alt="img"></p><p>FDDB:</p><p><img src="/2019/04/13/FaceBoxes/8.png" alt="img"></p><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><ul><li>å¤§å·ç§¯å¿«é€Ÿé™ä½è¿ç®—é‡ + CReLU</li><li>anchor é‡‡æ ·æœºåˆ¶</li><li>å¤šå°ºåº¦ç‰¹å¾èåˆ</li></ul>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MTCNN</title>
    <link href="/2019/04/13/MTCNN/"/>
    <url>/2019/04/13/MTCNN/</url>
    
    <content type="html"><![CDATA[<p>è®ºæ–‡é˜…è¯»: MTCNN  Joint Face Detection and Alignment using Multi-task Cascaded Convolutional Networks</p><a id="more"></a><h4 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h4><p>â€‹    ç›¸æ¯”äºR-CNNç³»åˆ—é€šç”¨æ£€æµ‹æ–¹æ³•ï¼Œæœ¬æ–‡æ›´åŠ é’ˆå¯¹äººè„¸æ£€æµ‹è¿™ä¸€ä¸“é—¨çš„ä»»åŠ¡ï¼Œé€Ÿåº¦å’Œç²¾åº¦éƒ½æœ‰è¶³å¤Ÿçš„æå‡ã€‚R-CNNï¼ŒFast R-CNNï¼ŒFasterR-CNNè¿™ä¸€ç³»åˆ—çš„æ–¹æ³•ä¸æ˜¯ä¸€ç¯‡åšå®¢èƒ½è®²æ¸…æ¥šçš„ï¼Œæœ‰å…´è¶£å¯ä»¥æ‰¾ç›¸å…³è®ºæ–‡é˜…è¯»ã€‚ç±»ä¼¼äºTCDCNï¼Œ<strong>æœ¬æ–‡æå‡ºäº†ä¸€ç§ Multi-taskçš„äººè„¸æ£€æµ‹æ¡†æ¶ï¼Œå°†äººè„¸æ£€æµ‹å’Œäººè„¸ç‰¹å¾ç‚¹æ£€æµ‹åŒæ—¶è¿›è¡Œã€‚è®ºæ–‡ä½¿ç”¨3ä¸ªCNNçº§è”çš„æ–¹å¼ï¼Œå’ŒViola-Jonesç±»ä¼¼ï¼Œå®ç°äº†coarse-to-fineçš„ç®—æ³•ç»“æ„</strong>ã€‚</p><h4 id="2-æ¡†æ¶"><a href="#2-æ¡†æ¶" class="headerlink" title="2. æ¡†æ¶"></a>2. æ¡†æ¶</h4><p><strong>ï¼ˆ1ï¼‰.ç®—æ³•æµç¨‹</strong></p><p><img src="/2019/04/13/MTCNN/1.jpg" alt="algorithm flow"></p><p><strong>å½“ç»™å®šä¸€å¼ ç…§ç‰‡çš„æ—¶å€™ï¼Œå°†å…¶ç¼©æ”¾åˆ°ä¸åŒå°ºåº¦å½¢æˆå›¾åƒé‡‘å­—å¡”ï¼Œä»¥è¾¾åˆ°å°ºåº¦ä¸å˜ã€‚</strong></p><p><strong>Stage 1ï¼šä½¿ç”¨P-Netæ˜¯ä¸€ä¸ªå…¨å·ç§¯ç½‘ç»œï¼Œç”¨æ¥ç”Ÿæˆå€™é€‰çª—å’Œè¾¹æ¡†å›å½’å‘é‡(bounding box regression vectors)ã€‚ä½¿ç”¨Bounding box regressionçš„æ–¹æ³•æ¥æ ¡æ­£è¿™äº›å€™é€‰çª—ï¼Œä½¿ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼ˆNMSï¼‰åˆå¹¶é‡å çš„å€™é€‰æ¡†ã€‚å…¨å·ç§¯ç½‘ç»œå’ŒFaster R-CNNä¸­çš„RPNä¸€è„‰ç›¸æ‰¿ã€‚</strong></p><p><strong>Stage 2ï¼šä½¿ç”¨N-Netæ”¹å–„å€™é€‰çª—ã€‚å°†é€šè¿‡P-Netçš„å€™é€‰çª—è¾“å…¥R-Netä¸­ï¼Œæ‹’ç»æ‰å¤§éƒ¨åˆ†falseçš„çª—å£ï¼Œç»§ç»­ä½¿ç”¨Bounding box regressionå’ŒNMSåˆå¹¶ã€‚</strong></p><p><strong>Stage 3ï¼šæœ€åä½¿ç”¨O-Netè¾“å‡ºæœ€ç»ˆçš„äººè„¸æ¡†å’Œç‰¹å¾ç‚¹ä½ç½®ã€‚å’Œç¬¬äºŒæ­¥ç±»ä¼¼ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ç”Ÿæˆ5ä¸ªç‰¹å¾ç‚¹ä½ç½®ã€‚</strong></p><p><strong>ï¼ˆ2ï¼‰CNNç»“æ„</strong></p><p>æœ¬æ–‡ä½¿ç”¨ä¸‰ä¸ªCNNï¼Œç»“æ„å¦‚å›¾ï¼š</p><p><img src="/2019/04/13/MTCNN/2.png" alt="MTCNN"></p><p><strong>ï¼ˆ3ï¼‰.è®­ç»ƒ</strong></p><p>è¿™ä¸ªç®—æ³•éœ€è¦å®ç°ä¸‰ä¸ªä»»åŠ¡çš„å­¦ä¹ ï¼šäººè„¸éäººè„¸çš„åˆ†ç±»ï¼Œbounding box regressionå’Œäººè„¸ç‰¹å¾ç‚¹å®šä½ã€‚</p><p>(1)äººè„¸æ£€æµ‹</p><p>è¿™å°±æ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°å³å¯ï¼š</p><script type="math/tex; mode=display">L_i^{det} = -(y_i^{det}log(p_i)+(1-y_i^{det})(1-log(p_i)))</script><p>(2)Bounding box regression</p><p>è¿™æ˜¯ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œä½¿ç”¨å¹³æ–¹å’ŒæŸå¤±å‡½æ•°ï¼š</p><script type="math/tex; mode=display">L_i^{box} = || y_i^{box} - y_i^{box} ||_2^2</script><p>(3)äººè„¸ç‰¹å¾ç‚¹å®šä½</p><p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œç›®æ ‡æ˜¯5ä¸ªç‰¹å¾ç‚¹ä¸æ ‡å®šå¥½çš„æ•°æ®çš„å¹³æ–¹å’ŒæŸå¤±ï¼š</p><script type="math/tex; mode=display">L_i^{Landmark} = ||y_i^{landmark} - y_i^{landmark}||</script><p><strong>(4)å¤šä»»åŠ¡è®­ç»ƒ</strong></p><p>ä¸æ˜¯æ¯ä¸ªsampleéƒ½è¦ä½¿ç”¨è¿™ä¸‰ç§æŸå¤±å‡½æ•°çš„ï¼Œæ¯”å¦‚å¯¹äºèƒŒæ™¯åªéœ€è¦è®¡ç®—$L^{det}_i$ï¼Œä¸éœ€è¦è®¡ç®—åˆ«çš„æŸå¤±ï¼Œè¿™æ ·å°±éœ€è¦å¼•å…¥ä¸€ä¸ªæŒ‡ç¤ºå€¼æŒ‡ç¤ºæ ·æœ¬æ˜¯å¦éœ€è¦è®¡ç®—æŸä¸€é¡¹æŸå¤±ã€‚æœ€ç»ˆçš„è®­ç»ƒç›®æ ‡å‡½æ•°æ˜¯ï¼š</p><script type="math/tex; mode=display">min\sum_{i=1}^{N} \sum_{j \in \{det,box,landmark\}} \alpha_j\beta_i^jL_i^j</script><p>Næ˜¯è®­ç»ƒæ ·æœ¬çš„æ•°é‡ï¼Œ$\alpha<em>j$è¡¨ç¤ºä»»åŠ¡çš„é‡è¦æ€§ã€‚åœ¨ P-Net å’Œ R-Net ä¸­ï¼Œ$\alpha</em>{det}=1, \alpha<em>{box}=0.5, \alpha</em>{landmark}=0.5$ï¼Œåœ¨O-Netä¸­ï¼Œ$\alpha<em>{det}=1, \alpha</em>{box}=0.5, \alpha_{landmark}=1$</p><p><strong>(5)online hard sample mining</strong></p><p>ä¼ ç»Ÿçš„éš¾ä¾‹å¤„ç†æ–¹æ³•æ˜¯æ£€æµ‹è¿‡ä¸€æ¬¡ä»¥åï¼Œæ‰‹åŠ¨æ£€æµ‹å“ªäº›å›°éš¾çš„æ ·æœ¬æ— æ³•è¢«åˆ†ç±»ï¼Œæœ¬æ–‡é‡‡ç”¨online hard sample miningçš„æ–¹æ³•ã€‚å…·ä½“å°±æ˜¯åœ¨æ¯ä¸ªmini-batchä¸­ï¼Œå–lossæœ€å¤§çš„70%è¿›è¡Œåå‘ä¼ æ’­ï¼Œå¿½ç•¥é‚£äº›ç®€å•çš„æ ·æœ¬ã€‚</p><h4 id="3-å®éªŒ"><a href="#3-å®éªŒ" class="headerlink" title="3. å®éªŒ"></a>3. å®éªŒ</h4><p>æœ¬æ–‡ä¸»è¦ä½¿ç”¨ä¸‰ä¸ªæ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼šFDDBï¼ŒWider Faceï¼ŒAFLWã€‚</p><p>Aã€è®­ç»ƒæ•°æ®</p><p>æœ¬æ–‡å°†æ•°æ®åˆ†æˆ4ç§ï¼š</p><p>Negativeï¼šéäººè„¸ </p><p>Positiveï¼šäººè„¸ </p><p>Part facesï¼šéƒ¨åˆ†äººè„¸ </p><p>Landmark faceï¼šæ ‡è®°å¥½ç‰¹å¾ç‚¹çš„äººè„¸</p><p>åˆ†åˆ«ç”¨äºè®­ç»ƒä¸‰ç§ä¸åŒçš„ä»»åŠ¡ã€‚Negativeå’ŒPositiveç”¨äºäººè„¸åˆ†ç±»ï¼Œpositiveå’Œpart facesç”¨äºbounding box regressionï¼Œlandmark faceç”¨äºç‰¹å¾ç‚¹å®šä½ã€‚</p><p>Bã€æ•ˆæœ</p><p>æœ¬æ–‡çš„äººè„¸æ£€æµ‹å’Œäººè„¸ç‰¹å¾ç‚¹å®šä½çš„æ•ˆæœéƒ½éå¸¸å¥½ã€‚å…³é”®æ˜¯è¿™ä¸ªç®—æ³•é€Ÿåº¦å¾ˆå¿«ï¼Œåœ¨2.6GHZçš„CPUä¸Šè¾¾åˆ°16fpsï¼Œåœ¨Nvidia Titanè¾¾åˆ°99fpsã€‚</p><h4 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h4><p>æœ¬æ–‡ä½¿ç”¨ä¸€ç§çº§è”çš„ç»“æ„è¿›è¡Œäººè„¸æ£€æµ‹å’Œç‰¹å¾ç‚¹æ£€æµ‹ï¼Œè¯¥æ–¹æ³•é€Ÿåº¦å¿«æ•ˆæœå¥½ï¼Œå¯ä»¥è€ƒè™‘åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨ã€‚è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ä¸€ç§ç”±ç²—åˆ°ç»†çš„æ–¹æ³•ï¼Œå’ŒViola-Jonesçš„çº§è”AdaBoostæ€è·¯ç›¸ä¼¼ã€‚</p><p>ç±»ä¼¼äºViola-Jonesï¼š1ã€å¦‚ä½•é€‰æ‹©å¾…æ£€æµ‹åŒºåŸŸï¼šå›¾åƒé‡‘å­—å¡”+P-Netï¼›2ã€å¦‚ä½•æå–ç›®æ ‡ç‰¹å¾ï¼šCNNï¼›3ã€å¦‚ä½•åˆ¤æ–­æ˜¯ä¸æ˜¯æŒ‡å®šç›®æ ‡ï¼šçº§è”åˆ¤æ–­ã€‚</p><h4 id="5-è®­ç»ƒæµç¨‹"><a href="#5-è®­ç»ƒæµç¨‹" class="headerlink" title="5. è®­ç»ƒæµç¨‹"></a>5. è®­ç»ƒæµç¨‹</h4><p>ç¬¬ä¸€é˜¶æ®µï¼šé¦–å…ˆå¯¹åŸå›¾ç‰‡æ„å»ºä¸€ä¸ªé‡‘å­—å¡”ï¼Œå¯¹ä¸åŒå°ºå¯¸çš„å›¾ç‰‡è°ƒæ•´åˆ°12x12è¾“å…¥åˆ°PNet(Propossal)ä¸­ï¼ŒPNetä¼šè¿”å›è¯¸å¤šçš„Bboxï¼Œåˆ©ç”¨nmsé€‰å–åˆé€‚çš„Bboxã€‚</p><p>ç¬¬äºŒé˜¶æ®µï¼Œç”±PNetå¾—å‡ºçš„å€™é€‰æ¡†è¾“é€ç»™RNet(Refine)ï¼Œ RNetä¼šå¯¹ç›¸åº”çš„Bboxè¿›è¡Œç²¾ç»†å›å½’ï¼Œå¹¶è¿”å›ç½®ä¿¡åº¦ã€‚åˆ©ç”¨nmså¯¹ç²¾ç»†å›å½’åçš„Bboxè¿›è¡Œnmsé€‰å–ï¼Œ å¹¶èˆå¼ƒç›¸åº”çš„ç½®ä¿¡åº¦è¾ƒä½çš„äººè„¸ã€‚</p><p>ç¬¬ä¸‰é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µç›¸ä¼¼ï¼Œåªä¸è¿‡æœ€åä¼šè¿”å›ç›¸åº”çš„Landmarkåæ ‡ã€‚</p><p>å…·ä½“çš„è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2019/04/13/MTCNN/train_step.png" alt></p><p><strong>å…·ä½“çš„æŠ€æœ¯ç»†èŠ‚ï¼š</strong></p><p><strong>(1) å¦‚ä½•æ„é€ é‡‘å­—å¡”ï¼š</strong></p><p>å¦‚æœè¾“å…¥å›¾åƒä¸º100Ã—120, å‡è®¾è¾“å…¥å›¾åƒä¸­å­˜åœ¨ä¸€ä¸ªäººè„¸ï¼Œåˆ™å…¶ä¸­äººè„¸æœ€å°ä¸º20Ã—20ï¼Œæœ€å¤§ä¸º100Ã—100â€”â€”å¯¹åº”å›¾åƒè¾ƒçŸ­è¾¹é•¿, ä¸ºäº†å°†äººè„¸æ”¾ç¼©åˆ°12Ã—12ï¼ŒåŒæ—¶ä¿è¯ç›¸é‚»å±‚é—´ç¼©æ”¾æ¯”ç‡factor=0.709ï¼Œåˆ™é‡‘å­å¡”ä¸­å›¾åƒå°ºå¯¸ä¾æ¬¡ä¸º 60Ã—72ã€52Ã—61ã€36Ã—43ã€26Ã—31ã€18Ã—22ã€13Ã—16ï¼Œå…¶ä¸­60Ã—72å¯¹åº”æŠŠ20Ã—20çš„äººè„¸ç¼©æ”¾åˆ°12Ã—12ï¼Œ13Ã—16å¯¹åº”æŠŠ100Ã—100çš„äººè„¸ç¼©æ”¾åˆ°12Ã—12</p><pre><code class="hljs python"><span class="hljs-comment"># scales for scaling the image</span>scales = [] m = min_detection_size/min_face_sizemin_length *= m factor_count = <span class="hljs-number">0</span><span class="hljs-keyword">while</span> min_length &gt; min_detection_size:      scales.append(m*factor**factor_count)    min_length *= factor      factor_count += <span class="hljs-number">1</span></code></pre><p><strong>(2) å¦‚ä½•ç”Ÿæˆè®­ç»ƒæ•°æ®?</strong></p><p>PNet ç½‘ç»œï¼šposã€partã€neg æ˜¯éšæœºè£å‰ªå¾—åˆ°çš„å›¾åƒï¼Œlandmarkæˆªå–çš„æ˜¯å¸¦æœ‰å…³é”®ç‚¹çš„å›¾åƒã€‚å°†è¿™äº›å›¾åƒéƒ½resizeæˆ12x12 ä½œä¸ºPNetçš„è¾“å…¥ã€‚</p><p>RNetç½‘ç»œï¼šå›¾ç‰‡(é‡‘å­—å¡”ä¹‹å)ç»è¿‡PNet äº§ç”Ÿäº§ç”Ÿçš„å¤§é‡äººè„¸æ¡†ï¼Œç„¶åå°†å…¶resizeä¸º 24x24å¤§å°ä½œä¸ºRnet è¾“å…¥ã€‚</p><p>ONetç½‘ç»œï¼š å›¾ç‰‡(é‡‘å­—å¡”ä¹‹å)ç»è¿‡PNet å’Œ RNet äº§ç”Ÿçš„è¿‡æ»¤åçš„äººè„¸æ¡†ï¼Œç„¶åå°†å…¶ resize ä¸º 48x48å¤§å°ä½œä¸ºONet çš„è¾“å…¥ã€‚</p><p>æ³¨æ„ï¼š</p><ul><li>pos[IoU&gt;0.65]ã€part[0.4&lt;=IoU&lt;0.65]ã€neg[IoU&lt;0.3] </li><li>BBox å’Œ Landmark éƒ½æ˜¯éœ€è¦è¿›è¡Œå½’ä¸€åŒ–çš„</li></ul><p><strong>(2)NMSçš„åŸºæœ¬åŸç†ï¼š</strong> </p><p>éæå¤§å€¼æŠ‘åˆ¶ï¼ˆNMSï¼‰é¡¾åæ€ä¹‰å°±æ˜¯æŠ‘åˆ¶ä¸æ˜¯æå¤§å€¼çš„å…ƒç´ ï¼Œæœç´¢å±€éƒ¨çš„æå¤§å€¼ã€‚</p><ul><li>å°†æ‰€æœ‰æ¡†çš„å¾—åˆ†é™åºæ’åˆ—ï¼Œé€‰ä¸­æœ€é«˜åˆ†åŠå…¶å¯¹åº”çš„æ¡†ã€‚</li><li>éå†å…¶ä½™çš„æ¡†ï¼Œå¦‚æœå’Œå½“å‰æœ€é«˜åˆ†æ¡†çš„é‡å é¢ç§¯(IOU)å¤§äºä¸€å®šé˜ˆå€¼ï¼Œæˆ‘ä»¬å°±å°†æ¡†åˆ é™¤ã€‚</li><li>ä»æœªå¤„ç†çš„æ¡†ä¸­ç»§ç»­é€‰ä¸€ä¸ªå¾—åˆ†æœ€é«˜çš„ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚</li></ul><pre><code class="hljs python"><span class="hljs-comment"># nms python cpu å®ç°</span><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">py_cpu_nms</span>(<span class="hljs-params">dets, thresh</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;Pure Python NMS baseline.&quot;&quot;&quot;</span>    x1 = dets[:, <span class="hljs-number">0</span>]    y1 = dets[:, <span class="hljs-number">1</span>]    x2 = dets[:, <span class="hljs-number">2</span>]    y2 = dets[:, <span class="hljs-number">3</span>]    scores = dets[:, <span class="hljs-number">4</span>]    areas = (x2 - x1 + <span class="hljs-number">1</span>) * (y2 - y1 + <span class="hljs-number">1</span>)    order = scores.argsort()[::<span class="hljs-number">-1</span>]    keep = []    <span class="hljs-keyword">while</span> order.size &gt; <span class="hljs-number">0</span>:        i = order[<span class="hljs-number">0</span>]        keep.append(i)        xx1 = np.maximum(x1[i], x1[order[<span class="hljs-number">1</span>:]])        yy1 = np.maximum(y1[i], y1[order[<span class="hljs-number">1</span>:]])        xx2 = np.minimum(x2[i], x2[order[<span class="hljs-number">1</span>:]])        yy2 = np.minimum(y2[i], y2[order[<span class="hljs-number">1</span>:]])        w = np.maximum(<span class="hljs-number">0.0</span>, xx2 - xx1 + <span class="hljs-number">1</span>)        h = np.maximum(<span class="hljs-number">0.0</span>, yy2 - yy1 + <span class="hljs-number">1</span>)        inter = w * h        ovr = inter / (areas[i] + areas[order[<span class="hljs-number">1</span>:]] - inter)        inds = np.where(ovr &lt;= thresh)[<span class="hljs-number">0</span>]        order = order[inds + <span class="hljs-number">1</span>]    <span class="hljs-keyword">return</span> keep</code></pre><p><strong>ï¼ˆ3ï¼‰ä¸‰ä¸ªä»»åŠ¡çš„æŸå¤±æ˜¯ä»€ä¹ˆï¼Ÿå‡½æ•°å¦‚ä½•å¹³è¡¡ï¼Ÿ</strong></p><p>ç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯åˆ†ç±»ä»»åŠ¡ï¼šå…¶æŸå¤±å‡½æ•°ä¸ºäº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚ç¬¬äºŒä¸ªä»»åŠ¡å’Œç¬¬ä¸‰ä¸ªä»»åŠ¡å‡æ˜¯å›å½’ä»»åŠ¡ï¼Œå…¶æŸå¤±æ˜¯å¹³æ–¹å‡å·®æŸå¤±å‡½æ•°ã€‚é€šè¿‡åŠ æƒ $\alpha$ æ¥å¹³è¡¡ä¸‰ä¸ªä»»åŠ¡çš„æƒé‡ï¼šåœ¨ P-Net å’Œ R-Net ä¸­ï¼Œ$\alpha<em>{det}=1$, $\alpha</em>{box}=0.5$, $\alpha<em>{landmark}=0.5$ï¼Œåœ¨O-Netä¸­ï¼Œ$\alpha</em>{det}=1$, $\alpha<em>{box}=0.5$, $\alpha</em>{landmark}=1$</p><p><strong>ï¼ˆ4ï¼‰è®ºæ–‡çš„ä¸»è¦åˆ›æ–°ç‚¹ï¼Ÿ å°½é‡ç®€å•æ¦‚æ‹¬</strong></p><p>â€‹    é€šè¿‡çº§è”ä¸‰ä¸ªå·ç§¯ç¥ç»ç½‘ç»œæ¥å®ç°äººè„¸çš„æ£€æµ‹å’ŒLandmarkå®šä½ã€‚å¦å¤–æœ¬æ–‡ä¹Ÿæå‡ºäº†ä¸€ç§online hard sample miningæ–¹æ³•ï¼Œå…·ä½“å°±æ˜¯åœ¨æ¯ä¸ªmini-batchä¸­ï¼Œå–lossæœ€å¤§çš„70%è¿›è¡Œåå‘ä¼ æ’­ï¼Œå¿½ç•¥é‚£äº›ç®€å•çš„æ ·æœ¬ã€‚</p><p><strong>ï¼ˆ5ï¼‰æœ‰ä»€ä¹ˆæ”¹è¿›æªæ–½ï¼Ÿ</strong></p><ul><li>èå…¥ anchoræœºåˆ¶ï¼Œ åŒæ—¶å¯ä»¥ä¿®æ”¹æŸå¤±å‡½æ•°ä¸º focal loss</li><li>åŠ å¤§æ•°æ®å¢å¼ºæ–¹æ³•</li><li>bnå±‚ã€leakey relu/prelu</li><li>æ¨¡ä»¿shufflenetã€mobilenetè¿›è¡Œæ”¹è¿›æé«˜é€Ÿåº¦</li></ul>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>faceã€MTCNN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Classification_neural_network</title>
    <link href="/2019/04/13/Classification-neural-network/"/>
    <url>/2019/04/13/Classification-neural-network/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦æ¢³ç†äº†å››ç§ä¸»è¦å¸¸è§çš„åˆ†ç±»ç½‘ç»œ alexnetã€vggã€inceptionã€resnetã€‚</p><a id="more"></a><h3 id="ä¸€-è¾ƒä¸ºåŸºç¡€çš„åˆ†ç±»ç½‘ç»œ"><a href="#ä¸€-è¾ƒä¸ºåŸºç¡€çš„åˆ†ç±»ç½‘ç»œ" class="headerlink" title="ä¸€. è¾ƒä¸ºåŸºç¡€çš„åˆ†ç±»ç½‘ç»œ"></a>ä¸€. è¾ƒä¸ºåŸºç¡€çš„åˆ†ç±»ç½‘ç»œ</h3><h4 id="1-Alexnet"><a href="#1-Alexnet" class="headerlink" title="1. Alexnet"></a>1. Alexnet</h4><p>Alexnet å°† LeNet çš„æ€æƒ³å‘æ‰¬å…‰å¤§ï¼ŒæŠŠCNN çš„åŸºæœ¬åŸç†åº”ç”¨åˆ°äº†å¾ˆæ·±å¾ˆå®½çš„ç½‘ç»œä¸­ã€‚</p><p>AlexNet ä¸»è¦ç”¨åˆ°çš„æ–°æŠ€æœ¯ç‚¹å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰ æˆåŠŸ<strong>ä½¿ç”¨ReLUä½œä¸ºCNN çš„æ¿€æ´»å‡½æ•°</strong>ï¼Œå¹¶éªŒè¯å…¶æ•ˆæœåœ¨è¾ƒæ·±çš„ç½‘ç»œè¶…è¿‡ Sigmoidï¼Œ æˆåŠŸè§£å†³äº†Sigmoidåœ¨ç½‘ç»œè¾ƒæ·±æ—¶çš„æ¢¯åº¦å¼¥æ•£é—®é¢˜ã€‚</p><p>ï¼ˆ2ï¼‰ è®­ç»ƒæ—¶<strong>ä½¿ç”¨Dropoutéšæœºå¿½ç•¥ä¸€éƒ¨åˆ†ç¥ç»å…ƒï¼Œä»¥é¿å…è¿‡æ‹Ÿåˆ</strong>ã€‚</p><p>ï¼ˆ3ï¼‰åœ¨CNNä¸­<strong>ä½¿ç”¨é‡å çš„æœ€å¤§æ± åŒ–</strong>ã€‚æ­¤å‰CNN ä¸­æ™®éé‡‡ç”¨å¹³å‡æ± åŒ–,AlexNet å…¨éƒ¨ä½¿ç”¨æœ€å¤§æ± åŒ–ï¼Œé¿å…å¹³å‡æ± åŒ–çš„æ¨¡ç³ŠåŒ–æ•ˆæœã€‚å¹¶ä¸” AlexNet ä¸­æå‡ºè®©æ­¥é•¿æ¯”æ± åŒ–æ ¸çš„å°ºå¯¸å°ï¼Œè¿™æ ·æ± åŒ–å±‚çš„è¾“å‡ºä¹‹é—´æœ‰é‡å å’Œè¦†ç›–ï¼Œæé«˜äº†ç‰¹å¾çš„ä¸°å¯Œæ€§ã€‚</p><p>ï¼ˆ4ï¼‰æå‡º<strong>LRNå±‚ï¼Œå¯¹å±€éƒ¨ç¥ç»å…ƒçš„æ´»åŠ¨åˆ›å»ºç«äº‰æœºåˆ¶</strong>ï¼Œä½¿å¾—å…¶ä¸­å“åº”æ¯”è¾ƒå¤§çš„å€¼å˜å¾—ç›¸å¯¹æ›´å¤§ï¼Œå¹¶æŠ‘åˆ¶å…¶ä»–åé¦ˆè¾ƒå°çš„ç¥ç»å…ƒï¼Œå¢å¼ºæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><p>ï¼ˆ5ï¼‰ <strong>ä½¿ç”¨CUDAåŠ é€Ÿæ·±åº¦å·ç§¯ç½‘ç»œçš„è®­ç»ƒ</strong>ï¼Œåˆ©ç”¨GPUå¼ºå¤§çš„å¹¶è¡Œèƒ½åŠ›ï¼Œå¤„ç†ç¥ç»ç½‘ç»œè®­ç»ƒæ—¶å¤§é‡çš„çŸ©é˜µè¿ç®—ã€‚</p><p>ï¼ˆ6ï¼‰<strong>æ•°æ®å¢å¼º</strong>ï¼Œéšæœºåœ°ä» 256 x 256 çš„åŸå§‹å›¾åƒä¸­æˆªå– 224 x 224 å¤§å°çš„åŒºåŸŸï¼ˆä»¥åŠæ°´å¹³ç¿»è½¬çš„é•œåƒï¼‰ç›¸å½“äºå¢åŠ äº†(256-224)^2 * 2 = 2048 å€çš„æ•°æ®é‡ã€‚å¤§å¤§å‡è½»äº†æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œæå‡æ³›åŒ–èƒ½åŠ›ã€‚åŒæ—¶ AlexNet è®ºæ–‡ä¸­æåˆ°äº†ä¼šå¯¹å›¾åƒçš„RGB æ•°æ®è¿›è¡ŒPCA å¤„ç†ï¼Œå¹¶å¯¹ä¸»æˆåˆ†åšä¸€ä¸ªæ ‡å‡†å·®ä¸º0.1çš„é«˜æ–¯æ‰°åŠ¨ï¼Œ å¢åŠ ä¸€äº›å™ªå£°ã€‚</p><p><img src="/2019/04/13/Classification-neural-network/Alexnet.png" style="zoom:35%;"></p><h4 id="2-VGGNet"><a href="#2-VGGNet" class="headerlink" title="2. VGGNet"></a>2. VGGNet</h4><p><strong>VGGNetæ¢ç´¢äº†å·ç§¯ç¥ç»ç½‘ç»œçš„æ·±åº¦ä¸å…¶æ€§èƒ½ä¹‹é—´çš„å…³ç³»ï¼Œé€šè¿‡åå¤å †å 3x3çš„å°å‹å·ç§¯æ ¸å’Œ2x2 çš„æœ€å¤§æ± åŒ–å±‚ï¼Œ VGGnetæˆåŠŸæ„ç­‘äº†16~19å±‚æ·±çš„å·ç§¯ç¥ç»ç½‘ç»œ</strong>ã€‚</p><p>ï¼ˆ1ï¼‰<strong>é€šè¿‡å°†å¤šä¸ªå·ç§¯å±‚å †å åœ¨ä¸€èµ·ï¼Œå¯ä»¥å‡å°‘å‚æ•°æ•°ç›®çš„åŒæ—¶å¢åŠ å·ç§¯å±‚çš„éçº¿æ€§å˜æ¢ï¼Œä½¿å¾—CNN å¯¹ç‰¹å¾çš„å­¦ä¹ èƒ½åŠ›æ›´å¼º</strong>ã€‚</p><p>ï¼ˆ2ï¼‰VGGNet åœ¨è®­ç»ƒæ—¶æœ‰ä¸ªå°æŠ€å·§ï¼Œå…ˆè®­ç»ƒçº§åˆ«A çš„ç®€å•ç½‘ç»œï¼Œå†å¤ç”¨Aç½‘ç»œçš„æƒé‡æ¥åˆå§‹åŒ–åé¢å‡ ä¸ªå¤æ‚æ¨¡å‹ï¼Œè¿™æ ·è®­ç»ƒæ”¶æ•›çš„é€Ÿåº¦æ›´å¿«ã€‚</p><p>ï¼ˆ3ï¼‰åœ¨æµ‹è¯•ï¼ŒVGG é‡‡ç”¨äº† Multi-Scale çš„æ–¹æ³•ï¼Œå°† å›¾åƒscaleåˆ°ä¸€ä¸ªå°ºå¯¸Qï¼Œ å¹¶å°†å›¾ç‰‡è¾“å…¥å·ç§¯ç½‘ç»œè¿ç®—ã€‚å†å°†ä¸åŒå°ºå¯¸Qçš„ç»“æœå¹³å‡å¾—åˆ°æœ€åç»“æœï¼Œè¿™æ ·æé«˜å›¾ç‰‡æ•°æ®çš„åˆ©ç”¨ç‡å¹¶æå‡å‡†ç¡®ç‡ã€‚åŒæ—¶åœ¨è®­ç»ƒä¸­è¿˜æ˜¯ç”¨äº†Multi-Scale çš„æ–¹æ³•åšæ•°æ®å¢å¼ºã€‚</p><p><img src="/2019/04/13/Classification-neural-network/vgg.jpg" style="zoom:50%;"></p><h4 id="3-Google-Inception-Net"><a href="#3-Google-Inception-Net" class="headerlink" title="3. Google Inception Net"></a>3. Google Inception Net</h4><p>ï¼ˆ1ï¼‰<strong>ç²¾å¿ƒè®¾è®¡äº† Inception Moduleæé«˜å‚æ•°çš„åˆ©ç”¨æ•ˆç‡ï¼Œå…¶ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼ŒInception Moduleä¸­åŒ…å«3ç§ä¸åŒå°ºå¯¸çš„å·ç§¯æ ¸1ä¸ªæœ€å¤§æ± åŒ–ï¼Œå¢åŠ äº†ç½‘ç»œå¯¹ä¸åŒå°ºåº¦çš„é€‚åº”æ€§</strong>ã€‚</p><p>ç¬¬ä¸€ä¸ªåˆ†æ”¯å¯¹è¾“å…¥è¿›è¡Œ 1x1å·ç§¯ï¼Œ<strong>1x1å·ç§¯å¯ä»¥è·¨é€šé“ç»„ç»‡ä¿¡æ¯ï¼Œæé«˜ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ï¼ŒåŒæ—¶å¯ä»¥å¯¹è¾“å‡ºé€šé“å‡ç»´å’Œé™ç»´</strong>ã€‚</p><p>ç¬¬äºŒä¸ªåˆ†æ”¯å…ˆä½¿ç”¨äº† 1x1 å·ç§¯ï¼Œç„¶åè¿æ¥ 3x3 å·ç§¯ï¼Œç›¸å½“äºè¿›è¡Œä¸¤æ¬¡ç‰¹å¾å˜æ¢ã€‚</p><p>ç¬¬ä¸‰ä¸ªåˆ†æ”¯å’Œç¬¬äºŒä¸ªåˆ†æ”¯ç±»ä¼¼ï¼Œå…ˆæ˜¯ä½¿ç”¨äº†1x1 çš„å·ç§¯ï¼Œç„¶åè¿æ¥ 5x5 çš„å·ç§¯ã€‚</p><p>æœ€åä¸€ä¸ªåˆ†æ”¯åˆ™æ˜¯3x3 æœ€å¤§æ± åŒ–åç›´æ¥ä½¿ç”¨1x1å·ç§¯ã€‚</p><p>Inception Module çš„4ä¸ªåˆ†æ”¯åœ¨æœ€åé€šè¿‡ä¸€ä¸ªèšåˆæ“ä½œåˆå¹¶ï¼ˆå†è¾“å‡ºé€šé“è¿™ä¸ªç»´åº¦ä¸Šèšåˆï¼‰</p><p><img src="/2019/04/13/Classification-neural-network/inception.png" alt="img" style="zoom:50%;"></p><p>ï¼ˆ2ï¼‰ <strong>å»é™¤äº†æœ€åçš„å…¨è¿æ¥å±‚ï¼Œç”¨å…¨å±€å¹³å‡æ± åŒ–å±‚æ¥å–ä»£å®ƒ</strong>ã€‚</p><h4 id="4-ResNet"><a href="#4-ResNet" class="headerlink" title="4. ResNet"></a>4. ResNet</h4><p>â€‹    <strong>ResNet é€šè¿‡è°ƒæ•´ç½‘ç»œç»“æ„æ¥è§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</strong>ï¼ˆåå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦å°†æ¶‰åŠå¤šå±‚å‚æ•°çš„äº¤å‰ç›¸ä¹˜ï¼Œå¯èƒ½ä¼šåœ¨ç¦»è¾“å…¥è¿‘çš„ç½‘ç»œå±‚ä¸­äº§ç”Ÿæ¢¯åº¦æ¶ˆå¤±çš„ç°è±¡ï¼‰ã€‚é¦–å…ˆè€ƒè™‘ä¸¤å±‚ç¥ç»ç½‘ç»œçš„ç®€å•å åŠ ï¼Œè¿™æ—¶  x ç»è¿‡ä¸¤ä¸ªç½‘ç»œå±‚çš„å˜æ¢å¾—åˆ°H(x),  æ¿€æ´»å‡½æ•°é‡‡ç”¨ ReLUï¼Œ å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ—¢ç„¶ç¦»è¾“å…¥è¿‘çš„ç¥ç»ç½‘ç»œå±‚è¾ƒéš¾è®­ç»ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†å®ƒçŸ­æ¥åˆ°æ›´é è¿‘è¾“å‡ºçš„å±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¾“å…¥  ç»è¿‡ä¸¤ä¸ªç¥ç»ç½‘ç»œå˜æ¢å¾—åˆ°F(x) , åŒæ—¶ä¹ŸçŸ­æ¥åˆ°ä¸¤å±‚ä¹‹åï¼Œæœ€åè¿™ä¸ªåŒ…å«ä¸¤å±‚çš„ç¥ç»ç½‘ç»œæ¨¡å—è¾“å‡ºH(x) = F(x) + x ã€‚è¿™æ ·ä¸€æ¥ï¼ŒF(x) è¢«è®¾è®¡ä¸ºåªéœ€è¦æ‹Ÿåˆè¾“å…¥xä¸ç›®æ ‡è¾“å…¥H(x)çš„æ®‹å·®H(x)-x ï¼Œ æ®‹å·®ç½‘ç»œçš„åç§°ä¹Ÿå› æ­¤è€Œæ¥ã€‚å¦‚æœæŸä¸€å±‚çš„è¾“å‡ºå·²ç»è¾ƒå¥½çš„æ‹Ÿåˆäº†æœŸæœ›ç»“æœï¼Œé‚£ä¹ˆå¤šåŠ å…¥ä¸€å±‚ä¹Ÿä¸ä¼šä½¿å¾—æ¨¡å‹å˜å¾—æ›´å·®ï¼Œå› ä¸ºè¯¥å±‚çš„è¾“å‡ºå°†ç›´æ¥çŸ­æ¥åˆ°ä¸¤å±‚ä¹‹åï¼Œç›¸å½“äºç›´æ¥å­¦ä¹ äº†ä¸€ä¸ªæ’ç­‰æ˜ å°„ï¼Œè€Œè·³è¿‡çš„ä¸¤å±‚åªéœ€è¦æ‹Ÿåˆä¸Šå±‚è¾“å‡ºå’Œç›®æ ‡ä¹‹é—´çš„æ®‹å·®å³å¯ã€‚</p><p><img src="/2019/04/13/Classification-neural-network/resnet.png" alt="img" style="zoom:70%;"></p><pre><code class="hljs python"><span class="hljs-comment"># resnet basicblock</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BasicBlock</span>(<span class="hljs-params">nn.Module</span>):</span>    expansion = <span class="hljs-number">1</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, inplanes, planes, stride=<span class="hljs-number">1</span>, downsample=None, groups=<span class="hljs-number">1</span>,</span></span><span class="hljs-function"><span class="hljs-params">                 base_width=<span class="hljs-number">64</span>, norm_layer=None</span>):</span>        super(BasicBlock, self).__init__()        <span class="hljs-keyword">if</span> norm_layer <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:            norm_layer = nn.BatchNorm2d        <span class="hljs-keyword">if</span> groups != <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> base_width != <span class="hljs-number">64</span>:            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;BasicBlock only supports groups=1 and base_width=64&#x27;</span>)        <span class="hljs-comment"># Both self.conv1 and self.downsample layers downsample the input when stride != 1</span>        self.conv1 = conv3x3(inplanes, planes, stride)        self.bn1 = norm_layer(planes)        self.relu = nn.ReLU(inplace=<span class="hljs-literal">True</span>)        self.conv2 = conv3x3(planes, planes)        self.bn2 = norm_layer(planes)        self.downsample = downsample        self.stride = stride    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>        identity = x        out = self.conv1(x)        out = self.bn1(out)        out = self.relu(out)        out = self.conv2(out)        out = self.bn2(out)        <span class="hljs-keyword">if</span> self.downsample <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:            identity = self.downsample(x)        out += identity        out = self.relu(out)        <span class="hljs-keyword">return</span> out</code></pre><h4 id="äºŒã€ç®€è¿°-Inception-V1-V4-ç½‘ç»œ-ğŸŒŸ"><a href="#äºŒã€ç®€è¿°-Inception-V1-V4-ç½‘ç»œ-ğŸŒŸ" class="headerlink" title="äºŒã€ç®€è¿° Inception V1 - V4 ç½‘ç»œ? ğŸŒŸ"></a>äºŒã€ç®€è¿° Inception V1 - V4 ç½‘ç»œ? <strong>ğŸŒŸ</strong></h4><p><strong>Inception V1(GoogLeNet)</strong> <strong>ç²¾å¿ƒè®¾è®¡äº† Inception Module æ¥æé«˜å‚æ•°çš„åˆ©ç”¨æ•ˆç‡</strong>ï¼Œè¯¥æ¨¡å—åŒ…å«3ç§ä¸åŒå°ºå¯¸çš„å·ç§¯æ ¸1ä¸ªæœ€å¤§æ± åŒ–ï¼Œå¢åŠ äº†ç½‘ç»œå¯¹ä¸åŒå°ºåº¦çš„é€‚åº”æ€§ã€‚(<strong>1x1convã€1x1conv+3x3convã€1x1conv+5x5convã€3x3pool+1x1conv</strong>)</p><p><strong>Inception V2</strong> æå‡ºæ¥ <strong>Batch Normalization</strong>,  ç”¨æ¥åŠ é€Ÿç½‘ç»œæ”¶æ•›ã€‚</p><p><strong>Inception v3</strong> æ”¹è¿›äº† Inception Moduleï¼Œ <strong>å°†å¤§å·ç§¯åˆ†è§£ä¸ºå¯¹ç§°çš„å †å å°å·ç§¯(VGG)</strong>, <strong>æŠŠn*nçš„å·ç§¯æ ¸æ›¿æ¢æˆ1*nå’Œn*1çš„å †å å·ç§¯æ ¸</strong>ï¼Œåœ¨é™ä½è¿ç®—é‡çš„åŒæ—¶å¢åŠ ç½‘ç»œçš„éçº¿æ€§ï¼Œå‡å°‘è¿‡æ‹Ÿåˆã€‚</p><p><strong>Inception v4</strong> å®é™…ä¸Šæ˜¯ <strong>inception + resnet</strong>ã€‚</p><pre><code class="hljs python"><span class="hljs-comment"># Inception </span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Inception</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, in_channels, ch1x1, ch3x3red, ch3x3, ch5x5red, ch5x5, pool_proj</span>):</span>        super(Inception, self).__init__()        self.branch1 = BasicConv2d(in_channels, ch1x1, kernel_size=<span class="hljs-number">1</span>)        self.branch2 = nn.Sequential(            BasicConv2d(in_channels, ch3x3red, kernel_size=<span class="hljs-number">1</span>),            BasicConv2d(ch3x3red, ch3x3, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>)        )        self.branch3 = nn.Sequential(            BasicConv2d(in_channels, ch5x5red, kernel_size=<span class="hljs-number">1</span>),            BasicConv2d(ch5x5red, ch5x5, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>)        )        self.branch4 = nn.Sequential(            nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">1</span>, ceil_mode=<span class="hljs-literal">True</span>),            BasicConv2d(in_channels, pool_proj, kernel_size=<span class="hljs-number">1</span>)        )    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>        branch1 = self.branch1(x)        branch2 = self.branch2(x)        branch3 = self.branch3(x)        branch4 = self.branch4(x)        outputs = [branch1, branch2, branch3, branch4]        <span class="hljs-keyword">return</span> torch.cat(outputs, <span class="hljs-number">1</span>)</code></pre><h3 id="ä¸‰-å…·ä½“é˜è¿°ä¸€ä¸‹ä½ çŸ¥é“çš„resnetçš„ç›¸å…³å˜ç§"><a href="#ä¸‰-å…·ä½“é˜è¿°ä¸€ä¸‹ä½ çŸ¥é“çš„resnetçš„ç›¸å…³å˜ç§" class="headerlink" title="ä¸‰. å…·ä½“é˜è¿°ä¸€ä¸‹ä½ çŸ¥é“çš„resnetçš„ç›¸å…³å˜ç§ ?"></a>ä¸‰. å…·ä½“é˜è¿°ä¸€ä¸‹ä½ çŸ¥é“çš„resnetçš„ç›¸å…³å˜ç§ ?</h3><h5 id="1-resnetv2"><a href="#1-resnetv2" class="headerlink" title="1. resnetv2"></a>1. resnetv2</h5><ul><li><p>å°†æ¿€æ´»å‡½æ•°æ”¾ç½®åœ¨æ—è·¯ä¸­, short-cut æ„å»º clean information path</p></li><li><p>æ—è·¯ä¸­çš„ç»“æ„ä» <strong>conv-bn-relu</strong> è½¬æ¢ä¸º <strong>bn-relu-conv</strong></p></li></ul><p><img src="/2019/04/13/Classification-neural-network/18.png" style="zoom:30%;"></p><h5 id="2-resnext"><a href="#2-resnext" class="headerlink" title="2. resnext"></a>2. resnext</h5><p>â€‹        å€Ÿé‰´äº† Inception split-transform-merge çš„æ¨¡å¼ï¼Œ å°†å•è·¯å·ç§¯å˜æˆå¤šä¸ªæ”¯è·¯çš„å¤šè·¯å·ç§¯ï¼Œä¸è¿‡åˆ†ç»„ç»“æ„ä¸€è‡´ï¼Œè¿›è¡Œåˆ†ç»„å·ç§¯ã€‚</p><p><img src="/2019/04/13/Classification-neural-network/20.png" style="zoom:30%;"></p><h5 id="3-SENet"><a href="#3-SENet" class="headerlink" title="3. SENet"></a>3. SENet</h5><p>â€‹        é‡‡ç”¨äº†ä¸€ç§å…¨æ–°çš„<strong>ã€Œç‰¹å¾é‡æ ‡å®šã€</strong>çš„ç­–ç•¥ã€‚å…·ä½“æ¥è¯´ï¼Œ<strong>å°±æ˜¯é€šè¿‡å­¦ä¹ çš„æ–¹å¼æ¥è‡ªåŠ¨è·å–åˆ°æ¯ä¸ªç‰¹å¾é€šé“çš„é‡è¦ç¨‹åº¦ï¼Œç„¶åä¾ç…§è¿™ä¸ªé‡è¦ç¨‹åº¦å»æå‡æœ‰ç”¨çš„ç‰¹å¾å¹¶æŠ‘åˆ¶å¯¹å½“å‰ä»»åŠ¡ç”¨å¤„ä¸å¤§çš„ç‰¹å¾ã€‚</strong></p><p><img src="/2019/04/13/Classification-neural-network/6.png" style="zoom:70%;"></p><h5 id="4-Densenet"><a href="#4-Densenet" class="headerlink" title="4. Densenet"></a>4. Densenet</h5><p>â€‹    DenseNet çš„ç›®æ ‡æ˜¯æå‡ç½‘ç»œå±‚çº§é—´ä¿¡æ¯æµä¸æ¢¯åº¦æµçš„æ•ˆç‡ï¼Œå¹¶æé«˜å‚æ•°æ•ˆç‡ã€‚å®ƒä¹Ÿå¦‚åŒ ResNeté‚£æ ·è¿æ¥å‰å±‚ç‰¹å¾å›¾ä¸åå±‚ç‰¹å¾å›¾ï¼Œä½† DenseNet å¹¶ä¸ä¼šåƒ ResNet é‚£æ ·å¯¹ä¸¤ä¸ªç‰¹å¾å›¾æ±‚å’Œï¼Œè€Œæ˜¯ç›´æ¥å°†ç‰¹å¾å›¾æŒ‰æ·±åº¦ç›¸äº’æ‹¼æ¥åœ¨ä¸€èµ·ã€‚DenseNetæœ€å¤§çš„ç‰¹ç‚¹å³<strong>æ¯ä¸€å±‚çš„è¾“å‡ºéƒ½ä¼šä½œä¸ºåé¢æ‰€æœ‰å±‚çš„è¾“å…¥ï¼Œè¿™æ ·æœ€åä¸€å±‚å°†æ‹¼æ¥å‰é¢æ‰€æœ‰å±‚çº§çš„è¾“å‡ºç‰¹å¾å›¾ã€‚è¿™ç§ç»“æ„ç¡®ä¿äº†æ¯ä¸€å±‚èƒ½ä»æŸå¤±å‡½æ•°ç›´æ¥è®¿é—®åˆ°æ¢¯åº¦ï¼Œå› æ­¤å¯ä»¥è®­ç»ƒéå¸¸æ·±çš„ç½‘ç»œ</strong>ã€‚</p><h5 id="5-res2net"><a href="#5-res2net" class="headerlink" title="5. res2net"></a>5. res2net</h5><h5 id="Paper-Res2Net-A-New-Multi-scale-Backbone-Architecture"><a href="#Paper-Res2Net-A-New-Multi-scale-Backbone-Architecture" class="headerlink" title="Paper:  Res2Net: A New Multi-scale Backbone Architecture"></a>Paper:  Res2Net: A New Multi-scale Backbone Architecture</h5><h5 id="Methods"><a href="#Methods" class="headerlink" title="Methods:"></a>Methods:</h5><p>ä½œè€…æå‡ºäº†ä¸€ç§åœ¨æ›´åŠ ç»†ç²’åº¦ (å·ç§¯å±‚) çš„å±‚é¢æå‡å¤šå°ºåº¦è¡¨è¾¾èƒ½åŠ›ã€‚å…¶åŸºæœ¬ç»“æ„å¦‚ä¸‹å›¾(b) æ‰€ç¤ºï¼š</p><p><img src="/Users/zhichaozhao/Documents/hexo-blog/source/_posts/recent-convolutions/3.png" alt></p><p>ä¼ ç»Ÿçš„resnetç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½œè€…åœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ï¼Œåœ¨ä¸å¢åŠ è®¡ç®—é‡çš„åŒæ—¶ï¼Œä½¿å…¶å…·å¤‡æ›´å¼ºçš„å¤šå°ºåº¦æå–èƒ½åŠ›ã€‚å¦‚ä¸Šå›¾ï¼ˆbï¼‰æ‰€ç¤ºï¼Œä½œè€…é‡‡ç”¨äº†æ›´å°çš„å·ç§¯ç»„æ¥æ›¿ä»£ bottleneck block é‡Œé¢çš„ 3x3 å·ç§¯ã€‚å…·ä½“æ“ä½œä¸ºï¼š</p><ul><li>é¦–å…ˆå°† 1x1 å·ç§¯åçš„ç‰¹å¾å›¾å‡åˆ†ä¸º s ä¸ªç‰¹å¾å›¾å­é›†ã€‚æ¯ä¸ªç‰¹å¾å›¾å­é›†çš„å¤§å°ç›¸åŒï¼Œä½†æ˜¯é€šé“æ•°æ˜¯è¾“å…¥ç‰¹å¾å›¾çš„ 1/sã€‚</li><li>å¯¹æ¯ä¸€ä¸ªç‰¹å¾å›¾å­é›† $X<em>i$ï¼Œæœ‰ä¸€ä¸ªå¯¹åº”çš„ 3x3 å·ç§¯ $K_i$ , å‡è®¾ $K_i$çš„è¾“å‡ºæ˜¯ $y_i$ã€‚æ¥ä¸‹æ¥æ¯ä¸ªç‰¹å¾å›¾å­é›† $X_i $ä¼šåŠ ä¸Š $K</em>{i-1}$ çš„è¾“å‡ºï¼Œç„¶åä¸€èµ·è¾“å…¥è¿› $K_i$ã€‚ä¸ºäº†åœ¨å¢å¤§ s çš„å€¼æ—¶å‡å°‘å‚æ•°é‡ï¼Œä½œè€…çœå»äº† $X_1$ çš„ 3x3 ç½‘ç»œã€‚å› æ­¤ï¼Œè¾“å‡º $y_i$ å¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼è¡¨ç¤ºï¼š</li></ul><script type="math/tex; mode=display">y_i = \begin{equation}\begin{cases}x_i && i=1;\\K_i(x_i+y_{i-1}) && 1 < i \leq s.\end{cases}\end{equation}</script><p>æ ¹æ®å›¾(b)ï¼Œå¯ä»¥å‘ç°æ¯ä¸€ä¸ª $X_j (j&lt;=i)$ ä¸‹çš„ 3x3 å·ç§¯å¯ä»¥åˆ©ç”¨ä¹‹å‰æ‰€æœ‰çš„ç‰¹æ€§ä¿¡æ¯ï¼Œå®ƒçš„è¾“å‡ºä¼šæœ‰æ¯” $X_j$ æ›´å¤§çš„æ„Ÿå—é‡ã€‚å› æ­¤è¿™æ ·çš„ç»„åˆå¯ä»¥ä½¿ Res2Net çš„è¾“å‡ºæœ‰æ›´å¤šæ ·çš„æ„Ÿå—é‡ä¿¡æ¯ã€‚ä¸ºäº†æ›´å¥½çš„èåˆä¸åŒå°ºåº¦çš„ä¿¡æ¯ï¼Œä½œè€…å°†å®ƒä»¬çš„è¾“å‡ºæ‹¼æ¥èµ·æ¥ï¼Œç„¶åå†é€å…¥ 1x1 å·ç§¯ï¼Œå¦‚ä¸Šå›¾ï¼ˆbï¼‰æ‰€ç¤ºã€‚</p><h3 id="å››-ä¸€äº›é—®é¢˜"><a href="#å››-ä¸€äº›é—®é¢˜" class="headerlink" title="å››. ä¸€äº›é—®é¢˜"></a>å››. ä¸€äº›é—®é¢˜</h3><ul><li>å…³äºé€šé“çš„æ±‚å’Œä¸æ‹¼æ¥ ?</li></ul><p>â€‹    (1) å¸¸è§çš„ add æ“ä½œè§äº resnet å’Œ FPNã€CPNã€‚ è€Œ concat æ“ä½œè§äº Unet å’Œ Dense netã€‚</p><p>â€‹    (2) addç­‰ä»·äºconcatä¹‹åå¯¹åº”é€šé“å…±äº«åŒä¸€ä¸ªå·ç§¯æ ¸ã€‚å½“ä¸¤è·¯è¾“å…¥å¯ä»¥å…·æœ‰â€œå¯¹åº”é€šé“çš„ç‰¹å¾å›¾è¯­ä¹‰ç±»ä¼¼â€ çš„æ€§è´¨çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨addæ¥æ›¿ä»£concatï¼Œè¿™æ ·æ›´èŠ‚çœå‚æ•°å’Œè®¡ç®—é‡ï¼ˆconcatæ˜¯addçš„2å€ï¼‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>classification</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>create user and setup security</title>
    <link href="/2019/04/12/create-user-and-setup-security/"/>
    <url>/2019/04/12/create-user-and-setup-security/</url>
    
    <content type="html"><![CDATA[<p>Letâ€™s create a new user and then setup some security.</p><h3 id="1-New-User"><a href="#1-New-User" class="headerlink" title="1. New User"></a>1. New User</h3><p>login first</p><pre><code class="hljs shell">mkdfideloper<span class="hljs-meta">#</span><span class="bash"> Create password, skip extra field and Set Y to save the new user</span></code></pre><p>Become new user fideloper</p><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo su fideloper</span></code></pre><p>Head to home directory</p><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/</code></pre><p>See the file path</p><pre><code class="hljs bash"><span class="hljs-built_in">pwd</span> <span class="hljs-comment"># /home/ubuntu</span></code></pre><h3 id="2-Setup-SSH-Key-Authentication"><a href="#2-Setup-SSH-Key-Authentication" class="headerlink" title="2 . Setup SSH Key Authentication"></a>2 . Setup SSH Key Authentication</h3><p>We can re-use the SSH key we created to allow us to log in as user root. On our Mac, we can get the public key into our clipboard again:</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> On our host (Macintosh):</span>cat ~/.ssh/id_sfh_start.pub | pbcopy</code></pre><p>Then over in the server, add that public key to user fideloperâ€™s authorized_keys file:</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Logged <span class="hljs-keyword">in</span> as user fideloper</span>cd ~mkdir .sshvim .ssh/authorized_keys <span class="hljs-meta">#</span><span class="bash"> Paste <span class="hljs-keyword">in</span> the public key </span></code></pre><h3 id="3-Disallow-Root-Login"><a href="#3-Disallow-Root-Login" class="headerlink" title="3. Disallow Root Login"></a>3. Disallow Root Login</h3><p>First, we want user fideloper to be able to use sudo commands, so we donâ€™t need the root user to perform administrative tasks.</p><pre><code class="hljs dockerfile">sudo <span class="hljs-keyword">user</span></code></pre><p>We can do this easily in Ubuntu by adding the user fideloper to the group sudo or admin (More explanation on that within the video).</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Append (-a) secondary group (-G) <span class="hljs-string">&quot;admin&quot;</span> to user <span class="hljs-string">&quot;fideloper&quot;</span></span>usermod -aG admin fideloper</code></pre><p>Then log out, and log back in as user fideloper and youâ€™ll be able to use sudocommands. Next, letâ€™s secure our server further and disallow root. </p><h4 id="Configure-SSH"><a href="#Configure-SSH" class="headerlink" title="Configure SSH"></a>Configure SSH</h4><p>Now that user fideloper can do administrative tasks (thingsrequiring super user access), letâ€™s edit the SSH daemonconfiguration to change this.</p><p>Weâ€™ll do two things:</p><ul><li><p>Disallow password based authentication</p></li><li><p>Disallow root user login</p></li></ul><p>Do to that, we update the file <code>/etc/ssh/sshd_config</code> and change the following: </p><pre><code class="hljs yaml"><span class="hljs-comment"># Disallow root login over ssh</span><span class="hljs-string">PermitRootLogin</span> <span class="hljs-literal">no</span> <span class="hljs-comment"># Disallow password authentication</span><span class="hljs-string">PasswordAuthentication</span> <span class="hljs-literal">no</span></code></pre><p> Then restart the SSH daemon: </p><pre><code class="hljs routeros">sudo<span class="hljs-built_in"> service </span>ssh restart</code></pre><p>And youâ€™re all set!</p><p><strong>reference</strong>:<a href="https://serversforhackers.com/c/creating-users-">https://serversforhackers.com/c/creating-users-</a> and-ssh-security</p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å¸¸ç”¨å¼€å‘å·¥å…·</title>
    <link href="/2019/04/10/Dev-tools/"/>
    <url>/2019/04/10/Dev-tools/</url>
    
    <content type="html"><![CDATA[<h4 id="1-Mac-å¿…å¤‡è½¯ä»¶"><a href="#1-Mac-å¿…å¤‡è½¯ä»¶" class="headerlink" title="1. Mac å¿…å¤‡è½¯ä»¶"></a>1. Mac å¿…å¤‡è½¯ä»¶</h4><p>å¿«æ·é”®æŸ¥è¯¢ï¼šcheat sheet</p><p>è½¯ä»¶å®‰è£…ä¸ä¸‹è½½ï¼šbrew</p><p>Githubï¼šGithub Desktop</p><p>å›¾ç‰‡æ ‡è®°ï¼š åœˆç‚¹</p><p>è¿œç¨‹ä¼šè®®ï¼š TeamViewer</p><p>å¾…åŠäº‹é¡¹ï¼šThings3</p><p>é˜²æ­¢å¾…æœºè½¯ä»¶ï¼š caffeine</p><p>æ–‡æ¡£/APIæŸ¥è¯¢: Dash</p><p>æŠ¤çœ¼ï¼šFlux</p><p>å½±éŸ³æ’­æ”¾ï¼šIINA</p><p>ä¸‹è½½ Motrix</p><h4 id="2-Python"><a href="#2-Python" class="headerlink" title="2. Python"></a>2. Python</h4><p>2/3ç‰ˆæœ¬ç®¡ç†: anaconda </p><p>Python ä»£ç å¯è§†åŒ–å·¥å…· yapf</p><h4 id="3-ç¬”è®°ç±»è½¯ä»¶"><a href="#3-ç¬”è®°ç±»è½¯ä»¶" class="headerlink" title="3. ç¬”è®°ç±»è½¯ä»¶"></a>3. ç¬”è®°ç±»è½¯ä»¶</h4><p>Markdownï¼šTypora</p><p>ç¬”è®°è½¯ä»¶ï¼ševernoteã€æœ‰é“äº‘ç¬”è®°</p><p>pdf é˜…è¯»ï¼šPDF Expertã€margin note3ã€adobe readerã€é¢„è§ˆ</p><p>ç¼–è¾‘å™¨ï¼š Sublime Text3ã€Visual Studio Code</p><p>è®ºæ–‡ç¼–è¾‘ï¼šLatex</p><h4 id="4-æ€ç»´å¯¼å›¾ï¼š"><a href="#4-æ€ç»´å¯¼å›¾ï¼š" class="headerlink" title="4. æ€ç»´å¯¼å›¾ï¼š"></a>4. æ€ç»´å¯¼å›¾ï¼š</h4><p>Xmind ZEN</p><p>MindNode</p><h4 id="5-chrome-æ’ä»¶"><a href="#5-chrome-æ’ä»¶" class="headerlink" title="5. chrome æ’ä»¶"></a>5. chrome æ’ä»¶</h4><p>Firshot:    ç½‘é¡µæˆªå›¾</p><p>oneTab:    å›ºå®šç½‘é¡µ</p><p>grammarly:      è¯­æ³•æ£€æµ‹</p><p>pocketï¼š   ç½‘é¡µæ”¶è—</p><p>Twitter Webï¼š  æ¨ç‰¹web</p><p>adblock Plus:   å¹¿å‘Šæ‹¦æˆª </p><p>chaZDï¼š   æŸ¥å­—å…¸</p><p>google Translate: google   ç¿»è¯‘</p><p>Tampermonkey    æ²¹çŒ´ï¼Œ æ’ä»¶ç®¡ç†</p><p>User-Agent Switcher for Chrome 1.1.0     User-Agent åˆ‡æ¢ï¼Œ ç”¨äºç™¾åº¦ä¸é™é€Ÿä¸‹è½½</p><p>SourceGraph ï¼š  github åŠ©æ‰‹</p><h4 id="6-å¼€å‘å·¥å…·"><a href="#6-å¼€å‘å·¥å…·" class="headerlink" title="6. å¼€å‘å·¥å…·"></a>6. å¼€å‘å·¥å…·</h4><p>ä»£ç æ¯”å¯¹ï¼š Beyond compare</p><p>ä»£ç é˜…è¯»ï¼šSourcetrail</p><p>åç¼–è¯‘ï¼šhopper disassembler</p><h4 id="7-å…¶ä»–"><a href="#7-å…¶ä»–" class="headerlink" title="7. å…¶ä»–"></a>7. å…¶ä»–</h4><p><strong>jupyter_contrib_nbextension</strong>: jupyter notebook æ’ä»¶</p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>FDDBæµ‹è¯„</title>
    <link href="/2019/04/06/FDDB-benchmark/"/>
    <url>/2019/04/06/FDDB-benchmark/</url>
    
    <content type="html"><![CDATA[<h4 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1. å‡†å¤‡å·¥ä½œ"></a>1. å‡†å¤‡å·¥ä½œ</h4><h5 id="ï¼ˆ1ï¼‰ä¸‹è½½-FDDB-ç›¸å…³æ–‡ä»¶"><a href="#ï¼ˆ1ï¼‰ä¸‹è½½-FDDB-ç›¸å…³æ–‡ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰ä¸‹è½½ FDDB ç›¸å…³æ–‡ä»¶"></a>ï¼ˆ1ï¼‰ä¸‹è½½ FDDB ç›¸å…³æ–‡ä»¶</h5><ul><li>ä» <a href="http://vis-www.cs.umass.edu/fddb/index.html">å®˜ç½‘</a>ä¸‹è½½ FDDB æ•°æ®é›†ï¼Œè§£å‹å¾—åˆ° <strong>originalPics</strong> æ–‡ä»¶å¤¹ï¼Œ<strong>FDDB-folds</strong> æ–‡ä»¶å¤¹å’Œ <strong>README.txt</strong> </li><li>åˆ° <a href="http://vis-www.cs.umass.edu/fddb/results.html">results é¡µé¢</a> ä¸‹è½½è¯„ä¼°ç¨‹åºï¼Œè§£å‹å¾—åˆ° evaluation æ–‡ä»¶å¤¹ã€‚</li></ul><h5 id="ï¼ˆ2ï¼‰å‡†å¤‡-txt-æ–‡ä»¶"><a href="#ï¼ˆ2ï¼‰å‡†å¤‡-txt-æ–‡ä»¶" class="headerlink" title="ï¼ˆ2ï¼‰å‡†å¤‡ .txt æ–‡ä»¶"></a>ï¼ˆ2ï¼‰å‡†å¤‡ .txt æ–‡ä»¶</h5><p>ç”¨ä½ çš„æ¨¡å‹æŒ‰ç…§ FDDB-folds/FDDB-fold-i.txt çš„é¡ºåºæ£€æµ‹å›¾ç‰‡ï¼Œç”Ÿæˆä¸ä¹‹å¯¹åº”çš„ 10 ä¸ª fold-i-out.txtï¼Œå­˜æ”¾åœ¨ out-folds æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶åˆå¹¶æˆ–å¤åˆ¶ç²˜è´´æˆ results.txtã€‚ç»“æœæ–‡ä»¶çš„æ ¼å¼éœ€è¦ä¸º </p><pre><code class="hljs tex">... image name i number of faces in this image =im face i1 face i2 ... face im ...</code></pre><h5 id="ï¼ˆ3ï¼‰å®‰è£…-OPENCVï¼ˆv3-2ï¼‰"><a href="#ï¼ˆ3ï¼‰å®‰è£…-OPENCVï¼ˆv3-2ï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰å®‰è£… OPENCVï¼ˆv3.2ï¼‰"></a>ï¼ˆ3ï¼‰å®‰è£… OPENCVï¼ˆv3.2ï¼‰</h5><h5 id="ï¼ˆ4ï¼‰å®‰è£…-gnuplot"><a href="#ï¼ˆ4ï¼‰å®‰è£…-gnuplot" class="headerlink" title="ï¼ˆ4ï¼‰å®‰è£… gnuplot"></a>ï¼ˆ4ï¼‰å®‰è£… gnuplot</h5><p>Ubuntu ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code class="hljs shell">sudo apt-get install gnuplot</code></pre><h4 id="2-ç¼–è¯‘-evalution"><a href="#2-ç¼–è¯‘-evalution" class="headerlink" title="2. ç¼–è¯‘ evalution"></a>2. ç¼–è¯‘ evalution</h4><h5 id="ï¼ˆ1ï¼‰ä¿®æ”¹Makefile-æ–‡ä»¶ï¼š"><a href="#ï¼ˆ1ï¼‰ä¿®æ”¹Makefile-æ–‡ä»¶ï¼š" class="headerlink" title="ï¼ˆ1ï¼‰ä¿®æ”¹Makefile æ–‡ä»¶ï¼š"></a>ï¼ˆ1ï¼‰ä¿®æ”¹Makefile æ–‡ä»¶ï¼š</h5><p>æ‰“å¼€evalution æ–‡ä»¶å¤¹ä¸‹çš„MakeFileï¼Œ æ·»åŠ å¦‚ä¸‹ç›¸åº”çš„è¡Œ</p><pre><code class="hljs makefile">INCS = -I/usr/local/<span class="hljs-keyword">include</span>/opencvLIBS = -L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui       -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d       -lopencv_objdetect -lopencv_contrib -lopencv_legacy<span class="hljs-comment"># å¯¹äº opencv 3.2 å»æ‰ -lopencv_contrib and -lopencv_legacy  åŠ ä¸Š -lopencv_imgcodecs</span></code></pre><p>ä¿®æ”¹å¦‚ä¸‹è¡Œï¼š</p><pre><code class="hljs gams"># evaluate: <span class="hljs-symbol">$</span>(OBJS)#        <span class="hljs-symbol">$</span>(CC) <span class="hljs-symbol">$</span>(LIBS) <span class="hljs-symbol">$</span>(OBJS) -o <span class="hljs-symbol">$</span>@evaluate: <span class="hljs-symbol">$</span>(OBJS)    <span class="hljs-symbol">$</span>(CC) <span class="hljs-symbol">$</span>(OBJS) -o <span class="hljs-symbol">$</span>@ <span class="hljs-symbol">$</span>(LIBS)</code></pre><h5 id="ï¼ˆ2ï¼‰ä¿®æ”¹-common-hpp"><a href="#ï¼ˆ2ï¼‰ä¿®æ”¹-common-hpp" class="headerlink" title="ï¼ˆ2ï¼‰ä¿®æ”¹ common.hpp"></a>ï¼ˆ2ï¼‰ä¿®æ”¹ common.hpp</h5><p>æ‰“å¼€ evaluation æ–‡ä»¶å¤¹ä¸‹çš„ common.hppï¼Œå°†</p><pre><code class="hljs cpp"><span class="hljs-comment">// #define __IMAGE_FORMAT__ &quot;.jpg&quot;</span><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> __IMAGE_FORMAT__ <span class="hljs-meta-string">&quot;.ppm&quot;</span></span><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> __CVLOADIMAGE_WORKING__</span></code></pre><p>ä¿®æ”¹ä¸ºï¼š</p><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> __IMAGE_FORMAT__ <span class="hljs-meta-string">&quot;.jpg&quot;</span></span><span class="hljs-comment">// #define __IMAGE_FORMAT__ &quot;.ppm&quot;</span><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> __CVLOADIMAGE_WORKING__</span></code></pre><h5 id="ï¼ˆ3ï¼‰ç¼–è¯‘"><a href="#ï¼ˆ3ï¼‰ç¼–è¯‘" class="headerlink" title="ï¼ˆ3ï¼‰ç¼–è¯‘"></a>ï¼ˆ3ï¼‰ç¼–è¯‘</h5><pre><code class="hljs ebnf"><span class="hljs-attribute">make</span></code></pre><p>å¦‚æœå‡ºç°é”™è¯¯ï¼š <strong>fatal error</strong>: â€˜cv.hâ€™ file not found [Mac platform]</p><p><strong>solution</strong>: æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ï¼šå°†å…¶ä¿®æ”¹ä¸º</p><pre><code class="hljs cpp"><span class="hljs-comment">// #include &quot;opencv/cv.h&quot;</span><span class="hljs-comment">// #include &quot;opencv/highgui.h&quot;</span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;opencv/cv.h&quot;</span></span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;opencv/highgui.h&quot;</span></span></code></pre><h4 id="3-è¾“å‡ºæ–‡ä»¶å¹¶ç»˜å›¾"><a href="#3-è¾“å‡ºæ–‡ä»¶å¹¶ç»˜å›¾" class="headerlink" title="3. è¾“å‡ºæ–‡ä»¶å¹¶ç»˜å›¾"></a>3. è¾“å‡ºæ–‡ä»¶å¹¶ç»˜å›¾</h4><h5 id="ï¼ˆ1ï¼‰ä¿®æ”¹-runEvaluate-pl"><a href="#ï¼ˆ1ï¼‰ä¿®æ”¹-runEvaluate-pl" class="headerlink" title="ï¼ˆ1ï¼‰ä¿®æ”¹ runEvaluate.pl"></a>ï¼ˆ1ï¼‰ä¿®æ”¹ runEvaluate.pl</h5><p>æ‰“å¼€ evaluation æ–‡ä»¶å¤¹ä¸‹çš„ runEvaluate.plï¼Œå¡«å†™è·¯å¾„å¦‚ä¸‹ï¼š</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">where</span> gnuplot is</span>my $GNUPLOT = &quot;/usr/local/bin/gnuplot&quot;;<span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">where</span> the binary is</span>my $evaluateBin = &quot;./evaluate&quot;;<span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">where</span> the images are</span>my $imDir = &quot;../originalPics/&quot;;<span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">where</span> the folds are</span>my $fddbDir = &quot;../FDDB-folds&quot;;<span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">where</span> the detections are</span>my $detDir = &quot;../results&quot;;</code></pre><p>æ³¨æ„è‹¥æ–‡ä»¶åç§°å’Œè·¯å¾„ä¸ç¬”è€… (è§ç¬¬ 2 æ­¥ä¸­çš„æˆªå›¾) ä¸åŒï¼Œéœ€è¦ç›¸åº”ä¿®æ”¹ã€‚</p><h5 id="ï¼ˆ2ï¼‰æ‰§è¡Œ-runEvaluate-pl"><a href="#ï¼ˆ2ï¼‰æ‰§è¡Œ-runEvaluate-pl" class="headerlink" title="ï¼ˆ2ï¼‰æ‰§è¡Œ runEvaluate.pl"></a>ï¼ˆ2ï¼‰æ‰§è¡Œ runEvaluate.pl</h5><pre><code class="hljs reasonml">perl runEvaluate.pl å®Œæˆååœ¨ results æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº† <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ContROC</span>.</span></span>txt, <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DiscROC</span>.</span></span>txt, <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ContROC</span>.</span></span>png å’Œ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DiscROC</span>.</span></span>png å››ä¸ªæ–‡ä»¶ã€‚</code></pre>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorch Cookbook</title>
    <link href="/2019/03/19/Pytorch-Cookbook/"/>
    <url>/2019/03/19/Pytorch-Cookbook/</url>
    
    <content type="html"><![CDATA[<p>ğŸ”¥ ä¸€äº› pytorch ç¼–ç¨‹çš„å°æŠ€å·§ã€trick å’Œ ç¤ºä¾‹ä»£ç </p><a id="more"></a><p>æœ¬æ–‡ä»£ç åŸºäºPyTorch 1.0ç‰ˆæœ¬ï¼Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹åŒ…</p><pre><code class="hljs elm"><span class="hljs-keyword">import</span> collections<span class="hljs-keyword">import</span> os<span class="hljs-keyword">import</span> shutil<span class="hljs-keyword">import</span> tqdm<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<span class="hljs-keyword">import</span> PIL.Image<span class="hljs-keyword">import</span> torch<span class="hljs-keyword">import</span> torchvision</code></pre><h3 id="1-åŸºç¡€é…ç½®"><a href="#1-åŸºç¡€é…ç½®" class="headerlink" title="1. åŸºç¡€é…ç½®"></a>1. åŸºç¡€é…ç½®</h3><h5 id="1-check-pytorch-version"><a href="#1-check-pytorch-version" class="headerlink" title="(1) check pytorch version"></a>(1) check pytorch version</h5><pre><code class="hljs python">torch.__version__               <span class="hljs-comment"># PyTorch version</span>torch.version.cuda              <span class="hljs-comment"># Corresponding CUDA version</span>torch.backends.cudnn.version()  <span class="hljs-comment"># Corresponding cuDNN version</span>torch.cuda.get_device_name(<span class="hljs-number">0</span>)   <span class="hljs-comment"># GPU type</span></code></pre><h5 id="2-update-pytorch"><a href="#2-update-pytorch" class="headerlink" title="(2) update pytorch"></a>(2) update pytorch</h5><pre><code class="hljs ebnf"><span class="hljs-attribute">conda update pytorch torchvision -c pytorch</span></code></pre><h5 id="3-random-seed-setting"><a href="#3-random-seed-setting" class="headerlink" title="(3) random seed setting"></a>(3) random seed setting</h5><pre><code class="hljs css"><span class="hljs-selector-tag">torch</span><span class="hljs-selector-class">.manual_seed</span>(0) # <span class="hljs-selector-tag">CPU</span><span class="hljs-selector-tag">torch</span><span class="hljs-selector-class">.cuda</span><span class="hljs-selector-class">.manual_seed_all</span>(0) # <span class="hljs-selector-tag">GPU</span></code></pre><h5 id="4-æŒ‡å®šç¨‹åºè¿è¡Œåœ¨ç‰¹å®šæ˜¾å¡ä¸Šï¼š"><a href="#4-æŒ‡å®šç¨‹åºè¿è¡Œåœ¨ç‰¹å®šæ˜¾å¡ä¸Šï¼š" class="headerlink" title="(4) æŒ‡å®šç¨‹åºè¿è¡Œåœ¨ç‰¹å®šæ˜¾å¡ä¸Šï¼š"></a>(4) æŒ‡å®šç¨‹åºè¿è¡Œåœ¨ç‰¹å®šæ˜¾å¡ä¸Šï¼š</h5><p>åœ¨å‘½ä»¤è¡ŒæŒ‡å®šç¯å¢ƒå˜é‡</p><pre><code class="hljs angelscript">CUDA_VISIBLE_DEVICES=<span class="hljs-number">0</span>,<span class="hljs-number">1</span> python train.py</code></pre><p>åœ¨ä»£ç ä¸­æŒ‡å®š</p><pre><code class="hljs lua"><span class="hljs-built_in">os</span>.environ[<span class="hljs-string">&#x27;CUDA_VISIBLE_DEVICES&#x27;</span>] = <span class="hljs-string">&#x27;0,1&#x27;</span></code></pre><h5 id="5-åˆ¤æ–­æ˜¯å¦æœ‰CUDAæ”¯æŒ"><a href="#5-åˆ¤æ–­æ˜¯å¦æœ‰CUDAæ”¯æŒ" class="headerlink" title="(5) åˆ¤æ–­æ˜¯å¦æœ‰CUDAæ”¯æŒ"></a>(5) åˆ¤æ–­æ˜¯å¦æœ‰CUDAæ”¯æŒ</h5><pre><code class="hljs ceylon">torch.cuda.<span class="hljs-keyword">is</span><span class="hljs-number">_</span>available()torch.set<span class="hljs-number">_</span><span class="hljs-keyword">default</span><span class="hljs-number">_</span>tensor<span class="hljs-number">_</span>type(<span class="hljs-string">&#x27;torch.cuda.FloatTensor&#x27;</span>)   os.environ[<span class="hljs-string">&#x27;CUDA_LAUNCH_BLOCKING&#x27;</span>] = <span class="hljs-string">&#x27;1&#x27;</span></code></pre><h5 id="6-è®¾ç½®ä¸ºcuDNN-benchmarkæ¨¡å¼"><a href="#6-è®¾ç½®ä¸ºcuDNN-benchmarkæ¨¡å¼" class="headerlink" title="(6) è®¾ç½®ä¸ºcuDNN benchmarkæ¨¡å¼"></a>(6) è®¾ç½®ä¸ºcuDNN benchmarkæ¨¡å¼</h5><p>Benchmarkæ¨¡å¼ä¼šæå‡è®¡ç®—é€Ÿåº¦ï¼Œä½†æ˜¯ç”±äºè®¡ç®—ä¸­æœ‰éšæœºæ€§ï¼Œæ¯æ¬¡ç½‘ç»œå‰é¦ˆç»“æœç•¥æœ‰å·®å¼‚ã€‚</p><pre><code class="hljs ini"><span class="hljs-attr">toch.backends.cudnn.benchmark</span> = <span class="hljs-literal">True</span></code></pre><p>å¦‚æœæƒ³è¦é¿å…è¿™ç§ç»“æœæ³¢åŠ¨ï¼Œè®¾ç½®</p><pre><code class="hljs ini"><span class="hljs-attr">torch.backends.cudnn.deterministic</span> = <span class="hljs-literal">True</span></code></pre><h5 id="7-æ‰‹åŠ¨æ¸…é™¤GPUå­˜å‚¨"><a href="#7-æ‰‹åŠ¨æ¸…é™¤GPUå­˜å‚¨" class="headerlink" title="(7) æ‰‹åŠ¨æ¸…é™¤GPUå­˜å‚¨"></a>(7) æ‰‹åŠ¨æ¸…é™¤GPUå­˜å‚¨</h5><p>æœ‰æ—¶Control-Cä¸­æ­¢è¿è¡ŒåGPUå­˜å‚¨æ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…ç©ºã€‚åœ¨PyTorchå†…éƒ¨å¯ä»¥</p><pre><code class="hljs css"><span class="hljs-selector-tag">torch</span><span class="hljs-selector-class">.cuda</span><span class="hljs-selector-class">.empty_cache</span>()</code></pre><p>æˆ–åœ¨å‘½ä»¤è¡Œå¯ä»¥å…ˆä½¿ç”¨psæ‰¾åˆ°ç¨‹åºçš„PIDï¼Œå†ä½¿ç”¨killç»“æŸè¯¥è¿›ç¨‹</p><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> aux | <span class="hljs-keyword">grep</span> <span class="hljs-keyword">python</span>    kill -<span class="hljs-number">9</span> [pid]</code></pre><p>æˆ–è€…ç›´æ¥é‡ç½®æ²¡æœ‰è¢«æ¸…ç©ºçš„GPU</p><pre><code class="hljs ada">nvidia-smi <span class="hljs-comment">--gpu-reset -i [gpu_id]</span></code></pre><h3 id="2-æ¨¡å‹"><a href="#2-æ¨¡å‹" class="headerlink" title="2. æ¨¡å‹"></a>2. æ¨¡å‹</h3><h5 id="1-æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹æŸå±‚çš„å·ç§¯ç‰¹å¾"><a href="#1-æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹æŸå±‚çš„å·ç§¯ç‰¹å¾" class="headerlink" title="(1) æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹æŸå±‚çš„å·ç§¯ç‰¹å¾"></a>(1) æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹æŸå±‚çš„å·ç§¯ç‰¹å¾</h5><pre><code class="hljs gams"># VGG<span class="hljs-number">-16</span> relu5<span class="hljs-number">-3</span> feature.<span class="hljs-keyword">model</span> = torchvision.<span class="hljs-keyword">models</span>.vgg16(pretrained=True).features# VGG<span class="hljs-number">-16</span> pool5 feature.<span class="hljs-keyword">model</span> = torchvision.<span class="hljs-keyword">models</span>.vgg16(pretrained=True)<span class="hljs-keyword">model</span> = torch.nn.Sequential(<span class="hljs-keyword">model</span>.features, <span class="hljs-keyword">model</span>.avgpool)# VGG<span class="hljs-number">-16</span> fc7 feature.<span class="hljs-keyword">model</span> = torchvision.<span class="hljs-keyword">models</span>.vgg16(pretrained=True)<span class="hljs-keyword">model</span>.classifier = torch.nn.Sequential(*list(<span class="hljs-keyword">model</span>.classifier.children())[:<span class="hljs-number">-3</span>])# ResNet GAP feature.<span class="hljs-keyword">model</span> = torchvision.<span class="hljs-keyword">models</span>.resnet18(pretrained=True)<span class="hljs-keyword">model</span> = torch.nn.Sequential(collections.OrderedDict(    list(<span class="hljs-keyword">model</span>.named_children())[:<span class="hljs-number">-1</span>]))with torch.no_grad():    <span class="hljs-keyword">model</span>.eval()    conv_representation = <span class="hljs-keyword">model</span>(image)</code></pre><h5 id="2-æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹å¤šå±‚çš„å·ç§¯ç‰¹å¾"><a href="#2-æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹å¤šå±‚çš„å·ç§¯ç‰¹å¾" class="headerlink" title="(2) æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹å¤šå±‚çš„å·ç§¯ç‰¹å¾"></a>(2) æå–ImageNeté¢„è®­ç»ƒæ¨¡å‹å¤šå±‚çš„å·ç§¯ç‰¹å¾</h5><pre><code class="hljs vim">class FeatureExtractor(torch.<span class="hljs-keyword">nn</span>.Module):    <span class="hljs-string">&quot;&quot;</span><span class="hljs-comment">&quot;Helper class to extract several convolution features from the given</span>    <span class="hljs-keyword">pre</span>-trained model.    Attribute<span class="hljs-variable">s:</span>        _model, torch.<span class="hljs-keyword">nn</span>.Module.        _layers_to_extract, <span class="hljs-keyword">list</span><span class="hljs-symbol">&lt;str&gt;</span> <span class="hljs-built_in">or</span> <span class="hljs-keyword">set</span><span class="hljs-symbol">&lt;str&gt;</span>    Example:        &gt;&gt;&gt; model = torchvision.models.resnet152(pretrained=True)        &gt;&gt;&gt; model = torch.<span class="hljs-keyword">nn</span>.Sequential(collections.OrderedDict(                <span class="hljs-keyword">list</span>(model.named_children())[:-<span class="hljs-number">1</span>]))        &gt;&gt;&gt; conv_representation = FeatureExtractor(                pretrained_model=model,                layers_to_extract=&#123;<span class="hljs-string">&#x27;layer1&#x27;</span>, <span class="hljs-string">&#x27;layer2&#x27;</span>, <span class="hljs-string">&#x27;layer3&#x27;</span>, <span class="hljs-string">&#x27;layer4&#x27;</span>&#125;)(image)    <span class="hljs-string">&quot;&quot;</span><span class="hljs-comment">&quot;</span>    def __init__(self, pretrained_model, layers_to_extract):        torch.<span class="hljs-keyword">nn</span>.Module.__init__(self)        self._model = pretrained_model        self._model.<span class="hljs-built_in">eval</span>()        self._layers_to_extract = <span class="hljs-keyword">set</span>(layers_to_extract)        def forward(self, <span class="hljs-keyword">x</span>):        with torch.no_grad():            conv_representation = []            <span class="hljs-keyword">for</span> name, layer in self._model.named_children():                <span class="hljs-keyword">x</span> = layer(<span class="hljs-keyword">x</span>)                <span class="hljs-keyword">if</span> name in self._layers_to_extrac<span class="hljs-variable">t:</span>                    conv_representation.<span class="hljs-keyword">append</span>(<span class="hljs-keyword">x</span>)            <span class="hljs-keyword">return</span> conv_representation</code></pre><h5 id="ï¼“-éƒ¨åˆ†å±‚ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹"><a href="#ï¼“-éƒ¨åˆ†å±‚ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="(ï¼“)  éƒ¨åˆ†å±‚ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹"></a>(ï¼“)  éƒ¨åˆ†å±‚ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹</h5><p>æ³¨æ„å¦‚æœä¿å­˜çš„æ¨¡å‹æ˜¯<code>torch.nn.DataParallel</code>ï¼Œåˆ™å½“å‰çš„æ¨¡å‹ä¹Ÿéœ€è¦æ˜¯<code>torch.nn.DataParallel</code>ã€‚<code>torch.nn.DataParallel(model).module == model</code>ã€‚</p><pre><code class="hljs reasonml">model.load<span class="hljs-constructor">_state_dict(<span class="hljs-params">torch</span>.<span class="hljs-params">load</span>(&#x27;<span class="hljs-params">model</span>,<span class="hljs-params">pth</span>&#x27;)</span>, strict=False)</code></pre><p>å°†åœ¨GPUä¿å­˜çš„æ¨¡å‹åŠ è½½åˆ°CPU:</p><pre><code class="hljs reasonml">model.load<span class="hljs-constructor">_state_dict(<span class="hljs-params">torch</span>.<span class="hljs-params">load</span>(&#x27;<span class="hljs-params">model</span>,<span class="hljs-params">pth</span>&#x27;, <span class="hljs-params">map_location</span>=&#x27;<span class="hljs-params">cpu</span>&#x27;)</span>)</code></pre><h5 id="ï¼ˆï¼”ï¼‰fine-tune-å¾®è°ƒå…¨è¿æ¥å±‚"><a href="#ï¼ˆï¼”ï¼‰fine-tune-å¾®è°ƒå…¨è¿æ¥å±‚" class="headerlink" title="ï¼ˆï¼”ï¼‰fine-tune å¾®è°ƒå…¨è¿æ¥å±‚"></a>ï¼ˆï¼”ï¼‰fine-tune å¾®è°ƒå…¨è¿æ¥å±‚</h5><h5 id="4-å¾®è°ƒå…¨è¿æ¥å±‚"><a href="#4-å¾®è°ƒå…¨è¿æ¥å±‚" class="headerlink" title="(4) å¾®è°ƒå…¨è¿æ¥å±‚"></a>(4) å¾®è°ƒå…¨è¿æ¥å±‚</h5><pre><code class="hljs nix"><span class="hljs-attr">model</span> = torchvision.models.resnet18(<span class="hljs-attr">pretrained=True)</span>for param <span class="hljs-keyword">in</span> model.parameters():    param.<span class="hljs-attr">requires_grad</span> = Falsemodel.<span class="hljs-attr">fc</span> = nn.Linear(<span class="hljs-number">512</span>, <span class="hljs-number">100</span>)  <span class="hljs-comment"># Replace the last fc layer</span><span class="hljs-attr">optimizer</span> = torch.optim.SGD(model.fc.parameters(), <span class="hljs-attr">lr=1e-2,</span> <span class="hljs-attr">momentum=0.9,</span> <span class="hljs-attr">weight_decay=1e-4)</span></code></pre><p>ä»¥è¾ƒå¤§å­¦ä¹ ç‡å¾®è°ƒå…¨è¿æ¥å±‚ï¼Œè¾ƒå°å­¦ä¹ ç‡å¾®è°ƒå·ç§¯å±‚</p><pre><code class="hljs ini"><span class="hljs-attr">model</span> = torchvision.models.resnet18(pretrained=<span class="hljs-literal">True</span>)<span class="hljs-attr">finetuned_parameters</span> = list(map(id, model.fc.parameters()))<span class="hljs-attr">conv_parameters</span> = (p for p in model.parameters() if id(p) not in finetuned_parameters)<span class="hljs-attr">parameters</span> = [&#123;<span class="hljs-string">&#x27;parameters&#x27;</span>: conv_parameters, <span class="hljs-string">&#x27;lr&#x27;</span>: <span class="hljs-number">1</span>e-<span class="hljs-number">3</span>&#125;,               &#123;<span class="hljs-string">&#x27;parameters&#x27;</span>: model.fc.parameters()&#125;]<span class="hljs-attr">optimizer</span> = torch.optim.SGD(parameters, lr=<span class="hljs-number">1</span>e-<span class="hljs-number">2</span>, momentum=<span class="hljs-number">0.9</span>, weight_decay=<span class="hljs-number">1</span>e-<span class="hljs-number">4</span>)</code></pre><h5 id="ï¼ˆï¼•ï¼‰ä¿å­˜ä¸åŠ è½½æ–­ç‚¹"><a href="#ï¼ˆï¼•ï¼‰ä¿å­˜ä¸åŠ è½½æ–­ç‚¹" class="headerlink" title="ï¼ˆï¼•ï¼‰ä¿å­˜ä¸åŠ è½½æ–­ç‚¹"></a>ï¼ˆï¼•ï¼‰ä¿å­˜ä¸åŠ è½½æ–­ç‚¹</h5><p>æ³¨æ„ä¸ºäº†èƒ½å¤Ÿæ¢å¤è®­ç»ƒï¼Œæˆ‘ä»¬éœ€è¦åŒæ—¶ä¿å­˜æ¨¡å‹å’Œä¼˜åŒ–å™¨çš„çŠ¶æ€ï¼Œä»¥åŠå½“å‰çš„è®­ç»ƒè½®æ•°ã€‚</p><pre><code class="hljs lua"># Save checkpoint.is_best = current_acc &gt; best_accbest_acc = <span class="hljs-built_in">max</span>(best_acc, current_acc)checkpoint = &#123;    <span class="hljs-string">&#x27;best_acc&#x27;</span>: best_acc,        <span class="hljs-string">&#x27;epoch&#x27;</span>: t + <span class="hljs-number">1</span>,    <span class="hljs-string">&#x27;model&#x27;</span>: model.state_dict(),    <span class="hljs-string">&#x27;optimizer&#x27;</span>: optimizer.state_dict(),&#125;model_path = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.join(<span class="hljs-string">&#x27;model&#x27;</span>, <span class="hljs-string">&#x27;checkpoint.pth.tar&#x27;</span>)torch.save(checkpoint, model_path)<span class="hljs-keyword">if</span> is_best:    shutil.copy(<span class="hljs-string">&#x27;checkpoint.pth.tar&#x27;</span>, model_path)# Load checkpoint.<span class="hljs-keyword">if</span> <span class="hljs-built_in">resume</span>:    model_path = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.join(<span class="hljs-string">&#x27;model&#x27;</span>, <span class="hljs-string">&#x27;checkpoint.pth.tar&#x27;</span>)    <span class="hljs-built_in">assert</span> <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.isfile(model_path)    checkpoint = torch.<span class="hljs-built_in">load</span>(model_path)    best_acc = checkpoint[<span class="hljs-string">&#x27;best_acc&#x27;</span>]    start_epoch = checkpoint[<span class="hljs-string">&#x27;epoch&#x27;</span>]    model.load_state_dict(checkpoint[<span class="hljs-string">&#x27;model&#x27;</span>])    optimizer.load_state_dict(checkpoint[<span class="hljs-string">&#x27;optimizer&#x27;</span>])    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Load checkpoint at epoch %d.&#x27;</span> % start_epoch)</code></pre><h5 id="ï¼–-è®¡ç®—æ¨¡å‹å‚æ•°é‡-D"><a href="#ï¼–-è®¡ç®—æ¨¡å‹å‚æ•°é‡-D" class="headerlink" title="(ï¼–) è®¡ç®—æ¨¡å‹å‚æ•°é‡[D]"></a>(ï¼–) è®¡ç®—æ¨¡å‹å‚æ•°é‡[D]</h5><pre><code class="hljs lisp"># Total parameters                    num_params = sum(<span class="hljs-name">p</span>.numel() for p in model.parameters()) # Trainable parametersnum_trainable_params = sum(<span class="hljs-name">p</span>.numel() for p in model.parameters() if p.requires_grad)</code></pre><h5 id="ï¼—-æ¨¡å‹æƒå€¼åˆå§‹åŒ–-D"><a href="#ï¼—-æ¨¡å‹æƒå€¼åˆå§‹åŒ–-D" class="headerlink" title="(ï¼—) æ¨¡å‹æƒå€¼åˆå§‹åŒ–[D]"></a>(ï¼—) æ¨¡å‹æƒå€¼åˆå§‹åŒ–[D]</h5><p>æ³¨æ„<code>model.modules()</code>å’Œ<code>model.children()</code>çš„åŒºåˆ«ï¼š<code>model.modules()</code>ä¼šè¿­ä»£åœ°éå†æ¨¡å‹çš„æ‰€æœ‰å­å±‚ï¼Œè€Œ<code>model.children()</code>åªä¼šéå†æ¨¡å‹ä¸‹çš„ä¸€å±‚ã€‚</p><pre><code class="hljs python"><span class="hljs-comment"># Common practise for initialization.</span><span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> model.modules():    <span class="hljs-keyword">if</span> isinstance(m, torch.nn.Conv2d):        torch.nn.init.kaiming_normal_(m.weight, mode=<span class="hljs-string">&#x27;fan_out&#x27;</span>,                                      nonlinearity=<span class="hljs-string">&#x27;relu&#x27;</span>)        <span class="hljs-keyword">if</span> m.bias <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:            torch.nn.init.constant_(m.bias, val=<span class="hljs-number">0.0</span>)        <span class="hljs-keyword">elif</span> isinstance(m, torch.nn.BatchNorm2d):        torch.nn.init.constant_(m.weight, <span class="hljs-number">1.0</span>)        torch.nn.init.constant_(m.bias, <span class="hljs-number">0.0</span>)      <span class="hljs-keyword">elif</span> isinstance(m, torch.nn.Linear):        torch.nn.init.xavier_normal_(m.weight)        <span class="hljs-keyword">if</span> m.bias <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:            torch.nn.init.constant_(m.bias, <span class="hljs-number">0.0</span>)<span class="hljs-comment"># Initialization with given tensor.</span>m.weight = torch.nn.Parameter(tensor)</code></pre><h5 id="8-å†»ç»“å‚æ•°"><a href="#8-å†»ç»“å‚æ•°" class="headerlink" title="(8) å†»ç»“å‚æ•°"></a>(8) å†»ç»“å‚æ•°</h5><pre><code class="hljs sqf"><span class="hljs-keyword">if</span> <span class="hljs-built_in">not</span> requires_grad:    <span class="hljs-keyword">for</span> <span class="hljs-built_in">param</span> <span class="hljs-built_in">in</span> self.parameters():        <span class="hljs-built_in">param</span>.requires_grad = <span class="hljs-literal">False</span></code></pre><h3 id="3-æ•°æ®"><a href="#3-æ•°æ®" class="headerlink" title="3. æ•°æ®"></a>3. æ•°æ®</h3><h5 id="1-å¸¸è§è®­ç»ƒå’ŒéªŒè¯æ•°æ®é¢„å¤„ç†"><a href="#1-å¸¸è§è®­ç»ƒå’ŒéªŒè¯æ•°æ®é¢„å¤„ç†" class="headerlink" title="(1) å¸¸è§è®­ç»ƒå’ŒéªŒè¯æ•°æ®é¢„å¤„ç†"></a>(1) å¸¸è§è®­ç»ƒå’ŒéªŒè¯æ•°æ®é¢„å¤„ç†</h5><p>ToTensoræ“ä½œä¼šå°†PIL.Imageæˆ–å½¢çŠ¶ä¸ºHÃ—WÃ—Dï¼Œæ•°å€¼èŒƒå›´ä¸º[0, 255]çš„np.ndarrayè½¬æ¢ä¸ºå½¢çŠ¶ä¸ºDÃ—HÃ—Wï¼Œæ•°å€¼èŒƒå›´ä¸º[0.0, 1.0]çš„torch.Tensorã€‚</p><pre><code class="hljs angelscript">train_transform = torchvision.transforms.Compose([    torchvision.transforms.RandomResizedCrop(size=<span class="hljs-number">224</span>,                                             scale=(<span class="hljs-number">0.08</span>, <span class="hljs-number">1.0</span>)),    torchvision.transforms.RandomHorizontalFlip(),    torchvision.transforms.ToTensor(),    torchvision.transforms.Normalize(mean=(<span class="hljs-number">0.485</span>, <span class="hljs-number">0.456</span>, <span class="hljs-number">0.406</span>),                                     std=(<span class="hljs-number">0.229</span>, <span class="hljs-number">0.224</span>, <span class="hljs-number">0.225</span>)), ]) val_transform = torchvision.transforms.Compose([    torchvision.transforms.Resize(<span class="hljs-number">224</span>),    torchvision.transforms.CenterCrop(<span class="hljs-number">224</span>),    torchvision.transforms.ToTensor(),    torchvision.transforms.Normalize(mean=(<span class="hljs-number">0.485</span>, <span class="hljs-number">0.456</span>, <span class="hljs-number">0.406</span>),                                     std=(<span class="hljs-number">0.229</span>, <span class="hljs-number">0.224</span>, <span class="hljs-number">0.225</span>)),])</code></pre><h3 id="4-è®­ç»ƒ"><a href="#4-è®­ç»ƒ" class="headerlink" title="4. è®­ç»ƒ"></a>4. è®­ç»ƒ</h3><h5 id="1-å°†æ•´æ•°æ ‡è®°è½¬æ¢æˆç‹¬çƒ­ï¼ˆone-hotï¼‰ç¼–ç "><a href="#1-å°†æ•´æ•°æ ‡è®°è½¬æ¢æˆç‹¬çƒ­ï¼ˆone-hotï¼‰ç¼–ç " class="headerlink" title="(1) å°†æ•´æ•°æ ‡è®°è½¬æ¢æˆç‹¬çƒ­ï¼ˆone-hotï¼‰ç¼–ç "></a>(1) å°†æ•´æ•°æ ‡è®°è½¬æ¢æˆç‹¬çƒ­ï¼ˆone-hotï¼‰ç¼–ç </h5><p> (PyTorchä¸­çš„æ ‡è®°é»˜è®¤ä»0å¼€å§‹)</p><pre><code class="hljs routeros">N = tensor.size(0)one_hot = torch.zeros(N, num_classes).long()one_hot.scatter_(<span class="hljs-attribute">dim</span>=1, <span class="hljs-attribute">index</span>=torch.unsqueeze(tensor, <span class="hljs-attribute">dim</span>=1), <span class="hljs-attribute">src</span>=torch.ones(N, num_classes).long())</code></pre><h5 id="2-è®¡ç®—ä¸¤ç»„æ•°æ®ä¹‹é—´çš„ä¸¤ä¸¤æ¬§å¼è·ç¦»"><a href="#2-è®¡ç®—ä¸¤ç»„æ•°æ®ä¹‹é—´çš„ä¸¤ä¸¤æ¬§å¼è·ç¦»" class="headerlink" title="(2) è®¡ç®—ä¸¤ç»„æ•°æ®ä¹‹é—´çš„ä¸¤ä¸¤æ¬§å¼è·ç¦»"></a>(2) è®¡ç®—ä¸¤ç»„æ•°æ®ä¹‹é—´çš„ä¸¤ä¸¤æ¬§å¼è·ç¦»</h5><pre><code class="hljs markdown"><span class="hljs-section"># X1 is of shape m<span class="hljs-emphasis">*d.</span></span><span class="hljs-section"><span class="hljs-emphasis">X1 = torch.unsqueeze(X1, dim=1).expand(m, n, d)</span></span><span class="hljs-section"><span class="hljs-emphasis"># X2 is of shape n*</span>d.</span>X2 = torch.unsqueeze(X2, dim=0).expand(m, n, d)<span class="hljs-section"># dist is of shape m<span class="hljs-emphasis">*n, where dist[<span class="hljs-string">i</span>][<span class="hljs-symbol">j</span>] = sqrt(|X1[i, :] - X[j, :]|^2)</span></span><span class="hljs-section"><span class="hljs-emphasis">dist = torch.sqrt(torch.sum((X1 - X2) <span class="hljs-strong">** 2, dim=2))</span></span></span></code></pre><h5 id="3-åŒçº¿æ€§æ±‡åˆï¼ˆbilinear-poolingï¼‰"><a href="#3-åŒçº¿æ€§æ±‡åˆï¼ˆbilinear-poolingï¼‰" class="headerlink" title="(3) åŒçº¿æ€§æ±‡åˆï¼ˆbilinear poolingï¼‰"></a>(3) åŒçº¿æ€§æ±‡åˆï¼ˆbilinear poolingï¼‰</h5><pre><code class="hljs tp"><span class="hljs-keyword">X</span> = torch.reshape(N, D, H * <span class="hljs-keyword">W</span>)                        # Assume <span class="hljs-keyword">X</span> has shape N*D*H*<span class="hljs-keyword">W</span><span class="hljs-keyword">X</span> = torch.bmm(<span class="hljs-keyword">X</span>, torch.transpose(<span class="hljs-keyword">X</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)) / (H * <span class="hljs-keyword">W</span>)  # Bilinear poolingassert <span class="hljs-keyword">X</span>.size() == (N, D, D)<span class="hljs-keyword">X</span> = torch.reshape(<span class="hljs-keyword">X</span>, (N, D * D))<span class="hljs-keyword">X</span> = torch.sign(<span class="hljs-keyword">X</span>) * torch.sqrt(torch.abs(<span class="hljs-keyword">X</span>) + <span class="hljs-number">1e-5</span>)   # Signed-sqrt normalization<span class="hljs-keyword">X</span> = torch.nn.functional.normalize(<span class="hljs-keyword">X</span>)                  # L<span class="hljs-number">2</span> normalization</code></pre><h5 id="4-L1-æ­£åˆ™åŒ–"><a href="#4-L1-æ­£åˆ™åŒ–" class="headerlink" title="(4) L1 æ­£åˆ™åŒ–"></a>(4) L1 æ­£åˆ™åŒ–</h5><pre><code class="hljs gams">l1_regularization = torch.nn.L1Loss(reduction=<span class="hljs-string">&#x27;sum&#x27;</span>)loss = ...  # Standard cross-<span class="hljs-built_in">entropy</span> loss<span class="hljs-keyword">for</span> param in <span class="hljs-keyword">model</span>.parameters():    loss += torch.<span class="hljs-keyword">sum</span>(torch.<span class="hljs-built_in">abs</span>(param))loss.backward()reg = <span class="hljs-number">1e-6</span>l2_loss = <span class="hljs-keyword">Variable</span>(torch.FloatTensor(1), requires_grad=True)for <span class="hljs-comment">name, param in model.named_parameters():</span>    if <span class="hljs-comment">&#x27;bias&#x27;</span><span class="hljs-comment"> not in name:</span>        l2_loss <span class="hljs-comment">= l2_loss + (0.5 * reg * torch.sum(torch.pow(W, 2)))</span></code></pre><h5 id="5-ä¸å¯¹åç½®é¡¹è¿›è¡ŒL2æ­£åˆ™åŒ–-æƒå€¼è¡°å‡ï¼ˆweight-decayï¼‰"><a href="#5-ä¸å¯¹åç½®é¡¹è¿›è¡ŒL2æ­£åˆ™åŒ–-æƒå€¼è¡°å‡ï¼ˆweight-decayï¼‰" class="headerlink" title="(5) ä¸å¯¹åç½®é¡¹è¿›è¡ŒL2æ­£åˆ™åŒ–/æƒå€¼è¡°å‡ï¼ˆweight decayï¼‰"></a>(5) ä¸å¯¹åç½®é¡¹è¿›è¡ŒL2æ­£åˆ™åŒ–/æƒå€¼è¡°å‡ï¼ˆweight decayï¼‰</h5><pre><code class="hljs ini"><span class="hljs-attr">bias_list</span> = (param for name, param in model.named_parameters() if name[-<span class="hljs-number">4</span>:] == <span class="hljs-string">&#x27;bias&#x27;</span>)<span class="hljs-attr">others_list</span> = (param for name, param in model.named_parameters() if name[-<span class="hljs-number">4</span>:] != <span class="hljs-string">&#x27;bias&#x27;</span>)<span class="hljs-attr">parameters</span> = [&#123;<span class="hljs-string">&#x27;parameters&#x27;</span>: bias_list, <span class="hljs-string">&#x27;weight_decay&#x27;</span>: <span class="hljs-number">0</span>&#125;,                              &#123;<span class="hljs-string">&#x27;parameters&#x27;</span>: others_list&#125;]<span class="hljs-attr">optimizer</span> = torch.optim.SGD(parameters, lr=<span class="hljs-number">1</span>e-<span class="hljs-number">2</span>, momentum=<span class="hljs-number">0.9</span>, weight_decay=<span class="hljs-number">1</span>e-<span class="hljs-number">4</span>)</code></pre><h5 id="6-æ¢¯åº¦è£å‰ªï¼ˆgradient-clippingï¼‰"><a href="#6-æ¢¯åº¦è£å‰ªï¼ˆgradient-clippingï¼‰" class="headerlink" title="(6) æ¢¯åº¦è£å‰ªï¼ˆgradient clippingï¼‰"></a>(6) æ¢¯åº¦è£å‰ªï¼ˆgradient clippingï¼‰</h5> <pre><code class="hljs reasonml">torch.nn.utils.clip<span class="hljs-constructor">_grad_norm_(<span class="hljs-params">model</span>.<span class="hljs-params">parameters</span>()</span>, max_norm=<span class="hljs-number">20</span>)</code></pre><h5 id="7-è®¡ç®—Softmax-è¾“å‡ºçš„æ­£ç¡®ç‡"><a href="#7-è®¡ç®—Softmax-è¾“å‡ºçš„æ­£ç¡®ç‡" class="headerlink" title="(7) è®¡ç®—Softmax è¾“å‡ºçš„æ­£ç¡®ç‡"></a>(7) è®¡ç®—Softmax è¾“å‡ºçš„æ­£ç¡®ç‡</h5><pre><code class="hljs ini"><span class="hljs-attr">score</span> = model(images)<span class="hljs-attr">prediction</span> = torch.argmax(score, dim=<span class="hljs-number">1</span>)<span class="hljs-attr">num_correct</span> = torch.sum(prediction == labels).item()<span class="hljs-attr">accuruacy</span> = num_correct / labels.size(<span class="hljs-number">0</span>)</code></pre><h5 id="8-è·å–å½“å‰å­¦ä¹ ç‡"><a href="#8-è·å–å½“å‰å­¦ä¹ ç‡" class="headerlink" title="(8) è·å–å½“å‰å­¦ä¹ ç‡"></a>(8) è·å–å½“å‰å­¦ä¹ ç‡</h5><pre><code class="hljs vim"># If there <span class="hljs-keyword">is</span> one <span class="hljs-keyword">global</span> learning rate (which <span class="hljs-keyword">is</span> the common case).<span class="hljs-keyword">lr</span> = <span class="hljs-keyword">next</span>(iter(optimizer.param_groups))[<span class="hljs-string">&#x27;lr&#x27;</span>]# If there are multiple learning rates <span class="hljs-keyword">for</span> different layers.all_lr = []<span class="hljs-keyword">for</span> param_group in optimizer.param_group<span class="hljs-variable">s:</span>    all_lr.<span class="hljs-keyword">append</span>(param_group[<span class="hljs-string">&#x27;lr&#x27;</span>])</code></pre><h3 id="5-Trick"><a href="#5-Trick" class="headerlink" title="5. Trick"></a>5. Trick</h3><h5 id="1-label-smothing"><a href="#1-label-smothing" class="headerlink" title="(1)  label smothing"></a>(1)  label smothing</h5><pre><code class="hljs nix">for images, labels <span class="hljs-keyword">in</span> train_loader:    images, <span class="hljs-attr">labels</span> = images.cuda(), labels.cuda()    <span class="hljs-attr">N</span> = labels.size(<span class="hljs-number">0</span>)    <span class="hljs-comment"># C is the number of classes.</span>    <span class="hljs-attr">smoothed_labels</span> = torch.full(<span class="hljs-attr">size=(N,</span> C), <span class="hljs-attr">fill_value=0.1</span> / (C - <span class="hljs-number">1</span>)).cuda()    smoothed_labels.scatter_(<span class="hljs-attr">dim=1,</span> <span class="hljs-attr">index=torch.unsqueeze(labels,</span> <span class="hljs-attr">dim=1),</span> <span class="hljs-attr">value=0.9)</span>    <span class="hljs-attr">score</span> = model(images)    <span class="hljs-attr">log_prob</span> = torch.nn.functional.log_softmax(score, <span class="hljs-attr">dim=1)</span>    <span class="hljs-attr">loss</span> = -torch.sum(log_prob * smoothed_labels) / N    optimizer.zero_grad()    loss.backward()    optimizer.step()</code></pre><h5 id="2-Mixup"><a href="#2-Mixup" class="headerlink" title="(2) Mixup"></a>(2) Mixup</h5><pre><code class="hljs reasonml">beta_distribution = torch.distributions.beta.<span class="hljs-constructor">Beta(<span class="hljs-params">alpha</span>, <span class="hljs-params">alpha</span>)</span><span class="hljs-keyword">for</span> images, labels <span class="hljs-keyword">in</span> train_loader:    images, labels = images.cuda<span class="hljs-literal">()</span>, labels.cuda<span class="hljs-literal">()</span>    # Mixup images.    lambda_ = beta_distribution.sample(<span class="hljs-literal">[]</span>).item<span class="hljs-literal">()</span>    index = torch.randperm(images.size(<span class="hljs-number">0</span>)).cuda<span class="hljs-literal">()</span>    mixed_images = lambda_<span class="hljs-operator"> * </span>images + (<span class="hljs-number">1</span> - lambda_)<span class="hljs-operator"> * </span>images<span class="hljs-literal">[<span class="hljs-identifier">index</span>, :]</span>    # Mixup loss.        scores = model(mixed_images)    loss = (lambda_<span class="hljs-operator"> * </span>loss<span class="hljs-constructor">_function(<span class="hljs-params">scores</span>, <span class="hljs-params">labels</span>)</span>             + (<span class="hljs-number">1</span> - lambda_)<span class="hljs-operator"> * </span>loss<span class="hljs-constructor">_function(<span class="hljs-params">scores</span>, <span class="hljs-params">labels</span>[<span class="hljs-params">index</span>])</span>)    optimizer.zero<span class="hljs-constructor">_grad()</span>    loss.backward<span class="hljs-literal">()</span>    optimizer.step<span class="hljs-literal">()</span></code></pre><h5 id="3-å¤šå¡åŒæ­¥BNï¼ˆBatch-normalizationï¼‰"><a href="#3-å¤šå¡åŒæ­¥BNï¼ˆBatch-normalizationï¼‰" class="headerlink" title="(3) å¤šå¡åŒæ­¥BNï¼ˆBatch normalizationï¼‰"></a>(3) å¤šå¡åŒæ­¥BNï¼ˆBatch normalizationï¼‰</h5><p>å½“ä½¿ç”¨torch.nn.DataParallelå°†ä»£ç è¿è¡Œåœ¨å¤šå¼ GPUå¡ä¸Šæ—¶ï¼ŒPyTorchçš„BNå±‚é»˜è®¤æ“ä½œæ˜¯å„å¡ä¸Šæ•°æ®ç‹¬ç«‹åœ°è®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®ï¼ŒåŒæ­¥BNä½¿ç”¨æ‰€æœ‰å¡ä¸Šçš„æ•°æ®ä¸€èµ·è®¡ç®—BNå±‚çš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œç¼“è§£äº†å½“æ‰¹é‡å¤§å°ï¼ˆbatch sizeï¼‰æ¯”è¾ƒå°æ—¶å¯¹å‡å€¼å’Œæ ‡å‡†å·®ä¼°è®¡ä¸å‡†çš„æƒ…å†µï¼Œæ˜¯åœ¨ç›®æ ‡æ£€æµ‹ç­‰ä»»åŠ¡ä¸­ä¸€ä¸ªæœ‰æ•ˆçš„æå‡æ€§èƒ½çš„æŠ€å·§ã€‚</p><p>å‚è§ï¼š <a href="vacancy/Synchronized-BatchNorm-PyTorchgithub.com">Synchronized-BatchNorm-PyTorchgithub</a></p><p>Reference:</p><ol><li><a href>Tensorflow cookbook</a></li><li><a href>Pytorch cookbook</a></li><li><a href="https://github.com/kevinzakka/pytorch-goodies">Pytorch-goodies</a></li><li><a href="https://github.com/chenyuntc/pytorch-book">Pytorch book</a></li><li>Pytorch å®˜æ–¹æ–‡æ¡£ å’Œ Tutorial</li></ol>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pytorchåŸºæœ¬æ¦‚å¿µ</title>
    <link href="/2019/03/17/pytorch%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <url>/2019/03/17/pytorch%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<p>Pytorchå‡ ä¸ªåŸºæœ¬æ¦‚å¿µçš„åŒºåˆ†</p><a id="more"></a><h3 id="1-numpy-array-å’Œ-Tensor-CPU-amp-GPU"><a href="#1-numpy-array-å’Œ-Tensor-CPU-amp-GPU" class="headerlink" title="1. numpy array å’Œ Tensor (CPU &amp; GPU)"></a>1. numpy array å’Œ Tensor (CPU &amp; GPU)</h3><pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; import torch</span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; import numpy as np</span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; a = np.ones(5)</span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; a</span>array([1., 1., 1., 1., 1.])<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; b = torch.from_numpy(a)     <span class="hljs-comment"># numpy array-&gt; CPU Tensor</span></span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; b </span>tensor([1., 1., 1., 1., 1.], dtype=torch.float64)<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y = y.cuda()     <span class="hljs-comment"># CPU Tensor -&gt; GPU Tensor</span></span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y</span>tensor([1., 1., 1., 1., 1.], device=&#x27;cuda:0&#x27;, dtype=torch.float64)<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y = y.cpu()  <span class="hljs-comment"># GPU Tensor-&gt; CPU Tensor</span></span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y</span>tensor([1., 1., 1., 1., 1.], dtype=torch.float64)<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y = y.numpy()  <span class="hljs-comment"># CPU Tensor -&gt; numpy array</span></span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y</span>array([1., 1., 1., 1., 1.])device = torch.device(&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;)<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y = torch.from_numpy(y)</span><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; y.to(device)   <span class="hljs-comment"># è¿™é‡Œ x.to(device) ç­‰ä»·äº x.cuda()</span></span>tensor([1., 1., 1., 1., 1.], device=&#x27;cuda:0&#x27;, dtype=torch.float64)</code></pre><p>ç´¢å¼•ã€ view æ˜¯ä¸ä¼šå¼€è¾Ÿæ–°å†…å­˜çš„ï¼Œè€Œåƒ y = x + y è¿™æ ·çš„è¿ç®—æ˜¯ä¼šæ–°å¼€å†…å­˜çš„ï¼Œç„¶åå°† y æŒ‡å‘æ–°å†…å­˜ã€‚</p><h3 id="2-Variable-å’Œ-Tensor-require-grad-True"><a href="#2-Variable-å’Œ-Tensor-require-grad-True" class="headerlink" title="2. Variable å’Œ Tensor (require_grad=True)"></a>2. Variable å’Œ Tensor (require_grad=True)</h3><p>â€‹    Pytorch 0.4 ä¹‹å‰çš„æ¨¡å¼ä¸º:ã€€<strong>Tensor æ²¡æœ‰æ¢¯åº¦è®¡ç®—ï¼ŒåŠ ä¸Šæ¢¯åº¦æ›´æ–°ç­‰æ“ä½œåå¯ä»¥å˜ä¸ºVariable</strong>.  Pytorch0.4 å°† Tensor å’ŒVariable åˆå¹¶ã€‚é»˜è®¤ Tensor çš„ require_grad ä¸º falseï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ requires_grad æ¥ä¸ºå…¶æ·»åŠ æ¢¯åº¦æ›´æ–°æ“ä½œã€‚</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>ytensor([<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>], dtype=torch.float64)  <span class="hljs-meta">&gt;&gt;&gt; </span>y.requires_grad<span class="hljs-literal">False</span><span class="hljs-meta">&gt;&gt;&gt; </span>y.requires_grad = <span class="hljs-literal">True</span><span class="hljs-meta">&gt;&gt;&gt; </span>ytensor([<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>], dtype=torch.float64, requires_grad=<span class="hljs-literal">True</span>)</code></pre><h3 id="3-detach-å’Œ-with-torch-no-grad"><a href="#3-detach-å’Œ-with-torch-no-grad" class="headerlink" title="3. detach å’Œã€€with torch.no_grad()"></a>3. detach å’Œã€€with torch.no_grad()</h3><p>ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ detachå’Œ torch.no_gradåŒºåˆ«çš„è§£é‡Š:</p><blockquote><p><strong><code>detach()</code> detaches the output from the computationnal graph. So no gradient will be backproped along this variable.</strong></p><p><strong><code>torch.no_grad</code> says that no operation should build the graph.</strong></p><p><strong>The difference is that one refers to only a given variable on which itâ€™s called. The other affects all operations taking place within the with statement.</strong></p></blockquote><p><code>detach()</code> å°†ä¸€ä¸ªå˜é‡ä»è®¡ç®—å›¾ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä¹Ÿæ²¡æœ‰äº†ç›¸å…³çš„æ¢¯åº¦æ›´æ–°ã€‚<code>torch.no_grad()</code>åªæ˜¯è¯´æ˜è¯¥æ“ä½œæ²¡å¿…è¦å»ºå›¾ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œå‰è€…åªèƒ½æŒ‡å®šä¸€ä¸ªç»™å®šçš„å˜é‡ï¼Œåè€… åˆ™ä¼šå½±å“å½±å“åœ¨ with è¯­å¥ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ“ä½œã€‚</p><h3 id="4-model-eval-å’Œ-torch-no-grad"><a href="#4-model-eval-å’Œ-torch-no-grad" class="headerlink" title="4. model.eval()ã€€å’Œ torch.no_grad()"></a>4. model.eval()ã€€å’Œ torch.no_grad()</h3><blockquote><p><strong>These two have different goals:</strong></p><ul><li><p><code>model.eval()</code> will notify all your layers that you are in eval mode, that way, batchnorm or dropout layers will work in eval mode instead of training mode.</p></li><li><p><code>torch.no_grad()</code> impacts the autograd engine and deactivate it. It will reduce memory usage and speed up computations but you wonâ€™t be able to backprop (which you donâ€™t want in an eval script).</p></li></ul></blockquote><p><code>model.eval()</code>å’Œ<code>torch.no_grad()</code>çš„åŒºåˆ«åœ¨äºï¼Œ<code>model.eval()</code>æ˜¯å°†ç½‘ç»œåˆ‡æ¢ä¸ºæµ‹è¯•çŠ¶æ€ï¼Œä¾‹å¦‚ BN å’Œéšæœºå¤±æ´»ï¼ˆdropoutï¼‰åœ¨è®­ç»ƒå’Œæµ‹è¯•é˜¶æ®µä½¿ç”¨ä¸åŒçš„è®¡ç®—æ–¹æ³•ã€‚<code>torch.no_grad()</code>æ˜¯å…³é—­PyTorchå¼ é‡çš„è‡ªåŠ¨æ±‚å¯¼æœºåˆ¶ï¼Œä»¥å‡å°‘å­˜å‚¨ä½¿ç”¨å’ŒåŠ é€Ÿè®¡ç®—ï¼Œå¾—åˆ°çš„ç»“æœæ— æ³•è¿›è¡Œ<code>loss.backward()</code></p><h3 id="5-model-train-å’Œ-model-eval-çš„ä¸åŒ"><a href="#5-model-train-å’Œ-model-eval-çš„ä¸åŒ" class="headerlink" title="5. model.train() å’Œ model.eval() çš„ä¸åŒ"></a>5. model.train() å’Œ model.eval() çš„ä¸åŒ</h3><ul><li><code>model.train()</code>  â€”â€”  è®­ç»ƒæ—¶å€™å¯ç”¨ï¼Œ ä¼šè®¡ç®—å¯¹åº” Tensor çš„æ¢¯åº¦<br>å¯ç”¨ BatchNormalization å’Œ Dropoutï¼Œå°† BatchNormalization å’Œ Dropout ç½®ä¸º True</li><li><code>model.eval()</code>  â€”â€”  éªŒè¯å’Œæµ‹è¯•æ—¶å€™å¯ç”¨ï¼Œ ä¸ä¼šè®¡ç®—å¯¹åº” Tensor çš„æ¢¯åº¦<br>ä¸å¯ç”¨ BatchNormalization å’Œ Dropoutï¼Œå°† BatchNormalization å’Œ Dropout ç½®ä¸º False</li></ul><h3 id="6-xx-data-å’Œ-xx-detach"><a href="#6-xx-data-å’Œ-xx-detach" class="headerlink" title="6. xx.data å’Œ xx.detach()"></a>6. xx.data å’Œ xx.detach()</h3><p>â€‹      åœ¨ 0.4.0 ç‰ˆæœ¬ä¹‹å‰,  .data çš„è¯­ä¹‰æ˜¯ è·å– Variable çš„ å†…éƒ¨ Tensor, åœ¨ 0.4.0 ç‰ˆæœ¬å°† Variable å’Œ Tensor merge ä¹‹å,  <code>.data</code> å’Œä¹‹å‰æœ‰ç±»ä¼¼çš„è¯­ä¹‰ï¼Œ ä¹Ÿæ˜¯å†…éƒ¨çš„ Tensor çš„æ¦‚å¿µã€‚<code>x.data</code> ä¸ <code>x.detach()</code> è¿”å›çš„ tensor æœ‰ç›¸åŒçš„åœ°æ–¹, ä¹Ÿæœ‰ä¸åŒçš„åœ°æ–¹:</p><p><strong>ç›¸åŒ:</strong></p><ul><li>éƒ½å’Œ x å…±äº«åŒä¸€å—æ•°æ®</li><li>éƒ½å’Œ x çš„ è®¡ç®—å†å²æ— å…³</li><li>requires_grad = False</li></ul><p><strong>ä¸åŒ:</strong></p><ul><li>y= x.data åœ¨æŸäº›æƒ…å†µä¸‹ä¸å®‰å…¨, æŸäº›æƒ…å†µ, æŒ‡çš„å°±æ˜¯ä¸Šè¿° inplace operation çš„ç¬¬äºŒç§æƒ…å†µ, æ‰€ä»¥, release note ä¸­æŒ‡å‡º, å¦‚æœæƒ³è¦ detach çš„æ•ˆæœçš„è¯, è¿˜æ˜¯ detach() å®‰å…¨ä¸€äº›.</li></ul><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> torch<span class="hljs-meta">&gt;&gt;&gt; </span>x = torch.FloatTensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>w1 = torch.FloatTensor([[<span class="hljs-number">2.</span>], [<span class="hljs-number">1.</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>w2 = torch.FloatTensor([<span class="hljs-number">3.</span>])<span class="hljs-meta">&gt;&gt;&gt; </span>w1.requires_grad = <span class="hljs-literal">True</span><span class="hljs-meta">&gt;&gt;&gt; </span>w2.requires_grad = <span class="hljs-literal">True</span><span class="hljs-meta">&gt;&gt;&gt; </span>d = torch.matmul(x, w1)<span class="hljs-meta">&gt;&gt;&gt; </span>d_ = d.data<span class="hljs-meta">&gt;&gt;&gt; </span>f = torch.matmul(d, w2)<span class="hljs-meta">&gt;&gt;&gt; </span>d_[:] = <span class="hljs-number">1</span><span class="hljs-meta">&gt;&gt;&gt; </span>f.backward()</code></pre><p><strong>å¦‚æœéœ€è¦è·å–å…¶å€¼ï¼Œå¯ä»¥ä½¿ç”¨  xx.cpu().numpy() æˆ–è€… xx.cpu().detach().numpy() ç„¶åè¿›è¡Œæ“ä½œï¼Œä¸å»ºè®®å†ä½¿ç”¨ volatileå’Œ  xx.dataæ“ä½œã€‚</strong></p><h3 id="7-ToTensor-amp-ToPILImage-å„è‡ªéƒ½åšäº†ä»€ä¹ˆ"><a href="#7-ToTensor-amp-ToPILImage-å„è‡ªéƒ½åšäº†ä»€ä¹ˆ" class="headerlink" title="7. ToTensor &amp; ToPILImage å„è‡ªéƒ½åšäº†ä»€ä¹ˆ?"></a>7. ToTensor &amp; ToPILImage å„è‡ªéƒ½åšäº†ä»€ä¹ˆ?</h3><p><strong>ToTensor:</strong></p><ul><li>å–å€¼èŒƒå›´ï¼š   [0, 255]  â€”&gt;  [0, 1.0]</li><li>NHWC  â€”&gt; NCHW</li><li>PILImage  â€”&gt; FloatTensor</li></ul><pre><code class="hljs python"><span class="hljs-comment"># PIL.Image -&gt; torch.Tensor.</span>tensor = torch.from_numpy(np.asarray(PIL.Image.open(path))    ).permute(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>).float() / <span class="hljs-number">255</span><span class="hljs-comment">#ã€€ç­‰ä»·äº</span>tensor = torchvision.transforms.functional.to_tensor(PIL.Image.open(path))</code></pre><p><strong>ToPILImage:</strong></p><ul><li>å–å€¼èŒƒå›´:  [0, 1.0] â€”&gt;  [0, 255]</li><li>NCHW â€”&gt; NHWC</li><li>ç±»å‹: FloatTensor -&gt; numpy Uint8 -&gt; PILImage</li></ul><pre><code class="hljs python"><span class="hljs-comment"># torch.Tensor -&gt; PIL.Image.</span>image = PIL.Image.fromarray(torch.clamp(tensor * <span class="hljs-number">255</span>, min=<span class="hljs-number">0</span>, max=<span class="hljs-number">255</span>    ).byte().permute(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>).cpu().numpy())<span class="hljs-comment">#ã€€ç­‰ä»·äº</span>image = torchvision.transforms.functional.to_pil_image(tensor)</code></pre><h3 id="8-torch-nn-xxx-ä¸-torch-nn-functional-xxx"><a href="#8-torch-nn-xxx-ä¸-torch-nn-functional-xxx" class="headerlink" title="8. torch.nn.xxx ä¸ torch.nn.functional.xxx"></a>8. torch.nn.xxx ä¸ torch.nn.functional.xxx</h3><p>å»ºè®®ç»Ÿä¸€ä½¿ç”¨ã€€<code>torch.nn.xxx</code>ã€€æ¨¡å—ï¼Œ<code>torch.functional.xxx</code> å¯èƒ½ä¼šåœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­å»æ‰ã€‚</p><p><code>torch.nn</code>ã€€æ¨¡å—å’Œã€€<code>torch.nn.functional</code>ã€€çš„åŒºåˆ«åœ¨äºï¼Œ<code>torch.nn</code>ã€€æ¨¡å—åœ¨è®¡ç®—æ—¶åº•å±‚è°ƒç”¨äº†<code>torch.nn.functional</code>ï¼Œä½†ã€€<code>torch.nn</code>ã€€æ¨¡å—åŒ…æ‹¬è¯¥å±‚å‚æ•°ï¼Œè¿˜å¯ä»¥åº”å¯¹è®­ç»ƒå’Œæµ‹è¯•ä¸¤ç§ç½‘ç»œçŠ¶æ€ã€‚ä½¿ç”¨ã€€<code>torch.nn.functional</code>ã€€æ—¶è¦æ³¨æ„ç½‘ç»œçŠ¶æ€ï¼Œå¦‚:</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>    ...    x = torch.nn.functional.dropout(x, p=<span class="hljs-number">0.5</span>, training=self.training)</code></pre><h3 id="9-pytorch-ä¸­-torch-Tensor-å’Œ-torch-tensor-æœ‰ä»€ä¹ˆç›¸åŒç‚¹å’ŒåŒºåˆ«"><a href="#9-pytorch-ä¸­-torch-Tensor-å’Œ-torch-tensor-æœ‰ä»€ä¹ˆç›¸åŒç‚¹å’ŒåŒºåˆ«" class="headerlink" title="9. pytorch ä¸­ torch.Tensor() å’Œ torch.tensor() æœ‰ä»€ä¹ˆç›¸åŒç‚¹å’ŒåŒºåˆ«?"></a>9. pytorch ä¸­ torch.Tensor() å’Œ torch.tensor() æœ‰ä»€ä¹ˆç›¸åŒç‚¹å’ŒåŒºåˆ«?</h3><ul><li><p>ç›¸åŒç‚¹ </p><p>éƒ½èƒ½ç”¨äºç”Ÿæˆæ–°çš„å¼ é‡</p></li><li><p>ä¸åŒç‚¹ï¼š</p></li></ul><p>torch.Tensor()æ˜¯ pythonç±»ï¼Œæ›´æ˜ç¡®åœ°è¯´ï¼Œæ˜¯é»˜è®¤å¼ é‡ç±»å‹torch.FloatTensor() çš„åˆ«åï¼Œtorch.Tensor([1,2])ä¼šè°ƒç”¨Tensorç±»çš„æ„é€ å‡½æ•° _<em>init_</em>ï¼Œç”Ÿæˆå•ç²¾åº¦æµ®ç‚¹ç±»å‹çš„å¼ é‡ã€‚</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a=torch.Tensor([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])<span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.FloatTensor&#x27;</span><span class="hljs-number">123</span></code></pre><p>è€Œ torch.tensor()  æ˜¯ python å‡½æ•°ï¼š<a href="https://pytorch.org/docs/stable/torch.html#torch.tensor">https://pytorch.org/docs/stable/torch.html#torch.tensor</a> ï¼Œå‡½æ•°åŸå‹æ˜¯ï¼š</p><pre><code class="hljs python">torch.tensor(data, dtype=<span class="hljs-literal">None</span>, device=<span class="hljs-literal">None</span>, requires_grad=<span class="hljs-literal">False</span>)</code></pre><p>å…¶ä¸­ data å¯ä»¥æ˜¯ï¼šlist, tuple, NumPy ndarray, scalar å’Œå…¶ä»–ç±»å‹ã€‚<br>torch.tensor ä¼šä» data ä¸­çš„æ•°æ®éƒ¨åˆ†åšæ‹·è´ï¼Œæ ¹æ®åŸå§‹æ•°æ®ç±»å‹ç”Ÿæˆç›¸åº”çš„torch.LongTensorã€torch.FloatTensor å’Œtorch.DoubleTensorã€‚</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a=torch.tensor([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])<span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.LongTensor&#x27;</span><span class="hljs-meta">&gt;&gt;&gt; </span>a=torch.tensor([<span class="hljs-number">1.</span>,<span class="hljs-number">2.</span>])<span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.FloatTensor&#x27;</span><span class="hljs-meta">&gt;&gt;&gt; </span>a=np.zeros(<span class="hljs-number">2</span>,dtype=np.float64)<span class="hljs-meta">&gt;&gt;&gt; </span>a=torch.tensor(a)<span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.DoubleTensor&#x27;</span></code></pre><h3 id="10-tensorflow-å’Œ-pytorch-æ„å»ºç½‘ç»œçš„å·®å¼‚"><a href="#10-tensorflow-å’Œ-pytorch-æ„å»ºç½‘ç»œçš„å·®å¼‚" class="headerlink" title="10. tensorflow å’Œ pytorch æ„å»ºç½‘ç»œçš„å·®å¼‚"></a>10. tensorflow å’Œ pytorch æ„å»ºç½‘ç»œçš„å·®å¼‚</h3><p>[å¦‚æœæ˜¯æ¯”è¾ƒ Tensorflow å’Œ Pytorch çš„å·®å¼‚ï¼Œ å¯ä»¥ä»: ä¸Šæ‰‹éš¾æ˜“ç¨‹åº¦ã€é™æ€å›¾vsåŠ¨æ€å›¾ã€è°ƒè¯•ã€å¯è§†åŒ–ã€éƒ¨ç½²ç­‰æ–¹é¢è¿›è¡Œåˆ†æ]</p><p> <strong>å›¾çš„åŠ¨æ€å®šä¹‰ vs é™æ€å®šä¹‰</strong></p><p>â€‹      ä¸¤ä¸ªæ¡†æ¶éƒ½æ˜¯åœ¨å¼ é‡ä¸Šè¿›è¡Œè¿ç®—ï¼Œå¹¶å°†ä»»æ„ä¸€ä¸ªæ¨¡å‹çœ‹æˆæ˜¯æœ‰å‘éå¾ªç¯å›¾ï¼ˆDAGï¼‰ï¼Œä½†æ˜¯å®ƒä»¬åœ¨å…¶å®šä¹‰æ–¹é¢æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p><p>â€‹      Tensorflow åŸºäºé™æ€å›¾ã€‚ TensorFlowéµå¾ªâ€œæ•°æ®å³ä»£ç ï¼Œä»£ç å³æ•°æ®â€çš„ç†å¿µã€‚åœ¨TensorFlowä¸­ï¼Œä½ å¯ä»¥<strong>åœ¨æ¨¡å‹èƒ½å¤Ÿè¿è¡Œä¹‹å‰é™æ€åœ°å®šä¹‰å›¾ï¼Œ ç„¶ååœ¨è¿è¡Œæ—¶å°† æ•°æ® feed åˆ°è®¡ç®—å›¾ä¸­ã€‚</strong>ä¸å¤–éƒ¨ä¸–ç•Œçš„<strong>æ‰€æœ‰é€šä¿¡éƒ½é€šè¿‡tf.Sessionå¯¹è±¡å’Œtf.Placeholderæ¥æ‰§è¡Œ</strong>ï¼Œè¿™ä¸¤ä¸ªå¼ é‡åœ¨è¿è¡Œæ—¶ä¼šè¢«å¤–éƒ¨æ•°æ®æ›¿ä»£ã€‚<strong>é™æ€è®¡ç®—å…è®¸ç¼–è¯‘å™¨è¿›è¡Œæ›´å¤§ç¨‹åº¦çš„ä¼˜åŒ–ï¼Œä½†æ˜¯å…¶è°ƒè¯•ç›¸å¯¹æ¯”è¾ƒå›°éš¾ã€‚</strong></p><p>â€‹      Pytorch åŸºäºåŠ¨æ€å›¾ï¼Œ åœ¨PyTorchä¸­ï¼Œå›¾çš„å®šä¹‰åˆ™æ›´ä¸ºé‡è¦å’ŒåŠ¨æ€åŒ–ï¼š<strong>ä½ å¯ä»¥éšæ—¶å®šä¹‰ã€éšæ—¶æ›´æ”¹ã€éšæ—¶æ‰§è¡ŒèŠ‚ç‚¹ï¼Œå¹¶ä¸”æ²¡æœ‰ç‰¹æ®Šçš„ä¼šè¯æ¥å£æˆ–å ä½ç¬¦</strong>ã€‚æ€»ä½“è€Œè¨€ï¼Œè¯¥æ¡†æ¶ä¸Pythonè¯­è¨€é›†æˆåœ°æ›´ä¸ºç´§å¯†ï¼Œå¹¶ä¸”åœ¨å¤§å¤šæ•°æ—¶å€™ç”¨èµ·æ¥æ„Ÿè§‰<strong>æ›´åŠ æœ¬åœ°åŒ–ï¼Œæ›´åŠ å®¹æ˜“å°†å¤§è„‘ä¸­çš„æƒ³æ³•è½¬åŒ–ä¸ºç¨‹åº.</strong></p><p>â€‹     è¿‘å¹´æ¥çš„å‘å±•ï¼Œ tf å¼•å…¥äº† eager æ¨¡å¼å®ç°åŠ¨æ€å›¾Â·Â·ï¼Œ pytorch ä¹Ÿå¯ä»¥å€ŸåŠ©äº onnxã€caffe2å’Œ torchscript æ¥å®ç°é™æ€å›¾ï¼Œ tensorflow å’Œ pytorch çš„ä¹‹é—´é™æ€å›¾å’ŒåŠ¨æ€å›¾çš„ç•Œé™ä¹Ÿé€æ¸å˜çš„æ¨¡ç³Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>neural-network-part1</title>
    <link href="/2019/03/11/neural-network-part1/"/>
    <url>/2019/03/11/neural-network-part1/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€-æ•°æ®é¢„å¤„ç†"><a href="#ä¸€-æ•°æ®é¢„å¤„ç†" class="headerlink" title="ä¸€. æ•°æ®é¢„å¤„ç†"></a>ä¸€. æ•°æ®é¢„å¤„ç†</h3><h4 id="1-ä¸­å¿ƒåŒ–"><a href="#1-ä¸­å¿ƒåŒ–" class="headerlink" title="1. ä¸­å¿ƒåŒ–"></a>1. ä¸­å¿ƒåŒ–</h4><p>ä¸­å¿ƒåŒ–æ˜¯é¢„å¤„ç†æœ€å¸¸ç”¨çš„å½¢å¼ã€‚å®ƒå¯¹æ•°æ®ä¸­æ¯ä¸ªç‹¬ç«‹<em>ç‰¹å¾</em>å‡å»å¹³å‡å€¼ï¼Œä»å‡ ä½•ä¸Šå¯ä»¥ç†è§£ä¸ºåœ¨æ¯ä¸ªç»´åº¦ä¸Šéƒ½å°†æ•°æ®äº‘çš„ä¸­å¿ƒéƒ½è¿ç§»åˆ°åŸç‚¹ã€‚åœ¨numpyä¸­ï¼Œè¯¥æ“ä½œå¯ä»¥é€šè¿‡ä»£ç <code>X -= np.mean(X, axis=0)</code>å®ç°ã€‚è€Œå¯¹äºå›¾åƒï¼Œæ›´å¸¸ç”¨çš„æ˜¯å¯¹æ‰€æœ‰åƒç´ éƒ½å‡å»ä¸€ä¸ªå€¼ï¼Œå¯ä»¥ç”¨<code>X -= np.mean(X)</code>å®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨3ä¸ªé¢œè‰²é€šé“ä¸Šåˆ†åˆ«æ“ä½œã€‚</p><h4 id="2-å½’ä¸€åŒ–"><a href="#2-å½’ä¸€åŒ–" class="headerlink" title="2. å½’ä¸€åŒ–"></a>2. å½’ä¸€åŒ–</h4><p>å½’ä¸€åŒ–æ˜¯æŒ‡å°†æ•°æ®çš„æ‰€æœ‰ç»´åº¦éƒ½å½’ä¸€åŒ–ï¼Œä½¿å…¶æ•°å€¼èŒƒå›´éƒ½è¿‘ä¼¼ç›¸ç­‰ã€‚æœ‰ä¸¤ç§å¸¸ç”¨æ–¹æ³•å¯ä»¥å®ç°å½’ä¸€åŒ–ã€‚</p><p>ç¬¬ä¸€ç§æ˜¯å…ˆå¯¹æ•°æ®åšé›¶ä¸­å¿ƒåŒ–ï¼ˆzero-centeredï¼‰å¤„ç†ï¼Œç„¶åæ¯ä¸ªç»´åº¦éƒ½é™¤ä»¥å…¶æ ‡å‡†å·®ï¼Œå®ç°ä»£ç ä¸º<code>X /= np.std(X, axis=0)</code>ã€‚</p><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯å¯¹æ¯ä¸ªç»´åº¦éƒ½åšå½’ä¸€åŒ–ï¼Œä½¿å¾—æ¯ä¸ªç»´åº¦çš„æœ€å¤§å’Œæœ€å°å€¼æ˜¯1å’Œ-1ã€‚</p><p>è¿™ä¸ªé¢„å¤„ç†æ“ä½œåªæœ‰åœ¨ç¡®ä¿¡ä¸åŒçš„è¾“å…¥ç‰¹å¾æœ‰ä¸åŒçš„æ•°å€¼èŒƒå›´ï¼ˆæˆ–è®¡é‡å•ä½ï¼‰æ—¶æ‰æœ‰æ„ä¹‰ï¼Œä½†è¦æ³¨æ„é¢„å¤„ç†æ“ä½œçš„é‡è¦æ€§å‡ ä¹ç­‰åŒäºå­¦ä¹ ç®—æ³•æœ¬èº«ã€‚åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œç”±äºåƒç´ çš„æ•°å€¼èŒƒå›´å‡ ä¹æ˜¯ä¸€è‡´çš„ï¼ˆéƒ½åœ¨0-255ä¹‹é—´ï¼‰ï¼Œæ‰€ä»¥è¿›è¡Œè¿™ä¸ªé¢å¤–çš„é¢„å¤„ç†æ­¥éª¤å¹¶ä¸æ˜¯å¾ˆå¿…è¦ã€‚</p><h3 id="äºŒ-æ¿€æ´»å‡½æ•°"><a href="#äºŒ-æ¿€æ´»å‡½æ•°" class="headerlink" title="äºŒ. æ¿€æ´»å‡½æ•°"></a>äºŒ. æ¿€æ´»å‡½æ•°</h3><h4 id="1-å¸¸è§çš„æ¿€æ´»å‡½æ•°åŠå…¶å¯¼æ•°"><a href="#1-å¸¸è§çš„æ¿€æ´»å‡½æ•°åŠå…¶å¯¼æ•°" class="headerlink" title="1. å¸¸è§çš„æ¿€æ´»å‡½æ•°åŠå…¶å¯¼æ•°"></a>1. å¸¸è§çš„æ¿€æ´»å‡½æ•°åŠå…¶å¯¼æ•°</h4><p>Sigmoid æ¿€æ´»å‡½æ•°çš„å½¢å¼ä¸º   <script type="math/tex">f(z) = \frac{1}{1+e^{-z}}</script>,  å¯¹åº”çš„å¯¼å‡½æ•°ä¸º    $fâ€™(z) = f(z)(1-f(z))$</p><p>Tanhæ¿€æ´»å‡½æ•°çš„å½¢å¼ä¸º   $f(z) = \frac{e^{z} - e^{-z}}{e^{z}+e^{-z}}$,    å¯¹åº”çš„å¯¼å‡½æ•°ä¸º$fâ€™(z) = 1 - (f(z))^2$ </p><p>ReLU æ¿€æ´»å‡½æ•°çš„å½¢å¼ä¸º  $f(z) = max(0, z)$,    å¯¹åº”çš„å¯¼å‡½æ•°ä¸º   <script type="math/tex">f'(z)=\left\{\begin{aligned}1, z > 0 \\0, z \leq 0 \\\end{aligned}\right.</script></p><h4 id="2-ä¸ºä»€ä¹ˆ-sigmoid-å’Œ-tanh-æ¿€æ´»å‡½æ•°ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±çš„ç°è±¡ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆ-sigmoid-å’Œ-tanh-æ¿€æ´»å‡½æ•°ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±çš„ç°è±¡ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆ sigmoid å’Œ tanh æ¿€æ´»å‡½æ•°ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±çš„ç°è±¡ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆ sigmoid å’Œ tanh æ¿€æ´»å‡½æ•°ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±çš„ç°è±¡ï¼Ÿ</h4><p>sigmoid æ¿€æ´»å‡½æ•°çš„æ›²çº¿å¦‚ä¸‹å·¦å›¾æ‰€ç¤ºã€‚å®ƒå°†è¾“å…¥z æ˜ å°„åˆ°ï¼ˆ0, 1ï¼‰ï¼Œå½“zå¾ˆå¤§æ—¶ï¼Œ f(z) è¶‹è¿‘äº1ï¼›å½“zå¾ˆå°æ—¶ï¼Œ f(z) è¶‹è¿‘äº0ï¼Œ è€Œå…¶å¯¼å‡½æ•° $fâ€™(z) = f(z)(1-f(z)) $ åœ¨ z å¾ˆå¤§æˆ–è€…å¾ˆå°æ—¶éƒ½ä¼šè¶‹è¿‘äº0ï¼Œé€ æˆæ¢¯åº¦æ¶ˆå¤±çš„ç°è±¡ã€‚</p><p>tanh æ¿€æ´»å‡½æ•°çš„å›¾åƒå¦‚ä¸‹å³å›¾æ‰€ç¤ºã€‚å½“zå¾ˆå¤§æ—¶ï¼Œf(z) è¶‹è¿‘äº1ï¼Œ å½“z å¾ˆå°æ—¶ï¼Œ z è¶‹è¿‘äº-1ã€‚ å…¶å¯¼æ•° $fâ€™(z) = 1 - (f(z))^2$  åœ¨ z å¾ˆå¤§æˆ–å¾ˆå°æ—¶éƒ½ä¼šè¶‹è¿‘äº0ï¼ŒåŒæ ·ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±ã€‚</p><p>å®é™…ä¸Šï¼ŒTanh ç›¸å½“äº Sigmoidçš„å¹³ç§»ï¼š  <script type="math/tex">tanh(z) = 2sigmoid(2x)-1</script>ã€‚</p><p><img src="/2019/03/11/neural-network-part1/sigmoid_and_tanh.png" alt="sigmoid and tanh"></p><h4 id="3-ReLU-ç³»åˆ—çš„æ¿€æ´»å‡½æ•°ç›¸å¯¹äº-sigmoid-å’Œ-tanh-çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆå±€é™æ€§ä»¥åŠå¦‚ä½•æ”¹è¿›ï¼Ÿ"><a href="#3-ReLU-ç³»åˆ—çš„æ¿€æ´»å‡½æ•°ç›¸å¯¹äº-sigmoid-å’Œ-tanh-çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆå±€é™æ€§ä»¥åŠå¦‚ä½•æ”¹è¿›ï¼Ÿ" class="headerlink" title="3. ReLU ç³»åˆ—çš„æ¿€æ´»å‡½æ•°ç›¸å¯¹äº sigmoid å’Œ tanh çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆå±€é™æ€§ä»¥åŠå¦‚ä½•æ”¹è¿›ï¼Ÿ"></a>3. ReLU ç³»åˆ—çš„æ¿€æ´»å‡½æ•°ç›¸å¯¹äº sigmoid å’Œ tanh çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆå±€é™æ€§ä»¥åŠå¦‚ä½•æ”¹è¿›ï¼Ÿ</h4><p>ä¼˜ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰ä»è®¡ç®—è§’åº¦ä¸Šï¼Œ Sigmoid å’Œ tanh æ¿€æ´»å‡½æ•°å‡éœ€è¦è®¡ç®—æŒ‡æ•°ï¼Œå¤æ‚åº¦é«˜ï¼Œè€ŒReLUåªéœ€è¦ä¸€ä¸ªé˜ˆå€¼å³å¯å¾—åˆ°æ¿€æ´»å€¼ã€‚</p><p>ï¼ˆ2ï¼‰ReLU çš„éçº¿æ€§åŒ…å«çº¿æ€§å¯ä»¥æœ‰æ•ˆåœ°è§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œæä¾›ç›¸å¯¹è¾ƒå®½çš„æ¿€æ´»è¾¹ç•Œã€‚</p><p>ï¼ˆ3ï¼‰ReLUçš„å•ä¾§æŠ‘åˆ¶æä¾›äº†ç½‘ç»œçš„ç¨€ç–è¡¨è¾¾èƒ½åŠ›ã€‚  </p><p>å±€é™æ€§ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šä¼šå¯¼è‡´ç¥ç»å…ƒæ­»äº¡çš„é—®é¢˜ã€‚è¿™æ˜¯ç”±äº $f(z) = max(0, z)$  å¯¼è‡´è´Ÿæ¢¯åº¦åœ¨ç»è¿‡è¯¥ReLU å•å…ƒæ—¶è¢«ç½®ä¸º0ï¼Œ ä¸”åœ¨ä¹‹åä¹Ÿä¸è¢«ä»»ä½•æ•°æ®æ¿€æ´»ï¼Œå³æµç»è¯¥ç¥ç»å…ƒçš„æ¢¯åº¦æ°¸è¿œä¸º0ï¼Œ ä¸å¯¹ä»»ä½•æ•°æ®äº§ç”Ÿå“åº”ã€‚åœ¨å®é™…è®­ç»ƒä¸­ï¼Œå¦‚æœå­¦ä¹ ç‡è®¾ç½®è¾ƒå¤§ï¼Œä¼šå¯¼è‡´è¶…è¿‡ä¸€å®šæ¯”ä¾‹çš„ç¥ç»å…ƒä¸å¯é€†æ­»äº¡ï¼Œè¿›è€Œå‚æ•°æ¢¯åº¦æ— æ³•æ›´æ–°ï¼Œæ•´ä¸ªè®­ç»ƒè¿‡ç¨‹å¤±è´¥ã€‚</p><p>ä¸€äº›ReLU çš„æ”¹è¿›æªæ–½ï¼š</p><p>ï¼ˆ1ï¼‰Leaky ReLUï¼ˆLReLUï¼‰</p><p>Leaky ReLU çš„è¡¨ç¤ºå½¢å¼ä¸ºï¼š<script type="math/tex">f(z)=\left\{\begin{aligned}z, z > 0 \\\alpha z, z \leq 0 \\\end{aligned}\right.</script> ï¼Œ Leaky ReLU ä¸ ReLU çš„åŒºåˆ«åœ¨äºå½“ $z\le 0$ æ—¶ï¼Œ å…¶å€¼ä¸ä¸ºé›¶ï¼Œä¸€èˆ¬æ¥è¯´a ä¸ºä¸€ä¸ªå¾ˆå°çš„å¸¸æ•°(0.01æˆ–è€…0.001æ•°é‡çº§çš„è¾ƒå°æ•´æ•°)ï¼Œè¿™æ ·æ—¢å®ç°äº†å•ä¾§æŠ‘åˆ¶ï¼Œåˆä¿ç•™äº†éƒ¨åˆ†è´Ÿæ¢¯åº¦ä¿¡æ¯ä»¥è‡´ä¸å®Œå…¨ä¸¢å¤±ã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œ$ \alpha$  ä¸ºè¶…å‚æ•°ï¼Œè¾ƒéš¾è®¾ç½®ä¸ºåˆé€‚çš„å€¼ï¼Œä¸”è¾ƒä¸ºæ•æ„Ÿï¼Œå› æ­¤Leaky ReLU å‡½æ•°åœ¨å®é™…ä½¿ç”¨ä¸­çš„æ€§èƒ½éƒ¨åˆ†ååˆ†ç¨³å®šã€‚</p><p>ï¼ˆ2ï¼‰å‚æ•°åŒ– ReLUï¼ˆParametric  ReLUï¼ŒPReLUï¼‰ï¼šPReLUå°†è´Ÿè½´éƒ¨åˆ†æ–œç‡$ \alpha$ ä½œä¸ºç½‘ç»œä¸­çš„ä¸€ä¸ªå¯å­¦ä¹ çš„å‚æ•°èå…¥æ¨¡å‹çš„æ•´ä½“è®­ç»ƒè¿‡ç¨‹ã€‚æœ‰å‡ ç‚¹æœ‰è¶£çš„ç°è±¡éœ€è¦æ³¨æ„ï¼š</p><ul><li><p>è‡ªç”±åº¦è¾ƒå¤§çš„å„é€šé“ç‹¬äº«å‚æ•°çš„å‚æ•°åŒ–ReLUæ€§èƒ½ç›¸æ¯”è¾ƒå„é€šé“å…±äº«å‚æ•°æ›´ä¼˜ã€‚</p></li><li><p>åœ¨ç‹¬äº«å‚æ•°è®¾å®šä¸‹å­¦åˆ°çš„$ \alpha$å–å€¼å‘ˆç°å‡ºç”±æµ…å±‚åˆ°æ·±å±‚ä¾æ¬¡é€’å‡çš„è¶‹åŠ¿ï¼Œè¿™è¯´æ˜å®é™…ä¸Šç½‘ç»œæ‰€éœ€è¦çš„éçº¿æ€§éšç€ç½‘ç»œå±‚æ•°çš„å¢åŠ è€Œé€’å‡ã€‚ </p><p>åœ¨åˆ†ç±»ç²¾åº¦ä¸Šï¼Œ ä½¿ç”¨PReLU ä½œä¸ºæ¿€æ´»å‡½æ•°çš„ç½‘ç»œè¦ä¼˜äºåŸå§‹ReLUçš„ç½‘ç»œã€‚ä½†æ˜¯PReLUåœ¨å¸¦æ¥æ›´å¤§è‡ªç”±åº¦çš„åŒæ—¶ï¼Œä¹Ÿå¢åŠ äº†ç½‘ç»œæ¨¡å‹è¿‡æ‹Ÿåˆçš„å¥‰çŒ®ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­éœ€è¦æ ¼å¤–æ³¨æ„ã€‚</p></li></ul><p>ï¼ˆ3ï¼‰éšæœºåŒ–ReLU(Random ReLU, RReLUï¼‰ï¼šå¢åŠ äº†â€œéšæœºåŒ–æœºåˆ¶ï¼Œ å…¶å–å€¼åœ¨è®­ç»ƒé˜¶æ®µæœä»å‡åŒ€åˆ†å¸ƒï¼Œåœ¨æµ‹è¯•é˜¶æ®µåˆ™å°†å…¶æŒ‡å®šä¸ºè¯¥å‡åŒ€åˆ†å¸ƒå¯¹åº”çš„æ•°å­¦æœŸæœ› $ \frac{l+u}{2}\ $ã€‚</p><p><img src="/2019/03/11/neural-network-part1/relu_adv.png" alt="sigmoid and tanh"></p><p>ï¼ˆ4ï¼‰æŒ‡æ•°åŒ–çº¿æ€§å•å…ƒï¼ˆExponential Linear Unitï¼Œ ELUï¼‰ï¼š2016å¹´ Clevert ç­‰äººæå‡ºäº†æŒ‡æ•°åŒ–çº¿æ€§å•å…ƒ ELUï¼Œå…¶å…¬å¼ä¸ºï¼š <script type="math/tex">ELU(x)=\left\{\begin{aligned}x, x \ge 0 \\\lambda \cdot (e^x - 1), z \lt 0 \\\end{aligned}\right.</script>ã€‚ReLU å…·å¤‡äº† ReLU å‡½æ•°çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ä¹Ÿè§£å†³äº†ReLU å‡½æ•°è‡ªèº«çš„â€œæ­»åŒºâ€é—®é¢˜ã€‚ä¸è¿‡ELU å‡½æ•°ä¸­çš„æŒ‡æ•°æ“ä½œç¨ç¨å¢å¤§äº†è®¡ç®—é‡ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒELU ä¸­çš„è¶…å‚æ•° $\lambda$ ä¸€èˆ¬è¢«è®¾ç½®ä¸º1ã€‚</p><h3 id="ä¸‰-ç½‘ç»œå‚æ•°åˆå§‹åŒ–"><a href="#ä¸‰-ç½‘ç»œå‚æ•°åˆå§‹åŒ–" class="headerlink" title="ä¸‰. ç½‘ç»œå‚æ•°åˆå§‹åŒ–"></a>ä¸‰. ç½‘ç»œå‚æ•°åˆå§‹åŒ–</h3><p>ç½‘ç»œå‚æ•°åˆå§‹åŒ–æ–¹å¼ä¸»è¦åˆ†ä¸ºå››ç§ï¼š</p><p>ï¼ˆ1ï¼‰å…¨é›¶åˆå§‹åŒ–ï¼šå…¨é›¶åˆå§‹åŒ–ä¼šå¯¼è‡´ç½‘ç»œä¸é€šç¥ç»å…ƒçš„è¾“å‡ºç›¸åŒï¼Œç›¸åŒçš„è¾“å‡ºå¯¼è‡´æ¢¯åº¦æ›´æ–°å®Œå…¨ä¸€æ ·ï¼Œè¿™æ ·ä¾¿ä¼šä»¤æ›´æ–°åçš„å‚æ•°ä»ç„¶ä¿æŒä¸€æ ·çš„çŠ¶æ€ï¼Œä»è€Œæ— æ³•å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚</p><p>ï¼ˆ2ï¼‰éšæœºåˆå§‹åŒ–ï¼šå°†å‚æ•°å€¼éšæœºè®¾å®šä¸ºæ¥è¿‘0çš„ä¸€ä¸ªå¾ˆå°çš„éšæœºæ•°ï¼ˆæœ‰æ­£æœ‰è´Ÿï¼‰ã€‚</p><p>é«˜æ–¯åˆ†å¸ƒï¼š</p><pre><code class="hljs python"><span class="hljs-comment"># origin method</span>w = <span class="hljs-number">0.001</span> * randn(n_in, n_out)<span class="hljs-comment"># Xavier method </span>w = (<span class="hljs-number">0.001</span> * randn(n_in, n_out)) / sqrt(n)<span class="hljs-comment"># He method</span>w = (<span class="hljs-number">0.001</span> * randn(n_in, n_out)) / sqrt(n/<span class="hljs-number">2</span>)<span class="hljs-comment"># å…¶ä¸­n=n_inæˆ–n=(n_in+n_out)/2</span></code></pre><p>å‡åŒ€åˆ†å¸ƒï¼š</p><pre><code class="hljs python"><span class="hljs-comment">#  Xavier method</span>low = -sqrt(<span class="hljs-number">3</span>/n)high = sqrt(<span class="hljs-number">3</span>/n)rand_param = low + (high - low) * rand(n_in, n_out)w = <span class="hljs-number">0.001</span> * rand_param <span class="hljs-comment"># He mothod</span>low = -sqrt(<span class="hljs-number">6</span>/n)high = sqrt(<span class="hljs-number">6</span>/n)rand_param = low + (high - low) * rand(n_in, n_out)w = <span class="hljs-number">0.001</span> * rand_param</code></pre><p>ï¼ˆ3ï¼‰é¢„è®­ç»ƒæ¨¡å‹åˆå§‹åŒ–</p><p>ï¼ˆ4ï¼‰ æ•°æ®æ•æ„Ÿçš„å‚æ•°åˆå§‹åŒ–æ–¹å¼   <a href="https://github.com/philkr/magic_init">github address</a></p><p>æ€»ç»“ï¼š </p><ul><li>ç½‘ç»œå‚æ•°åˆå§‹åŒ–çš„ä¼˜åŠ£åœ¨æå¤§ç¨‹åº¦ä¸Šå†³å®šäº†ç½‘ç»œçš„æœ€ç»ˆæ€§èƒ½ã€‚</li><li>æ¯”è¾ƒæ¨èçš„ç½‘ç»œåˆå§‹åŒ–æ–¹å¼ä¸ºHeæ–¹å¼ï¼Œå°†å‚æ•°åˆå§‹åŒ–ä¸ºæœä»é«˜æ–¯éƒ¨åˆ†æˆ–è€…å‡åŒ€åˆ†å¸ƒçš„è¾ƒå°éšæœºæ•°ï¼ŒåŒæ—¶å¯¹å‚æ•°æ–¹å·®éœ€è¦åŠ ä»¥è§„èŒƒåŒ–ã€‚</li><li>å¦å¤–å€ŸåŠ©é¢„è®­ç»ƒæ¨¡å‹ä¸­çš„å‚æ•°ä½œä¸ºæ–°ä»»åŠ¡çš„å‚æ•°åˆå§‹åŒ–æ–¹å¼ä¸€ç§ç®€ä¾¿å¼‚æ€§ä¸”ååˆ†æœ‰æ•ˆçš„æ¨¡å‹å‚æ•°åˆå§‹åŒ–æ–¹æ³•ã€‚</li></ul><p>xavier å‚æ•°åˆå§‹åŒ–æ–¹å¼çš„ç”±æ¥ï¼š</p><p>å‡è®¾sä¸ºæœªç»éçº¿æ€§å˜åŒ–çš„è¯¥å±‚ç½‘ç»œè¾“å‡ºç»“æœï¼Œwä¸ºè¯¥å±‚å‚æ•°ï¼Œxä¸ºè¯¥å±‚çš„è¾“å…¥æ•°æ®ï¼Œåˆ™ï¼š</p><script type="math/tex; mode=display">Var(s) = Var(\sum_i^nw_ix_i)   \\       = \sum_i^nVar(w_ix_i)   \\       = \sum_i^n[E(w_i)]^2Var(x_i) +[E(x_i)]^2Var(w_i) + Var(x_i)Var(x_i)     \\       = \sum_i^nVar(x_i)Var(w_i) \\       = (nVar(w))Var(x) \\</script><p>ä¸ºäº†ä¿è¯è¾“å‡ºæ•°æ® Var(s) å’Œè¾“å…¥æ•°æ®Var(x)çš„æ–¹å·®ä¸€è‡´ï¼Œéœ€ä»¤ nVarï¼ˆwï¼‰ = 1ï¼Œå³ $n \cdot Var(a\omega)=n\cdot a^2 \cdot Var(\omegaâ€™) = 1$ï¼Œ åˆ™ $a=\sqrt{(1/n)}$ï¼Œ å…¶ä¸­$\omegaâ€™$ä¸ºæ–¹å·®è§„èŒƒåŒ–åçš„å‚æ•°ã€‚</p><h3 id="å››-ç›®æ ‡å‡½æ•°"><a href="#å››-ç›®æ ‡å‡½æ•°" class="headerlink" title="å››. ç›®æ ‡å‡½æ•°"></a>å››. ç›®æ ‡å‡½æ•°</h3><h4 id="1-åˆ†ç±»ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°"><a href="#1-åˆ†ç±»ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°" class="headerlink" title="1. åˆ†ç±»ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°"></a>1. åˆ†ç±»ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°</h4><h5 id="1-äº¤å‰ç†µæŸå¤±å‡½æ•°-Softmax-æŸå¤±å‡½æ•°"><a href="#1-äº¤å‰ç†µæŸå¤±å‡½æ•°-Softmax-æŸå¤±å‡½æ•°" class="headerlink" title="(1) äº¤å‰ç†µæŸå¤±å‡½æ•°/Softmax æŸå¤±å‡½æ•°"></a>(1) äº¤å‰ç†µæŸå¤±å‡½æ•°/Softmax æŸå¤±å‡½æ•°</h5><p>äº¤å‰ç†µ(cross entropy)æŸå¤±å‡½æ•°åˆç§°Softmax æŸå¤±å‡½æ•°ï¼Œæ˜¯ç›®å‰å·ç§¯ç¥ç»ç½‘ç»œæœ€å¸¸ç”¨çš„åˆ†ç±»ç›®æ ‡å‡½æ•°ã€‚å…¶å½¢å¼ä¸ºï¼š</p><p>$L<em>{cross\ entropy\ loss} = L</em>{softmax\ loss} = -\frac{1}{N}\sum<em>{i=1}^{N}log(\frac{e^{h</em>{y<em>i}}}{\sum</em>{j=1}^{C}e^{h_j}})$</p><p>å³é€šè¿‡æŒ‡æ•°åŒ–å˜æ¢ä½¿ç½‘ç»œè¾“å‡º $h$ è½¬æ¢ä¸ºæ¦‚ç‡å½¢å¼ã€‚</p><h5 id="2-åˆé¡µæŸå¤±å‡½æ•°"><a href="#2-åˆé¡µæŸå¤±å‡½æ•°" class="headerlink" title="(2) åˆé¡µæŸå¤±å‡½æ•°"></a>(2) åˆé¡µæŸå¤±å‡½æ•°</h5><p>åœ¨æ”¯æŒå‘é‡æœºä¸­è¢«å¹¿æ³›ä½¿ç”¨çš„åˆé¡µæŸå¤±å‡½æ•°ï¼ˆhinge lossï¼‰æœ‰æ—¶ä¹Ÿä½œä¸ºç›®æ ‡å‡½æ•°åœ¨ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­ä½¿ç”¨ï¼š</p><p>$L<em>{hinge\ loss} = \frac{1}{N}\sum</em>{i=1}^{N}max{(0, 1-h_{yi})}$</p><p>åˆé¡µæŸå¤±å‡½æ•°çš„è®¾è®¡ç†å¿µæ˜¯ï¼šå¯¹é”™è¯¯è¶Šå¤§çš„æ ·æœ¬æ–½åŠ è¶Šä¸¥é‡çš„æƒ©ç½šã€‚å¯æ˜¯è¿™ä¸€æŸå¤±å‡½æ•°å¯¹å™ªå£°çš„æŠµæŠ—èƒ½åŠ›è¾ƒå·®ã€‚å¦å¤–ï¼Œä¸€èˆ¬çš„åˆ†ç±»ä»»åŠ¡ä¸­çš„äº¤å‰ç†µæŸå¤±å‡½æ•°çš„åˆ†ç±»æ•ˆæœç•¥ä¼˜äºåˆé¡µæŸå¤±å‡½æ•°çš„åˆ†ç±»æ•ˆæœã€‚</p><h5 id="3-å¡é“æŸå¤±å‡½æ•°"><a href="#3-å¡é“æŸå¤±å‡½æ•°" class="headerlink" title="(3) å¡é“æŸå¤±å‡½æ•°"></a>(3) å¡é“æŸå¤±å‡½æ•°</h5><p>å¡é“æŸå¤±å‡½æ•°çš„å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">L_{ramp\ loss} = L_{hinge\ loss} - \frac{1}{N}\sum_{i=1}^{M}max{(0, s-h{yi})}  \\= \frac{1}{N}\sum_{i=1}^{M}(max{(0, 1-h_{yi})} - max{(0, s-h_{yi})})  \\</script><p>å…¶ä¸­ , $s$ åˆ¶å®šäº†â€œæˆªæ–­ç‚¹â€çš„æ–‡èŒã€‚ç”±äºå¡é“æŸå¤±å‡½æ•°å®é™…åœ¨ $s$ å¤„â€œæˆªæ–­â€ åˆé¡µæŸå¤±å‡½æ•°ï¼Œå› æ­¤å¡é“æŸå¤±å‡½æ•°ä¹Ÿè¢«ç§°ä¸ºâ€œæˆªæ–­åˆé¡µæŸå¤±å‡½æ•°â€(truncated hinge loss function)</p><h5 id="4-å¤§é—´éš”äº¤å‰ç†µæŸå¤±å‡½æ•°"><a href="#4-å¤§é—´éš”äº¤å‰ç†µæŸå¤±å‡½æ•°" class="headerlink" title="(4) å¤§é—´éš”äº¤å‰ç†µæŸå¤±å‡½æ•°"></a>(4) å¤§é—´éš”äº¤å‰ç†µæŸå¤±å‡½æ•°</h5><p>ä¸Šé¢æåˆ°çš„ç½‘ç»œè¾“å‡ºç»“æœ $h$ å®é™…ä¸Šå¸‚å…¨è¿æ¥å±‚å‚æ•° $W$ ä¸è¯¥å±‚ç‰¹å¾å‘é‡ $x_i$çš„å†…ç§¯ï¼Œ å³ $h=W^Tx_i$ã€‚å› æ­¤ä¼ ç»Ÿçš„äº¤å‰ç†µæŸå¤±è¿˜å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">L_{softmax\ loss} = -\frac{1}{N}\sum_{i=1}^{N}log(\frac{e^{h_{y_i}}}{\sum_{j=1}^{C}e^{h_j}}) \\= -\frac{1}{N}\sum_{i=1}^{N}log(\frac{e^{W^T_{yi}x_i}}{\sum_{j=1}^{C}e^{W^T_jx_i}}) \\</script><p>å…¶ä¸­ï¼Œ $W_i^T$ ä¸º$W$ ç¬¬iåˆ—å‚æ•°å€¼ã€‚æ ¹æ®å†…ç§¯çš„å®šä¹‰ï¼Œä¸Šå¼å¯ä»¥å˜æ¢ä¸º</p><script type="math/tex; mode=display">L_{softmax\ loss} = -\frac{1}{N}\sum_{i=1}^{N}log(\frac{e^{||W_{yi}||||x_i||cos(\theta_{yi})}}{\sum_{j=1}^{C}e^{||W_{j}||||x_i||cos(\theta_j)}})</script><p>å¼ä¸­çš„ $\theta_j(0\leq\theta_j \leq \pi)$ ä¸ºå‘é‡ $W_i^T$ å’Œ $x_i$çš„å¤¹è§’ã€‚ä»¥äºŒåˆ†ç±»ä¸ºä¾‹ï¼Œå¯¹éš¶å±äºç¬¬ä¸€ä¸ªç±»åˆ«çš„æŸæ ·æœ¬ $x_i$è€Œè¨€ï¼Œ ä¸ºåˆ†ç±»æ­£ç¡®ï¼Œä¼ ç»Ÿçš„äº¤å‰ç†µæŸå¤±å‡½æ•°éœ€è¿«ä½¿å­¦åˆ°çš„å‚æ•°æ»¡è¶³ $W_1^Tx_i &gt; W_2^Tx_i$, äº¦å³$||W_1||||x_i|| cos(\theta) &gt; ||W2||||x_i||cos(\theta)$ã€‚å¤§é—´éš”äº¤å‰ç†µæŸå¤±å‡½æ•°ä¸ºäº†ä½¿ç‰¹å¾æ›´åŠ å…·æœ‰åˆ†è¾¨èƒ½åŠ›ï¼Œåˆ™å†æ¬¡åŸºç¡€ä¸Šè¦æ±‚äºŒè€…å·®å¼‚æ›´å¤§ï¼Œå³å¼•å…¥ $m$ â€œæ‹‰å¤§â€ä¸¤è€…å·®è·ï¼Œè¿™ä¾¿æ˜¯â€œå¤§é—´éš”â€åç§°çš„ç”±æ¥ã€‚$||W_1||||x_i||cos(m\theta_1) \geq ||W2||||x_i||cos(\theta_2) , (0\leq\theta_1\leq\frac{\pi}{m})$ã€‚å¼ä¸­ $m$ ä¸ºæ­£æ•´æ•°ï¼Œèµ·åˆ°æ§åˆ¶é—´éš”å¤§å°çš„ä½œç”¨ï¼Œ$m$ è¶Šå¤§ã€‚ç±»é—´é—´éš”è¶Šå¤§ï¼Œåä¹‹äº¦ç„¶ã€‚ç‰¹åˆ«åœ°ï¼Œ å½“ $m=1$ æ—¶ï¼Œ å¤§é—´éš”äº¤å‰ç†µæŸå¤±å‡½æ•°å³é€€åŒ–ä¸ºä¼ ç»Ÿäº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚</p><p>ç»¼ä¸Šå¯å¾—ï¼š</p><script type="math/tex; mode=display">||W_1||||x_i||cos(\theta_1) \geq ||W_1||||x_i||cos(m\theta_1) \geq ||W2||||x_i||cos(\theta_2) , (0\leq\theta_1\leq\frac{\pi}{m})</script><p>å¯ä»¥å‘ç°ï¼Œä¸Šå¼ä¸ä»…æ»¡è¶³ä¼ ç»Ÿäº¤å‰ç†µæŸå¤±å‡½æ•°çš„çº¦æŸï¼Œåœ¨ç¡®ä¿åˆ†ç±»æ­£ç¡®çš„åŒæ—¶å¢å¤§äº†ä¸åŒç±»åˆ«é—´åˆ†ç±»çš„ç½®ä¿¡åº¦ï¼Œè¿™æœ‰åŠ©äºè¿›ä¸€æ­¥æå‡ç‰¹å¾åˆ†è¾¨èƒ½åŠ›ã€‚</p><p>å¤§é—´éš”äº¤å‰ç†µæŸå¤±å‡½æ•°çš„å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">L_{large-margin\ softmax\ loss} = -\frac{1}{N}\sum^{1}_{i=1}log(\frac{e^{||W_i||||x_i||\phi(\theta_{y_i})}}{e^{||W_i||||x_i||\phi(\theta_{yi})}+\sum_{j\neq y_i}e^{||W_j||||x_i||\phi(\theta_{j})}})</script><p>å¯ä»¥å‘ç°ï¼Œä¸Šå¼ä¸$Softmax$ æŸå¤±å‡½æ•°çš„åŒºåˆ«ä»…ä»…åœ¨äºç¬¬ $i$ ç±»åˆ†ç±»é—´éš” â€œæ‹‰å¤§â€äº†ï¼šç”±  $cos(\theta<em>{y_i})$ å˜ä¸º $\phi(\theta</em>{y_i})$, å…¶ä¸­ï¼š</p><script type="math/tex; mode=display">\phi(\theta) = \begin{equation}  \left\{               \begin{array}{**lr**}               cos(m\theta), 0 \leq \theta \leq \frac{\pi}{m}&  \\               \mathcal{D}(\theta) , \frac{\pi}{m} < \theta \leq \pi &\\                  \end{array}  \right.  \end{equation}</script><p>å¼ä¸­ï¼Œ$\mathcal{D}(\theta)$ åªéœ€è¦æ»¡è¶³â€œå•è°ƒé€’å‡â€æ¡ä»¶ï¼Œ ä¸” $D(\frac{\pi}{m})=cos\frac{\pi}{m})$ã€‚</p><h5 id="5-ä¸­å¿ƒæŸå¤±å‡½æ•°"><a href="#5-ä¸­å¿ƒæŸå¤±å‡½æ•°" class="headerlink" title="(5) ä¸­å¿ƒæŸå¤±å‡½æ•°"></a>(5) ä¸­å¿ƒæŸå¤±å‡½æ•°</h5><p>å¤§äº¤å‰ç†µæŸå¤±å‡½æ•°ä¸»è¦è€ƒè™‘å¢å¤§ç±»é—´è·ç¦»ï¼Œè€Œä¸­å¿ƒæŸå¤±å‡½æ•°åˆ™åœ¨è€ƒè™‘ç±»é—´è·ç¦»çš„åŒæ—¶è¿˜å°†ä¸€äº›æ³¨æ„åŠ›æ”¾åœ¨å‡å°ç±»é—´å·®å¼‚ä¸Šã€‚ä¸­å¿ƒæŸå¤±å‡½æ•°çš„å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">L_{center\ loss} = \frac{1}{2}\sum_{i=1}^{N}||x_i - c_{y_i}||_2^2</script><p>å…¶ä¸­ï¼Œ $c_{y_i}$ ä¸º ç¬¬ $y_i$ ç±»æ‰€æœ‰æ·±åº¦ç‰¹å¾å‡å€¼çš„ä¸­å¿ƒï¼Œæ•…åâ€œä¸­å¿ƒæŸå¤±å‡½æ•°â€ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç”±äºä¸­å¿ƒæŸå¤±å‡½æ•°æœ¬èº«è€ƒè™‘ç±»å†…å·®å¼‚ï¼Œå› æ­¤åº”è¯¥è®²ä¸­å¿ƒæŸå¤±å‡½æ•°ä¸å…¶ä»–ä¸»è¦è€ƒè™‘ç±»é—´è·ç¦»çš„æŸå¤±å‡½æ•°é…åˆä½¿ç”¨ï¼Œå¦‚äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œè¿™æ ·ç½‘ç»œæœ€ç»ˆç›®æ ‡å½¢å¼å¯è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">L_{final} = L_{cross\ entropy\ loss} + \lambda L_{center\ loss}(h, y_i)  \\= -\frac{1}{N}\sum_{i=1}^{N}log(\frac{e_{h_{y_i}}}{\sum_{j=1}^{C}e^{h_j}})+\frac{\lambda}{2}\sum_{i=1}^{N}||x_i - c_{y_i}||_2^2</script><h4 id="2-å›å½’ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°"><a href="#2-å›å½’ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°" class="headerlink" title="2. å›å½’ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°"></a>2. å›å½’ä»»åŠ¡çš„ç›®æ ‡å‡½æ•°</h4><h5 id="1-mathcal-L1-æŸå¤±å‡½æ•°"><a href="#1-mathcal-L1-æŸå¤±å‡½æ•°" class="headerlink" title="(1) $\mathcal{L1}$ æŸå¤±å‡½æ•°"></a>(1) $\mathcal{L1}$ æŸå¤±å‡½æ•°</h5><script type="math/tex; mode=display">L_{\mathcal{l1}} = \frac{1}{N}\sum_{i=1}^{N}\sum_{t=1}^{M}||y_t^i-\hat{y}t^i||</script><h5 id="2-mathcal-L2-æŸå¤±å‡½æ•°"><a href="#2-mathcal-L2-æŸå¤±å‡½æ•°" class="headerlink" title="(2) $\mathcal{L2}$ æŸå¤±å‡½æ•°"></a>(2) $\mathcal{L2}$ æŸå¤±å‡½æ•°</h5><script type="math/tex; mode=display">L_{\mathcal{l2}} = \frac{1}{N}\sum_{i=1}^{N}\sum_{t=1}^{M}(||y_t^i-\hat{y}t^i||)^2</script><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œ $\mathcal{l_1}$ ä¸ $\mathcal{l_2}$ æŸå¤±å‡½æ•°åœ¨å›å½’ç²¾åº¦ä¸Šå‡ ä¹ç›¸å·®æ— å‡ ã€‚ä¸è¿‡åœ¨ä¸€äº›æƒ…å†µå…ˆ $\mathcal{l_2}$ æŸå¤±å‡½æ•°ä¼šç•¥ä¼˜äº $\mathcal{l_1}$ ï¼ŒåŒæ—¶æ”¶æ•›é€Ÿåº¦æ–¹é¢ $l_2$ æŸå¤±å‡½æ•°ä¹Ÿç•¥å¿«äº $\mathcal{l_1}$ æŸå¤±å‡½æ•°ã€‚</p><h5 id="3-Tukeyâ€™s-biweight-æŸå¤±å‡½æ•°"><a href="#3-Tukeyâ€™s-biweight-æŸå¤±å‡½æ•°" class="headerlink" title="(3) Tukeyâ€™s biweight æŸå¤±å‡½æ•°"></a>(3) Tukeyâ€™s biweight æŸå¤±å‡½æ•°</h5><p>Tukeyâ€™s biweight æŸå¤±å‡½æ•°æ˜¯ä¸€ç±»éå‡¸å‡½æ•°ï¼Œå…¶å¯å…‹æœåœ¨å›å½’ä»»åŠ¡ä¸­çš„åˆ©ç¾¤åº—æˆ–è€…æ ·æœ¬å™ªå£°å¯¹æ•´ä½“å›å½’æ¨¡å‹çš„å¹²æ‰°å’Œå½±å“ï¼Œæ˜¯å›å½’ä»»åŠ¡ä¸­ä¸€ç§å¥å£®çš„æŸå¤±å‡½æ•°ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\mathcal{L_{Tukey's\ biweight\ loss}} =\begin{equation}  \left\{               \begin{array}{**lr**}               \frac{c^2}{6N}\sum_{i=1}^{N}\sum_{t=1}^{M}[1-(1-(\frac{l_t^i}{c})^2)], |l_t^i| \leq c  \\               \frac{c^2{M}}{6}, å…¶ä»– &\\                  \end{array}  \right.  \end{equation}</script><p>å¼ä¸­ï¼Œ å¸¸æ•°  $c$ æŒ‡å®šäº†å‡½æ•°æ‹ç‚¹çš„ä½ç½®ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè¯¥è¶…å‚æ•°å¹¶ä¸éœ€è¦è®¤ä¸ºæŒ‡å®šã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ å½“ $c=4.6851$ æ—¶ï¼Œ $Tukeyâ€™s\ biweight $æŸå¤±å‡½æ•°å¯å–å¾—ä¸ $\mathcal{l_2}$ æŸå¤±å‡½æ•°åœ¨æœ€å°åŒ–ç¬¦åˆæ ‡å‡†æ­£æ€åˆ†å¸ƒæ—¶çš„æ®‹å·®ç±»ä¼¼çš„(95%æ¸è¿›)å›å½’æ•ˆæœã€‚</p><h4 id="3-å…¶ä»–ä»»åŠ¡çš„æŸå¤±å‡½æ•°"><a href="#3-å…¶ä»–ä»»åŠ¡çš„æŸå¤±å‡½æ•°" class="headerlink" title="3. å…¶ä»–ä»»åŠ¡çš„æŸå¤±å‡½æ•°"></a>3. å…¶ä»–ä»»åŠ¡çš„æŸå¤±å‡½æ•°</h4><p>åœ¨ä¸€äº›å¦‚äººè„¸å¹´é¾„ä¼°è®¡ã€å¤´éƒ¨è§’åº¦è¯†åˆ«ç­‰ä»»åŠ¡æ ·æœ¬æ ‡è®°å…·æœ‰ä¸ç¡®å®šæ€§çš„ç‰¹æ®Šåœºæ™¯ä¸‹ï¼ŒåŸºäºæ ‡è®°åˆ†å¸ƒ(label distribution)çš„æŸå¤±å‡½æ•°ä¸å¤±ä¸ºä¸€ç§ä¼˜è´¨çš„é€‰æ‹©ã€‚å…·ä½“è€Œè¨€ï¼Œå‡è®¾ $h=(h_1, h_2, â€¦, h_C)^T$ ä¸ºæ¨¡å‹å¯¹äºè¾“å…¥æ ·æœ¬ $x_i$ çš„æœ€ç»ˆè¾“å‡ºç»“æœï¼Œé‚£ä¹ˆåœ¨åˆ©ç”¨æ ‡è®°åˆ†å¸ƒæŠ€æœ¯è§£å†³é—®é¢˜ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å°† $h$ è½¬åŒ–ä¸ºä¸€ä¸ªåˆæ³•åˆ†å¸ƒã€‚ä»¥softmax ä¸ºä¾‹å¯ä»¥å°† $h$ è½¬åŒ–ä¸º:</p><script type="math/tex; mode=display">\hat{y}_k = \frac{e^{h_k}}{\sum_{j=1}^{C}{e^{h_j}}}</script><p>å…¶ä¸­ï¼Œ$k \in {1,2,3,â€¦,C}$ ä»£è¡¨æ ‡è®°å‘é‡çš„ç¬¬ $k$ ç»´ã€‚</p><p>å¯ä»¥ç”¨Kullback-Leibleræ•£åº¦(KL divergence)æ¥åº¦é‡ $\hat{y}$ä¸çœŸå®æ ‡è®° $y$ ä¹‹é—´çš„è¯¯å·®ï¼š$\mathcal{L}_{KL\ loss}=\sum_k{y_klog\frac{y_k}{\hat{y}_k}}$ã€‚</p><p>ç”±äº $y<em>k$ ä¸ºå¸¸é‡ï¼Œä¸Šå¼ç­‰ä»·äºï¼š$\mathcal{L}</em>{KL\ loss} = -\sum_{k}{y_k}{log{\hat{y}_k}}$ã€‚é€šè¿‡è¯¥å¼å¯ä»¥è¡¡é‡æ ·æœ¬æ ‡è®°åˆ†å¸ƒä¸çœŸå®éƒ¨åˆ†ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶åˆ©ç”¨è¯¥å·®å¼‚æŒ‡å¯¼æ¨¡å‹è®­ç»ƒã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>model_evaluation</title>
    <link href="/2019/03/10/model-evaluation/"/>
    <url>/2019/03/10/model-evaluation/</url>
    
    <content type="html"><![CDATA[<h3 id="Chapter-2-æ¨¡å‹è¯„ä¼°"><a href="#Chapter-2-æ¨¡å‹è¯„ä¼°" class="headerlink" title="Chapter 2 æ¨¡å‹è¯„ä¼°"></a>Chapter 2 æ¨¡å‹è¯„ä¼°</h3><h4 id="1-å‡†ç¡®ç‡å’Œå¹³æ–¹æ ¹è¯¯å·®çš„ç¼ºé™·"><a href="#1-å‡†ç¡®ç‡å’Œå¹³æ–¹æ ¹è¯¯å·®çš„ç¼ºé™·" class="headerlink" title="1. å‡†ç¡®ç‡å’Œå¹³æ–¹æ ¹è¯¯å·®çš„ç¼ºé™·"></a>1. å‡†ç¡®ç‡å’Œå¹³æ–¹æ ¹è¯¯å·®çš„ç¼ºé™·</h4><h5 id="å‡†ç¡®ç‡"><a href="#å‡†ç¡®ç‡" class="headerlink" title="å‡†ç¡®ç‡"></a>å‡†ç¡®ç‡</h5><p>â€‹     <strong>å‡†ç¡®ç‡æ˜¯æŒ‡åˆ†ç±»æ­£ç¡®çš„æ ·æœ¬å æ ·æœ¬ä¸ªæ•°çš„æ¯”ä¾‹</strong>ï¼Œå³ <strong>$Accuracy  = \frac{n<em>{correct}}{n</em>{total}}$</strong> ,å…¶ä¸­ $n<em>{correct}$ ä¸ºè¢«æ­£ç¡®åˆ†ç±»çš„æ ·æœ¬ä¸ªæ•°ï¼Œ $n</em>{total}$ ä¸ºæ€»æ ·æœ¬çš„ä¸ªæ•°ã€‚</p><p>â€‹     å‡†ç¡®ç‡æ˜¯åˆ†ç±»é—®é¢˜ä¸­æœ€ç®€å•ä¹Ÿæ˜¯æœ€ç›´è§‚çš„è¯„ä»·æŒ‡æ ‡ï¼Œ ä½†å­˜åœ¨æ˜æ˜¾ç¼ºé™·ã€‚å½“<strong>ä¸åŒç±»åˆ«çš„æ ·æœ¬æ¯”ä¾‹éå¸¸ä¸å‡è¡¡</strong>æ—¶ï¼Œå æ¯”è¾ƒå¤§çš„ç±»åˆ«å¾€å¾€ä¼šæˆä¸ºå½±å“å‡†ç¡®ç‡æœ€ä¸»è¦çš„å› ç´ ã€‚æ¯”å¦‚ï¼Œå½“è´Ÿæ ·æœ¬å 99%æ—¶ï¼Œåˆ†ç±»å™¨æŠŠæ‰€æœ‰æ ·æœ¬é¢„æµ‹ä¸ºè´Ÿæ ·æœ¬ä¹Ÿå¯ä»¥è·å¾—99% çš„å‡†ç¡®ç‡ã€‚ </p><p>â€‹      ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æ›´ä¸ºæœ‰æ•ˆçš„<strong>å¹³å‡å‡†ç¡®ç‡</strong>(æ¯ä¸ªç±»åˆ«ä¸‹çš„æ ·æœ¬å‡†ç¡®ç‡çš„ç®—æœ¯å¹³å‡)ä½œä¸ºè¯„ä¼°çš„æŒ‡æ ‡ã€‚</p><h5 id="å¹³æ–¹æ ¹è¯¯å·®-RMSE"><a href="#å¹³æ–¹æ ¹è¯¯å·®-RMSE" class="headerlink" title="å¹³æ–¹æ ¹è¯¯å·® RMSE"></a>å¹³æ–¹æ ¹è¯¯å·® RMSE</h5><p>â€‹      RMSE å¹³æ–¹æ ¹è¯¯å·®ç»å¸¸è¢«ç”¨æ¥è¡¡é‡å›å½’æ¨¡å‹çš„å¥½åï¼Œå…¶è®¡ç®—å…¬å¼ä¸º $RMSE = \sqrt{\frac{1}{n}\sum^{n}<em>{i-1}{(y</em>{i}-\hat{y_{i}})^2}}$, å…¶ä¸­ $y_i$  æ˜¯ç¬¬iä¸ªæ ·æœ¬ç‚¹çš„çœŸå®å€¼å—ï¼Œ$\hat{y_i}$  æ˜¯ ç¬¬iä¸ªæ ·æœ¬çš„é¢„æµ‹å€¼ï¼Œn æ˜¯æ ·æœ¬ç‚¹çš„ä¸ªæ•°ã€‚</p><p>â€‹     ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒRMSE èƒ½å¤Ÿæ›´å¥½çš„åæ˜ å›å½’æ¨¡å‹é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„åç¦»ç¨‹åº¦ã€‚ä½†åœ¨å®é™…é—®é¢˜ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸ªåˆ«åç¦»ç¨‹åº¦éå¸¸å¤§çš„<strong>ç¦»ç¾¤ç‚¹</strong>(Outlier),   å³ä½¿ç¦»ç¾¤ç‚¹æ•°é‡éå¸¸å°‘ï¼Œä¹Ÿä¼šè®©RSME æŒ‡æ ‡å˜å¾—éå¸¸å·®ã€‚</p><p>â€‹     é’ˆå¯¹è¿™ç§æƒ…å†µä»ä¸‰ä¸ªè§’åº¦è¿›è¡Œè§£å†³ã€‚ï¼ˆ1ï¼‰ å¦‚ä½•è®¤å®šè¿™äº›ç¦»ç¾¤ç‚¹æ˜¯â€œå™ªå£°ç‚¹â€çš„è¯ï¼Œå°±éœ€è¦åœ¨æ•°æ®é¢„å¤„ç†çš„é˜¶æ®µæŠŠè¿™äº›å™ªå£°<strong>è¿‡æ»¤</strong>æ‰ã€‚ï¼ˆ2ï¼‰å¦‚æœä¸è®¤ä¸ºè¿™äº›ç¦»ç¾¤ç‚¹æ˜¯â€œå™ªå£°ç‚¹â€çš„è¯ï¼Œéœ€è¦è¿›ä¸€æ­¥<strong>æé«˜æ¨¡å‹çš„é¢„æµ‹èƒ½åŠ›</strong>ï¼Œå°†ç¦»ç¾¤ç‚¹äº§ç”Ÿçš„æœºåˆ¶å»ºæ¨¡è¿›å»ã€‚ï¼ˆ3ï¼‰æ‰¾ä¸€ä¸ªæ›´åˆé€‚çš„æŒ‡æ ‡æ¥è¯„ä¼°æ¨¡å‹ã€‚æ¯”å¦‚å¹³å‡ç»å¯¹ç™¾åˆ†æ¯”è¯¯å·®<strong>MAPE</strong>ï¼Œ å®ƒå®šä¹‰ä¸º  $MAPE  = \sum_{i=1}^{n}\lvert \frac{y_i - \hat{y_i}}{y_i}\rvert \times\frac{100}{n}$,  ç›¸æ¯”äº RSMEï¼Œ MAPE ç›¸å½“äºæŠŠè¿™ä¸ªç‚¹çš„è¯¯å·®è¿›è¡Œäº†å½’ä¸€åŒ–ï¼Œé™ä½äº†ä¸ªåˆ«ç¦»ç¾¤ç‚¹å¸¦æ¥çš„è¯¯å·®å½±å“ã€‚</p><h4 id="2-æ··æ·†çŸ©é˜µã€P-Ræ›²çº¿ã€ROC-æ›²çº¿"><a href="#2-æ··æ·†çŸ©é˜µã€P-Ræ›²çº¿ã€ROC-æ›²çº¿" class="headerlink" title="2. æ··æ·†çŸ©é˜µã€P-Ræ›²çº¿ã€ROC æ›²çº¿"></a>2. æ··æ·†çŸ©é˜µã€P-Ræ›²çº¿ã€ROC æ›²çº¿</h4><p><img src="/2019/03/10/model-evaluation/matrix.png" alt="æ··æ·†çŸ©é˜µ"></p><p>â€‹        <strong>ç²¾ç¡®ç‡ï¼š</strong> åˆ†ç±»æ­£ç¡®çš„æ­£æ ·æœ¬ä¸ªæ•°å åˆ†ç±»å™¨åˆ¤å®šä¸ºæ­£æ ·æœ¬çš„æ ·æœ¬ä¸ªæ•°çš„æ¯”ä¾‹ã€‚å³: $Precision = \frac{TP}{TP+FP}$ã€‚</p><p>â€‹        <strong>å¬å›ç‡ï¼š</strong> åˆ†ç±»æ­£ç¡®çš„æ­£æ ·æœ¬ä¸ªæ•°å çœŸæ­£æ­£æ ·æœ¬ä¸ªæ•°çš„æ¯”ä¾‹ã€‚å³ï¼š$Recall = \frac{TP}{TP+FN}$ã€‚</p><p>â€‹        Precision å€¼å’Œ Recall å€¼æ˜¯æ—¢çŸ›ç›¾åˆç»Ÿä¸€çš„ä¸¤ä¸ªæŒ‡æ ‡ï¼Œä¸ºäº†æé«˜Precisionå€¼ï¼Œåˆ†ç±»å™¨éœ€è¦å°½é‡åœ¨â€æ›´æœ‰æŠŠæ¡â€œæ—¶æ‰æŠŠæ ·æœ¬é¢„æµ‹ä¸ºæ­£æ ·æœ¬ï¼Œä½†æ­¤æ—¶ç”±äºè¿‡äºä¿å®ˆè€Œæ¼æ‰å¾ˆå¤šâ€æ²¡æœ‰æŠŠæ¡â€œçš„æ­£æ ·æœ¬ï¼Œå¯¼è‡´Recallå€¼é™ä½ã€‚</p><p>â€‹        P-R æ›²çº¿èƒ½å¤Ÿç»¼åˆè¯„ä¼°ä¸€ä¸ªæ’åºæ¨¡å‹çš„å¥½åã€‚P-R æ›²çº¿çš„æ¨ªè½´æ˜¯å¬å›ç‡ï¼Œçºµè½´æ˜¯ç²¾ç¡®ç‡ã€‚å¯¹äºä¸€ä¸ªæ’åºæ¨¡å‹æ¥è¯´ï¼Œ æŸP-Ræ›²çº¿ä¸Šçš„ä¸€ä¸ªç‚¹ä»£è¡¨ç€ï¼Œåœ¨æŸä¸€é˜ˆå€¼ä¸‹ï¼Œæ¨¡å‹å°†å¤§äºè¯¥é˜ˆå€¼çš„ç»“æœåˆ¤å®šä¸ºæ­£æ ·æœ¬ï¼Œå°äºè¯¥é˜ˆå€¼çš„ç»“æœåˆ¤å®šä¸ºè´Ÿæ ·æœ¬ï¼Œæ­¤æ—¶è¿”å›çš„ç»“æœå¯¹åº”çš„å¬å›ç‡å’Œç²¾ç¡®ç‡ã€‚æ•´æ¡P-Ræ›²çº¿æ˜¯é€šè¿‡å°†é˜ˆå€¼ä»é«˜åˆ°åº•ç§»åŠ¨è€Œç”Ÿæˆçš„ã€‚</p><p>â€‹        <strong>å‡é˜³æ€§ç‡</strong>ï¼šåˆ†ç±»é”™è¯¯çš„æ­£æ ·æœ¬(é¢„æµ‹ä¸ºæ­£æ ·æœ¬ï¼Œå®é™…æ˜¯æ­£æ ·æœ¬)å çœŸæ­£è´Ÿæ ·æœ¬çš„æ¯”ä¾‹ã€‚å³ $FPR = \frac{FP}{FP+TN}$ã€‚</p><p>â€‹        <strong>çœŸé˜³æ€§ç‡</strong>ï¼šåˆ†ç±»æ­£ç¡®çš„æ­£æ ·æœ¬å çœŸæ­£æ­£æ ·æœ¬ä¸ªæ•°çš„æ¯”ä¾‹ã€‚$TPR = \frac{TP}{TP+FN}$ã€‚</p><p>â€‹        ROC æ›²çº¿æ˜¯é€šè¿‡ä¸æ–­ç§»åŠ¨åˆ†ç±»å™¨åŒºåˆ†æ­£è´Ÿé¢„æµ‹ç»“æœçš„é˜ˆå€¼æ¥ç”Ÿæˆæ›²çº¿ä¸Šçš„ä¸€ç»„å…³é”®ç‚¹çš„ã€‚ä»æœ€é«˜çš„å¾—åˆ†å¼€å§‹ï¼ˆå®é™…ä¸Šæ˜¯ä»æ­£æ— ç©·å¼€å§‹ï¼Œå¯¹åº”ROC æ›²çº¿çš„é›¶ç‚¹ï¼‰ï¼Œ é€æ¸è°ƒæ•´åˆ°æœ€ä½å¾—åˆ†ï¼Œæ¯ä¸€ä¸ªé˜ˆå€¼éƒ½ä¼šå¯¹åº”ä¸€ä¸ªFPRå’ŒTPRï¼Œåœ¨ROCå›¾ä¸Šç»˜åˆ¶å‡ºæ¯ä¸ªé˜ˆå€¼å¯¹åº”çš„ä½ç½®ï¼Œå†è¿æ¥æ‰€æœ‰ç‚¹é…’å¾—åˆ°æœ€ç»ˆçš„ROC æ›²çº¿ã€‚å¦å¤–æ‰€è°“çš„AUC æ˜¯æŒ‡ROC æ›²çº¿ä¸‹çš„é¢ç§¯å¤§å°ï¼Œè¯¥å€¼èƒ½å¤Ÿé‡åŒ–åœ°ååº”åŸºäºROC æ›²çº¿è¡¡é‡å‡ºçš„æ¨¡å‹æ€§èƒ½ã€‚è®¡ç®—AUC çš„å€¼åªéœ€è¦æ²¿ç€ROCæ¨ªè½´ç§¯åˆ†å³å¯ã€‚ç”±äºROC æ›²çº¿ä¸€èˆ¬éƒ½å¤„äºy=x è¿™æ¡ç›´çº¿çš„ä¸Šæ–¹ï¼Œæ‰€ä»¥AUC çš„å–å€¼ä¸€èˆ¬åœ¨0.5-1 ä¹‹é—´ã€‚AUC è¶Šå¤§ï¼Œè¯´æ˜åˆ†ç±»å™¨è¶Šå¯èƒ½æŠŠçœŸæ­£çš„æ­£æ ·æœ¬æ’åœ¨å‰é¢ï¼Œåˆ†ç±»æ€§èƒ½è¶Šå¥½ã€‚</p><p>â€‹    ç›¸æ¯”äº P-R æ›²çº¿ï¼ŒROC æ›²çº¿æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå½“æ”¿åºœæ ·æœ¬çš„åˆ†å¸ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ ROC æ›²çº¿çš„å½¢çŠ¶èƒ½å¤ŸåŸºæœ¬ä¿æŒä¸å˜ï¼Œè€ŒP-R æ›²çº¿çš„å½¢çŠ¶ä¸€èˆ¬ä¼šå‘ç”Ÿæ¯”è¾ƒå‰§çƒˆçš„å˜åŒ–ã€‚æ‰€ä»¥ ROC æ›²çº¿çš„ä½¿ç”¨åœºæ™¯æ›´å¤šï¼Œè¢«å¹¿æ³›ç”¨äºæ’åºã€æ¨èã€å¹¿å‘Šç­‰é¢†åŸŸã€‚</p><p>â€‹        <strong>F1-Score</strong> ä¹Ÿèƒ½ç»¼åˆåæ˜ ä¸€ä¸ªæ’åºæ¨¡å‹çš„æ€§èƒ½ã€‚å®ƒæ˜¯ç²¾å‡†ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡å€¼ã€‚å®ƒçš„å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">F1 = \frac{2*precision*recall}{precision+recall}</script><h4 id="3-ä½™å¼¦è·ç¦»çš„åº”ç”¨"><a href="#3-ä½™å¼¦è·ç¦»çš„åº”ç”¨" class="headerlink" title="3. ä½™å¼¦è·ç¦»çš„åº”ç”¨"></a>3. ä½™å¼¦è·ç¦»çš„åº”ç”¨</h4><p>â€‹        å¯¹äºä¸¤ä¸ªå‘é‡ Aå’Œ B ï¼Œå…¶ä½™å¼¦ç›¸ä¼¼åº¦çš„å®šä¹‰ä¸º $cos(A,B) = \frac{A\cdot B}{\Vert A \Vert_2 \Vert B \Vert_2}$ã€‚ å³ä¸¤ä¸ªå‘é‡å¤¹è§’çš„ä½™å¼¦ï¼Œå…³æ³¨çš„æ˜¯å‘é‡ä¹‹é—´çš„è§’åº¦å…³ç³»ï¼Œå¹¶ä¸å…³å¿ƒå®ƒä»¬çš„ç»å¯¹å¤§å°ï¼Œå…¶å–å€¼èŒƒå›´æ˜¯[-1, 1]ã€‚ ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œæ¬§å¼è·ç¦»çš„æ•°å€¼å—ç»´åº¦çš„å½±å“ï¼ŒèŒƒå›´ä¸å›ºå®šï¼Œå¹¶ä¸”å«ä¹‰ä¹Ÿæ¯”è¾ƒæ¨¡ç³Šã€‚æ€»ä½“æ¥è¯´ï¼Œæ¬§å¼è·ç¦»ä½“ç°åœ¨æ•°å€¼ä¸Šçš„ç»å¯¹å·®å¼‚ï¼Œè€Œä½™å¼¦è·ç¦»åˆ™ä½“ç°æ–¹å‘ä¸Šçš„ç›¸å¯¹å·®å¼‚ã€‚æ¯”å¦‚ç»Ÿè®¡ä¸¤éƒ¨å‰§çš„ç”¨æˆ·è§‚çœ‹è¡Œä¸ºï¼Œç”¨æˆ·A çš„è§‚çœ‹å‘é‡æ˜¯ï¼ˆ0ï¼Œ1ï¼‰ï¼Œ è€Œç”¨æˆ·B çš„è§‚çœ‹å‘é‡ä¸ºï¼ˆ1ï¼Œ0ï¼‰ï¼›æ­¤æ—¶ä¸¤è€…çš„ä½™å¼¦è·ç¦»å¾ˆå¤§ï¼Œè€Œæ¬§å¼è·ç¦»å¾ˆå°ï¼›æˆ‘ä»¬åˆ†æä¸¤ä¸ªç”¨æˆ·ä¸åŒè§†é¢‘çš„åå¥½ï¼Œæ›´å…³æ³¨ç›¸å¯¹å·®å¼‚ï¼Œæ˜¾ç„¶åº”å½“ä½¿ç”¨ä½™å¼¦è·ç¦»ã€‚è€Œå½“æˆ‘ä»¬åˆ†æç”¨æˆ·æ´»è·ƒåº¦æ—¶ï¼Œä»¥ç™»å½•æ¬¡æ•°å’Œå¹³å‡è§‚çœ‹å¸‚åœºä½œä¸ºè°ƒæ•´ï¼Œä½™å¼¦è·ç¦»ä¼šè®¤ä¸ºï¼ˆ1ï¼Œ10ï¼‰ï¼ˆ10ï¼Œ100ï¼‰ ä¸¤ä¸ªç”¨æˆ·è·ç¦»å¾ˆè¿‘ï¼›ä½†æ˜¯æ˜¾ç„¶ä¸¤ä¸ªç”¨æˆ·æ´»è·ƒåº¦æœ‰ç€æå¤§å·®å¼‚çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬è¦å…³æ³¨æ•°å€¼çš„ç»å¯¹å·®å¼‚ï¼Œåº”å½“ä½¿ç”¨æ¬§å¼è·ç¦»ã€‚</p><p>â€‹        è€ƒæŸ¥ä¸€ä¸ªè·ç¦»æ˜¯å¦æ˜¯ä¸¥æ ¼å®šä¹‰çš„è·ç¦»ã€‚è¦ä»è·ç¦»çš„å®šä¹‰å‡ºå‘ï¼šåœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå¦‚æœæ¯ä¸€å¯¹å…ƒç´ å‡å¯å”¯ä¸€å†³å®šä¸€ä¸ªå®æ•°ï¼Œä½¿å¾—ä¸‰æ¡è·ç¦»å…¬ç†ï¼ˆæ­£å®šæ€§ã€å¯¹ç§°æ€§ã€ä¸‰è§’ä¸ç­‰å¼ï¼‰æˆç«‹ï¼Œåˆ™è¯¥å®æ•°å¯ç§°ä¸ºè¿™å¯¹å…ƒç´ ä¹‹é—´çš„è·ç¦»ã€‚ä»¥ä½™å¼¦è·ç¦»ä¸ºä¾‹ï¼š</p><ul><li><p>æ­£å®šå‹ï¼š$dist(A, B) = 1-  cos\theta \ge 0 $ æ’æˆç«‹ï¼Œ ç‰¹åˆ«åœ°ï¼Œæœ‰  $dist(A, B) = 0 \Leftrightarrow \Vert A \Vert_2 \Vert B \Vert_2 = AB \Leftrightarrow A=B$</p><p>å› æ­¤ä½™å¼¦è·ç¦»æ»¡è¶³æ­£å®šæ€§ã€‚</p></li><li><p>å¯¹ç§°æ€§ï¼š </p></li><li><script type="math/tex; mode=display">dist(A, B) = 1- cos(A,B) = \frac{\Vert A \Vert_2 \Vert B \Vert_2 - A\cdot B}{\Vert A \Vert_2 \Vert B \Vert_2} = \frac{\Vert B \Vert_2 \Vert A \Vert_2 - A\cdot B}{\Vert A \Vert_2 \Vert B \Vert_2} = dist(B, A)</script><p>å› æ­¤ï¼Œä½™å¼¦è·ç¦»æ»¡è¶³å¯¹ç§°æ€§ã€‚</p></li><li><p>ä¸‰è§’ä¸ç­‰å¼ï¼šè¯¥æ€§è´¨å¹¶ä¸æˆç«‹ï¼Œä¸‹é¢ç»™å‡ºä¸€ä¸ªåä¾‹ã€‚ç»™å®š A = (1, 0)ï¼Œ B = (1, 1)ï¼ŒC=ï¼ˆ0ï¼Œ1ï¼‰ï¼Œåˆ™æœ‰</p><script type="math/tex; mode=display">dist(A, B) = 1 - \frac{\sqrt{2}}{2}</script><script type="math/tex; mode=display">dist(B, C) = 1 - \frac{\sqrt{2}}{2}</script><script type="math/tex; mode=display">dist(A,C) = 1</script><p>å› æ­¤æœ‰ $dist(A, B)+dist(B,C) = 2-\sqrt{2} &lt; 1 = dist(A, C)$</p></li></ul><p>åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œè¢«ä¿—ç§°ä¸ºè·ç¦»ï¼Œå´ä¸æ»¡è¶³ä¸‰æ¡è·ç¦»å…¬ç†çš„ä¸ä»…ä»…æœ‰ä½™å¼¦è·ç¦»ï¼Œè¿˜æœ‰KLè·ç¦»ï¼Œä¹Ÿå«ç›¸å¯¹ç†µï¼Œ å®ƒå¸¸ç”¨äºè®¡ç®—ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ï¼Œä½†ä¸æ»¡è¶³å¯¹ç§°æ€§å’Œä¸‰è§’ä¸ç­‰å¼ã€‚</p><h4 id="4-ä¸ºä»€ä¹ˆå¯¹æ¨¡å‹è¿›è¡Œè¿‡å……åˆ†çš„ç¦»çº¿è¯„ä¼°ä¹‹åï¼Œè¿˜è¦è¿›è¡Œåœ¨çº¿A-B-æµ‹è¯•ï¼Ÿå¦‚ä½•è¿›è¡ŒA-B-æµ‹è¯•ï¼Ÿ"><a href="#4-ä¸ºä»€ä¹ˆå¯¹æ¨¡å‹è¿›è¡Œè¿‡å……åˆ†çš„ç¦»çº¿è¯„ä¼°ä¹‹åï¼Œè¿˜è¦è¿›è¡Œåœ¨çº¿A-B-æµ‹è¯•ï¼Ÿå¦‚ä½•è¿›è¡ŒA-B-æµ‹è¯•ï¼Ÿ" class="headerlink" title="4. ä¸ºä»€ä¹ˆå¯¹æ¨¡å‹è¿›è¡Œè¿‡å……åˆ†çš„ç¦»çº¿è¯„ä¼°ä¹‹åï¼Œè¿˜è¦è¿›è¡Œåœ¨çº¿A/B æµ‹è¯•ï¼Ÿå¦‚ä½•è¿›è¡ŒA/B æµ‹è¯•ï¼Ÿ"></a>4. ä¸ºä»€ä¹ˆå¯¹æ¨¡å‹è¿›è¡Œè¿‡å……åˆ†çš„ç¦»çº¿è¯„ä¼°ä¹‹åï¼Œè¿˜è¦è¿›è¡Œåœ¨çº¿A/B æµ‹è¯•ï¼Ÿå¦‚ä½•è¿›è¡ŒA/B æµ‹è¯•ï¼Ÿ</h4><p>éœ€è¦è¿›è¡Œåœ¨çº¿ A/B æµ‹è¯•çš„<strong>åŸå› </strong>å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰ç¦»çº¿è¯„ä¼°<strong>æ— æ³•å®Œå…¨æ¶ˆé™¤æ¨¡å‹è¿‡æ‹Ÿåˆçš„å½±å“</strong>ï¼Œå› æ­¤ï¼Œå¾—å‡ºçš„ç¦»çº¿è¯„ä¼°ç»“æœæ— æ³•å®Œå…¨æ›¿ä»£çº¿ä¸Šè¯„ä¼°ç»“æœã€‚</p><p>ï¼ˆ2ï¼‰ç¦»çº¿è¯„ä¼°<strong>æ— æ³•å®Œå…¨è¿˜åŸçº¿ä¸Šå·¥ç¨‹ç¯å¢ƒ</strong>ã€‚ä¸€èˆ¬æ¥è®²ï¼Œç¦»çº¿è¯„ä¼°å¾€å¾€ä¸ä¼šè€ƒè™‘çº¿ä¸Šç¯å¢ƒçš„å»¶è¿Ÿã€æ•°æ®ä¸¢å¤±ã€æ ‡ç­¾æ•°æ®ç¼ºå¤±ç­‰æƒ…å†µã€‚å› æ­¤ï¼Œç¦»çº¿è¯„ä¼°çš„ç»“æœæ˜¯ç†æƒ³å·¥ç¨‹ç¯å¢ƒä¸‹çš„ç»“æœã€‚</p><p>ï¼ˆ3ï¼‰çº¿ä¸Šç³»ç»Ÿçš„<strong>æŸäº›å•†ä¸šæŒ‡æ ‡</strong>åœ¨ç¦»çº¿è¯„ä¼°ä¸­æ— æ³•è®¡ç®—ã€‚ç¦»çº¿è¯„ä¼°ä¸€èˆ¬æ˜¯é’ˆå¯¹æ¨¡å‹æœ¬èº«è¿›è¡Œè¯„ä¼°ï¼Œè€Œä¸æ¨¡å‹ç›¸å…³çš„å…¶ä»–æŒ‡æ ‡ï¼Œç‰¹åˆ«æ˜¯å•†ä¸šæŒ‡æ ‡ï¼Œå¾€å¾€æ— æ³•ç›´æ¥è·å¾—ã€‚</p><p>è¿›è¡ŒA/B æµ‹è¯•çš„ä¸»è¦æ‰‹æ®µæ˜¯å°†ç”¨æˆ·åˆ’åˆ†ä¸ºå®éªŒç»„å’Œå¯¹ç…§ç»„ï¼Œå¯¹å®éªŒç»„çš„ç”¨æˆ·æ–½ä»¥æ–°æ¨¡å‹ï¼Œå¯¹å¯¹ç…§ç»„çš„ç”¨æˆ·æ–½ä»¥å°±æ¨¡å‹ã€‚åœ¨åˆ’åˆ†ç”¨æˆ·çš„è¿‡ç¨‹è¿‡ç¨‹ä¸­ï¼Œè¦æ³¨æ„æ ·æœ¬çš„ç‹¬ç«‹æ€§ï¼ˆåŒä¸€ç”¨æˆ·æ¯æ¬¡åªèƒ½åˆ’åˆ†åˆ°ä¸€ä¸ªåˆ†ç»„ä¸­ï¼‰å’Œé‡‡æ ·æ–¹å¼çš„æ— åæ€§ï¼ˆåˆ’åˆ†è¿‡ç¨‹ä¸­é€‰å–çš„usr_id æ˜¯ä¸€ä¸ªéšæœºæ•°ï¼‰ã€‚    </p><h4 id="5-æ¨¡å‹è¯„ä¼°ä¸­çš„éªŒè¯æ–¹æ³•"><a href="#5-æ¨¡å‹è¯„ä¼°ä¸­çš„éªŒè¯æ–¹æ³•" class="headerlink" title="ã€€5. æ¨¡å‹è¯„ä¼°ä¸­çš„éªŒè¯æ–¹æ³•"></a>ã€€5. æ¨¡å‹è¯„ä¼°ä¸­çš„éªŒè¯æ–¹æ³•</h4><p><strong>Holdoutæ£€éªŒï¼š</strong>ã€€å°†åŸå§‹çš„æ ·æœ¬é›†åˆéšæœºåˆ’åˆ†ä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†ä¸¤éƒ¨åˆ†ã€‚è®­ç»ƒé›†ç”¨äºæ¨¡å‹è®­ç»ƒï¼Œã€€éªŒè¯é›†ç”¨äºæ¨¡å‹éªŒè¯ã€‚ã€€<strong>ç¼ºç‚¹</strong>ï¼šåœ¨éªŒè¯é›†ä¸Šè®¡ç®—å‡ºæ¥çš„æœ€åè¯„ä¼°æŒ‡æ ‡ä¸åŸå§‹åˆ†ç»„æœ‰å¾ˆå¤§å…³ç³»ã€‚</p><p><strong>äº¤å‰éªŒè¯ï¼š</strong>ã€€æœ€å¸¸è§çš„æ˜¯ï½‹-foldã€€äº¤å‰éªŒè¯ã€‚é¦–å…ˆå°†å…¨éƒ¨æ ·æœ¬åˆ’åˆ†æˆï½‹ä¸ªå¤§å°ç›¸ç­‰çš„æ ·æœ¬å­é›†ï¼›ä¾æ¬¡éå†è¿™ï½‹ä¸ªå­é›†ï¼Œæ¯æ¬¡æŠŠå½“å‰å­é›†ä½œä¸ºéªŒè¯é›†ï¼Œå…¶ä½™æ‰€æœ‰å­é›†ä½œä¸ºè®­ç»ƒé›†ï¼Œè¿›è¡Œæ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°ï¼›æœ€åæŠŠï½‹æ¬¡è¯„ä¼°æŒ‡æ ‡çš„å¹³å‡å€¼ä½œä¸ºæœ€ç»ˆçš„è¯„ä¼°æŒ‡æ ‡ã€‚åœ¨å®é™…å®éªŒä¸­ï¼Œï½‹ç»å¸¸å–10ã€‚</p><p><strong>è‡ªåŠ©æ³•(Bootstrap) : </strong> å¯¹äºæ€»æ•°ä¸ºï½ã€€çš„æ ·æœ¬é›†åˆï¼Œè¿›è¡Œï½æ¬¡æœ‰æ”¾å›çš„éšæœºé‡‡æ ·ï¼Œå¾—åˆ°å¤§å°ä¸ºï½çš„è®­ç»ƒé›†åˆã€‚ï½æ¬¡é‡‡æ ·è¿‡ç¨‹ä¸­ï¼Œæœ‰çš„æ ·æœ¬ä¼šè¢«é‡å¤é‡‡æ ·ï¼Œæœ‰çš„æ ·æœ¬æ²¡æœ‰è¢«æŠ½å‡ºè¿‡ï¼Œå°†è¿™äº›æ²¡æœ‰è¢«æŠ½å‡ºçš„æ ·æœ¬ä½œä¸ºéªŒè¯é›†ï¼Œè¿›è¡Œæ¨¡å‹éªŒè¯ã€‚</p><p>ã€€ã€€åœ¨è‡ªåŠ©é‡‡æ ·è¿‡ç¨‹ä¸­ã€‚å¯¹äºæ ·æœ¬è¿›è¡Œï½æ¬¡è‡ªåŠ©æŠ½æ ·ï¼Œå½“ï½è¶‹äºæ— ç©·å¤§æ—¶ï¼Œæœ€ç»ˆæœ‰å¤šå°‘æ•°æ®ä»æœªè¢«é€‰æ‹©è¿‡ï¼Ÿ</p><p>ä¸€ä¸ªæ ·æœ¬åœ¨ä¸€æ¬¡æŠ½æ ·è¿‡ç¨‹ä¸­æœªè¢«æŠ½ä¸­çš„æ¦‚ç‡ä¸ºã€€$1 - \frac{1}{n} $ï¼Œã€€ï½æ¬¡æŠ½æ ·å‡æœªè¢«æŠ½ä¸­çš„æ¦‚ç‡ä¸º $ï¼ˆï¼‘-\frac{1}{n})^n$ã€‚ å½“ï½è¶‹äºæ— ç©·å¤§æ—¶ï¼Œæ¦‚ç‡ä¸ºã€€</p><script type="math/tex; mode=display">{\lim_{n\to+\infty}}(1-\frac{1}{n})^n ã€€ = \lim_{n\to\infty}\frac{1}{(1+\frac{1}{n-1})^n}ã€€ = \frac{1}{\lim_{n\to\infty}(1+\frac{1}{n-1})^{n-1}} Ã—\frac{1}{\lim_{n\to\infty}(1+\frac{1}{n-1})}   = \frac{1}{e}    \approx 0.368</script><h4 id="6-è¶…å‚æ•°è°ƒä¼˜"><a href="#6-è¶…å‚æ•°è°ƒä¼˜" class="headerlink" title="ã€€6. è¶…å‚æ•°è°ƒä¼˜"></a>ã€€6. è¶…å‚æ•°è°ƒä¼˜</h4><p><strong>ç½‘æ ¼æœç´¢ï¼š</strong>ã€€ç½‘æ ¼æœç´¢å¯èƒ½æ˜¯æœ€ç®€å•ï¼Œåº”ç”¨æœ€å¹¿æ³›çš„è¶…å‚æ•°æœç´¢ç®—æ³•ï¼Œå®ƒé€šè¿‡æŸ¥æ‰¾æœç´¢èŒƒå›´å†…çš„æ‰€æœ‰çš„ç‚¹æ¥ç¡®å®šæœ€ä¼˜å€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå…ˆä½¿ç”¨è¾ƒå¹¿çš„æœç´¢èŒƒå›´å’Œè¾ƒå¤§çš„æ­¥é•¿ï¼Œæ¥å¯»æ‰¾å…¨å±€æœ€ä¼˜å€¼å¯èƒ½çš„ä½ç½®ï¼›ç„¶åä¼šé€æ¸ç¼©å°æœç´¢èŒƒå›´å’Œæ­¥é•¿ï¼Œæ¥å¯»æ‰¾æ›´ç²¾ç¡®çš„æœ€ä¼˜å€¼ã€‚</p><p><strong>éšæœºæœç´¢ï¼š</strong>ã€€åœ¨æœç´¢èŒƒå›´å†…éšæœºé€‰å–æ ·æœ¬ç‚¹è€Œä¸æ˜¯æµ‹è¯•ä¸Šç•Œå’Œä¸‹ç•Œä¹‹é—´ä¹‹é—´çš„æ‰€æœ‰å€¼ã€‚å®ƒçš„ç†è®ºä¾æ®æ˜¯å¦‚æœæ ·æœ¬ç‚¹è¶³å¤Ÿå¤§ï¼Œé‚£ä¹ˆé€šè¿‡éšæœºé‡‡æ ·ä¹Ÿèƒ½å¤§æ¦‚ç‡æ‰¾åˆ°å…¨å±€æœ€ä¼˜å€¼æˆ–è€…è¿‘ä¼¼å€¼ã€ã€‚</p><p><strong>è´å¶æ–¯ä¼˜åŒ–ç®—æ³•ï¼š</strong>è´å¶æ–¯ä¼˜åŒ–ç®—æ³•é€šè¿‡å¯¹ç›®æ ‡å‡½æ•°çš„å½¢çŠ¶è¿›è¡Œå­¦ä¹ ï¼Œæ‰¾åˆ°ä½¿ç›®æ ‡å‡½æ•°å‘å…¨å±€æœ€ä¼˜å€¼æå‡çš„å‚æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒçš„å­¦ä¹ ç›®æ ‡å‡½æ•°å½¢çŠ¶çš„æ–¹æ³•æ˜¯ï¼Œé¦–å…ˆæ ¹æ®å…ˆéªŒåˆ†å¸ƒï¼Œå‡è®¾ä¸€ä¸ªæœé›†å‡½æ•°ï¼›ç„¶åæ¯ä¸€æ¬¡ä½¿ç”¨æ–°çš„é‡‡æ ·ç‚¹æ¥æµ‹è¯•ç›®æ ‡å‡½æ•°æ—¶ï¼Œåˆ©ç”¨è¿™ä¸ªä¿¡æ¯æ¥æ›´æ–°ç›®æ ‡å‡½æ•°çš„å…ˆéªŒåˆ†å¸ƒï¼›æœ€åï¼Œç®—æ³•æµ‹è¯•ç”±åéªŒåˆ†å¸ƒç»™å‡ºçš„å…¨å±€æœ€ä¼˜æœ€å¯èƒ½å‡ºç°çš„ä½ç½®çš„ç‚¹ã€‚å¯¹äºè´å¶æ–¯ç®—æ³•ï¼Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¸€æ—¦æ‰¾åˆ°ä¸€ä¸ªå±€éƒ¨æœ€ä¼˜å€¼ï¼Œå®ƒå°±ä¼šåœ¨è¯¥åŒºåŸŸä¸æ–­é‡‡æ ·ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜å€¼ã€‚ä¸ºäº†å¼¥è¡¥è¿™ä¸ªç¼ºé™·ï¼Œè´å¶æ–¯ä¼˜åŒ–ç®—æ³•ä¼šåœ¨æ¢ç´¢å’Œåˆ©ç”¨ç›´æ¥æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼Œâ€œæ¢ç´¢â€å°±æ˜¯åœ¨è¿˜æœªå–æ ·çš„åŒºåŸŸè·å–é‡‡æ ·ç‚¹ï¼›è€Œâ€œåˆ©ç”¨â€åˆ™æ˜¯æ ¹æ®åéªŒåˆ†å¸ƒåœ¨æœ€å¯èƒ½å‡ºç°çš„å…¨å±€åŒºåŸŸæœ€å€¼è¿›è¡Œé‡‡æ ·ã€‚</p><h4 id="7-åœ¨æ¨¡å‹è¯„ä¼°è¿‡ç¨‹ä¸­ï¼Œè¿‡æ‹Ÿåˆç°è±¡å’Œæ¬ æ‹Ÿåˆç°è±¡å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆ"><a href="#7-åœ¨æ¨¡å‹è¯„ä¼°è¿‡ç¨‹ä¸­ï¼Œè¿‡æ‹Ÿåˆç°è±¡å’Œæ¬ æ‹Ÿåˆç°è±¡å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆ" class="headerlink" title="ã€€7. åœ¨æ¨¡å‹è¯„ä¼°è¿‡ç¨‹ä¸­ï¼Œè¿‡æ‹Ÿåˆç°è±¡å’Œæ¬ æ‹Ÿåˆç°è±¡å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆ?"></a>ã€€7. åœ¨æ¨¡å‹è¯„ä¼°è¿‡ç¨‹ä¸­ï¼Œè¿‡æ‹Ÿåˆç°è±¡å’Œæ¬ æ‹Ÿåˆç°è±¡å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆ?</h4><p><strong>è¿‡æ‹Ÿåˆ</strong>æ˜¯æŒ‡æ¨¡å‹å¯¹äºè®­ç»ƒæ•°æ®æ‹Ÿåˆè¿‡å½“çš„æƒ…å†µï¼Œååº”åˆ°è¯„ä¼°æŒ‡æ ‡ä¸Šï¼Œå°±æ˜¯æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å¾ˆå¥½ï¼Œä½†æ˜¯åœ¨æµ‹è¯•é›†å’Œæ–°æ•°æ®ä¸Šè¡¨ç°è¾ƒå·®ã€‚ <strong>æ¬ æ‹Ÿåˆ</strong>æ˜¯æŒ‡æ¨¡å‹åœ¨è®­ç»ƒå’Œé¢„æµ‹æ—¶è¡¨ç°éƒ½ä¸å¥½çš„æƒ…å†µã€‚</p><p><img src="/2019/03/10/model-evaluation/underfitting.png" alt="IMG"></p><h4 id="8-å¸¸è§çš„é™ä½è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•"><a href="#8-å¸¸è§çš„é™ä½è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•" class="headerlink" title="8. å¸¸è§çš„é™ä½è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•"></a>8. å¸¸è§çš„é™ä½è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•</h4><h5 id="é™ä½è¿‡æ‹Ÿåˆé£é™©çš„æ–¹æ³•"><a href="#é™ä½è¿‡æ‹Ÿåˆé£é™©çš„æ–¹æ³•" class="headerlink" title="ã€€é™ä½è¿‡æ‹Ÿåˆé£é™©çš„æ–¹æ³•"></a>ã€€é™ä½è¿‡æ‹Ÿåˆé£é™©çš„æ–¹æ³•</h5><p>ï¼ˆï¼‘ï¼‰ã€€è·å–æ›´å¤šçš„æ•°æ®é›†ï¼Œæˆ–è€…é€šè¿‡ä¸€å®šçš„è§„åˆ™æ¥æ‰©å……è®­ç»ƒæ•°æ®ï¼Œã€€å¦‚åœ¨å›¾åƒåˆ†ç±»é—®é¢˜ä¸Šï¼Œå¯ä»¥é€šè¿‡å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰æ–¹æ³•æ¥æ‰©å……æ•°æ®ï¼›æ›´è¿›ä¸€æ­¥åœ°ï¼Œå¯ä»¥é€šè¿‡å¯¹æŠ—ç”Ÿæˆç½‘ç»œæ¥åˆæˆå¤§é‡çš„æ–°è®­ç»ƒæ•°æ®ã€‚</p><p>ï¼ˆï¼’ï¼‰é™ä½æ¨¡å‹çš„å¤æ‚åº¦ã€‚å½“æ•°æ®è¾ƒå°‘ï¼Œæ¨¡å‹è¿‡äºå¤æ‚æ˜¯äº§ç”Ÿè¿‡æ‹Ÿåˆçš„ä¸»è¦å› ç´ ï¼Œé€‚å½“é™ä½æ¨¡å‹å¤æ‚åº¦å¯ä»¥é¿å…æ¨¡å‹æ‹Ÿåˆè¿‡å¤šçš„é‡‡æ ·å™ªå£°ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¥ç»ç½‘ç»œä¸­å‡å°‘ç½‘ç»œå±‚æ•°ã€ç¥ç»å…ƒä¸ªæ•°ç­‰ï¼›åœ¨å†³ç­–æ ‘æ¨¡å‹ä¸­é™ä½æ ‘çš„æ·±åº¦ã€è¿›è¡Œå‰ªæç­‰ã€‚</p><p>ï¼ˆï¼“ï¼‰æ­£åˆ™åŒ–æ–¹æ³•ã€‚ã€€ç»™æ¨¡å‹çš„å‚æ•°åŠ ä¸Šä¸€å®šçš„æ­£åˆ™çº¦æŸï¼Œæ¯”å¦‚ï¼Œå°†æƒå€¼çš„å¤§å°åŠ å…¥åˆ°æŸå¤±å‡½æ•°ä¸­ã€‚ä»¥L2æ­£åˆ™åŒ–ä¸ºä¾‹ï¼š$C = C<em>0 + \frac{\lambda}{2n}\dot\sum</em>{i}{w_i}^2$ã€‚ è¿™æ ·åœ¨ä¼˜åŒ–åŸæ¥ç›®æ ‡å‡½æ•°$C_0$ã€€çš„åŒæ—¶ï¼Œä¹Ÿèƒ½é¿å…æƒå€¼è¿‡å¤§å¸¦æ¥çš„è¿‡æ‹Ÿåˆé£é™©ã€‚</p><p>ï¼ˆï¼”ï¼‰é›†æˆå­¦ä¹ æ–¹æ³•ã€‚é›†æˆå­¦ä¹ æ˜¯æŠŠå¤šä¸ªæ¨¡å‹é›†æˆåœ¨ä¸€èµ·ï¼Œæ¥é™ä½æ¨¡å‹çš„è¿‡æ‹Ÿåˆé£é™©ã€‚</p><h5 id="é™ä½æ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•"><a href="#é™ä½æ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•" class="headerlink" title="ã€€é™ä½æ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•"></a>ã€€é™ä½æ¬ æ‹Ÿåˆé£é™©çš„æ–¹æ³•</h5><p>ï¼ˆï¼‘ï¼‰æ·»åŠ æ–°ç‰¹å¾ã€‚ã€€å½“ç‰¹å¾ä¸è¶³æˆ–è€…ç°æœ‰ç‰¹å¾ä¸æ ·æœ¬æ ‡ç­¾çš„ç›¸å…³æ€§ä¸å¼ºæ—¶ï¼Œã€€æ¨¡å‹å®¹æ˜“å‡ºç°æ¬ æ‹Ÿåˆã€‚</p><p>ï¼ˆï¼’ï¼‰å¢åŠ æ¨¡å‹å¤æ‚åº¦ã€‚ç®€å•æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›è¾ƒå·®ï¼Œé€šè¿‡å¢åŠ æ¨¡å‹çš„å¤æ‚åº¦å¯ä»¥ä½¿æ¨¡å‹æ‹¥æœ‰è¾ƒå¼ºçš„æ‹Ÿåˆèƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œåœ¨çº¿æ€§æ¨¡å‹ä¸­æ·»åŠ é«˜æ¬¡é¡¹ï¼Œåœ¨ç¥ç»ç½‘ç»œä¸­æ·»åŠ ç½‘ç»œå±‚æ•°æˆ–ç¥ç»å…ƒä¸ªæ•°ç­‰ã€‚</p><p>ï¼ˆï¼“ï¼‰å‡å°æ­£åˆ™åŒ–æ´—æ¼±ã€‚æ­£åˆ™åŒ–æ˜¯ç”¨æ¥é˜²æ­¢è¿‡æ‹Ÿåˆçš„ï¼Œä½†å½“æ¨¡å‹ä¸­å‡ºç°æ¬ æ‹Ÿåˆç°è±¡æ—¶ï¼Œåˆ™éœ€è¦æœ‰é’ˆå¯¹æ€§åœ°å‡å°‘æ­£åˆ™åŒ–ç³»æ•°ã€‚</p><p><em>è¡¥å……ï¼šæ·»åŠ ç‰¹å¾æ—¶ï¼Œé€šè¿‡æŒ–æ˜â€œä¸Šä¸‹æ–‡ç‰¹å¾â€ã€â€œID ç±»ç‰¹å¾â€ã€â€œç»„åˆç‰¹å¾â€ç­‰æ–°çš„ç‰¹å¾ï¼Œå¾€å¾€èƒ½å–å¾—æ›´å¥½çš„æ•ˆæœï¼Œåœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæœ‰å¾ˆå¤šæ¨¡å‹å¯ä»¥å¸®åŠ©å®Œæˆç‰¹å¾å·¥ç¨‹ï¼Œå¦‚å› å­åˆ†è§£æœºã€æ¢¯åº¦æå‡ç­–ç•¥æ ‘ã€Deep-crossingç­‰éƒ½å¯ä»¥æˆä¸ºä¸°å¯Œç‰¹å¾çš„æ–¹æ³•</em></p>]]></content>
    
    
    <categories>
      
      <category>åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>pytorch API</title>
    <link href="/2019/03/08/Pytorch-API/"/>
    <url>/2019/03/08/Pytorch-API/</url>
    
    <content type="html"><![CDATA[<p>Pytorch API æ±‡æ€»æ•´ç†</p><a id="more"></a><h3 id="1-import-torch"><a href="#1-import-torch" class="headerlink" title="1. import torch"></a>1. import torch</h3><p>import &amp; vision</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch print(torch.__version__)</code></pre><h3 id="2-Tensor-type-ğŸŒŸ"><a href="#2-Tensor-type-ğŸŒŸ" class="headerlink" title="2. Tensor type ğŸŒŸ"></a>2. Tensor type ğŸŒŸ</h3><p>Pytorch ç»™å‡ºäº† 9 ç§ CPU Tensor ç±»å‹å’Œ 9 ç§ GPU Tensor ç±»å‹ã€‚Pytorch ä¸­é»˜è®¤çš„æ•°æ®ç±»å‹æ˜¯ torch.FloatTensor, å³ torch.Tensor ç­‰åŒäº torch.FloatTensorã€‚</p><div class="table-container"><table><thead><tr><th>Data type</th><th>dtype</th><th>CPU tensor</th><th>GPU tensor</th></tr></thead><tbody><tr><td>32-bit floating point</td><td>torch.float32 or torch.float</td><td>torch.FloatTensor</td><td>torch.cuda.FloatTensor</td></tr><tr><td>64-bit floating point</td><td>torch.float64 or torch.double</td><td>torch.DoubleTensor</td><td>torch.cuda.DoubleTensor</td></tr><tr><td>16-bit floating point</td><td>torch.float16 or torch.half</td><td>torch.HalfTensor</td><td>torch.cuda.HalfTensor</td></tr><tr><td>8-bit integer (unsigned)</td><td>torch.uint8</td><td>torch.ByteTensor</td><td>torch.cuda.ByteTensor</td></tr><tr><td>8-bit integer (signed)</td><td>torch.int8</td><td>torch.CharTensor</td><td>torch.cuda.CharTensor</td></tr><tr><td>16-bit integer (signed)</td><td>torch.int16 or torch.short</td><td>torch.ShortTensor</td><td>torch.cuda.ShortTensor</td></tr><tr><td>32-bit integer (signed)</td><td>torch.int32 or torch.int</td><td>torch.IntTensor</td><td>torch.cuda.IntTensor</td></tr><tr><td>64-bit integer (signed)</td><td>torch.int64 or torch.long</td><td>torch.LongTensor</td><td>torch.cuda.LongTensor</td></tr><tr><td>Boolean</td><td>torch.bool</td><td>torch.BoolTensor</td><td>torch.cuda.BoolTensor</td></tr></tbody></table></div><h5 id="è®¾ç½®é»˜è®¤Tensor-ç±»å‹"><a href="#è®¾ç½®é»˜è®¤Tensor-ç±»å‹" class="headerlink" title="è®¾ç½®é»˜è®¤Tensor ç±»å‹"></a>è®¾ç½®é»˜è®¤Tensor ç±»å‹</h5><p>Pytorch å¯ä»¥é€šè¿‡ <code>set_default_tensor_type</code> å‡½æ•°<strong>è®¾ç½®é»˜è®¤ä½¿ç”¨çš„Tensorç±»å‹</strong>ï¼Œ åœ¨å±€éƒ¨ä½¿ç”¨å®Œåå¦‚æœéœ€è¦å…¶ä»–ç±»å‹ï¼Œåˆ™è¿˜éœ€è¦é‡æ–°è®¾ç½®ä¼šæ‰€éœ€çš„ç±»å‹ </p><pre><code class="hljs elm"><span class="hljs-title">torch</span>.set_default_tensor_<span class="hljs-keyword">type</span>(&#x27;torch.<span class="hljs-type">DoubleTensor</span>&#x27;)</code></pre><h5 id="CPU-GPU-äº’è½¬"><a href="#CPU-GPU-äº’è½¬" class="headerlink" title="CPU/GPU äº’è½¬"></a>CPU/GPU äº’è½¬</h5><p>CPU Tensor å’Œ GPU Tensor çš„åŒºåˆ«åœ¨äºï¼Œ å‰è€…å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œåè€…å­˜å‚¨åœ¨æ˜¾å­˜ä¸­ã€‚ä¸¤è€…ä¹‹é—´çš„è½¬æ¢å¯ä»¥é€šè¿‡ <code>.cpu()</code>ã€<code>.cuda()</code>å’Œ <code>.to(device)</code> æ¥å®Œæˆ  </p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>device = torch.device(<span class="hljs-string">&quot;cuda:0&quot;</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;cpu&quot;</span>)  <span class="hljs-meta">&gt;&gt;&gt; </span>a = torch.rand(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>a = a.cuda() <span class="hljs-comment"># CPU -&gt; GPU</span><span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.cuda.FloatTensor&#x27;</span><span class="hljs-meta">&gt;&gt;&gt; </span>a = a.cpu() <span class="hljs-comment"># GPU -&gt; CPU</span><span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.FloatTensor&#x27;</span><span class="hljs-meta">&gt;&gt;&gt; </span>a = a.to(device) <span class="hljs-comment"># to device</span><span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.cuda.FloatTensor&#x27;</span></code></pre><h5 id="åˆ¤å®š-Tensor-ç±»å‹çš„å‡ ç§æ–¹å¼"><a href="#åˆ¤å®š-Tensor-ç±»å‹çš„å‡ ç§æ–¹å¼" class="headerlink" title="åˆ¤å®š Tensor ç±»å‹çš„å‡ ç§æ–¹å¼:"></a>åˆ¤å®š Tensor ç±»å‹çš„å‡ ç§æ–¹å¼:</h5><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>atensor([[<span class="hljs-number">0.6065</span>, <span class="hljs-number">0.0122</span>, <span class="hljs-number">0.4473</span>],        [<span class="hljs-number">0.5937</span>, <span class="hljs-number">0.5530</span>, <span class="hljs-number">0.4663</span>]], device=<span class="hljs-string">&#x27;cuda:0&#x27;</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>a.is_cuda  <span class="hljs-comment"># å¯ä»¥æ˜¾ç¤ºæ˜¯å¦åœ¨æ˜¾å­˜ä¸­</span><span class="hljs-literal">True</span><span class="hljs-meta">&gt;&gt;&gt; </span>a.dtype   <span class="hljs-comment"># Tensor å†…éƒ¨dataçš„ç±»å‹</span>torch.float32<span class="hljs-meta">&gt;&gt;&gt; </span>a.type()<span class="hljs-string">&#x27;torch.cuda.FloatTensor&#x27;</span>  <span class="hljs-comment"># å¯ä»¥ç›´æ¥æ˜¾ç¤º Tensor ç±»å‹ = is_cuda + dtype</span></code></pre><h5 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h5><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>atensor([[<span class="hljs-number">0.6065</span>, <span class="hljs-number">0.0122</span>, <span class="hljs-number">0.4473</span>],        [<span class="hljs-number">0.5937</span>, <span class="hljs-number">0.5530</span>, <span class="hljs-number">0.4663</span>]], device=<span class="hljs-string">&#x27;cuda:0&#x27;</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>a.type(torch.DoubleTensor)   <span class="hljs-comment"># ä½¿ç”¨ type() å‡½æ•°è¿›è¡Œè½¬æ¢</span>tensor([[<span class="hljs-number">0.6065</span>, <span class="hljs-number">0.0122</span>, <span class="hljs-number">0.4473</span>],        [<span class="hljs-number">0.5937</span>, <span class="hljs-number">0.5530</span>, <span class="hljs-number">0.4663</span>]], dtype=torch.float64)<span class="hljs-meta">&gt;&gt;&gt; </span>a = a.double()  <span class="hljs-comment"># ç›´æ¥ä½¿ç”¨ int()ã€long() ã€float() ã€å’Œ double() ç­‰ç›´æ¥è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢è¿›è¡Œ</span>tensor([[<span class="hljs-number">0.6065</span>, <span class="hljs-number">0.0122</span>, <span class="hljs-number">0.4473</span>],        [<span class="hljs-number">0.5937</span>, <span class="hljs-number">0.5530</span>, <span class="hljs-number">0.4663</span>]], device=<span class="hljs-string">&#x27;cuda:0&#x27;</span>, dtype=torch.float64)<span class="hljs-meta">&gt;&gt;&gt; </span>b = torch.randn(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>b.type_as(a)  <span class="hljs-comment"># ä½¿ç”¨ type_as å‡½æ•°, å¹¶ä¸éœ€è¦æ˜ç¡®å…·ä½“æ˜¯å“ªç§ç±»å‹</span>tensor([[ <span class="hljs-number">0.2129</span>,  <span class="hljs-number">0.1877</span>, <span class="hljs-number">-0.0626</span>,  <span class="hljs-number">0.4607</span>, <span class="hljs-number">-1.0375</span>],        [ <span class="hljs-number">0.7222</span>, <span class="hljs-number">-0.3502</span>,  <span class="hljs-number">0.1288</span>,  <span class="hljs-number">0.6786</span>,  <span class="hljs-number">0.5062</span>],        [<span class="hljs-number">-0.4956</span>, <span class="hljs-number">-0.0793</span>,  <span class="hljs-number">0.7590</span>, <span class="hljs-number">-1.0932</span>, <span class="hljs-number">-0.1084</span>],        [<span class="hljs-number">-2.2198</span>,  <span class="hljs-number">0.3827</span>,  <span class="hljs-number">0.2735</span>,  <span class="hljs-number">0.5642</span>,  <span class="hljs-number">0.6771</span>]], device=<span class="hljs-string">&#x27;cuda:0&#x27;</span>,       dtype=torch.float64)</code></pre><h5 id="numpy-array-ä¸-torch-Tensor-äº’è½¬"><a href="#numpy-array-ä¸-torch-Tensor-äº’è½¬" class="headerlink" title="numpy array ä¸ã€€torch Tensorã€€äº’è½¬"></a>numpy array ä¸ã€€torch Tensorã€€äº’è½¬</h5><pre><code class="hljs python">torch.Tensor ä¸ np.ndarray è½¬æ¢<span class="hljs-comment"># torch.Tensor -&gt; np.ndarray.</span>ndarray = tensor.cpu().numpy()<span class="hljs-comment"># np.ndarray -&gt; torch.Tensor.</span>tensor = torch.from_numpy(ndarray).float()tensor = torch.from_numpy(ndarray.copy()).float()  <span class="hljs-comment"># If ndarray has negative stride</span></code></pre><h5 id="Tensor-ç›¸å…³ä¿¡æ¯è·å–"><a href="#Tensor-ç›¸å…³ä¿¡æ¯è·å–" class="headerlink" title="Tensor ç›¸å…³ä¿¡æ¯è·å–"></a>Tensor ç›¸å…³ä¿¡æ¯è·å–</h5><pre><code class="hljs python">t.size()/tã€.shape   <span class="hljs-comment"># ä¸¤è€…ç­‰ä»·ï¼Œ è¿”å› t çš„å½¢çŠ¶, å¯ä»¥ä½¿ç”¨ t.size()[1] æˆ– t.size(1) æŸ¥çœ‹åˆ—æ•°</span>t.numel() / t.nelement()  <span class="hljs-comment"># ä¸¤è€…ç­‰ä»·, è¿”å› tensor ä¸­å…ƒç´ æ€»ä¸ªæ•°</span>t.item()  <span class="hljs-comment"># å–å‡ºå•ä¸ª tensor çš„å€¼</span>t.dim()  <span class="hljs-comment"># ç»´åº¦</span></code></pre><h3 id="3-Tensor-Create"><a href="#3-Tensor-Create" class="headerlink" title="3. Tensor Create"></a>3. Tensor Create</h3><h5 id="æœ€åŸºæœ¬çš„Tensoråˆ›å»ºæ–¹å¼"><a href="#æœ€åŸºæœ¬çš„Tensoråˆ›å»ºæ–¹å¼" class="headerlink" title="æœ€åŸºæœ¬çš„Tensoråˆ›å»ºæ–¹å¼"></a>æœ€åŸºæœ¬çš„Tensoråˆ›å»ºæ–¹å¼</h5><pre><code class="hljs python">troch.Tensor(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># ä¼šä½¿ç”¨é»˜è®¤çš„ç±»å‹åˆ›å»º Tensor, </span>                   <span class="hljs-comment"># å¯ä»¥é€šè¿‡ torch.set_default_tensor_type(&#x27;torch.DoubleTensor&#x27;) è¿›è¡Œä¿®æ”¹</span>torch.DoubleTensor(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># æŒ‡å®šç±»å‹åˆ›å»º Tensor</span>torch.Tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])  <span class="hljs-comment"># é€šè¿‡ list åˆ›å»º Tensor</span>                                <span class="hljs-comment"># å°† Tensorè½¬æ¢ä¸ºlistå¯ä»¥ä½¿ç”¨: t.tolist()</span>torch.from_numpy(np.array([<span class="hljs-number">2</span>, <span class="hljs-number">3.3</span>]) ) <span class="hljs-comment"># é€šè¿‡ numpy array åˆ›å»º tensor</span></code></pre><h5 id="ç¡®å®šåˆå§‹å€¼çš„æ–¹å¼åˆ›å»º"><a href="#ç¡®å®šåˆå§‹å€¼çš„æ–¹å¼åˆ›å»º" class="headerlink" title="ç¡®å®šåˆå§‹å€¼çš„æ–¹å¼åˆ›å»º"></a>ç¡®å®šåˆå§‹å€¼çš„æ–¹å¼åˆ›å»º</h5><pre><code class="hljs python">torch.ones(sizes)  <span class="hljs-comment"># å…¨ 1 Tensor     </span>torch.zeros(sizes)  <span class="hljs-comment"># å…¨ 0 Tensor</span>torch.eye(sizes)  <span class="hljs-comment"># å¯¹è§’çº¿ä¸º1ï¼Œä¸è¦æ±‚è¡Œåˆ—ä¸€è‡´</span>torch.full(sizes, value) <span class="hljs-comment"># æŒ‡å®š value</span></code></pre><h5 id="åˆ†å¸ƒ"><a href="#åˆ†å¸ƒ" class="headerlink" title="åˆ†å¸ƒ"></a>åˆ†å¸ƒ</h5><pre><code class="hljs python">torch.rand(sizes)  <span class="hljs-comment"># å‡åŒ€åˆ†å¸ƒ   </span>torch.randn(sizes)   <span class="hljs-comment"># æ ‡å‡†åˆ†å¸ƒ</span><span class="hljs-comment"># æ­£æ€åˆ†å¸ƒ: è¿”å›ä¸€ä¸ªå¼ é‡ï¼ŒåŒ…å«ä»ç»™å®šå‚æ•° means, std çš„ç¦»æ•£æ­£æ€åˆ†å¸ƒä¸­æŠ½å–éšæœºæ•°ã€‚ </span><span class="hljs-comment"># å‡å€¼ means æ˜¯ä¸€ä¸ªå¼ é‡ï¼ŒåŒ…å«æ¯ä¸ªè¾“å‡ºå…ƒç´ ç›¸å…³çš„æ­£æ€åˆ†å¸ƒçš„å‡å€¼ -&gt; ä»¥æ­¤å¼ é‡çš„å‡å€¼ä½œä¸ºå‡å€¼</span><span class="hljs-comment"># æ ‡å‡†å·® std æ˜¯ä¸€ä¸ªå¼ é‡ï¼ŒåŒ…å«æ¯ä¸ªè¾“å‡ºå…ƒç´ ç›¸å…³çš„æ­£æ€åˆ†å¸ƒçš„æ ‡å‡†å·® -&gt; ä»¥æ­¤å¼ é‡çš„æ ‡å‡†å·®ä½œä¸ºæ ‡å‡†å·®ã€‚ </span><span class="hljs-comment"># å‡å€¼å’Œæ ‡å‡†å·®çš„å½¢çŠ¶ä¸é¡»åŒ¹é…ï¼Œä½†æ¯ä¸ªå¼ é‡çš„å…ƒç´ ä¸ªæ•°é¡»ç›¸åŒ</span>torch.normal(mean=torch.arange(<span class="hljs-number">1.</span>, <span class="hljs-number">11.</span>), std=torch.arange(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-0.1</span>))tensor([<span class="hljs-number">-0.1987</span>,  <span class="hljs-number">3.1957</span>,  <span class="hljs-number">3.5459</span>,  <span class="hljs-number">2.8150</span>,  <span class="hljs-number">5.5398</span>,  <span class="hljs-number">5.6116</span>,  <span class="hljs-number">7.5512</span>,  <span class="hljs-number">7.8650</span>,         <span class="hljs-number">9.3151</span>, <span class="hljs-number">10.1827</span>])torch.uniform(<span class="hljs-keyword">from</span>,to) <span class="hljs-comment"># å‡åŒ€åˆ†å¸ƒ </span>torch.arange(s, e, steps)  <span class="hljs-comment"># ä» s åˆ° eï¼Œæ­¥é•¿ä¸º step</span>torch.linspace(s, e, num)   <span class="hljs-comment"># ä» s åˆ° e, å‡åŒ€åˆ‡åˆ†ä¸º num ä»½</span><span class="hljs-comment"># ! æ³¨æ„linespaceå’Œarangeçš„åŒºåˆ«ï¼Œå‰è€…çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ç”Ÿæˆçš„Tensorä¸­å…ƒç´ çš„æ•°é‡ï¼Œè€Œåè€…çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯æ­¥é•¿ã€‚</span>torch.randperm(m) <span class="hljs-comment"># 0 åˆ° m-1 çš„éšæœºåºåˆ—</span><span class="hljs-comment"># ! shuffle æ“ä½œ</span>tensor[torch.randperm(tensor.size(<span class="hljs-number">0</span>))]</code></pre><h5 id="å¤åˆ¶"><a href="#å¤åˆ¶" class="headerlink" title="å¤åˆ¶"></a>å¤åˆ¶</h5><p>Pytorch æœ‰å‡ ç§ä¸åŒçš„å¤åˆ¶æ–¹å¼ï¼Œæ³¨æ„åŒºåˆ†</p><div class="table-container"><table><thead><tr><th>Operation</th><th>New/Shared memory</th><th>Still in computation graph</th></tr></thead><tbody><tr><td>tensor.clone()</td><td>New</td><td>Yes</td></tr><tr><td>tensor.detach()</td><td>Shared</td><td>No</td></tr><tr><td>tensor.detach.clone()</td><td>New</td><td>No</td></tr></tbody></table></div><h3 id="4-ç´¢å¼•ã€æ¯”è¾ƒã€æ’åº"><a href="#4-ç´¢å¼•ã€æ¯”è¾ƒã€æ’åº" class="headerlink" title="4. ç´¢å¼•ã€æ¯”è¾ƒã€æ’åº"></a>4. ç´¢å¼•ã€æ¯”è¾ƒã€æ’åº</h3><h5 id="ç´¢å¼•æ“ä½œ"><a href="#ç´¢å¼•æ“ä½œ" class="headerlink" title="ç´¢å¼•æ“ä½œ"></a>ç´¢å¼•æ“ä½œ</h5><pre><code class="hljs python">a.item() <span class="hljs-comment">#ã€€ä»åªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„å¼ é‡ä¸­æå–å€¼</span>a[row, column]   <span class="hljs-comment"># row è¡Œï¼Œ cloumn åˆ—</span>a[index]   <span class="hljs-comment"># ç¬¬index è¡Œ</span>a[:,index]   <span class="hljs-comment"># ç¬¬ index åˆ—</span>a[<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>]  <span class="hljs-comment"># ç¬¬é›¶è¡Œï¼Œ æœ€åä¸€ä¸ªå…ƒç´ </span>a[:index]  <span class="hljs-comment"># å‰ index è¡Œ</span>a[:row, <span class="hljs-number">0</span>:<span class="hljs-number">1</span>]  <span class="hljs-comment"># å‰ row è¡Œï¼Œ 0å’Œ1åˆ—</span>a[a&gt;<span class="hljs-number">1</span>]  <span class="hljs-comment"># é€‰æ‹© a &gt; 1çš„å…ƒç´ ï¼Œ ç­‰ä»·äº a.masked_select(a&gt;1)</span>torch.nonzero(a) <span class="hljs-comment"># é€‰æ‹©éé›¶å…ƒç´ çš„åæ ‡ï¼Œå¹¶è¿”å›</span>a.clamp(x, y)  <span class="hljs-comment"># å¯¹ Tensor å…ƒç´ è¿›è¡Œé™åˆ¶ï¼Œ å°äºxç”¨xä»£æ›¿ï¼Œ å¤§äºyç”¨yä»£æ›¿</span>torch.where(condition, x, y)  <span class="hljs-comment"># æ»¡è¶³condition çš„ä½ç½®è¾“å‡ºxï¼Œ å¦åˆ™è¾“å‡ºy</span><span class="hljs-meta">&gt;&gt;&gt; </span>atensor([[ <span class="hljs-number">6.</span>, <span class="hljs-number">-2.</span>],        [ <span class="hljs-number">8.</span>,  <span class="hljs-number">0.</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>torch.where(a &gt; <span class="hljs-number">1</span>, torch.full_like(a, <span class="hljs-number">1</span>), a)  <span class="hljs-comment"># å¤§äº1 çš„éƒ¨åˆ†ç›´æ¥ç”¨1ä»£æ›¿ï¼Œ å…¶ä»–ä¿ç•™åŸå€¼</span>tensor([[ <span class="hljs-number">1.</span>, <span class="hljs-number">-2.</span>],        [ <span class="hljs-number">1.</span>,  <span class="hljs-number">0.</span>]])<span class="hljs-comment">#ã€€å¾—åˆ°éé›¶å…ƒç´ </span>torch.nonzero(tensor)               <span class="hljs-comment"># éé›¶å…ƒç´ çš„ç´¢å¼•</span>torch.nonzero(tensor == <span class="hljs-number">0</span>)          <span class="hljs-comment"># é›¶å…ƒç´ çš„ç´¢å¼•</span>torch.nonzero(tensor).size(<span class="hljs-number">0</span>)       <span class="hljs-comment"># éé›¶å…ƒç´ çš„ä¸ªæ•°</span>torch.nonzero(tensor == <span class="hljs-number">0</span>).size(<span class="hljs-number">0</span>)  <span class="hljs-comment"># é›¶å…ƒç´ çš„ä¸ªæ•°</span></code></pre><h5 id="æ¯”è¾ƒæ“ä½œ"><a href="#æ¯”è¾ƒæ“ä½œ" class="headerlink" title="æ¯”è¾ƒæ“ä½œ"></a>æ¯”è¾ƒæ“ä½œ</h5><pre><code class="hljs python">gt &gt;    lt &lt;     ge &gt;=     le &lt;=   eq ==    ne != topk(input, k) -&gt; (Tensor, LongTensor)sort(input) -&gt; (Tensor, LongTensor)max/min =&gt; max(tensor)      max(tensor, dim)    max(tensor1, tensor2)</code></pre><p>sort å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°, å…¶ä¸­ å‚æ•° 0 ä¸ºæŒ‰ç…§è¡Œæ’åºã€1ä¸ºæŒ‰ç…§åˆ—æ’åº: True ä¸ºé™åºï¼Œ False ä¸ºå‡åºï¼Œ è¿”å›å€¼æœ‰ä¸¤ä¸ªï¼Œ ç¬¬ä¸€ä¸ªæ˜¯æ’åºç»“æœï¼Œ ç¬¬äºŒä¸ªæ˜¯æ’åºåºå·</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> torch<span class="hljs-meta">&gt;&gt;&gt; </span>a = torch.randn(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>atensor([[<span class="hljs-number">-1.8500</span>, <span class="hljs-number">-0.2005</span>,  <span class="hljs-number">1.4475</span>],        [<span class="hljs-number">-1.7795</span>, <span class="hljs-number">-0.4968</span>, <span class="hljs-number">-1.8965</span>],        [ <span class="hljs-number">0.5798</span>, <span class="hljs-number">-0.1554</span>,  <span class="hljs-number">1.6395</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>a.sort(<span class="hljs-number">0</span>, <span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>] tensor([[ <span class="hljs-number">0.5798</span>, <span class="hljs-number">-0.1554</span>,  <span class="hljs-number">1.6395</span>],        [<span class="hljs-number">-1.7795</span>, <span class="hljs-number">-0.2005</span>,  <span class="hljs-number">1.4475</span>],        [<span class="hljs-number">-1.8500</span>, <span class="hljs-number">-0.4968</span>, <span class="hljs-number">-1.8965</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>a.sort(<span class="hljs-number">0</span>, <span class="hljs-literal">True</span>)[<span class="hljs-number">1</span>]tensor([[<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>],        [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],        [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>a.sort(<span class="hljs-number">1</span>, <span class="hljs-literal">True</span>)[<span class="hljs-number">1</span>]tensor([[<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>],        [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>],        [<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>a.sort(<span class="hljs-number">1</span>, <span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]tensor([[ <span class="hljs-number">1.4475</span>, <span class="hljs-number">-0.2005</span>, <span class="hljs-number">-1.8500</span>],        [<span class="hljs-number">-0.4968</span>, <span class="hljs-number">-1.7795</span>, <span class="hljs-number">-1.8965</span>],        [ <span class="hljs-number">1.6395</span>,  <span class="hljs-number">0.5798</span>, <span class="hljs-number">-0.1554</span>]])</code></pre><h3 id="5-Element-wise-å’Œ-å½’å¹¶æ“ä½œ"><a href="#5-Element-wise-å’Œ-å½’å¹¶æ“ä½œ" class="headerlink" title="5. Element-wise å’Œ å½’å¹¶æ“ä½œ"></a>5. Element-wise å’Œ å½’å¹¶æ“ä½œ</h3><p>Element-wiseï¼šè¾“å‡ºçš„ Tensor å½¢çŠ¶ä¸åŸå§‹çš„å½¢çŠ¶ä¸€è‡´</p><pre><code class="hljs python">abs / sqrt / div / exp / fmod / log / pow...cos / sin / asin / atan2 / cosh...ceil / round / floor / truncclamp(input, min, max)sigmoid / tanh...</code></pre><p>å½’å¹¶æ“ä½œï¼šè¾“å‡ºçš„ Tensor å½¢çŠ¶å°äºåŸå§‹çš„ Tensorå½¢çŠ¶</p><pre><code class="hljs python">mean/sum/median/mode   <span class="hljs-comment"># å‡å€¼/å’Œ/ ä¸­ä½æ•°/ä¼—æ•°</span>norm/dist  <span class="hljs-comment"># èŒƒæ•°/è·ç¦»</span>std/var  <span class="hljs-comment"># æ ‡å‡†å·®/æ–¹å·®</span>cumsum/cumprd <span class="hljs-comment"># ç´¯åŠ /ç´¯ä¹˜</span></code></pre><h3 id="6-å˜å½¢æ“ä½œ"><a href="#6-å˜å½¢æ“ä½œ" class="headerlink" title="6. å˜å½¢æ“ä½œ"></a>6. å˜å½¢æ“ä½œ</h3><h5 id="view-resize-reshape-è°ƒæ•´Tensorçš„å½¢çŠ¶"><a href="#view-resize-reshape-è°ƒæ•´Tensorçš„å½¢çŠ¶" class="headerlink" title="view/resize/reshape  è°ƒæ•´Tensorçš„å½¢çŠ¶"></a>view/resize/reshape  è°ƒæ•´Tensorçš„å½¢çŠ¶</h5><ul><li>å…ƒç´ æ€»æ•°å¿…é¡»ç›¸åŒ  </li><li>view å’Œ reshape å¯ä»¥ä½¿ç”¨ -1 è‡ªåŠ¨è®¡ç®—ç»´åº¦</li><li>å…±äº«å†…å­˜</li></ul><p>!!!  <code>view()</code> æ“ä½œæ˜¯éœ€è¦ Tensor åœ¨å†…å­˜ä¸­è¿ç»­çš„ï¼Œ è¿™ç§æƒ…å†µä¸‹éœ€è¦ä½¿ç”¨ <code>contiguous()</code> æ“ä½œå…ˆå°†å†…å­˜å˜ä¸ºè¿ç»­ã€‚ å¯¹äºreshape æ“ä½œï¼Œ å¯ä»¥çœ‹åšæ˜¯ <code>Tensor.contiguous().view()</code>.   ğŸŒŸ</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = torch.Tensor(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>atensor([[<span class="hljs-number">6.0000e+00</span>, <span class="hljs-number">8.0000e+00</span>],        [<span class="hljs-number">1.0000e+00</span>, <span class="hljs-number">1.8367e-40</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>a.resize(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>)tensor([[<span class="hljs-number">6.0000e+00</span>],        [<span class="hljs-number">8.0000e+00</span>],        [<span class="hljs-number">1.0000e+00</span>],        [<span class="hljs-number">1.8367e-40</span>]])</code></pre><h5 id="transpose-permute-å„ç»´åº¦ä¹‹é—´çš„å˜æ¢"><a href="#transpose-permute-å„ç»´åº¦ä¹‹é—´çš„å˜æ¢" class="headerlink" title="transpose / permute  å„ç»´åº¦ä¹‹é—´çš„å˜æ¢"></a>transpose / permute  å„ç»´åº¦ä¹‹é—´çš„å˜æ¢</h5><p>transpose å¯ä»¥å°†æŒ‡å®šçš„ä¸¤ä¸ªç»´åº¦çš„å…ƒç´ è¿›è¡Œè½¬ç½®ï¼Œ permute åˆ™å¯ä»¥æŒ‰ç…§æŒ‡å®šçš„ç»´åº¦è¿›è¡Œç»´åº¦å˜æ¢</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>xtensor([[[<span class="hljs-number">-0.9699</span>, <span class="hljs-number">-0.3375</span>, <span class="hljs-number">-0.0178</span>]],        [[ <span class="hljs-number">1.4260</span>, <span class="hljs-number">-0.2305</span>, <span class="hljs-number">-0.2883</span>]]])<span class="hljs-meta">&gt;&gt;&gt; </span>x.shapetorch.Size([<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>])<span class="hljs-meta">&gt;&gt;&gt; </span>x.transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) <span class="hljs-comment"># shape =&gt; torch.Size([1, 2, 3])</span>tensor([[[<span class="hljs-number">-0.9699</span>, <span class="hljs-number">-0.3375</span>, <span class="hljs-number">-0.0178</span>],         [ <span class="hljs-number">1.4260</span>, <span class="hljs-number">-0.2305</span>, <span class="hljs-number">-0.2883</span>]]])<span class="hljs-meta">&gt;&gt;&gt; </span>x.permute(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># shape =&gt; torch.Size([1, 2, 3])</span>tensor([[[<span class="hljs-number">-0.9699</span>, <span class="hljs-number">-0.3375</span>, <span class="hljs-number">-0.0178</span>],         [ <span class="hljs-number">1.4260</span>, <span class="hljs-number">-0.2305</span>, <span class="hljs-number">-0.2883</span>]]])<span class="hljs-meta">&gt;&gt;&gt; </span></code></pre><h5 id="squeeze-dim-unsquence-dim-ğŸŒŸ"><a href="#squeeze-dim-unsquence-dim-ğŸŒŸ" class="headerlink" title="squeeze(dim) / unsquence(dim)   ğŸŒŸ"></a>squeeze(dim) / unsquence(dim)   ğŸŒŸ</h5><p>å¤„ç† size ä¸º 1 çš„ç»´åº¦ï¼Œ å‰è€…ç”¨äºå»é™¤ size ä¸º 1 çš„ç»´åº¦ï¼Œ è€Œåè€…åˆ™æ˜¯å°†æŒ‡å®šçš„ç»´åº¦çš„sizeå˜ä¸º1</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = torch.arange(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>atensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]) <span class="hljs-comment"># shape =&gt; torch.Size([3])</span><span class="hljs-meta">&gt;&gt;&gt; </span>a.unsqueeze(<span class="hljs-number">0</span>) <span class="hljs-comment"># shape =&gt; torch.Size([1, 3])</span><span class="hljs-meta">&gt;&gt;&gt; </span>a.unqueeze(<span class="hljs-number">0</span>).squeeze(<span class="hljs-number">0</span>) <span class="hljs-comment"># shape =&gt; torch.Size([3])</span></code></pre><h5 id="expand-expand-as-repeatå¤åˆ¶å…ƒç´ æ¥æ‰©å±•ç»´åº¦"><a href="#expand-expand-as-repeatå¤åˆ¶å…ƒç´ æ¥æ‰©å±•ç»´åº¦" class="headerlink" title="expand / expand_as / repeatå¤åˆ¶å…ƒç´ æ¥æ‰©å±•ç»´åº¦"></a>expand / expand_as / repeatå¤åˆ¶å…ƒç´ æ¥æ‰©å±•ç»´åº¦</h5><p>æœ‰æ—¶éœ€è¦é‡‡ç”¨å¤åˆ¶çš„å½¢å¼æ¥æ‰©å±• Tensor çš„ç»´åº¦ï¼Œ è¿™æ—¶å¯ä»¥ä½¿ç”¨ <code>expand</code>ï¼Œ <code>expand()</code> å‡½æ•°å°† size ä¸º 1çš„ç»´åº¦å¤åˆ¶æ‰©å±•ä¸ºæŒ‡å®šå¤§å°ï¼Œ ä¹Ÿå¯ä»¥ç”¨ <code>expand_as()</code>å‡½æ•°æŒ‡å®šä¸º ç¤ºä¾‹ Tensor çš„ç»´åº¦ã€‚</p><p>!! <code>expand</code> æ‰©å¤§ tensor ä¸éœ€è¦åˆ†é…æ–°å†…å­˜ï¼Œåªæ˜¯ä»…ä»…æ–°å»ºä¸€ä¸ª tensor çš„è§†å›¾ï¼Œå…¶ä¸­é€šè¿‡å°† stride è®¾ä¸º0ï¼Œä¸€ç»´å°†ä¼šæ‰©å±•ä½æ›´é«˜ç»´ã€‚</p><p><code>repeat</code> æ²¿ç€æŒ‡å®šçš„ç»´åº¦é‡å¤ tensorã€‚ ä¸åŒäº <code>expand()</code>ï¼Œå¤åˆ¶çš„æ˜¯ tensor ä¸­çš„æ•°æ®ã€‚</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>atensor([[[<span class="hljs-number">0.3094</span>],         [<span class="hljs-number">0.4812</span>]],        [[<span class="hljs-number">0.0950</span>],         [<span class="hljs-number">0.8652</span>]]])<span class="hljs-meta">&gt;&gt;&gt; </span>a.expand(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-comment"># å°†ç¬¬2ç»´çš„ç»´åº¦ç”±1å˜ä¸º3ï¼Œ åˆ™å¤åˆ¶è¯¥ç»´çš„å…ƒç´ ï¼Œå¹¶æ‰©å±•ä¸º3</span>tensor([[[<span class="hljs-number">0.3094</span>, <span class="hljs-number">0.3094</span>, <span class="hljs-number">0.3094</span>],         [<span class="hljs-number">0.4812</span>, <span class="hljs-number">0.4812</span>, <span class="hljs-number">0.4812</span>]],        [[<span class="hljs-number">0.0950</span>, <span class="hljs-number">0.0950</span>, <span class="hljs-number">0.0950</span>],         [<span class="hljs-number">0.8652</span>, <span class="hljs-number">0.8652</span>, <span class="hljs-number">0.8652</span>]]])<span class="hljs-meta">&gt;&gt;&gt; </span>a.repeat(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>) <span class="hljs-comment"># å°†ç¬¬äºŒä½å¤åˆ¶ä¸€æ¬¡</span>tensor([[[<span class="hljs-number">0.3094</span>],         [<span class="hljs-number">0.4812</span>],         [<span class="hljs-number">0.3094</span>],         [<span class="hljs-number">0.4812</span>]],        [[<span class="hljs-number">0.0950</span>],         [<span class="hljs-number">0.8652</span>],         [<span class="hljs-number">0.0950</span>],         [<span class="hljs-number">0.8652</span>]]])</code></pre><h5 id="ä½¿ç”¨åˆ‡ç‰‡æ“ä½œæ‰©å±•å¤šä¸ªç»´åº¦-ğŸŒŸ"><a href="#ä½¿ç”¨åˆ‡ç‰‡æ“ä½œæ‰©å±•å¤šä¸ªç»´åº¦-ğŸŒŸ" class="headerlink" title="ä½¿ç”¨åˆ‡ç‰‡æ“ä½œæ‰©å±•å¤šä¸ªç»´åº¦ ğŸŒŸ"></a>ä½¿ç”¨åˆ‡ç‰‡æ“ä½œæ‰©å±•å¤šä¸ªç»´åº¦ ğŸŒŸ</h5><pre><code class="hljs fortran">b = a[:,<span class="hljs-keyword">None</span>, <span class="hljs-keyword">None</span>,:] # <span class="hljs-keyword">None</span> å¤„çš„ç»´åº¦ä¸ºï¼‘</code></pre><h3 id="7-ç»„åˆä¸åˆ†å—"><a href="#7-ç»„åˆä¸åˆ†å—" class="headerlink" title="7. ç»„åˆä¸åˆ†å—"></a>7. ç»„åˆä¸åˆ†å—</h3><p><strong>ç»„åˆæ“ä½œ</strong> æ˜¯å°†ä¸åŒçš„ Tensor å åŠ èµ·æ¥ã€‚ ä¸»è¦æœ‰ <code>cat()</code> å’Œ <code>torch.stack()</code> ä¸¤ä¸ªå‡½æ•°ï¼Œcat å³ concatenate çš„æ„æ€ï¼Œ æ˜¯æŒ‡æ²¿ç€å·²æœ‰çš„æ•°æ®çš„æŸä¸€ç»´åº¦è¿›è¡Œæ‹¼æ¥ï¼Œ æ“ä½œåçš„æ•°æ®çš„æ€»ç»´æ•°ä¸å˜ï¼Œ åœ¨è¿›è¡Œæ‹¼æ¥æ—¶ï¼Œ é™¤äº†æ‹¼æ¥çš„ç»´åº¦ä¹‹å¤–ï¼Œ å…¶ä»–ç»´åº¦å¿…é¡»ç›¸åŒã€‚ è€Œ<code>torch. stack()</code> å‡½æ•°ä¼šæ–°å¢ä¸€ä¸ªç»´åº¦ï¼Œ å¹¶æŒ‰ç…§æŒ‡å®šçš„ç»´åº¦è¿›è¡Œå åŠ ã€‚</p><pre><code class="hljs shell">torch.cat(list_of_tensors, dim=0)ã€€  # k ä¸ª (m,n) -&gt; (k*m, n)torch.stack(list_of_tensors, dim=0)   # k ä¸ª (m,n) -&gt; (k*m*n)</code></pre><p><strong>åˆ†å—æ“ä½œ</strong> æ˜¯æŒ‡å°† Tensor åˆ†å‰²æˆä¸åŒçš„å­ Tensorï¼Œä¸»è¦æœ‰ <code>torch.chunk()</code> ä¸ <code>torch.split()</code> ä¸¤ä¸ªå‡½æ•°ï¼Œå‰è€…éœ€è¦æŒ‡å®šåˆ†å—çš„æ•°é‡ï¼Œè€Œåè€…åˆ™éœ€è¦æŒ‡å®šæ¯ä¸€å—çš„å¤§å°ï¼Œä»¥æ•´å½¢æˆ–è€…listæ¥è¡¨ç¤ºã€‚</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = torch.Tensor([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]])<span class="hljs-meta">&gt;&gt;&gt; </span>torch.chunk(a, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)(tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>]]), tensor([[<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>]]))<span class="hljs-meta">&gt;&gt;&gt; </span>torch.chunk(a, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)(tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>],        [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>]]), tensor([[<span class="hljs-number">3.</span>],        [<span class="hljs-number">6.</span>]]))<span class="hljs-meta">&gt;&gt;&gt; </span>torch.split(a, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)(tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>],        [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>]]),)<span class="hljs-meta">&gt;&gt;&gt; </span>torch.split(a, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-number">1</span>)(tensor([[<span class="hljs-number">1.</span>],        [<span class="hljs-number">4.</span>]]), tensor([[<span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>],        [<span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>]]))</code></pre><h3 id="8-èšåˆ-ä¸-åˆ†æ•£"><a href="#8-èšåˆ-ä¸-åˆ†æ•£" class="headerlink" title="8.  èšåˆ ä¸ åˆ†æ•£"></a>8.  èšåˆ ä¸ åˆ†æ•£</h3><pre><code class="hljs python">torch.gather(input, dim, index, out=<span class="hljs-literal">None</span>)  <span class="hljs-comment"># æ ¹æ® index å’Œ dim, å¯»æ‰¾ input å¯¹åº”çš„ç´¢å¼•ä½ç½®, å¾—åˆ° output</span>Tensor.scatter_(dim, index, src)   <span class="hljs-comment"># æ ¹æ® dim å’Œ index, å°† src æŒ‡å®šä½ç½®ä¸Šçš„å€¼ï¼Œ åˆ†é…ç»™ output å¯¹åº”ç´¢å¼•ä½ç½®ã€‚</span></code></pre><h3 id="9-linear-algebra"><a href="#9-linear-algebra" class="headerlink" title="9. linear algebra"></a>9. linear algebra</h3><pre><code class="hljs python">trace  <span class="hljs-comment"># å¯¹è§’çº¿å…ƒç´ ä¹‹å’Œ(çŸ©é˜µçš„è¿¹)</span>diag  <span class="hljs-comment"># å¯¹è§’çº¿å…ƒç´ </span>triu/tril  <span class="hljs-comment"># çŸ©é˜µçš„ä¸Šä¸‰è§’/ä¸‹ä¸‰è§’</span>addmm/addbmm/addmv/addr/badbmm...  <span class="hljs-comment"># çŸ©é˜µè¿ç®—</span>t <span class="hljs-comment"># è½¬ç½®</span>dor/cross <span class="hljs-comment"># å†…ç§¯/å¤–ç§¯</span>inverse <span class="hljs-comment"># çŸ©é˜µæ±‚é€†</span>svd  <span class="hljs-comment"># å¥‡å¼‚å€¼åˆ†è§£</span>torch.mm(tensor1, tensor2)   <span class="hljs-comment"># çŸ©é˜µä¹˜æ³•  (m*n) * (n*p) -&gt; (m*p)</span>torch.bmm(tensor1, tensor2) <span class="hljs-comment"># batchçš„çŸ©é˜µä¹˜æ³•: (b*m*n) * (b*n*p) -&gt; (b*m*p).</span>torch.mv(tensor, vec) <span class="hljs-comment">#ã€€çŸ©é˜µå‘é‡ä¹˜æ³• (m*n) * (n) = (m)</span>tensor1 * tensor2 <span class="hljs-comment"># Element-wise multiplication.</span></code></pre><h3 id="10-åŸºæœ¬æœºåˆ¶"><a href="#10-åŸºæœ¬æœºåˆ¶" class="headerlink" title="10. åŸºæœ¬æœºåˆ¶"></a>10. åŸºæœ¬æœºåˆ¶</h3><h5 id="å¹¿æ’­æœºåˆ¶"><a href="#å¹¿æ’­æœºåˆ¶" class="headerlink" title="å¹¿æ’­æœºåˆ¶"></a>å¹¿æ’­æœºåˆ¶</h5><p>ä¸åŒå½¢çŠ¶çš„ Tensor è¿›è¡Œè®¡ç®—æ—¶ï¼Œ å¯ä»¥è‡ªåŠ¨æ‰©å±•åˆ°è¾ƒå¤§çš„ç›¸åŒå½¢çŠ¶å†è¿›è¡Œè®¡ç®—ã€‚ å¹¿æ’­æœºåˆ¶çš„å‰ææ˜¯ä¸€ä¸ª Tensor  è‡³å°‘æœ‰ä¸€ä¸ªç»´åº¦ï¼Œä¸”ä»å°¾éƒ¨éå† Tensor æ—¶ï¼Œä¸¤è€…ç»´åº¦å¿…é¡»ç›¸ç­‰ï¼Œ å…¶ä¸­ä¸ƒä¸ªè¦ä¹ˆæ˜¯1ï¼Œ è¦ä¹ˆä¸å­˜åœ¨</p><h5 id="å‘é‡åŒ–æ“ä½œ"><a href="#å‘é‡åŒ–æ“ä½œ" class="headerlink" title="å‘é‡åŒ–æ“ä½œ"></a>å‘é‡åŒ–æ“ä½œ</h5><p>å¯ä»¥åœ¨åŒä¸€æ—¶é—´è¿›è¡Œæ‰¹é‡åœ°å¹¶è¡Œè®¡ç®—ï¼Œä¾‹å¦‚çŸ©é˜µè¿ç®—ï¼Œä»¥è¾¾åˆ°æ›´é«˜çš„è®¡ç®—æ•ˆç‡çš„ä¸€ç§æ–¹å¼:</p><h5 id="å…±äº«å†…å­˜æœºåˆ¶"><a href="#å…±äº«å†…å­˜æœºåˆ¶" class="headerlink" title="å…±äº«å†…å­˜æœºåˆ¶"></a>å…±äº«å†…å­˜æœºåˆ¶</h5><p>(1) ç›´æ¥é€šè¿‡ Tensor æ¥åˆå§‹åŒ–å¦ä¸€ä¸ª Tensorï¼Œ æˆ–è€…é€šè¿‡ Tensor çš„ç»„åˆã€åˆ†å—ã€ç´¢å¼•ã€å˜å½¢æ¥åˆå§‹åŒ–å¦ä¸€ä¸ªTensorï¼Œ åˆ™è¿™ä¸¤ä¸ª Tensor å…±äº«å†…å­˜:</p><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = torch.randn(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>b = a<span class="hljs-meta">&gt;&gt;&gt; </span>c = a.view(<span class="hljs-number">6</span>)<span class="hljs-meta">&gt;&gt;&gt; </span>b[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] = <span class="hljs-number">0</span><span class="hljs-meta">&gt;&gt;&gt; </span>c[<span class="hljs-number">3</span>] = <span class="hljs-number">4</span><span class="hljs-meta">&gt;&gt;&gt; </span>atensor([[ <span class="hljs-number">0.0000</span>,  <span class="hljs-number">0.3898</span>, <span class="hljs-number">-0.7641</span>],        [ <span class="hljs-number">4.0000</span>,  <span class="hljs-number">0.6859</span>, <span class="hljs-number">-1.5179</span>]])</code></pre><p>(2) å¯¹äºä¸€äº›æ“ä½œé€šè¿‡åŠ åç¼€  â€œ_â€  å®ç° inplace æ“ä½œï¼Œ å¦‚ <code>add_()</code> å’Œ <code>resize_()</code> ç­‰ï¼Œ è¿™æ ·æ“ä½œåªè¦è¢«æ‰§è¡Œï¼Œ æœ¬èº«çš„ Tensor å°±ä¼šè¢«æ”¹å˜ã€‚</p><pre><code class="hljs angelscript">&gt;&gt;&gt; atensor([[ <span class="hljs-number">0.0000</span>,  <span class="hljs-number">0.3898</span>, <span class="hljs-number">-0.7641</span>],        [ <span class="hljs-number">4.0000</span>,  <span class="hljs-number">0.6859</span>, <span class="hljs-number">-1.5179</span>]])&gt;&gt;&gt; a.add_(a)tensor([[ <span class="hljs-number">0.0000</span>,  <span class="hljs-number">0.7796</span>, <span class="hljs-number">-1.5283</span>],        [ <span class="hljs-number">8.0000</span>,  <span class="hljs-number">1.3719</span>, <span class="hljs-number">-3.0358</span>]])</code></pre><p>(3) Tensorä¸ Numpy å¯ä»¥é«˜æ•ˆçš„å®Œæˆè½¬æ¢ï¼Œ å¹¶ä¸”è½¬æ¢å‰åçš„å˜é‡å…±äº«å†…å­˜ã€‚åœ¨è¿›è¡Œ Pytorch ä¸æ”¯æŒçš„æ“ä½œçš„æ—¶å€™ï¼Œ ç”šè‡³å¯ä»¥æ›²çº¿æ•‘å›½ï¼Œ å°† Tensor è½¬æ¢ä¸º Numpy ç±»å‹ï¼Œæ“ä½œåå†è½¬åŒ–ä¸º Tensor</p><pre><code class="hljs clean"># tensor &lt;--&gt; numpyb = a.numpy() # tensor -&gt; numpya = torch.from_numpy(a) # numpy -&gt; tensor</code></pre><p>!!! éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>torch.tensor()</code> æ€»æ˜¯ä¼šè¿›è¡Œæ•°æ®æ‹·è´ï¼Œæ–° tensor å’ŒåŸæ¥çš„æ•°æ®ä¸å†å…±äº«å†…å­˜ã€‚æ‰€ä»¥å¦‚æœä½ æƒ³å…±äº«å†…å­˜çš„è¯ï¼Œå»ºè®®ä½¿ç”¨ <code>torch.from_numpy()</code> æˆ–è€… <code>tensor.detach()</code> æ¥æ–°å»ºä¸€ä¸ª tensor, äºŒè€…å…±äº«å†…å­˜ã€‚</p><h3 id="11-nn"><a href="#11-nn" class="headerlink" title="11. nn"></a>11. nn</h3><pre><code class="hljs python"><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F</code></pre><h5 id="pad-å¡«å……"><a href="#pad-å¡«å……" class="headerlink" title="pad å¡«å……"></a>pad å¡«å……</h5><pre><code class="hljs python">nn.ConstantPad2d(padding, value)</code></pre><h5 id="å·ç§¯å’Œåå·ç§¯"><a href="#å·ç§¯å’Œåå·ç§¯" class="headerlink" title="å·ç§¯å’Œåå·ç§¯"></a>å·ç§¯å’Œåå·ç§¯</h5><pre><code class="hljs python">nn.Conv2d(in_channels, out_channels, kernel_size, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">0</span>, dilation=<span class="hljs-number">1</span>, groups=<span class="hljs-number">1</span>, bias=<span class="hljs-literal">True</span>)nn.ConvTranspose2d(in_channels, out_channels, kernel_size, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">0</span>, output_padding=<span class="hljs-number">0</span>, groups=<span class="hljs-number">1</span>, bias=<span class="hljs-literal">True</span>, dilation=<span class="hljs-number">1</span>)</code></pre><pre><code class="hljs python"><span class="hljs-comment">#ã€€æœ€å¸¸ç”¨çš„ä¸¤ç§å·ç§¯å±‚è®¾è®¡ 3x3 &amp; 1x1</span>conv = torch.nn.Conv2d(in_channels, out_channels, kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">1</span>, bias=<span class="hljs-literal">True</span>)conv = torch.nn.Conv2d(in_channels, out_channels, kernel_size=<span class="hljs-number">1</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">0</span>, bias=<span class="hljs-literal">True</span>)</code></pre><h5 id="æ± åŒ–å±‚"><a href="#æ± åŒ–å±‚" class="headerlink" title="æ± åŒ–å±‚"></a>æ± åŒ–å±‚</h5><pre><code class="hljs python">nn.MaxPool2d(kernel_size, stride=<span class="hljs-literal">None</span>, padding=<span class="hljs-number">0</span>, dilation=<span class="hljs-number">1</span>, return_indices=<span class="hljs-literal">False</span>, ceil_mode=<span class="hljs-literal">False</span>)nn.AvgPool2d(kernel_size, stride=<span class="hljs-literal">None</span>, padding=<span class="hljs-number">0</span>, ceil_mode=<span class="hljs-literal">False</span>, count_include_pad=<span class="hljs-literal">True</span>)nn.AdaptiveMaxPool2d(output_size, return_indices=<span class="hljs-literal">False</span>)nn.AdaptiveAvgPool2d(output_size)  <span class="hljs-comment"># global avg pool: output_size=1</span>nn.MaxUnpool2d(kernel_size, stride=<span class="hljs-literal">None</span>, padding=<span class="hljs-number">0</span>)</code></pre><h5 id="å…¨è¿æ¥å±‚"><a href="#å…¨è¿æ¥å±‚" class="headerlink" title="å…¨è¿æ¥å±‚"></a>å…¨è¿æ¥å±‚</h5><pre><code class="hljs python">nn.Linear(in_features, out_features, bias=<span class="hljs-literal">True</span>)</code></pre><h5 id="é˜²æ­¢è¿‡æ‹Ÿåˆç›¸å…³å±‚"><a href="#é˜²æ­¢è¿‡æ‹Ÿåˆç›¸å…³å±‚" class="headerlink" title="é˜²æ­¢è¿‡æ‹Ÿåˆç›¸å…³å±‚"></a>é˜²æ­¢è¿‡æ‹Ÿåˆç›¸å…³å±‚</h5><pre><code class="hljs python">nn.Dropout2d(p=<span class="hljs-number">0.5</span>, inplace=<span class="hljs-literal">False</span>)nn.AlphaDropout(p=<span class="hljs-number">0.5</span>)nn.BatchNorm2d(num_features, eps=<span class="hljs-number">1e-05</span>, momentum=<span class="hljs-number">0.1</span>, affine=<span class="hljs-literal">True</span>, track_running_stats=<span class="hljs-literal">True</span>)</code></pre><h5 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h5><pre><code class="hljs python">nn.Softplus(beta=<span class="hljs-number">1</span>, threshold=<span class="hljs-number">20</span>)nn.Tanh()nn.ReLU(inplace=<span class="hljs-literal">False</span>)    nn.ReLU6(inplace=<span class="hljs-literal">False</span>)nn.LeakyReLU(negative_slope=<span class="hljs-number">0.01</span>, inplace=<span class="hljs-literal">False</span>)nn.PReLU(num_parameters=<span class="hljs-number">1</span>, init=<span class="hljs-number">0.25</span>)nn.SELU(inplace=<span class="hljs-literal">False</span>)nn.ELU(alpha=<span class="hljs-number">1.0</span>, inplace=<span class="hljs-literal">False</span>)</code></pre><h5 id="RNN"><a href="#RNN" class="headerlink" title="RNN"></a>RNN</h5><pre><code class="hljs python">nn.RNNCell(input_size, hidden_size, bias=<span class="hljs-literal">True</span>, nonlinearity=<span class="hljs-string">&#x27;tanh&#x27;</span>)nn.RNN(*args, **kwargs)nn.LSTMCell(input_size, hidden_size, bias=<span class="hljs-literal">True</span>)nn.LSTM(*args, **kwargs)nn.GRUCell(input_size, hidden_size, bias=<span class="hljs-literal">True</span>)nn.GRU(*args, **kwargs)</code></pre><h5 id="Embedding"><a href="#Embedding" class="headerlink" title="Embedding"></a>Embedding</h5><pre><code class="hljs python">nn.Embedding(num_embeddings, embedding_dim, padding_idx=<span class="hljs-literal">None</span>, max_norm=<span class="hljs-literal">None</span>, norm_type=<span class="hljs-number">2</span>, scale_grad_by_freq=<span class="hljs-literal">False</span>, sparse=<span class="hljs-literal">False</span>, _weight=<span class="hljs-literal">None</span>)</code></pre><h5 id="Sequential"><a href="#Sequential" class="headerlink" title="Sequential"></a>Sequential</h5><pre><code class="hljs python">nn.Sequential(*args)</code></pre><h5 id="loss-functon"><a href="#loss-functon" class="headerlink" title="loss functon"></a>loss functon</h5><pre><code class="hljs python">nn.BCELoss(weight=<span class="hljs-literal">None</span>, size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)nn.CrossEntropyLoss(weight=<span class="hljs-literal">None</span>, size_average=<span class="hljs-literal">True</span>, ignore_index=<span class="hljs-number">-100</span>, reduce=<span class="hljs-literal">True</span>)<span class="hljs-comment"># CrossEntropyLoss ç­‰ä»·äº log_softmax + NLLLoss</span>nn.L1Loss(size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)nn.KLDivLoss(size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)nn.MSELoss(size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)nn.NLLLoss(weight=<span class="hljs-literal">None</span>, size_average=<span class="hljs-literal">True</span>, ignore_index=<span class="hljs-number">-100</span>, reduce=<span class="hljs-literal">True</span>)nn.NLLLoss2d(weight=<span class="hljs-literal">None</span>, size_average=<span class="hljs-literal">True</span>, ignore_index=<span class="hljs-number">-100</span>, reduce=<span class="hljs-literal">True</span>)nn.SmoothL1Loss(size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)nn.SoftMarginLoss(size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)nn.TripletMarginLoss(margin=<span class="hljs-number">1.0</span>, p=<span class="hljs-number">2</span>, eps=<span class="hljs-number">1e-06</span>, swap=<span class="hljs-literal">False</span>, size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)nn.CosineEmbeddingLoss(margin=<span class="hljs-number">0</span>, size_average=<span class="hljs-literal">True</span>, reduce=<span class="hljs-literal">True</span>)</code></pre><h5 id="functional-ğŸŒŸ"><a href="#functional-ğŸŒŸ" class="headerlink" title="functional    ğŸŒŸ"></a>functional    ğŸŒŸ</h5><pre><code class="hljs python">nn.functional <span class="hljs-comment"># nnä¸­çš„å¤§å¤šæ•°layerï¼Œåœ¨functionalä¸­éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹ç›¸å¯¹åº”çš„å‡½æ•°ã€‚</span>              <span class="hljs-comment"># nn.functionalä¸­çš„å‡½æ•°å’Œnn.Moduleçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œ</span>              <span class="hljs-comment"># ç”¨nn.Moduleå®ç°çš„layersæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œéƒ½æ˜¯ç”± class layer(nn.Module)å®šä¹‰ï¼Œ</span>              <span class="hljs-comment"># ä¼šè‡ªåŠ¨æå–å¯å­¦ä¹ çš„å‚æ•°ã€‚è€Œnn.functionalä¸­çš„å‡½æ•°æ›´åƒæ˜¯çº¯å‡½æ•°ï¼Œ</span>              <span class="hljs-comment"># ç”±def function(input)å®šä¹‰ã€‚</span></code></pre><h5 id="init"><a href="#init" class="headerlink" title="init"></a>init</h5><pre><code class="hljs python">torch.nn.init.uniformtorch.nn.init.normaltorch.nn.init.kaiming_uniformtorch.nn.init.kaiming_normaltorch.nn.init.xavier_normaltorch.nn.init.xavier_uniformtorch.nn.init.sparse</code></pre><h5 id="net"><a href="#net" class="headerlink" title="net"></a>net</h5><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">net_name</span>(<span class="hljs-params">nn.Module</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        super(net_name, self).__init__()        self.layer_name = xxxx    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span>(<span class="hljs-params">self, x</span>):</span>         x = self.layer_name(x)                <span class="hljs-keyword">return</span> xnet.parameters()   <span class="hljs-comment"># è·å–å‚æ•° </span>net.named_parameters  <span class="hljs-comment"># è·å–å‚æ•°åŠåç§°</span>net.zero_grad()  <span class="hljs-comment"># ç½‘ç»œæ‰€æœ‰æ¢¯åº¦æ¸…é›¶, grad åœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­æ˜¯ç´¯åŠ çš„(accumulated)ï¼Œ</span>                 <span class="hljs-comment"># è¿™æ„å‘³ç€æ¯ä¸€æ¬¡è¿è¡Œåå‘ä¼ æ’­ï¼Œæ¢¯åº¦éƒ½ä¼šç´¯åŠ ä¹‹å‰çš„æ¢¯åº¦ï¼Œæ‰€ä»¥åå‘ä¼ æ’­ä¹‹å‰éœ€æŠŠæ¢¯åº¦æ¸…é›¶ã€‚</span></code></pre><h3 id="12-optim-gt-form-torch-import-optim"><a href="#12-optim-gt-form-torch-import-optim" class="headerlink" title="12. optim -&gt; form torch import optim"></a>12. optim -&gt; form torch import optim</h3><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optimoptim.SGD(params, lr=<span class="hljs-number">0.01</span>, momentum=<span class="hljs-number">0</span>, dampening=<span class="hljs-number">0</span>, weight_decay=<span class="hljs-number">0</span>, nesterov=<span class="hljs-literal">False</span>)optim.ASGD(params, lr=<span class="hljs-number">0.01</span>, lambd=<span class="hljs-number">0.0001</span>, alpha=<span class="hljs-number">0.75</span>, t0=<span class="hljs-number">1000000.0</span>, weight_decay=<span class="hljs-number">0</span>)optim.LBFGS(params, lr=<span class="hljs-number">1</span>, max_iter=<span class="hljs-number">20</span>, max_eval=<span class="hljs-literal">None</span>, tolerance_grad=<span class="hljs-number">1e-05</span>, tolerance_change=<span class="hljs-number">1e-09</span>, history_size=<span class="hljs-number">100</span>, line_search_fn=<span class="hljs-literal">None</span>)optim.RMSprop(params, lr=<span class="hljs-number">0.01</span>, alpha=<span class="hljs-number">0.99</span>, eps=<span class="hljs-number">1e-08</span>, weight_decay=<span class="hljs-number">0</span>, momentum=<span class="hljs-number">0</span>, centered=<span class="hljs-literal">False</span>)optim.Rprop(params, lr=<span class="hljs-number">0.01</span>, etas=(<span class="hljs-number">0.5</span>, <span class="hljs-number">1.2</span>), step_sizes=(<span class="hljs-number">1e-06</span>, <span class="hljs-number">50</span>))optim.Adadelta(params, lr=<span class="hljs-number">1.0</span>, rho=<span class="hljs-number">0.9</span>, eps=<span class="hljs-number">1e-06</span>, weight_decay=<span class="hljs-number">0</span>)optim.Adagrad(params, lr=<span class="hljs-number">0.01</span>, lr_decay=<span class="hljs-number">0</span>, weight_decay=<span class="hljs-number">0</span>, initial_accumulator_value=<span class="hljs-number">0</span>)optim.Adam(params, lr=<span class="hljs-number">0.001</span>, betas=(<span class="hljs-number">0.9</span>, <span class="hljs-number">0.999</span>), eps=<span class="hljs-number">1e-08</span>, weight_decay=<span class="hljs-number">0</span>, amsgrad=<span class="hljs-literal">False</span>)optim.Adamax(params, lr=<span class="hljs-number">0.002</span>, betas=(<span class="hljs-number">0.9</span>, <span class="hljs-number">0.999</span>), eps=<span class="hljs-number">1e-08</span>, weight_decay=<span class="hljs-number">0</span>)optim.SparseAdam(params, lr=<span class="hljs-number">0.001</span>, betas=(<span class="hljs-number">0.9</span>, <span class="hljs-number">0.999</span>), eps=<span class="hljs-number">1e-08</span>)optim.Optimizer(params, defaults)optimizer.zero_grad()  <span class="hljs-comment"># ç­‰ä»·äº net.zero_grad() </span>optimizer.step()</code></pre><h3 id="13-learning-rate"><a href="#13-learning-rate" class="headerlink" title="13.  learning rate"></a>13.  learning rate</h3><pre><code class="hljs python"><span class="hljs-comment"># Reduce learning rate when validation accuarcy plateau.</span>scheduler = torch.optim.lr_scheduler.ReduceLROnPlateau(optimizer, mode=<span class="hljs-string">&#x27;max&#x27;</span>, patience=<span class="hljs-number">5</span>, verbose=<span class="hljs-literal">True</span>)<span class="hljs-comment"># Cosine annealing learning rate.</span>scheduler = torch.optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max=<span class="hljs-number">80</span>)<span class="hljs-comment"># Reduce learning rate by 10 at given epochs.</span>scheduler = torch.optim.lr_scheduler.MultiStepLR(optimizer, milestones=[<span class="hljs-number">50</span>, <span class="hljs-number">70</span>], gamma=<span class="hljs-number">0.1</span>)<span class="hljs-comment"># Learning rate warmup by 10 epochs.</span>scheduler = torch.optim.lr_scheduler.LambdaLR(optimizer, lr_lambda=<span class="hljs-keyword">lambda</span> t: t / <span class="hljs-number">10</span>)<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>):    scheduler.step()    train(...); val(...)</code></pre><h3 id="14-save-and-load-model"><a href="#14-save-and-load-model" class="headerlink" title="14. save and load model"></a>14. save and load model</h3><pre><code class="hljs python">torch.save(model.state_dict(), <span class="hljs-string">&#x27;xxxx_params.pth&#x27;</span>)model.load_state_dict(t.load(<span class="hljs-string">&#x27;xxxx_params.pth&#x27;</span>))torch.save(model, <span class="hljs-string">&#x27;xxxx.pth&#x27;</span>)model.torch.load(<span class="hljs-string">&#x27;xxxx.pth&#x27;</span>)all_data = dict(    optimizer = optimizer.state_dict(),    model = model.state_dict(),    info = <span class="hljs-string">u&#x27;model and optim parameter&#x27;</span>)t.save(all_data, <span class="hljs-string">&#x27;xxx.pth&#x27;</span>)all_data = t.load(<span class="hljs-string">&#x27;xxx.pth&#x27;</span>)all_data.keys()</code></pre><h3 id="15-torchvision"><a href="#15-torchvision" class="headerlink" title="15. torchvision"></a>15. torchvision</h3><h5 id="models"><a href="#models" class="headerlink" title="models"></a>models</h5><pre><code class="hljs python"><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> modelsresnet34 = models.resnet34(pretrained=<span class="hljs-literal">True</span>, num_classes=<span class="hljs-number">1000</span>)</code></pre><h5 id="data-augmentation"><a href="#data-augmentation" class="headerlink" title="data augmentation"></a>data augmentation</h5><pre><code class="hljs python"><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms<span class="hljs-comment"># transforms.CenterCrop           transforms.Grayscale           transforms.ColorJitter          </span><span class="hljs-comment"># transforms.Lambda               transforms.Compose             transforms.LinearTransformation </span><span class="hljs-comment"># transforms.FiveCrop             transforms.Normalize           transforms.functional           </span><span class="hljs-comment"># transforms.Pad                  transforms.RandomAffine        transforms.RandomHorizontalFlip  </span><span class="hljs-comment"># transforms.RandomApply          transforms.RandomOrder         transforms.RandomChoice         </span><span class="hljs-comment"># transforms.RandomResizedCrop    transforms.RandomCrop          transforms.RandomRotation        </span><span class="hljs-comment"># transforms.RandomGrayscale      transforms.RandomSizedCrop     transforms.RandomVerticalFlip   </span><span class="hljs-comment"># transforms.ToTensor             transforms.Resize              transforms.transforms                                           </span><span class="hljs-comment"># transforms.TenCrop              transforms.Scale               transforms.ToPILImage</span></code></pre><h5 id="è‡ªå®šä¹‰-dataset"><a href="#è‡ªå®šä¹‰-dataset" class="headerlink" title="è‡ªå®šä¹‰ dataset"></a>è‡ªå®šä¹‰ dataset</h5><pre><code class="hljs python"><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> Dataset<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">my_data</span>(<span class="hljs-params">Dataset</span>):</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, image_path, annotation_path, transform=None</span>):</span>        <span class="hljs-comment"># åˆå§‹åŒ–ï¼Œ è¯»å–æ•°æ®é›†  ğŸŒŸ</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__len__</span>(<span class="hljs-params">self</span>):</span>          <span class="hljs-comment"># è·å–æ•°æ®é›†çš„æ€»å¤§å°  ğŸŒŸ</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__getitem__</span>(<span class="hljs-params">self, id</span>):</span>  ğŸŒŸ        <span class="hljs-comment"># å¯¹äºåˆ¶å®šçš„ id, è¯»å–è¯¥æ•°æ®å¹¶è¿”å›    </span></code></pre><p><strong>datasets</strong></p><pre><code class="hljs python"><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> Dataset, Dataloader<span class="hljs-keyword">from</span> torchvision.transforms <span class="hljs-keyword">as</span> transformstransform = transforms.Compose([        transforms.ToTensor(), <span class="hljs-comment"># convert to Tensor</span>        transforms.Normalize((<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>), (<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>))]) <span class="hljs-comment"># normalization</span>dataset = ImageFolder(root, transform=transform, target_transform=<span class="hljs-literal">None</span>, loader=default_loader)dataloader = DataLoader(dataset, <span class="hljs-number">2</span>, collate_fn=my_collate_fn, num_workers=<span class="hljs-number">1</span>,shuffle=<span class="hljs-literal">True</span>)<span class="hljs-keyword">for</span> batch_datas, batch_labels <span class="hljs-keyword">in</span> dataloader:    ...</code></pre><h5 id="img-process"><a href="#img-process" class="headerlink" title="img process"></a>img process</h5><pre><code class="hljs python">img = make_grid(next(dataiter)[<span class="hljs-number">0</span>], <span class="hljs-number">4</span>) save_image(img, <span class="hljs-string">&#x27;a.png&#x27;</span>)</code></pre><h5 id="data-Visualization"><a href="#data-Visualization" class="headerlink" title="data Visualization"></a>data Visualization</h5><pre><code class="hljs python"><span class="hljs-keyword">from</span> torchvision.transforms <span class="hljs-keyword">import</span> ToPILImageshow = ToPILImage()  <span class="hljs-comment"># å¯ä»¥æŠŠTensorè½¬æˆImageï¼Œæ–¹ä¾¿å¯è§†åŒ–</span>(data, label) = trainset[<span class="hljs-number">100</span>]show((data + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>).resize((<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))  <span class="hljs-comment"># åº”è¯¥ä¼šè‡ªåŠ¨ä¹˜ä»¥ 255 çš„</span></code></pre><h3 id="16-Code-Samples"><a href="#16-Code-Samples" class="headerlink" title="16. Code Samples"></a>16. Code Samples</h3><pre><code class="hljs python"><span class="hljs-comment"># torch.device object used throughout this script</span>device = torch.device(<span class="hljs-string">&quot;cuda&quot;</span> <span class="hljs-keyword">if</span> use_cuda <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;cpu&quot;</span>)model = MyRNN().to(device)<span class="hljs-comment"># train</span>total_loss = <span class="hljs-number">0</span><span class="hljs-keyword">for</span> input, target <span class="hljs-keyword">in</span> train_loader:    input, target = input.to(device), target.to(device)    hidden = input.new_zeros(*h_shape)  <span class="hljs-comment"># has the same device &amp; dtype as `input`</span>    ...  <span class="hljs-comment"># get loss and optimize</span>    total_loss += loss.item()           <span class="hljs-comment"># get Python number from 1-element Tensor</span><span class="hljs-comment"># evaluate</span><span class="hljs-keyword">with</span> torch.no_grad():                   <span class="hljs-comment"># operations inside don&#x27;t track history</span>    <span class="hljs-keyword">for</span> input, target <span class="hljs-keyword">in</span> test_loader:        ...</code></pre><h3 id="17-jit-amp-torchscript"><a href="#17-jit-amp-torchscript" class="headerlink" title="17. jit &amp; torchscript"></a>17. jit &amp; torchscript</h3><pre><code class="hljs python"><span class="hljs-keyword">from</span> torch.jit <span class="hljs-keyword">import</span> script, tracetorch.jit.trace(model, torch.rand(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">224</span>,<span class="hljs-number">224</span>)) ã€€<span class="hljs-comment"># export model</span><span class="hljs-meta">@torch.jit.script</span></code></pre><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;torch/torch.h&gt;</span></span><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;torch/script.h&gt;</span></span><span class="hljs-meta"># img blob -&gt; img tensor</span>torch::Tensor img_tensor = torch::from_blob(image.data, &#123;<span class="hljs-number">1</span>, image.rows, image.cols, <span class="hljs-number">3</span>&#125;, torch::kByte);img_tensor = img_tensor.permute(&#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;);img_tensor = img_tensor.toType(torch::kFloat);img_tensor = img_tensor.div(<span class="hljs-number">255</span>);<span class="hljs-meta"># load model</span><span class="hljs-built_in">std</span>::<span class="hljs-built_in">shared_ptr</span>&lt;torch::jit::script::Module&gt; <span class="hljs-keyword">module</span> = torch::jit::load(<span class="hljs-string">&quot;resnet.pt&quot;</span>);<span class="hljs-meta"># forward</span>torch::Tensor output = <span class="hljs-keyword">module</span>-&gt;forward(&#123;img_tensor&#125;).toTensor();</code></pre><h3 id="18-onnx"><a href="#18-onnx" class="headerlink" title="18. onnx"></a>18. onnx</h3><pre><code class="hljs python">torch.onnx.export(model, dummy data, xxxx.proto) <span class="hljs-comment"># exports an ONNX formatted</span>model = onnx.load(<span class="hljs-string">&quot;alexnet.proto&quot;</span>)               <span class="hljs-comment"># load an ONNX model</span>onnx.checker.check_model(model)                  <span class="hljs-comment"># check that the model</span>onnx.helper.printable_graph(model.graph)         <span class="hljs-comment"># print a human readableã€€representation of the graph</span></code></pre><h3 id="19-Distributed-Training"><a href="#19-Distributed-Training" class="headerlink" title="19. Distributed Training"></a>19. Distributed Training</h3><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch.distributed <span class="hljs-keyword">as</span> dist          <span class="hljs-comment"># distributed communication</span><span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> Process       <span class="hljs-comment"># memory sharing processes</span></code></pre>]]></content>
    
    
    <categories>
      
      <category>è¯­è¨€å’Œåº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>The next step of machine learning</title>
    <link href="/2019/03/08/The-next-step-of-machine-learning/"/>
    <url>/2019/03/08/The-next-step-of-machine-learning/</url>
    
    <content type="html"><![CDATA[<p>ğŸ” The next step of machine learning (æœºå™¨å­¦ä¹ ä¸‹ä¸€æ­¥çš„å¯èƒ½çš„å‘å±•æ–¹å‘)</p><a id="more"></a><h3 id="The-next-step-of-machine-learningï¼š"><a href="#The-next-step-of-machine-learningï¼š" class="headerlink" title="The next step of machine learningï¼š"></a>The next step of machine learningï¼š</h3><h5 id="1-Anomaly-Detectionï¼ˆè®©æœºå™¨çŸ¥é“æˆ‘ä¸çŸ¥é“ï¼‰"><a href="#1-Anomaly-Detectionï¼ˆè®©æœºå™¨çŸ¥é“æˆ‘ä¸çŸ¥é“ï¼‰" class="headerlink" title="1.Anomaly Detectionï¼ˆè®©æœºå™¨çŸ¥é“æˆ‘ä¸çŸ¥é“ï¼‰"></a>1.Anomaly Detectionï¼ˆè®©æœºå™¨çŸ¥é“æˆ‘ä¸çŸ¥é“ï¼‰</h5><h5 id="2-Explainable-AIï¼ˆå¯è§£é‡Šæ€§AIï¼‰"><a href="#2-Explainable-AIï¼ˆå¯è§£é‡Šæ€§AIï¼‰" class="headerlink" title="2.Explainable AIï¼ˆå¯è§£é‡Šæ€§AIï¼‰"></a>2.Explainable AIï¼ˆå¯è§£é‡Šæ€§AIï¼‰</h5><h5 id="3-Adversarial-attackï¼ˆå¯¹æŠ—æ”»å‡»ï¼‰"><a href="#3-Adversarial-attackï¼ˆå¯¹æŠ—æ”»å‡»ï¼‰" class="headerlink" title="3.Adversarial attackï¼ˆå¯¹æŠ—æ”»å‡»ï¼‰"></a>3.Adversarial attackï¼ˆå¯¹æŠ—æ”»å‡»ï¼‰</h5><h5 id="4-Life-long-Learningï¼ˆç»ˆèº«å­¦ä¹ ï¼‰"><a href="#4-Life-long-Learningï¼ˆç»ˆèº«å­¦ä¹ ï¼‰" class="headerlink" title="4.Life-long Learningï¼ˆç»ˆèº«å­¦ä¹ ï¼‰"></a>4.Life-long Learningï¼ˆç»ˆèº«å­¦ä¹ ï¼‰</h5><h5 id="5-Meta-learning-Learning-to-learnï¼ˆå­¦ä¼šå¦‚ä½•å­¦ä¹ ï¼‰"><a href="#5-Meta-learning-Learning-to-learnï¼ˆå­¦ä¼šå¦‚ä½•å­¦ä¹ ï¼‰" class="headerlink" title="5.Meta-learning/Learning to learnï¼ˆå­¦ä¼šå¦‚ä½•å­¦ä¹ ï¼‰"></a>5.Meta-learning/Learning to learnï¼ˆå­¦ä¼šå¦‚ä½•å­¦ä¹ ï¼‰</h5><h5 id="6-Few-shot-learning-Zero-shot-Learningï¼ˆå°æ ·æœ¬å­¦ä¹ ï¼‰"><a href="#6-Few-shot-learning-Zero-shot-Learningï¼ˆå°æ ·æœ¬å­¦ä¹ ï¼‰" class="headerlink" title="6.Few-shot learning/Zero-shot Learningï¼ˆå°æ ·æœ¬å­¦ä¹ ï¼‰"></a>6.Few-shot learning/Zero-shot Learningï¼ˆå°æ ·æœ¬å­¦ä¹ ï¼‰</h5><h5 id="7-how-to-use-reinforcement-Learning-effectivelyï¼Ÿï¼ˆæœ‰æ•ˆä½¿ç”¨å¢å¼ºå­¦ä¹ ï¼‰"><a href="#7-how-to-use-reinforcement-Learning-effectivelyï¼Ÿï¼ˆæœ‰æ•ˆä½¿ç”¨å¢å¼ºå­¦ä¹ ï¼‰" class="headerlink" title="7.how to use reinforcement Learning  effectivelyï¼Ÿï¼ˆæœ‰æ•ˆä½¿ç”¨å¢å¼ºå­¦ä¹ ï¼‰"></a>7.how to use reinforcement Learning  effectivelyï¼Ÿï¼ˆæœ‰æ•ˆä½¿ç”¨å¢å¼ºå­¦ä¹ ï¼‰</h5><h5 id="8-Network-Compressionï¼ˆç¥ç»ç½‘ç»œå‹ç¼©ï¼‰"><a href="#8-Network-Compressionï¼ˆç¥ç»ç½‘ç»œå‹ç¼©ï¼‰" class="headerlink" title="8.Network Compressionï¼ˆç¥ç»ç½‘ç»œå‹ç¼©ï¼‰"></a>8.Network Compressionï¼ˆç¥ç»ç½‘ç»œå‹ç¼©ï¼‰</h5><h5 id="9-Unsupervised-Domain-Adaptationï¼ˆé¢†åŸŸè‡ªé€‚åº”ï¼‰"><a href="#9-Unsupervised-Domain-Adaptationï¼ˆé¢†åŸŸè‡ªé€‚åº”ï¼‰" class="headerlink" title="9.Unsupervised Domain Adaptationï¼ˆé¢†åŸŸè‡ªé€‚åº”ï¼‰"></a>9.Unsupervised Domain Adaptationï¼ˆé¢†åŸŸè‡ªé€‚åº”ï¼‰</h5><h5 id="10-Weak-Supervision-unsupervised-learning-å¾®ç›‘ç£-æ— ç›‘ç£"><a href="#10-Weak-Supervision-unsupervised-learning-å¾®ç›‘ç£-æ— ç›‘ç£" class="headerlink" title="10.Weak Supervision/unsupervised learning(å¾®ç›‘ç£/æ— ç›‘ç£)"></a>10.Weak Supervision/unsupervised learning(å¾®ç›‘ç£/æ— ç›‘ç£)</h5><h5 id="11-Video-understanding-ï¼ˆè§†é¢‘ç†è§£ï¼‰"><a href="#11-Video-understanding-ï¼ˆè§†é¢‘ç†è§£ï¼‰" class="headerlink" title="11.Video understanding ï¼ˆè§†é¢‘ç†è§£ï¼‰"></a>11.Video understanding ï¼ˆè§†é¢‘ç†è§£ï¼‰</h5><h5 id="12-Graph-networkï¼ˆå›¾ç½‘ç»œï¼‰"><a href="#12-Graph-networkï¼ˆå›¾ç½‘ç»œï¼‰" class="headerlink" title="12.Graph networkï¼ˆå›¾ç½‘ç»œï¼‰"></a>12.Graph networkï¼ˆå›¾ç½‘ç»œï¼‰</h5><h5 id="13-Transfer-learningï¼ˆè¿ç§»å­¦ä¹ ï¼‰"><a href="#13-Transfer-learningï¼ˆè¿ç§»å­¦ä¹ ï¼‰" class="headerlink" title="13.Transfer learningï¼ˆè¿ç§»å­¦ä¹ ï¼‰"></a>13.Transfer learningï¼ˆè¿ç§»å­¦ä¹ ï¼‰</h5>]]></content>
    
    
    
    <tags>
      
      <tag>æ¢ç´¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Toolbox</title>
    <link href="/2018/09/08/Deep-Learning-Toolbox/"/>
    <url>/2018/09/08/Deep-Learning-Toolbox/</url>
    
    <content type="html"><![CDATA[<h2 id="ğŸ”§-Deep-Learning-toolbox"><a href="#ğŸ”§-Deep-Learning-toolbox" class="headerlink" title="ğŸ”§ Deep Learning toolbox"></a>ğŸ”§ Deep Learning toolbox</h2><a id="more"></a><h4 id="ğŸ“š-Datasets-search"><a href="#ğŸ“š-Datasets-search" class="headerlink" title="ğŸ“š Datasets search"></a>ğŸ“š Datasets search</h4><ol><li><p><a href="https://www.kaggle.com"><strong>Kaggle</strong></a> </p></li><li><p><a href="https://toolbox.google.com/datasetsearch"><strong>Google Datasets Search Engine</strong></a></p></li><li><p><a href="https://msropendata.com"><strong>Microsoft Datasets</strong></a></p></li><li><p><a href="https://www.visualdata.io"><strong>Computer Vision Datasets</strong></a></p></li><li><p><a href="https://github.com/awesomedata/awesome-public-datasets"><strong>Github awesomedata</strong></a></p></li><li><p><a href="https://archive.ics.uci.edu/ml/datasets.html"><strong>UCI Machine Learning Repository.</strong></a></p></li><li><p><a href="https://registry.opendata.aws"><strong>Amazon Datasets</strong></a></p></li><li><p><strong>Government Datasets:</strong> <a href="https://data.europa.eu/euodp/data/dataset"><strong>EU</strong></a>                 <a href="https://www.data.gov/"><strong>US</strong></a>                 <a href="https://catalogue.data.govt.nz/dataset"><strong>NZL</strong></a>                <a href="https://data.gov.in/"><strong>IND</strong></a>  </p></li></ol><h4 id="ğŸ”-Visualizing-neural-network-architectures"><a href="#ğŸ”-Visualizing-neural-network-architectures" class="headerlink" title="ğŸ” Visualizing neural network architectures"></a>ğŸ” Visualizing neural network architectures</h4><ol><li><a href="https://github.com/lutzroeder/Netron"><strong>Netron:</strong></a>  now supports <strong>ONNX</strong>, <strong>Keras</strong>, <strong>CoreML</strong>, <strong>Caffe2</strong>, <strong>Mxnet</strong>, <strong>Pytorch</strong> and <strong>Tensorflow</strong>.</li><li><a href="https://ethereon.github.io/netscope/#/editor"><strong>Netscope:</strong></a>  or  <strong>GraphViz</strong>:   <strong>Caffe</strong>       </li><li><a href="https://github.com/tensorflow/tensorboard"><strong>TensorBoard:</strong></a>   <strong>Tensorflow</strong>  </li><li><a href="https://github.com/szagoruyko/pytorchviz"><strong>Graphviz:</strong></a>   <strong>Pytorch</strong>   </li><li><a href="https://github.com/Murugan-natarajan/mxnet/blob/7cd06109643664442045457a6c318c26d1c728ae/docs/how_to/visualize_graph.md"><strong>mxnet.viz:</strong></a>  <strong>mxnet</strong>   </li><li><a href="https://keras.io/utils/#print_summary"><strong>model.summary():</strong></a>    <strong>keras</strong></li></ol><h4 id="ğŸ·-Lable-Tool"><a href="#ğŸ·-Lable-Tool" class="headerlink" title="ğŸ· Lable Tool"></a>ğŸ· Lable Tool</h4><ol><li><p><a href="https://github.com/opencv/cvat"><strong>CVAT:</strong></a>Computer Vision Annotation Tool (CVAT) is a web-based tool which helps to annotate video and images for Computer Vision algorithms</p></li><li><p><a href="https://github.com/wkentaro/labelme"><strong>Labelme:</strong></a> Image Polygonal Annotation with Python</p></li><li><a href="https://github.com/tzutalin/labelImg"><strong>LabelImg</strong></a>ï¼šLabelImg is a graphical image annotation tool and label object bounding boxes in images </li><li><a href="https://github.com/AlexeyAB/Yolo_mark"><strong>Yolo_mark:</strong></a>GUI for marking bounded boxes of objects in images for training neural network Yolo v3 and v2</li><li><a href="https://github.com/cvhciKIT/sloth"><strong>Sloth:</strong></a>Sloth is a tool for labeling image and video data for computer vision research.</li><li><a href="http://www.cs.columbia.edu/~vondrick/vatic/"><strong>Vatic:</strong></a>  vatic is a <strong>free, online, interactive video annotation tool</strong> for computer vision research that crowdsources work to Amazonâ€™s Mechanical Turk.</li><li><a href="https://github.com/Microsoft/VoTT/"><strong>VoTT:</strong></a>Visual Object Tagging Tool: An electron app for building end to end Object Detection Models from Images and Videos.</li><li><a href="https://github.com/fidler-lab/polyrnn-pp-pytorch"><strong>Polygon-RNN++:</strong></a> Polygon-RNN++ allows you to train new Polygon-RNN++ models, and run our demo tool on local machines. </li></ol>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Toolbox</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitå¸¸è§é—®é¢˜</title>
    <link href="/2018/08/17/git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <url>/2018/08/17/git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h4 id="1-Git-åŸºæœ¬æµç¨‹"><a href="#1-Git-åŸºæœ¬æµç¨‹" class="headerlink" title="1. Git åŸºæœ¬æµç¨‹"></a>1. Git åŸºæœ¬æµç¨‹</h4><p><img src="/2018/08/17/git%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/gitflow.png" alt></p><h4 id="2-git-commit-è§„èŒƒ"><a href="#2-git-commit-è§„èŒƒ" class="headerlink" title="2. git commit è§„èŒƒ:"></a>2. git commit è§„èŒƒ:</h4><p>å¸¸ç”¨çš„ Git commit è§„èŒƒï¼Œæ²¡æœ‰å¼ºåˆ¶çš„è§„å®šï¼Œä¸»è¦æ˜¯ç¿»é˜…ä»¥å‰çš„æ—¥å¿—ä¼šæ›´æ¸…æ™°ã€‚</p><p><strong>åŸºæœ¬æ ¼å¼:</strong></p><pre><code class="hljs shell">git commit -m &quot;type: description&quot;</code></pre><p><strong>ä¸€ä¸ªæ¯”è¾ƒè¯¦ç»†çš„æ ¼å¼:</strong></p><pre><code class="hljs shell">&lt;type&gt;: (If applied, this commit will...) &lt;subject&gt; (Max 50 char)|&lt;----  Using a Maximum Of 50 Characters  ----&gt;|Explain why this change is being made|&lt;----   Try To Limit Each Line to a Maximum Of 72 Characters   ----&gt;|Provide links or keys to any relevant tickets, articles or other resourcesExample: Github issue #23</code></pre><p><strong>type</strong> æ˜¯ commit çš„ç±»åˆ«ï¼Œåªå…è®¸å¦‚ä¸‹å‡ ç§æ ‡è¯†ï¼š</p><ul><li><strong>fix: ä¿®å¤bug</strong></li><li><strong>feat/add:</strong> æ–°åŠŸèƒ½ (new feature) </li><li>update: æ›´æ–°</li><li>refactor : æŸä¸ªå·²æœ‰åŠŸèƒ½é‡æ„</li><li>perf : æ€§èƒ½ä¼˜åŒ–</li><li>style : ä»£ç æ ¼å¼æ”¹å˜ (formatting, missing semi colons, etc; no code change)</li><li>test: å¢åŠ æµ‹è¯•ä»£ç  (adding or refactoring tests; no production code change)</li><li>docs : æ–‡æ¡£æ”¹å˜  (changes to documentation)</li><li>revert: æ’¤é”€ä¸Šä¸€æ¬¡çš„commit</li><li>build: æ„å»ºå·¥å…·æˆ–æ„å»ºè¿‡ç¨‹ç­‰çš„å˜åŠ¨ï¼Œå¦‚ï¼šå…³è”åŒ…å‡çº§ç­‰</li><li><strong>chore</strong>    (updating grunt tasks etc; no production code change)</li></ul><p><strong>description</strong> æ˜¯å¯¹æœ¬æ¬¡æäº¤çš„ç®€çŸ­æè¿°ï¼š</p><ul><li>ä¸è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚</li><li>æ¨èä»¥åŠ¨è¯å¼€å¤´ï¼Œå¦‚ï¼š è®¾ç½®ã€ä¿®æ”¹ã€å¢åŠ ã€åˆ å‡ã€æ’¤é”€ç­‰</li></ul><p>å‚è€ƒ: <a href="https://gist.github.com/adeekshith/cd4c95a064977cdc6c50">https://gist.github.com/adeekshith/cd4c95a064977cdc6c50</a></p><h4 id="3-git-æäº¤ç©ºæ–‡ä»¶å¤¹"><a href="#3-git-æäº¤ç©ºæ–‡ä»¶å¤¹" class="headerlink" title="3. git æäº¤ç©ºæ–‡ä»¶å¤¹"></a>3. git æäº¤ç©ºæ–‡ä»¶å¤¹</h4><p>åœ¨ç©ºæ–‡ä»¶å¤¹ä¸‹å»ºç«‹ .gitkeep</p><pre><code class="hljs shell">touch .gitkeep</code></pre><p>å†…å®¹å¦‚ä¸‹:</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Ignore everything <span class="hljs-keyword">in</span> this directory </span>* <span class="hljs-meta">#</span><span class="bash"> Except this file !.gitkeep </span></code></pre><h4 id="4-åˆ é™¤-mac-ä¸‹é¢è‡ªåŠ¨ç”Ÿæˆçš„-DS-store"><a href="#4-åˆ é™¤-mac-ä¸‹é¢è‡ªåŠ¨ç”Ÿæˆçš„-DS-store" class="headerlink" title="4. åˆ é™¤ mac ä¸‹é¢è‡ªåŠ¨ç”Ÿæˆçš„ .DS_store"></a>4. åˆ é™¤ mac ä¸‹é¢è‡ªåŠ¨ç”Ÿæˆçš„ .DS_store</h4><p>åˆ é™¤æ‰€æœ‰éšè—.DS_storeæ–‡ä»¶ï¼Œæ‰“å¼€å‘½ä»¤è¡Œçª—å£</p><pre><code class="hljs cpp">sudo find . -name <span class="hljs-string">&quot;.DS_Store&quot;</span> -depth -exec rm &#123;&#125; \;</code></pre><p>è®¾ç½®ä¸å†äº§ç”Ÿé€‰é¡¹, æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre><code class="hljs shell">defaults write com.apple.desktopservices DSDontWriteNetworkStores true</code></pre><h4 id="5-é€šè¿‡ä¿®æ”¹-hosts-æé«˜-github-è®¿é—®é€Ÿåº¦"><a href="#5-é€šè¿‡ä¿®æ”¹-hosts-æé«˜-github-è®¿é—®é€Ÿåº¦" class="headerlink" title="5. é€šè¿‡ä¿®æ”¹ hosts æé«˜ github è®¿é—®é€Ÿåº¦"></a>5. é€šè¿‡ä¿®æ”¹ hosts æé«˜ github è®¿é—®é€Ÿåº¦</h4><p>å…ˆå» <strong>IPAddress.com æˆ–è€… <a href="http://tool.chinaz.com/dns">http://tool.chinaz.com/dns</a></strong> ç½‘ç«™ï¼ŒæŸ¥è¯¢3ä¸ªä¸GitHubç›¸å…³ç½‘å€å¯¹åº”çš„IPåœ°å€ï¼š</p><p>â€‹    1ã€github.com</p><p>â€‹    2ã€assets-cdn.github.com</p><p>â€‹    3ã€github.global.ssl.fastly.net</p><p>é¡µé¢ä¸Šä¼šæŸ¥çœ‹åˆ°è¿™3ä¸ªåœ°å€å¯¹åº”çš„ IP åœ°å€ï¼ŒæŠŠæŸ¥è¯¢åˆ°çš„IPå’Œåœ°å€åŠ åˆ° hosts æ–‡ä»¶ä¸‹, æ¯”å¦‚:</p><pre><code class="hljs shell">13.250.177.223   github.com</code></pre><p>æˆ‘çš„ç³»ç»Ÿä¸‹hostsæ–‡ä»¶ä¸èƒ½ç›´æ¥ä¿å­˜ï¼Œé‚£å°± copy åˆ°å…¶å®ƒè·¯å¾„ä¸‹ï¼Œä¿®æ”¹ä¿å­˜åå† ctrl+xï¼Œctrl+v å›å»ï¼›</p><p>å†æ¸…ä¸€ä¸‹ç³»ç»ŸDNSç¼“å­˜ï¼Œ</p><p>win: cmdå‘½ä»¤æ‰“å¼€DOSçª—å£ï¼Œè¾“å…¥</p><pre><code class="hljs shell">ipconfig/flushdns</code></pre><p>ubuntu ä¸‹:</p><p>å®‰è£…å¹¶é‡æ–°å¯åŠ¨ nscd å®ˆæŠ¤ç¨‹åºã€‚</p><pre><code class="hljs shell">sudo aptitude install nscdsudo /etc/init.d/nscd restart</code></pre><h4 id="6-å¦‚ä½•è®¾ç½®ä¸è¢«è¿½è¸ªçš„æ–‡ä»¶"><a href="#6-å¦‚ä½•è®¾ç½®ä¸è¢«è¿½è¸ªçš„æ–‡ä»¶" class="headerlink" title="6. å¦‚ä½•è®¾ç½®ä¸è¢«è¿½è¸ªçš„æ–‡ä»¶"></a>6. å¦‚ä½•è®¾ç½®ä¸è¢«è¿½è¸ªçš„æ–‡ä»¶</h4><p>â€‹    æœ‰äº›æ–‡ä»¶æ˜¯ä¸æƒ³è¢«è¿½è¸ªçš„ï¼Œ å¯ä»¥ä¿®æ”¹  <strong>.git/info/exclude</strong> æ–‡ä»¶ï¼Œ ä»¥ # å¼€å¤´ï¼Œæ·»åŠ è§„åˆ™å³å¯ã€‚</p><p>è¿™é‡Œæä¾›ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ .gitignore æ–‡ä»¶, å°†å…¶å‘½åä¸º .gitignore ç„¶åæ”¾åˆ°æ ¹ç›®å½•å³å¯ã€‚</p><h4 id="7-server-certificate-verification-failed-CAfile-etc-ssl-certs-ca-certificates-crt-CRLfile-none"><a href="#7-server-certificate-verification-failed-CAfile-etc-ssl-certs-ca-certificates-crt-CRLfile-none" class="headerlink" title="7. server certificate verification failed. CAfile:/etc/ssl/certs/ca-certificates.crt CRLfile: none"></a>7. server certificate verification failed. CAfile:/etc/ssl/certs/ca-certificates.crt CRLfile: none</h4><pre><code class="hljs routeros"><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">GIT_SSL_NO_VERIFY</span>=1</code></pre>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>cmakeä½¿ç”¨</title>
    <link href="/2018/08/17/cmake%E4%BD%BF%E7%94%A8/"/>
    <url>/2018/08/17/cmake%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>cmake åŸºæœ¬ä½¿ç”¨</p><a id="more"></a><h3 id="ä¸€-å®ä¾‹é¡¹ç›®"><a href="#ä¸€-å®ä¾‹é¡¹ç›®" class="headerlink" title="ä¸€. å®ä¾‹é¡¹ç›®"></a>ä¸€. å®ä¾‹é¡¹ç›®</h3><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> project1  <span class="hljs-comment"># use project2/project3 instead of project1</span></span><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> build</span><span class="hljs-meta">$</span><span class="bash"> cmake ..</span><span class="hljs-meta">$</span><span class="bash"> make</span><span class="hljs-meta">$</span><span class="bash"> ./hello <span class="hljs-comment"># </span></span>Hello World.</code></pre><ul><li><strong>project 1:</strong>  ä½¿ç”¨cmake ç¼–è¯‘é¡¹ç›®</li><li><strong>project 2:</strong> ä½¿ç”¨åŠ¨æ€é“¾æ¥åº“</li><li><strong>project 3ï¼š</strong> å°†srcå’Œinclude åˆ†åˆ«æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹</li><li><strong>project4:</strong> ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</li></ul><h3 id="äºŒ-åŸºæœ¬è¯­æ³•"><a href="#äºŒ-åŸºæœ¬è¯­æ³•" class="headerlink" title="äºŒ. åŸºæœ¬è¯­æ³•"></a>äºŒ. åŸºæœ¬è¯­æ³•</h3><h5 id="1-CMake-åŸºæœ¬ä½¿ç”¨"><a href="#1-CMake-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="1. CMake åŸºæœ¬ä½¿ç”¨"></a>1. CMake åŸºæœ¬ä½¿ç”¨</h5><pre><code class="hljs cmake"><span class="hljs-keyword">cmake_minimum_required</span> (VERSION <span class="hljs-number">2.8</span>)<span class="hljs-keyword">project</span> (Demo1)<span class="hljs-keyword">add_executable</span>(Demo main.cpp)</code></pre><h5 id="2-å¤šä¸ªæ–‡ä»¶åŒæ—¶ç¼–è¯‘"><a href="#2-å¤šä¸ªæ–‡ä»¶åŒæ—¶ç¼–è¯‘" class="headerlink" title="2. å¤šä¸ªæ–‡ä»¶åŒæ—¶ç¼–è¯‘"></a>2. å¤šä¸ªæ–‡ä»¶åŒæ—¶ç¼–è¯‘</h5><pre><code class="hljs cmake"><span class="hljs-comment"># ä½¿ç”¨ aux_source_directory(&lt;dir&gt; &lt;variable&gt;)</span><span class="hljs-keyword">aux_source_directory</span>(src DIR_SRCS)<span class="hljs-keyword">add_library</span>(xxxxx SHARED <span class="hljs-variable">$&#123;SRC_FILES&#125;</span>)<span class="hljs-comment"># glob</span><span class="hljs-keyword">file</span>(GLOB_RECURSE SRC_FILES src/*.cpp) <span class="hljs-keyword">add_library</span>(xxxxx SHARED <span class="hljs-variable">$&#123;SRC_FILES&#125;</span>)<span class="hljs-comment"># (3)å¤šä¸ªæ–‡ä»¶åŒæ—¶å†™</span><span class="hljs-keyword">set</span>(SRC_FILES    src/util/xxx.cpp    src/util/xxxxx_xxxxxxx.cpp    src/xxxx.cpp    )<span class="hljs-keyword">add_library</span>(xxxxx SHARED <span class="hljs-variable">$&#123;SRC_FILES&#125;</span>)</code></pre><h5 id="3-ç”ŸæˆåŠ¨æ€åº“æˆ–è€…å…±äº«åº“"><a href="#3-ç”ŸæˆåŠ¨æ€åº“æˆ–è€…å…±äº«åº“" class="headerlink" title="3. ç”ŸæˆåŠ¨æ€åº“æˆ–è€…å…±äº«åº“"></a>3. ç”ŸæˆåŠ¨æ€åº“æˆ–è€…å…±äº«åº“</h5><pre><code class="hljs cmake"><span class="hljs-comment"># é™æ€åº“</span><span class="hljs-keyword">add_library</span>(slzheliib STATIC libStatic.cpp)<span class="hljs-comment"># å…±äº«åº“</span><span class="hljs-keyword">add_library</span>(dlib SHARED libShared.cpp)</code></pre><h5 id="4-ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…-ä»¥-opencv-å’Œ-FFTW-ä¸ºä¾‹"><a href="#4-ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…-ä»¥-opencv-å’Œ-FFTW-ä¸ºä¾‹" class="headerlink" title="4. ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…(ä»¥ opencv å’Œ FFTW ä¸ºä¾‹)"></a>4. ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…(ä»¥ opencv å’Œ FFTW ä¸ºä¾‹)</h5><pre><code class="hljs cmake"><span class="hljs-comment"># ç¼–è¯‘: add_executable(Demo demo.cpp)</span><span class="hljs-keyword">find_package</span>( OpenCV REQUIRED)<span class="hljs-keyword">if</span> (OpenCV_FOUND)    <span class="hljs-keyword">include_directories</span>(<span class="hljs-variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span>)    <span class="hljs-keyword">target_link_libraries</span>(Demo <span class="hljs-variable">$&#123;Opencv_LIBS&#125;</span>)<span class="hljs-keyword">endif</span> (OpenCV_FOUND)</code></pre><pre><code class="hljs cmake"><span class="hljs-comment"># å¦å¤–ä¸€ç§æ–¹å¼(é€šè¿‡ xxx.cmake è¿›è¡Œ)ã€€</span><span class="hljs-comment"># cmakeç›¸å½“äºä¸Šä¸€ç§æ–¹å¼ä¸­çš„find_packageå’Œinclude_directories</span><span class="hljs-comment"># è¿™é‡Œä»¥ FFTW ä¸ºä¾‹</span><span class="hljs-keyword">include</span>(cmake/FindFFTW.cmake)<span class="hljs-keyword">target_link_libraries</span>(udwt-gumbel <span class="hljs-variable">$&#123;OpenCV_LIBS&#125;</span> <span class="hljs-variable">$&#123;FFTW_LIBRARIES&#125;</span>)</code></pre><h5 id="5-å¦‚ä½•ä¼˜åŒ–ç¼–è¯‘é€‰é¡¹-Debug-Releaseæ¨¡å¼-ï¼š"><a href="#5-å¦‚ä½•ä¼˜åŒ–ç¼–è¯‘é€‰é¡¹-Debug-Releaseæ¨¡å¼-ï¼š" class="headerlink" title="5. å¦‚ä½•ä¼˜åŒ–ç¼–è¯‘é€‰é¡¹(Debug/Releaseæ¨¡å¼)ï¼š"></a>5. å¦‚ä½•ä¼˜åŒ–ç¼–è¯‘é€‰é¡¹(Debug/Releaseæ¨¡å¼)ï¼š</h5><p>â€‹    Debugé€šå¸¸ç§°ä¸ºè°ƒè¯•ç‰ˆæœ¬ï¼Œå®ƒåŒ…å«è°ƒè¯•ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸ä½œä»»ä½•ä¼˜åŒ–ï¼Œä¾¿äºç¨‹åºå‘˜è°ƒè¯•ç¨‹åºã€‚Release ç§°ä¸ºå‘å¸ƒç‰ˆæœ¬ï¼Œå®ƒå¾€å¾€æ˜¯è¿›è¡Œäº†å„ç§ä¼˜åŒ–ï¼Œä½¿å¾—ç¨‹åºåœ¨ä»£ç å¤§å°å’Œè¿è¡Œé€Ÿåº¦ä¸Šéƒ½æ˜¯æœ€ä¼˜çš„ï¼Œä»¥ä¾¿ç”¨æˆ·å¾ˆå¥½åœ°ä½¿ç”¨ã€‚</p><ul><li>åœ¨CMakeLists.txtä¸‹åŠ å…¥</li></ul><pre><code class="hljs cmake"><span class="hljs-comment"># cmake -DCMAKE_BUILD_TYPE=Debug/Release ..</span><span class="hljs-keyword">SET</span>(CMAKE_BUILD_TYPE <span class="hljs-string">&quot;Release&quot;</span>)<span class="hljs-keyword">if</span> (CMAKE_BUILD_TYPE <span class="hljs-keyword">STREQUAL</span> <span class="hljs-string">&quot;Debug&quot;</span>)    <span class="hljs-keyword">set</span>(CMAKE_CXX_FLAGS_DEBUG <span class="hljs-string">&quot;$ENV&#123;CXXFLAGS&#125; -O0 -Wall -g -ggdb&quot;</span>)    <span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;CMAKE_BUILD_TYPE = Debug&quot;</span>)<span class="hljs-keyword">else</span>()    <span class="hljs-keyword">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="hljs-string">&quot;$ENV&#123;CXXFLAGS&#125; -O3 -Wall&quot;</span>)    <span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;CMAKE_BUILD_TYPE = Release&quot;</span>)<span class="hljs-keyword">endif</span>()</code></pre><p>â€‹        <strong>CMakeä¸­æœ‰ä¸€ä¸ªå˜é‡ CMAKE_BUILD_TYPE ,å¯ä»¥çš„å–å€¼æ˜¯Noneã€Debugã€Releaseã€RelWithDebInfoå’ŒMinSizeRelã€‚å½“è¿™ä¸ªå˜é‡å€¼ä¸ºDebugçš„æ—¶å€™,CMakeä¼šä½¿ç”¨å˜é‡ CMAKE_CXX_FLAGS_DEBUG å’Œ CMAKE_C_FLAGS_DEBUG ä¸­çš„å­—ç¬¦ä¸²ä½œä¸ºç¼–è¯‘é€‰é¡¹ç”Ÿæˆ Makefile</strong></p><div class="table-container"><table><thead><tr><th>CMAKE_BUILD_TYPE</th><th>å¯¹åº”çš„cç¼–è¯‘é€‰é¡¹å˜é‡</th><th>å¯¹åº”çš„c++ç¼–è¯‘é€‰é¡¹å˜é‡</th></tr></thead><tbody><tr><td>None</td><td>CMAKE_C_FLAGS</td><td>CMAKE_CXX_FLAGS</td></tr><tr><td>Debug</td><td>CMAKE_C_FLAGS_DEBUG</td><td>CMAKE_CXX_FLAGS_DEBUG</td></tr><tr><td>Release</td><td>CMAKE_C_FLAGS_RELEASE</td><td>CMAKE_CXX_FLAGS_RELEASE</td></tr><tr><td>RelWithDebInfo</td><td>CMAKE_C_FLAGS_RELWITHDEBINFO</td><td>CMAKE_CXX_FLAGS_RELWITHDEBINFO</td></tr><tr><td>MinSizeRel</td><td>CMAKE_C_FLAGS_MINSIZEREL</td><td>CMAKE_CXX_FLAGS_MINSIZEREL</td></tr></tbody></table></div><p>â€‹    å¦‚æœå°†ä¼˜åŒ–ç¨‹åº¦è°ƒåˆ°æœ€é«˜éœ€è¦è®¾ç½®<code>-O3</code>ï¼Œæœ€ä½çš„æ˜¯<code>-O0</code>å³ä¸åšä¼˜åŒ–ï¼Œæ·»åŠ è°ƒè¯•ä¿¡æ¯çš„å‚æ•°æ˜¯<code>-g  -ggdb</code>ï¼Œå¦‚æœä¸æ·»åŠ è¿™ä¸ªå‚æ•°ï¼Œè°ƒè¯•ä¿¡æ¯å°±ä¸ä¼šè¢«åŒ…å«åœ¨ç”Ÿæˆçš„äºŒè¿›åˆ¶ä¸­ã€‚</p><p>ï¼ˆ1ï¼‰<code>-O</code>ï¼Œ<code>-O1</code> è¿™ä¸¤ä¸ªå‘½ä»¤çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œç›®çš„éƒ½æ˜¯åœ¨ä¸å½±å“ç¼–è¯‘é€Ÿåº¦çš„å‰æä¸‹ï¼Œå°½é‡é‡‡ç”¨ä¸€äº›ä¼˜åŒ–ç®—æ³•é™ä½ä»£ç å¤§å°å’Œå¯æ‰§è¡Œä»£ç çš„è¿è¡Œé€Ÿåº¦ã€‚ </p><p>ï¼ˆ2ï¼‰<code>-O2</code> è¯¥ä¼˜åŒ–é€‰é¡¹ä¼šç‰ºç‰²éƒ¨åˆ†ç¼–è¯‘é€Ÿåº¦ï¼Œé™¤äº†æ‰§è¡Œ<code>-O1</code>æ‰€æ‰§è¡Œçš„æ‰€æœ‰ä¼˜åŒ–ä¹‹å¤–ï¼Œè¿˜ä¼šé‡‡ç”¨å‡ ä¹æ‰€æœ‰çš„ç›®æ ‡é…ç½®æ”¯æŒçš„ä¼˜åŒ–ç®—æ³•ï¼Œç”¨ä»¥æé«˜ç›®æ ‡ä»£ç çš„è¿è¡Œé€Ÿåº¦ã€‚ </p><p>ï¼ˆ3ï¼‰ <code>-O3</code> è¯¥é€‰é¡¹é™¤äº†æ‰§è¡Œ<code>-O2</code>æ‰€æœ‰çš„ä¼˜åŒ–é€‰é¡¹ä¹‹å¤–ï¼Œä¸€èˆ¬éƒ½æ˜¯é‡‡å–å¾ˆå¤šå‘é‡åŒ–ç®—æ³•ï¼Œæé«˜ä»£ç çš„å¹¶è¡Œæ‰§è¡Œç¨‹åº¦ï¼Œåˆ©ç”¨ç°ä»£CPUä¸­çš„æµæ°´çº¿ï¼ŒCacheç­‰ã€‚è¿™ä¸ªé€‰é¡¹ä¼šæé«˜æ‰§è¡Œä»£ç çš„å¤§å°ï¼Œå½“ç„¶ä¼šé™ä½ç›®æ ‡ä»£ç çš„æ‰§è¡Œæ—¶é—´ã€‚</p><p>ï¼ˆ4ï¼‰<code>-Os</code> è¿™ä¸ªä¼˜åŒ–æ ‡è¯†å’Œ<code>-O3</code>æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œå½“ç„¶ä¸¤è€…çš„ç›®æ ‡ä¸ä¸€æ ·ï¼Œ<code>-O3</code>çš„ç›®æ ‡æ˜¯å®æ„¿å¢åŠ ç›®æ ‡ä»£ç çš„å¤§å°ï¼Œä¹Ÿè¦æ‹¼å‘½çš„æé«˜è¿è¡Œé€Ÿåº¦ï¼Œä½†æ˜¯è¿™ä¸ªé€‰é¡¹æ˜¯åœ¨<code>-O2</code>çš„åŸºç¡€ä¹‹ä¸Šï¼Œå°½é‡çš„é™ä½ç›®æ ‡ä»£ç çš„å¤§å°ï¼Œè¿™å¯¹äºå­˜å‚¨å®¹é‡å¾ˆå°çš„è®¾å¤‡æ¥è¯´éå¸¸é‡è¦ã€‚ä¸ºäº†é™ä½ç›®æ ‡ä»£ç å¤§å°ï¼Œä¼šç¦ç”¨ä¸‹åˆ—ä¼˜åŒ–é€‰é¡¹ï¼Œä¸€èˆ¬å°±æ˜¯å‹ç¼©å†…å­˜ä¸­çš„å¯¹é½ç©ºç™½(alignment padding)</p><p>ï¼ˆ5ï¼‰<code>-Ofast</code> è¯¥é€‰é¡¹å°†ä¸ä¼šä¸¥æ ¼éµå¾ªè¯­è¨€æ ‡å‡†ï¼Œé™¤äº†å¯ç”¨æ‰€æœ‰çš„<code>-O3</code>ä¼˜åŒ–é€‰é¡¹ä¹‹å¤–ï¼Œä¹Ÿä¼šé’ˆå¯¹æŸäº›è¯­è¨€å¯ç”¨éƒ¨åˆ†ä¼˜åŒ–ã€‚å¦‚ï¼š<code>-ffast-math</code> .</p><p>ï¼ˆ6ï¼‰<code>-Og</code>: è¯¥æ ‡è¯†ä¼šç²¾å¿ƒæŒ‘é€‰éƒ¨åˆ†ä¸<code>-g</code>é€‰é¡¹ä¸å†²çªçš„ä¼˜åŒ–é€‰é¡¹ï¼Œå½“ç„¶å°±èƒ½æä¾›åˆç†çš„ä¼˜åŒ–æ°´å¹³ï¼ŒåŒæ—¶äº§ç”Ÿè¾ƒå¥½çš„å¯è°ƒè¯•ä¿¡æ¯å’Œå¯¹è¯­è¨€æ ‡å‡†çš„éµå¾ªç¨‹åº¦ã€‚</p><h5 id="6-è®¾å®šä½¿ç”¨-C-11"><a href="#6-è®¾å®šä½¿ç”¨-C-11" class="headerlink" title="6. è®¾å®šä½¿ç”¨ C++11"></a>6. è®¾å®šä½¿ç”¨ C++11</h5><pre><code class="hljs cmake"><span class="hljs-comment"># Use C++11</span><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">11</span>)<span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD_REQUIRED <span class="hljs-keyword">ON</span>)<span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;C++11 support has been enabled by default.&quot;</span>)</code></pre><h5 id="7-è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹-ä»¥-OpenMP-å’Œ-SSEä¸ºä¾‹"><a href="#7-è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹-ä»¥-OpenMP-å’Œ-SSEä¸ºä¾‹" class="headerlink" title="7. è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹(ä»¥ OpenMP å’Œ SSEä¸ºä¾‹)"></a>7. è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹(ä»¥ OpenMP å’Œ SSEä¸ºä¾‹)</h5><pre><code class="hljs cmake"><span class="hljs-comment"># Use OpenMP</span><span class="hljs-keyword">option</span>(USE_OPENMP      <span class="hljs-string">&quot;Set to ON to build use openmp&quot;</span>  <span class="hljs-keyword">ON</span>)<span class="hljs-keyword">if</span> (USE_OPENMP)    <span class="hljs-keyword">find_package</span>(OpenMP QUIET)    <span class="hljs-keyword">if</span> (OPENMP_FOUND)        <span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;Use OpenMP&quot;</span>)        <span class="hljs-keyword">add_definitions</span>(-DUSE_OPENMP)        <span class="hljs-keyword">set</span>(CMAKE_C_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_C_FLAGS&#125; $&#123;OpenMP_C_FLAGS&#125;&quot;</span>)        <span class="hljs-keyword">set</span>(CMAKE_CXX_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; $&#123;OpenMP_CXX_FLAGS&#125;&quot;</span>)        <span class="hljs-keyword">set</span>(CMAKE_EXE_LINKER_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_EXE_LINKER_FLAGS&#125; $&#123;OpenMP_EXE_LINKER_FLAGS&#125;&quot;</span>)    <span class="hljs-keyword">endif</span>()<span class="hljs-keyword">endif</span>()<span class="hljs-comment"># Use SSE</span><span class="hljs-keyword">option</span>(USE_SSE         <span class="hljs-string">&quot;Set to ON to build use SSE&quot;</span>  <span class="hljs-keyword">ON</span>)<span class="hljs-keyword">if</span> (USE_SSE)    <span class="hljs-keyword">add_definitions</span>(-DUSE_SSE)    <span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;Use SSE&quot;</span>)    <span class="hljs-keyword">set</span>(CMAKE_CXX_FLAGS <span class="hljs-string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; -msse4.1&quot;</span>)<span class="hljs-keyword">endif</span>()</code></pre><h5 id="8-æ·»åŠ ç‰ˆæœ¬å·"><a href="#8-æ·»åŠ ç‰ˆæœ¬å·" class="headerlink" title="8. æ·»åŠ ç‰ˆæœ¬å·"></a>8. æ·»åŠ ç‰ˆæœ¬å·</h5><pre><code class="hljs cmake"><span class="hljs-comment"># Version (DEMO is Project Name)</span><span class="hljs-keyword">set</span> (DEMO_VERSION_MAJOR <span class="hljs-number">0</span>)<span class="hljs-keyword">set</span> (DEMO_VERSION_MINOR <span class="hljs-number">1</span>)<span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;PROJECT VERSION IS $&#123;DEMO_VERSION_MAJOR&#125;.$&#123;DEMO_VERSION_MINOR&#125;&quot;</span>)</code></pre><h5 id="9-è®¾ç½®å­æ–‡ä»¶å¤¹"><a href="#9-è®¾ç½®å­æ–‡ä»¶å¤¹" class="headerlink" title="9. è®¾ç½®å­æ–‡ä»¶å¤¹"></a>9. è®¾ç½®å­æ–‡ä»¶å¤¹</h5><p>åœ¨ä¸»é¡¹ç›®çš„ <code>CMakeLists.txt</code> ä¸­, å¯ä»¥ä½¿ç”¨ <code>add_subdirectory</code> æ¥æ·»åŠ  å­æ–‡ä»¶å¤¹, ç„¶ååœ¨å­æ–‡ä»¶å¤¹ä¸­ä¹Ÿè¦æœ‰ä¸€ä¸ª <code>CMakeLists.txt</code> æ–‡ä»¶.</p><pre><code class="hljs cmake"><span class="hljs-keyword">add_subdirectory</span>(benchmark)<span class="hljs-keyword">add_subdirectory</span>(src)<span class="hljs-keyword">add_subdirectory</span>(tools)</code></pre><p>é¡¹ç›®çš„åŸºæœ¬ç›®å½•ä¸º:</p><pre><code class="hljs cmake">.â”œâ”€â”€ srcâ”‚Â Â  â”œâ”€â”€ CMakeLists.txtâ”‚Â Â  â””â”€â”€ xxx.cppâ”œâ”€â”€ toolsâ”‚Â Â  â”œâ”€â”€ CMakeLists.txtâ”‚Â Â  â””â”€â”€ xxx.cppâ”œâ”€â”€ benchmarkâ”‚Â Â  â”œâ”€â”€ CMakeLists.txtâ”‚Â Â  â””â”€â”€ xxx.cppâ”œâ”€â”€ main.cppâ””â”€â”€ CMakeLists.txt</code></pre><h5 id="10-æµ‹è¯•"><a href="#10-æµ‹è¯•" class="headerlink" title="10. æµ‹è¯•"></a>10. æµ‹è¯•</h5><pre><code class="hljs cmake"><span class="hljs-keyword">enable_testing</span>()<span class="hljs-keyword">add_test</span> (test_5_2 Demo <span class="hljs-number">5</span> <span class="hljs-number">2</span>)<span class="hljs-keyword">set_tests_properties</span> (test_5_2 PROPERTIES PASS_REGULAR_EXPRESSION <span class="hljs-string">&quot;is 25&quot;</span>)<span class="hljs-keyword">add_test</span> (test_2_10 Demo <span class="hljs-number">2</span> <span class="hljs-number">10</span>)<span class="hljs-keyword">set_tests_properties</span> (test_2_10 PROPERTIES PASS_REGULAR_EXPRESSION <span class="hljs-string">&quot;is 1024&quot;</span>)</code></pre><p>set_tests_properties ä¸­çš„ <code>PASS_REGULAR_EXPRESSION</code> ç”¨æ¥æµ‹è¯•è¾“å‡ºæ˜¯å¦åŒ…å«åé¢è·Ÿç€çš„å­—ç¬¦ä¸²ã€‚</p><h5 id="11-è®¾ç½®å®‰è£…ä¸ä¸ç”Ÿæˆå®‰è£…åŒ…"><a href="#11-è®¾ç½®å®‰è£…ä¸ä¸ç”Ÿæˆå®‰è£…åŒ…" class="headerlink" title="11.è®¾ç½®å®‰è£…ä¸ä¸ç”Ÿæˆå®‰è£…åŒ…"></a>11.è®¾ç½®å®‰è£…ä¸ä¸ç”Ÿæˆå®‰è£…åŒ…</h5><p>ç”Ÿæˆçš„ Demo æ–‡ä»¶å°†ä¼šè¢«å¤åˆ¶åˆ° <code>/usr/local/bin</code> ä¸­ï¼Œè€Œ demo.h å’Œåˆ™ä¼šè¢«å¤åˆ¶åˆ° <code>/usr/local/include</code> ä¸­ã€‚é¡ºå¸¦ä¸€æçš„æ˜¯ï¼Œè¿™é‡Œçš„ <code>/usr/local/</code> æ˜¯é»˜è®¤å®‰è£…åˆ°çš„æ ¹ç›®å½•ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>CMAKE_INSTALL_PREFIX</code> å˜é‡çš„å€¼æ¥æŒ‡å®šè¿™äº›æ–‡ä»¶åº”è¯¥æ‹·è´åˆ°å“ªä¸ªæ ¹ç›®å½•ã€‚</p><pre><code class="hljs cmake"><span class="hljs-keyword">install</span> (TARGETS Demo DESTINATION bin) <span class="hljs-keyword">install</span> (FILES demo.h DESTINATION <span class="hljs-keyword">include</span>)</code></pre><h5 id="12-æŒ‡å®šè¾“å‡ºç›®å½•"><a href="#12-æŒ‡å®šè¾“å‡ºç›®å½•" class="headerlink" title="12. æŒ‡å®šè¾“å‡ºç›®å½•"></a>12. æŒ‡å®šè¾“å‡ºç›®å½•</h5><pre><code class="hljs cmake"><span class="hljs-keyword">SET</span>(EXECUTABLE_OUTPUT_PATH <span class="hljs-variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/bin)       <span class="hljs-comment"># è®¾ç½®å¯æ‰§è¡Œæ–‡ä»¶çš„è¾“å‡ºç›®å½•</span><span class="hljs-keyword">SET</span>(LIBRARY_OUTPUT_PATH <span class="hljs-variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/lib)           <span class="hljs-comment"># è®¾ç½®åº“æ–‡ä»¶çš„è¾“å‡ºç›®å½•</span></code></pre><h5 id="13-ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶-ä½†æ˜¯ä¸å®‰è£…-ä»¥opencvä¸ºä¾‹"><a href="#13-ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶-ä½†æ˜¯ä¸å®‰è£…-ä»¥opencvä¸ºä¾‹" class="headerlink" title="13.  ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶,  ä½†æ˜¯ä¸å®‰è£…(ä»¥opencvä¸ºä¾‹)"></a>13.  ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶,  ä½†æ˜¯ä¸å®‰è£…(ä»¥opencvä¸ºä¾‹)</h5><p>å°†æ‰€éœ€çš„å¤´æ–‡ä»¶æ”¾åœ¨  <code>include</code>  æ–‡ä»¶å¤¹ä¸­, å°†éœ€è¦çš„ å…±äº«åº“ <code>*.so</code> æ”¾åœ¨ <code>lib</code> æ–‡ä»¶å¤¹ä¸­.</p><pre><code class="hljs cmake"><span class="hljs-keyword">include_directories</span>(<span class="hljs-keyword">include</span>)<span class="hljs-keyword">set</span>(opencv_lib   <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib/libopencv_highgui.so.<span class="hljs-number">3.3</span>   <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib/libopencv_videoio.so.<span class="hljs-number">3.3</span>   <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib/libopencv_imgcodecs.so.<span class="hljs-number">3.3</span>   <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib/libopencv_imgproc.so.<span class="hljs-number">3.3</span>   <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib/libopencv_core.so.<span class="hljs-number">3.3</span>)<span class="hljs-keyword">target_link_libraries</span>(demo <span class="hljs-variable">$&#123;opencv_lib&#125;</span>)</code></pre><h3 id="ä¸‰-Cmakeå¸¸è§é—®é¢˜"><a href="#ä¸‰-Cmakeå¸¸è§é—®é¢˜" class="headerlink" title="ä¸‰. Cmakeå¸¸è§é—®é¢˜"></a>ä¸‰. Cmakeå¸¸è§é—®é¢˜</h3><h5 id="1-Question-make-Nothing-to-be-done-for-all-Solution"><a href="#1-Question-make-Nothing-to-be-done-for-all-Solution" class="headerlink" title="1. Question : make: Nothing to be done for `all` Solution"></a>1. <strong>Question</strong> : <strong>make: Nothing to be done for `all` Solution</strong></h5><p>è¿™å¥æç¤ºæ˜¯è¯´æ˜ä½ å·²ç»ç¼–è¯‘å¥½äº†ï¼Œè€Œä¸”æ²¡æœ‰å¯¹ä»£ç è¿›è¡Œä»»ä½•æ”¹åŠ¨ã€‚è‹¥æƒ³é‡æ–°ç¼–è¯‘ï¼Œå¯ä»¥å…ˆåˆ é™¤ä»¥å‰ç¼–è¯‘äº§ç”Ÿçš„ç›®æ ‡æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ make cleanï¼Œç„¶åå†ä½¿ç”¨ makeã€‚</p><h5 id="2-Question-gcc-make-cmake-çš„è”ç³»ä¸åŒºåˆ«"><a href="#2-Question-gcc-make-cmake-çš„è”ç³»ä¸åŒºåˆ«" class="headerlink" title="2. Question: gcc/make/cmake çš„è”ç³»ä¸åŒºåˆ«"></a>2. Question: gcc/make/cmake çš„è”ç³»ä¸åŒºåˆ«</h5><p>â€‹      gccæ˜¯GNU Compiler Collectionï¼ˆå°±æ˜¯GNUç¼–è¯‘å™¨å¥—ä»¶ï¼‰ï¼Œä¹Ÿå¯ä»¥ç®€å•è®¤ä¸ºæ˜¯ç¼–è¯‘å™¨ï¼Œå®ƒå¯ä»¥ç¼–è¯‘å¾ˆå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆæ‹¬Cã€C++ã€Objective-Cã€Fortranã€Javaç­‰ç­‰ï¼‰ã€‚<strong>å½“ä½ çš„ç¨‹åºåªæœ‰ä¸€ä¸ªæºæ–‡ä»¶æ—¶ï¼Œç›´æ¥å°±å¯ä»¥ç”¨gccå‘½ä»¤ç¼–è¯‘å®ƒ</strong>ã€‚ä½†æ˜¯å½“ä½ çš„ç¨‹åºåŒ…å«å¾ˆå¤šä¸ªæºæ–‡ä»¶æ—¶ï¼Œç”¨gccå‘½ä»¤é€ä¸ªå»ç¼–è¯‘æ—¶ï¼Œä½ å°±å¾ˆå®¹æ˜“æ··ä¹±è€Œä¸”å·¥ä½œé‡å¤§ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨make å·¥å…·ï¼Œ<strong>makeå·¥å…·å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ™ºèƒ½çš„æ‰¹å¤„ç†å·¥å…·ï¼Œå®ƒæœ¬èº«å¹¶æ²¡æœ‰ç¼–è¯‘å’Œé“¾æ¥çš„åŠŸèƒ½ï¼Œè€Œæ˜¯ç”¨ç±»ä¼¼äºæ‰¹å¤„ç†çš„æ–¹å¼â€”â€” é€šè¿‡è°ƒç”¨makefileæ–‡ä»¶ä¸­ç”¨æˆ·æŒ‡å®šçš„å‘½ä»¤æ¥è¿›è¡Œç¼–è¯‘å’Œé“¾æ¥çš„</strong>ã€‚ç®€å•çš„è¯´å°±åƒä¸€é¦–æ­Œçš„ä¹è°±ï¼Œmakeå·¥å…·å°±åƒæŒ‡æŒ¥å®¶ï¼ŒæŒ‡æŒ¥å®¶æ ¹æ®ä¹è°±æŒ‡æŒ¥æ•´ä¸ªä¹å›¢æ€ä¹ˆæ ·æ¼”å¥ï¼Œmakeå·¥å…·å°±æ ¹æ®makefileä¸­çš„å‘½ä»¤è¿›è¡Œç¼–è¯‘å’Œé“¾æ¥çš„ã€‚makefileå‘½ä»¤ä¸­å°±åŒ…å«äº†è°ƒç”¨gccï¼ˆä¹Ÿå¯ä»¥æ˜¯åˆ«çš„ç¼–è¯‘å™¨ï¼‰å»ç¼–è¯‘æŸä¸ªæºæ–‡ä»¶çš„å‘½ä»¤ã€‚</p><p>â€‹        makefileåœ¨ä¸€äº›ç®€å•çš„å·¥ç¨‹å®Œå…¨å¯ä»¥äººå·¥æ‰‹å†™ï¼Œä½†æ˜¯å½“å·¥ç¨‹éå¸¸å¤§çš„æ—¶å€™ï¼Œæ‰‹å†™makefileä¹Ÿæ˜¯éå¸¸éº»çƒ¦çš„ï¼Œå¦‚æœæ¢äº†ä¸ªå¹³å°makefileåˆè¦é‡æ–°ä¿®æ”¹ã€‚è¿™æ—¶å€™å°±å‡ºç°äº†Cmakeè¿™ä¸ªå·¥å…·ï¼Œ<strong>cmakeå°±å¯ä»¥æ›´åŠ ç®€å•çš„ç”Ÿæˆmakefileæ–‡ä»¶ç»™ä¸Šé¢é‚£ä¸ªmakeç”¨</strong>ã€‚å½“ç„¶cmakeè¿˜æœ‰å…¶ä»–åŠŸèƒ½ï¼Œå°±æ˜¯<strong>å¯ä»¥è·¨å¹³å°</strong>ç”Ÿæˆå¯¹åº”å¹³å°èƒ½ç”¨çš„makefileï¼Œä½ ä¸ç”¨å†è‡ªå·±å»ä¿®æ”¹äº†ã€‚å¯æ˜¯cmakeæ ¹æ®ä»€ä¹ˆç”Ÿæˆmakefileå‘¢ï¼Ÿå®ƒåˆè¦<strong>æ ¹æ®ä¸€ä¸ªå«CMakeLists.txtæ–‡ä»¶ï¼ˆå­¦åï¼šç»„æ€æ¡£ï¼‰å»ç”Ÿæˆmakefile</strong>ã€‚åˆ°æœ€åCMakeLists.txtæ–‡ä»¶è°å†™å•Šï¼Ÿäº²ï¼Œæ˜¯ä½ è‡ªå·±æ‰‹å†™çš„ã€‚ä¸‰è€…çš„å…³ç³»å¯ä»¥å¦‚ä¸‹é¢çš„ç®€å›¾æ‰€ç¤ºï¼š</p><p><img src="/2018/08/17/cmake%E4%BD%BF%E7%94%A8/cmake.png" alt="p4107"></p><h5 id="3-å¸¸è§çš„è·¯å¾„"><a href="#3-å¸¸è§çš„è·¯å¾„" class="headerlink" title="3. å¸¸è§çš„è·¯å¾„"></a>3. å¸¸è§çš„è·¯å¾„</h5><p><strong>PROJECT_SOURCE_DIR:</strong> å«æœ‰ <code>project()</code> æŒ‡ä»¤çš„<code>CMakeLists.txt</code> æ–‡ä»¶å¤¹ã€‚</p><p><strong>CMAKE_CURRENT_SOURCE_DIR:</strong> ç›®å‰æ­£åœ¨å¤„ç†çš„CMakeLists.txt æ‰€åœ¨ä½ç½®ã€‚</p><h5 id="4-æŒ‡å®šè¾“å‡ºè·¯å¾„"><a href="#4-æŒ‡å®šè¾“å‡ºè·¯å¾„" class="headerlink" title="4. æŒ‡å®šè¾“å‡ºè·¯å¾„"></a>4. æŒ‡å®šè¾“å‡ºè·¯å¾„</h5><pre><code class="hljs cmake"><span class="hljs-keyword">SET</span>(EXECUTABLE_OUTPUT_PATH <span class="hljs-variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/../bin)       <span class="hljs-comment">#è®¾ç½®å¯æ‰§è¡Œæ–‡ä»¶çš„è¾“å‡ºç›®å½•</span><span class="hljs-keyword">SET</span>(LIBRARY_OUTPUT_PATH <span class="hljs-variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/../lib)           <span class="hljs-comment">#è®¾ç½®åº“æ–‡ä»¶çš„è¾“å‡ºç›®å½•</span></code></pre><h3 id="å››-å‚è€ƒé“¾æ¥"><a href="#å››-å‚è€ƒé“¾æ¥" class="headerlink" title="å››. å‚è€ƒé“¾æ¥"></a>å››. å‚è€ƒé“¾æ¥</h3><p>[0] <a href="https://cmake.org">CMakeå®˜æ–¹ç½‘ç«™</a></p><p>[1] <a href="https://www.hahack.com/codes/cmake/">CMake å…¥é—¨å®æˆ˜</a></p><p>[2]  <a href="https://cmake.org/cmake-tutorial/">CMake-tutorial</a></p><p>[3] ã€ŠCMake Praticeã€‹</p><p>[4]  <a href="https://cmake.org/mailing-lists/">cmake-maillist</a></p><p>[5]  <a href="https://github.com/onqtam/awesome-cmake">awesome-camke</a></p><p>[6] ã€ŠMastering CMakeã€‹</p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>gccå’Œg++ä½¿ç”¨</title>
    <link href="/2018/08/17/gcc%E5%92%8Cg++%E4%BD%BF%E7%94%A8/"/>
    <url>/2018/08/17/gcc%E5%92%8Cg++%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>gcc/g++ å’Œ makefile çš„åŸºæœ¬ç”¨æ³•</p><a id="more"></a><h4 id="gcc-g-æµç¨‹"><a href="#gcc-g-æµç¨‹" class="headerlink" title="gcc/g++æµç¨‹"></a>gcc/g++æµç¨‹</h4><p><strong>é¢„å¤„ç†</strong>ã€€ï¼&gt;  <strong>ç¼–è¯‘</strong>ã€€ï¼&gt;ã€€<strong>æ±‡ç¼–</strong>ã€€ï¼&gt;  <strong>é“¾æ¥</strong></p><h4 id="å¸¸è§é€‰é¡¹"><a href="#å¸¸è§é€‰é¡¹" class="headerlink" title="å¸¸è§é€‰é¡¹"></a>å¸¸è§é€‰é¡¹</h4><h6 id="ç›®å½•é€‰é¡¹"><a href="#ç›®å½•é€‰é¡¹" class="headerlink" title="ç›®å½•é€‰é¡¹"></a>ç›®å½•é€‰é¡¹</h6><p><strong>-L[dir]</strong>     ã€€æŒ‡å®šæœç´¢ç›®å½•</p><p>é»˜è®¤ä¼šåœ¨<code>/lib</code>å’Œ<code>/usr/lib</code>å’Œ<code>/usr/local/lib</code>ä¸‰ä¸ªç›®å½•è¿›è¡Œæœç´¢</p><p>ğŸ‘‰  åŠ¨æ€æ·»åŠ æ–¹æ³•ã€€<code>pkg-config [pkg_name] â€”libs</code></p><p><strong>-l[libname]</strong>      æŒ‡å®šç¨‹åºè¦é“¾æ¥çš„åº“ï¼Œ-lå‚æ•°ç´§æ¥ç€å°±æ˜¯åº“å</p><p>ä¾‹å¦‚ï¼š åº“åæ˜¯<code>m</code>ï¼Œã€€åº“æ–‡ä»¶åã€€<code>libm.so</code>ã€€ é“¾æ¥ã€€<code>-lm</code></p><h6 id="å¤´æ–‡ä»¶è®¾ç½®"><a href="#å¤´æ–‡ä»¶è®¾ç½®" class="headerlink" title="å¤´æ–‡ä»¶è®¾ç½®"></a>å¤´æ–‡ä»¶è®¾ç½®</h6><p><strong>-I</strong>            æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•</p><p><code>/usr/include</code>ç›®å½•ä¸€èˆ¬æ˜¯ä¸ç”¨æŒ‡å®šçš„ï¼ŒgccçŸ¥é“å»é‚£é‡Œæ‰¾ï¼Œä½†æ˜¯å¦‚æœå¤´æ–‡ä»¶ä¸åœ¨ <code>/usr/icnclude</code> é‡Œæˆ‘ä»¬å°±è¦ç”¨-Iå‚æ•°æŒ‡å®šäº†ï¼Œæ¯”å¦‚å¤´æ–‡ä»¶æ”¾åœ¨ <code>/myinclude</code>ç›®å½•é‡Œï¼Œé‚£ç¼–è¯‘å‘½ä»¤è¡Œå°±è¦åŠ ä¸Š    <code>-I /myinclude</code></p><p><strong>â€”include [lib]</strong>      ç”¨æ¥åŒ…å«å¤´æ–‡ä»¶</p><p>ä¸€èˆ¬æƒ…å†µä¸‹åŒ…å«å¤´æ–‡ä»¶éƒ½åœ¨æºç é‡Œç”¨<code>ï¼ƒinclude xxxxxx</code>å®ç°ï¼Œ <code>--include</code>  å‚æ•°å¾ˆå°‘ç”¨ã€‚</p><h6 id="è¿æ¥å™¨é€‰é¡¹"><a href="#è¿æ¥å™¨é€‰é¡¹" class="headerlink" title="è¿æ¥å™¨é€‰é¡¹"></a>è¿æ¥å™¨é€‰é¡¹</h6><p><strong>-share</strong>        å…±äº«åº“:å°½é‡ä½¿ç”¨åŠ¨æ€åº“</p><p><strong>-static</strong> ã€€    é™æ€åº“: ç¦æ­¢ä½¿ç”¨åŠ¨æ€åº“</p><h6 id="è­¦å‘Šé€‰é¡¹"><a href="#è­¦å‘Šé€‰é¡¹" class="headerlink" title="è­¦å‘Šé€‰é¡¹"></a>è­¦å‘Šé€‰é¡¹</h6><p><strong>-w</strong>            ç¦æ­¢æ‰€æœ‰è­¦å‘Šä¿¡æ¯</p><p><strong>-Wall</strong>             å¼€å¯å¤§éƒ¨åˆ†è­¦å‘Šæç¤º</p><p><strong>-Werror</strong>        è§†è­¦å‘Šä¸ºé”™è¯¯</p><h6 id="æŒ‡å®šä¼˜åŒ–çº§åˆ«"><a href="#æŒ‡å®šä¼˜åŒ–çº§åˆ«" class="headerlink" title="æŒ‡å®šä¼˜åŒ–çº§åˆ«"></a>æŒ‡å®šä¼˜åŒ–çº§åˆ«</h6><p>åŒ…å«<code>-O1</code>/<code>-O2</code>  å’Œ<code>-O3</code>ç­‰çº§åˆ«ï¼Œæ¨èä½¿ç”¨<code>-O3</code>ã€€è¿›è¡Œä¼˜åŒ–</p><h6 id="ç”Ÿæˆä½ç½®æ— å…³ç›®æ ‡ç "><a href="#ç”Ÿæˆä½ç½®æ— å…³ç›®æ ‡ç " class="headerlink" title="ç”Ÿæˆä½ç½®æ— å…³ç›®æ ‡ç "></a>ç”Ÿæˆä½ç½®æ— å…³ç›®æ ‡ç </h6><p><strong>-fpic</strong>            é€‚ç”¨äºå…±äº«åº“</p><p><strong>-fPIC</strong>ã€€          é€‚ç”¨äºåŠ¨æ€é“¾æ¥åº“</p><h6 id="è¯­è¨€é€‰é¡¹"><a href="#è¯­è¨€é€‰é¡¹" class="headerlink" title="è¯­è¨€é€‰é¡¹"></a>è¯­è¨€é€‰é¡¹</h6><p><strong>-ansi</strong>         #ã€€æ”¯æŒç¬¦åˆï¼¡ï¼®ï¼³ï¼©æ ‡å‡†çš„ï¼£ç¨‹åº</p><p><strong>-std=c99</strong>      # c99æ ‡å‡†</p><p><strong>-std=C++11</strong>    #ã€€æ”¯æŒã€€c++11ã€€æ ‡å‡†  &lt;-</p><h6 id="å¸¸è§ç¯å¢ƒå˜é‡"><a href="#å¸¸è§ç¯å¢ƒå˜é‡" class="headerlink" title="å¸¸è§ç¯å¢ƒå˜é‡"></a>å¸¸è§ç¯å¢ƒå˜é‡</h6><p><strong>PKG_CONFIG_PATH</strong>ï¼šç”¨æ¥æŒ‡å®špkg-configç”¨åˆ°çš„pcæ–‡ä»¶çš„è·¯å¾„ï¼Œé»˜è®¤æ˜¯/usr/lib/pkgconfigï¼Œpcæ–‡ä»¶æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ‰©å±•åæ˜¯.pcï¼Œé‡Œé¢å®šä¹‰å¼€å‘åŒ…çš„å®‰è£…è·¯å¾„ï¼ŒLibså‚æ•°å’ŒCflagså‚æ•°ç­‰ç­‰ã€‚</p><p><strong>CC</strong>ï¼šç”¨æ¥æŒ‡å®šcç¼–è¯‘å™¨ã€‚</p><p><strong>CXX</strong>ï¼šç”¨æ¥æŒ‡å®šcxxç¼–è¯‘å™¨ã€‚</p><p><strong>LIBS</strong>ï¼šè·Ÿä¸Šé¢çš„â€”libsä½œç”¨å·®ä¸å¤šã€‚</p><p><strong>CFLAGS</strong>:è·Ÿä¸Šé¢çš„â€”cflagsä½œç”¨å·®ä¸å¤šã€‚</p><p><strong>CCï¼ŒCXXï¼ŒLIBSï¼ŒCFLAGS</strong> æ‰‹åŠ¨ç¼–è¯‘æ—¶ä¸€èˆ¬ç”¨ä¸ä¸Šï¼Œåœ¨åšconfigureæ—¶æœ‰æ—¶ç”¨åˆ°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨ç®¡ã€‚</p><p>ç¯å¢ƒå˜é‡è®¾å®šæ–¹æ³•ï¼š<strong>export  ENV_NAME=xxx</strong></p><h4 id="makefile-åŸºæœ¬æ ¼å¼"><a href="#makefile-åŸºæœ¬æ ¼å¼" class="headerlink" title="makefile åŸºæœ¬æ ¼å¼"></a>makefile åŸºæœ¬æ ¼å¼</h4><pre><code class="hljs cmake"><span class="hljs-comment"># æŒ‡å®šç¼–è¯‘å™¨</span><span class="hljs-comment"># è®¾ç½®ç¼–è¯‘é€‰é¡¹</span><span class="hljs-comment"># åº“ &amp; å¤´æ–‡ä»¶</span><span class="hljs-comment"># å˜é‡è®¾ç½®</span><span class="hljs-comment"># è¯­å¥ï¼š</span><span class="hljs-comment"># ç¼–è¯‘ç›®æ ‡ï¼šä¾èµ–æ–‡ä»¶</span><span class="hljs-comment">#     è¿è¡Œè„šæœ¬</span><span class="hljs-comment"># æ¸…ç†è„šæœ¬</span></code></pre><h4 id="makefile-æ¨¡æ¿"><a href="#makefile-æ¨¡æ¿" class="headerlink" title="makefile æ¨¡æ¿"></a>makefile æ¨¡æ¿</h4><pre><code class="hljs makefile">CC = g++ CFLAGS += -g -O3 -WallINC += -I. `pkg-config --cflags opencv`ã€€LIBS += `pkg-config --libs opencv`ã€€ã€€TARGET = main.binOBJS += main.o \        config.o <span class="hljs-section">all:<span class="hljs-variable">$(TARGET)</span></span><span class="hljs-variable">$(TARGET)</span>:<span class="hljs-variable">$(OBJS)</span>    <span class="hljs-variable">$(CC)</span> <span class="hljs-variable">$(INC)</span> <span class="hljs-variable">$(CFLAGS)</span> <span class="hljs-variable">$(OBJS)</span> -o <span class="hljs-variable">$(TARGET)</span> <span class="hljs-variable">$(LIBS)</span><span class="hljs-variable">$(OBJS)</span>:%.o:%.cpp    <span class="hljs-variable">$(CC)</span> <span class="hljs-variable">$(INC)</span> <span class="hljs-variable">$(CFLAGS)</span> -c <span class="hljs-variable">$&lt;</span> -o <span class="hljs-variable">$@</span><span class="hljs-meta"><span class="hljs-meta-keyword">.PHONY</span>:clean</span><span class="hljs-section">clean:ã€€</span>    rm -r *.o <span class="hljs-variable">$(TARGET)</span></code></pre><p>å‚è€ƒ:</p><p>&lt;è·Ÿæˆ‘ä¸€èµ·å†™ Makefile&gt; é™ˆçš“</p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LinuxåŸºç¡€çŸ¥è¯†</title>
    <link href="/2018/08/17/Linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <url>/2018/08/17/Linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<p>Linux ä¸€äº›æœ€æœ€æœ€åŸºæœ¬çš„å¸¸è¯†</p><a id="more"></a><h4 id="1-GNU-vs-BSD"><a href="#1-GNU-vs-BSD" class="headerlink" title="1. GNU vs BSD"></a>1. GNU vs BSD</h4><h5 id="å…¸å‹çš„ç±»-unix-æ“ä½œç³»ç»ŸåŒ…æ‹¬ä¸¤ä¸ªç‰ˆæœ¬ï¼š"><a href="#å…¸å‹çš„ç±»-unix-æ“ä½œç³»ç»ŸåŒ…æ‹¬ä¸¤ä¸ªç‰ˆæœ¬ï¼š" class="headerlink" title="å…¸å‹çš„ç±» unix æ“ä½œç³»ç»ŸåŒ…æ‹¬ä¸¤ä¸ªç‰ˆæœ¬ï¼š"></a>å…¸å‹çš„ç±» unix æ“ä½œç³»ç»ŸåŒ…æ‹¬ä¸¤ä¸ªç‰ˆæœ¬ï¼š</h5><ul><li>BSD ç‰ˆæœ¬ï¼ˆ BSDs &amp; Mac OSï¼‰</li><li>GNU ç‰ˆæœ¬ï¼ˆLinuxï¼‰</li></ul><h5 id="Linuxå†…æ ¸-vs-å‘è¡Œç‰ˆ"><a href="#Linuxå†…æ ¸-vs-å‘è¡Œç‰ˆ" class="headerlink" title="Linuxå†…æ ¸ vs å‘è¡Œç‰ˆ"></a>Linuxå†…æ ¸ vs å‘è¡Œç‰ˆ</h5><p>â€‹        linuxå†…æ ¸æ˜¯ä¸€ç§å¼€æ”¾æºç çš„æ“ä½œç³»ç»Ÿï¼Œæä¾›ç¡¬ä»¶æŠ½è±¡å±‚ã€ç¡¬ç›˜åŠæ–‡ä»¶ç³»ç»Ÿæ§åˆ¶åŠå¤šä»»åŠ¡åŠŸèƒ½çš„ç³»ç»Ÿæ ¸å¿ƒç¨‹åºã€‚<br>â€‹        linuxå‘è¡Œç‰ˆåŸºäºlinuxå†…æ ¸æºç ï¼Œå°†Linuxç³»ç»Ÿçš„å†…æ ¸ä¸å¤–å›´å®ç”¨ç¨‹åºã€è½¯ä»¶å’Œæ–‡æ¡£åŒ…è£…èµ·æ¥ï¼Œå¹¶æä¾›ä¸€äº›ç³»ç»Ÿå®‰è£…ç•Œé¢å’Œç³»ç»Ÿé…ç½®ã€è®¾å®šä¸ç®¡ç†å·¥å…·ï¼Œå°±æ„æˆäº†ä¸€ç§å‘è¡Œç‰ˆæœ¬(distribution)ã€‚</p><p>å„ç§å‘è¡Œç‰ˆå¯ä»¥ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç³»ç»Ÿï¼š</p><ul><li>ä»¥ RPM æ–¹å¼å®‰è£…è½¯ä»¶çš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬Red Hatï¼Œ Fedoraï¼Œ SuSE ç­‰ã€‚</li><li>ä»¥ Debian çš„ dpkgæ–¹å¼å®‰è£…çš„è½¯ä»¶çš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬ Debianï¼Œ Ubuntuï¼ŒB2D ç­‰ã€‚</li></ul><h4 id="2-æ–‡ä»¶çš„ç›®å½•"><a href="#2-æ–‡ä»¶çš„ç›®å½•" class="headerlink" title="2. æ–‡ä»¶çš„ç›®å½•"></a>2. æ–‡ä»¶çš„ç›®å½•</h4><pre><code class="hljs shell">/              æ ¹ç›®å½•â”œâ”€â”€ bin     å­˜æ”¾ç”¨æˆ·äºŒè¿›åˆ¶æ–‡ä»¶  # â”œâ”€â”€ boot    å­˜æ”¾å†…æ ¸å¼•å¯¼é…ç½®æ–‡ä»¶  #â”œâ”€â”€ dev     å­˜æ”¾è®¾å¤‡æ–‡ä»¶  # â”œâ”€â”€ etc     å­˜æ”¾ç³»ç»Ÿé…ç½®æ–‡ä»¶  # â”œâ”€â”€ home    ç”¨æˆ·ä¸»ç›®å½•  # â”œâ”€â”€ lib     åŠ¨æ€å…±äº«åº“â”œâ”€â”€ lost+found  æ–‡ä»¶ç³»ç»Ÿæ¢å¤æ—¶çš„æ¢å¤æ–‡ä»¶â”œâ”€â”€ media   å¯å¸è½½å­˜å‚¨ä»‹è´¨æŒ‚è½½ç‚¹â”œâ”€â”€ mnt     æ–‡ä»¶ç³»ç»Ÿä¸´æ—¶æŒ‚è½½ç‚¹  # â”œâ”€â”€ opt     é™„åŠ çš„åº”ç”¨ç¨‹åºåŒ…â”œâ”€â”€ proc    ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ç›®å½•ï¼Œæä¾›å†…æ ¸ä¸è¿›ç¨‹ä¿¡æ¯  # â”œâ”€â”€ root    root ç”¨æˆ·ä¸»ç›®å½•  #â”œâ”€â”€ sbin    å­˜æ”¾ç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶  # â”œâ”€â”€ srv     å­˜æ”¾æœåŠ¡ç›¸å…³æ•°æ®â”œâ”€â”€ sys     sys è™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹â”œâ”€â”€ tmp     å­˜æ”¾ä¸´æ—¶æ–‡ä»¶â”œâ”€â”€ usr     å­˜æ”¾ç”¨æˆ·åº”ç”¨ç¨‹åºâ””â”€â”€ var     å­˜æ”¾é‚®ä»¶ã€ç³»ç»Ÿæ—¥å¿—ç­‰å˜åŒ–æ–‡ä»¶   #</code></pre><h4 id="3-è½¯è¿æ¥å’Œç¡¬é“¾æ¥"><a href="#3-è½¯è¿æ¥å’Œç¡¬é“¾æ¥" class="headerlink" title="3. è½¯è¿æ¥å’Œç¡¬é“¾æ¥"></a>3. è½¯è¿æ¥å’Œç¡¬é“¾æ¥</h4><h5 id="ç¡¬é“¾æ¥"><a href="#ç¡¬é“¾æ¥" class="headerlink" title="ç¡¬é“¾æ¥"></a>ç¡¬é“¾æ¥</h5><p>ç¡¬é“¾æ¥å°±æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨äº†å¤šä¸ªåˆ«åï¼Œä»–ä»¬æœ‰å…±åŒçš„ inodeå’Œ data blockå—ã€‚ç¡¬é“¾æ¥å¯ç”±å‘½ä»¤ <code>ln</code> åˆ›å»ºç¡¬é“¾æ¥ï¼š</p><pre><code class="hljs ebnf"><span class="hljs-attribute">ln oldfile newfile</span></code></pre><ul><li>åªèƒ½å¯¹å·²å­˜åœ¨çš„æ–‡ä»¶è¿›è¡Œåˆ›å»ºï¼›ä¸èƒ½å¯¹ç›®å½•è¿›è¡Œåˆ›å»ºï¼Œåªå¯å¯¹æ–‡ä»¶åˆ›å»ºï¼›</li><li>åˆ é™¤ä¸€ä¸ªç¡¬é“¾æ¥æ–‡ä»¶å¹¶ä¸å½±å“å…¶ä»–æœ‰ç›¸åŒ inode å·çš„æ–‡ä»¶ã€‚</li></ul><h5 id="è½¯é“¾æ¥"><a href="#è½¯é“¾æ¥" class="headerlink" title="è½¯é“¾æ¥"></a>è½¯é“¾æ¥</h5><p>è½¯é“¾æ¥å°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œåªæ˜¯æ•°æ®å—å†…å®¹æ˜¯å¦ä¸€æ–‡ä»¶çš„è·¯å¾„åçš„æŒ‡å‘ã€‚è½¯é“¾æ¥æœ‰ç€è‡ªå·±çš„ inode å·ä»¥åŠç”¨æˆ·æ•°æ®å—ã€‚å¯ä»¥ä½¿ç”¨<code>ln -s</code> åˆ›å»ºè½¯é“¾æ¥ï¼š</p><pre><code class="hljs shell">ln -s oldfile newfile</code></pre><ul><li>è½¯é“¾æ¥æœ‰è‡ªå·±çš„æ–‡ä»¶å±æ€§åŠæƒé™ç­‰ï¼›</li><li>å¯å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºè½¯é“¾æ¥ï¼›è½¯é“¾æ¥å¯å¯¹æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºï¼›</li><li>åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼Œé“¾æ¥è®¡æ•° <strong>i_nlink</strong> ä¸ä¼šå¢åŠ ï¼›</li><li>åˆ é™¤è½¯é“¾æ¥å¹¶ä¸å½±å“è¢«æŒ‡å‘çš„æ–‡ä»¶ï¼Œä½†è‹¥è¢«æŒ‡å‘çš„åŸæ–‡ä»¶è¢«åˆ é™¤ï¼Œåˆ™ç›¸å…³è½¯è¿æ¥è¢«ç§°ä¸ºæ­»é“¾æ¥ï¼ˆå³ <strong>dangling link</strong>ï¼Œè‹¥è¢«æŒ‡å‘è·¯å¾„æ–‡ä»¶è¢«é‡æ–°åˆ›å»ºï¼Œæ­»é“¾æ¥å¯æ¢å¤ä¸ºæ­£å¸¸çš„è½¯é“¾æ¥ï¼‰ã€‚</li></ul><p><img src="/2018/08/17/Linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/hard_soft_link.png" alt="hard link vs soft link"></p><h4 id="4-ç¯å¢ƒå˜é‡"><a href="#4-ç¯å¢ƒå˜é‡" class="headerlink" title="4. ç¯å¢ƒå˜é‡"></a>4. ç¯å¢ƒå˜é‡</h4><p>æŸ¥çœ‹ç¯å¢ƒå˜é‡ï¼š<code>echo $PATH</code></p><p> å°†æŒ‡å®šè·¯å¾„åˆ°ç³»ç»Ÿè·¯å¾„(ä¸€æ¬¡æ€§)ï¼š <code>export PATH=$PATH:/path/to/dir</code>  </p><p>å°†æŒ‡å®šè·¯å¾„åˆ°ç³»ç»Ÿè·¯å¾„(é•¿æœŸ)ï¼š</p><pre><code class="hljs shell">vim ~/.bashrcexport PATH=$PATH:/path/to/dirsource ~/.bashrc</code></pre><h4 id="5-å¸¸è§çš„å¼€æºè®¸å¯è¯é€‰æ‹©"><a href="#5-å¸¸è§çš„å¼€æºè®¸å¯è¯é€‰æ‹©" class="headerlink" title="5. å¸¸è§çš„å¼€æºè®¸å¯è¯é€‰æ‹©"></a>5. å¸¸è§çš„å¼€æºè®¸å¯è¯é€‰æ‹©</h4><p><img src="/2018/08/17/Linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/license.png" alt="License"></p><p>[å‚è€ƒèµ„æ–™]</p><ol><li><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/">https://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå¸¸è§é—®é¢˜</title>
    <link href="/2018/08/17/Linux%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <url>/2018/08/17/Linux%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>ä¸»è¦ç”¨æ¥è®°å½•ä¸€äº› ubuntu(linux) ä½¿ç”¨è¿‡ç¨‹ä¸­ç¢°åˆ°çš„é—®é¢˜</p><a id="more"></a><h4 id="1-å¦‚ä½•æŒ‚è½½ç£ç›˜"><a href="#1-å¦‚ä½•æŒ‚è½½ç£ç›˜" class="headerlink" title="1. å¦‚ä½•æŒ‚è½½ç£ç›˜"></a>1. å¦‚ä½•æŒ‚è½½ç£ç›˜</h4><p>ï¼ˆï¼‘ï¼‰ æ‰¾åˆ°æœªåˆ†é…çš„ç£ç›˜ï¼Œã€€è¿™é‡Œæ˜¯ã€€<code>/dev/sdb</code></p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo fdisk -l  <span class="hljs-comment"># æ‰¾åˆ°æœªåˆ†é…çš„ç£ç›˜</span></span>Disk /dev/sdb: 1.8 TiB, 2000398934016 bytes, 3907029168 sectorsUnits: sectors of 1 * 512 = 512 bytesSector size (logical/physical): 512 bytes / 4096 bytesI/O size (minimum/optimal): 4096 bytes / 4096 bytesDisklabel type: dosDisk identifier: 0x76738fb3</code></pre><p>ï¼ˆï¼’ï¼‰å¯¹è¯¥ç£ç›˜ä½¿ç”¨fdisk å‘½ä»¤å»ºç«‹åˆ†åŒº:</p><pre><code class="hljs shell">sudo fdisk /dev/sdb<span class="hljs-meta">#</span><span class="bash"> m -&gt; n -&gt; ä¸€è·¯å›è½¦ã€€ï¼&gt; w(ä¿å­˜é€€å‡º)</span><span class="hljs-meta">$</span><span class="bash"> sudo fdisk -l <span class="hljs-comment">#ã€€æ­¤æ—¶å¯ä»¥å‘ç°è®¾å¤‡</span></span>Device     Boot Start        End    Sectors  Size Id Type/dev/sdb1        2048 3907029167 3907027120  1.8T 83 Linux</code></pre><p>ï¼ˆï¼“ï¼‰æ ¼å¼åŒ–åˆ†åŒºï¼Œã€€å¹¶å»ºç«‹æ–‡ä»¶ç³»ç»Ÿ</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo mkfs -t ext4 /dev/sdb1  <span class="hljs-comment"># -tã€€æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿæ ¼å¼</span></span></code></pre><p>ï¼ˆï¼”ï¼‰æŒ‚è½½ç£ç›˜åˆ°æŒ‡å®šä½ç½®</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> mount /dev/sdb1 /home/data/</span><span class="hljs-meta">#</span><span class="bash"> åŒºåˆ† sdbå’Œsdb1, sdbè¡¨ç¤ºç£ç›˜ï¼Œã€€sdb1åˆ™è¡¨ç¤ºè¯¥ç£ç›˜ä¸Šçš„åˆ†åŒº</span></code></pre><h4 id="2-å¦‚ä½•æŸ¥è¯¢ç«¯å£æ‰€è¿è¡Œçš„ç¨‹åº"><a href="#2-å¦‚ä½•æŸ¥è¯¢ç«¯å£æ‰€è¿è¡Œçš„ç¨‹åº" class="headerlink" title="2. å¦‚ä½•æŸ¥è¯¢ç«¯å£æ‰€è¿è¡Œçš„ç¨‹åº"></a>2. å¦‚ä½•æŸ¥è¯¢ç«¯å£æ‰€è¿è¡Œçš„ç¨‹åº</h4><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo netstat -antp | grep 7000</span>tcp6       0      0 :::7000                 :::*                    LISTEN      12464/frps      <span class="hljs-meta">$</span><span class="bash"> ps 12464</span>  PID TTY      STAT   TIME COMMAND12464 pts/0    Sl     0:00 ./frps<span class="hljs-meta">$</span><span class="bash"> lsof -i:7000   <span class="hljs-comment"># lsof:list open files -&gt; -i </span></span>COMMAND   PID   USER   FD   TYPE  DEVICE SIZE/OFF NODE NAMEfrps    12464 ubuntu    3u  IPv6 7542760      0t0  TCP *:afs3-fileserver (LISTEN)<span class="hljs-meta">$</span><span class="bash"> ps -fe | grep 12464</span>ubuntu   12464  6446  0 00:29 pts/0    00:00:00 ./frpsubuntu   12707  6446  0 00:32 pts/0    00:00:00 grep --color=auto 12464</code></pre><h4 id="3-gdm3ã€lightdm-å’Œ-kdm-çš„è®¤è¯†"><a href="#3-gdm3ã€lightdm-å’Œ-kdm-çš„è®¤è¯†" class="headerlink" title="3. gdm3ã€lightdm å’Œ kdm çš„è®¤è¯†"></a>3. gdm3ã€lightdm å’Œ kdm çš„è®¤è¯†</h4><p>Q:  å½“æˆ‘çš„ win10/mac ç”µè„‘æƒ³è¦æ§åˆ¶ ubuntu ç”µè„‘æ—¶ï¼Œä¸€åˆ‡æ“ä½œæ— è¯¯çš„æƒ…å†µä¸‹ï¼Œåœ¨ç‚¹å‡» â€œè¿œç¨‹ååŠ©â€ æŒ‰é’®æ—¶ï¼Œè¿›å»åè¿‡ä¸€ä¼šå„¿å°±ä¼šå‡ºç°â€œè¿æ¥å·²æ–­å¼€â€çš„æç¤ºã€‚<br>Sï¼š åœ¨æ‰“å¼€å‘æ—¥è‘µå®¢æˆ·ç«¯çš„æƒ…å†µä¸‹ï¼Œæ‰“å¼€å‘½ä»¤ ubuntu è¡Œçª—å£</p><pre><code class="hljs shell">sudo apt-get updatesudo apt-get upgradesudo install lightdm</code></pre><p>é‡å¯Ubuntuç³»ç»Ÿå³å¯è¿œç¨‹æˆåŠŸ</p><p>Rï¼š äº†è§£ä¸€ä¸‹gdm3ã€lightdmã€kdm</p><p>ç»´åŸºç™¾ç§‘ï¼šæ˜¾ç¤ºç®¡ç†å™¨å‘ç”¨æˆ·æ˜¾ç¤ºç™»å½•å±å¹•ã€‚ å½“ç”¨æˆ·æˆåŠŸè¾“å…¥ç”¨æˆ·åå’Œå¯†ç çš„æœ‰æ•ˆç»„åˆæ—¶ï¼Œä¼šè¯å¼€å§‹ã€‚</p><ul><li>gdm3 æ˜¯ gdmçš„ç»§æ‰¿è€…ï¼Œå®ƒæ˜¯GNOMEæ˜¾ç¤ºç®¡ç†å™¨ã€‚ æ›´æ–°çš„gdm3 ä½¿ç”¨äº†æœ€å°çš„gnome-shell ç‰ˆæœ¬ï¼Œå¹¶æä¾›äº†ä¸GNOME3ä¼šè¯ç›¸åŒçš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚</li><li>lightDMï¼Œå³ï¼šLight Display Managerï¼Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„ã€è½»é‡çš„Linuxæ¡Œé¢çš„æ¡Œé¢æ˜¾ç¤ºç®¡ç†å™¨</li><li>kdm æ˜¯ kde ç®¡ç†å™¨çš„æ˜¾ç¤ºã€‚ ä½†åœ¨ KDE5ä¸­ï¼Œå®ƒè¢«å¦å†³ä¸º SDDMï¼Œå®ƒæ›´é€‚åˆä½œä¸ºæ˜¾ç¤ºç®¡ç†å™¨ï¼Œå› æ­¤åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯åœ¨å±å¹•ã€‚</li></ul><p>ç®€å•ç†è§£ï¼Œè¿™ä¸‰ä¸ªåªæ˜¯ä¸åŒç‰ˆæœ¬çš„æ˜¾ç¤ºç®¡ç†å™¨è€Œå·²ï¼Œå½“ä½ çš„ ubuntu ç³»ç»Ÿå®‰è£…äº†å¤šä¸ªæ˜¾ç¤ºç®¡ç†å™¨æ—¶ï¼Œ(ä»¥ lightdm åˆ‡æ¢åˆ° gdm3 ä¸ºä¾‹ï¼‰å¯ä»¥ç”¨ <code>sudo dpkg-reconfigure gdm3</code> æ¥è¿›è¡Œåˆ‡æ¢ã€‚</p><h4 id="4-xrandr-ä½¿ç”¨"><a href="#4-xrandr-ä½¿ç”¨" class="headerlink" title="4. xrandr ä½¿ç”¨"></a>4. xrandr ä½¿ç”¨</h4><p>è£…äº†ä¸€ä¸ªä¾§å±ï¼Œ éœ€è¦ä½¿ç”¨ xrandr æ¥è¿›è¡Œç›¸å…³è®¾ç½®ï¼š</p><ul><li><p>xrandr : åˆ—å‡ºå¯ç”¨çš„æ˜¾ç¤ºè®¾å¤‡</p><pre><code class="hljs shell">zhaozhichao@zhaozhichao-MS-7B24:~/Desktop/sany/classification$ xrandrScreen 0: minimum 8 x 8, current 3000 x 1920, maximum 32767 x 32767DP-0 connected primary 1920x1080+1080+520 (normal left inverted right x axis y axis) 598mm x 336mm   1920x1080     60.00*+   1600x900      60.00     1280x1024     75.02    60.02     1152x864      75.00     1024x768      75.03    60.00     800x600       75.00    60.32     640x480       75.00    59.94  DP-1 disconnected (normal left inverted right x axis y axis)HDMI-0 disconnected (normal left inverted right x axis y axis)DP-2 disconnected (normal left inverted right x axis y axis)DP-3 disconnected (normal left inverted right x axis y axis)DP-4 connected 1080x1920+0+0 left (normal left inverted right x axis y axis) 598mm x 336mm   1920x1080     60.00*+   1600x900      60.00     1280x1024     75.02    60.02     1152x864      75.00     1024x768      75.03    60.00     800x600       75.00    60.32     640x480       75.00    59.94  DP-5 disconnected (normal left inverted right x axis y axis)USB-C-0 disconnected (normal left inverted right x axis y axis)</code></pre></li><li><p>è®¾ç½®åˆ†è¾¨ç‡</p><pre><code class="hljs shell">xrandr --output eDP1 --mode 1280x1024_60.00</code></pre></li><li><p>åŒå±è®¾ç½®</p><pre><code class="hljs shell">xrandr --output DP-4 --left-of  DP-0 --auto // DP-4 ä½œä¸º DP-0 çš„å·¦å±å¹•æ˜¾ç¤º                                              //  --left-of                                                // --right-of</code></pre></li><li><p>å±å¹•å…‹éš†</p><pre><code class="hljs shell">xrandr --output VGA-0 --same-as DVI-D-0 --auto</code></pre></li><li><p>è®¾ç½® å·¦æ—‹è½¬/å³æ—‹è½¬/æ­£å‘</p><pre><code class="hljs shell">xrandr --output DP-0 --rotate normal // leftã€rightã€normal</code></pre></li><li><p>è®¾ç½®ä¸»å±å¹•</p><pre><code class="hljs shell">xrandr --output HDMI2 --auto --primary</code></pre></li></ul><h4 id="5-Uç›˜-ç¡¬ç›˜-mount-æ•…éšœ"><a href="#5-Uç›˜-ç¡¬ç›˜-mount-æ•…éšœ" class="headerlink" title="5. Uç›˜/ç¡¬ç›˜ mount æ•…éšœ"></a>5. Uç›˜/ç¡¬ç›˜ mount æ•…éšœ</h4><pre><code class="hljs applescript">$ sudo mount /dev/sdb1 /mnt$MFTMirr <span class="hljs-keyword">does</span> <span class="hljs-keyword">not</span> match $MFT (<span class="hljs-built_in">record</span> <span class="hljs-number">0</span>).Failed <span class="hljs-keyword">to</span> mount &#x27;/dev/sdb1&#x27;: Input/output <span class="hljs-keyword">error</span>NTFS <span class="hljs-keyword">is</span> either inconsistent, <span class="hljs-keyword">or</span> there <span class="hljs-keyword">is</span> a hardware fault, <span class="hljs-keyword">or</span> <span class="hljs-keyword">it</span>&#x27;s aSoftRAID/FakeRAID hardware. In <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> case <span class="hljs-built_in">run</span> chkdsk /f <span class="hljs-keyword">on</span> Windows<span class="hljs-keyword">then</span> reboot <span class="hljs-keyword">into</span> Windows twice. The usage <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> /f parameter <span class="hljs-keyword">is</span> veryimportant! If <span class="hljs-keyword">the</span> device <span class="hljs-keyword">is</span> a SoftRAID/FakeRAID <span class="hljs-keyword">then</span> <span class="hljs-keyword">first</span> <span class="hljs-built_in">activate</span><span class="hljs-keyword">it</span> <span class="hljs-keyword">and</span> mount a different device under <span class="hljs-keyword">the</span> /dev/mapper/ directory, (e.g./dev/mapper/nvidia_eahaabcc1). Please see <span class="hljs-keyword">the</span> &#x27;dmraid&#x27; documentation<span class="hljs-keyword">for</span> more details.</code></pre><p>Sï¼š åˆ©ç”¨ ntfsprogs utility åŒ…é‡Œçš„å·¥å…· ntfsfix ä¿®ç†ä¸€ä¸‹ï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯æŠŠç±»ä¼¼é“¾æ¥å·ä»€ä¹ˆçš„ä¿®ç†å¥½ï¼š</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo ntfsfix /dev/sdb1</span>Mounting volume... FAILEDAttempting to correct errors...Processing $MFT and $MFTMirr...Reading $MFT... OKReading $MFTMirr... OKComparing $MFTMirr to $MFT... FAILEDCorrecting differences in $MFTMirr record 0...OKProcessing of $MFT and $MFTMirr completed successfully.Setting required flags on partition... OKGoing to empty the journal ($LogFile)... OKNTFS volume version is 3.1.NTFS partition /dev/sdb1 was processed successfully.</code></pre><h4 id="6-åŒºåˆ†-profile-å’Œ-bashrc"><a href="#6-åŒºåˆ†-profile-å’Œ-bashrc" class="headerlink" title="6. åŒºåˆ† profile å’Œ bashrc"></a>6. åŒºåˆ† profile å’Œ bashrc</h4><div class="table-container"><table><thead><tr><th></th><th>ç”Ÿæ•ˆæ—¶é—´</th><th>é’ˆå¯¹ç”¨æˆ·</th></tr></thead><tbody><tr><td>/etc/profile</td><td>é‡å¯ç”Ÿæ•ˆ</td><td>æ‰€æœ‰ç”¨æˆ·</td></tr><tr><td>/etc/bashrc</td><td>é‡æ–°æ‰“å¼€ä¸€ä¸ª bash ç”Ÿæ•ˆ</td><td>æ‰€æœ‰ç”¨æˆ·</td></tr><tr><td>~/.bash_profileæˆ– ~/.profile</td><td>é‡å¯ç”Ÿæ•ˆ</td><td>å½“å‰ç”¨æˆ·</td></tr><tr><td>~/.bashrc</td><td>é‡æ–°æ‰“å¼€ä¸€ä¸ª bash ç”Ÿæ•ˆ</td><td>å½“å‰ç”¨æˆ·</td></tr></tbody></table></div><h4 id="7-etc-ld-so-conf-ä¸ldconfig"><a href="#7-etc-ld-so-conf-ä¸ldconfig" class="headerlink" title="7. /etc/ld.so.conf ä¸ldconfig"></a>7. /etc/ld.so.conf ä¸ldconfig</h4><p><strong>ldconfigå‘½ä»¤</strong> çš„ç”¨é€”ä¸»è¦æ˜¯åœ¨<strong>é»˜è®¤æœå¯»ç›®å½•/libå’Œ/usr/libä»¥åŠåŠ¨æ€åº“é…ç½®æ–‡ä»¶/etc/ld.so.confå†…æ‰€åˆ—çš„ç›®å½•ä¸‹ï¼Œæœç´¢å‡ºå¯å…±äº«çš„åŠ¨æ€é“¾æ¥åº“ï¼ˆæ ¼å¼å¦‚lib*.so*ï¼‰,è¿›è€Œåˆ›å»ºå‡ºåŠ¨æ€è£…å…¥ç¨‹åº(ld.so)æ‰€éœ€çš„è¿æ¥å’Œç¼“å­˜æ–‡ä»¶</strong><br>å¾€ <code>/lib</code> å’Œ <code>/usr/lib</code> é‡Œé¢åŠ ä¸œè¥¿ï¼Œæ˜¯ä¸ç”¨ä¿®æ”¹ <code>/etc/ld.so.conf</code> çš„ï¼Œä½†æ˜¯å®Œäº†ä¹‹åè¦è°ƒä¸€ä¸‹ <code>ldconfig</code>ï¼Œä¸ç„¶è¿™ä¸ª library ä¼šæ‰¾ä¸åˆ°ã€‚<br>æƒ³å¾€ä¸Šé¢ä¸¤ä¸ªç›®å½•ä»¥å¤–åŠ ä¸œè¥¿çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¿®æ”¹ <code>/etc/ld.so.conf</code>ï¼Œç„¶åå†è°ƒç”¨ <code>ldconfig</code>ï¼Œä¸ç„¶ä¹Ÿä¼šæ‰¾ä¸åˆ°ã€‚æ¯”è¾ƒå¸¸è§„çš„æ“ä½œæ˜¯ï¼Œè‡ªå·±ç”Ÿæˆäº†ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œç„¶åå°†è·¯å¾„æ·»åŠ åˆ° <code>/etc/ld.so.conf</code>ï¼Œ ç„¶åæ‰§è¡Œ <code>ldconfig</code>ã€‚ è¿™æ ·å°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­è°ƒç”¨è¯¥åŠ¨æ€é“¾æ¥åº“äº†ã€‚</p><h4 id="8-NVIDIA-ç›¸å…³è½¯ä»¶çš„çŸ¥è¯†"><a href="#8-NVIDIA-ç›¸å…³è½¯ä»¶çš„çŸ¥è¯†" class="headerlink" title="8. NVIDIA ç›¸å…³è½¯ä»¶çš„çŸ¥è¯†"></a>8. NVIDIA ç›¸å…³è½¯ä»¶çš„çŸ¥è¯†</h4><p><strong>GPU</strong>:  ç¡¬ä»¶ï¼Œ ä¸»æµçš„æ˜¯ Nvidia çš„ GPU(ç°åœ¨æµè¡Œçš„æ˜¯ RTX 2080Ti)ï¼Œ æ·±åº¦å­¦ä¹ æœ¬èº«éœ€è¦å¤§é‡è®¡ç®—ã€‚ GPU çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œ åœ¨è¿‡å»å‡ å¹´é‡Œæ°å½“äº†æ»¡è¶³äº†æ·±åº¦å­¦ä¹ çš„éœ€æ±‚ã€‚ AMD çš„ GPU åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆæ”¯æŒï¼Œ å¯ä»¥ä¸ç”¨è€ƒè™‘ã€‚<br><strong>NVIDIA Driver</strong>: ç¡¬ä»¶æ¥å£ï¼Œ æ²¡æœ‰æ˜¾å¡é©±åŠ¨ï¼Œ å°±ä¸èƒ½è¯†åˆ« GPU ç¡¬ä»¶ï¼Œ ä¸èƒ½è°ƒç”¨å…¶è®¡ç®—èµ„æºã€‚<br><strong>CUDA</strong>: æ˜¯ NVIDIA æ¨å‡ºçš„åªèƒ½ç”¨äºè‡ªå®¶GPUçš„å¹¶è¡Œè®¡ç®—æ¡†æ¶ã€‚åªæœ‰å®‰è£…è¿™ä¸ªæ¡†æ¶æ‰èƒ½å¤Ÿè¿›è¡Œå¤æ‚çš„å¹¶è¡Œè®¡ç®—ã€‚ä¸»æµçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹Ÿéƒ½æ˜¯åŸºäºCUDAè¿›è¡ŒGPUå¹¶è¡ŒåŠ é€Ÿçš„ï¼Œå‡ ä¹æ— ä¸€ä¾‹å¤–ã€‚<br><strong>cudnn</strong>: é’ˆå¯¹æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œçš„åŠ é€Ÿåº“ã€‚<br><strong>Tensorflowã€pytorchã€mxnetã€paddle</strong>: åœ¨ CUDA å’Œ cudnn ä¹‹ä¸Šçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚</p><h4 id="9-æ˜¾å¡å®‰è£…çš„çŸ¥è¯†"><a href="#9-æ˜¾å¡å®‰è£…çš„çŸ¥è¯†" class="headerlink" title="9. æ˜¾å¡å®‰è£…çš„çŸ¥è¯†"></a>9. æ˜¾å¡å®‰è£…çš„çŸ¥è¯†</h4><p>(1)  <strong>ç¡¬ä»¶</strong>ï¼šæ’ä¸Š GPU<br>(2)  <strong>é©±åŠ¨</strong>:  [å»å®˜ç½‘ä¸‹è½½å¯¹åº”çš„é©±åŠ¨ç¨‹åº]</p><p>a. é¦–å…ˆå±è”½ nouveau</p><pre><code class="hljs shell">sudo vim /etc/modprobe.d/blacklist-nouveau.conf</code></pre><p>åœ¨å…¶ä¸­åŠ å…¥</p><pre><code class="hljs shell">blacklist nouveau</code></pre><p>b. æŒ‰ç…§ ctrl + alt + F1 è¿›å…¥ tty1, ç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å…³æ‰ X server</p><pre><code class="hljs awk">sudo <span class="hljs-regexp">/etc/i</span>nit.d/lightdm stop</code></pre><p>c. å®‰è£…å¯¹åº”çš„é©±åŠ¨ç¨‹åº<br>d. é‡å¯ X server</p><pre><code class="hljs shell">sudo /etc/init.d/light restart</code></pre><p>ï¼ˆ3ï¼‰ <strong>CUDA &amp; cudnn</strong></p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> Download CUDA   https://developer.nvidia.com/cuda-downloads</span><span class="hljs-meta">$</span><span class="bash"> chmod a+x cuda-repo-ubuntu1804-10-1-local-10.1.168-418.67_1.0-1_amd64.deb </span><span class="hljs-meta">$</span><span class="bash"> sudo dpkg -i ./cuda-repo-ubuntu1804-10-1-local-10.1.168-418.67_1.0-1_amd64.deb </span><span class="hljs-meta">$</span><span class="bash"> sudo apt-key add /var/cuda-repo-10-1-local-10.1.168-418.67/7fa2af80.pub</span><span class="hljs-meta">$</span><span class="bash"> sudo apt-get update</span><span class="hljs-meta">$</span><span class="bash"> sudo apt-get install cuda-10-1 -y</span><span class="hljs-meta">#</span><span class="bash"> Download cudnn from https://developer.nvidia.com/cudnn</span><span class="hljs-meta">$</span><span class="bash"> sudo cp cuda/include/cudnn.h /usr/<span class="hljs-built_in">local</span>/cuda/include</span><span class="hljs-meta">$</span><span class="bash"> sudo cp cuda/lib64/libcudnn* /usr/<span class="hljs-built_in">local</span>/cuda/lib64</span><span class="hljs-meta">$</span><span class="bash"> sudo chmod a+r /usr/<span class="hljs-built_in">local</span>/cuda/include/cudnn.h /usr/<span class="hljs-built_in">local</span>/cuda/lib64/libcudnn*</span></code></pre><p>åˆ«å¿˜è®° æ‰§è¡Œä»¥ä¸‹ sudo ldconfig</p><h4 id="10-ubuntu-å¾ªç¯ç™»å½•é—®é¢˜"><a href="#10-ubuntu-å¾ªç¯ç™»å½•é—®é¢˜" class="headerlink" title="10. ubuntu å¾ªç¯ç™»å½•é—®é¢˜"></a>10. ubuntu å¾ªç¯ç™»å½•é—®é¢˜</h4><p>è¿™ä¸ªé—®é¢˜æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„é—®é¢˜ï¼Œ æˆ‘è¿™æ¬¡ç¢°åˆ°çš„æƒ…å†µæ˜¯æ–°å¢åŠ çš„è´¦æˆ·ä¸èƒ½æ­£å¸¸ç™»é™†, è¿™é‡Œæ˜¯ç”±äºuseraddçš„æ—¶å€™æ²¡æœ‰å…³è”åˆ°å¯¹åº”çš„/homeä¸‹çš„æ–‡ä»¶å¤¹æ‰€è‡´, å¤„ç†å¦‚ä¸‹:</p><p>ï¼ˆ1ï¼‰ä½¿ç”¨: <code>userdel -r ç”¨æˆ·å</code> åˆ é™¤ç”¨æˆ·</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨  <code>useradd -m ç”¨æˆ·å</code> æ·»åŠ ç”¨æˆ· -&gt;  ä¼šåœ¨/homeç›®å½•ä¸‹åˆ›å»ºåŒåæ–‡ä»¶å¤¹</p><p>ï¼ˆ3ï¼‰æ·»åŠ ç”¨æˆ·åˆ°sudoer</p><ul><li><code>sudo visudo</code></li><li>åœ¨<code>%sudo</code>è¡Œä¸‹é¢<code>user ALL=(ALL) ALL</code></li></ul><h4 id="11-linux-productivity-tools"><a href="#11-linux-productivity-tools" class="headerlink" title="11. linux productivity tools"></a>11. linux productivity tools</h4><p>æœ‹å‹åˆ†äº«äº†ä¸€ä»½ linux productivity toolsï¼Œ ç”¨ç©ºå»å­¦ä¹ å­¦ä¹ </p><p>å‚è€ƒç½‘å€ä¸ºï¼š<a href="https://news.ycombinator.com/item?id=23229241">https://news.ycombinator.com/item?id=23229241</a></p><h4 id="12-linux-å¼€æœºè‡ªå¯åŠ¨"><a href="#12-linux-å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="12. linux å¼€æœºè‡ªå¯åŠ¨"></a>12. linux å¼€æœºè‡ªå¯åŠ¨</h4><p><strong>æ–¹å¼ä¸€. ä½¿ç”¨è‡ªå¸¦å¼€æœºè„šæœ¬</strong></p><p>ä½¿ç”¨ <code>/etc/rc.local</code> æ–‡ä»¶ï¼Œåœ¨ ubuntu18.04 ä¸­å¯ä»¥è‡ªå·±æ–°å»ºè¿™ä¸ªæ–‡ä»¶ã€‚</p><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>rc.local</code></pre><p>æ–‡ä»¶çš„å…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼Œå°†å¼€æœºè‡ªå¯åŠ¨å‘½ä»¤åŠ åœ¨ exit 0 ä¹‹å‰ã€‚</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/bin/sh -e</span><span class="hljs-meta">#</span><span class="hljs-meta">#</span><span class="bash"> rc.local</span><span class="hljs-meta">#</span><span class="hljs-meta">#</span><span class="bash"> This script is executed at the end of each multiuser runlevel.</span><span class="hljs-meta">#</span><span class="bash"> Make sure that the script will <span class="hljs-string">&quot;exit 0&quot;</span> on success or any other</span><span class="hljs-meta">#</span><span class="bash"> value on error.</span><span class="hljs-meta">#</span><span class="hljs-meta">#</span><span class="bash"> In order to <span class="hljs-built_in">enable</span> or <span class="hljs-built_in">disable</span> this script just change the execution</span><span class="hljs-meta">#</span><span class="bash"> bits.</span><span class="hljs-meta">#</span><span class="hljs-meta">#</span><span class="bash"> By default this script does nothing.</span>exit 0</code></pre><p>ä¿®æ”¹æ‰§è¡Œæƒé™å³å¯</p><pre><code class="hljs shell">chmod +x /etc/rc.local</code></pre><p><strong>æ–¹å¼äºŒ. æ·»åŠ å¼€æœºè„šæœ¬</strong></p><p>(1) åœ¨ã€€<code>/etc/init.d/</code> ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ auto_start.shï¼Œã€€å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼Œè®²å¾…æ‰§è¡Œå‘½ä»¤å¡«å†™åœ¨ exit 0 ä¹‹å‰ã€‚ã€€</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">!/bin/bash  </span><span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">command</span> content      </span>exit 0</code></pre><p>(2) æ›´æ”¹è„šæœ¬æƒé™:</p><pre><code class="hljs shell">sudo chmod +x auto_start.sh</code></pre><p>(3) å°†è„šæœ¬æ·»åŠ åˆ°å¯åŠ¨è„šæœ¬, æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤å³å¯ï¼Œåœ¨è¿™é‡Œ90è¡¨æ˜ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¶Šé«˜è¡¨ç¤ºæ‰§è¡Œçš„è¶Šæ™šã€‚</p><pre><code class="hljs shell">cd /etc/init.d/  sudo update-rc.d auto_start.sh defaults 90</code></pre><p>Note:ã€€å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç§»é™¤å¼€æœºè„šæœ¬ï¼š</p><pre><code class="hljs shell">sudo update-rc.d -f new_service.sh remove</code></pre><h4 id="13-NVIDIA-å¸¸è§å‘½ä»¤"><a href="#13-NVIDIA-å¸¸è§å‘½ä»¤" class="headerlink" title="13. NVIDIA å¸¸è§å‘½ä»¤"></a>13. NVIDIA å¸¸è§å‘½ä»¤</h4><h6 id="nvidia-smi"><a href="#nvidia-smi" class="headerlink" title="nvidia-smi"></a>nvidia-smi</h6><p>åœ¨è¿›è¡Œæ·±åº¦å­¦ä¹ å®éªŒæ—¶ï¼ŒGPU çš„å®æ—¶çŠ¶æ€ç›‘æµ‹ååˆ†æœ‰å¿…è¦ã€‚ä»Šå¤©è¯¦ç»†è§£è¯»ä¸€ä¸‹ <code>nvidia-smi</code> å‘½ä»¤ã€‚</p><pre><code class="hljs shell">Fri Aug  2 10:10:08 2019       +-----------------------------------------------------------------------------+| NVIDIA-SMI 410.48                 Driver Version: 410.48                    ||-------------------------------+----------------------+----------------------+| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC || Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. ||===============================+======================+======================||   0  GeForce RTX 208...  Off  | 00000000:01:00.0  On |                  N/A || 31%   43C    P8    12W / 250W |    223MiB / 10981MiB |      4%      Default |+-------------------------------+----------------------+----------------------+                                                                               +-----------------------------------------------------------------------------+| Processes:                                                       GPU Memory ||  GPU       PID   Type   Process name                             Usage      ||=============================================================================||    0      1614      G   /usr/lib/xorg/Xorg                            14MiB ||    0      4804      G   /usr/lib/xorg/Xorg                           207MiB |+-----------------------------------------------------------------------------+</code></pre><p>ä¸Šå›¾æ˜¯æœåŠ¡å™¨ä¸Š GeForce GTX 1080 Ti çš„ä¿¡æ¯ï¼Œä¸‹é¢ä¸€ä¸€è§£è¯»å‚æ•°ã€‚ ä¸Šé¢çš„è¡¨æ ¼ä¸­çš„ä¿¡æ¯ä¸ä¸‹é¢çš„å››ä¸ªæ¡†çš„ä¿¡æ¯æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼š</p><p><strong>GPU</strong>ï¼šGPU ç¼–å·ï¼›            <strong>Name</strong>ï¼šGPU å‹å·ï¼›  <strong>Persistence-M</strong>ï¼šæŒç»­æ¨¡å¼çš„çŠ¶æ€ã€‚<br><strong>Fan</strong>ï¼šé£æ‰‡è½¬é€Ÿ(0~100%)  <strong>Temp</strong>ï¼šæ¸©åº¦(æ‘„æ°åº¦)  <strong>Perf</strong>ï¼šæ€§èƒ½çŠ¶æ€ï¼Œä»P0(å°)åˆ°P12(å¤§)ã€€<strong>Pwr:Usage/Cap</strong>ï¼šèƒ½è€—</p><p><strong>Bus-Id</strong>ï¼šGPUæ€»çº¿ã€€ã€€ã€€ã€€<strong>Disp.A</strong>ï¼šDisplay Activeï¼Œè¡¨ç¤ºGPUçš„æ˜¾ç¤ºæ˜¯å¦åˆå§‹åŒ–ï¼›<br><strong>Memory Usage</strong>ï¼šæ˜¾å­˜ä½¿ç”¨ç‡ï¼› </p><p><strong>Volatile GPU-Util</strong>ï¼šæµ®åŠ¨çš„GPUåˆ©ç”¨ç‡ã€€ã€€ã€€<strong>Uncorr. ECC</strong>ï¼šError Correcting Codeï¼Œé”™è¯¯æ£€æŸ¥ä¸çº æ­£<br><strong>Compute M</strong>ï¼šcompute modeï¼Œè®¡ç®—æ¨¡å¼ã€‚</p><p><strong>ä¸‹æ–¹çš„ Processes è¡¨ç¤ºæ¯ä¸ªè¿›ç¨‹å¯¹ GPU çš„æ˜¾å­˜ä½¿ç”¨ç‡</strong></p><h6 id="nvidia-smi-L"><a href="#nvidia-smi-L" class="headerlink" title="nvidia-smi -L"></a>nvidia-smi -L</h6><p>ç¬¬äºŒä¸ªå‘½ä»¤ï¼š<code>nvidia-smi -L</code>, è¯¥å‘½ä»¤ç”¨äºåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ NVIDIA è®¾å¤‡ä¿¡æ¯ã€‚</p><h6 id="watch-n1-nvidia-smi"><a href="#watch-n1-nvidia-smi" class="headerlink" title="watch -n1 nvidia-smi"></a>watch -n1 nvidia-smi</h6><p>æ¯1ç§’æ£€æŸ¥ä¸€æ¬¡GPUçš„ä½¿ç”¨æƒ…å†µ</p><h6 id="æŸ¥çœ‹CUDA-å’Œ-cudnn-ç‰ˆæœ¬ä¿¡æ¯"><a href="#æŸ¥çœ‹CUDA-å’Œ-cudnn-ç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹CUDAã€€å’Œ cudnnã€€ç‰ˆæœ¬ä¿¡æ¯"></a>æŸ¥çœ‹CUDAã€€å’Œ cudnnã€€ç‰ˆæœ¬ä¿¡æ¯</h6><p>æŸ¥çœ‹ CUDA ç‰ˆæœ¬ï¼š</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat /usr/<span class="hljs-built_in">local</span>/cuda/version.txt</span>CUDA Version 10.0.130</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:</p><pre><code class="hljs shell">nvcc --version</code></pre><p>æŸ¥çœ‹ CUDNN ç‰ˆæœ¬ï¼š</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cat /usr/<span class="hljs-built_in">local</span>/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2</span>rep CUDNN_MAJOR -A 2<span class="hljs-meta">#</span><span class="bash">define CUDNN_MAJOR 7</span><span class="hljs-meta">#</span><span class="bash">define CUDNN_MINOR 5</span><span class="hljs-meta">#</span><span class="bash">define CUDNN_PATCHLEVEL 0</span>--<span class="hljs-meta">#</span><span class="bash">define CUDNN_VERSION (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)</span><span class="hljs-meta">#</span><span class="bash">include <span class="hljs-string">&quot;driver_types.h&quot;</span></span></code></pre>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ubuntuå¸¸è§çš„è½¯ä»¶å®‰è£…æ–¹å¼</title>
    <link href="/2018/06/17/ubuntu%E5%B8%B8%E8%A7%81%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F/"/>
    <url>/2018/06/17/ubuntu%E5%B8%B8%E8%A7%81%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>ubuntu ä¸€äº›å®‰è£…å‘½ä»¤çš„åŒºåˆ†ï¼Œ æ¯”å¦‚ apt-getã€aptã€snapã€dpkg ç­‰ã€‚</p><a id="more"></a><h4 id="1-apt-vs-apt-get"><a href="#1-apt-vs-apt-get" class="headerlink" title="1. apt vs apt-get"></a>1. apt vs apt-get</h4><p>ã€€ã€€æœ€å¸¸ç”¨çš„ Linux åŒ…ç®¡ç†å‘½ä»¤åˆ†æ•£åœ¨ <code>apt-get</code>ã€<code>apt-cache</code> å’Œ<code>apt-config</code> è¿™ä¸‰æ¡å‘½ä»¤å½“ä¸­ã€‚<code>apt</code> å‘½ä»¤çš„å¼•å…¥å°±æ˜¯<strong>ä¸ºäº†è§£å†³å‘½ä»¤è¿‡äºåˆ†æ•£çš„é—®é¢˜</strong>ï¼Œå®ƒåŒ…æ‹¬äº† apt-get å‘½ä»¤å‡ºç°ä»¥æ¥ä½¿ç”¨æœ€å¹¿æ³›çš„åŠŸèƒ½é€‰é¡¹ï¼Œä»¥åŠ apt-cache å’Œ apt-config å‘½ä»¤ä¸­å¾ˆå°‘ç”¨åˆ°çš„åŠŸèƒ½ã€‚åœ¨ä½¿ç”¨ apt å‘½ä»¤æ—¶ï¼Œç”¨æˆ·ä¸å¿…å†ç”± apt-get è½¬åˆ° apt-cache æˆ– apt-configï¼Œè€Œä¸” apt æ›´åŠ ç»“æ„åŒ–ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›äº†ç®¡ç†è½¯ä»¶åŒ…æ‰€éœ€çš„å¿…è¦é€‰é¡¹ã€‚</p><p><strong>ç®€å•æ¥è¯´å°±æ˜¯ï¼šapt = apt-getã€apt-cache å’Œ apt-config ä¸­æœ€å¸¸ç”¨å‘½ä»¤é€‰é¡¹çš„é›†åˆã€‚</strong></p><h6 id="aptä¸apt-getä¹‹é—´çš„åŒºåˆ«"><a href="#aptä¸apt-getä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="aptä¸apt-getä¹‹é—´çš„åŒºåˆ«"></a>aptä¸apt-getä¹‹é—´çš„åŒºåˆ«</h6><p>ã€€ã€€é€šè¿‡ apt å‘½ä»¤ï¼Œç”¨æˆ·å¯ä»¥åœ¨åŒä¸€åœ°æ–¹é›†ä¸­å¾—åˆ°æ‰€æœ‰å¿…è¦çš„å·¥å…·ï¼Œapt çš„ä¸»è¦ç›®çš„æ˜¯æä¾›ä¸€ç§ä»¥ã€Œè®©ç»ˆç«¯ç”¨æˆ·æ»¡æ„ã€çš„æ–¹å¼æ¥å¤„ç† Linux è½¯ä»¶åŒ…çš„æœ‰æ•ˆæ–¹å¼ã€‚</p><p>ã€€ã€€apt å…·æœ‰æ›´ç²¾å‡ä½†è¶³å¤Ÿçš„å‘½ä»¤é€‰é¡¹ï¼Œè€Œä¸”å‚æ•°é€‰é¡¹çš„ç»„ç»‡æ–¹å¼æ›´ä¸ºæœ‰æ•ˆã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒé»˜è®¤å¯ç”¨çš„å‡ ä¸ªç‰¹æ€§å¯¹æœ€ç»ˆç”¨æˆ·ä¹Ÿéå¸¸æœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨ä½¿ç”¨ apt å‘½ä»¤å®‰è£…æˆ–åˆ é™¤ç¨‹åºæ—¶çœ‹åˆ°è¿›åº¦æ¡ï¼Œapt è¿˜ä¼šåœ¨æ›´æ–°å­˜å‚¨åº“æ•°æ®åº“æ—¶æç¤ºç”¨æˆ·å¯å‡çº§çš„è½¯ä»¶åŒ…ä¸ªæ•°ã€‚</p><p>ã€€ã€€å¦‚æœä½ ä½¿ç”¨ apt çš„å…¶å®ƒå‘½ä»¤é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥å®ç°ä¸ä½¿ç”¨ apt-get æ—¶ç›¸åŒçš„æ“ä½œã€‚</p><h6 id="aptå’Œapt-getå‘½ä»¤ä¹‹é—´çš„åŒºåˆ«"><a href="#aptå’Œapt-getå‘½ä»¤ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="aptå’Œapt-getå‘½ä»¤ä¹‹é—´çš„åŒºåˆ«"></a>aptå’Œapt-getå‘½ä»¤ä¹‹é—´çš„åŒºåˆ«</h6><p>â€‹      è™½ç„¶ apt ä¸ apt-get æœ‰ä¸€äº›ç±»ä¼¼çš„å‘½ä»¤é€‰é¡¹ï¼Œä½†å®ƒå¹¶ä¸èƒ½å®Œå…¨å‘ä¸‹å…¼å®¹ apt-get å‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ç”¨ apt æ›¿æ¢éƒ¨åˆ† apt-get ç³»åˆ—å‘½ä»¤ï¼Œä½†ä¸æ˜¯å…¨éƒ¨ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:left">apt å‘½ä»¤</th><th style="text-align:left">å–ä»£çš„å‘½ä»¤</th><th style="text-align:left">å‘½ä»¤çš„åŠŸèƒ½</th></tr></thead><tbody><tr><td style="text-align:left">apt install</td><td style="text-align:left">apt-get install</td><td style="text-align:left">å®‰è£…è½¯ä»¶åŒ…</td></tr><tr><td style="text-align:left">apt remove</td><td style="text-align:left">apt-get remove</td><td style="text-align:left">ç§»é™¤è½¯ä»¶åŒ…</td></tr><tr><td style="text-align:left">apt purge</td><td style="text-align:left">apt-get purge</td><td style="text-align:left">ç§»é™¤è½¯ä»¶åŒ…åŠé…ç½®æ–‡ä»¶</td></tr><tr><td style="text-align:left">apt update</td><td style="text-align:left">apt-get update</td><td style="text-align:left">åˆ·æ–°å­˜å‚¨åº“ç´¢å¼•</td></tr><tr><td style="text-align:left">apt upgrade</td><td style="text-align:left">apt-get upgrade</td><td style="text-align:left">å‡çº§æ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…</td></tr><tr><td style="text-align:left">apt autoremove</td><td style="text-align:left">apt-get autoremove</td><td style="text-align:left">è‡ªåŠ¨åˆ é™¤ä¸éœ€è¦çš„åŒ…</td></tr><tr><td style="text-align:left">apt full-upgrade</td><td style="text-align:left">apt-get dist-upgrade</td><td style="text-align:left">åœ¨å‡çº§è½¯ä»¶åŒ…æ—¶è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»</td></tr><tr><td style="text-align:left">apt search</td><td style="text-align:left">apt-cache search</td><td style="text-align:left">æœç´¢åº”ç”¨ç¨‹åº</td></tr><tr><td style="text-align:left">apt show</td><td style="text-align:left">apt-cache show</td><td style="text-align:left">æ˜¾ç¤ºå®‰è£…ç»†èŠ‚</td></tr></tbody></table></div><p>å½“ç„¶ï¼Œapt è¿˜æœ‰ä¸€äº›è‡ªå·±çš„å‘½ä»¤ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">æ–°çš„aptå‘½ä»¤</th><th style="text-align:left">å‘½ä»¤çš„åŠŸèƒ½</th></tr></thead><tbody><tr><td style="text-align:left">apt list</td><td style="text-align:left">åˆ—å‡ºåŒ…å«æ¡ä»¶çš„åŒ…ï¼ˆå·²å®‰è£…ï¼Œå¯å‡çº§ç­‰ï¼‰</td></tr><tr><td style="text-align:left">apt edit-sources</td><td style="text-align:left">ç¼–è¾‘æºåˆ—è¡¨</td></tr></tbody></table></div><p>éœ€è¦å¤§å®¶æ³¨æ„çš„æ˜¯ï¼šapt å‘½ä»¤ä¹Ÿè¿˜åœ¨ä¸æ–­å‘å±•ï¼Œ å› æ­¤ï¼Œä½ å¯èƒ½ä¼šåœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­çœ‹åˆ°æ–°çš„é€‰é¡¹ã€‚</p><h6 id="apt-getå·²å¼ƒç”¨ï¼Ÿ"><a href="#apt-getå·²å¼ƒç”¨ï¼Ÿ" class="headerlink" title="apt-getå·²å¼ƒç”¨ï¼Ÿ"></a>apt-getå·²å¼ƒç”¨ï¼Ÿ</h6><p>â€‹      ç›®å‰è¿˜æ²¡æœ‰ä»»ä½• Linux å‘è¡Œç‰ˆå®˜æ–¹æ”¾å‡º apt-get å°†è¢«åœç”¨çš„æ¶ˆæ¯ï¼Œè‡³å°‘å®ƒè¿˜æœ‰æ¯” apt æ›´å¤šã€æ›´ç»†åŒ–çš„æ“ä½œåŠŸèƒ½ã€‚å¯¹äºä½çº§æ“ä½œï¼Œä»ç„¶éœ€è¦ apt-getã€‚</p><h6 id="æˆ‘åº”è¯¥ä½¿ç”¨aptè¿˜æ˜¯apt-getï¼Ÿ"><a href="#æˆ‘åº”è¯¥ä½¿ç”¨aptè¿˜æ˜¯apt-getï¼Ÿ" class="headerlink" title="æˆ‘åº”è¯¥ä½¿ç”¨aptè¿˜æ˜¯apt-getï¼Ÿ"></a>æˆ‘åº”è¯¥ä½¿ç”¨aptè¿˜æ˜¯apt-getï¼Ÿ</h6><p>â€‹      æ—¢ç„¶ä¸¤ä¸ªå‘½ä»¤éƒ½æœ‰ç”¨ï¼Œé‚£ä¹ˆæˆ‘è¯¥ä½¿ç”¨ apt è¿˜æ˜¯ apt-get å‘¢ï¼Ÿä½œä¸ºä¸€ä¸ªå¸¸è§„ Linux ç”¨æˆ·ï¼Œå»ºè®®å¤§å®¶å°½å¿«é€‚åº”å¹¶å¼€å§‹é¦–å…ˆä½¿ç”¨ aptã€‚ä¸ä»…å› ä¸ºå¹¿å¤§ Linux å‘è¡Œå•†éƒ½åœ¨æ¨è aptï¼Œæ›´ä¸»è¦çš„è¿˜æ˜¯å®ƒæä¾›äº† Linux åŒ…ç®¡ç†çš„å¿…è¦é€‰é¡¹ã€‚</p><p>â€‹     æœ€é‡è¦çš„æ˜¯ï¼Œapt å‘½ä»¤é€‰é¡¹æ›´å°‘æ›´æ˜“è®°ï¼Œå› æ­¤ä¹Ÿæ›´æ˜“ç”¨ï¼Œæ‰€ä»¥æ²¡ç†ç”±ç»§ç»­åšæŒ apt-getã€‚</p><h6 id="dpkg"><a href="#dpkg" class="headerlink" title="dpkg"></a>dpkg</h6><p>dpkgæ˜¯ç”¨æ¥å®‰è£….debæ–‡ä»¶,ä½†ä¸ä¼šè§£å†³æ¨¡å—çš„ä¾èµ–å…³ç³»,ä¸”ä¸ä¼šå…³å¿ƒubuntuçš„è½¯ä»¶ä»“åº“å†…çš„è½¯ä»¶,å¯ä»¥ç”¨äºå®‰è£…æœ¬åœ°çš„debæ–‡ä»¶ã€‚</p><h6 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h6><p>æœ€åç»“å¤§å®¶æä¾›ä¸¤ç‚¹ä½¿ç”¨ä¸Šçš„å»ºè®®ï¼š</p><ul><li>apt å¯ä»¥çœ‹ä½œ apt-get å’Œ apt-cache å‘½ä»¤çš„å­é›†, å¯ä»¥ä¸ºåŒ…ç®¡ç†æä¾›å¿…è¦çš„å‘½ä»¤é€‰é¡¹ã€‚</li><li>apt-get è™½ç„¶æ²¡è¢«å¼ƒç”¨ï¼Œä½†ä½œä¸ºæ™®é€šç”¨æˆ·ï¼Œè¿˜æ˜¯åº”è¯¥é¦–å…ˆä½¿ç”¨ aptã€‚</li></ul><p>ä»¥ä¸ŠåŸæ–‡é“¾æ¥ï¼š<a href="https://www.sysgeek.cn/apt-vs-apt-get/">https://www.sysgeek.cn/apt-vs-apt-get/</a></p><h4 id="2-apt-åŸºæœ¬å‘½ä»¤"><a href="#2-apt-åŸºæœ¬å‘½ä»¤" class="headerlink" title="2. apt åŸºæœ¬å‘½ä»¤"></a>2. apt åŸºæœ¬å‘½ä»¤</h4><pre><code class="hljs shell">sudo apt install [xxx.deb] # å®‰è£…sudo apt --fix-broken installã€€ã€€#ã€€ä¿®å¤ä¾èµ–<span class="hljs-meta">#</span><span class="bash"> apt update vs upgrade</span>sudo apt updateã€€ã€€# åªæ£€æŸ¥ï¼Œä¸æ›´æ–°ï¼ˆå·²å®‰è£…çš„è½¯ä»¶åŒ…æ˜¯å¦æœ‰å¯ç”¨çš„æ›´æ–°ï¼Œç»™å‡ºæ±‡æ€»æŠ¥å‘Šï¼‰sudo apt upgrade #  æ›´æ–°å·²å®‰è£…çš„è½¯ä»¶åŒ…sudo apt remove     # åˆ é™¤å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼ˆä¿ç•™é…ç½®æ–‡ä»¶ï¼‰sudo apt purge      # åˆ é™¤å·²å®‰è£…åŒ…ï¼ˆä¸ä¿ç•™é…ç½®æ–‡ä»¶)ï¼Œåˆ é™¤è½¯ä»¶åŒ…ï¼ŒåŒæ—¶åˆ é™¤ç›¸åº”ä¾èµ–è½¯ä»¶åŒ…ã€‚                         # å¦‚æœæƒ³è¦å½»åº•æ¸…ç†è½¯ä»¶ï¼Œã€€å»ºè®®ä½¿ç”¨ã€€purge å‘½ä»¤sudo apt clean    # æ­¤å‘½ä»¤ä¼šå°† /var/cache/apt/archives/ ä¸‹çš„ æ‰€æœ‰ deb åˆ æ‰ï¼Œ                 # ç›¸å½“äºæ¸…ç†ä¸‹è½½çš„è½¯ä»¶å®‰è£…åŒ…ã€‚sudo apt autoremove   # åˆ é™¤å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼ˆä¿ç•™é…ç½®æ–‡ä»¶ï¼‰ï¼Œä¸ä¼šåˆ é™¤ä¾èµ–è½¯ä»¶åŒ…ï¼Œä¸”ä¿ç•™é…ç½®æ–‡ä»¶ã€‚ï¼ˆè¿™ä¸ªå‘½ä»¤å®¹æ˜“å¯¼è‡´ç³»ç»Ÿæ— æ³•è¿›å…¥ç³»ç»Ÿæ¡Œé¢, åœ¨æ¡Œé¢ç‰ˆçš„Ubuntuç³»ç»Ÿä¸‹å°½é‡ä¸è¦ä½¿ç”¨</code></pre><h4 id="3-å¸¸è§çš„è½¯ä»¶ç¼–è¯‘å®‰è£…æ–¹æ³•"><a href="#3-å¸¸è§çš„è½¯ä»¶ç¼–è¯‘å®‰è£…æ–¹æ³•" class="headerlink" title="3. å¸¸è§çš„è½¯ä»¶ç¼–è¯‘å®‰è£…æ–¹æ³•"></a>3. å¸¸è§çš„è½¯ä»¶ç¼–è¯‘å®‰è£…æ–¹æ³•</h4><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> download</span><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> [github/path/to/packge]</span><span class="hljs-meta">#</span><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> [package]</span><span class="hljs-meta">$</span><span class="bash"> mkdir build</span><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> build</span><span class="hljs-meta">#</span><span class="bash"> build &amp; install</span><span class="hljs-meta">$</span><span class="bash"> cmake ..</span><span class="hljs-meta">$</span><span class="bash"> make </span><span class="hljs-meta">$</span><span class="bash"> sudo make install</span></code></pre><h4 id="ï¼”-snap"><a href="#ï¼”-snap" class="headerlink" title="ï¼”. snap"></a>ï¼”. snap</h4><p>ã€€ã€€Snapæ˜¯Ubuntuæ¯å…¬å¸Canonicaläº2016å¹´4æœˆå‘å¸ƒã€€Ubuntu16.04ã€€æ—¶å€™å¼•å…¥çš„ä¸€ç§å®‰å…¨çš„ã€æ˜“äºç®¡ç†çš„ã€æ²™ç›’åŒ–çš„è½¯ä»¶åŒ…æ ¼å¼ï¼Œä¸ä¼ ç»Ÿçš„dpkg/aptæœ‰ç€å¾ˆå¤§çš„åŒºåˆ«ã€‚Snapå¯ä»¥è®©å¼€å‘è€…å°†ä»–ä»¬çš„è½¯ä»¶æ›´æ–°åŒ…éšæ—¶å‘å¸ƒç»™ç”¨æˆ·ï¼Œè€Œä¸å¿…ç­‰å¾…å‘è¡Œç‰ˆçš„æ›´æ–°å‘¨æœŸï¼›ã€€å…¶æ¬¡Snapåº”ç”¨å¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„è½¯ä»¶ï¼Œæ¯”å¦‚å®‰è£…Python2.7å’ŒPython3.3ã€‚ã€€snapè½¯ä»¶åŒ…ä¸€èˆ¬å®‰è£…åœ¨/snapç›®å½•ä¸‹ã€‚</p><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo snap install [snap_name]ã€€<span class="hljs-comment">#ã€€å®‰è£…snapåŒ…</span></span><span class="hljs-meta">$</span><span class="bash"> sudo snap find [snap_name] <span class="hljs-comment">#ã€€æœç´¢å®‰è£…çš„snapåŒ…</span></span><span class="hljs-meta">$</span><span class="bash"> sudo snap refresh [snap_name] <span class="hljs-comment">#ã€€æ›´æ–°snapåŒ…</span></span><span class="hljs-meta">$</span><span class="bash"> sudo snap remove [snap_name] <span class="hljs-comment">#ã€€åˆ é™¤ snap åŒ…</span></span><span class="hljs-meta">$</span><span class="bash"> snap list <span class="hljs-comment">#ã€€åˆ—å‡ºå·²ç»å®‰è£…çš„snapåŒ…</span></span></code></pre><h4 id="5-Python-packgae-å®‰è£…æ–¹å¼"><a href="#5-Python-packgae-å®‰è£…æ–¹å¼" class="headerlink" title="5. Python packgae å®‰è£…æ–¹å¼"></a>5. Python packgae å®‰è£…æ–¹å¼</h4><h6 id="pip-pip3"><a href="#pip-pip3" class="headerlink" title="pip/pip3"></a>pip/pip3</h6><p>æ¯”è¾ƒå¸¸è§çš„å®‰è£…python package çš„æ–¹æ³•    </p><h6 id="conda"><a href="#conda" class="headerlink" title="conda"></a>conda</h6><p>â€‹    condaçš„åŒ…ç®¡ç†æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½ä¸pipç±»ä¼¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦å®‰è£…scipyï¼Œ å¯ä»¥ä½¿ç”¨ï¼š<code>conda install scipy</code>ã€‚condaä¼šä»ä»è¿œç¨‹æœç´¢scipyçš„ç›¸å…³ä¿¡æ¯å’Œä¾èµ–é¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œscipy ä¾èµ–äºnumpyï¼Œä¸€æ¬¡å¦‚æœä½ åªå®‰è£… scipyï¼Œåˆ™condaè¿˜ä¼šå®‰è£… numpyã€‚ä½ è¿˜å¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…ã€‚ç±»ä¼¼ <code>conda install numpy scipy pandas</code> çš„å‘½ä»¤ä¼šåŒæ—¶å®‰è£…æ‰€æœ‰è¿™äº›åŒ…ã€‚å¦å¤–è¿˜å¯ä»¥é€šè¿‡æ·»åŠ ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ <code>conda install numpy=1.10</code>ï¼‰æ¥æŒ‡å®šæ‰€éœ€çš„åŒ…ç‰ˆæœ¬ã€‚</p><p>â€‹    Condaçš„å¤§éƒ¨åˆ†å‘½ä»¤éƒ½å¾ˆç›´è§‚ï¼Œè¦å¸è½½å®‰è£…åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ <code>conda remove package_name</code>ã€‚è¦æ›´æ–°å®‰è£…åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ <code>conda update package_name</code>, è¦æ›´æ–°ç¯å¢ƒä¸­æ‰€æœ‰åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ <code>conda update -all</code>ã€‚è¦æŸ¥çœ‹å·²ç»å®‰è£…çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ <code>conda list</code>, æœ€æ–°ç‰ˆçš„condaæ˜¯ä»site-packagesæ–‡ä»¶å¤¹ä¸­æœç´¢å·²ç»å®‰è£…çš„åŒ…ï¼Œä¸ä¾èµ–äºpipï¼Œå› æ­¤å¯ä»¥æ˜¾ç¤ºå‡ºé€šè¿‡å„ç§æ–¹å¼å®‰è£…çš„åŒ…ã€‚ æœ€åï¼Œå¦‚æœæˆ‘ä»¬ä¸çŸ¥é“è¦æ‰¾çš„åŒ…çš„ç¡®åˆ‡åç§°ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨<code>conda search search_term</code> å°è¯•è¿›è¡Œæœç´¢ã€‚ä¾‹å¦‚ï¼Œè¦å®‰è£… Beatiful Soupï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æ¸…æ¥šç¡®åˆ‡çš„åŒ…åç§°ï¼Œå› æ­¤å¯ä»¥å°è¯•<code>conda search beatifulsoup</code>ã€‚</p><h6 id="apt-get-install-Python-package"><a href="#apt-get-install-Python-package" class="headerlink" title="apt-get install Python package"></a>apt-get install Python package</h6><p>(1) å®‰è£…python2 package</p><pre><code class="hljs shell">sudo apt-get install python-[package]</code></pre><p>(2) å®‰è£…python3 package</p><pre><code class="hljs shell">sudo apt-get install python3-[package]</code></pre><h4 id="6-apt-get-å’Œ-yum-åŒºåˆ«"><a href="#6-apt-get-å’Œ-yum-åŒºåˆ«" class="headerlink" title="6. apt-get å’Œ yum åŒºåˆ«"></a>6. apt-get å’Œ yum åŒºåˆ«</h4><p>ä¸€èˆ¬æ¥è¯´è‘—åçš„linuxç³»ç»ŸåŸºæœ¬ä¸Šåˆ†ä¸¤å¤§ç±»ï¼š</p><ol><li>RedHatç³»åˆ—ï¼šRedhatã€CentOSã€Fedoraç­‰</li><li>Debianç³»åˆ—ï¼šDebianã€Ubuntuç­‰</li></ol><h6 id="RedHat-ç³»åˆ—"><a href="#RedHat-ç³»åˆ—" class="headerlink" title="RedHat ç³»åˆ—"></a>RedHat ç³»åˆ—</h6><ol><li>å¸¸è§çš„å®‰è£…åŒ…æ ¼å¼ rpmåŒ…,å®‰è£…rpmåŒ…çš„å‘½ä»¤æ˜¯â€œrpm -å‚æ•°â€ </li><li>åŒ…ç®¡ç†å·¥å…· yum </li><li>æ”¯æŒtaråŒ…</li></ol><h6 id="Debianç³»åˆ—"><a href="#Debianç³»åˆ—" class="headerlink" title="Debianç³»åˆ—"></a>Debianç³»åˆ—</h6><ol><li>å¸¸è§çš„å®‰è£…åŒ…æ ¼å¼ debåŒ…,å®‰è£…debåŒ…çš„å‘½ä»¤æ˜¯â€œdpkg -å‚æ•°â€ </li><li>åŒ…ç®¡ç†å·¥å…· apt-get </li><li>æ”¯æŒtaråŒ…</li></ol>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linux_commands</title>
    <link href="/2018/06/05/Linux-commands/"/>
    <url>/2018/06/05/Linux-commands/</url>
    
    <content type="html"><![CDATA[<p>Linux å¸¸è§å‘½ä»¤ï¼šåŸºæœ¬æ–‡ä»¶å’Œç›®å½•æ“ä½œã€æ–‡ä»¶çš„åˆ›å»ºå’ŒæŸ¥é˜…ã€æœç´¢å‘½ä»¤ã€ç£ç›˜çš„å‹ç¼©å’Œè§£å‹ç¼©ã€ç³»ç»Ÿä¿¡æ¯ã€è¿›ç¨‹ç®¡ç†ã€ç”¨æˆ·æƒé™ä¸ç”¨æˆ·ç®¡ç†ã€ç½‘ç»œä¼ è¾“ã€å®‰è£…å¸è½½ã€å¼€å…³æœºã€çª—å£ç®¡ç†ç­‰ã€‚</p><a id="more"></a><h4 id="1-åŸºæœ¬æ–‡ä»¶ä¸ç›®å½•æ“ä½œ"><a href="#1-åŸºæœ¬æ–‡ä»¶ä¸ç›®å½•æ“ä½œ" class="headerlink" title="1. åŸºæœ¬æ–‡ä»¶ä¸ç›®å½•æ“ä½œ"></a>1. åŸºæœ¬æ–‡ä»¶ä¸ç›®å½•æ“ä½œ</h4><pre><code class="hljs shell">ls    # åˆ—å‡ºæ–‡ä»¶   [-a] åˆ—å‡ºå…¨éƒ¨æ–‡ä»¶(åŒ…æ‹¬éšè—æ–‡ä»¶)      [-l]  åˆ—å‡ºé•¿æ•°æ®ä¸²ï¼ŒåŒ…å«å±æ€§ä¸æƒé™ç­‰ä¿¡æ¯      # æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹çš„ç›®å½•ä¸ªæ•°  find ./ | wc -lcd dir  # åˆ‡æ¢åˆ°æŒ‡å®šç›®å½• cd ..   # åˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½•          cd ~    # åˆ‡æ¢åˆ°è‡ªå·±çš„ä¸»æ–‡ä»¶å¤¹       cd -    # åˆ‡æ¢åˆ°åˆšæ‰ç›®å½•pwd    # æ˜¾ç¤ºå½“å‰ç›®å½•mkdir [dirname]    # åˆ›å»ºæ–°æ–‡ä»¶å¤¹      rm [file]  #  åˆ é™¤æ–‡ä»¶æˆ–è€…ç›®å½•     [-r]  åˆ é™¤ç›®å½•    [-f] å¼ºåˆ¶cp [srcfile] [dstfile]   # å¤åˆ¶æ–‡ä»¶         [-r] ç”¨äºå¤åˆ¶ç›®å½•  mv [srcfile] [dstfile]   # å°†æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•ï¼Œä¸ä½¿ç”¨ [-r] å³å¯ç§»åŠ¨ç›®å½•ï¼ŒåŒä¸€ç›®å½•åˆ™ä¸ºé‡å‘½åtree . # æ˜¾ç¤ºç›®å½•æ ‘     -L   æŒ‡å®šæ˜¾ç¤ºæœ€å¤§å±‚æ•°  sudo apt-get install tree</code></pre><h4 id="2-æ–‡ä»¶åˆ›å»ºä¸æŸ¥é˜…"><a href="#2-æ–‡ä»¶åˆ›å»ºä¸æŸ¥é˜…" class="headerlink" title="2. æ–‡ä»¶åˆ›å»ºä¸æŸ¥é˜…"></a>2. æ–‡ä»¶åˆ›å»ºä¸æŸ¥é˜…</h4><pre><code class="hljs shell">touch filename #  åˆ›å»ºæ–°æ–‡ä»¶   cat file    # æ­£å‘æŸ¥çœ‹æ–‡ä»¶å…¨éƒ¨å†…å®¹     tac file    # åå‘æŸ¥çœ‹æ–‡ä»¶å…¨éƒ¨å†…å®¹    [-n] å¸¦è¡Œå·æ˜¾ç¤ºæ–‡ä»¶head -n file  # æŸ¥çœ‹æ–‡ä»¶å‰nè¡Œ      tail -n file  # æŸ¥çœ‹fileçš„ånè¡Œless file   # æŒ‰é¡µæŸ¥çœ‹æ–‡ä»¶[Page Down]    ä¸‹ç¿»ä¸€é¡µ  [Page Up]  ä¸Šç¿»ä¸€é¡µ    /  å‘ä¸‹æŸ¥è¯¢   ?  å‘ä¸ŠæŸ¥è¯¢   q é€€å‡ºmore file  # æŒ‰é¡µæŸ¥çœ‹æ–‡ä»¶ [Enter]   å‘ä¸‹ä¸€è¡Œ    [Space]å‘ä¸‹ä¸€é¡µ    qé€€å‡º /æŸ¥è¯¢    :f   æ˜¾ç¤ºæ–‡ä»¶åå’Œå½“å‰è¡Œæ•°</code></pre><h4 id="3-æœç´¢å‘½ä»¤"><a href="#3-æœç´¢å‘½ä»¤" class="headerlink" title="3. æœç´¢å‘½ä»¤"></a>3. æœç´¢å‘½ä»¤</h4><pre><code class="hljs shell">locate [filename]    # ç³»ç»Ÿå…¨å±€èŒƒå›´å†…å®šä½æ–‡ä»¶,  ä»/var.lib/mlocateæ•°æ®åº“ä¸­æŸ¥æ‰¾æ–‡ä»¶ï¼Œ                     # ä½†æ˜¯è¯¥æ•°æ®åº“æ¯å¤©æ›´æ–°ä¸€æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥é¦–å…ˆä½¿ç”¨sudo updatedbæ›´æ–°ä¸€ä¸‹æ•°æ®åº“ï¼Œ                     # æ‰èƒ½æŸ¥è¯¢æœ€è¿‘çš„æ–‡ä»¶        whereis [commands]    æœç´¢å‘½ä»¤ä½ç½®(å‘½ä»¤+å¸®åŠ©æ–‡æ¡£)   which  æœç´¢å‘½ä»¤ä½ç½®(å‘½ä»¤+åˆ«å)find  [search_file]  [search_condition]      æœç´¢æ–‡ä»¶ï¼Œåº”è¯¥é¿å…å¤§èŒƒå›´æœç´¢<span class="hljs-meta">#</span><span class="bash"> ç»“åˆé€šé…ç¬¦ä½¿ç”¨ï¼š * ä»»æ„å†…å®¹ ? ä»»æ„ä¸€ä¸ªå­—ç¬¦ []    ä»»æ„ä¸€ä¸ª[]å†…çš„å†…å®¹ </span>grep [search_string]  [search_file]     -v åå‘æœç´¢  -i å¿½ç•¥å¤§å°å†™</code></pre><h4 id="4-ç£ç›˜ä¸å‹ç¼©-è§£å‹ç¼©å‘½ä»¤-F"><a href="#4-ç£ç›˜ä¸å‹ç¼©-è§£å‹ç¼©å‘½ä»¤-F" class="headerlink" title="4. ç£ç›˜ä¸å‹ç¼©/è§£å‹ç¼©å‘½ä»¤ [F]"></a>4. ç£ç›˜ä¸å‹ç¼©/è§£å‹ç¼©å‘½ä»¤ [F]</h4><h5 id="1-æŸ¥çœ‹ç£ç›˜ç©ºé—´"><a href="#1-æŸ¥çœ‹ç£ç›˜ç©ºé—´" class="headerlink" title="(1) æŸ¥çœ‹ç£ç›˜ç©ºé—´"></a>(1) æŸ¥çœ‹ç£ç›˜ç©ºé—´</h5><pre><code class="hljs shell">du -h --max-depth=1 #ã€€æ˜¾ç¤ºå½“å‰ç›®å½•ç£ç›˜å ç”¨, --max-depth=1 æ˜¾ç¤ºçº§åˆ«df -h  # æ£€æŸ¥linuxæœåŠ¡å™¨çš„æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µ<span class="hljs-meta">#</span><span class="bash"> -h ä»¥äººä»¬è¾ƒæ˜“è¯»çš„å®¹é‡æ ¼å¼ (G/M) æ˜¾ç¤º</span></code></pre><h5 id="2-å‹ç¼©ä¸è§£å‹ç¼©"><a href="#2-å‹ç¼©ä¸è§£å‹ç¼©" class="headerlink" title="(2) å‹ç¼©ä¸è§£å‹ç¼©"></a>(2) å‹ç¼©ä¸è§£å‹ç¼©</h5><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> .zip</span>zip  å‹ç¼©æ–‡ä»¶å.zip  æºæ–‡ä»¶   # å‹ç¼© zip æ–‡ä»¶  [-r] å‹ç¼©ç›®å½•unzip å‹ç¼©æ–‡ä»¶.zip   # è§£å‹<span class="hljs-meta">#</span><span class="bash"> .tar.gz</span>tar -zcvf file.tar.gz æºç›®å½•  å‹ç¼©  [-c] æ‰“åŒ…  [-v] æ˜¾ç¤ºè¿‡ç¨‹ [-f] æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶åtar -zxvf file.tar.gz    è§£å‹<span class="hljs-meta">#</span><span class="bash"> .tar.bz2</span>tar -jcvf file.tar.gz æºç›®å½•   å‹ç¼©  [-c] æ‰“åŒ…  [-v] æ˜¾ç¤ºè¿‡ç¨‹ [-f] æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶åtar -jxcf file.tar.gz   è§£å‹</code></pre><h4 id="5-ç³»ç»Ÿä¿¡æ¯"><a href="#5-ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="5. ç³»ç»Ÿä¿¡æ¯"></a>5. ç³»ç»Ÿä¿¡æ¯</h4><h5 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h5><pre><code class="hljs shell">date   #  æ˜¾ç¤ºå½“å‰æ—¶é—´å’Œæ—¥æœŸ    cal   # æ˜¾ç¤ºå½“æœˆæ—¥å†       uptime  # æ˜¾ç¤ºç³»ç»Ÿå¼€æœºæ—¶é—´</code></pre><h5 id="ç³»ç»Ÿ"><a href="#ç³»ç»Ÿ" class="headerlink" title="ç³»ç»Ÿ"></a>ç³»ç»Ÿ</h5><pre><code class="hljs shell">lsb_release [-a]    # æŸ¥çœ‹linux ç‰ˆæœ¬   uname   [-a]  # æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬  last # æŸ¥çœ‹ç™»å½•ä¿¡æ¯whoami   # æŸ¥çœ‹å½“å‰ç”¨æˆ·ålsof  # åˆ—å‡ºè¿›ç¨‹è°ƒç”¨æˆ–è€…æ‰“å¼€çš„æ–‡ä»¶ä¿¡æ¯vmstat [åˆ·æ–°å»¶æ—¶  åˆ·æ–°æ¬¡æ•°]  # æŸ¥çœ‹ç³»ç»Ÿèµ„æº w # æŸ¥çœ‹ç”¨æˆ·ç™»å½•ä¿¡æ¯</code></pre><h5 id="ç¡¬ä»¶"><a href="#ç¡¬ä»¶" class="headerlink" title="ç¡¬ä»¶"></a>ç¡¬ä»¶</h5><pre><code class="hljs shell">cat /proc/cpuinfo     #  æŸ¥çœ‹CPU ä¿¡æ¯  cat /proc/meminfo     # æŸ¥çœ‹å†…å­˜ä¿¡æ¯df   # æ˜¾ç¤ºç£ç›˜å ç”¨æƒ…å†µ    [-h] æŒ‰ç…§äººä»¬å¸¸è§çš„ KB,MB,GB æ ¼å¼æ˜¾ç¤ºdu   # æ˜¾ç¤ºç›®å½•ç©ºé—´å ç”¨æƒ…å†µ    [-h] æŒ‰ç…§äººä»¬å¸¸è§çš„ KB,MB,GB æ ¼å¼æ˜¾ç¤º   [--max-depth]  æŒ‡å®šæ˜¾ç¤ºç›®å½•æ·±åº¦nvidia-smi  #  æ˜¾ç¤ºnvidia æ˜¾å¡çš„è¿è¡Œæƒ…å†µ</code></pre><h4 id="6-è¿›ç¨‹ç®¡ç†"><a href="#6-è¿›ç¨‹ç®¡ç†" class="headerlink" title="6. è¿›ç¨‹ç®¡ç†"></a>6. è¿›ç¨‹ç®¡ç†</h4><pre><code class="hljs shell">ps    # æ˜¾ç¤ºå½“å‰æ´»åŠ¨è¿›ç¨‹   [aux]  ä»¥BSDç³»ç»Ÿæ ¼å¼æ˜¾ç¤º  [-ef] ä»¥linuxæ ‡å‡†æ ¼å¼æ˜¾ç¤ºtop    # æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹  kill pid   # æ€æ­»è¿›ç¨‹id  [-9]  å¼ºåˆ¶æ€æ­»killall [è¿›ç¨‹å]  # æŒ‰ç…§è¿›ç¨‹åæ€æ­»è¿›ç¨‹    pkill [è¿›ç¨‹å]  # æŒ‰ç…§è¿›ç¨‹åæ€æ­»è¿›ç¨‹kill %[job num]  # æŒ‰ç…§å·¥ä½œå·æ€æ­»è¿›ç¨‹bg     # åˆ—å‡ºå·²åœæ­¢æˆ–è€…åå°çš„è¿›ç¨‹       fg     # å°†æœ€è¿‘çš„ä½œä¸šå¸¦åˆ°å‰å°   fg  n  # å°†ä½œä¸šnå¸¦åˆ°å‰å° [command] &amp;  #  æŠŠå‘½ä»¤æ”¾å…¥åå°ï¼Œå¹¶åœ¨åå°æ‰§è¡Œ  jobs  # æ˜¾ç¤ºåå°è¿›ç¨‹[command];[Enter];[ctrl] + z  # æŠŠå‘½ä»¤æ”¾åœ¨åå°ï¼Œå¹¶æš‚åœ</code></pre><h4 id="7-æ–‡ä»¶æƒé™ä¸ç”¨æˆ·ç®¡ç†-F"><a href="#7-æ–‡ä»¶æƒé™ä¸ç”¨æˆ·ç®¡ç†-F" class="headerlink" title="7. æ–‡ä»¶æƒé™ä¸ç”¨æˆ·ç®¡ç†  [F]"></a>7. æ–‡ä»¶æƒé™ä¸ç”¨æˆ·ç®¡ç†  [F]</h4><h5 id="1-æ›´æ”¹æ–‡ä»¶æƒé™-ï¼š"><a href="#1-æ›´æ”¹æ–‡ä»¶æƒé™-ï¼š" class="headerlink" title="(1) æ›´æ”¹æ–‡ä»¶æƒé™ ï¼š"></a>(1) æ›´æ”¹æ–‡ä»¶æƒé™ ï¼š</h5><pre><code class="hljs shell">chmod [u|g|o][+|-|=][r|w|x]   file|dir    chmod octal file|dir<span class="hljs-meta">#</span><span class="bash"> u ç”¨æˆ·    g  æ‰€å±ç¾¤ç»„   o å…¶ä»–      r=<span class="hljs-built_in">read</span>(4)     w=write(2)      x=execute(1)</span></code></pre><h5 id="2-ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†"><a href="#2-ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†" class="headerlink" title="(2) ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†"></a>(2) ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†</h5><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> user</span>useradd -m username   # æ–°å»ºç”¨æˆ·   [-m] å»ºç«‹ç”¨æˆ·å®¶ç›®å½•passwd username       # ä¸ºæ–°å»ºç”¨æˆ·è®¾ç½®å¯†ç su [username]         # åˆ‡æ¢ç”¨æˆ·ï¼Œ ç¼ºçœåˆ™ä¸º root ç”¨æˆ·userdel -r username   # åˆ é™¤ç”¨æˆ·  [-r] åˆ é™¤ç”¨æˆ·å®¶ç›®å½•more /etc/passwd  # æŸ¥çœ‹æ‰€ç”¨ç”¨æˆ·åŠå…¶æƒé™</code></pre><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> groups</span>groups                           # æŸ¥çœ‹ç”¨æˆ·æ‰€å±äºçš„ç»„usermod -G groupNmame username   # å°†ç”¨æˆ·åŠ å…¥åˆ°ç»„usermod -g groupName username    # å˜æ›´ç”¨æˆ·æ‰€å±çš„æ ¹ç»„more /etc/group  # æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ç»„åŠå…¶æƒé™</code></pre><pre><code class="hljs shell">chown username dirOrFile  # æ›´æ”¹æ–‡ä»¶çš„æ‹¥æœ‰è€…   -R æ–‡ä»¶å¤¹</code></pre><h5 id="3-ç¯å¢ƒå˜é‡"><a href="#3-ç¯å¢ƒå˜é‡" class="headerlink" title="(3) ç¯å¢ƒå˜é‡"></a>(3) ç¯å¢ƒå˜é‡</h5><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> bashrcä¸profileéƒ½ç”¨äºä¿å­˜ç”¨æˆ·çš„ç¯å¢ƒä¿¡æ¯</span><span class="hljs-meta">#</span><span class="bash"> profileåªèƒ½åœ¨ç™»å…¥çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ï¼›</span><span class="hljs-meta">#</span><span class="bash"> bashrc åœ¨æ¯æ¬¡æ‰§è¡Œ <span class="hljs-built_in">source</span> æ—¶éƒ½ä¼šä½¿ç”¨å®ƒä¸€æ¬¡</span>source ~/.bashrc</code></pre><h4 id="8-ç½‘ç»œä¼ è¾“-F"><a href="#8-ç½‘ç»œä¼ è¾“-F" class="headerlink" title="8. ç½‘ç»œä¼ è¾“ [F]"></a>8. ç½‘ç»œä¼ è¾“ [F]</h4><pre><code class="hljs shell">netstat         # æŸ¥çœ‹ç½‘ç»œçŠ¶æ€ -t TCP ç«¯å£  -u UDP åè®®ç«¯å£   -l åœ¨ç›‘å¬çŠ¶æ€  -a æ‰€æœ‰ç«¯å£lsof -i:[Port]  # åˆ—å‡ºç«¯å£å ç”¨æƒ…å†µipconfig        # æŸ¥çœ‹ä¸é…ç½®ç½‘ç»œçŠ¶æ€route -n        # æŸ¥çœ‹è·¯ç”±çŠ¶æ€traceroute IP    # æ¢æµ‹å‰å¾€IPçš„è·¯ç”±è·¯å¾„ssh [-P port] user@hostname    # ä»¥userç”¨æˆ·èº«ä»½è¿æ¥åˆ° hostname, ç«¯å£ä¸º portwget file  # ä¸‹è½½file          -c è¡¨ç¤ºæ–­ç‚¹ç»­ä¼   -o æŒ‡å®šæ—¥å¿—æ–‡ä»¶scp  -r  src/path   dst/path     #  ä¸‹è½½å’Œä¸Šä¼ æ–‡ä»¶æˆ–ç›®å½•   -P ç«¯å£host domain # domain -&gt; IPhost IP # IP -&gt; domainping host    #   æ¢æµ‹æŒ‡å®šIPæˆ–è€…åŸŸåçš„ç½‘ç»œçŠ¶å†µ   -c æŒ‡å®šæ¬¡æ•°</code></pre><h4 id="9-å®‰è£…å¸è½½"><a href="#9-å®‰è£…å¸è½½" class="headerlink" title="9. å®‰è£…å¸è½½"></a>9. å®‰è£…å¸è½½</h4><h5 id="æºä»£ç å®‰è£…"><a href="#æºä»£ç å®‰è£…" class="headerlink" title="æºä»£ç å®‰è£…"></a>æºä»£ç å®‰è£…</h5><pre><code class="hljs shell">./configure # è½¯ä»¶é…ç½®å’Œæ£€æŸ¥make # ç¼–è¯‘make install   # å®‰è£…</code></pre><h5 id="äºŒè¿›åˆ¶åŒ…å®‰è£…-ï¼š-apt-get-ubuntu-deb-package"><a href="#äºŒè¿›åˆ¶åŒ…å®‰è£…-ï¼š-apt-get-ubuntu-deb-package" class="headerlink" title="äºŒè¿›åˆ¶åŒ…å®‰è£… ï¼š apt-get (ubuntu - deb package)"></a>äºŒè¿›åˆ¶åŒ…å®‰è£… ï¼š apt-get (ubuntu - deb package)</h5><pre><code class="hljs shell">apt-get install [package_name]      ä½¿ç”¨ apt-getå®‰è£…åŒ…apt-get remove [package_name]    ä½¿ç”¨ apt-getå¸è½½åŒ…</code></pre><h5 id="ç§˜é’¥ç”Ÿæˆ"><a href="#ç§˜é’¥ç”Ÿæˆ" class="headerlink" title="ç§˜é’¥ç”Ÿæˆ"></a>ç§˜é’¥ç”Ÿæˆ</h5><pre><code class="hljs shell">ssh-keygen -f key_name   -C &quot;description&quot;</code></pre><h4 id="11-å¸¸è§çš„å¼€å…³æœºå‘½ä»¤"><a href="#11-å¸¸è§çš„å¼€å…³æœºå‘½ä»¤" class="headerlink" title="11. å¸¸è§çš„å¼€å…³æœºå‘½ä»¤"></a>11. å¸¸è§çš„å¼€å…³æœºå‘½ä»¤</h4><h5 id="å…³æœºå‘½ä»¤"><a href="#å…³æœºå‘½ä»¤" class="headerlink" title="å…³æœºå‘½ä»¤"></a>å…³æœºå‘½ä»¤</h5><pre><code class="hljs shell">shutdown -h now   # å…³æœºï¼ˆä¿å­˜å½“å‰æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œç›¸å¯¹å®‰å…¨ï¼‰âœ¨<span class="hljs-meta">#</span><span class="bash"> å…¶å®ƒï¼š </span>halt         poweroff        init 0</code></pre><h5 id="é‡å¯å‘½ä»¤"><a href="#é‡å¯å‘½ä»¤" class="headerlink" title="é‡å¯å‘½ä»¤"></a>é‡å¯å‘½ä»¤</h5><pre><code class="hljs shell">shutdown -h now      # é‡å¯ (ä¿å­˜å½“å‰æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œç›¸å¯¹å®‰å…¨)  âœ¨rebootinit 6</code></pre><h5 id="é€€å‡ºç™»å½•ï¼š"><a href="#é€€å‡ºç™»å½•ï¼š" class="headerlink" title="é€€å‡ºç™»å½•ï¼š"></a>é€€å‡ºç™»å½•ï¼š</h5><pre><code class="hljs shell">logout  # å»ºè®®æ¯æ¬¡ç¦»å¼€æœåŠ¡å™¨çš„æ—¶å€™é€€å‡ºç™»å½• âœ¨</code></pre><h4 id="12-çª—å£ç®¡ç†å‘½ä»¤"><a href="#12-çª—å£ç®¡ç†å‘½ä»¤" class="headerlink" title="12.  çª—å£ç®¡ç†å‘½ä»¤"></a>12.  çª—å£ç®¡ç†å‘½ä»¤</h4><h5 id="æ ‡ç­¾ç®¡ç†"><a href="#æ ‡ç­¾ç®¡ç†" class="headerlink" title="æ ‡ç­¾ç®¡ç†"></a>æ ‡ç­¾ç®¡ç†</h5><pre><code class="hljs shell">[Ctrl] + [Shift]  + T   #  æ–°å»ºä¸€ä¸ªternimal æ ‡ç­¾ [Ctrl] + [Shift] + W    #  å…³é—­ terminal æ ‡ç­¾ Ctrl + PD / Ctrl + PU   #  åˆ‡æ¢ terminal æ ‡ç­¾é¡µ Alt+n   #   åˆ‡æ¢åˆ°æ ‡ç­¾é¡µn</code></pre><h5 id="çª—å£ç®¡ç†"><a href="#çª—å£ç®¡ç†" class="headerlink" title="çª—å£ç®¡ç†"></a>çª—å£ç®¡ç†</h5><pre><code class="hljs shell">Ctrl + Shift + N    # æ–°å»ºterminalçª—å£Ctrl + shift + Q     # å…³é—­ terminal çª—å£  Alt + Tab    # åœ¨çª—å£ä¹‹é—´åˆ‡æ¢F11    # çª—å£å…¨å±(exit é€€å‡º)</code></pre><h4 id="13-å…¶å®ƒ"><a href="#13-å…¶å®ƒ" class="headerlink" title="13. å…¶å®ƒ"></a>13. å…¶å®ƒ</h4><h5 id="1-å¸¸è§çš„çƒ­é”®"><a href="#1-å¸¸è§çš„çƒ­é”®" class="headerlink" title="(1) å¸¸è§çš„çƒ­é”®"></a>(1) å¸¸è§çš„çƒ­é”®</h5><pre><code class="hljs shell">[Ctrl] + c  # åœæ­¢å½“å‰å‘½ä»¤     [Ctrl] + d  # æ³¨é”€å½“å‰ä¼šè¯     [Ctrl]+z   # ç»“æŸäº¤äº’  [â†‘]         # é‡å¤ä¸Šä¸€æ¡å‘½ä»¤         [Tab]       # å‘½ä»¤è¡¥é½/æ–‡ä»¶è¡¥é½</code></pre><h5 id="2-å¸®åŠ©å‘½ä»¤ï¼š"><a href="#2-å¸®åŠ©å‘½ä»¤ï¼š" class="headerlink" title="(2) å¸®åŠ©å‘½ä»¤ï¼š"></a>(2) å¸®åŠ©å‘½ä»¤ï¼š</h5><pre><code class="hljs shell">man [cmd]  # æŸ¥è¯¢å‘½ä»¤commandçš„è¯´æ˜æ–‡æ¡£   [n]  æŒ‡å®šåˆ†ç±»  -k å…³é”®å­—[command] --help info [cmd]whatis [cmd] # ç®€è¦è¯´æ˜å‘½ä»¤çš„ä½œç”¨which [cmd] # æŸ¥çœ‹ç¨‹åºçš„binaryæ–‡ä»¶æ‰€åœ¨è·¯å¾„whereis [cmd] # æŸ¥çœ‹ç¨‹åºçš„æœç´¢è·¯å¾„sudo ldconfigsource history  # æŸ¥çœ‹å†å²è®°å½•</code></pre><h5 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h5><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> é‡å®šå‘</span><span class="hljs-meta">&gt;</span><span class="bash">   <span class="hljs-comment"># æ ‡å‡†è¾“å‡ºé‡å®šå‘(è¦†ç›–)  </span></span><span class="hljs-meta">2&gt;</span><span class="bash">  <span class="hljs-comment"># æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘(è¦†ç›–)   </span></span><span class="hljs-meta">&gt;</span><span class="bash">&gt;  <span class="hljs-comment"># æ ‡å‡†è¾“å‡ºé‡å®šå‘(è¿½åŠ ) </span></span><span class="hljs-meta">2&gt;</span><span class="bash">&gt; <span class="hljs-comment"># æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘(è¿½åŠ ) </span></span>[command] &gt;&gt; [file1] 2&gt;&gt; [file2] # å°†æ­£ç¡®è¾“å‡ºè¿½åŠ åˆ°file1ï¼Œé”™è¯¯è¾“å‡ºè¿½åŠ åˆ°file2<span class="hljs-meta">#</span><span class="bash"> å¤šå‘½ä»¤é¡ºåºæ‰§è¡Œ:     </span>;  # æ— å…³è”é¡ºåºæ‰§è¡Œ   ;        ä¸  &amp;&amp;        æˆ–  ||&amp;&amp; # ä¸||  # æˆ–|   # å°†å‘½ä»¤1çš„æ­£ç¡®è¾“å‡ºä½œä¸ºå‘½ä»¤2 çš„è¾“å…¥</code></pre><p>é€šç”¨çš„å‚æ•°</p><pre><code class="hljs shell">-a  # æ‰€æœ‰ all    -l  # é•¿æ ¼å¼ long-r  # é€’å½’  recursive-h  # äººç±»å¯è¯» human-t  # ç±»å‹ type</code></pre><p>å‚è€ƒèµ„æ–™ï¼š</p><ol><li><p><a href="https://fosswire.com/post/2007/08/unixlinux-command-cheat-sheet/">Linux Command cheatsheet</a></p></li><li><p><a href="http://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/index.html">http://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/index.html</a></p></li><li><p><a href="https://github.com/chassing/linux-sysadmin-interview-questions">https://github.com/chassing/linux-sysadmin-interview-questions</a></p></li><li><p><a href="http://www.imooc.com/course/programdetail/pid/45">http://www.imooc.com/course/programdetail/pid/45</a></p></li><li><p><a href="http://billie66.github.io/TLCL/book/">http://billie66.github.io/TLCL/book/</a></p></li></ol>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>git</title>
    <link href="/2018/06/01/Git-usage/"/>
    <url>/2018/06/01/Git-usage/</url>
    
    <content type="html"><![CDATA[<p>Git åŸºæœ¬ç”¨æ³•</p><a id="more"></a><h3 id="1-å®‰è£…å’Œé…ç½®"><a href="#1-å®‰è£…å’Œé…ç½®" class="headerlink" title="1. å®‰è£…å’Œé…ç½®"></a>1. å®‰è£…å’Œé…ç½®</h3><pre><code class="hljs shell">sudo apt-get install git  # å®‰è£… git</code></pre><pre><code class="hljs shell">git config --global user.name &quot;Your Name&quot; # è®¾ç½®ç”¨æˆ·ågit config --global user.email &quot;email@example.com&quot;  # è®¾ç½® email<span class="hljs-meta">#</span><span class="bash">  --global è¡¨ç¤ºç³»ç»Ÿç”¨æˆ·çº§åˆ«ï¼Œä¿å­˜äº  ~/.gitconfig   </span><span class="hljs-meta">#</span><span class="bash">  ç¼ºçœåˆ™ä¸ºé¡¹ç›®çº§åˆ«/ä»“åº“çº§åˆ«ï¼Œ ä¿å­˜äºå½“å‰ç›®å½•ä¸‹çš„ã€€.git/config</span></code></pre><pre><code class="hljs shell">ssh-keygen -t rsa -b 4096 -C &quot;your_email@domain.com&quot; <span class="hljs-meta">#</span><span class="bash"> ç”Ÿæˆç§˜é’¥å¯¹ï¼Œ å…¬é’¥æ”¾git, ç§é’¥æ”¾æœ¬åœ°(ä¸€èˆ¬æ”¾ç½®åœ¨ ~/.ssh)</span></code></pre><h3 id="2-åŸºæœ¬ç”¨æ³•"><a href="#2-åŸºæœ¬ç”¨æ³•" class="headerlink" title="2. åŸºæœ¬ç”¨æ³•"></a>2. åŸºæœ¬ç”¨æ³•</h3><p><img src="/2018/06/01/Git-usage/git1.jpg" alt></p><p>åŸºæœ¬çš„æ¦‚å¿µï¼š</p><p><strong>HEAD</strong>: åœ¨ Git ä¸­ï¼ŒHEADæŒ‡é’ˆæ˜¯ä¸€ä¸ªæŒ‡å‘ä½ æ­£åœ¨å·¥ä½œä¸­çš„æœ¬åœ°åˆ†æ”¯çš„æŒ‡é’ˆã€‚</p><p><strong>master</strong>ï¼šåˆ†æ”¯å¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹æ®Šåˆ†æ”¯ã€‚ å®ƒå°±è·Ÿå…¶å®ƒåˆ†æ”¯å®Œå…¨æ²¡æœ‰åŒºåˆ«ã€‚ ä¹‹æ‰€ä»¥å‡ ä¹æ¯ä¸€ä¸ªä»“åº“éƒ½æœ‰ master åˆ†æ”¯ï¼Œæ˜¯å› ä¸º git init å‘½ä»¤é»˜è®¤åˆ›å»ºå®ƒï¼Œå¹¶ä¸”å¤§å¤šæ•°äººéƒ½æ‡’å¾—å»æ”¹åŠ¨å®ƒã€‚<br><strong>origin</strong>ï¼šæ˜¯å½“ä½ è¿è¡Œ git clone æ—¶é»˜è®¤çš„è¿œç¨‹ä»“åº“åå­—ã€‚</p><p><strong>Workspace</strong>ï¼šå·¥ä½œåŒº                                               <strong>Index / Stage</strong>ï¼šæš‚å­˜åŒº<br><strong>Repository</strong>ï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰                    <strong>Remote</strong>ï¼šè¿œç¨‹ä»“åº“</p><pre><code class="hljs shell">git init  # å½“å‰ç›®å½•ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª.gitçš„ç›®å½•ï¼Œç”¨æ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“</code></pre><pre><code class="hljs shell">git add &lt;filename&gt; # æ·»åŠ æ–‡ä»¶git rm &lt;filename&gt;  # åˆ é™¤æ–‡ä»¶   -r åˆ é™¤æ–‡ä»¶å¤¹git commit -m &quot;wrote a commit msg&quot;  #ã€€ä»æš‚å­˜åŒºæäº¤åˆ°æœ¬åœ°ä»“åº“git rm --cached &lt;filename&gt;  # èˆå¼ƒæš‚å­˜åŒºå†…å®¹git push origin master #ã€€ä»æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“</code></pre><pre><code class="hljs shell">git clone /path/to/repository  # åˆ›å»ºä¸€ä¸ªè¿œç¨‹ä»“åº“çš„æœ¬åœ°å…‹éš†ç‰ˆæœ¬git clone usename@host:/path/to/repository # è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»“åº“git checkout -- &lt;filename&gt;  # æ›¿æ¢æœ¬åœ°æ”¹åŠ¨ï¼Œã€€å°†ä»“åº“ä¸­çš„æ–‡ä»¶æ›¿æ¢æ‰å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt; ã€€# å–å›è¿œç¨‹ä¸»æœºæŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶</code></pre><pre><code class="hljs shell">git status  # æ˜¾ç¤ºå·¥ä½œç›®å½•å’Œæš‚å­˜åŒºçš„çŠ¶æ€ï¼ˆæ˜¾ç¤ºæ‰€åœ¨åˆ†æ”¯ã€å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„çŠ¶æ€ï¼‰</code></pre><h3 id="3-ç‰ˆæœ¬å›é€€å’Œå‰è¿›"><a href="#3-ç‰ˆæœ¬å›é€€å’Œå‰è¿›" class="headerlink" title="3. ç‰ˆæœ¬å›é€€å’Œå‰è¿›"></a>3. ç‰ˆæœ¬å›é€€å’Œå‰è¿›</h3><pre><code class="hljs shell">git log # æŸ¥çœ‹æäº¤å†å²(åŒ…æ‹¬ã€€ID, author, dataç­‰ä¿¡æ¯)  ï¼ƒã€€--pretty=oneline  ä¸€æ¡æ—¥å¿—åªæ˜¾ç¤ºä¸€è¡Œ    --online æ›´åŠ ç®€æ´çš„æ–¹å¼æ˜¾ç¤ºgit reflog # æ˜¾ç¤ºç‰ˆæœ¬ç§»åŠ¨æ­¥æ•° HEAD@&#123;ç§»åŠ¨åˆ°å½“å‰ç‰ˆæœ¬éœ€è¦çš„æ­¥æ•°&#125;</code></pre><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> ç‰ˆæœ¬å›é€€ä¸å‰è¿›</span>git reset --hard Index_value # åŸºäºç´¢å¼•å€¼ è¿›è¡Œç‰ˆæœ¬å›é€€å’Œå‰è¿›<span class="hljs-meta">#</span><span class="bash"> --soft ä»…ä»…åœ¨æœ¬åœ°åº“ç§»åŠ¨ HEAD æŒ‡é’ˆ  ã€€ã€€</span><span class="hljs-meta">#</span><span class="bash"> --mixed åœ¨æœ¬åœ°åº“ç§»åŠ¨ HEAD æŒ‡é’ˆï¼Œ å¹¶é‡ç½®æš‚å­˜åŒº</span><span class="hljs-meta">#</span><span class="bash"> --hard åœ¨æœ¬åœ°åº“ç§»åŠ¨HEAD æŒ‡é’ˆï¼Œå¹¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒº</span>git reset --hard HEAD # èˆå¼ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹ï¼Œç›´æ¥ç”¨æœ¬åœ°åº“æ›¿æ¢</code></pre><pre><code class="hljs shell">git diff filename # é»˜è®¤æ¯”è¾ƒçš„æ˜¯å·¥ä½œåŒºå’Œæš‚å­˜åŒºgit diff [HEAD] filename # æ¯”è¾ƒå·¥ä½œåŒºå’Œæœ¬åœ°åº“[HEAD]ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹[HEAD]ä¸å†å²è®°å½•è¿›è¡Œæ¯”è¾ƒ</code></pre><h3 id="4-åˆ†æ”¯ç®¡ç†"><a href="#4-åˆ†æ”¯ç®¡ç†" class="headerlink" title="4. åˆ†æ”¯ç®¡ç†"></a>4. åˆ†æ”¯ç®¡ç†</h3><p><img src="/2018/06/01/Git-usage/gitflow.png" alt></p><p>å…¶ä¸­æ¶‰åŠåˆ°çš„ä¸»è¦åˆ†æ”¯ç±»å‹æœ‰ï¼š</p><ul><li><p><strong>masteråˆ†æ”¯</strong>ï¼Œå³ä¸»åˆ†æ”¯ã€‚ä»»ä½•é¡¹ç›®éƒ½å¿…é¡»æœ‰ä¸ªè¿™ä¸ªåˆ†æ”¯ã€‚<strong>å¯¹é¡¹ç›®è¿›è¡Œtagæˆ–å‘å¸ƒç‰ˆæœ¬ç­‰æ“ä½œï¼Œéƒ½å¿…é¡»åœ¨è¯¥åˆ†æ”¯ä¸Šè¿›è¡Œ</strong>ã€‚</p></li><li><p><strong>developåˆ†æ”¯</strong>ï¼Œå³å¼€å‘åˆ†æ”¯ï¼Œ<strong>ä»masteråˆ†æ”¯ä¸Šæ£€å‡º</strong>ã€‚<strong>å›¢é˜Ÿæˆå‘˜ä¸€èˆ¬ä¸ä¼šç›´æ¥æ›´æ”¹è¯¥åˆ†æ”¯ï¼Œè€Œæ˜¯åˆ†åˆ«ä»è¯¥åˆ†æ”¯æ£€å‡ºè‡ªå·±çš„featureåˆ†æ”¯ï¼Œå¼€å‘å®Œæˆåå°†featureåˆ†æ”¯ä¸Šçš„æ”¹åŠ¨mergeå›developåˆ†æ”¯</strong>ã€‚<strong>åŒæ—¶releaseåˆ†æ”¯ç”±æ­¤åˆ†æ”¯æ£€å‡º</strong>ã€‚</p><pre><code class="hljs shell">git branch develop   # ä»å½“å‰åˆ†æ”¯ä¸Šæ–°å»ºdevelopåˆ†æ”¯git checkout develop    # æ£€å‡ºdevelopåˆ†æ”¯<span class="hljs-meta">#</span><span class="bash"> ... æ­¤å¤„å¯è¿›è¡ŒåŠŸèƒ½å¼€å‘ï¼Œå¹¶addå’Œcommitåˆ°developåˆ†æ”¯</span>git push origin develop    # æ¨é€developåˆ†æ”¯åˆ°è¿œç«¯çš„origin</code></pre></li><li><p><strong>releaseåˆ†æ”¯</strong>ï¼Œå³å‘å¸ƒåˆ†æ”¯ï¼Œ<strong>ä»developåˆ†æ”¯ä¸Šæ£€å‡º,è¯¥åˆ†æ”¯ç”¨ä½œå‘ç‰ˆå‰çš„æµ‹è¯•ï¼Œå¯è¿›è¡Œç®€å•çš„bugä¿®å¤</strong>ã€‚å¦‚æœbugä¿®å¤æ¯”è¾ƒå¤æ‚ï¼Œå¯mergeå›developåˆ†æ”¯åç”±å…¶ä»–åˆ†æ”¯è¿›è¡Œbugä¿®å¤ã€‚æ­¤åˆ†æ”¯æµ‹è¯•å®Œæˆåï¼Œéœ€è¦åŒæ—¶mergeåˆ°masterå’Œdevelopåˆ†æ”¯ä¸Šã€‚</p></li><li><p><strong>featureåˆ†æ”¯</strong>ï¼Œå³åŠŸèƒ½åˆ†æ”¯ï¼Œ<strong>ä»developåˆ†æ”¯ä¸Šæ£€å‡ºã€‚å›¢é˜Ÿæˆå‘˜ä¸­æ¯ä¸ªäººéƒ½ç»´æŠ¤ä¸€ä¸ªè‡ªå·±çš„featureåˆ†æ”¯ï¼Œå¹¶è¿›è¡Œå¼€å‘å·¥ä½œï¼Œå¼€å‘å®Œæˆåå°†æ­¤åˆ†æ”¯mergeå›developåˆ†æ”¯</strong>ã€‚æ­¤åˆ†æ”¯ä¸€èˆ¬ç”¨æ¥å¼€å‘æ–°åŠŸèƒ½æˆ–è¿›è¡Œé¡¹ç›®ç»´æŠ¤ç­‰ã€‚</p><pre><code class="hljs shell">git clone /path/to/repositorygit checkout developã€€# æ£€å‡º developåˆ†æ”¯git checkout -b feature-hu develop    # ä»developåˆ†æ”¯æ–°å»ºå¹¶æ£€å‡ºfeatureåˆ†æ”¯... # è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€äº›åŠŸèƒ½å¼€å‘ï¼Œå¹¶ä¸æ–­çš„addå’Œcommitgit checkout develop    # åˆ‡æ¢å›developåˆ†æ”¯git pull origin develop    # æ›´æ–°è¿œç«¯ä»£ç ï¼Œçœ‹developåˆ†æ”¯æ˜¯å¦æœ‰æ›´æ–°ï¼ˆæ— æ›´æ–°ï¼‰git checkout feature-hu    # åˆ‡æ¢å›featureåˆ†æ”¯git rebase develop    # åˆå¹¶developåˆ†æ”¯åˆ°featureåˆ†æ”¯ï¼Œå¹¶è§£å†³å†²çªï¼ˆæ— å†²çªï¼‰git checkout develop    # åˆ‡æ¢å›developåˆ†æ”¯git merge --no-ff feature-hu    # åˆå¹¶featureåˆ†æ”¯åˆ°developåˆ†æ”¯git push origin develop   # æ¨é€developåˆ†æ”¯åˆ°è¿œç«¯</code></pre></li><li><p><strong>fixåˆ†æ”¯</strong>ï¼Œå³è¡¥ä¸åˆ†æ”¯ï¼Œ<strong>ç”±developåˆ†æ”¯æ£€å‡ºï¼Œç”¨ä½œbugä¿®å¤</strong>ï¼Œbugä¿®å¤å®Œæˆéœ€mergeå›developåˆ†æ”¯ï¼Œå¹¶å°†å…¶åˆ é™¤ã€‚æ‰€ä»¥è¯¥åˆ†æ”¯å±äºä¸´æ—¶æ€§åˆ†æ”¯ã€‚</p></li><li><p><strong>hotfixåˆ†æ”¯</strong>ï¼Œå³çƒ­è¡¥ä¸åˆ†æ”¯ã€‚å’Œfixåˆ†æ”¯çš„åŒºåˆ«åœ¨äºï¼Œ<strong>è¯¥åˆ†æ”¯ç”±masteråˆ†æ”¯æ£€å‡ºï¼Œè¿›è¡Œçº¿ä¸Šç‰ˆæœ¬çš„bugä¿®å¤</strong>ï¼Œä¿®å¤å®Œæˆåmergeå›masteråˆ†æ”¯ï¼Œå¹¶mergeåˆ°developåˆ†æ”¯ä¸Šï¼Œmergeå®Œæˆåä¹Ÿå¯ä»¥å°†å…¶åˆ é™¤ï¼Œä¹Ÿå±äºä¸´æ—¶æ€§åˆ†æ”¯ã€‚</p><pre><code class="hljs shell">git checkout master    # åˆ‡æ¢å›masteråˆ†æ”¯git checkout -b hotfix master    # æ–°å»ºhotfixåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯......                 # åšä¸€äº›bugä¿®å¤å·¥ä½œgit checkout master    # åˆ‡æ¢å›masteråˆ†æ”¯git merge --no-ff hotfix    # åˆå¹¶hotfixåˆ†æ”¯ï¼Œæ­¤æ—¶bugå·²è¢«ä¿®å¤ï¼ˆæ— å†²çªï¼‰git tag v0.2.1    # æ–°å»ºtag v0.2git push origin master    # æ¨é€masteråˆ†æ”¯ä»£ç åˆ°è¿œç«¯git push origin --tags    # æ¨é€tagåˆ°è¿œç«¯</code></pre></li></ul><p>å¸¸è§åˆ†æ”¯ç®¡ç†å‘½ä»¤å°ç»“ï¼š</p><pre><code class="hljs shell">git branch -v  # æŸ¥çœ‹åˆ†æ”¯git branch &lt;branch_name&gt;   # ä»å½“å‰åˆ†æ”¯æ–°å»ºä¸€ä¸ªåˆ†æ”¯git checkout &lt;branch_name&gt;   # åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯git checkout -b &lt;branch_name&gt;  # æ–°å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ <span class="hljs-meta">#</span><span class="bash"> git checkout -b = git branch + git checkout</span>git checkout -d &lt;branch_name&gt; # åˆ é™¤æŒ‡å®šåˆ†æ”¯git push &lt;origin&gt; &lt;branch_name&gt; # æ¨é€æŸä¸ªåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</code></pre><pre><code class="hljs nginx"><span class="hljs-attribute">git</span> merge --<span class="hljs-literal">no</span>-ff &lt;branch_name&gt; <span class="hljs-comment"># å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span>git rebase   <span class="hljs-comment"># </span></code></pre><pre><code class="hljs shell">git tag v0.2 # ä¸ºå½“å‰åˆ†æ”¯æ‰“ taggit push origin --tags # å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“</code></pre><p><strong>å¦‚ä½•è§£å†³å†²çª</strong></p><pre><code class="hljs vala"><span class="hljs-meta"># è§£å†³å†²çª</span><span class="hljs-meta"># step 1: æ‰‹åŠ¨ä¿®æ”¹å†²çªæ–‡ä»¶</span><span class="hljs-meta"># step 2ï¼š git add filename</span><span class="hljs-meta"># step 3: git commit -m &quot;commit message&quot;</span></code></pre><h3 id="5-è¿œç¨‹æ“ä½œ"><a href="#5-è¿œç¨‹æ“ä½œ" class="headerlink" title="5. è¿œç¨‹æ“ä½œ"></a>5. è¿œç¨‹æ“ä½œ</h3><p><img src="/2018/06/01/Git-usage/git5.png" alt></p><h5 id="å›¢é˜Ÿå†…éƒ¨åä½œï¼š"><a href="#å›¢é˜Ÿå†…éƒ¨åä½œï¼š" class="headerlink" title="å›¢é˜Ÿå†…éƒ¨åä½œï¼š"></a>å›¢é˜Ÿå†…éƒ¨åä½œï¼š</h5><pre><code class="hljs shell">git remote add origin https://xxxx.xxxx.xxxx.xxxx  # æŒ‡å®šè¿œç¨‹åº“çš„åˆ«ågit push -u è¿œç¨‹åº“åç§° æœ¬åœ°åº“åç§°git clone https://xxxx.xxxx.xxxx.xxxx   # clone åˆ°æœ¬åœ°åº“git fetch [è¿œç¨‹åœ°å€åˆ«å][è¿œç¨‹åˆ†æ”¯å]  #git merge [è¿œç¨‹åœ°å€åˆ«å/è¿œç¨‹åˆ†æ”¯å] git pull <span class="hljs-meta">#</span><span class="bash"> git fetchæ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰åˆ°æœ¬åœ°ï¼Œç”¨æˆ·åœ¨æ£€æŸ¥äº†ä»¥åå†³å®šæ˜¯å¦åˆå¹¶åˆ°å·¥ä½œæœ¬æœºåˆ†æ”¯ä¸­ã€‚</span><span class="hljs-meta">#</span><span class="bash"> è€Œ git pull åˆ™æ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰ä¸‹æ¥åç›´æ¥åˆå¹¶ï¼Œ</span><span class="hljs-meta">#</span><span class="bash"> å³ï¼šgit pull = git fetch + git merge</span></code></pre><h5 id="è·¨å›¢é˜Ÿåä½œï¼š"><a href="#è·¨å›¢é˜Ÿåä½œï¼š" class="headerlink" title="è·¨å›¢é˜Ÿåä½œï¼š"></a>è·¨å›¢é˜Ÿåä½œï¼š</h5><p>éœ€è¦åœ¨ä»£ç æ‰˜ç®¡ä¸­å¿ƒå®Œæˆ<code>fork</code>ã€<code>pull request</code>ã€ <code>å®¡æ ¸</code>ã€<code>merge</code> ç­‰æ“ä½œ</p><p><img src="/2018/06/01/Git-usage/git6.png" alt></p><h3 id="6-å®‰è£…-GitLab"><a href="#6-å®‰è£…-GitLab" class="headerlink" title="6. å®‰è£… GitLab"></a>6. å®‰è£… GitLab</h3><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å®‰è£…</span><span class="hljs-meta">$</span><span class="bash"> curl -sS http://packages.gitlab.com.cn/install/gitlab-ce/script.deb.sh | sudo bash</span><span class="hljs-meta">$</span><span class="bash"> sudo apt-get install gitlab-ce</span><span class="hljs-meta">#</span><span class="bash"> é…ç½®</span><span class="hljs-meta">$</span><span class="bash"> gitlab-ctl reconfigure </span><span class="hljs-meta">#</span><span class="bash"> å¯åŠ¨</span><span class="hljs-meta">$</span><span class="bash"> gitlab-ctl start </span><span class="hljs-meta">#</span><span class="bash"> åœ¨æµè§ˆå™¨è¾“å…¥å¯¹åº”çš„IPåœ°å€å³å¯è®¿é—®gitlabåå°ï¼Œå¯èƒ½éœ€è¦å…³é—­é˜²ç«å¢™</span><span class="hljs-meta">#</span><span class="bash"> ï¼ˆ1ï¼‰å¯¹rootç”¨æˆ·è®¾ç½®å¯†ç </span><span class="hljs-meta">#</span><span class="bash"> ï¼ˆ2ï¼‰ç™»é™†ï¼šç”¨æˆ·åé»˜è®¤ä¸ºroot  </span><span class="hljs-meta">#</span><span class="bash"> ï¼ˆ3ï¼‰åœ¨åå°è¿›è¡Œæ·»åŠ ç”¨æˆ·ç­‰æ“ä½œã€è®¾ç½®å¯†ç ç­‰æ“ä½œ</span></code></pre><h3 id="7-å…¶ä»–"><a href="#7-å…¶ä»–" class="headerlink" title="7. å…¶ä»–"></a>7. å…¶ä»–</h3><p>ï¼ˆ1ï¼‰ å¦‚ä½•è®¾ç½®ä¸è¢«è¿½è¸ªçš„æ–‡ä»¶<br>     æœ‰äº›æ–‡ä»¶æ˜¯ä¸æƒ³è¢«è¿½è¸ªçš„ï¼Œ å¯ä»¥ä¿®æ”¹  <code>.git/info/exclude</code> æ–‡ä»¶ï¼Œ ä»¥ # å¼€å¤´ï¼Œæ·»åŠ è§„åˆ™å³å¯ã€‚</p><p>ï¼ˆ2ï¼‰server certificate verification failed. CAfile:/etc/ssl/certs/ca-certificates.crt CRLfile: none</p><pre><code class="hljs shell">export GIT_SSL_NO_VERIFY=1</code></pre><h3 id="8-å‚è€ƒèµ„æ–™"><a href="#8-å‚è€ƒèµ„æ–™" class="headerlink" title="8. å‚è€ƒèµ„æ–™"></a>8. å‚è€ƒèµ„æ–™</h3><ul><li><p>git ç®€æ˜æŒ‡å—  <a href="https://rogerdudler.github.io/git-guide/index.zh.html">https://rogerdudler.github.io/git-guide/index.zh.html</a></p></li><li><p>git-scm-zh: <a href="https://git-scm.com/book/zh/v2">https://git-scm.com/book/zh/v2</a></p></li><li>å¸¸è§ã€€UI ç•Œé¢: <a href="https://www.sourcetreeapp.com/">SourceTree</a>      <a href="https://tortoisegit.org/">tortoisegit</a>     <a href="https://www.git-tower.com/mac">Tower</a></li><li>gitflow <a href="https://nvie.com/posts/a-successful-git-branching-model/">https://nvie.com/posts/a-successful-git-branching-model/</a></li><li><p>gitflow å¤‡å¿˜æ¸…å• <a href="https://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html">https://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html</a></p></li><li><p>äº’åŠ¨å¼å­¦ä¹ gitçš„ç½‘ç«™ï¼šã€€<a href="https://learngitbranching.js.org/">https://learngitbranching.js.org/</a></p></li><li>å›¾è§£git:  <a href="https://my.oschina.net/xdev/blog/114383">https://my.oschina.net/xdev/blog/114383</a></li><li>git magic: <a href="http://www-cs-students.stanford.edu/~blynn/gitmagic/intl/zh_cn/index.html">http://www-cs-students.stanford.edu/~blynn/gitmagic/intl/zh_cn/index.html</a></li><li>github help: <a href="https://help.github.com/en">https://help.github.com/en</a></li><li>æœ¬åœ°æ­å»ºGitï¼š <a href="https://about.gitlab.com/">GitLab</a> å’Œã€€<a href="https://github.com/gogs/gogs">dashboard</a></li><li><a href="https://zhuanlan.zhihu.com/p/23478654">å›¾æ–‡è¯¦è§£å¦‚ä½•åˆ©ç”¨Git+Githubè¿›è¡Œå›¢é˜Ÿåä½œå¼€å‘</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Facenetç»†èŠ‚å‰–æ</title>
    <link href="/2018/04/13/Facenet/"/>
    <url>/2018/04/13/Facenet/</url>
    
    <content type="html"><![CDATA[<p>paper facenet &amp; mobilefacenet å®ç°ç»†èŠ‚å‰–æ</p><a id="more"></a><h3 id="äººè„¸è¯†åˆ«é¡¹ç›®-ç»†èŠ‚å‰–æ"><a href="#äººè„¸è¯†åˆ«é¡¹ç›®-ç»†èŠ‚å‰–æ" class="headerlink" title="äººè„¸è¯†åˆ«é¡¹ç›® ç»†èŠ‚å‰–æ"></a>äººè„¸è¯†åˆ«é¡¹ç›® ç»†èŠ‚å‰–æ</h3><h5 id="1-å›¾ç‰‡è¾“å…¥çš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿæœ€åçš„-embedding-æ˜¯å¤šå°‘ï¼Ÿ-ä¸ºä»€ä¹ˆï¼Ÿ"><a href="#1-å›¾ç‰‡è¾“å…¥çš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿæœ€åçš„-embedding-æ˜¯å¤šå°‘ï¼Ÿ-ä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. å›¾ç‰‡è¾“å…¥çš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿæœ€åçš„ embedding æ˜¯å¤šå°‘ï¼Ÿ ä¸ºä»€ä¹ˆï¼Ÿ"></a>1. å›¾ç‰‡è¾“å…¥çš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿæœ€åçš„ embedding æ˜¯å¤šå°‘ï¼Ÿ ä¸ºä»€ä¹ˆï¼Ÿ</h5><p>å›¾ç‰‡è¾“å…¥å¤§å°è®¾ç½®ä¸º 160x160ã€‚whyï¼Ÿ éšç€å›¾ç‰‡åˆ†è¾¨ç‡çš„å¢å¤§ï¼ŒéªŒè¯é›†çš„å‡†ç¡®ç‡ä¼šä¸Šå‡ï¼Œä½†æ˜¯å¯¹åº”çš„è¿ç®—é‡ä¹Ÿä¼šæ˜¾è‘—ä¸Šå‡ã€‚160 æ˜¯ä¸€ä¸ªç›¸å¯¹åˆé€‚çš„åˆ†è¾¨ç‡å¤§å°ã€‚</p><p>(facenet åŸè®ºæ–‡å°è¯•äº† 40x40, 80x80, 112x112, 160x160, 256x256)</p><p>embedding çš„å¤§å°ä¸º 128ï¼Œ å®éªŒæµ‹å¾—ï¼Œå½“è¶…è¿‡ 128 æ—¶å€™ï¼ŒéªŒè¯é›†çš„å‡†ç¡®ç‡å·²ç»æ²¡æœ‰ä¸Šå‡ï¼Œåè€Œæœ‰æ‰€ä¸‹é™ã€‚(64 -&gt; 128 -&gt; 256 -&gt; 512)ã€‚whyï¼Ÿ 128Då‘é‡æ‹¥æœ‰è¶³å¤Ÿçš„å®¹é‡hold ä½å¤§è§„æ¨¡çš„äººè„¸æ•°æ®é›†(ç™¾ä¸‡äººè„¸çº§åˆ«)ï¼Œ å¹¶ä¸”ç›¸å¯¹ç´§å‡‘ã€‚</p><h5 id="2-åŸºæœ¬åŸç†"><a href="#2-åŸºæœ¬åŸç†" class="headerlink" title="2. åŸºæœ¬åŸç†"></a>2. åŸºæœ¬åŸç†</h5><p>é€‰å–ä¸‰å…ƒç»„(anchor, pos, neg)ï¼Œå…¶ä¸­ï¼Œxå’Œpæ˜¯åŒä¸€ç±»ï¼Œxå’Œnæ˜¯ä¸åŒç±»ã€‚é‚£ä¹ˆå­¦ä¹ çš„è¿‡ç¨‹å°±æ˜¯å­¦åˆ°ä¸€ç§è¡¨ç¤ºï¼Œå¯¹äºå°½å¯èƒ½å¤šçš„ä¸‰å…ƒç»„ï¼Œä½¿å¾—anchorå’Œposçš„è·ç¦»ï¼Œå°äºanchorå’Œnegçš„è·ç¦»</p><h5 id="3-ä¸»å¹²ç½‘ç»œï¼š"><a href="#3-ä¸»å¹²ç½‘ç»œï¼š" class="headerlink" title="3. ä¸»å¹²ç½‘ç»œï¼š"></a>3. ä¸»å¹²ç½‘ç»œï¼š</h5><p>åŸå§‹è®ºæ–‡ä¸­ä½¿ç”¨çš„æ˜¯ googlenetã€githubä¸Šçš„facenetä½¿ç”¨çš„ inception resnet v1ã€mobilefacenet ä½¿ç”¨çš„æ˜¯ mobilenet v2</p><h6 id="1-GoogleNet"><a href="#1-GoogleNet" class="headerlink" title="(1) GoogleNet"></a>(1) GoogleNet</h6><p>åŸè®ºæ–‡ä¸­ä½¿ç”¨çš„æ˜¯ GoogleNetï¼Œ Googlenet çš„ä¸»è¦æ¶‰åŠåœ¨äºä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>Inception Moduleä¸­åŒ…å«3ç§ä¸åŒå°ºå¯¸çš„å·ç§¯å’Œ1ä¸ªæœ€å¤§æ± åŒ–ï¼Œå¢åŠ äº†ç½‘ç»œå¯¹ä¸åŒå°ºåº¦çš„é€‚åº”æ€§ã€‚</li></ul><p>ç¬¬ä¸€ä¸ªåˆ†æ”¯å¯¹è¾“å…¥è¿›è¡Œ 1x1å·ç§¯ï¼Œ<strong>1x1å·ç§¯å¯ä»¥è·¨é€šé“ç»„ç»‡ä¿¡æ¯ï¼Œæé«˜ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ï¼ŒåŒæ—¶å¯ä»¥å¯¹è¾“å‡ºé€šé“å‡ç»´å’Œé™ç»´</strong>ã€‚</p><p>ç¬¬äºŒä¸ªåˆ†æ”¯å…ˆä½¿ç”¨äº† 1x1 å·ç§¯ï¼Œç„¶åè¿æ¥ 3x3 å·ç§¯ï¼Œç›¸å½“äºè¿›è¡Œä¸¤æ¬¡ç‰¹å¾å˜æ¢ã€‚</p><p>ç¬¬ä¸‰ä¸ªåˆ†æ”¯å’Œç¬¬äºŒä¸ªåˆ†æ”¯ç±»ä¼¼ï¼Œå…ˆæ˜¯ä½¿ç”¨äº†1x1 çš„å·ç§¯ï¼Œç„¶åè¿æ¥ 5x5 çš„å·ç§¯ã€‚</p><p>æœ€åä¸€ä¸ªåˆ†æ”¯åˆ™æ˜¯3x3 æœ€å¤§æ± åŒ–åç›´æ¥ä½¿ç”¨1x1å·ç§¯ã€‚</p><p>Inception Module çš„4ä¸ªåˆ†æ”¯åœ¨æœ€åé€šè¿‡ä¸€ä¸ªèšåˆæ“ä½œåˆå¹¶ã€‚</p><ul><li>å»é™¤äº†æœ€åçš„å…¨è¿æ¥å±‚ï¼Œç”¨å…¨å±€å¹³å‡æ± åŒ–å±‚æ¥å–ä»£å®ƒã€‚</li></ul><h6 id="2-Mobilenet-v2"><a href="#2-Mobilenet-v2" class="headerlink" title="(2) Mobilenet v2"></a>(2) Mobilenet v2</h6><p>å¦ä¸€ç¯‡è®ºæ–‡åˆ™ä½¿ç”¨äº† mobilenetv2 (è¾“å…¥å˜æˆ112) ç»“æ„ä½œä¸ºä¸»è¦ç½‘ç»œï¼šä¸»è¦ä¿®æ”¹ç‚¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li><p>Inception ç»“æ„æ›¿æ¢ä¸º mobilenet v2 ç»“æ„ï¼š</p><p>mobilenet çš„ç»“æ„è¦ç‚¹ï¼šï¼ˆ1ï¼‰skip-connection è·³å±‚è¿æ¥ (2) å°†ä¼ ç»Ÿå·ç§¯åˆ†è§£ä¸ºé€é€šé“å·ç§¯(å…ˆè¿›è¡Œé€é€šé“å·ç§¯ä½†æ˜¯é€šé“ä¹‹é—´ä¸ç›¸åŠ ï¼Œç„¶åä½¿ç”¨1x1 å·ç§¯å¯¹é€šé“è¿›è¡Œæ•´åˆ), å¹¶åœ¨å‰é¢åŠ ä¸€ä¸ª1x1 çš„å·ç§¯è¿›è¡Œå‡ç»´ã€‚(3) å°†æœ€åçš„ ReLU æ›¿æ¢ä¸º Linear(éçº¿æ€§åœ¨é«˜ç»´æœ‰æº¢å‡ºï¼Œä½†æ˜¯åœ¨ä½ç»´ä¸å¦‚çº¿æ€§å¥½) </p></li><li><p>ç”¨å…¨å±€å¯åˆ†ç¦»å·ç§¯æ›¿ä»£åŸæœ‰çš„å…¨å±€æ± åŒ–å±‚ã€‚why? ç‰¹å¾å›¾ä¸Šçš„ä¸­å¿ƒç‚¹çš„æ„Ÿå—é‡å’Œè¾¹è§’çš„æ„Ÿå—é‡æ˜¯ä¸åŒçš„ï¼Œä¸­å¿ƒç‚¹çš„æ„Ÿå—é‡åŒ…æ‹¬äº†å®Œæ•´çš„å›¾ç‰‡ï¼Œè¾¹è§’ç‚¹çš„æ„ŸçŸ¥åŸŸå´åªæœ‰éƒ¨åˆ†çš„å›¾ç‰‡ï¼Œ ä¸åº”è¯¥è§†ä¸ºåŒç­‰é‡è¦ã€‚è¿™æ ·ä¼šå¯¼è‡´æ€§èƒ½çš„ä¸‹é™ã€‚</p></li><li><p>ä½¿ç”¨ arcface æ›¿æ¢æ‰ triplet æŸå¤±å‡½æ•°ã€‚ </p></li><li><p>å°ç»†èŠ‚ï¼šé€šé“æ‰©å¼ å€æ•°å˜å°(facenet æ˜¯ 1024ï¼Œ mobilenets åˆ™æ˜¯ 512)ï¼›ä½¿ç”¨preluä»£æ›¿reluï¼›ä½¿ç”¨batch Normalizationã€‚</p></li></ul><h5 id="4-é¢„å¤„ç†å·¥ä½œï¼š"><a href="#4-é¢„å¤„ç†å·¥ä½œï¼š" class="headerlink" title="4. é¢„å¤„ç†å·¥ä½œï¼š"></a>4. é¢„å¤„ç†å·¥ä½œï¼š</h5><p>(1) æ•°æ®é›†çš„æ•´ç†å’Œæ¸…æ´—(DDM æ™ºèƒ½çŒ«çœ¼[å¤§çº¦10Wå¼ ï¼Œ6åƒäººçš„æ ·å­-&gt; çŒ«çœ¼300å°ï¼Œæ¯å°20äºº]çš„çœŸå®æ•°æ® å’Œ CASIA äººè„¸æ•°æ®)</p><ul><li>ç±»é—´è¿‡æ»¤ï¼š æ¸…æ´—æ‰è·ç¦»ä¸ç±»ä¸­å¿ƒå°äº0.5 çš„è´Ÿæ ·æœ¬(å¯¹ä¸€ä¸ªç±»åˆ«ï¼Œå…ˆè®¡ç®—ç±»ä¸­å¿ƒï¼Œç„¶åç”¨æ‰€æœ‰æ ·æœ¬ï¼Œä¸å…¶è¿›è¡Œæ¯”è¾ƒ)</li><li><p>å›¾ç‰‡çš„è¿‡æ»¤ï¼šå°†ç»è¿‡äººè„¸æ£€æµ‹(MTCNN/FaceBoxes) è¿”å›çš„äººè„¸ç½®ä¿¡åº¦ å°äº 0.75 çš„å›¾ç‰‡ç›´æ¥è¿‡æ»¤æ‰</p></li><li><p>æŒ‰å›¾åƒæ•°é‡é˜ˆå€¼è¿›è¡Œæ•°æ®åˆ’åˆ†(äººè„¸ä½äº10å¼ çš„è¿‡æ»¤æ‰)</p></li><li>ç±»é—´è·ç¦»é—®é¢˜ï¼šæœ‰äº›å¯èƒ½æ˜¯åå­—é‡åˆçš„ï¼Œæ‰¾å‡ºæ¥åˆå¹¶åœ¨ä¸€èµ·</li></ul><p>(2) äººè„¸è¯†åˆ«å‰çš„å¤„ç†ï¼š</p><ul><li><p>äººè„¸å¯¹é½ï¼Ÿå¯ä»¥æœ‰ä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå½±å“ä¸æ˜¯å¾ˆå¤§ how?( é€šè¿‡ä»¿å°„å˜æ¢å°†åŸæœ¬çš„äº”ä¸ªlandmarkç¼©æ”¾æ—‹è½¬åˆ°å›ºå®šçš„ä½ç½®)</p><pre><code class="hljs python"><span class="hljs-keyword">from</span> skimage <span class="hljs-keyword">import</span> transform <span class="hljs-keyword">as</span> trans<span class="hljs-comment"># src</span>src = np.array([  [<span class="hljs-number">30.2946</span>, <span class="hljs-number">51.6963</span>],  [<span class="hljs-number">65.5318</span>, <span class="hljs-number">51.5014</span>],  [<span class="hljs-number">48.0252</span>, <span class="hljs-number">71.7366</span>],  [<span class="hljs-number">33.5493</span>, <span class="hljs-number">92.3655</span>],  [<span class="hljs-number">62.7299</span>, <span class="hljs-number">92.2041</span>] ], dtype=np.float32 )<span class="hljs-keyword">if</span> image_size[<span class="hljs-number">1</span>]==<span class="hljs-number">112</span>:  src[:,<span class="hljs-number">0</span>] += <span class="hljs-number">8.0</span>  <span class="hljs-comment"># dst</span>dst = landmark.astype(np.float32)tform = trans.SimilarityTransform()tform.estimate(dst, src)M = tform.params[<span class="hljs-number">0</span>:<span class="hljs-number">2</span>,:]<span class="hljs-comment"># warpAffine</span>warped = cv2.warpAffine(img, M, (image_size[<span class="hljs-number">1</span>],image_size[<span class="hljs-number">0</span>]), borderValue = <span class="hljs-number">0.0</span>)</code></pre></li><li><p>æ¨¡ç³Šè¿‡æ»¤ï¼Ÿï¼ˆå°†æ£€æµ‹å‡ºæ¥çš„äººè„¸ä½¿ç”¨æ‹‰æ™®æ‹‰æ–¯åšå·ç§¯è¿ç®—ï¼Œç„¶åè®¡ç®—æ–¹å·®ï¼Œ å°†æ–¹å·®å°äº 400 è¿‡æ»¤æ‰)</p></li><li>äººè„¸ç½®ä¿¡åº¦ï¼Œè¿™é‡Œè®¾ç½®ç½®ä¿¡åº¦0.8ï¼Œäººè„¸ç½®ä¿¡åº¦å¤ªå°å¯èƒ½ä¸æ˜¯äººè„¸ï¼Œç›´æ¥è¿‡æ»¤æ‰ã€‚</li><li>å¯¹å›¾ç‰‡è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼š(x-å‡å€¼)/æ ‡å‡†å·®</li></ul><h5 id="5-åå¤„ç†-å¦‚ä½•è¿›è¡Œåˆ†ç±»ï¼Ÿ"><a href="#5-åå¤„ç†-å¦‚ä½•è¿›è¡Œåˆ†ç±»ï¼Ÿ" class="headerlink" title="5. åå¤„ç†(å¦‚ä½•è¿›è¡Œåˆ†ç±»ï¼Ÿ)"></a>5. åå¤„ç†(å¦‚ä½•è¿›è¡Œåˆ†ç±»ï¼Ÿ)</h5><p>facenet ä½¿ç”¨æ¬§å¼è·ç¦»æ¥åº¦é‡æ˜¯å¦æ˜¯ä¸€ä¸ªäººã€‚ä½¿ç”¨åæŠ˜äº¤å‰éªŒè¯ï¼Œæˆ‘ä»¬è®¾å®šé˜ˆå€¼ä¸º 1.24ã€‚</p><p>mobilenet ä½¿ç”¨ç›¸ä¼¼æ€§ä½™å¼¦åº¦é‡ï¼šé˜ˆå€¼è®¾å®šä¸º 0.7ã€‚</p><p><img src="/2018/04/13/Facenet/3.png" alt="3"></p><h5 id="6-å‚æ•°è°ƒæ•´ï¼š-æ²¡æœ‰æ€ä¹ˆè°ƒæ•´å‚æ•°ï¼Œ-ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œæ›¿æ¢æ‰äº†æ•°æ®é›†è€Œå·²"><a href="#6-å‚æ•°è°ƒæ•´ï¼š-æ²¡æœ‰æ€ä¹ˆè°ƒæ•´å‚æ•°ï¼Œ-ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œæ›¿æ¢æ‰äº†æ•°æ®é›†è€Œå·²" class="headerlink" title="6. å‚æ•°è°ƒæ•´ï¼š(æ²¡æœ‰æ€ä¹ˆè°ƒæ•´å‚æ•°ï¼Œ ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œæ›¿æ¢æ‰äº†æ•°æ®é›†è€Œå·²)"></a>6. å‚æ•°è°ƒæ•´ï¼š(æ²¡æœ‰æ€ä¹ˆè°ƒæ•´å‚æ•°ï¼Œ ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œæ›¿æ¢æ‰äº†æ•°æ®é›†è€Œå·²)</h5><ul><li><p>ä¼˜åŒ–å™¨ï¼š<code>RMSProp</code></p><pre><code class="hljs apache"><span class="hljs-attribute">tf</span>.train.RMSPropOptimizer(learning_rate, decay=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>, momentum=<span class="hljs-number">0</span>.<span class="hljs-number">9</span>, epsilon=<span class="hljs-number">1</span>.<span class="hljs-number">0</span>)</code></pre></li><li><p>åˆå§‹å­¦ä¹ ç‡ï¼š0.1</p></li><li><p>å­¦ä¹ ç‡ä¸‹é™æ–¹å¼ï¼šexponential_decay</p><pre><code class="hljs yaml"><span class="hljs-comment"># Learning rate schedule: Maps an epoch number to a learning rate</span><span class="hljs-attr">0:</span>  <span class="hljs-number">0.1</span>  <span class="hljs-comment"># åˆå§‹å­¦ä¹ ç‡</span><span class="hljs-attr">300:</span> <span class="hljs-number">0.01</span><span class="hljs-attr">400:</span> <span class="hljs-number">0.001</span><span class="hljs-attr">1000:</span> <span class="hljs-number">0.0001</span></code></pre></li><li><p>margin Î±=0.2</p></li></ul><h5 id="7-why-facenet-ï¼Ÿ"><a href="#7-why-facenet-ï¼Ÿ" class="headerlink" title="7. why facenet ï¼Ÿ"></a>7. why facenet ï¼Ÿ</h5><ul><li><p>softmaxï¥§ç›´æ¥ï¼Œ(ä¸‰å…ƒç»„ç›´æ¥ä¼˜åŒ–è·ç¦»)ï¼Œå› â½½è€Œæ€§èƒ½ä¹Ÿä¸ï¥§å¥½ã€‚ softmaxäº§â½£ç”Ÿçš„ç‰¹å¾è¡¨ç¤ºå‘é‡ï¥¾éƒ½å¾ˆâ¼¤å¤§ï¼Œâ¼€ä¸€èˆ¬è¶…è¿‡1000ç»´ã€‚ </p></li><li><p>faceNetå¹¶æ²¡æœ‰åƒDeepFaceå’ŒDeepIDé‚£æ ·éœ€è¦å¯¹â»¬ã€‚ </p></li><li><p>faceNetå¾—åˆ°æœ€ç»ˆè¡¨ç¤ºåä¸ï¥§â½¤ç”¨åƒDeepIDé‚£æ ·éœ€è¦å†è®­ç»ƒæ¨¡å‹è¿›â¾åˆ†ç±»ï¼Œç›´æ¥è®¡ç®—è·ç¦»å°±å¥½äº†ï¦ºï¼Œç®€å•â½½è€Œæœ‰æ•ˆã€‚ </p></li></ul><h5 id="8-æ¨¡å‹çš„å¤§å°ï¼š"><a href="#8-æ¨¡å‹çš„å¤§å°ï¼š" class="headerlink" title="8. æ¨¡å‹çš„å¤§å°ï¼š"></a>8. æ¨¡å‹çš„å¤§å°ï¼š</h5><p>çº¿ä¸Šæ¨¡å‹ï¼š model_size:  (Inception resnet v2ï¼š 186M)      Paramï¼š7.5M   </p><p>çº¿ä¸‹æ¨¡å‹ï¼š(æ‰‹æœºç«¯) model_size:  4.1M       param:  0.99M       </p><h5 id="8-è®­ç»ƒæŠ€å·§"><a href="#8-è®­ç»ƒæŠ€å·§" class="headerlink" title="8. è®­ç»ƒæŠ€å·§"></a>8. è®­ç»ƒæŠ€å·§</h5><ul><li>ä¸‰å…ƒç»„çš„é€‰æ‹©<pre><code>     åœ¨ä¸€ä¸ªminibatchä¸­ï¼Œæˆ‘ä»¬æ ¹æ®å½“æ—¶çš„ embeddingï¼Œé€‰æ‹©ä¸€æ¬¡ä¸‰å…ƒç»„ï¼Œåœ¨è¿™äº›ä¸‰å…ƒç»„ä¸Šè®¡ç®—triplet-loss,  å†å¯¹embeddingè¿›è¡Œæ›´æ–°ï¼Œä¸æ–­é‡å¤ï¼Œç›´åˆ°æ”¶æ•›æˆ–è®­ç»ƒåˆ°æŒ‡å®šè¿­ä»£æ¬¡æ•°ã€‚</code></pre></li></ul>]]></content>
    
    
    <categories>
      
      <category>åŸºæœ¬æ–¹å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexo_blog_issue</title>
    <link href="/2018/03/04/Hexo-blog-issue/"/>
    <url>/2018/03/04/Hexo-blog-issue/</url>
    
    <content type="html"><![CDATA[<p>Hexo éƒ¨ç½²ã€é…ç½®ã€ä¿®æ”¹ç­‰å¸¸è§é—®é¢˜è®°å½•</p><a id="more"></a><h4 id="1-å†™æ–‡ç« ã€å‘å¸ƒæ–‡ç« "><a href="#1-å†™æ–‡ç« ã€å‘å¸ƒæ–‡ç« " class="headerlink" title="1. å†™æ–‡ç« ã€å‘å¸ƒæ–‡ç« "></a>1. å†™æ–‡ç« ã€å‘å¸ƒæ–‡ç« </h4><pre><code class="hljs shell">hexo new post article_title    # æ–°å»ºä¸€ç¯‡æ–‡ç« <span class="hljs-meta">#</span><span class="bash"> ç¼–è¾‘ [root]\<span class="hljs-built_in">source</span>\_posts ä¸‹çš„markdownæ–‡ä»¶</span>hexo g   # ç”Ÿæˆé™æ€ç½‘é¡µhexo s   # æœ¬åœ°é¢„è§ˆæ•ˆæœhexo d   # ä¸Šä¼ åˆ°github</code></pre><p>æ–‡ç« å¼€å¤´çš„é…ç½®å¦‚ä¸‹æ‰€ç¤º</p><pre><code class="hljs markdown">title: æ ‡é¢˜catalog: æ˜¯å¦æ˜¾ç¤ºæ®µè½ç›®å½•date: æ–‡ç« æ—¥æœŸsubtitle: å­æ ‡é¢˜header-img: é¡¶éƒ¨èƒŒæ™¯å›¾ç‰‡top: æ˜¯å¦ç½®é¡¶tags: æ ‡ç­¾categories: åˆ†ç±»</code></pre><h4 id="2-æ·»åŠ å›¾ç‰‡"><a href="#2-æ·»åŠ å›¾ç‰‡" class="headerlink" title="2.  æ·»åŠ å›¾ç‰‡"></a>2.  æ·»åŠ å›¾ç‰‡</h4><ol><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŠŠä¸»é¡µé…ç½®æ–‡ä»¶ <strong>_config.yml</strong> é‡Œçš„ <strong>post_asset_folder</strong>:è¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸º<strong>true</strong>ã€‚</p></li><li><p>å®‰è£…å¯ä»¥ä¸Šä¼ æœ¬åœ°å›¾ç‰‡çš„æ’ä»¶ï¼Œ <code>npm install hexo-asset-image --save</code>ã€‚æ­¤æ—¶è¿è¡Œ<code>hexo n &quot;xxxx&quot;</code>æ¥ç”Ÿæˆmdåšæ–‡æ—¶ï¼Œ<strong>/source/_posts</strong> æ–‡ä»¶å¤¹å†…é™¤äº† <strong>xxxx.md</strong> æ–‡ä»¶è¿˜æœ‰ä¸€ä¸ªåŒåçš„æ–‡ä»¶å¤¹ã€‚</p></li><li><p>å°†å›¾ç‰‡æ”¾åœ¨ <strong>xxxx</strong> è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨xxxx.mdä¸­ä½¿ç”¨markdownçš„æ ¼å¼å¼•å…¥å›¾ç‰‡ï¼š</p><pre><code class="hljs markdown">![<span class="hljs-string">title</span>](<span class="hljs-link">xxxx/img_name.jpg</span>)</code></pre></li><li><p>ä¿®æ”¹ <code>/node_modules/hexo-asset-image/index.js</code> ï¼Œ æ›¿æ¢ä¸ºå¦‚ä¸‹ä»£ç :</p><pre><code class="hljs js"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<span class="hljs-keyword">var</span> cheerio = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cheerio&#x27;</span>);<span class="hljs-comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPosition</span>(<span class="hljs-params">str, m, i</span>) </span>&#123;  <span class="hljs-keyword">return</span> str.split(m, i).join(m).length;&#125;<span class="hljs-keyword">var</span> version = <span class="hljs-built_in">String</span>(hexo.version).split(<span class="hljs-string">&#x27;.&#x27;</span>);hexo.extend.filter.register(<span class="hljs-string">&#x27;after_post_render&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;  <span class="hljs-keyword">var</span> config = hexo.config;  <span class="hljs-keyword">if</span>(config.post_asset_folder)&#123;    <span class="hljs-keyword">var</span> link = data.permalink;<span class="hljs-keyword">if</span>(version.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">Number</span>(version[<span class="hljs-number">0</span>]) == <span class="hljs-number">3</span>)   <span class="hljs-keyword">var</span> beginPos = getPosition(link, <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>;<span class="hljs-keyword">else</span>   <span class="hljs-keyword">var</span> beginPos = getPosition(link, <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-number">3</span>) + <span class="hljs-number">1</span>;<span class="hljs-comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span><span class="hljs-keyword">var</span> endPos = link.lastIndexOf(<span class="hljs-string">&#x27;/&#x27;</span>) + <span class="hljs-number">1</span>;    link = link.substring(beginPos, endPos);    <span class="hljs-keyword">var</span> toprocess = [<span class="hljs-string">&#x27;excerpt&#x27;</span>, <span class="hljs-string">&#x27;more&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>];    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; toprocess.length; i++)&#123;      <span class="hljs-keyword">var</span> key = toprocess[i];       <span class="hljs-keyword">var</span> $ = cheerio.load(data[key], &#123;        ignoreWhitespace: <span class="hljs-literal">false</span>,        xmlMode: <span class="hljs-literal">false</span>,        lowerCaseTags: <span class="hljs-literal">false</span>,        decodeEntities: <span class="hljs-literal">false</span>      &#125;);      $(<span class="hljs-string">&#x27;img&#x27;</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-keyword">if</span> ($(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&#x27;src&#x27;</span>))&#123;<span class="hljs-comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span><span class="hljs-keyword">var</span> src = $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&#x27;src&#x27;</span>).replace(<span class="hljs-string">&#x27;\\&#x27;</span>, <span class="hljs-string">&#x27;/&#x27;</span>);<span class="hljs-keyword">if</span>(!<span class="hljs-regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;   !<span class="hljs-regexp">/^\s*\//</span>.test(src)) &#123;  <span class="hljs-comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span>  <span class="hljs-comment">// In addition, to support multi-level local directory.</span>  <span class="hljs-keyword">var</span> linkArray = link.split(<span class="hljs-string">&#x27;/&#x27;</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>)</span>&#123;<span class="hljs-keyword">return</span> elem != <span class="hljs-string">&#x27;&#x27;</span>;  &#125;);  <span class="hljs-keyword">var</span> srcArray = src.split(<span class="hljs-string">&#x27;/&#x27;</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>)</span>&#123;<span class="hljs-keyword">return</span> elem != <span class="hljs-string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="hljs-string">&#x27;.&#x27;</span>;  &#125;);  <span class="hljs-keyword">if</span>(srcArray.length &gt; <span class="hljs-number">1</span>)srcArray.shift();  src = srcArray.join(<span class="hljs-string">&#x27;/&#x27;</span>);  $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&#x27;src&#x27;</span>, config.root + link + src);  <span class="hljs-built_in">console</span>.info&amp;&amp;<span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);&#125;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-built_in">console</span>.info&amp;&amp;<span class="hljs-built_in">console</span>.info(<span class="hljs-string">&quot;no src attr, skipped...&quot;</span>);<span class="hljs-built_in">console</span>.info&amp;&amp;<span class="hljs-built_in">console</span>.info($(<span class="hljs-built_in">this</span>));&#125;      &#125;);      data[key] = $.html();    &#125;  &#125;&#125;);</code></pre></li><li><p>æ£€æŸ¥ <code>_config.yml</code> æ–‡ä»¶ï¼Œ æ˜¯å¦ä¿®æ”¹äº†å¯¹åº”çš„ URLï¼š</p><pre><code class="hljs yaml"><span class="hljs-comment"># URL</span><span class="hljs-comment">## If your site is put in a subdirectory, set url as &#x27;http://example.com/child&#x27; and root as &#x27;/child/&#x27;</span><span class="hljs-attr">url:</span> <span class="hljs-string">https://polariszhao.github.io/</span>  <span class="hljs-comment"># ä¿®æ”¹ä¸ºå¯¹åº”çš„ URL</span></code></pre></li></ol><p><img src="/2018/03/04/Hexo-blog-issue/lena.bmp" alt="test_img"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>issue</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
